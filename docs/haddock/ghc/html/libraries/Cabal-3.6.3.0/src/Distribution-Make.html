<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<!-- Generated by HsColour, http://code.haskell.org/~malcolm/hscolour/ -->
<title>src/Distribution/Make.hs</title>
<link type='text/css' rel='stylesheet' href='hscolour.css' />
</head>
<body>
<pre><a name="line-1"></a><span class='hs-comment'>{-# LANGUAGE FlexibleContexts #-}</span>
<a name="line-2"></a><span class='hs-comment'>{-# LANGUAGE RankNTypes #-}</span>
<a name="line-3"></a>
<a name="line-4"></a><span class='hs-comment'>-----------------------------------------------------------------------------</span>
<a name="line-5"></a><span class='hs-comment'>-- |</span>
<a name="line-6"></a><span class='hs-comment'>-- Module      :  Distribution.Make</span>
<a name="line-7"></a><span class='hs-comment'>-- Copyright   :  Martin Sj&amp;#xF6;gren 2004</span>
<a name="line-8"></a><span class='hs-comment'>-- License     :  BSD3</span>
<a name="line-9"></a><span class='hs-comment'>--</span>
<a name="line-10"></a><span class='hs-comment'>-- Maintainer  :  cabal-devel@haskell.org</span>
<a name="line-11"></a><span class='hs-comment'>-- Portability :  portable</span>
<a name="line-12"></a><span class='hs-comment'>--</span>
<a name="line-13"></a><span class='hs-comment'>-- This is an alternative build system that delegates everything to the @make@</span>
<a name="line-14"></a><span class='hs-comment'>-- program. All the commands just end up calling @make@ with appropriate</span>
<a name="line-15"></a><span class='hs-comment'>-- arguments. The intention was to allow preexisting packages that used</span>
<a name="line-16"></a><span class='hs-comment'>-- makefiles to be wrapped into Cabal packages. In practice essentially all</span>
<a name="line-17"></a><span class='hs-comment'>-- such packages were converted over to the \"Simple\" build system instead.</span>
<a name="line-18"></a><span class='hs-comment'>-- Consequently this module is not used much and it certainly only sees cursory</span>
<a name="line-19"></a><span class='hs-comment'>-- maintenance and no testing. Perhaps at some point we should stop pretending</span>
<a name="line-20"></a><span class='hs-comment'>-- that it works.</span>
<a name="line-21"></a><span class='hs-comment'>--</span>
<a name="line-22"></a><span class='hs-comment'>-- Uses the parsed command-line from "Distribution.Simple.Setup" in order to build</span>
<a name="line-23"></a><span class='hs-comment'>-- Haskell tools using a back-end build system based on make. Obviously we</span>
<a name="line-24"></a><span class='hs-comment'>-- assume that there is a configure script, and that after the ConfigCmd has</span>
<a name="line-25"></a><span class='hs-comment'>-- been run, there is a Makefile. Further assumptions:</span>
<a name="line-26"></a><span class='hs-comment'>--</span>
<a name="line-27"></a><span class='hs-comment'>-- [ConfigCmd] We assume the configure script accepts</span>
<a name="line-28"></a><span class='hs-comment'>--              @--with-hc@,</span>
<a name="line-29"></a><span class='hs-comment'>--              @--with-hc-pkg@,</span>
<a name="line-30"></a><span class='hs-comment'>--              @--prefix@,</span>
<a name="line-31"></a><span class='hs-comment'>--              @--bindir@,</span>
<a name="line-32"></a><span class='hs-comment'>--              @--libdir@,</span>
<a name="line-33"></a><span class='hs-comment'>--              @--libexecdir@,</span>
<a name="line-34"></a><span class='hs-comment'>--              @--datadir@.</span>
<a name="line-35"></a><span class='hs-comment'>--</span>
<a name="line-36"></a><span class='hs-comment'>-- [BuildCmd] We assume that the default Makefile target will build everything.</span>
<a name="line-37"></a><span class='hs-comment'>--</span>
<a name="line-38"></a><span class='hs-comment'>-- [InstallCmd] We assume there is an @install@ target. Note that we assume that</span>
<a name="line-39"></a><span class='hs-comment'>-- this does *not* register the package!</span>
<a name="line-40"></a><span class='hs-comment'>--</span>
<a name="line-41"></a><span class='hs-comment'>-- [CopyCmd]    We assume there is a @copy@ target, and a variable @$(destdir)@.</span>
<a name="line-42"></a><span class='hs-comment'>--              The @copy@ target should probably just invoke @make install@</span>
<a name="line-43"></a><span class='hs-comment'>--              recursively (e.g. @$(MAKE) install prefix=$(destdir)\/$(prefix)</span>
<a name="line-44"></a><span class='hs-comment'>--              bindir=$(destdir)\/$(bindir)@. The reason we can\'t invoke @make</span>
<a name="line-45"></a><span class='hs-comment'>--              install@ directly here is that we don\'t know the value of @$(prefix)@.</span>
<a name="line-46"></a><span class='hs-comment'>--</span>
<a name="line-47"></a><span class='hs-comment'>-- [SDistCmd] We assume there is a @dist@ target.</span>
<a name="line-48"></a><span class='hs-comment'>--</span>
<a name="line-49"></a><span class='hs-comment'>-- [RegisterCmd] We assume there is a @register@ target and a variable @$(user)@.</span>
<a name="line-50"></a><span class='hs-comment'>--</span>
<a name="line-51"></a><span class='hs-comment'>-- [UnregisterCmd] We assume there is an @unregister@ target.</span>
<a name="line-52"></a><span class='hs-comment'>--</span>
<a name="line-53"></a><span class='hs-comment'>-- [HaddockCmd] We assume there is a @docs@ or @doc@ target.</span>
<a name="line-54"></a>
<a name="line-55"></a>
<a name="line-56"></a><span class='hs-comment'>--                      copy :</span>
<a name="line-57"></a><span class='hs-comment'>--                              $(MAKE) install prefix=$(destdir)/$(prefix) \</span>
<a name="line-58"></a><span class='hs-comment'>--                                              bindir=$(destdir)/$(bindir) \</span>
<a name="line-59"></a>
<a name="line-60"></a><span class='hs-keyword'>module</span> <span class='hs-conid'>Distribution.Make</span> <span class='hs-layout'>(</span>
<a name="line-61"></a>        <span class='hs-keyword'>module</span> <span class='hs-conid'>Distribution.Package</span><span class='hs-layout'>,</span>
<a name="line-62"></a>        <span class='hs-conid'>License</span><span class='hs-layout'>(</span><span class='hs-keyglyph'>..</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span> <span class='hs-conid'>Version</span><span class='hs-layout'>,</span>
<a name="line-63"></a>        <span class='hs-varid'>defaultMain</span><span class='hs-layout'>,</span> <span class='hs-varid'>defaultMainArgs</span>
<a name="line-64"></a>  <span class='hs-layout'>)</span> <span class='hs-keyword'>where</span>
<a name="line-65"></a>
<a name="line-66"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Prelude</span> <span class='hs-conid'>()</span>
<a name="line-67"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Distribution.Compat.Prelude</span>
<a name="line-68"></a>
<a name="line-69"></a><span class='hs-comment'>-- local</span>
<a name="line-70"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Distribution.Package</span>
<a name="line-71"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Distribution.Simple.Program</span>
<a name="line-72"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Distribution.Simple.Setup</span>
<a name="line-73"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Distribution.Simple.Command</span>
<a name="line-74"></a>
<a name="line-75"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Distribution.Simple.Utils</span>
<a name="line-76"></a>
<a name="line-77"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Distribution.License</span>
<a name="line-78"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Distribution.Version</span>
<a name="line-79"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Distribution.Pretty</span>
<a name="line-80"></a>
<a name="line-81"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>System.Environment</span> <span class='hs-layout'>(</span><span class='hs-varid'>getArgs</span><span class='hs-layout'>,</span> <span class='hs-varid'>getProgName</span><span class='hs-layout'>)</span>
<a name="line-82"></a>
<a name="line-83"></a><a name="defaultMain"></a><span class='hs-definition'>defaultMain</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IO</span> <span class='hs-conid'>()</span>
<a name="line-84"></a><span class='hs-definition'>defaultMain</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>getArgs</span> <span class='hs-varop'>&gt;&gt;=</span> <span class='hs-varid'>defaultMainArgs</span>
<a name="line-85"></a>
<a name="line-86"></a><a name="defaultMainArgs"></a><span class='hs-definition'>defaultMainArgs</span> <span class='hs-keyglyph'>::</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>String</span><span class='hs-keyglyph'>]</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-conid'>()</span>
<a name="line-87"></a><span class='hs-definition'>defaultMainArgs</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>defaultMainHelper</span>
<a name="line-88"></a>
<a name="line-89"></a><a name="defaultMainHelper"></a><span class='hs-definition'>defaultMainHelper</span> <span class='hs-keyglyph'>::</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>String</span><span class='hs-keyglyph'>]</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-conid'>()</span>
<a name="line-90"></a><span class='hs-definition'>defaultMainHelper</span> <span class='hs-varid'>args</span> <span class='hs-keyglyph'>=</span>
<a name="line-91"></a>  <span class='hs-keyword'>case</span> <span class='hs-varid'>commandsRun</span> <span class='hs-layout'>(</span><span class='hs-varid'>globalCommand</span> <span class='hs-varid'>commands</span><span class='hs-layout'>)</span> <span class='hs-varid'>commands</span> <span class='hs-varid'>args</span> <span class='hs-keyword'>of</span>
<a name="line-92"></a>    <span class='hs-conid'>CommandHelp</span>   <span class='hs-varid'>help</span>                 <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>printHelp</span> <span class='hs-varid'>help</span>
<a name="line-93"></a>    <span class='hs-conid'>CommandList</span>   <span class='hs-varid'>opts</span>                 <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>printOptionsList</span> <span class='hs-varid'>opts</span>
<a name="line-94"></a>    <span class='hs-conid'>CommandErrors</span> <span class='hs-varid'>errs</span>                 <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>printErrors</span> <span class='hs-varid'>errs</span>
<a name="line-95"></a>    <span class='hs-conid'>CommandReadyToGo</span> <span class='hs-layout'>(</span><span class='hs-varid'>flags</span><span class='hs-layout'>,</span> <span class='hs-varid'>commandParse</span><span class='hs-layout'>)</span>  <span class='hs-keyglyph'>-&gt;</span>
<a name="line-96"></a>      <span class='hs-keyword'>case</span> <span class='hs-varid'>commandParse</span> <span class='hs-keyword'>of</span>
<a name="line-97"></a>        <span class='hs-keyword'>_</span> <span class='hs-keyglyph'>|</span> <span class='hs-varid'>fromFlag</span> <span class='hs-layout'>(</span><span class='hs-varid'>globalVersion</span> <span class='hs-varid'>flags</span><span class='hs-layout'>)</span>        <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>printVersion</span>
<a name="line-98"></a>          <span class='hs-keyglyph'>|</span> <span class='hs-varid'>fromFlag</span> <span class='hs-layout'>(</span><span class='hs-varid'>globalNumericVersion</span> <span class='hs-varid'>flags</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>printNumericVersion</span>
<a name="line-99"></a>        <span class='hs-conid'>CommandHelp</span>     <span class='hs-varid'>help</span>           <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>printHelp</span> <span class='hs-varid'>help</span>
<a name="line-100"></a>        <span class='hs-conid'>CommandList</span>     <span class='hs-varid'>opts</span>           <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>printOptionsList</span> <span class='hs-varid'>opts</span>
<a name="line-101"></a>        <span class='hs-conid'>CommandErrors</span>   <span class='hs-varid'>errs</span>           <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>printErrors</span> <span class='hs-varid'>errs</span>
<a name="line-102"></a>        <span class='hs-conid'>CommandReadyToGo</span> <span class='hs-varid'>action</span>        <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>action</span>
<a name="line-103"></a>
<a name="line-104"></a>  <span class='hs-keyword'>where</span>
<a name="line-105"></a>    <span class='hs-varid'>printHelp</span> <span class='hs-varid'>help</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>getProgName</span> <span class='hs-varop'>&gt;&gt;=</span> <span class='hs-varid'>putStr</span> <span class='hs-varop'>.</span> <span class='hs-varid'>help</span>
<a name="line-106"></a>    <span class='hs-varid'>printOptionsList</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>putStr</span> <span class='hs-varop'>.</span> <span class='hs-varid'>unlines</span>
<a name="line-107"></a>    <span class='hs-varid'>printErrors</span> <span class='hs-varid'>errs</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>do</span>
<a name="line-108"></a>      <span class='hs-varid'>putStr</span> <span class='hs-layout'>(</span><span class='hs-varid'>intercalate</span> <span class='hs-str'>"\n"</span> <span class='hs-varid'>errs</span><span class='hs-layout'>)</span>
<a name="line-109"></a>      <span class='hs-varid'>exitWith</span> <span class='hs-layout'>(</span><span class='hs-conid'>ExitFailure</span> <span class='hs-num'>1</span><span class='hs-layout'>)</span>
<a name="line-110"></a>    <span class='hs-varid'>printNumericVersion</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>putStrLn</span> <span class='hs-varop'>$</span> <span class='hs-varid'>prettyShow</span> <span class='hs-varid'>cabalVersion</span>
<a name="line-111"></a>    <span class='hs-varid'>printVersion</span>        <span class='hs-keyglyph'>=</span> <span class='hs-varid'>putStrLn</span> <span class='hs-varop'>$</span> <span class='hs-str'>"Cabal library version "</span>
<a name="line-112"></a>                                  <span class='hs-varop'>++</span> <span class='hs-varid'>prettyShow</span> <span class='hs-varid'>cabalVersion</span>
<a name="line-113"></a>
<a name="line-114"></a>    <span class='hs-varid'>progs</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>defaultProgramDb</span>
<a name="line-115"></a>    <span class='hs-varid'>commands</span> <span class='hs-keyglyph'>=</span>
<a name="line-116"></a>      <span class='hs-keyglyph'>[</span><span class='hs-varid'>configureCommand</span> <span class='hs-varid'>progs</span> <span class='hs-varop'>`commandAddAction`</span> <span class='hs-varid'>configureAction</span>
<a name="line-117"></a>      <span class='hs-layout'>,</span><span class='hs-varid'>buildCommand</span>     <span class='hs-varid'>progs</span> <span class='hs-varop'>`commandAddAction`</span> <span class='hs-varid'>buildAction</span>
<a name="line-118"></a>      <span class='hs-layout'>,</span><span class='hs-varid'>installCommand</span>         <span class='hs-varop'>`commandAddAction`</span> <span class='hs-varid'>installAction</span>
<a name="line-119"></a>      <span class='hs-layout'>,</span><span class='hs-varid'>copyCommand</span>            <span class='hs-varop'>`commandAddAction`</span> <span class='hs-varid'>copyAction</span>
<a name="line-120"></a>      <span class='hs-layout'>,</span><span class='hs-varid'>haddockCommand</span>         <span class='hs-varop'>`commandAddAction`</span> <span class='hs-varid'>haddockAction</span>
<a name="line-121"></a>      <span class='hs-layout'>,</span><span class='hs-varid'>cleanCommand</span>           <span class='hs-varop'>`commandAddAction`</span> <span class='hs-varid'>cleanAction</span>
<a name="line-122"></a>      <span class='hs-layout'>,</span><span class='hs-varid'>sdistCommand</span>           <span class='hs-varop'>`commandAddAction`</span> <span class='hs-varid'>sdistAction</span>
<a name="line-123"></a>      <span class='hs-layout'>,</span><span class='hs-varid'>registerCommand</span>        <span class='hs-varop'>`commandAddAction`</span> <span class='hs-varid'>registerAction</span>
<a name="line-124"></a>      <span class='hs-layout'>,</span><span class='hs-varid'>unregisterCommand</span>      <span class='hs-varop'>`commandAddAction`</span> <span class='hs-varid'>unregisterAction</span>
<a name="line-125"></a>      <span class='hs-keyglyph'>]</span>
<a name="line-126"></a>
<a name="line-127"></a><a name="configureAction"></a><span class='hs-definition'>configureAction</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>ConfigFlags</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>String</span><span class='hs-keyglyph'>]</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-conid'>()</span>
<a name="line-128"></a><span class='hs-definition'>configureAction</span> <span class='hs-varid'>flags</span> <span class='hs-varid'>args</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>do</span>
<a name="line-129"></a>  <span class='hs-varid'>noExtraFlags</span> <span class='hs-varid'>args</span>
<a name="line-130"></a>  <span class='hs-keyword'>let</span> <span class='hs-varid'>verbosity</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fromFlag</span> <span class='hs-layout'>(</span><span class='hs-varid'>configVerbosity</span> <span class='hs-varid'>flags</span><span class='hs-layout'>)</span>
<a name="line-131"></a>  <span class='hs-varid'>rawSystemExit</span> <span class='hs-varid'>verbosity</span> <span class='hs-str'>"sh"</span> <span class='hs-varop'>$</span>
<a name="line-132"></a>    <span class='hs-str'>"configure"</span>
<a name="line-133"></a>    <span class='hs-conop'>:</span> <span class='hs-varid'>configureArgs</span> <span class='hs-varid'>backwardsCompatHack</span> <span class='hs-varid'>flags</span>
<a name="line-134"></a>  <span class='hs-keyword'>where</span> <span class='hs-varid'>backwardsCompatHack</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>True</span>
<a name="line-135"></a>
<a name="line-136"></a><a name="copyAction"></a><span class='hs-definition'>copyAction</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>CopyFlags</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>String</span><span class='hs-keyglyph'>]</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-conid'>()</span>
<a name="line-137"></a><span class='hs-definition'>copyAction</span> <span class='hs-varid'>flags</span> <span class='hs-varid'>args</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>do</span>
<a name="line-138"></a>  <span class='hs-varid'>noExtraFlags</span> <span class='hs-varid'>args</span>
<a name="line-139"></a>  <span class='hs-keyword'>let</span> <span class='hs-varid'>destArgs</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>case</span> <span class='hs-varid'>fromFlag</span> <span class='hs-varop'>$</span> <span class='hs-varid'>copyDest</span> <span class='hs-varid'>flags</span> <span class='hs-keyword'>of</span>
<a name="line-140"></a>        <span class='hs-conid'>NoCopyDest</span>      <span class='hs-keyglyph'>-&gt;</span> <span class='hs-keyglyph'>[</span><span class='hs-str'>"install"</span><span class='hs-keyglyph'>]</span>
<a name="line-141"></a>        <span class='hs-conid'>CopyTo</span> <span class='hs-varid'>path</span>     <span class='hs-keyglyph'>-&gt;</span> <span class='hs-keyglyph'>[</span><span class='hs-str'>"copy"</span><span class='hs-layout'>,</span> <span class='hs-str'>"destdir="</span> <span class='hs-varop'>++</span> <span class='hs-varid'>path</span><span class='hs-keyglyph'>]</span>
<a name="line-142"></a>        <span class='hs-conid'>CopyToDb</span> <span class='hs-keyword'>_</span>      <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>error</span> <span class='hs-str'>"CopyToDb not supported via Make"</span>
<a name="line-143"></a>
<a name="line-144"></a>  <span class='hs-varid'>rawSystemExit</span> <span class='hs-layout'>(</span><span class='hs-varid'>fromFlag</span> <span class='hs-varop'>$</span> <span class='hs-varid'>copyVerbosity</span> <span class='hs-varid'>flags</span><span class='hs-layout'>)</span> <span class='hs-str'>"make"</span> <span class='hs-varid'>destArgs</span>
<a name="line-145"></a>
<a name="line-146"></a><a name="installAction"></a><span class='hs-definition'>installAction</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>InstallFlags</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>String</span><span class='hs-keyglyph'>]</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-conid'>()</span>
<a name="line-147"></a><span class='hs-definition'>installAction</span> <span class='hs-varid'>flags</span> <span class='hs-varid'>args</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>do</span>
<a name="line-148"></a>  <span class='hs-varid'>noExtraFlags</span> <span class='hs-varid'>args</span>
<a name="line-149"></a>  <span class='hs-varid'>rawSystemExit</span> <span class='hs-layout'>(</span><span class='hs-varid'>fromFlag</span> <span class='hs-varop'>$</span> <span class='hs-varid'>installVerbosity</span> <span class='hs-varid'>flags</span><span class='hs-layout'>)</span> <span class='hs-str'>"make"</span> <span class='hs-keyglyph'>[</span><span class='hs-str'>"install"</span><span class='hs-keyglyph'>]</span>
<a name="line-150"></a>  <span class='hs-varid'>rawSystemExit</span> <span class='hs-layout'>(</span><span class='hs-varid'>fromFlag</span> <span class='hs-varop'>$</span> <span class='hs-varid'>installVerbosity</span> <span class='hs-varid'>flags</span><span class='hs-layout'>)</span> <span class='hs-str'>"make"</span> <span class='hs-keyglyph'>[</span><span class='hs-str'>"register"</span><span class='hs-keyglyph'>]</span>
<a name="line-151"></a>
<a name="line-152"></a><a name="haddockAction"></a><span class='hs-definition'>haddockAction</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>HaddockFlags</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>String</span><span class='hs-keyglyph'>]</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-conid'>()</span>
<a name="line-153"></a><span class='hs-definition'>haddockAction</span> <span class='hs-varid'>flags</span> <span class='hs-varid'>args</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>do</span>
<a name="line-154"></a>  <span class='hs-varid'>noExtraFlags</span> <span class='hs-varid'>args</span>
<a name="line-155"></a>  <span class='hs-varid'>rawSystemExit</span> <span class='hs-layout'>(</span><span class='hs-varid'>fromFlag</span> <span class='hs-varop'>$</span> <span class='hs-varid'>haddockVerbosity</span> <span class='hs-varid'>flags</span><span class='hs-layout'>)</span> <span class='hs-str'>"make"</span> <span class='hs-keyglyph'>[</span><span class='hs-str'>"docs"</span><span class='hs-keyglyph'>]</span>
<a name="line-156"></a>    <span class='hs-varop'>`catchIO`</span> <span class='hs-keyglyph'>\</span><span class='hs-keyword'>_</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-157"></a>    <span class='hs-varid'>rawSystemExit</span> <span class='hs-layout'>(</span><span class='hs-varid'>fromFlag</span> <span class='hs-varop'>$</span> <span class='hs-varid'>haddockVerbosity</span> <span class='hs-varid'>flags</span><span class='hs-layout'>)</span> <span class='hs-str'>"make"</span> <span class='hs-keyglyph'>[</span><span class='hs-str'>"doc"</span><span class='hs-keyglyph'>]</span>
<a name="line-158"></a>
<a name="line-159"></a><a name="buildAction"></a><span class='hs-definition'>buildAction</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>BuildFlags</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>String</span><span class='hs-keyglyph'>]</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-conid'>()</span>
<a name="line-160"></a><span class='hs-definition'>buildAction</span> <span class='hs-varid'>flags</span> <span class='hs-varid'>args</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>do</span>
<a name="line-161"></a>  <span class='hs-varid'>noExtraFlags</span> <span class='hs-varid'>args</span>
<a name="line-162"></a>  <span class='hs-varid'>rawSystemExit</span> <span class='hs-layout'>(</span><span class='hs-varid'>fromFlag</span> <span class='hs-varop'>$</span> <span class='hs-varid'>buildVerbosity</span> <span class='hs-varid'>flags</span><span class='hs-layout'>)</span> <span class='hs-str'>"make"</span> <span class='hs-conid'>[]</span>
<a name="line-163"></a>
<a name="line-164"></a><a name="cleanAction"></a><span class='hs-definition'>cleanAction</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>CleanFlags</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>String</span><span class='hs-keyglyph'>]</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-conid'>()</span>
<a name="line-165"></a><span class='hs-definition'>cleanAction</span> <span class='hs-varid'>flags</span> <span class='hs-varid'>args</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>do</span>
<a name="line-166"></a>  <span class='hs-varid'>noExtraFlags</span> <span class='hs-varid'>args</span>
<a name="line-167"></a>  <span class='hs-varid'>rawSystemExit</span> <span class='hs-layout'>(</span><span class='hs-varid'>fromFlag</span> <span class='hs-varop'>$</span> <span class='hs-varid'>cleanVerbosity</span> <span class='hs-varid'>flags</span><span class='hs-layout'>)</span> <span class='hs-str'>"make"</span> <span class='hs-keyglyph'>[</span><span class='hs-str'>"clean"</span><span class='hs-keyglyph'>]</span>
<a name="line-168"></a>
<a name="line-169"></a><a name="sdistAction"></a><span class='hs-definition'>sdistAction</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>SDistFlags</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>String</span><span class='hs-keyglyph'>]</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-conid'>()</span>
<a name="line-170"></a><span class='hs-definition'>sdistAction</span> <span class='hs-varid'>flags</span> <span class='hs-varid'>args</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>do</span>
<a name="line-171"></a>  <span class='hs-varid'>noExtraFlags</span> <span class='hs-varid'>args</span>
<a name="line-172"></a>  <span class='hs-varid'>rawSystemExit</span> <span class='hs-layout'>(</span><span class='hs-varid'>fromFlag</span> <span class='hs-varop'>$</span> <span class='hs-varid'>sDistVerbosity</span> <span class='hs-varid'>flags</span><span class='hs-layout'>)</span> <span class='hs-str'>"make"</span> <span class='hs-keyglyph'>[</span><span class='hs-str'>"dist"</span><span class='hs-keyglyph'>]</span>
<a name="line-173"></a>
<a name="line-174"></a><a name="registerAction"></a><span class='hs-definition'>registerAction</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>RegisterFlags</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>String</span><span class='hs-keyglyph'>]</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-conid'>()</span>
<a name="line-175"></a><span class='hs-definition'>registerAction</span>  <span class='hs-varid'>flags</span> <span class='hs-varid'>args</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>do</span>
<a name="line-176"></a>  <span class='hs-varid'>noExtraFlags</span> <span class='hs-varid'>args</span>
<a name="line-177"></a>  <span class='hs-varid'>rawSystemExit</span> <span class='hs-layout'>(</span><span class='hs-varid'>fromFlag</span> <span class='hs-varop'>$</span> <span class='hs-varid'>regVerbosity</span> <span class='hs-varid'>flags</span><span class='hs-layout'>)</span> <span class='hs-str'>"make"</span> <span class='hs-keyglyph'>[</span><span class='hs-str'>"register"</span><span class='hs-keyglyph'>]</span>
<a name="line-178"></a>
<a name="line-179"></a><a name="unregisterAction"></a><span class='hs-definition'>unregisterAction</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>RegisterFlags</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>String</span><span class='hs-keyglyph'>]</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-conid'>()</span>
<a name="line-180"></a><span class='hs-definition'>unregisterAction</span> <span class='hs-varid'>flags</span> <span class='hs-varid'>args</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>do</span>
<a name="line-181"></a>  <span class='hs-varid'>noExtraFlags</span> <span class='hs-varid'>args</span>
<a name="line-182"></a>  <span class='hs-varid'>rawSystemExit</span> <span class='hs-layout'>(</span><span class='hs-varid'>fromFlag</span> <span class='hs-varop'>$</span> <span class='hs-varid'>regVerbosity</span> <span class='hs-varid'>flags</span><span class='hs-layout'>)</span> <span class='hs-str'>"make"</span> <span class='hs-keyglyph'>[</span><span class='hs-str'>"unregister"</span><span class='hs-keyglyph'>]</span>
</pre></body>
</html>

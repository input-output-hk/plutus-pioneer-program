<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- Module      :  Distribution.Simple.Configure</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- Copyright   :  Isaac Jones 2003-2005</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- License     :  BSD3</span><span>
</span><span id="line-13"></span><span class="hs-comment">--</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- Maintainer  :  cabal-devel@haskell.org</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- Portability :  portable</span><span>
</span><span id="line-16"></span><span class="hs-comment">--</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- This deals with the /configure/ phase. It provides the 'configure' action</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- which is given the package description and configure flags. It then tries</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- to: configure the compiler; resolves any conditionals in the package</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- description; resolve the package dependencies; check if all the extensions</span><span>
</span><span id="line-21"></span><span class="hs-comment">-- used by this package are supported by the compiler; check that all the build</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- tools are available (including version checks if appropriate); checks for</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- any required @pkg-config@ packages (updating the 'BuildInfo' with the</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- results)</span><span>
</span><span id="line-25"></span><span class="hs-comment">--</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- Then based on all this it saves the info in the 'LocalBuildInfo' and writes</span><span>
</span><span id="line-27"></span><span class="hs-comment">-- it out to the @dist\/setup-config@ file. It also displays various details to</span><span>
</span><span id="line-28"></span><span class="hs-comment">-- the user, the amount of information displayed depending on the verbosity</span><span>
</span><span id="line-29"></span><span class="hs-comment">-- level.</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Distribution.Simple.Configure</span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#configure"><span class="hs-identifier">configure</span></a></span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#writePersistBuildConfig"><span class="hs-identifier">writePersistBuildConfig</span></a></span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#getConfigStateFile"><span class="hs-identifier">getConfigStateFile</span></a></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#getPersistBuildConfig"><span class="hs-identifier">getPersistBuildConfig</span></a></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#checkPersistBuildConfigOutdated"><span class="hs-identifier">checkPersistBuildConfigOutdated</span></a></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#tryGetPersistBuildConfig"><span class="hs-identifier">tryGetPersistBuildConfig</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#maybeGetPersistBuildConfig"><span class="hs-identifier">maybeGetPersistBuildConfig</span></a></span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#findDistPref"><span class="hs-identifier">findDistPref</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#findDistPrefOrDefault"><span class="hs-identifier">findDistPrefOrDefault</span></a></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#getInternalLibraries"><span class="hs-identifier">getInternalLibraries</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Backpack.Id.html#computeComponentId"><span class="hs-identifier">computeComponentId</span></a></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Backpack.Id.html#computeCompatPackageKey"><span class="hs-identifier">computeCompatPackageKey</span></a></span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#localBuildInfoFile"><span class="hs-identifier">localBuildInfoFile</span></a></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#getInstalledPackages"><span class="hs-identifier">getInstalledPackages</span></a></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#getInstalledPackagesMonitorFiles"><span class="hs-identifier">getInstalledPackagesMonitorFiles</span></a></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#getPackageDBContents"><span class="hs-identifier">getPackageDBContents</span></a></span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#configCompilerEx"><span class="hs-identifier">configCompilerEx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#configCompilerAuxEx"><span class="hs-identifier">configCompilerAuxEx</span></a></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#computeEffectiveProfiling"><span class="hs-identifier">computeEffectiveProfiling</span></a></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#ccLdOptionsBuildInfo"><span class="hs-identifier">ccLdOptionsBuildInfo</span></a></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#checkForeignDeps"><span class="hs-identifier">checkForeignDeps</span></a></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#interpretPackageDbFlags"><span class="hs-identifier">interpretPackageDbFlags</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#ConfigStateFileError"><span class="hs-identifier">ConfigStateFileError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#tryGetConfigStateFile"><span class="hs-identifier">tryGetConfigStateFile</span></a></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.PreProcess.html#platformDefines"><span class="hs-identifier">platformDefines</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Prelude.html#"><span class="hs-identifier">Prelude</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Unsafe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-List.html#tail"><span class="hs-identifier">tail</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Compat.Prelude.html"><span class="hs-identifier">Distribution.Compat.Prelude</span></a></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Compiler.html"><span class="hs-identifier">Distribution.Compiler</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Types.IncludeRenaming.html"><span class="hs-identifier">Distribution.Types.IncludeRenaming</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Utils.NubList.html"><span class="hs-identifier">Distribution.Utils.NubList</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html"><span class="hs-identifier">Distribution.Simple.Compiler</span></a></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.PreProcess.html"><span class="hs-identifier">Distribution.Simple.PreProcess</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Package.html"><span class="hs-identifier">Distribution.Package</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.InstalledPackageInfo.html"><span class="hs-identifier">Distribution.InstalledPackageInfo</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IPI</span></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.InstalledPackageInfo.html"><span class="hs-identifier">Distribution.InstalledPackageInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier">InstalledPackageInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Simple.PackageIndex.html"><span class="hs-identifier">Distribution.Simple.PackageIndex</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PackageIndex</span></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.PackageIndex.html"><span class="hs-identifier">Distribution.Simple.PackageIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.PackageIndex.html#InstalledPackageIndex"><span class="hs-identifier">InstalledPackageIndex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.PackageDescription.html"><span class="hs-identifier">Distribution.PackageDescription</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.PackageDescription.PrettyPrint.html"><span class="hs-identifier">Distribution.PackageDescription.PrettyPrint</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.PackageDescription.Configuration.html"><span class="hs-identifier">Distribution.PackageDescription.Configuration</span></a></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.PackageDescription.Check.html"><span class="hs-identifier">Distribution.PackageDescription.Check</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.PackageDescription.Check.html#doesFileExist"><span class="hs-identifier">doesFileExist</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.BuildToolDepends.html"><span class="hs-identifier">Distribution.Simple.BuildToolDepends</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.html"><span class="hs-identifier">Distribution.Simple.Program</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.Setup.html"><span class="hs-identifier">Distribution.Simple.Setup</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Setup</span></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.BuildTarget.html"><span class="hs-identifier">Distribution.Simple.BuildTarget</span></a></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.LocalBuildInfo.html"><span class="hs-identifier">Distribution.Simple.LocalBuildInfo</span></a></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Types.PackageVersionConstraint.html"><span class="hs-identifier">Distribution.Types.PackageVersionConstraint</span></a></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html"><span class="hs-identifier">Distribution.Types.LocalBuildInfo</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentRequestedSpec.html"><span class="hs-identifier">Distribution.Types.ComponentRequestedSpec</span></a></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Types.GivenComponent.html"><span class="hs-identifier">Distribution.Types.GivenComponent</span></a></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.Utils.html"><span class="hs-identifier">Distribution.Simple.Utils</span></a></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.System.html"><span class="hs-identifier">Distribution.System</span></a></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Version.html"><span class="hs-identifier">Distribution.Version</span></a></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html"><span class="hs-identifier">Distribution.Verbosity</span></a></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Compat.Graph.html"><span class="hs-identifier">Distribution.Compat.Graph</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Graph</span></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Compat.Stack.html"><span class="hs-identifier">Distribution.Compat.Stack</span></a></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Backpack.Configure.html"><span class="hs-identifier">Distribution.Backpack.Configure</span></a></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Backpack.DescribeUnitId.html"><span class="hs-identifier">Distribution.Backpack.DescribeUnitId</span></a></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Backpack.PreExistingComponent.html"><span class="hs-identifier">Distribution.Backpack.PreExistingComponent</span></a></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Backpack.ConfiguredComponent.html"><span class="hs-identifier">Distribution.Backpack.ConfiguredComponent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Backpack.ConfiguredComponent.html#newPackageDepsBehaviour"><span class="hs-identifier">newPackageDepsBehaviour</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Backpack.Id.html"><span class="hs-identifier">Distribution.Backpack.Id</span></a></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Utils.LogProgress.html"><span class="hs-identifier">Distribution.Utils.LogProgress</span></a></span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html"><span class="hs-identifier">Distribution.Simple.GHC</span></a></span><span>   </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">GHC</span></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Simple.GHCJS.html"><span class="hs-identifier">Distribution.Simple.GHCJS</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">GHCJS</span></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Simple.UHC.html"><span class="hs-identifier">Distribution.Simple.UHC</span></a></span><span>   </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UHC</span></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Simple.HaskellSuite.html"><span class="hs-identifier">Distribution.Simple.HaskellSuite</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HaskellSuite</span></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Control-Exception.html#"><span class="hs-identifier">Control.Exception</span></a></span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Control-Exception-Base.html#try"><span class="hs-identifier">try</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Utils.Structured.html"><span class="hs-identifier">Distribution.Utils.Structured</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Distribution.Utils.Structured.html#structuredDecodeOrFailIO"><span class="hs-identifier">structuredDecodeOrFailIO</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Utils.Structured.html#structuredEncode"><span class="hs-identifier">structuredEncode</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Compat.Directory.html"><span class="hs-identifier">Distribution.Compat.Directory</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#listDirectory"><span class="hs-identifier">listDirectory</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../bytestring-0.11.3.1/src/Data-ByteString-Lazy.html#"><span class="hs-identifier">Data.ByteString.Lazy</span></a></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../bytestring-0.11.3.1/src/Data-ByteString-Lazy-Internal.html#ByteString"><span class="hs-identifier">ByteString</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../bytestring-0.11.3.1/src/Data-ByteString.html#"><span class="hs-identifier">Data.ByteString</span></a></span><span>            </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../bytestring-0.11.3.1/src/Data-ByteString-Lazy-Char8.html#"><span class="hs-identifier">Data.ByteString.Lazy.Char8</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BLC8</span></span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-List.html#"><span class="hs-identifier">Data.List</span></a></span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-OldList.html#%5C%5C"><span class="hs-operator">(\\)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-OldList.html#inits"><span class="hs-identifier">inits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-OldList.html#stripPrefix"><span class="hs-identifier">stripPrefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-OldList.html#intersect"><span class="hs-identifier">intersect</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-OldList.html#dropWhileEnd"><span class="hs-identifier">dropWhileEnd</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Map.html#"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#"><span class="hs-identifier">System.Directory</span></a></span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#canonicalizePath"><span class="hs-identifier">canonicalizePath</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#createDirectoryIfMissing"><span class="hs-identifier">createDirectoryIfMissing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#doesFileExist"><span class="hs-identifier">doesFileExist</span></a></span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#getTemporaryDirectory"><span class="hs-identifier">getTemporaryDirectory</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#removeFile"><span class="hs-identifier">removeFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../filepath-1.4.2.2/src/System-FilePath.html#"><span class="hs-identifier">System.FilePath</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator">(&lt;/&gt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#isAbsolute"><span class="hs-identifier">isAbsolute</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#takeDirectory"><span class="hs-identifier">takeDirectory</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Compat.Directory.html"><span class="hs-identifier">Distribution.Compat.Directory</span></a></span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#doesPathExist"><span class="hs-identifier">doesPathExist</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/System-Info.html#"><span class="hs-identifier">System.Info</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/System-Info.html#compilerName"><span class="hs-identifier">compilerName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/System-Info.html#compilerVersion"><span class="hs-identifier">compilerVersion</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/System-IO.html#"><span class="hs-identifier">System.IO</span></a></span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO-Handle-Text.html#hPutStrLn"><span class="hs-identifier">hPutStrLn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO-Handle.html#hClose"><span class="hs-identifier">hClose</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Pretty.html"><span class="hs-identifier">Distribution.Pretty</span></a></span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Distribution.Pretty.html#pretty"><span class="hs-identifier">pretty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Pretty.html#defaultStyle"><span class="hs-identifier">defaultStyle</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier">prettyShow</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Parsec.html"><span class="hs-identifier">Distribution.Parsec</span></a></span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Distribution.Parsec.html#simpleParsec"><span class="hs-identifier">simpleParsec</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint.html#"><span class="hs-identifier">Text.PrettyPrint</span></a></span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#Doc"><span class="hs-identifier">Doc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#%24%2B%24"><span class="hs-operator">($+$)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#char"><span class="hs-identifier">char</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#comma"><span class="hs-identifier">comma</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#hsep"><span class="hs-identifier">hsep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#nest"><span class="hs-identifier">nest</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#punctuate"><span class="hs-identifier">punctuate</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#quotes"><span class="hs-identifier">quotes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#render"><span class="hs-identifier">render</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#renderStyle"><span class="hs-identifier">renderStyle</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#sep"><span class="hs-identifier">sep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#text"><span class="hs-identifier">text</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Compat.Environment.html"><span class="hs-identifier">Distribution.Compat.Environment</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/System-Environment.html#lookupEnv"><span class="hs-identifier">lookupEnv</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Set.html#"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-132"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Compat.NonEmptySet.html"><span class="hs-identifier">Distribution.Compat.NonEmptySet</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NES</span></span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-keyword">type</span><span> </span><span id="UseExternalInternalDeps"><span class="annot"><a href="Distribution.Simple.Configure.html#UseExternalInternalDeps"><span class="hs-identifier hs-var">UseExternalInternalDeps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-comment">-- | The errors that can be thrown when reading the @setup-config@ file.</span><span>
</span><span id="line-138"></span><span class="hs-keyword">data</span><span> </span><span id="ConfigStateFileError"><span class="annot"><a href="Distribution.Simple.Configure.html#ConfigStateFileError"><span class="hs-identifier hs-var">ConfigStateFileError</span></a></span></span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="ConfigStateFileNoHeader"><span class="annot"><a href="Distribution.Simple.Configure.html#ConfigStateFileNoHeader"><span class="hs-identifier hs-var">ConfigStateFileNoHeader</span></a></span></span><span> </span><span class="hs-comment">-- ^ No header found.</span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ConfigStateFileBadHeader"><span class="annot"><a href="Distribution.Simple.Configure.html#ConfigStateFileBadHeader"><span class="hs-identifier hs-var">ConfigStateFileBadHeader</span></a></span></span><span> </span><span class="hs-comment">-- ^ Incorrect header.</span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ConfigStateFileNoParse"><span class="annot"><a href="Distribution.Simple.Configure.html#ConfigStateFileNoParse"><span class="hs-identifier hs-var">ConfigStateFileNoParse</span></a></span></span><span> </span><span class="hs-comment">-- ^ Cannot parse file contents.</span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ConfigStateFileMissing"><span class="annot"><a href="Distribution.Simple.Configure.html#ConfigStateFileMissing"><span class="hs-identifier hs-var">ConfigStateFileMissing</span></a></span></span><span> </span><span class="hs-comment">-- ^ No file!</span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ConfigStateFileBadVersion"><span class="annot"><a href="Distribution.Simple.Configure.html#ConfigStateFileBadVersion"><span class="hs-identifier hs-var">ConfigStateFileBadVersion</span></a></span></span><span> </span><span class="annot"><a href="Distribution.Types.PackageId.html#PackageIdentifier"><span class="hs-identifier hs-type">PackageIdentifier</span></a></span><span> </span><span class="annot"><a href="Distribution.Types.PackageId.html#PackageIdentifier"><span class="hs-identifier hs-type">PackageIdentifier</span></a></span><span>
</span><span id="line-144"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#ConfigStateFileError"><span class="hs-identifier hs-type">ConfigStateFileError</span></a></span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ Mismatched version.</span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Typeable-Internal.html#Typeable"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span class="hs-comment">-- | Format a 'ConfigStateFileError' as a user-facing error message.</span><span>
</span><span id="line-148"></span><span class="annot"><a href="Distribution.Simple.Configure.html#dispConfigStateFileError"><span class="hs-identifier hs-type">dispConfigStateFileError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#ConfigStateFileError"><span class="hs-identifier hs-type">ConfigStateFileError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span>
</span><span id="line-149"></span><span id="dispConfigStateFileError"><span class="annot"><span class="annottext">dispConfigStateFileError :: ConfigStateFileError -&gt; Doc
</span><a href="Distribution.Simple.Configure.html#dispConfigStateFileError"><span class="hs-identifier hs-var hs-var">dispConfigStateFileError</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConfigStateFileError
</span><a href="Distribution.Simple.Configure.html#ConfigStateFileNoHeader"><span class="hs-identifier hs-var">ConfigStateFileNoHeader</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><span class="annottext">[Char] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Saved package config file header is missing.&quot;</span></span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Re-run the 'configure' command.&quot;</span></span><span>
</span><span id="line-152"></span><span class="annot"><a href="Distribution.Simple.Configure.html#dispConfigStateFileError"><span class="hs-identifier hs-var">dispConfigStateFileError</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigStateFileError
</span><a href="Distribution.Simple.Configure.html#ConfigStateFileBadHeader"><span class="hs-identifier hs-var">ConfigStateFileBadHeader</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><span class="annottext">[Char] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Saved package config file header is corrupt.&quot;</span></span><span>
</span><span id="line-154"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Re-run the 'configure' command.&quot;</span></span><span>
</span><span id="line-155"></span><span class="annot"><a href="Distribution.Simple.Configure.html#dispConfigStateFileError"><span class="hs-identifier hs-var">dispConfigStateFileError</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigStateFileError
</span><a href="Distribution.Simple.Configure.html#ConfigStateFileNoParse"><span class="hs-identifier hs-var">ConfigStateFileNoParse</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-156"></span><span>    </span><span class="annot"><span class="annottext">[Char] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Saved package config file is corrupt.&quot;</span></span><span>
</span><span id="line-157"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Re-run the 'configure' command.&quot;</span></span><span>
</span><span id="line-158"></span><span class="annot"><a href="Distribution.Simple.Configure.html#dispConfigStateFileError"><span class="hs-identifier hs-var">dispConfigStateFileError</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigStateFileError
</span><a href="Distribution.Simple.Configure.html#ConfigStateFileMissing"><span class="hs-identifier hs-var">ConfigStateFileMissing</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><span class="annottext">[Char] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Run the 'configure' command first.&quot;</span></span><span>
</span><span id="line-160"></span><span class="annot"><a href="Distribution.Simple.Configure.html#dispConfigStateFileError"><span class="hs-identifier hs-var">dispConfigStateFileError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.Configure.html#ConfigStateFileBadVersion"><span class="hs-identifier hs-type">ConfigStateFileBadVersion</span></a></span><span> </span><span id="local-6989586621679747549"><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747549"><span class="hs-identifier hs-var">oldCabal</span></a></span></span><span> </span><span id="local-6989586621679747548"><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747548"><span class="hs-identifier hs-var">oldCompiler</span></a></span></span><span> </span><span class="annot"><span class="annottext">Either ConfigStateFileError LocalBuildInfo
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-161"></span><span>    </span><span class="annot"><span class="annottext">[Char] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Saved package config file is outdated:&quot;</span></span><span>
</span><span id="line-162"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#%24%2B%24"><span class="hs-operator hs-var">$+$</span></a></span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621679747547"><span class="hs-identifier hs-var">badCabal</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#%24%2B%24"><span class="hs-operator hs-var">$+$</span></a></span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621679747546"><span class="hs-identifier hs-var">badCompiler</span></a></span><span>
</span><span id="line-163"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#%24%2B%24"><span class="hs-operator hs-var">$+$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Re-run the 'configure' command.&quot;</span></span><span>
</span><span id="line-164"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-165"></span><span>      </span><span id="local-6989586621679747547"><span class="annot"><span class="annottext">badCabal :: Doc
</span><a href="#local-6989586621679747547"><span class="hs-identifier hs-var hs-var">badCabal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-166"></span><span>          </span><span class="annot"><span class="annottext">[Char] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;&#8226; the Cabal version changed from&quot;</span></span><span>
</span><span id="line-167"></span><span>          </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; Doc
</span><a href="Distribution.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747549"><span class="hs-identifier hs-var">oldCabal</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;to&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; Doc
</span><a href="Distribution.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="Distribution.Simple.Configure.html#currentCabalId"><span class="hs-identifier hs-var">currentCabalId</span></a></span><span>
</span><span id="line-168"></span><span>      </span><span id="local-6989586621679747546"><span class="annot"><span class="annottext">badCompiler :: Doc
</span><a href="#local-6989586621679747546"><span class="hs-identifier hs-var hs-var">badCompiler</span></a></span></span><span>
</span><span id="line-169"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747548"><span class="hs-identifier hs-var">oldCompiler</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="Distribution.Simple.Configure.html#currentCompilerId"><span class="hs-identifier hs-var">currentCompilerId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-170"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-171"></span><span>            </span><span class="annot"><span class="annottext">[Char] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;&#8226; the compiler changed from&quot;</span></span><span>
</span><span id="line-172"></span><span>            </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; Doc
</span><a href="Distribution.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747548"><span class="hs-identifier hs-var">oldCompiler</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;to&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; Doc
</span><a href="Distribution.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="Distribution.Simple.Configure.html#currentCompilerId"><span class="hs-identifier hs-var">currentCompilerId</span></a></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679747528"><span id="local-6989586621679747531"><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#ConfigStateFileError"><span class="hs-identifier hs-type">ConfigStateFileError</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-175"></span><span>    </span><span id="local-6989586621679747526"><span class="annot"><span class="annottext">show :: ConfigStateFileError -&gt; [Char]
</span><a href="../../base-4.16.3.0/src/GHC-Show.html#show"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Style -&gt; Doc -&gt; [Char]
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#renderStyle"><span class="hs-identifier hs-var">renderStyle</span></a></span><span> </span><span class="annot"><span class="annottext">Style
</span><a href="Distribution.Pretty.html#defaultStyle"><span class="hs-identifier hs-var">defaultStyle</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigStateFileError -&gt; Doc
</span><a href="Distribution.Simple.Configure.html#dispConfigStateFileError"><span class="hs-identifier hs-var">dispConfigStateFileError</span></a></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679747514"><span id="local-6989586621679747516"><span id="local-6989586621679747518"><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Exception-Type.html#Exception"><span class="hs-identifier hs-type">Exception</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#ConfigStateFileError"><span class="hs-identifier hs-type">ConfigStateFileError</span></a></span></span></span></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="hs-comment">-- | Read the 'localBuildInfoFile'.  Throw an exception if the file is</span><span>
</span><span id="line-180"></span><span class="hs-comment">-- missing, if the file cannot be read, or if the file was created by an older</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- version of Cabal.</span><span>
</span><span id="line-182"></span><span class="annot"><a href="Distribution.Simple.Configure.html#getConfigStateFile"><span class="hs-identifier hs-type">getConfigStateFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-comment">-- ^ The file path of the @setup-config@ file.</span><span>
</span><span id="line-183"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>
</span><span id="line-184"></span><span id="getConfigStateFile"><span class="annot"><span class="annottext">getConfigStateFile :: [Char] -&gt; IO LocalBuildInfo
</span><a href="Distribution.Simple.Configure.html#getConfigStateFile"><span class="hs-identifier hs-var hs-var">getConfigStateFile</span></a></span></span><span> </span><span id="local-6989586621679747511"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747511"><span class="hs-identifier hs-var">filename</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-185"></span><span>    </span><span id="local-6989586621679747510"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747510"><span class="hs-identifier hs-var">exists</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; IO Bool
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#doesFileExist"><span class="hs-identifier hs-var">doesFileExist</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747511"><span class="hs-identifier hs-var">filename</span></a></span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747510"><span class="hs-identifier hs-var">exists</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="../../base-4.16.3.0/src/GHC-IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigStateFileError
</span><a href="Distribution.Simple.Configure.html#ConfigStateFileMissing"><span class="hs-identifier hs-var">ConfigStateFileMissing</span></a></span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-comment">-- Read the config file into a strict ByteString to avoid problems with</span><span>
</span><span id="line-188"></span><span>    </span><span class="hs-comment">-- lazy I/O, then convert to lazy because the binary package needs that.</span><span>
</span><span id="line-189"></span><span>    </span><span id="local-6989586621679747507"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679747507"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; IO ByteString
</span><a href="../../bytestring-0.11.3.1/src/Data-ByteString.html#readFile"><span class="hs-identifier hs-var">BS.readFile</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747511"><span class="hs-identifier hs-var">filename</span></a></span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679747504"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679747504"><span class="hs-identifier hs-var">header</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679747503"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679747503"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; ByteString -&gt; (ByteString, ByteString)
</span><a href="../../bytestring-0.11.3.1/src/Data-ByteString-Lazy-Char8.html#span"><span class="hs-identifier hs-var">BLC8.span</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\n'</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ByteString] -&gt; ByteString
</span><a href="../../bytestring-0.11.3.1/src/Data-ByteString-Lazy.html#fromChunks"><span class="hs-identifier hs-var">BLC8.fromChunks</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679747507"><span class="hs-identifier hs-var">contents</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679747499"><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747499"><span class="hs-identifier hs-var">cabalId</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679747498"><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747498"><span class="hs-identifier hs-var">compId</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; IO (PackageIdentifier, PackageIdentifier)
</span><a href="Distribution.Simple.Configure.html#parseHeader"><span class="hs-identifier hs-var">parseHeader</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679747504"><span class="hs-identifier hs-var">header</span></a></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747489"><span class="annot"><span class="annottext">getStoredValue :: IO LocalBuildInfo
</span><a href="#local-6989586621679747489"><span class="hs-identifier hs-var hs-var">getStoredValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-195"></span><span>          </span><span id="local-6989586621679747488"><span class="annot"><span class="annottext">Either [Char] LocalBuildInfo
</span><a href="#local-6989586621679747488"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a.
(Binary a, Structured a) =&gt;
ByteString -&gt; IO (Either [Char] a)
</span><a href="Distribution.Utils.Structured.html#structuredDecodeOrFailIO"><span class="hs-identifier hs-var">structuredDecodeOrFailIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; ByteString -&gt; ByteString
</span><a href="../../bytestring-0.11.3.1/src/Data-ByteString-Lazy.html#tail"><span class="hs-identifier hs-var">BLC8.tail</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679747503"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either [Char] LocalBuildInfo
</span><a href="#local-6989586621679747488"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-197"></span><span>            </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="../../base-4.16.3.0/src/GHC-IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigStateFileError
</span><a href="Distribution.Simple.Configure.html#ConfigStateFileNoParse"><span class="hs-identifier hs-var">ConfigStateFileNoParse</span></a></span><span>
</span><span id="line-198"></span><span>            </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679747486"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679747486"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679747486"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-199"></span><span>        </span><span id="local-6989586621679747481"><span class="annot"><span class="annottext">deferErrorIfBadVersion :: IO LocalBuildInfo -&gt; IO LocalBuildInfo
</span><a href="#local-6989586621679747481"><span class="hs-identifier hs-var hs-var">deferErrorIfBadVersion</span></a></span></span><span> </span><span id="local-6989586621679747480"><span class="annot"><span class="annottext">IO LocalBuildInfo
</span><a href="#local-6989586621679747480"><span class="hs-identifier hs-var">act</span></a></span></span><span>
</span><span id="line-200"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747499"><span class="hs-identifier hs-var">cabalId</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="Distribution.Simple.Configure.html#currentCabalId"><span class="hs-identifier hs-var">currentCabalId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-201"></span><span>              </span><span id="local-6989586621679747479"><span class="annot"><span class="annottext">Either ConfigStateFileError LocalBuildInfo
</span><a href="#local-6989586621679747479"><span class="hs-identifier hs-var">eResult</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall e a. Exception e =&gt; IO a -&gt; IO (Either e a)
</span><a href="../../base-4.16.3.0/src/Control-Exception-Base.html#try"><span class="hs-identifier hs-var">try</span></a></span><span> </span><span class="annot"><span class="annottext">IO LocalBuildInfo
</span><a href="#local-6989586621679747480"><span class="hs-identifier hs-var">act</span></a></span><span>
</span><span id="line-202"></span><span>              </span><span class="annot"><span class="annottext">forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="../../base-4.16.3.0/src/GHC-IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
-&gt; PackageIdentifier
-&gt; Either ConfigStateFileError LocalBuildInfo
-&gt; ConfigStateFileError
</span><a href="Distribution.Simple.Configure.html#ConfigStateFileBadVersion"><span class="hs-identifier hs-var">ConfigStateFileBadVersion</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747499"><span class="hs-identifier hs-var">cabalId</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747498"><span class="hs-identifier hs-var">compId</span></a></span><span> </span><span class="annot"><span class="annottext">Either ConfigStateFileError LocalBuildInfo
</span><a href="#local-6989586621679747479"><span class="hs-identifier hs-var">eResult</span></a></span><span>
</span><span id="line-203"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO LocalBuildInfo
</span><a href="#local-6989586621679747480"><span class="hs-identifier hs-var">act</span></a></span><span>
</span><span id="line-204"></span><span>    </span><span class="annot"><span class="annottext">IO LocalBuildInfo -&gt; IO LocalBuildInfo
</span><a href="#local-6989586621679747481"><span class="hs-identifier hs-var">deferErrorIfBadVersion</span></a></span><span> </span><span class="annot"><span class="annottext">IO LocalBuildInfo
</span><a href="#local-6989586621679747489"><span class="hs-identifier hs-var">getStoredValue</span></a></span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-206"></span><span>    </span><span class="annot"><span class="annottext">CallStack
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; CallStack
</span><a href="../../base-4.16.3.0/src/GHC-Stack.html#callStack"><span class="hs-identifier hs-var">callStack</span></a></span><span> </span><span class="hs-comment">-- TODO: attach call stack to exception</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-comment">-- | Read the 'localBuildInfoFile', returning either an error or the local build</span><span>
</span><span id="line-209"></span><span class="hs-comment">-- info.</span><span>
</span><span id="line-210"></span><span class="annot"><a href="Distribution.Simple.Configure.html#tryGetConfigStateFile"><span class="hs-identifier hs-type">tryGetConfigStateFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-comment">-- ^ The file path of the @setup-config@ file.</span><span>
</span><span id="line-211"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#ConfigStateFileError"><span class="hs-identifier hs-type">ConfigStateFileError</span></a></span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span id="tryGetConfigStateFile"><span class="annot"><span class="annottext">tryGetConfigStateFile :: [Char] -&gt; IO (Either ConfigStateFileError LocalBuildInfo)
</span><a href="Distribution.Simple.Configure.html#tryGetConfigStateFile"><span class="hs-identifier hs-var hs-var">tryGetConfigStateFile</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall e a. Exception e =&gt; IO a -&gt; IO (Either e a)
</span><a href="../../base-4.16.3.0/src/Control-Exception-Base.html#try"><span class="hs-identifier hs-var">try</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; IO LocalBuildInfo
</span><a href="Distribution.Simple.Configure.html#getConfigStateFile"><span class="hs-identifier hs-var">getConfigStateFile</span></a></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="hs-comment">-- | Try to read the 'localBuildInfoFile'.</span><span>
</span><span id="line-215"></span><span class="annot"><a href="Distribution.Simple.Configure.html#tryGetPersistBuildConfig"><span class="hs-identifier hs-type">tryGetPersistBuildConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-comment">-- ^ The @dist@ directory path.</span><span>
</span><span id="line-216"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#ConfigStateFileError"><span class="hs-identifier hs-type">ConfigStateFileError</span></a></span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span id="tryGetPersistBuildConfig"><span class="annot"><span class="annottext">tryGetPersistBuildConfig :: [Char] -&gt; IO (Either ConfigStateFileError LocalBuildInfo)
</span><a href="Distribution.Simple.Configure.html#tryGetPersistBuildConfig"><span class="hs-identifier hs-var hs-var">tryGetPersistBuildConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall e a. Exception e =&gt; IO a -&gt; IO (Either e a)
</span><a href="../../base-4.16.3.0/src/Control-Exception-Base.html#try"><span class="hs-identifier hs-var">try</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; IO LocalBuildInfo
</span><a href="Distribution.Simple.Configure.html#getPersistBuildConfig"><span class="hs-identifier hs-var">getPersistBuildConfig</span></a></span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="hs-comment">-- | Read the 'localBuildInfoFile'. Throw an exception if the file is</span><span>
</span><span id="line-220"></span><span class="hs-comment">-- missing, if the file cannot be read, or if the file was created by an older</span><span>
</span><span id="line-221"></span><span class="hs-comment">-- version of Cabal.</span><span>
</span><span id="line-222"></span><span class="annot"><a href="Distribution.Simple.Configure.html#getPersistBuildConfig"><span class="hs-identifier hs-type">getPersistBuildConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-comment">-- ^ The @dist@ directory path.</span><span>
</span><span id="line-223"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>
</span><span id="line-224"></span><span id="getPersistBuildConfig"><span class="annot"><span class="annottext">getPersistBuildConfig :: [Char] -&gt; IO LocalBuildInfo
</span><a href="Distribution.Simple.Configure.html#getPersistBuildConfig"><span class="hs-identifier hs-var hs-var">getPersistBuildConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; IO LocalBuildInfo
</span><a href="Distribution.Simple.Configure.html#getConfigStateFile"><span class="hs-identifier hs-var">getConfigStateFile</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="Distribution.Simple.Configure.html#localBuildInfoFile"><span class="hs-identifier hs-var">localBuildInfoFile</span></a></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="hs-comment">-- | Try to read the 'localBuildInfoFile'.</span><span>
</span><span id="line-227"></span><span class="annot"><a href="Distribution.Simple.Configure.html#maybeGetPersistBuildConfig"><span class="hs-identifier hs-type">maybeGetPersistBuildConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-comment">-- ^ The @dist@ directory path.</span><span>
</span><span id="line-228"></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span id="maybeGetPersistBuildConfig"><span class="annot"><span class="annottext">maybeGetPersistBuildConfig :: [Char] -&gt; IO (Maybe LocalBuildInfo)
</span><a href="Distribution.Simple.Configure.html#maybeGetPersistBuildConfig"><span class="hs-identifier hs-var hs-var">maybeGetPersistBuildConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-230"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#liftM"><span class="hs-identifier hs-var">liftM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../../base-4.16.3.0/src/Data-Either.html#either"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; IO (Either ConfigStateFileError LocalBuildInfo)
</span><a href="Distribution.Simple.Configure.html#tryGetPersistBuildConfig"><span class="hs-identifier hs-var">tryGetPersistBuildConfig</span></a></span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="hs-comment">-- | After running configure, output the 'LocalBuildInfo' to the</span><span>
</span><span id="line-233"></span><span class="hs-comment">-- 'localBuildInfoFile'.</span><span>
</span><span id="line-234"></span><span class="annot"><a href="Distribution.Simple.Configure.html#writePersistBuildConfig"><span class="hs-identifier hs-type">writePersistBuildConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-comment">-- ^ The @dist@ directory path.</span><span>
</span><span id="line-235"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-comment">-- ^ The 'LocalBuildInfo' to write.</span><span>
</span><span id="line-236"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span id="writePersistBuildConfig"><span class="annot"><span class="annottext">writePersistBuildConfig :: [Char] -&gt; LocalBuildInfo -&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#writePersistBuildConfig"><span class="hs-identifier hs-var hs-var">writePersistBuildConfig</span></a></span></span><span> </span><span id="local-6989586621679747472"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747472"><span class="hs-identifier hs-var">distPref</span></a></span></span><span> </span><span id="local-6989586621679747471"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679747471"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-238"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; [Char] -&gt; IO ()
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#createDirectoryIfMissing"><span class="hs-identifier hs-var">createDirectoryIfMissing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747472"><span class="hs-identifier hs-var">distPref</span></a></span><span>
</span><span id="line-239"></span><span>    </span><span class="annot"><span class="annottext">[Char] -&gt; ByteString -&gt; IO ()
</span><a href="Distribution.Utils.Generic.html#writeFileAtomic"><span class="hs-identifier hs-var">writeFileAtomic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS
</span><a href="Distribution.Simple.Configure.html#localBuildInfoFile"><span class="hs-identifier hs-var">localBuildInfoFile</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747472"><span class="hs-identifier hs-var">distPref</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-240"></span><span>      </span><span class="annot"><span class="annottext">[ByteString] -&gt; ByteString
</span><a href="../../bytestring-0.11.3.1/src/Data-ByteString-Lazy-Char8.html#unlines"><span class="hs-identifier hs-var">BLC8.unlines</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PackageIdentifier -&gt; ByteString
</span><a href="Distribution.Simple.Configure.html#showHeader"><span class="hs-identifier hs-var">showHeader</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747467"><span class="hs-identifier hs-var">pkgId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. (Binary a, Structured a) =&gt; a -&gt; ByteString
</span><a href="Distribution.Utils.Structured.html#structuredEncode"><span class="hs-identifier hs-var">structuredEncode</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679747471"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-242"></span><span>    </span><span id="local-6989586621679747467"><span class="annot"><span class="annottext">pkgId :: PackageIdentifier
</span><a href="#local-6989586621679747467"><span class="hs-identifier hs-var hs-var">pkgId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; PackageIdentifier
</span><a href="Distribution.Types.LocalBuildInfo.html#localPackage"><span class="hs-identifier hs-var">localPackage</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679747471"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-comment">-- | Identifier of the current Cabal package.</span><span>
</span><span id="line-245"></span><span class="annot"><a href="Distribution.Simple.Configure.html#currentCabalId"><span class="hs-identifier hs-type">currentCabalId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.PackageId.html#PackageIdentifier"><span class="hs-identifier hs-type">PackageIdentifier</span></a></span><span>
</span><span id="line-246"></span><span id="currentCabalId"><span class="annot"><span class="annottext">currentCabalId :: PackageIdentifier
</span><a href="Distribution.Simple.Configure.html#currentCabalId"><span class="hs-identifier hs-var hs-var">currentCabalId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageName -&gt; Version -&gt; PackageIdentifier
</span><a href="Distribution.Types.PackageId.html#PackageIdentifier"><span class="hs-identifier hs-var">PackageIdentifier</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; PackageName
</span><a href="Distribution.Types.PackageName.html#mkPackageName"><span class="hs-identifier hs-var">mkPackageName</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Cabal&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="Distribution.Simple.Utils.html#cabalVersion"><span class="hs-identifier hs-var">cabalVersion</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-comment">-- | Identifier of the current compiler package.</span><span>
</span><span id="line-249"></span><span class="annot"><a href="Distribution.Simple.Configure.html#currentCompilerId"><span class="hs-identifier hs-type">currentCompilerId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.PackageId.html#PackageIdentifier"><span class="hs-identifier hs-type">PackageIdentifier</span></a></span><span>
</span><span id="line-250"></span><span id="currentCompilerId"><span class="annot"><span class="annottext">currentCompilerId :: PackageIdentifier
</span><a href="Distribution.Simple.Configure.html#currentCompilerId"><span class="hs-identifier hs-var hs-var">currentCompilerId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageName -&gt; Version -&gt; PackageIdentifier
</span><a href="Distribution.Types.PackageId.html#PackageIdentifier"><span class="hs-identifier hs-var">PackageIdentifier</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; PackageName
</span><a href="Distribution.Types.PackageName.html#mkPackageName"><span class="hs-identifier hs-var">mkPackageName</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="../../base-4.16.3.0/src/System-Info.html#compilerName"><span class="hs-identifier hs-var">System.Info.compilerName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>                                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Version -&gt; Version
</span><a href="Distribution.Types.Version.html#mkVersion%27"><span class="hs-identifier hs-var">mkVersion'</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="../../base-4.16.3.0/src/System-Info.html#compilerVersion"><span class="hs-identifier hs-var">System.Info.compilerVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="hs-comment">-- | Parse the @setup-config@ file header, returning the package identifiers</span><span>
</span><span id="line-254"></span><span class="hs-comment">-- for Cabal and the compiler.</span><span>
</span><span id="line-255"></span><span class="annot"><a href="Distribution.Simple.Configure.html#parseHeader"><span class="hs-identifier hs-type">parseHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../bytestring-0.11.3.1/src/Data-ByteString-Lazy-Internal.html#ByteString"><span class="hs-identifier hs-type">ByteString</span></a></span><span> </span><span class="hs-comment">-- ^ The file contents.</span><span>
</span><span id="line-256"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.PackageId.html#PackageIdentifier"><span class="hs-identifier hs-type">PackageIdentifier</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Types.PackageId.html#PackageIdentifier"><span class="hs-identifier hs-type">PackageIdentifier</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span id="parseHeader"><span class="annot"><span class="annottext">parseHeader :: ByteString -&gt; IO (PackageIdentifier, PackageIdentifier)
</span><a href="Distribution.Simple.Configure.html#parseHeader"><span class="hs-identifier hs-var hs-var">parseHeader</span></a></span></span><span> </span><span id="local-6989586621679747461"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679747461"><span class="hs-identifier hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [ByteString]
</span><a href="../../bytestring-0.11.3.1/src/Data-ByteString-Lazy-Char8.html#words"><span class="hs-identifier hs-var">BLC8.words</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679747461"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;Saved&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;package&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;config&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;for&quot;</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679747459"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679747459"><span class="hs-identifier hs-var">pkgId</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;written&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;by&quot;</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679747458"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679747458"><span class="hs-identifier hs-var">cabalId</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-259"></span><span>   </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;using&quot;</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679747457"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679747457"><span class="hs-identifier hs-var">compId</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-260"></span><span>      </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="../../base-4.16.3.0/src/GHC-IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigStateFileError
</span><a href="Distribution.Simple.Configure.html#ConfigStateFileBadHeader"><span class="hs-identifier hs-var">ConfigStateFileBadHeader</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-261"></span><span>          </span><span class="annot"><span class="annottext">PackageIdentifier
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Parsec a =&gt; [Char] -&gt; Maybe a
</span><a href="Distribution.Parsec.html#simpleParsec"><span class="hs-identifier hs-var">simpleParsec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; [Char]
</span><a href="Distribution.Utils.Generic.html#fromUTF8LBS"><span class="hs-identifier hs-var">fromUTF8LBS</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679747459"><span class="hs-identifier hs-var">pkgId</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Distribution.Types.PackageId.html#PackageIdentifier"><span class="hs-identifier hs-type">PackageIdentifier</span></a></span><span>
</span><span id="line-262"></span><span>          </span><span id="local-6989586621679747454"><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747454"><span class="hs-identifier hs-var">cabalId'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Parsec a =&gt; [Char] -&gt; Maybe a
</span><a href="Distribution.Parsec.html#simpleParsec"><span class="hs-identifier hs-var">simpleParsec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; [Char]
</span><a href="../../bytestring-0.11.3.1/src/Data-ByteString-Lazy-Char8.html#unpack"><span class="hs-identifier hs-var">BLC8.unpack</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679747458"><span class="hs-identifier hs-var">cabalId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span>          </span><span id="local-6989586621679747452"><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747452"><span class="hs-identifier hs-var">compId'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Parsec a =&gt; [Char] -&gt; Maybe a
</span><a href="Distribution.Parsec.html#simpleParsec"><span class="hs-identifier hs-var">simpleParsec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; [Char]
</span><a href="../../bytestring-0.11.3.1/src/Data-ByteString-Lazy-Char8.html#unpack"><span class="hs-identifier hs-var">BLC8.unpack</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679747457"><span class="hs-identifier hs-var">compId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747454"><span class="hs-identifier hs-var">cabalId'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747452"><span class="hs-identifier hs-var">compId'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span>  </span><span class="annot"><span class="annottext">[ByteString]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="../../base-4.16.3.0/src/GHC-IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigStateFileError
</span><a href="Distribution.Simple.Configure.html#ConfigStateFileNoHeader"><span class="hs-identifier hs-var">ConfigStateFileNoHeader</span></a></span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span class="hs-comment">-- | Generate the @setup-config@ file header.</span><span>
</span><span id="line-268"></span><span class="annot"><a href="Distribution.Simple.Configure.html#showHeader"><span class="hs-identifier hs-type">showHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.PackageId.html#PackageIdentifier"><span class="hs-identifier hs-type">PackageIdentifier</span></a></span><span> </span><span class="hs-comment">-- ^ The processed package.</span><span>
</span><span id="line-269"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../bytestring-0.11.3.1/src/Data-ByteString-Lazy-Internal.html#ByteString"><span class="hs-identifier hs-type">ByteString</span></a></span><span>
</span><span id="line-270"></span><span id="showHeader"><span class="annot"><span class="annottext">showHeader :: PackageIdentifier -&gt; ByteString
</span><a href="Distribution.Simple.Configure.html#showHeader"><span class="hs-identifier hs-var hs-var">showHeader</span></a></span></span><span> </span><span id="local-6989586621679747451"><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747451"><span class="hs-identifier hs-var">pkgId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ByteString] -&gt; ByteString
</span><a href="../../bytestring-0.11.3.1/src/Data-ByteString-Lazy-Char8.html#unwords"><span class="hs-identifier hs-var">BLC8.unwords</span></a></span><span>
</span><span id="line-271"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;Saved&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;package&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;config&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;for&quot;</span></span><span>
</span><span id="line-272"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ByteString
</span><a href="Distribution.Utils.Generic.html#toUTF8LBS"><span class="hs-identifier hs-var">toUTF8LBS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679747451"><span class="hs-identifier hs-var">pkgId</span></a></span><span>
</span><span id="line-273"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;written&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;by&quot;</span></span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ByteString
</span><a href="../../bytestring-0.11.3.1/src/Data-ByteString-Lazy-Char8.html#pack"><span class="hs-identifier hs-var">BLC8.pack</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="Distribution.Simple.Configure.html#currentCabalId"><span class="hs-identifier hs-var">currentCabalId</span></a></span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;using&quot;</span></span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ByteString
</span><a href="../../bytestring-0.11.3.1/src/Data-ByteString-Lazy-Char8.html#pack"><span class="hs-identifier hs-var">BLC8.pack</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="Distribution.Simple.Configure.html#currentCompilerId"><span class="hs-identifier hs-var">currentCompilerId</span></a></span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span class="hs-comment">-- | Check that localBuildInfoFile is up-to-date with respect to the</span><span>
</span><span id="line-280"></span><span class="hs-comment">-- .cabal file.</span><span>
</span><span id="line-281"></span><span class="annot"><a href="Distribution.Simple.Configure.html#checkPersistBuildConfigOutdated"><span class="hs-identifier hs-type">checkPersistBuildConfigOutdated</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-282"></span><span id="checkPersistBuildConfigOutdated"><span class="annot"><span class="annottext">checkPersistBuildConfigOutdated :: [Char] -&gt; [Char] -&gt; IO Bool
</span><a href="Distribution.Simple.Configure.html#checkPersistBuildConfigOutdated"><span class="hs-identifier hs-var hs-var">checkPersistBuildConfigOutdated</span></a></span></span><span> </span><span id="local-6989586621679747447"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747447"><span class="hs-identifier hs-var">distPref</span></a></span></span><span> </span><span id="local-6989586621679747446"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747446"><span class="hs-identifier hs-var">pkg_descr_file</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-283"></span><span>  </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747446"><span class="hs-identifier hs-var">pkg_descr_file</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; IO Bool
</span><a href="Distribution.Simple.Utils.html#moreRecentFile"><span class="hs-operator hs-var">`moreRecentFile`</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="Distribution.Simple.Configure.html#localBuildInfoFile"><span class="hs-identifier hs-var">localBuildInfoFile</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747447"><span class="hs-identifier hs-var">distPref</span></a></span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="hs-comment">-- | Get the path of @dist\/setup-config@.</span><span>
</span><span id="line-286"></span><span class="annot"><a href="Distribution.Simple.Configure.html#localBuildInfoFile"><span class="hs-identifier hs-type">localBuildInfoFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-comment">-- ^ The @dist@ directory path.</span><span>
</span><span id="line-287"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-288"></span><span id="localBuildInfoFile"><span class="annot"><span class="annottext">localBuildInfoFile :: ShowS
</span><a href="Distribution.Simple.Configure.html#localBuildInfoFile"><span class="hs-identifier hs-var hs-var">localBuildInfoFile</span></a></span></span><span> </span><span id="local-6989586621679747444"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747444"><span class="hs-identifier hs-var">distPref</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747444"><span class="hs-identifier hs-var">distPref</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;setup-config&quot;</span></span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-291"></span><span class="hs-comment">-- * Configuration</span><span>
</span><span id="line-292"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span class="hs-comment">-- | Return the \&quot;dist/\&quot; prefix, or the default prefix. The prefix is taken</span><span>
</span><span id="line-295"></span><span class="hs-comment">-- from (in order of highest to lowest preference) the override prefix, the</span><span>
</span><span id="line-296"></span><span class="hs-comment">-- \&quot;CABAL_BUILDDIR\&quot; environment variable, or the default prefix.</span><span>
</span><span id="line-297"></span><span class="annot"><a href="Distribution.Simple.Configure.html#findDistPref"><span class="hs-identifier hs-type">findDistPref</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>  </span><span class="hs-comment">-- ^ default \&quot;dist\&quot; prefix</span><span>
</span><span id="line-298"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Flag.html#Flag"><span class="hs-identifier hs-type">Setup.Flag</span></a></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>  </span><span class="hs-comment">-- ^ override \&quot;dist\&quot; prefix</span><span>
</span><span id="line-299"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-300"></span><span id="findDistPref"><span class="annot"><span class="annottext">findDistPref :: [Char] -&gt; Flag [Char] -&gt; IO [Char]
</span><a href="Distribution.Simple.Configure.html#findDistPref"><span class="hs-identifier hs-var hs-var">findDistPref</span></a></span></span><span> </span><span id="local-6989586621679747443"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747443"><span class="hs-identifier hs-var">defDistPref</span></a></span></span><span> </span><span id="local-6989586621679747442"><span class="annot"><span class="annottext">Flag [Char]
</span><a href="#local-6989586621679747442"><span class="hs-identifier hs-var">overrideDistPref</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-301"></span><span>    </span><span id="local-6989586621679747441"><span class="annot"><span class="annottext">Flag [Char]
</span><a href="#local-6989586621679747441"><span class="hs-identifier hs-var">envDistPref</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#liftM"><span class="hs-identifier hs-var">liftM</span></a></span><span> </span><span class="annot"><span class="annottext">forall {t :: * -&gt; *} {a}. Foldable t =&gt; Maybe (t a) -&gt; Flag (t a)
</span><a href="#local-6989586621679747440"><span class="hs-identifier hs-var">parseEnvDistPref</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; IO (Maybe [Char])
</span><a href="../../base-4.16.3.0/src/System-Environment.html#lookupEnv"><span class="hs-identifier hs-var">lookupEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;CABAL_BUILDDIR&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-302"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747443"><span class="hs-identifier hs-var">defDistPref</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-identifier hs-var">mappend</span></a></span><span> </span><span class="annot"><span class="annottext">Flag [Char]
</span><a href="#local-6989586621679747441"><span class="hs-identifier hs-var">envDistPref</span></a></span><span> </span><span class="annot"><span class="annottext">Flag [Char]
</span><a href="#local-6989586621679747442"><span class="hs-identifier hs-var">overrideDistPref</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-303"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-304"></span><span>    </span><span id="local-6989586621679747440"><span class="annot"><span class="annottext">parseEnvDistPref :: Maybe (t a) -&gt; Flag (t a)
</span><a href="#local-6989586621679747440"><span class="hs-identifier hs-var hs-var">parseEnvDistPref</span></a></span></span><span> </span><span id="local-6989586621679747436"><span class="annot"><span class="annottext">Maybe (t a)
</span><a href="#local-6989586621679747436"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-305"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (t a)
</span><a href="#local-6989586621679747436"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-306"></span><span>        </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679747435"><span class="annot"><span class="annottext">t a
</span><a href="#local-6989586621679747435"><span class="hs-identifier hs-var">distPref</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">t a
</span><a href="#local-6989586621679747435"><span class="hs-identifier hs-var">distPref</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">t a
</span><a href="#local-6989586621679747435"><span class="hs-identifier hs-var">distPref</span></a></span><span>
</span><span id="line-307"></span><span>        </span><span class="annot"><span class="annottext">Maybe (t a)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Flag a
</span><a href="Distribution.Simple.Flag.html#NoFlag"><span class="hs-identifier hs-var">NoFlag</span></a></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-comment">-- | Return the \&quot;dist/\&quot; prefix, or the default prefix. The prefix is taken</span><span>
</span><span id="line-310"></span><span class="hs-comment">-- from (in order of highest to lowest preference) the override prefix, the</span><span>
</span><span id="line-311"></span><span class="hs-comment">-- \&quot;CABAL_BUILDDIR\&quot; environment variable, or 'defaultDistPref' is used. Call</span><span>
</span><span id="line-312"></span><span class="hs-comment">-- this function to resolve a @*DistPref@ flag whenever it is not known to be</span><span>
</span><span id="line-313"></span><span class="hs-comment">-- set. (The @*DistPref@ flags are always set to a definite value before</span><span>
</span><span id="line-314"></span><span class="hs-comment">-- invoking 'UserHooks'.)</span><span>
</span><span id="line-315"></span><span class="annot"><a href="Distribution.Simple.Configure.html#findDistPrefOrDefault"><span class="hs-identifier hs-type">findDistPrefOrDefault</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Flag.html#Flag"><span class="hs-identifier hs-type">Setup.Flag</span></a></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>  </span><span class="hs-comment">-- ^ override \&quot;dist\&quot; prefix</span><span>
</span><span id="line-316"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-317"></span><span id="findDistPrefOrDefault"><span class="annot"><span class="annottext">findDistPrefOrDefault :: Flag [Char] -&gt; IO [Char]
</span><a href="Distribution.Simple.Configure.html#findDistPrefOrDefault"><span class="hs-identifier hs-var hs-var">findDistPrefOrDefault</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Flag [Char] -&gt; IO [Char]
</span><a href="Distribution.Simple.Configure.html#findDistPref"><span class="hs-identifier hs-var">findDistPref</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="Distribution.Simple.Setup.html#defaultDistPref"><span class="hs-identifier hs-var">defaultDistPref</span></a></span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span class="hs-comment">-- |Perform the \&quot;@.\/setup configure@\&quot; action.</span><span>
</span><span id="line-320"></span><span class="hs-comment">-- Returns the @.setup-config@ file.</span><span>
</span><span id="line-321"></span><span class="annot"><a href="Distribution.Simple.Configure.html#configure"><span class="hs-identifier hs-type">configure</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.GenericPackageDescription.html#GenericPackageDescription"><span class="hs-identifier hs-type">GenericPackageDescription</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Types.HookedBuildInfo.html#HookedBuildInfo"><span class="hs-identifier hs-type">HookedBuildInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Setup.html#ConfigFlags"><span class="hs-identifier hs-type">ConfigFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>
</span><span id="line-323"></span><span id="configure"><span class="annot"><span class="annottext">configure :: (GenericPackageDescription, HookedBuildInfo)
-&gt; ConfigFlags -&gt; IO LocalBuildInfo
</span><a href="Distribution.Simple.Configure.html#configure"><span class="hs-identifier hs-var hs-var">configure</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679747429"><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747429"><span class="hs-identifier hs-var">pkg_descr0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679747428"><span class="annot"><span class="annottext">HookedBuildInfo
</span><a href="#local-6989586621679747428"><span class="hs-identifier hs-var">pbi</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679747427"><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-324"></span><span>    </span><span class="hs-comment">-- Determine the component we are configuring, if a user specified</span><span>
</span><span id="line-325"></span><span>    </span><span class="hs-comment">-- one on the command line.  We use a fake, flattened version of</span><span>
</span><span id="line-326"></span><span>    </span><span class="hs-comment">-- the package since at this point, we're not really sure what</span><span>
</span><span id="line-327"></span><span>    </span><span class="hs-comment">-- components we *can* configure.  @Nothing@ means that we should</span><span>
</span><span id="line-328"></span><span>    </span><span class="hs-comment">-- configure everything (the old behavior).</span><span>
</span><span id="line-329"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679747426"><span class="annot"><span class="annottext">Maybe ComponentName
</span><a href="#local-6989586621679747426"><span class="hs-identifier hs-var">mb_cname</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Distribution.Types.ComponentName.html#ComponentName"><span class="hs-identifier hs-type">ComponentName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-330"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747425"><span class="annot"><span class="annottext">flat_pkg_descr :: PackageDescription
</span><a href="#local-6989586621679747425"><span class="hs-identifier hs-var hs-var">flat_pkg_descr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription -&gt; PackageDescription
</span><a href="Distribution.PackageDescription.Configuration.html#flattenPackageDescription"><span class="hs-identifier hs-var">flattenPackageDescription</span></a></span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747429"><span class="hs-identifier hs-var">pkg_descr0</span></a></span><span>
</span><span id="line-331"></span><span>        </span><span id="local-6989586621679747423"><span class="annot"><span class="annottext">[BuildTarget]
</span><a href="#local-6989586621679747423"><span class="hs-identifier hs-var">targets</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; PackageDescription -&gt; [[Char]] -&gt; IO [BuildTarget]
</span><a href="Distribution.Simple.BuildTarget.html#readBuildTargets"><span class="hs-identifier hs-var">readBuildTargets</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747425"><span class="hs-identifier hs-var">flat_pkg_descr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; [[Char]]
</span><a href="Distribution.Simple.Setup.html#configArgs"><span class="hs-identifier hs-var">configArgs</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>        </span><span class="hs-comment">-- TODO: bleat if you use the module/file syntax</span><span>
</span><span id="line-333"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747419"><span class="annot"><span class="annottext">targets' :: [ComponentName]
</span><a href="#local-6989586621679747419"><span class="hs-identifier hs-var hs-var">targets'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ComponentName
</span><a href="#local-6989586621679747418"><span class="hs-identifier hs-var">cname</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Distribution.Simple.BuildTarget.html#BuildTargetComponent"><span class="hs-identifier hs-type">BuildTargetComponent</span></a></span><span> </span><span id="local-6989586621679747418"><span class="annot"><span class="annottext">ComponentName
</span><a href="#local-6989586621679747418"><span class="hs-identifier hs-var">cname</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[BuildTarget]
</span><a href="#local-6989586621679747423"><span class="hs-identifier hs-var">targets</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-334"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[ComponentName]
</span><a href="#local-6989586621679747419"><span class="hs-identifier hs-var">targets'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-335"></span><span>            </span><span class="annot"><span class="annottext">[ComponentName]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; [[Char]]
</span><a href="Distribution.Simple.Setup.html#configArgs"><span class="hs-identifier hs-var">configArgs</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-336"></span><span>            </span><span class="hs-special">[</span><span id="local-6989586621679747416"><span class="annot"><span class="annottext">ComponentName
</span><a href="#local-6989586621679747416"><span class="hs-identifier hs-var">cname</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentName
</span><a href="#local-6989586621679747416"><span class="hs-identifier hs-var">cname</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;No valid component targets found&quot;</span></span><span>
</span><span id="line-338"></span><span>            </span><span class="annot"><span class="annottext">[ComponentName]
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-339"></span><span>                  </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Can only configure either single component or all of them&quot;</span></span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747414"><span class="annot"><span class="annottext">use_external_internal_deps :: Bool
</span><a href="#local-6989586621679747414"><span class="hs-identifier hs-var hs-var">use_external_internal_deps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#isJust"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ComponentName
</span><a href="#local-6989586621679747426"><span class="hs-identifier hs-var">mb_cname</span></a></span><span>
</span><span id="line-342"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe ComponentName
</span><a href="#local-6989586621679747426"><span class="hs-identifier hs-var">mb_cname</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-343"></span><span>        </span><span class="annot"><span class="annottext">Maybe ComponentName
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; PackageIdentifier -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#setupMessage"><span class="hs-identifier hs-var">setupMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Configuring&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pkg. Package pkg =&gt; pkg -&gt; PackageIdentifier
</span><a href="Distribution.Package.html#packageId"><span class="hs-identifier hs-var">packageId</span></a></span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747429"><span class="hs-identifier hs-var">pkg_descr0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>        </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679747410"><span class="annot"><span class="annottext">ComponentName
</span><a href="#local-6989586621679747410"><span class="hs-identifier hs-var">cname</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a.
Pretty a =&gt;
Verbosity
-&gt; [Char]
-&gt; PackageIdentifier
-&gt; ComponentName
-&gt; Maybe [(ModuleName, a)]
-&gt; IO ()
</span><a href="Distribution.Backpack.DescribeUnitId.html#setupMessage%27"><span class="hs-identifier hs-var">setupMessage'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Configuring&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pkg. Package pkg =&gt; pkg -&gt; PackageIdentifier
</span><a href="Distribution.Package.html#packageId"><span class="hs-identifier hs-var">packageId</span></a></span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747429"><span class="hs-identifier hs-var">pkg_descr0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-345"></span><span>                        </span><span class="annot"><span class="annottext">ComponentName
</span><a href="#local-6989586621679747410"><span class="hs-identifier hs-var">cname</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; [(ModuleName, Module)]
</span><a href="Distribution.Simple.Setup.html#configInstantiateWith"><span class="hs-identifier hs-var">configInstantiateWith</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span>    </span><span class="hs-comment">-- configCID is only valid for per-component configure</span><span>
</span><span id="line-348"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#isJust"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Flag a -&gt; Maybe a
</span><a href="Distribution.Simple.Flag.html#flagToMaybe"><span class="hs-identifier hs-var">flagToMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag ComponentId
</span><a href="Distribution.Simple.Setup.html#configCID"><span class="hs-identifier hs-var">configCID</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#isNothing"><span class="hs-identifier hs-var">isNothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ComponentName
</span><a href="#local-6989586621679747426"><span class="hs-identifier hs-var">mb_cname</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-349"></span><span>        </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;--cid is only supported for per-component configure&quot;</span></span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; ConfigFlags -&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#checkDeprecatedFlags"><span class="hs-identifier hs-var">checkDeprecatedFlags</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-352"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; GenericPackageDescription -&gt; ConfigFlags -&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#checkExactConfiguration"><span class="hs-identifier hs-var">checkExactConfiguration</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747429"><span class="hs-identifier hs-var">pkg_descr0</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span>    </span><span class="hs-comment">-- Where to build the package</span><span>
</span><span id="line-355"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679747400"><span class="hs-identifier hs-type">buildDir</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-comment">-- e.g. dist/build</span><span>
</span><span id="line-356"></span><span>        </span><span class="hs-comment">-- fromFlag OK due to Distribution.Simple calling</span><span>
</span><span id="line-357"></span><span>        </span><span class="hs-comment">-- findDistPrefOrDefault to fill it in</span><span>
</span><span id="line-358"></span><span>        </span><span id="local-6989586621679747400"><span class="annot"><span class="annottext">buildDir :: [Char]
</span><a href="#local-6989586621679747400"><span class="hs-identifier hs-var hs-var">buildDir</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag [Char]
</span><a href="Distribution.Simple.Setup.html#configDistPref"><span class="hs-identifier hs-var">configDistPref</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;build&quot;</span></span><span>
</span><span id="line-359"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; Bool -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#createDirectoryIfMissingVerbose"><span class="hs-identifier hs-var">createDirectoryIfMissingVerbose</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Verbosity -&gt; Verbosity
</span><a href="Distribution.Verbosity.html#lessVerbose"><span class="hs-identifier hs-var">lessVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747400"><span class="hs-identifier hs-var">buildDir</span></a></span><span>
</span><span id="line-360"></span><span>
</span><span id="line-361"></span><span>    </span><span class="hs-comment">-- What package database(s) to use</span><span>
</span><span id="line-362"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679747395"><span class="hs-identifier hs-type">packageDbs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDBStack"><span class="hs-identifier hs-type">PackageDBStack</span></a></span><span>
</span><span id="line-363"></span><span>        </span><span id="local-6989586621679747395"><span class="annot"><span class="annottext">packageDbs :: PackageDBStack
</span><a href="#local-6989586621679747395"><span class="hs-identifier hs-var hs-var">packageDbs</span></a></span></span><span>
</span><span id="line-364"></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [Maybe PackageDB] -&gt; PackageDBStack
</span><a href="Distribution.Simple.Configure.html#interpretPackageDbFlags"><span class="hs-identifier hs-var">interpretPackageDbFlags</span></a></span><span>
</span><span id="line-365"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configUserInstall"><span class="hs-identifier hs-var">configUserInstall</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; [Maybe PackageDB]
</span><a href="Distribution.Simple.Setup.html#configPackageDBs"><span class="hs-identifier hs-var">configPackageDBs</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span>    </span><span class="hs-comment">-- comp:            the compiler we're building with</span><span>
</span><span id="line-369"></span><span>    </span><span class="hs-comment">-- compPlatform:    the platform we're building for</span><span>
</span><span id="line-370"></span><span>    </span><span class="hs-comment">-- programDb:  location and args of all programs we're</span><span>
</span><span id="line-371"></span><span>    </span><span class="hs-comment">--                  building with</span><span>
</span><span id="line-372"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679747392"><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-373"></span><span>     </span><span id="local-6989586621679747391"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679747391"><span class="hs-identifier hs-var">compPlatform</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-374"></span><span>     </span><span id="local-6989586621679747390"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679747390"><span class="hs-identifier hs-var">programDb</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-375"></span><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe CompilerFlavor
-&gt; Maybe [Char]
-&gt; Maybe [Char]
-&gt; ProgramDb
-&gt; Verbosity
-&gt; IO (Compiler, Platform, ProgramDb)
</span><a href="Distribution.Simple.Configure.html#configCompilerEx"><span class="hs-identifier hs-var">configCompilerEx</span></a></span><span>
</span><span id="line-376"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Flag a -&gt; Maybe a
</span><a href="Distribution.Simple.Flag.html#flagToMaybe"><span class="hs-identifier hs-var">flagToMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag CompilerFlavor
</span><a href="Distribution.Simple.Setup.html#configHcFlavor"><span class="hs-identifier hs-var">configHcFlavor</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Flag a -&gt; Maybe a
</span><a href="Distribution.Simple.Flag.html#flagToMaybe"><span class="hs-identifier hs-var">flagToMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag [Char]
</span><a href="Distribution.Simple.Setup.html#configHcPath"><span class="hs-identifier hs-var">configHcPath</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Flag a -&gt; Maybe a
</span><a href="Distribution.Simple.Flag.html#flagToMaybe"><span class="hs-identifier hs-var">flagToMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag [Char]
</span><a href="Distribution.Simple.Setup.html#configHcPkg"><span class="hs-identifier hs-var">configHcPkg</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; ProgramDb -&gt; ProgramDb
</span><a href="Distribution.Simple.Configure.html#mkProgramDb"><span class="hs-identifier hs-var">mkProgramDb</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithCallStack (ConfigFlags -&gt; ProgramDb)
</span><a href="Distribution.Simple.Setup.html#configPrograms"><span class="hs-identifier hs-var">configPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-380"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Verbosity -&gt; Verbosity
</span><a href="Distribution.Verbosity.html#lessVerbose"><span class="hs-identifier hs-var">lessVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span>    </span><span class="hs-comment">-- The InstalledPackageIndex of all installed packages</span><span>
</span><span id="line-383"></span><span>    </span><span id="local-6989586621679747384"><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679747384"><span class="hs-identifier hs-var">installedPackageSet</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.PackageIndex.html#InstalledPackageIndex"><span class="hs-identifier hs-type">InstalledPackageIndex</span></a></span><span>
</span><span id="line-384"></span><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Compiler
-&gt; PackageDBStack
-&gt; ProgramDb
-&gt; IO InstalledPackageIndex
</span><a href="Distribution.Simple.Configure.html#getInstalledPackages"><span class="hs-identifier hs-var">getInstalledPackages</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Verbosity -&gt; Verbosity
</span><a href="Distribution.Verbosity.html#lessVerbose"><span class="hs-identifier hs-var">lessVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-385"></span><span>                                  </span><span class="annot"><span class="annottext">PackageDBStack
</span><a href="#local-6989586621679747395"><span class="hs-identifier hs-var">packageDbs</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679747390"><span class="hs-identifier hs-var">programDb</span></a></span><span>
</span><span id="line-386"></span><span>
</span><span id="line-387"></span><span>    </span><span class="hs-comment">-- The set of package names which are &quot;shadowed&quot; by internal</span><span>
</span><span id="line-388"></span><span>    </span><span class="hs-comment">-- packages, and which component they map to</span><span>
</span><span id="line-389"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679747383"><span class="hs-identifier hs-type">internalPackageSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Distribution.Types.LibraryName.html#LibraryName"><span class="hs-identifier hs-type">LibraryName</span></a></span><span>
</span><span id="line-390"></span><span>        </span><span id="local-6989586621679747383"><span class="annot"><span class="annottext">internalPackageSet :: Set LibraryName
</span><a href="#local-6989586621679747383"><span class="hs-identifier hs-var hs-var">internalPackageSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription -&gt; Set LibraryName
</span><a href="Distribution.Simple.Configure.html#getInternalLibraries"><span class="hs-identifier hs-var">getInternalLibraries</span></a></span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747429"><span class="hs-identifier hs-var">pkg_descr0</span></a></span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span>    </span><span class="hs-comment">-- Make a data structure describing what components are enabled.</span><span>
</span><span id="line-393"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679747382"><span class="hs-identifier hs-type">enabled</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentRequestedSpec.html#ComponentRequestedSpec"><span class="hs-identifier hs-type">ComponentRequestedSpec</span></a></span><span>
</span><span id="line-394"></span><span>        </span><span id="local-6989586621679747382"><span class="annot"><span class="annottext">enabled :: ComponentRequestedSpec
</span><a href="#local-6989586621679747382"><span class="hs-identifier hs-var hs-var">enabled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe ComponentName
</span><a href="#local-6989586621679747426"><span class="hs-identifier hs-var">mb_cname</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-395"></span><span>                    </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679747381"><span class="annot"><span class="annottext">ComponentName
</span><a href="#local-6989586621679747381"><span class="hs-identifier hs-var">cname</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ComponentName -&gt; ComponentRequestedSpec
</span><a href="Distribution.Types.ComponentRequestedSpec.html#OneComponentRequestedSpec"><span class="hs-identifier hs-var">OneComponentRequestedSpec</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentName
</span><a href="#local-6989586621679747381"><span class="hs-identifier hs-var">cname</span></a></span><span>
</span><span id="line-396"></span><span>                    </span><span class="annot"><span class="annottext">Maybe ComponentName
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentRequestedSpec.html#ComponentRequestedSpec"><span class="hs-identifier hs-type">ComponentRequestedSpec</span></a></span><span>
</span><span id="line-397"></span><span>                                </span><span class="hs-comment">-- The flag name (@--enable-tests@) is a</span><span>
</span><span id="line-398"></span><span>                                </span><span class="hs-comment">-- little bit of a misnomer, because</span><span>
</span><span id="line-399"></span><span>                                </span><span class="hs-comment">-- just passing this flag won't</span><span>
</span><span id="line-400"></span><span>                                </span><span class="hs-comment">-- &quot;enable&quot;, in our internal</span><span>
</span><span id="line-401"></span><span>                                </span><span class="hs-comment">-- nomenclature; it's just a request; a</span><span>
</span><span id="line-402"></span><span>                                </span><span class="hs-comment">-- @buildable: False@ might make it</span><span>
</span><span id="line-403"></span><span>                                </span><span class="hs-comment">-- not possible to enable.</span><span>
</span><span id="line-404"></span><span>                                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">testsRequested :: Bool
</span><a href="#local-6989586621679747378"><span class="hs-identifier hs-var">testsRequested</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configTests"><span class="hs-identifier hs-var">configTests</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-405"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">benchmarksRequested :: Bool
</span><a href="#local-6989586621679747376"><span class="hs-identifier hs-var">benchmarksRequested</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-406"></span><span>                                  </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configBenchmarks"><span class="hs-identifier hs-var">configBenchmarks</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-407"></span><span>    </span><span class="hs-comment">-- Some sanity checks related to enabling components.</span><span>
</span><span id="line-408"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#isJust"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ComponentName
</span><a href="#local-6989586621679747426"><span class="hs-identifier hs-var">mb_cname</span></a></span><span>
</span><span id="line-409"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configTests"><span class="hs-identifier hs-var">configTests</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configBenchmarks"><span class="hs-identifier hs-var">configBenchmarks</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-410"></span><span>        </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-411"></span><span>              </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;--enable-tests/--enable-benchmarks are incompatible with&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-412"></span><span>              </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; explicitly specifying a component to configure.&quot;</span></span><span>
</span><span id="line-413"></span><span>
</span><span id="line-414"></span><span>    </span><span class="hs-comment">-- Some sanity checks related to dynamic/static linking.</span><span>
</span><span id="line-415"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configDynExe"><span class="hs-identifier hs-var">configDynExe</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configFullyStaticExe"><span class="hs-identifier hs-var">configFullyStaticExe</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-416"></span><span>        </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-417"></span><span>              </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;--enable-executable-dynamic and --enable-executable-static&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-418"></span><span>              </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; are incompatible with each other.&quot;</span></span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span>    </span><span class="hs-comment">-- allConstraints:  The set of all 'Dependency's we have.  Used ONLY</span><span>
</span><span id="line-421"></span><span>    </span><span class="hs-comment">--                  to 'configureFinalizedPackage'.</span><span>
</span><span id="line-422"></span><span>    </span><span class="hs-comment">-- requiredDepsMap: A map from 'PackageName' to the specifically</span><span>
</span><span id="line-423"></span><span>    </span><span class="hs-comment">--                  required 'InstalledPackageInfo', due to --dependency</span><span>
</span><span id="line-424"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-425"></span><span>    </span><span class="hs-comment">-- NB: These constraints are to be applied to ALL components of</span><span>
</span><span id="line-426"></span><span>    </span><span class="hs-comment">-- a package.  Thus, it's not an error if allConstraints contains</span><span>
</span><span id="line-427"></span><span>    </span><span class="hs-comment">-- more constraints than is necessary for a component (another</span><span>
</span><span id="line-428"></span><span>    </span><span class="hs-comment">-- component might need it.)</span><span>
</span><span id="line-429"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-430"></span><span>    </span><span class="hs-comment">-- NB: The fact that we bundle all the constraints together means</span><span>
</span><span id="line-431"></span><span>    </span><span class="hs-comment">-- that is not possible to configure a test-suite to use one</span><span>
</span><span id="line-432"></span><span>    </span><span class="hs-comment">-- version of a dependency, and the executable to use another.</span><span>
</span><span id="line-433"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679747371"><span class="annot"><span class="annottext">[PackageVersionConstraint]
</span><a href="#local-6989586621679747371"><span class="hs-identifier hs-var">allConstraints</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Types.PackageVersionConstraint.html#PackageVersionConstraint"><span class="hs-identifier hs-type">PackageVersionConstraint</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-434"></span><span>     </span><span id="local-6989586621679747370"><span class="annot"><span class="annottext">Map (PackageName, ComponentName) InstalledPackageInfo
</span><a href="#local-6989586621679747370"><span class="hs-identifier hs-var">requiredDepsMap</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.PackageName.html#PackageName"><span class="hs-identifier hs-type">PackageName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentName.html#ComponentName"><span class="hs-identifier hs-type">ComponentName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier hs-type">InstalledPackageInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-435"></span><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../../base-4.16.3.0/src/Data-Either.html#either"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-436"></span><span>              </span><span class="annot"><span class="annottext">[PackageVersionConstraint]
-&gt; [GivenComponent]
-&gt; InstalledPackageIndex
-&gt; Either
     [Char]
     ([PackageVersionConstraint],
      Map (PackageName, ComponentName) InstalledPackageInfo)
</span><a href="Distribution.Simple.Configure.html#combinedConstraints"><span class="hs-identifier hs-var">combinedConstraints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; [PackageVersionConstraint]
</span><a href="Distribution.Simple.Setup.html#configConstraints"><span class="hs-identifier hs-var">configConstraints</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-437"></span><span>                                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; [GivenComponent]
</span><a href="Distribution.Simple.Setup.html#configDependencies"><span class="hs-identifier hs-var">configDependencies</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-438"></span><span>                                  </span><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679747384"><span class="hs-identifier hs-var">installedPackageSet</span></a></span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span>    </span><span class="hs-comment">-- pkg_descr:   The resolved package description, that does not contain any</span><span>
</span><span id="line-441"></span><span>    </span><span class="hs-comment">--              conditionals, because we have an assignment for</span><span>
</span><span id="line-442"></span><span>    </span><span class="hs-comment">--              every flag, either picking them ourselves using a</span><span>
</span><span id="line-443"></span><span>    </span><span class="hs-comment">--              simple naive algorithm, or having them be passed to</span><span>
</span><span id="line-444"></span><span>    </span><span class="hs-comment">--              us by 'configConfigurationsFlags')</span><span>
</span><span id="line-445"></span><span>    </span><span class="hs-comment">-- flags:       The 'FlagAssignment' that the conditionals were</span><span>
</span><span id="line-446"></span><span>    </span><span class="hs-comment">--              resolved with.</span><span>
</span><span id="line-447"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-448"></span><span>    </span><span class="hs-comment">-- NB: Why doesn't finalizing a package also tell us what the</span><span>
</span><span id="line-449"></span><span>    </span><span class="hs-comment">-- dependencies are (e.g. when we run the naive algorithm,</span><span>
</span><span id="line-450"></span><span>    </span><span class="hs-comment">-- we are checking if dependencies are satisfiable)?  The</span><span>
</span><span id="line-451"></span><span>    </span><span class="hs-comment">-- primary reason is that we may NOT have done any solving:</span><span>
</span><span id="line-452"></span><span>    </span><span class="hs-comment">-- if the flags are all chosen for us, this step is a simple</span><span>
</span><span id="line-453"></span><span>    </span><span class="hs-comment">-- matter of flattening according to that assignment.  It's</span><span>
</span><span id="line-454"></span><span>    </span><span class="hs-comment">-- cleaner to then configure the dependencies afterwards.</span><span>
</span><span id="line-455"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679747366"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-456"></span><span>     </span><span id="local-6989586621679747365"><span class="annot"><span class="annottext">FlagAssignment
</span><a href="#local-6989586621679747365"><span class="hs-identifier hs-var">flags</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.Flag.html#FlagAssignment"><span class="hs-identifier hs-type">FlagAssignment</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; ConfigFlags
-&gt; ComponentRequestedSpec
-&gt; [PackageVersionConstraint]
-&gt; (Dependency -&gt; Bool)
-&gt; Compiler
-&gt; Platform
-&gt; GenericPackageDescription
-&gt; IO (PackageDescription, FlagAssignment)
</span><a href="Distribution.Simple.Configure.html#configureFinalizedPackage"><span class="hs-identifier hs-var">configureFinalizedPackage</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679747382"><span class="hs-identifier hs-var">enabled</span></a></span><span>
</span><span id="line-458"></span><span>                </span><span class="annot"><span class="annottext">[PackageVersionConstraint]
</span><a href="#local-6989586621679747371"><span class="hs-identifier hs-var">allConstraints</span></a></span><span>
</span><span id="line-459"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
-&gt; Bool
-&gt; Bool
-&gt; PackageName
-&gt; InstalledPackageIndex
-&gt; Set LibraryName
-&gt; Map (PackageName, ComponentName) InstalledPackageInfo
-&gt; Dependency
-&gt; Bool
</span><a href="Distribution.Simple.Configure.html#dependencySatisfiable"><span class="hs-identifier hs-var">dependencySatisfiable</span></a></span><span>
</span><span id="line-460"></span><span>                    </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747414"><span class="hs-identifier hs-var">use_external_internal_deps</span></a></span><span>
</span><span id="line-461"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configExactConfiguration"><span class="hs-identifier hs-var">configExactConfiguration</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-462"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configAllowDependingOnPrivateLibs"><span class="hs-identifier hs-var">configAllowDependingOnPrivateLibs</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pkg. Package pkg =&gt; pkg -&gt; PackageName
</span><a href="Distribution.Package.html#packageName"><span class="hs-identifier hs-var">packageName</span></a></span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747429"><span class="hs-identifier hs-var">pkg_descr0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>                    </span><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679747384"><span class="hs-identifier hs-var">installedPackageSet</span></a></span><span>
</span><span id="line-465"></span><span>                    </span><span class="annot"><span class="annottext">Set LibraryName
</span><a href="#local-6989586621679747383"><span class="hs-identifier hs-var">internalPackageSet</span></a></span><span>
</span><span id="line-466"></span><span>                    </span><span class="annot"><span class="annottext">Map (PackageName, ComponentName) InstalledPackageInfo
</span><a href="#local-6989586621679747370"><span class="hs-identifier hs-var">requiredDepsMap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-467"></span><span>                </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-468"></span><span>                </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679747391"><span class="hs-identifier hs-var">compPlatform</span></a></span><span>
</span><span id="line-469"></span><span>                </span><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747429"><span class="hs-identifier hs-var">pkg_descr0</span></a></span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#debug"><span class="hs-identifier hs-var">debug</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Finalized package description:\n&quot;</span></span><span>
</span><span id="line-472"></span><span>                  </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription -&gt; [Char]
</span><a href="Distribution.PackageDescription.PrettyPrint.html#showPackageDescription"><span class="hs-identifier hs-var">showPackageDescription</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span>
</span><span id="line-473"></span><span>
</span><span id="line-474"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747355"><span class="annot"><span class="annottext">cabalFileDir :: [Char]
</span><a href="#local-6989586621679747355"><span class="hs-identifier hs-var hs-var">cabalFileDir</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#takeDirectory"><span class="hs-identifier hs-var">takeDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-475"></span><span>          </span><span class="annot"><span class="annottext">forall a. Flag a -&gt; Maybe a
</span><a href="Distribution.Simple.Flag.html#flagToMaybe"><span class="hs-identifier hs-var">flagToMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag [Char]
</span><a href="Distribution.Simple.Setup.html#configCabalFilePath"><span class="hs-identifier hs-var">configCabalFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-476"></span><span>    </span><span class="annot"><span class="annottext">Verbosity
-&gt; Compiler
-&gt; PackageDescription
-&gt; ComponentRequestedSpec
-&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#checkCompilerProblems"><span class="hs-identifier hs-var">checkCompilerProblems</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679747382"><span class="hs-identifier hs-var">enabled</span></a></span><span>
</span><span id="line-477"></span><span>    </span><span class="annot"><span class="annottext">Verbosity
-&gt; [Char]
-&gt; GenericPackageDescription
-&gt; PackageDescription
-&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#checkPackageProblems"><span class="hs-identifier hs-var">checkPackageProblems</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747355"><span class="hs-identifier hs-var">cabalFileDir</span></a></span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747429"><span class="hs-identifier hs-var">pkg_descr0</span></a></span><span>
</span><span id="line-478"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HookedBuildInfo -&gt; PackageDescription -&gt; PackageDescription
</span><a href="Distribution.Types.PackageDescription.html#updatePackageDescription"><span class="hs-identifier hs-var">updatePackageDescription</span></a></span><span> </span><span class="annot"><span class="annottext">HookedBuildInfo
</span><a href="#local-6989586621679747428"><span class="hs-identifier hs-var">pbi</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-479"></span><span>
</span><span id="line-480"></span><span>    </span><span class="hs-comment">-- The list of 'InstalledPackageInfo' recording the selected</span><span>
</span><span id="line-481"></span><span>    </span><span class="hs-comment">-- dependencies on external packages.</span><span>
</span><span id="line-482"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-483"></span><span>    </span><span class="hs-comment">-- Invariant: For any package name, there is at most one package</span><span>
</span><span id="line-484"></span><span>    </span><span class="hs-comment">-- in externalPackageDeps which has that name.</span><span>
</span><span id="line-485"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-486"></span><span>    </span><span class="hs-comment">-- NB: The dependency selection is global over ALL components</span><span>
</span><span id="line-487"></span><span>    </span><span class="hs-comment">-- in the package (similar to how allConstraints and</span><span>
</span><span id="line-488"></span><span>    </span><span class="hs-comment">-- requiredDepsMap are global over all components).  In particular,</span><span>
</span><span id="line-489"></span><span>    </span><span class="hs-comment">-- if *any* component (post-flag resolution) has an unsatisfiable</span><span>
</span><span id="line-490"></span><span>    </span><span class="hs-comment">-- dependency, we will fail.  This can sometimes be undesirable</span><span>
</span><span id="line-491"></span><span>    </span><span class="hs-comment">-- for users, see #1786 (benchmark conflicts with executable),</span><span>
</span><span id="line-492"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-493"></span><span>    </span><span class="hs-comment">-- In the presence of Backpack, these package dependencies are</span><span>
</span><span id="line-494"></span><span>    </span><span class="hs-comment">-- NOT complete: they only ever include the INDEFINITE</span><span>
</span><span id="line-495"></span><span>    </span><span class="hs-comment">-- dependencies.  After we apply an instantiation, we'll get</span><span>
</span><span id="line-496"></span><span>    </span><span class="hs-comment">-- definite references which constitute extra dependencies.</span><span>
</span><span id="line-497"></span><span>    </span><span class="hs-comment">-- (Why not have cabal-install pass these in explicitly?</span><span>
</span><span id="line-498"></span><span>    </span><span class="hs-comment">-- For one it's deterministic; for two, we need to associate</span><span>
</span><span id="line-499"></span><span>    </span><span class="hs-comment">-- them with renamings which would require a far more complicated</span><span>
</span><span id="line-500"></span><span>    </span><span class="hs-comment">-- input scheme than what we have today.)</span><span>
</span><span id="line-501"></span><span>    </span><span id="local-6989586621679747350"><span class="annot"><span class="annottext">[PreExistingComponent]
</span><a href="#local-6989586621679747350"><span class="hs-identifier hs-var">externalPkgDeps</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Backpack.PreExistingComponent.html#PreExistingComponent"><span class="hs-identifier hs-type">PreExistingComponent</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-502"></span><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Bool
-&gt; Set LibraryName
-&gt; InstalledPackageIndex
-&gt; Map (PackageName, ComponentName) InstalledPackageInfo
-&gt; PackageDescription
-&gt; ComponentRequestedSpec
-&gt; IO [PreExistingComponent]
</span><a href="Distribution.Simple.Configure.html#configureDependencies"><span class="hs-identifier hs-var">configureDependencies</span></a></span><span>
</span><span id="line-503"></span><span>                </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-504"></span><span>                </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747414"><span class="hs-identifier hs-var">use_external_internal_deps</span></a></span><span>
</span><span id="line-505"></span><span>                </span><span class="annot"><span class="annottext">Set LibraryName
</span><a href="#local-6989586621679747383"><span class="hs-identifier hs-var">internalPackageSet</span></a></span><span>
</span><span id="line-506"></span><span>                </span><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679747384"><span class="hs-identifier hs-var">installedPackageSet</span></a></span><span>
</span><span id="line-507"></span><span>                </span><span class="annot"><span class="annottext">Map (PackageName, ComponentName) InstalledPackageInfo
</span><a href="#local-6989586621679747370"><span class="hs-identifier hs-var">requiredDepsMap</span></a></span><span>
</span><span id="line-508"></span><span>                </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span>
</span><span id="line-509"></span><span>                </span><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679747382"><span class="hs-identifier hs-var">enabled</span></a></span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span>    </span><span class="hs-comment">-- Compute installation directory templates, based on user</span><span>
</span><span id="line-512"></span><span>    </span><span class="hs-comment">-- configuration.</span><span>
</span><span id="line-513"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-514"></span><span>    </span><span class="hs-comment">-- TODO: Move this into a helper function.</span><span>
</span><span id="line-515"></span><span>    </span><span id="local-6989586621679747348"><span class="annot"><span class="annottext">InstallDirTemplates
</span><a href="#local-6989586621679747348"><span class="hs-identifier hs-var">defaultDirs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.InstallDirs.html#InstallDirTemplates"><span class="hs-identifier hs-type">InstallDirTemplates</span></a></span><span>
</span><span id="line-516"></span><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; CompilerFlavor -&gt; Bool -&gt; Bool -&gt; IO InstallDirTemplates
</span><a href="Distribution.Simple.InstallDirs.html#defaultInstallDirs%27"><span class="hs-identifier hs-var">defaultInstallDirs'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747414"><span class="hs-identifier hs-var">use_external_internal_deps</span></a></span><span>
</span><span id="line-517"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; CompilerFlavor
</span><a href="Distribution.Simple.Compiler.html#compilerFlavor"><span class="hs-identifier hs-var">compilerFlavor</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-518"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configUserInstall"><span class="hs-identifier hs-var">configUserInstall</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-519"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; Bool
</span><a href="Distribution.Types.PackageDescription.html#hasLibs"><span class="hs-identifier hs-var">hasLibs</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-520"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679747344"><span class="hs-identifier hs-type">installDirs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.InstallDirs.html#InstallDirTemplates"><span class="hs-identifier hs-type">InstallDirTemplates</span></a></span><span>
</span><span id="line-521"></span><span>        </span><span id="local-6989586621679747344"><span class="annot"><span class="annottext">installDirs :: InstallDirTemplates
</span><a href="#local-6989586621679747344"><span class="hs-identifier hs-var hs-var">installDirs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c.
(a -&gt; b -&gt; c) -&gt; InstallDirs a -&gt; InstallDirs b -&gt; InstallDirs c
</span><a href="Distribution.Simple.InstallDirs.html#combineInstallDirs"><span class="hs-identifier hs-var">combineInstallDirs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span>
</span><span id="line-522"></span><span>                        </span><span class="annot"><span class="annottext">InstallDirTemplates
</span><a href="#local-6989586621679747348"><span class="hs-identifier hs-var">defaultDirs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; InstallDirs (Flag PathTemplate)
</span><a href="Distribution.Simple.Setup.html#configInstallDirs"><span class="hs-identifier hs-var">configInstallDirs</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-523"></span><span>
</span><span id="line-524"></span><span>    </span><span class="hs-comment">-- Check languages and extensions</span><span>
</span><span id="line-525"></span><span>    </span><span class="hs-comment">-- TODO: Move this into a helper function.</span><span>
</span><span id="line-526"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747339"><span class="annot"><span class="annottext">langlist :: [Language]
</span><a href="#local-6989586621679747339"><span class="hs-identifier hs-var hs-var">langlist</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#nub"><span class="hs-identifier hs-var">nub</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [Maybe a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#catMaybes"><span class="hs-identifier hs-var">catMaybes</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; Maybe Language
</span><a href="Distribution.Types.BuildInfo.html#defaultLanguage"><span class="hs-identifier hs-var">defaultLanguage</span></a></span><span>
</span><span id="line-527"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; ComponentRequestedSpec -&gt; [BuildInfo]
</span><a href="Distribution.Types.PackageDescription.html#enabledBuildInfos"><span class="hs-identifier hs-var">enabledBuildInfos</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679747382"><span class="hs-identifier hs-var">enabled</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747334"><span class="annot"><span class="annottext">langs :: [Language]
</span><a href="#local-6989586621679747334"><span class="hs-identifier hs-var hs-var">langs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; [Language] -&gt; [Language]
</span><a href="Distribution.Simple.Compiler.html#unsupportedLanguages"><span class="hs-identifier hs-var">unsupportedLanguages</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">[Language]
</span><a href="#local-6989586621679747339"><span class="hs-identifier hs-var">langlist</span></a></span><span>
</span><span id="line-529"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Language]
</span><a href="#local-6989586621679747334"><span class="hs-identifier hs-var">langs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-530"></span><span>      </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;The package &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pkg. Package pkg =&gt; pkg -&gt; PackageIdentifier
</span><a href="Distribution.Package.html#packageId"><span class="hs-identifier hs-var">packageId</span></a></span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747429"><span class="hs-identifier hs-var">pkg_descr0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-531"></span><span>         </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; requires the following languages which are not &quot;</span></span><span>
</span><span id="line-532"></span><span>         </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;supported by &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; CompilerId
</span><a href="Distribution.Simple.Compiler.html#compilerId"><span class="hs-identifier hs-var">compilerId</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;: &quot;</span></span><span>
</span><span id="line-533"></span><span>         </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#intercalate"><span class="hs-identifier hs-var">intercalate</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">[Language]
</span><a href="#local-6989586621679747334"><span class="hs-identifier hs-var">langs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-534"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747327"><span class="annot"><span class="annottext">extlist :: [Extension]
</span><a href="#local-6989586621679747327"><span class="hs-identifier hs-var hs-var">extlist</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#nub"><span class="hs-identifier hs-var">nub</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [Extension]
</span><a href="Distribution.Types.BuildInfo.html#allExtensions"><span class="hs-identifier hs-var">allExtensions</span></a></span><span>
</span><span id="line-535"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; ComponentRequestedSpec -&gt; [BuildInfo]
</span><a href="Distribution.Types.PackageDescription.html#enabledBuildInfos"><span class="hs-identifier hs-var">enabledBuildInfos</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679747382"><span class="hs-identifier hs-var">enabled</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-536"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747324"><span class="annot"><span class="annottext">exts :: [Extension]
</span><a href="#local-6989586621679747324"><span class="hs-identifier hs-var hs-var">exts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; [Extension] -&gt; [Extension]
</span><a href="Distribution.Simple.Compiler.html#unsupportedExtensions"><span class="hs-identifier hs-var">unsupportedExtensions</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">[Extension]
</span><a href="#local-6989586621679747327"><span class="hs-identifier hs-var">extlist</span></a></span><span>
</span><span id="line-537"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Extension]
</span><a href="#local-6989586621679747324"><span class="hs-identifier hs-var">exts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-538"></span><span>      </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;The package &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pkg. Package pkg =&gt; pkg -&gt; PackageIdentifier
</span><a href="Distribution.Package.html#packageId"><span class="hs-identifier hs-var">packageId</span></a></span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747429"><span class="hs-identifier hs-var">pkg_descr0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-539"></span><span>         </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; requires the following language extensions which are not &quot;</span></span><span>
</span><span id="line-540"></span><span>         </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;supported by &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; CompilerId
</span><a href="Distribution.Simple.Compiler.html#compilerId"><span class="hs-identifier hs-var">compilerId</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;: &quot;</span></span><span>
</span><span id="line-541"></span><span>         </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#intercalate"><span class="hs-identifier hs-var">intercalate</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">[Extension]
</span><a href="#local-6989586621679747324"><span class="hs-identifier hs-var">exts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-542"></span><span>
</span><span id="line-543"></span><span>    </span><span class="hs-comment">-- Check foreign library build requirements</span><span>
</span><span id="line-544"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747322"><span class="annot"><span class="annottext">flibs :: [ForeignLib]
</span><a href="#local-6989586621679747322"><span class="hs-identifier hs-var hs-var">flibs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679747321"><span class="hs-identifier hs-var">flib</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Distribution.Types.Component.html#CFLib"><span class="hs-identifier hs-type">CFLib</span></a></span><span> </span><span id="local-6989586621679747321"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679747321"><span class="hs-identifier hs-var">flib</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PackageDescription -&gt; ComponentRequestedSpec -&gt; [Component]
</span><a href="Distribution.Types.PackageDescription.html#enabledComponents"><span class="hs-identifier hs-var">enabledComponents</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679747382"><span class="hs-identifier hs-var">enabled</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-545"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747318"><span class="annot"><span class="annottext">unsupportedFLibs :: [[Char]]
</span><a href="#local-6989586621679747318"><span class="hs-identifier hs-var hs-var">unsupportedFLibs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; Platform -&gt; [ForeignLib] -&gt; [[Char]]
</span><a href="Distribution.Simple.Configure.html#unsupportedForeignLibs"><span class="hs-identifier hs-var">unsupportedForeignLibs</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679747391"><span class="hs-identifier hs-var">compPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">[ForeignLib]
</span><a href="#local-6989586621679747322"><span class="hs-identifier hs-var">flibs</span></a></span><span>
</span><span id="line-546"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679747318"><span class="hs-identifier hs-var">unsupportedFLibs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-547"></span><span>      </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Cannot build some foreign libraries: &quot;</span></span><span>
</span><span id="line-548"></span><span>         </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#intercalate"><span class="hs-identifier hs-var">intercalate</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;,&quot;</span></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679747318"><span class="hs-identifier hs-var">unsupportedFLibs</span></a></span><span>
</span><span id="line-549"></span><span>
</span><span id="line-550"></span><span>    </span><span class="hs-comment">-- Configure certain external build tools, see below for which ones.</span><span>
</span><span id="line-551"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747314"><span class="annot"><span class="annottext">requiredBuildTools :: [LegacyExeDependency]
</span><a href="#local-6989586621679747314"><span class="hs-identifier hs-var hs-var">requiredBuildTools</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-552"></span><span>          </span><span id="local-6989586621679747313"><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679747313"><span class="hs-identifier hs-var">bi</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PackageDescription -&gt; ComponentRequestedSpec -&gt; [BuildInfo]
</span><a href="Distribution.Types.PackageDescription.html#enabledBuildInfos"><span class="hs-identifier hs-var">enabledBuildInfos</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679747382"><span class="hs-identifier hs-var">enabled</span></a></span><span>
</span><span id="line-553"></span><span>          </span><span class="hs-comment">-- First, we collect any tool dep that we know is external. This is,</span><span>
</span><span id="line-554"></span><span>          </span><span class="hs-comment">-- in practice:</span><span>
</span><span id="line-555"></span><span>          </span><span class="hs-comment">--</span><span>
</span><span id="line-556"></span><span>          </span><span class="hs-comment">-- 1. `build-tools` entries on the whitelist</span><span>
</span><span id="line-557"></span><span>          </span><span class="hs-comment">--</span><span>
</span><span id="line-558"></span><span>          </span><span class="hs-comment">-- 2. `build-tool-depends` that aren't from the current package.</span><span>
</span><span id="line-559"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747312"><span class="annot"><span class="annottext">externBuildToolDeps :: [LegacyExeDependency]
</span><a href="#local-6989586621679747312"><span class="hs-identifier hs-var hs-var">externBuildToolDeps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-560"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; VersionRange -&gt; LegacyExeDependency
</span><a href="Distribution.Types.LegacyExeDependency.html#LegacyExeDependency"><span class="hs-identifier hs-var">LegacyExeDependency</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnqualComponentName -&gt; [Char]
</span><a href="Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a></span><span> </span><span class="annot"><span class="annottext">UnqualComponentName
</span><a href="#local-6989586621679747309"><span class="hs-identifier hs-var">eName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">VersionRange
</span><a href="#local-6989586621679747308"><span class="hs-identifier hs-var">versionRange</span></a></span><span>
</span><span id="line-561"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679747307"><span class="annot"><span class="annottext">buildTool :: ExeDependency
</span><a href="#local-6989586621679747307"><span class="hs-identifier hs-var">buildTool</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.ExeDependency.html#ExeDependency"><span class="hs-identifier hs-type">ExeDependency</span></a></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679747309"><span class="annot"><span class="annottext">UnqualComponentName
</span><a href="#local-6989586621679747309"><span class="hs-identifier hs-var">eName</span></a></span></span><span> </span><span id="local-6989586621679747308"><span class="annot"><span class="annottext">VersionRange
</span><a href="#local-6989586621679747308"><span class="hs-identifier hs-var">versionRange</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-562"></span><span>                  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PackageDescription -&gt; BuildInfo -&gt; [ExeDependency]
</span><a href="Distribution.Simple.BuildToolDepends.html#getAllToolDependencies"><span class="hs-identifier hs-var">getAllToolDependencies</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679747313"><span class="hs-identifier hs-var">bi</span></a></span><span>
</span><span id="line-563"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription -&gt; ExeDependency -&gt; Bool
</span><a href="Distribution.Simple.BuildToolDepends.html#isInternal"><span class="hs-identifier hs-var">isInternal</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="annot"><span class="annottext">ExeDependency
</span><a href="#local-6989586621679747307"><span class="hs-identifier hs-var">buildTool</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-564"></span><span>          </span><span class="hs-comment">-- Second, we collect any build-tools entry we don't know how to</span><span>
</span><span id="line-565"></span><span>          </span><span class="hs-comment">-- desugar. We'll never have any idea how to build them, so we just</span><span>
</span><span id="line-566"></span><span>          </span><span class="hs-comment">-- hope they are already on the PATH.</span><span>
</span><span id="line-567"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747299"><span class="annot"><span class="annottext">unknownBuildTools :: [LegacyExeDependency]
</span><a href="#local-6989586621679747299"><span class="hs-identifier hs-var hs-var">unknownBuildTools</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-568"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">LegacyExeDependency
</span><a href="#local-6989586621679747298"><span class="hs-identifier hs-var">buildTool</span></a></span><span>
</span><span id="line-569"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679747298"><span class="annot"><span class="annottext">LegacyExeDependency
</span><a href="#local-6989586621679747298"><span class="hs-identifier hs-var">buildTool</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [LegacyExeDependency]
</span><a href="Distribution.Types.BuildInfo.html#buildTools"><span class="hs-identifier hs-var">buildTools</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679747313"><span class="hs-identifier hs-var">bi</span></a></span><span>
</span><span id="line-570"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PackageDescription -&gt; LegacyExeDependency -&gt; Maybe ExeDependency
</span><a href="Distribution.Simple.BuildToolDepends.html#desugarBuildTool"><span class="hs-identifier hs-var">desugarBuildTool</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="annot"><span class="annottext">LegacyExeDependency
</span><a href="#local-6989586621679747298"><span class="hs-identifier hs-var">buildTool</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-571"></span><span>          </span><span class="annot"><span class="annottext">[LegacyExeDependency]
</span><a href="#local-6989586621679747312"><span class="hs-identifier hs-var">externBuildToolDeps</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LegacyExeDependency]
</span><a href="#local-6989586621679747299"><span class="hs-identifier hs-var">unknownBuildTools</span></a></span><span>
</span><span id="line-572"></span><span>
</span><span id="line-573"></span><span>    </span><span id="local-6989586621679747295"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679747295"><span class="hs-identifier hs-var">programDb'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-574"></span><span>          </span><span class="annot"><span class="annottext">Verbosity -&gt; ProgramDb -&gt; IO ProgramDb
</span><a href="Distribution.Simple.Program.Db.html#configureAllKnownPrograms"><span class="hs-identifier hs-var">configureAllKnownPrograms</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Verbosity -&gt; Verbosity
</span><a href="Distribution.Verbosity.html#lessVerbose"><span class="hs-identifier hs-var">lessVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679747390"><span class="hs-identifier hs-var">programDb</span></a></span><span>
</span><span id="line-575"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; [LegacyExeDependency] -&gt; ProgramDb -&gt; IO ProgramDb
</span><a href="Distribution.Simple.Configure.html#configureRequiredPrograms"><span class="hs-identifier hs-var">configureRequiredPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[LegacyExeDependency]
</span><a href="#local-6989586621679747314"><span class="hs-identifier hs-var">requiredBuildTools</span></a></span><span>
</span><span id="line-576"></span><span>
</span><span id="line-577"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679747292"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747292"><span class="hs-identifier hs-var">pkg_descr'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679747291"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679747291"><span class="hs-identifier hs-var">programDb''</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-578"></span><span>      </span><span class="annot"><span class="annottext">Verbosity
-&gt; PackageDescription
-&gt; ProgramDb
-&gt; ComponentRequestedSpec
-&gt; IO (PackageDescription, ProgramDb)
</span><a href="Distribution.Simple.Configure.html#configurePkgconfigPackages"><span class="hs-identifier hs-var">configurePkgconfigPackages</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679747295"><span class="hs-identifier hs-var">programDb'</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679747382"><span class="hs-identifier hs-var">enabled</span></a></span><span>
</span><span id="line-579"></span><span>
</span><span id="line-580"></span><span>    </span><span class="hs-comment">-- Compute internal component graph</span><span>
</span><span id="line-581"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-582"></span><span>    </span><span class="hs-comment">-- The general idea is that we take a look at all the source level</span><span>
</span><span id="line-583"></span><span>    </span><span class="hs-comment">-- components (which may build-depends on each other) and form a graph.</span><span>
</span><span id="line-584"></span><span>    </span><span class="hs-comment">-- From there, we build a ComponentLocalBuildInfo for each of the</span><span>
</span><span id="line-585"></span><span>    </span><span class="hs-comment">-- components, which lets us actually build each component.</span><span>
</span><span id="line-586"></span><span>    </span><span class="hs-comment">-- internalPackageSet</span><span>
</span><span id="line-587"></span><span>    </span><span class="hs-comment">-- use_external_internal_deps</span><span>
</span><span id="line-588"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679747289"><span class="annot"><span class="annottext">[ComponentLocalBuildInfo]
</span><a href="#local-6989586621679747289"><span class="hs-identifier hs-var">buildComponents</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-589"></span><span>     </span><span id="local-6989586621679747288"><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679747288"><span class="hs-identifier hs-var">packageDependsIndex</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.PackageIndex.html#InstalledPackageIndex"><span class="hs-identifier hs-type">InstalledPackageIndex</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-590"></span><span>      </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; LogProgress a -&gt; IO a
</span><a href="Distribution.Utils.LogProgress.html#runLogProgress"><span class="hs-identifier hs-var">runLogProgress</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Bool
-&gt; ComponentRequestedSpec
-&gt; Bool
-&gt; Flag [Char]
-&gt; Flag ComponentId
-&gt; PackageDescription
-&gt; [PreExistingComponent]
-&gt; FlagAssignment
-&gt; [(ModuleName, Module)]
-&gt; InstalledPackageIndex
-&gt; Compiler
-&gt; LogProgress ([ComponentLocalBuildInfo], InstalledPackageIndex)
</span><a href="Distribution.Backpack.Configure.html#configureComponentLocalBuildInfos"><span class="hs-identifier hs-var">configureComponentLocalBuildInfos</span></a></span><span>
</span><span id="line-591"></span><span>            </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-592"></span><span>            </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747414"><span class="hs-identifier hs-var">use_external_internal_deps</span></a></span><span>
</span><span id="line-593"></span><span>            </span><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679747382"><span class="hs-identifier hs-var">enabled</span></a></span><span>
</span><span id="line-594"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configDeterministic"><span class="hs-identifier hs-var">configDeterministic</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-595"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag [Char]
</span><a href="Distribution.Simple.Setup.html#configIPID"><span class="hs-identifier hs-var">configIPID</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-596"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag ComponentId
</span><a href="Distribution.Simple.Setup.html#configCID"><span class="hs-identifier hs-var">configCID</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-597"></span><span>            </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span>
</span><span id="line-598"></span><span>            </span><span class="annot"><span class="annottext">[PreExistingComponent]
</span><a href="#local-6989586621679747350"><span class="hs-identifier hs-var">externalPkgDeps</span></a></span><span>
</span><span id="line-599"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; FlagAssignment
</span><a href="Distribution.Simple.Setup.html#configConfigurationsFlags"><span class="hs-identifier hs-var">configConfigurationsFlags</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-600"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; [(ModuleName, Module)]
</span><a href="Distribution.Simple.Setup.html#configInstantiateWith"><span class="hs-identifier hs-var">configInstantiateWith</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-601"></span><span>            </span><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679747384"><span class="hs-identifier hs-var">installedPackageSet</span></a></span><span>
</span><span id="line-602"></span><span>            </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-603"></span><span>
</span><span id="line-604"></span><span>    </span><span class="hs-comment">-- Decide if we're going to compile with split sections.</span><span>
</span><span id="line-605"></span><span>    </span><span id="local-6989586621679747282"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747282"><span class="hs-identifier hs-var">split_sections</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-606"></span><span>       </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configSplitSections"><span class="hs-identifier hs-var">configSplitSections</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-607"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-608"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; CompilerFlavor
</span><a href="Distribution.Simple.Compiler.html#compilerFlavor"><span class="hs-identifier hs-var">compilerFlavor</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-609"></span><span>                        </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; Version
</span><a href="Distribution.Simple.Compiler.html#compilerVersion"><span class="hs-identifier hs-var">compilerVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Version
</span><a href="Distribution.Types.Version.html#mkVersion"><span class="hs-identifier hs-var">mkVersion</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">]</span><span>
</span><span id="line-610"></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-611"></span><span>                        </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHCJS"><span class="hs-identifier hs-var">GHCJS</span></a></span><span>
</span><span id="line-612"></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-613"></span><span>                        </span><span class="annot"><span class="annottext">CompilerFlavor
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-614"></span><span>                                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;this compiler does not support &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-615"></span><span>                                      </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;--enable-split-sections; ignoring&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-616"></span><span>                                </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-617"></span><span>
</span><span id="line-618"></span><span>    </span><span class="hs-comment">-- Decide if we're going to compile with split objects.</span><span>
</span><span id="line-619"></span><span>    </span><span id="local-6989586621679747275"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747275"><span class="hs-identifier hs-var">split_objs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-620"></span><span>       </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configSplitObjs"><span class="hs-identifier hs-var">configSplitObjs</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-621"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-622"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; CompilerFlavor
</span><a href="Distribution.Simple.Compiler.html#compilerFlavor"><span class="hs-identifier hs-var">compilerFlavor</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-623"></span><span>                        </span><span class="annot"><span class="annottext">CompilerFlavor
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747282"><span class="hs-identifier hs-var">split_sections</span></a></span><span>
</span><span id="line-624"></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-625"></span><span>                                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;--enable-split-sections and &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-626"></span><span>                                      </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;--enable-split-objs are mutually&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-627"></span><span>                                      </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;exclusive; ignoring the latter&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-628"></span><span>                                </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-629"></span><span>                        </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span>
</span><span id="line-630"></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-631"></span><span>                        </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHCJS"><span class="hs-identifier hs-var">GHCJS</span></a></span><span>
</span><span id="line-632"></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-633"></span><span>                        </span><span class="annot"><span class="annottext">CompilerFlavor
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-634"></span><span>                                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;this compiler does not support &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-635"></span><span>                                      </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;--enable-split-objs; ignoring&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-636"></span><span>                                </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-637"></span><span>
</span><span id="line-638"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747273"><span class="annot"><span class="annottext">ghciLibByDefault :: Bool
</span><a href="#local-6989586621679747273"><span class="hs-identifier hs-var hs-var">ghciLibByDefault</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-639"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; CompilerId
</span><a href="Distribution.Simple.Compiler.html#compilerId"><span class="hs-identifier hs-var">compilerId</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-640"></span><span>            </span><span class="annot"><a href="Distribution.Compiler.html#CompilerId"><span class="hs-identifier hs-type">CompilerId</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-641"></span><span>              </span><span class="hs-comment">-- If ghc is non-dynamic, then ghci needs object files,</span><span>
</span><span id="line-642"></span><span>              </span><span class="hs-comment">-- so we build one by default.</span><span>
</span><span id="line-643"></span><span>              </span><span class="hs-comment">--</span><span>
</span><span id="line-644"></span><span>              </span><span class="hs-comment">-- Technically, archive files should be sufficient for ghci,</span><span>
</span><span id="line-645"></span><span>              </span><span class="hs-comment">-- but because of GHC bug #8942, it has never been safe to</span><span>
</span><span id="line-646"></span><span>              </span><span class="hs-comment">-- rely on them. By the time that bug was fixed, ghci had</span><span>
</span><span id="line-647"></span><span>              </span><span class="hs-comment">-- been changed to read shared libraries instead of archive</span><span>
</span><span id="line-648"></span><span>              </span><span class="hs-comment">-- files (see next code block).</span><span>
</span><span id="line-649"></span><span>              </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.html#isDynamic"><span class="hs-identifier hs-var">GHC.isDynamic</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-650"></span><span>            </span><span class="annot"><a href="Distribution.Compiler.html#CompilerId"><span class="hs-identifier hs-type">CompilerId</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHCJS"><span class="hs-identifier hs-var">GHCJS</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-651"></span><span>              </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHCJS.html#isDynamic"><span class="hs-identifier hs-var">GHCJS.isDynamic</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-652"></span><span>            </span><span class="annot"><span class="annottext">CompilerId
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-653"></span><span>
</span><span id="line-654"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747267"><span class="annot"><span class="annottext">sharedLibsByDefault :: Bool
</span><a href="#local-6989586621679747267"><span class="hs-identifier hs-var hs-var">sharedLibsByDefault</span></a></span></span><span>
</span><span id="line-655"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configDynExe"><span class="hs-identifier hs-var">configDynExe</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-656"></span><span>              </span><span class="hs-comment">-- build a shared library if dynamically-linked</span><span>
</span><span id="line-657"></span><span>              </span><span class="hs-comment">-- executables are requested</span><span>
</span><span id="line-658"></span><span>              </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-659"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; CompilerId
</span><a href="Distribution.Simple.Compiler.html#compilerId"><span class="hs-identifier hs-var">compilerId</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-660"></span><span>            </span><span class="annot"><a href="Distribution.Compiler.html#CompilerId"><span class="hs-identifier hs-type">CompilerId</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-661"></span><span>              </span><span class="hs-comment">-- if ghc is dynamic, then ghci needs a shared</span><span>
</span><span id="line-662"></span><span>              </span><span class="hs-comment">-- library, so we build one by default.</span><span>
</span><span id="line-663"></span><span>              </span><span class="annot"><span class="annottext">Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.html#isDynamic"><span class="hs-identifier hs-var">GHC.isDynamic</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-664"></span><span>            </span><span class="annot"><a href="Distribution.Compiler.html#CompilerId"><span class="hs-identifier hs-type">CompilerId</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHCJS"><span class="hs-identifier hs-var">GHCJS</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-665"></span><span>              </span><span class="annot"><span class="annottext">Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHCJS.html#isDynamic"><span class="hs-identifier hs-var">GHCJS.isDynamic</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-666"></span><span>            </span><span class="annot"><span class="annottext">CompilerId
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-667"></span><span>        </span><span id="local-6989586621679747266"><span class="annot"><span class="annottext">withSharedLib_ :: Bool
</span><a href="#local-6989586621679747266"><span class="hs-identifier hs-var hs-var">withSharedLib_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-668"></span><span>            </span><span class="hs-comment">-- build shared libraries if required by GHC or by the</span><span>
</span><span id="line-669"></span><span>            </span><span class="hs-comment">-- executable linking mode, but allow the user to force</span><span>
</span><span id="line-670"></span><span>            </span><span class="hs-comment">-- building only static library archives with</span><span>
</span><span id="line-671"></span><span>            </span><span class="hs-comment">-- --disable-shared.</span><span>
</span><span id="line-672"></span><span>            </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747267"><span class="hs-identifier hs-var">sharedLibsByDefault</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configSharedLib"><span class="hs-identifier hs-var">configSharedLib</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-673"></span><span>
</span><span id="line-674"></span><span>        </span><span id="local-6989586621679747264"><span class="annot"><span class="annottext">withStaticLib_ :: Bool
</span><a href="#local-6989586621679747264"><span class="hs-identifier hs-var hs-var">withStaticLib_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-675"></span><span>            </span><span class="hs-comment">-- build a static library (all dependent libraries rolled</span><span>
</span><span id="line-676"></span><span>            </span><span class="hs-comment">-- into a huge .a archive) via GHCs -staticlib flag.</span><span>
</span><span id="line-677"></span><span>            </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configStaticLib"><span class="hs-identifier hs-var">configStaticLib</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-678"></span><span>
</span><span id="line-679"></span><span>        </span><span id="local-6989586621679747260"><span class="annot"><span class="annottext">withDynExe_ :: Bool
</span><a href="#local-6989586621679747260"><span class="hs-identifier hs-var hs-var">withDynExe_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configDynExe"><span class="hs-identifier hs-var">configDynExe</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-680"></span><span>
</span><span id="line-681"></span><span>        </span><span id="local-6989586621679747257"><span class="annot"><span class="annottext">withFullyStaticExe_ :: Bool
</span><a href="#local-6989586621679747257"><span class="hs-identifier hs-var hs-var">withFullyStaticExe_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configFullyStaticExe"><span class="hs-identifier hs-var">configFullyStaticExe</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-682"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747260"><span class="hs-identifier hs-var">withDynExe_</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747266"><span class="hs-identifier hs-var">withSharedLib_</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-683"></span><span>           </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Executables will use dynamic linking, but a shared library &quot;</span></span><span>
</span><span id="line-684"></span><span>        </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;is not being built. Linking will fail if any executables &quot;</span></span><span>
</span><span id="line-685"></span><span>        </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;depend on the library.&quot;</span></span><span>
</span><span id="line-686"></span><span>
</span><span id="line-687"></span><span>    </span><span id="local-6989586621679747256"><span class="annot"><span class="annottext">LocalBuildInfo -&gt; LocalBuildInfo
</span><a href="#local-6989586621679747256"><span class="hs-identifier hs-var">setProfLBI</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; ConfigFlags -&gt; Compiler -&gt; IO (LocalBuildInfo -&gt; LocalBuildInfo)
</span><a href="Distribution.Simple.Configure.html#configureProfiling"><span class="hs-identifier hs-var">configureProfiling</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-688"></span><span>
</span><span id="line-689"></span><span>    </span><span id="local-6989586621679747254"><span class="annot"><span class="annottext">LocalBuildInfo -&gt; LocalBuildInfo
</span><a href="#local-6989586621679747254"><span class="hs-identifier hs-var">setCoverageLBI</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; ConfigFlags -&gt; Compiler -&gt; IO (LocalBuildInfo -&gt; LocalBuildInfo)
</span><a href="Distribution.Simple.Configure.html#configureCoverage"><span class="hs-identifier hs-var">configureCoverage</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-690"></span><span>
</span><span id="line-691"></span><span>
</span><span id="line-692"></span><span>
</span><span id="line-693"></span><span>    </span><span class="hs-comment">-- Turn off library and executable stripping when `debug-info` is set</span><span>
</span><span id="line-694"></span><span>    </span><span class="hs-comment">-- to anything other than zero.</span><span>
</span><span id="line-695"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-696"></span><span>        </span><span id="local-6989586621679747243"><span class="annot"><span class="annottext">strip_libexe :: [Char] -&gt; (ConfigFlags -&gt; Flag Bool) -&gt; IO Bool
</span><a href="#local-6989586621679747243"><span class="hs-identifier hs-var hs-var">strip_libexe</span></a></span></span><span> </span><span id="local-6989586621679747242"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747242"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679747241"><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="#local-6989586621679747241"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-697"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747240"><span class="annot"><span class="annottext">defaultStrip :: Bool
</span><a href="#local-6989586621679747240"><span class="hs-identifier hs-var hs-var">defaultStrip</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="#local-6989586621679747241"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-698"></span><span>          </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag DebugInfoLevel
</span><a href="Distribution.Simple.Setup.html#configDebugInfo"><span class="hs-identifier hs-var">configDebugInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-699"></span><span>                      </span><span class="annot"><span class="annottext">DebugInfoLevel
</span><a href="Distribution.Simple.Compiler.html#NoDebugInfo"><span class="hs-identifier hs-var">NoDebugInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747240"><span class="hs-identifier hs-var">defaultStrip</span></a></span><span>
</span><span id="line-700"></span><span>                      </span><span class="annot"><span class="annottext">DebugInfoLevel
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="#local-6989586621679747241"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-701"></span><span>                             </span><span class="annot"><a href="Distribution.Simple.Flag.html#Flag"><span class="hs-identifier hs-type">Flag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-702"></span><span>                              </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Setting debug-info implies &quot;</span></span><span>
</span><span id="line-703"></span><span>                                                </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747242"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-stripping: False&quot;</span></span><span>
</span><span id="line-704"></span><span>                              </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-705"></span><span>
</span><span id="line-706"></span><span>                             </span><span class="annot"><span class="annottext">Flag Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-707"></span><span>
</span><span id="line-708"></span><span>    </span><span id="local-6989586621679747236"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747236"><span class="hs-identifier hs-var">strip_lib</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; (ConfigFlags -&gt; Flag Bool) -&gt; IO Bool
</span><a href="#local-6989586621679747243"><span class="hs-identifier hs-var">strip_libexe</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;library&quot;</span></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configStripLibs"><span class="hs-identifier hs-var">configStripLibs</span></a></span><span>
</span><span id="line-709"></span><span>    </span><span id="local-6989586621679747234"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747234"><span class="hs-identifier hs-var">strip_exe</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; (ConfigFlags -&gt; Flag Bool) -&gt; IO Bool
</span><a href="#local-6989586621679747243"><span class="hs-identifier hs-var">strip_libexe</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;executable&quot;</span></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configStripExes"><span class="hs-identifier hs-var">configStripExes</span></a></span><span>
</span><span id="line-710"></span><span>
</span><span id="line-711"></span><span>
</span><span id="line-712"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747232"><span class="annot"><span class="annottext">reloc :: Bool
</span><a href="#local-6989586621679747232"><span class="hs-identifier hs-var hs-var">reloc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configRelocatable"><span class="hs-identifier hs-var">configRelocatable</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-713"></span><span>
</span><span id="line-714"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747228"><span class="annot"><span class="annottext">buildComponentsMap :: Map ComponentName [ComponentLocalBuildInfo]
</span><a href="#local-6989586621679747228"><span class="hs-identifier hs-var hs-var">buildComponentsMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-715"></span><span>            </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679747226"><span class="annot"><span class="annottext">Map ComponentName [ComponentLocalBuildInfo]
</span><a href="#local-6989586621679747226"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679747225"><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679747225"><span class="hs-identifier hs-var">clbi</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#insertWith"><span class="hs-identifier hs-var">Map.insertWith</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">(++)</span></a></span><span>
</span><span id="line-716"></span><span>                               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentLocalBuildInfo -&gt; ComponentName
</span><a href="Distribution.Types.ComponentLocalBuildInfo.html#componentLocalName"><span class="hs-identifier hs-var">componentLocalName</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679747225"><span class="hs-identifier hs-var">clbi</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679747225"><span class="hs-identifier hs-var">clbi</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Map ComponentName [ComponentLocalBuildInfo]
</span><a href="#local-6989586621679747226"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-717"></span><span>                   </span><span class="annot"><span class="annottext">forall k a. Map k a
</span><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span> </span><span class="annot"><span class="annottext">[ComponentLocalBuildInfo]
</span><a href="#local-6989586621679747289"><span class="hs-identifier hs-var">buildComponents</span></a></span><span>
</span><span id="line-718"></span><span>
</span><span id="line-719"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747206"><span class="annot"><span class="annottext">lbi :: LocalBuildInfo
</span><a href="#local-6989586621679747206"><span class="hs-identifier hs-var hs-var">lbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; LocalBuildInfo
</span><a href="#local-6989586621679747254"><span class="hs-identifier hs-var">setCoverageLBI</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; LocalBuildInfo
</span><a href="#local-6989586621679747256"><span class="hs-identifier hs-var">setProfLBI</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-720"></span><span>              </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-721"></span><span>                </span><span class="annot"><span class="annottext">configFlags :: ConfigFlags
</span><a href="#local-6989586621679747204"><span class="hs-identifier hs-var">configFlags</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-722"></span><span>                </span><span class="annot"><span class="annottext">flagAssignment :: FlagAssignment
</span><a href="#local-6989586621679747203"><span class="hs-identifier hs-var">flagAssignment</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FlagAssignment
</span><a href="#local-6989586621679747365"><span class="hs-identifier hs-var">flags</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-723"></span><span>                </span><span class="annot"><span class="annottext">componentEnabledSpec :: ComponentRequestedSpec
</span><a href="Distribution.Types.LocalBuildInfo.html#componentEnabledSpec"><span class="hs-identifier hs-var">componentEnabledSpec</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679747382"><span class="hs-identifier hs-var">enabled</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-724"></span><span>                </span><span class="annot"><span class="annottext">extraConfigArgs :: [[Char]]
</span><a href="#local-6989586621679747201"><span class="hs-identifier hs-var">extraConfigArgs</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- Currently configure does not</span><span>
</span><span id="line-725"></span><span>                                           </span><span class="hs-comment">-- take extra args, but if it</span><span>
</span><span id="line-726"></span><span>                                           </span><span class="hs-comment">-- did they would go here.</span><span>
</span><span id="line-727"></span><span>                </span><span class="annot"><span class="annottext">installDirTemplates :: InstallDirTemplates
</span><a href="#local-6989586621679747200"><span class="hs-identifier hs-var">installDirTemplates</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InstallDirTemplates
</span><a href="#local-6989586621679747344"><span class="hs-identifier hs-var">installDirs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-728"></span><span>                </span><span class="annot"><span class="annottext">compiler :: Compiler
</span><a href="Distribution.Types.LocalBuildInfo.html#compiler"><span class="hs-identifier hs-var">compiler</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-729"></span><span>                </span><span class="annot"><span class="annottext">hostPlatform :: Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679747391"><span class="hs-identifier hs-var">compPlatform</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-730"></span><span>                </span><span class="annot"><span class="annottext">buildDir :: [Char]
</span><a href="Distribution.Types.LocalBuildInfo.html#buildDir"><span class="hs-identifier hs-var">buildDir</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747400"><span class="hs-identifier hs-var">buildDir</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-731"></span><span>                </span><span class="annot"><span class="annottext">cabalFilePath :: Maybe [Char]
</span><a href="Distribution.Types.LocalBuildInfo.html#cabalFilePath"><span class="hs-identifier hs-var">cabalFilePath</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Flag a -&gt; Maybe a
</span><a href="Distribution.Simple.Flag.html#flagToMaybe"><span class="hs-identifier hs-var">flagToMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag [Char]
</span><a href="Distribution.Simple.Setup.html#configCabalFilePath"><span class="hs-identifier hs-var">configCabalFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-732"></span><span>                </span><span class="annot"><span class="annottext">componentGraph :: Graph ComponentLocalBuildInfo
</span><a href="#local-6989586621679747195"><span class="hs-identifier hs-var">componentGraph</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (IsNode a, Show (Key a)) =&gt; [a] -&gt; Graph a
</span><a href="Distribution.Compat.Graph.html#fromDistinctList"><span class="hs-identifier hs-var">Graph.fromDistinctList</span></a></span><span> </span><span class="annot"><span class="annottext">[ComponentLocalBuildInfo]
</span><a href="#local-6989586621679747289"><span class="hs-identifier hs-var">buildComponents</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-733"></span><span>                </span><span class="annot"><span class="annottext">componentNameMap :: Map ComponentName [ComponentLocalBuildInfo]
</span><a href="#local-6989586621679747193"><span class="hs-identifier hs-var">componentNameMap</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map ComponentName [ComponentLocalBuildInfo]
</span><a href="#local-6989586621679747228"><span class="hs-identifier hs-var">buildComponentsMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-734"></span><span>                </span><span class="annot"><span class="annottext">installedPkgs :: InstalledPackageIndex
</span><a href="Distribution.Types.LocalBuildInfo.html#installedPkgs"><span class="hs-identifier hs-var">installedPkgs</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679747288"><span class="hs-identifier hs-var">packageDependsIndex</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-735"></span><span>                </span><span class="annot"><span class="annottext">pkgDescrFile :: Maybe [Char]
</span><a href="#local-6989586621679747191"><span class="hs-identifier hs-var">pkgDescrFile</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-736"></span><span>                </span><span class="annot"><span class="annottext">localPkgDescr :: PackageDescription
</span><a href="#local-6989586621679747190"><span class="hs-identifier hs-var">localPkgDescr</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747292"><span class="hs-identifier hs-var">pkg_descr'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-737"></span><span>                </span><span class="annot"><span class="annottext">withPrograms :: ProgramDb
</span><a href="Distribution.Types.LocalBuildInfo.html#withPrograms"><span class="hs-identifier hs-var">withPrograms</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679747291"><span class="hs-identifier hs-var">programDb''</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-738"></span><span>                </span><span class="annot"><span class="annottext">withVanillaLib :: Bool
</span><a href="#local-6989586621679747188"><span class="hs-identifier hs-var">withVanillaLib</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configVanillaLib"><span class="hs-identifier hs-var">configVanillaLib</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-739"></span><span>                </span><span class="annot"><span class="annottext">withSharedLib :: Bool
</span><a href="#local-6989586621679747186"><span class="hs-identifier hs-var">withSharedLib</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747266"><span class="hs-identifier hs-var">withSharedLib_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-740"></span><span>                </span><span class="annot"><span class="annottext">withStaticLib :: Bool
</span><a href="#local-6989586621679747185"><span class="hs-identifier hs-var">withStaticLib</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747264"><span class="hs-identifier hs-var">withStaticLib_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-741"></span><span>                </span><span class="annot"><span class="annottext">withDynExe :: Bool
</span><a href="#local-6989586621679747184"><span class="hs-identifier hs-var">withDynExe</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747260"><span class="hs-identifier hs-var">withDynExe_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-742"></span><span>                </span><span class="annot"><span class="annottext">withFullyStaticExe :: Bool
</span><a href="#local-6989586621679747183"><span class="hs-identifier hs-var">withFullyStaticExe</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747257"><span class="hs-identifier hs-var">withFullyStaticExe_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-743"></span><span>                </span><span class="annot"><span class="annottext">withProfLib :: Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfLib"><span class="hs-identifier hs-var">withProfLib</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span>
</span><span id="line-744"></span><span>                </span><span class="annot"><span class="annottext">withProfLibDetail :: ProfDetailLevel
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfLibDetail"><span class="hs-identifier hs-var">withProfLibDetail</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProfDetailLevel
</span><a href="Distribution.Simple.Compiler.html#ProfDetailNone"><span class="hs-identifier hs-var">ProfDetailNone</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-745"></span><span>                </span><span class="annot"><span class="annottext">withProfExe :: Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfExe"><span class="hs-identifier hs-var">withProfExe</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span>
</span><span id="line-746"></span><span>                </span><span class="annot"><span class="annottext">withProfExeDetail :: ProfDetailLevel
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfExeDetail"><span class="hs-identifier hs-var">withProfExeDetail</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProfDetailLevel
</span><a href="Distribution.Simple.Compiler.html#ProfDetailNone"><span class="hs-identifier hs-var">ProfDetailNone</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-747"></span><span>                </span><span class="annot"><span class="annottext">withOptimization :: OptimisationLevel
</span><a href="#local-6989586621679747177"><span class="hs-identifier hs-var">withOptimization</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag OptimisationLevel
</span><a href="Distribution.Simple.Setup.html#configOptimization"><span class="hs-identifier hs-var">configOptimization</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-748"></span><span>                </span><span class="annot"><span class="annottext">withDebugInfo :: DebugInfoLevel
</span><a href="#local-6989586621679747175"><span class="hs-identifier hs-var">withDebugInfo</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag DebugInfoLevel
</span><a href="Distribution.Simple.Setup.html#configDebugInfo"><span class="hs-identifier hs-var">configDebugInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-749"></span><span>                </span><span class="annot"><span class="annottext">withGHCiLib :: Bool
</span><a href="#local-6989586621679747174"><span class="hs-identifier hs-var">withGHCiLib</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747273"><span class="hs-identifier hs-var">ghciLibByDefault</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-750"></span><span>                                      </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configGHCiLib"><span class="hs-identifier hs-var">configGHCiLib</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-751"></span><span>                </span><span class="annot"><span class="annottext">splitSections :: Bool
</span><a href="#local-6989586621679747172"><span class="hs-identifier hs-var">splitSections</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747282"><span class="hs-identifier hs-var">split_sections</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-752"></span><span>                </span><span class="annot"><span class="annottext">splitObjs :: Bool
</span><a href="#local-6989586621679747171"><span class="hs-identifier hs-var">splitObjs</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747275"><span class="hs-identifier hs-var">split_objs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-753"></span><span>                </span><span class="annot"><span class="annottext">stripExes :: Bool
</span><a href="#local-6989586621679747170"><span class="hs-identifier hs-var">stripExes</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747234"><span class="hs-identifier hs-var">strip_exe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-754"></span><span>                </span><span class="annot"><span class="annottext">stripLibs :: Bool
</span><a href="#local-6989586621679747169"><span class="hs-identifier hs-var">stripLibs</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747236"><span class="hs-identifier hs-var">strip_lib</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-755"></span><span>                </span><span class="annot"><span class="annottext">exeCoverage :: Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#exeCoverage"><span class="hs-identifier hs-var">exeCoverage</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span>
</span><span id="line-756"></span><span>                </span><span class="annot"><span class="annottext">libCoverage :: Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#libCoverage"><span class="hs-identifier hs-var">libCoverage</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span>
</span><span id="line-757"></span><span>                </span><span class="annot"><span class="annottext">withPackageDB :: PackageDBStack
</span><a href="Distribution.Types.LocalBuildInfo.html#withPackageDB"><span class="hs-identifier hs-var">withPackageDB</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageDBStack
</span><a href="#local-6989586621679747395"><span class="hs-identifier hs-var">packageDbs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-758"></span><span>                </span><span class="annot"><span class="annottext">progPrefix :: PathTemplate
</span><a href="#local-6989586621679747165"><span class="hs-identifier hs-var">progPrefix</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag PathTemplate
</span><a href="Distribution.Simple.Setup.html#configProgPrefix"><span class="hs-identifier hs-var">configProgPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-759"></span><span>                </span><span class="annot"><span class="annottext">progSuffix :: PathTemplate
</span><a href="#local-6989586621679747163"><span class="hs-identifier hs-var">progSuffix</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag PathTemplate
</span><a href="Distribution.Simple.Setup.html#configProgSuffix"><span class="hs-identifier hs-var">configProgSuffix</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-760"></span><span>                </span><span class="annot"><span class="annottext">relocatable :: Bool
</span><a href="#local-6989586621679747161"><span class="hs-identifier hs-var">relocatable</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747232"><span class="hs-identifier hs-var">reloc</span></a></span><span>
</span><span id="line-761"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-762"></span><span>
</span><span id="line-763"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747232"><span class="hs-identifier hs-var">reloc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Verbosity -&gt; PackageDescription -&gt; LocalBuildInfo -&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#checkRelocatable"><span class="hs-identifier hs-var">checkRelocatable</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679747206"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-764"></span><span>
</span><span id="line-765"></span><span>    </span><span class="hs-comment">-- TODO: This is not entirely correct, because the dirs may vary</span><span>
</span><span id="line-766"></span><span>    </span><span class="hs-comment">-- across libraries/executables</span><span>
</span><span id="line-767"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747159"><span class="annot"><span class="annottext">dirs :: InstallDirs [Char]
</span><a href="#local-6989586621679747159"><span class="hs-identifier hs-var hs-var">dirs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageDescription
-&gt; LocalBuildInfo -&gt; CopyDest -&gt; InstallDirs [Char]
</span><a href="Distribution.Simple.LocalBuildInfo.html#absoluteInstallDirs"><span class="hs-identifier hs-var">absoluteInstallDirs</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679747206"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">CopyDest
</span><a href="Distribution.Simple.InstallDirs.html#NoCopyDest"><span class="hs-identifier hs-var">NoCopyDest</span></a></span><span>
</span><span id="line-768"></span><span>        </span><span id="local-6989586621679747154"><span class="annot"><span class="annottext">relative :: InstallDirs (Maybe [Char])
</span><a href="#local-6989586621679747154"><span class="hs-identifier hs-var hs-var">relative</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageIdentifier -&gt; LocalBuildInfo -&gt; InstallDirs (Maybe [Char])
</span><a href="Distribution.Simple.LocalBuildInfo.html#prefixRelativeInstallDirs"><span class="hs-identifier hs-var">prefixRelativeInstallDirs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pkg. Package pkg =&gt; pkg -&gt; PackageIdentifier
</span><a href="Distribution.Package.html#packageId"><span class="hs-identifier hs-var">packageId</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679747206"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-769"></span><span>
</span><span id="line-770"></span><span>    </span><span class="hs-comment">-- PKGROOT: allowing ${pkgroot} to be passed as --prefix to</span><span>
</span><span id="line-771"></span><span>    </span><span class="hs-comment">-- cabal configure, is only a hidden option. It allows packages</span><span>
</span><span id="line-772"></span><span>    </span><span class="hs-comment">-- to be relocatable with their package database.  This however</span><span>
</span><span id="line-773"></span><span>    </span><span class="hs-comment">-- breaks when the Paths_* or other includes are used that</span><span>
</span><span id="line-774"></span><span>    </span><span class="hs-comment">-- contain hard coded paths. This is still an open TODO.</span><span>
</span><span id="line-775"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-776"></span><span>    </span><span class="hs-comment">-- Allowing ${pkgroot} here, however requires less custom hooks</span><span>
</span><span id="line-777"></span><span>    </span><span class="hs-comment">-- in scripts that *really* want ${pkgroot}. See haskell/cabal/#4872</span><span>
</span><span id="line-778"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; Bool
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#isAbsolute"><span class="hs-identifier hs-var">isAbsolute</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#prefix"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679747159"><span class="hs-identifier hs-var">dirs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-779"></span><span>           </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;${pkgroot}&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#isPrefixOf"><span class="hs-operator hs-var">`isPrefixOf`</span></a></span><span> </span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#prefix"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679747159"><span class="hs-identifier hs-var">dirs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-780"></span><span>        </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;expected an absolute directory name for --prefix: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#prefix"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679747159"><span class="hs-identifier hs-var">dirs</span></a></span><span>
</span><span id="line-781"></span><span>
</span><span id="line-782"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;${pkgroot}&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#isPrefixOf"><span class="hs-operator hs-var">`isPrefixOf`</span></a></span><span> </span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#prefix"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679747159"><span class="hs-identifier hs-var">dirs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-783"></span><span>      </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Using ${pkgroot} in prefix &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#prefix"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679747159"><span class="hs-identifier hs-var">dirs</span></a></span><span>
</span><span id="line-784"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; will not work if you rely on the Path_* module &quot;</span></span><span>
</span><span id="line-785"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; or other hard coded paths.  Cabal does not yet &quot;</span></span><span>
</span><span id="line-786"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; support fully  relocatable builds! &quot;</span></span><span>
</span><span id="line-787"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; See #462 #2302 #2994 #3305 #3473 #3586 #3909&quot;</span></span><span>
</span><span id="line-788"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; #4097 #4291 #4872&quot;</span></span><span>
</span><span id="line-789"></span><span>
</span><span id="line-790"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Using &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="Distribution.Simple.Configure.html#currentCabalId"><span class="hs-identifier hs-var">currentCabalId</span></a></span><span>
</span><span id="line-791"></span><span>                  </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; compiled by &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="Distribution.Simple.Configure.html#currentCompilerId"><span class="hs-identifier hs-var">currentCompilerId</span></a></span><span>
</span><span id="line-792"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Using compiler: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; [Char]
</span><a href="Distribution.Simple.Compiler.html#showCompilerId"><span class="hs-identifier hs-var">showCompilerId</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747392"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-793"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Using install prefix: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#prefix"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679747159"><span class="hs-identifier hs-var">dirs</span></a></span><span>
</span><span id="line-794"></span><span>
</span><span id="line-795"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747146"><span class="annot"><span class="annottext">dirinfo :: [Char] -&gt; [Char] -&gt; Maybe a -&gt; IO ()
</span><a href="#local-6989586621679747146"><span class="hs-identifier hs-var hs-var">dirinfo</span></a></span></span><span> </span><span id="local-6989586621679747145"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747145"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679747144"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747144"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span id="local-6989586621679747143"><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621679747143"><span class="hs-identifier hs-var">isPrefixRelative</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-796"></span><span>          </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747145"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; installed in: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747144"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747142"><span class="hs-identifier hs-var">relNote</span></a></span><span>
</span><span id="line-797"></span><span>          </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679747142"><span class="annot"><span class="annottext">relNote :: [Char]
</span><a href="#local-6989586621679747142"><span class="hs-identifier hs-var hs-var">relNote</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#buildOS"><span class="hs-identifier hs-var">buildOS</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-798"></span><span>                  </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Windows"><span class="hs-identifier hs-var">Windows</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; Bool
</span><a href="Distribution.Types.PackageDescription.html#hasLibs"><span class="hs-identifier hs-var">hasLibs</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747366"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-799"></span><span>                         </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#isNothing"><span class="hs-identifier hs-var">isNothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621679747143"><span class="hs-identifier hs-var">isPrefixRelative</span></a></span><span>
</span><span id="line-800"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;  (fixed location)&quot;</span></span><span>
</span><span id="line-801"></span><span>                  </span><span class="annot"><span class="annottext">OS
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-802"></span><span>
</span><span id="line-803"></span><span>    </span><span class="annot"><span class="annottext">forall {a}. [Char] -&gt; [Char] -&gt; Maybe a -&gt; IO ()
</span><a href="#local-6989586621679747146"><span class="hs-identifier hs-var">dirinfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Executables&quot;</span></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#bindir"><span class="hs-identifier hs-var">bindir</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679747159"><span class="hs-identifier hs-var">dirs</span></a></span><span class="hs-special">)</span><span>     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#bindir"><span class="hs-identifier hs-var">bindir</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs (Maybe [Char])
</span><a href="#local-6989586621679747154"><span class="hs-identifier hs-var">relative</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-804"></span><span>    </span><span class="annot"><span class="annottext">forall {a}. [Char] -&gt; [Char] -&gt; Maybe a -&gt; IO ()
</span><a href="#local-6989586621679747146"><span class="hs-identifier hs-var">dirinfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Libraries&quot;</span></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#libdir"><span class="hs-identifier hs-var">libdir</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679747159"><span class="hs-identifier hs-var">dirs</span></a></span><span class="hs-special">)</span><span>     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#libdir"><span class="hs-identifier hs-var">libdir</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs (Maybe [Char])
</span><a href="#local-6989586621679747154"><span class="hs-identifier hs-var">relative</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-805"></span><span>    </span><span class="annot"><span class="annottext">forall {a}. [Char] -&gt; [Char] -&gt; Maybe a -&gt; IO ()
</span><a href="#local-6989586621679747146"><span class="hs-identifier hs-var">dirinfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Dynamic Libraries&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#dynlibdir"><span class="hs-identifier hs-var">dynlibdir</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679747159"><span class="hs-identifier hs-var">dirs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#dynlibdir"><span class="hs-identifier hs-var">dynlibdir</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs (Maybe [Char])
</span><a href="#local-6989586621679747154"><span class="hs-identifier hs-var">relative</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-806"></span><span>    </span><span class="annot"><span class="annottext">forall {a}. [Char] -&gt; [Char] -&gt; Maybe a -&gt; IO ()
</span><a href="#local-6989586621679747146"><span class="hs-identifier hs-var">dirinfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Private executables&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#libexecdir"><span class="hs-identifier hs-var">libexecdir</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679747159"><span class="hs-identifier hs-var">dirs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#libexecdir"><span class="hs-identifier hs-var">libexecdir</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs (Maybe [Char])
</span><a href="#local-6989586621679747154"><span class="hs-identifier hs-var">relative</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-807"></span><span>    </span><span class="annot"><span class="annottext">forall {a}. [Char] -&gt; [Char] -&gt; Maybe a -&gt; IO ()
</span><a href="#local-6989586621679747146"><span class="hs-identifier hs-var">dirinfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Data files&quot;</span></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#datadir"><span class="hs-identifier hs-var">datadir</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679747159"><span class="hs-identifier hs-var">dirs</span></a></span><span class="hs-special">)</span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#datadir"><span class="hs-identifier hs-var">datadir</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs (Maybe [Char])
</span><a href="#local-6989586621679747154"><span class="hs-identifier hs-var">relative</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-808"></span><span>    </span><span class="annot"><span class="annottext">forall {a}. [Char] -&gt; [Char] -&gt; Maybe a -&gt; IO ()
</span><a href="#local-6989586621679747146"><span class="hs-identifier hs-var">dirinfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Documentation&quot;</span></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#docdir"><span class="hs-identifier hs-var">docdir</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679747159"><span class="hs-identifier hs-var">dirs</span></a></span><span class="hs-special">)</span><span>     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#docdir"><span class="hs-identifier hs-var">docdir</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs (Maybe [Char])
</span><a href="#local-6989586621679747154"><span class="hs-identifier hs-var">relative</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-809"></span><span>    </span><span class="annot"><span class="annottext">forall {a}. [Char] -&gt; [Char] -&gt; Maybe a -&gt; IO ()
</span><a href="#local-6989586621679747146"><span class="hs-identifier hs-var">dirinfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Configuration files&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#sysconfdir"><span class="hs-identifier hs-var">sysconfdir</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679747159"><span class="hs-identifier hs-var">dirs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#sysconfdir"><span class="hs-identifier hs-var">sysconfdir</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs (Maybe [Char])
</span><a href="#local-6989586621679747154"><span class="hs-identifier hs-var">relative</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span>
</span><span id="line-811"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#sequence_"><span class="hs-identifier hs-var">sequence_</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; Program -&gt; Maybe ConfiguredProgram -&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#reportProgram"><span class="hs-identifier hs-var">reportProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679747128"><span class="hs-identifier hs-var">prog</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ConfiguredProgram
</span><a href="#local-6989586621679747127"><span class="hs-identifier hs-var">configuredProg</span></a></span><span>
</span><span id="line-812"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679747128"><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679747128"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679747127"><span class="annot"><span class="annottext">Maybe ConfiguredProgram
</span><a href="#local-6989586621679747127"><span class="hs-identifier hs-var">configuredProg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ProgramDb -&gt; [(Program, Maybe ConfiguredProgram)]
</span><a href="Distribution.Simple.Program.Db.html#knownPrograms"><span class="hs-identifier hs-var">knownPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679747291"><span class="hs-identifier hs-var">programDb''</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-813"></span><span>
</span><span id="line-814"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679747206"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-815"></span><span>
</span><span id="line-816"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-817"></span><span>      </span><span id="local-6989586621679747421"><span class="annot"><span class="annottext">verbosity :: Verbosity
</span><a href="#local-6989586621679747421"><span class="hs-identifier hs-var hs-var">verbosity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Verbosity
</span><a href="Distribution.Simple.Setup.html#configVerbosity"><span class="hs-identifier hs-var">configVerbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747427"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-818"></span><span>
</span><span id="line-819"></span><span class="annot"><a href="Distribution.Simple.Configure.html#mkProgramDb"><span class="hs-identifier hs-type">mkProgramDb</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Setup.html#ConfigFlags"><span class="hs-identifier hs-type">ConfigFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span>
</span><span id="line-820"></span><span id="mkProgramDb"><span class="annot"><span class="annottext">mkProgramDb :: ConfigFlags -&gt; ProgramDb -&gt; ProgramDb
</span><a href="Distribution.Simple.Configure.html#mkProgramDb"><span class="hs-identifier hs-var hs-var">mkProgramDb</span></a></span></span><span> </span><span id="local-6989586621679747122"><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747122"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span id="local-6989586621679747121"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679747121"><span class="hs-identifier hs-var">initialProgramDb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679747120"><span class="hs-identifier hs-var">programDb</span></a></span><span>
</span><span id="line-821"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-822"></span><span>    </span><span id="local-6989586621679747120"><span class="annot"><span class="annottext">programDb :: ProgramDb
</span><a href="#local-6989586621679747120"><span class="hs-identifier hs-var hs-var">programDb</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[([Char], [[Char]])] -&gt; ProgramDb -&gt; ProgramDb
</span><a href="Distribution.Simple.Program.Db.html#userSpecifyArgss"><span class="hs-identifier hs-var">userSpecifyArgss</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; [([Char], [[Char]])]
</span><a href="Distribution.Simple.Setup.html#configProgramArgs"><span class="hs-identifier hs-var">configProgramArgs</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747122"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-823"></span><span>                 </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[([Char], [Char])] -&gt; ProgramDb -&gt; ProgramDb
</span><a href="Distribution.Simple.Program.Db.html#userSpecifyPaths"><span class="hs-identifier hs-var">userSpecifyPaths</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; [([Char], [Char])]
</span><a href="Distribution.Simple.Setup.html#configProgramPaths"><span class="hs-identifier hs-var">configProgramPaths</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747122"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-824"></span><span>                 </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramSearchPath -&gt; ProgramDb -&gt; ProgramDb
</span><a href="Distribution.Simple.Program.Db.html#setProgramSearchPath"><span class="hs-identifier hs-var">setProgramSearchPath</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramSearchPath
</span><a href="#local-6989586621679747114"><span class="hs-identifier hs-var">searchpath</span></a></span><span>
</span><span id="line-825"></span><span>                 </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679747121"><span class="hs-identifier hs-var">initialProgramDb</span></a></span><span>
</span><span id="line-826"></span><span>    </span><span id="local-6989586621679747114"><span class="annot"><span class="annottext">searchpath :: ProgramSearchPath
</span><a href="#local-6989586621679747114"><span class="hs-identifier hs-var hs-var">searchpath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProgramDb -&gt; ProgramSearchPath
</span><a href="Distribution.Simple.Program.Db.html#getProgramSearchPath"><span class="hs-identifier hs-var">getProgramSearchPath</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679747121"><span class="hs-identifier hs-var">initialProgramDb</span></a></span><span>
</span><span id="line-827"></span><span>                 </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ProgramSearchPathEntry
</span><a href="Distribution.Simple.Program.Find.html#ProgramSearchPathDir"><span class="hs-identifier hs-var">ProgramSearchPathDir</span></a></span><span>
</span><span id="line-828"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NubList a -&gt; [a]
</span><a href="Distribution.Utils.NubList.html#fromNubList"><span class="hs-identifier hs-var">fromNubList</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; NubList [Char]
</span><a href="Distribution.Simple.Setup.html#configProgramPathExtra"><span class="hs-identifier hs-var">configProgramPathExtra</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747122"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-829"></span><span>
</span><span id="line-830"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-831"></span><span class="hs-comment">-- Helper functions for configure</span><span>
</span><span id="line-832"></span><span>
</span><span id="line-833"></span><span class="hs-comment">-- | Check if the user used any deprecated flags.</span><span>
</span><span id="line-834"></span><span class="annot"><a href="Distribution.Simple.Configure.html#checkDeprecatedFlags"><span class="hs-identifier hs-type">checkDeprecatedFlags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Setup.html#ConfigFlags"><span class="hs-identifier hs-type">ConfigFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-835"></span><span id="checkDeprecatedFlags"><span class="annot"><span class="annottext">checkDeprecatedFlags :: Verbosity -&gt; ConfigFlags -&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#checkDeprecatedFlags"><span class="hs-identifier hs-var hs-var">checkDeprecatedFlags</span></a></span></span><span> </span><span id="local-6989586621679747109"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747109"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679747108"><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747108"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-836"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configProfExe"><span class="hs-identifier hs-var">configProfExe</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747108"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">forall a. Flag a
</span><a href="Distribution.Simple.Flag.html#NoFlag"><span class="hs-identifier hs-var">NoFlag</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-837"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747102"><span class="annot"><span class="annottext">enable :: [Char]
</span><a href="#local-6989586621679747102"><span class="hs-identifier hs-var hs-var">enable</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configProfExe"><span class="hs-identifier hs-var">configProfExe</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747108"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;enable&quot;</span></span><span>
</span><span id="line-838"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;disable&quot;</span></span><span>
</span><span id="line-839"></span><span>      </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747109"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-840"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;The flag --&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747102"><span class="hs-identifier hs-var">enable</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-executable-profiling is deprecated. &quot;</span></span><span>
</span><span id="line-841"></span><span>         </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Please use --&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747102"><span class="hs-identifier hs-var">enable</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-profiling instead.&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-842"></span><span>
</span><span id="line-843"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configLibCoverage"><span class="hs-identifier hs-var">configLibCoverage</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747108"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">forall a. Flag a
</span><a href="Distribution.Simple.Flag.html#NoFlag"><span class="hs-identifier hs-var">NoFlag</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-844"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747096"><span class="annot"><span class="annottext">enable :: [Char]
</span><a href="#local-6989586621679747096"><span class="hs-identifier hs-var hs-var">enable</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configLibCoverage"><span class="hs-identifier hs-var">configLibCoverage</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747108"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;enable&quot;</span></span><span>
</span><span id="line-845"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;disable&quot;</span></span><span>
</span><span id="line-846"></span><span>      </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747109"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-847"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;The flag --&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747096"><span class="hs-identifier hs-var">enable</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-library-coverage is deprecated. &quot;</span></span><span>
</span><span id="line-848"></span><span>         </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Please use --&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679747096"><span class="hs-identifier hs-var">enable</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-coverage instead.&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-849"></span><span>
</span><span id="line-850"></span><span class="hs-comment">-- | Sanity check: if '--exact-configuration' was given, ensure that the</span><span>
</span><span id="line-851"></span><span class="hs-comment">-- complete flag assignment was specified on the command line.</span><span>
</span><span id="line-852"></span><span class="annot"><a href="Distribution.Simple.Configure.html#checkExactConfiguration"><span class="hs-identifier hs-type">checkExactConfiguration</span></a></span><span>
</span><span id="line-853"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.GenericPackageDescription.html#GenericPackageDescription"><span class="hs-identifier hs-type">GenericPackageDescription</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Setup.html#ConfigFlags"><span class="hs-identifier hs-type">ConfigFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-854"></span><span id="checkExactConfiguration"><span class="annot"><span class="annottext">checkExactConfiguration :: Verbosity -&gt; GenericPackageDescription -&gt; ConfigFlags -&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#checkExactConfiguration"><span class="hs-identifier hs-var hs-var">checkExactConfiguration</span></a></span></span><span> </span><span id="local-6989586621679747095"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747095"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679747094"><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747094"><span class="hs-identifier hs-var">pkg_descr0</span></a></span></span><span> </span><span id="local-6989586621679747093"><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747093"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-855"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configExactConfiguration"><span class="hs-identifier hs-var">configExactConfiguration</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747093"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-856"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747092"><span class="annot"><span class="annottext">cmdlineFlags :: [FlagName]
</span><a href="#local-6989586621679747092"><span class="hs-identifier hs-var hs-var">cmdlineFlags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FlagAssignment -&gt; [(FlagName, Bool)]
</span><a href="Distribution.Types.Flag.html#unFlagAssignment"><span class="hs-identifier hs-var">unFlagAssignment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; FlagAssignment
</span><a href="Distribution.Simple.Setup.html#configConfigurationsFlags"><span class="hs-identifier hs-var">configConfigurationsFlags</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747093"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-857"></span><span>          </span><span id="local-6989586621679747090"><span class="annot"><span class="annottext">allFlags :: [FlagName]
</span><a href="#local-6989586621679747090"><span class="hs-identifier hs-var hs-var">allFlags</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">PackageFlag -&gt; FlagName
</span><a href="Distribution.Types.Flag.html#flagName"><span class="hs-identifier hs-var">flagName</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription -&gt; [PackageFlag]
</span><a href="Distribution.Types.GenericPackageDescription.html#genPackageFlags"><span class="hs-identifier hs-var">genPackageFlags</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747094"><span class="hs-identifier hs-var">pkg_descr0</span></a></span><span>
</span><span id="line-858"></span><span>          </span><span id="local-6989586621679747085"><span class="annot"><span class="annottext">diffFlags :: [FlagName]
</span><a href="#local-6989586621679747085"><span class="hs-identifier hs-var hs-var">diffFlags</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FlagName]
</span><a href="#local-6989586621679747090"><span class="hs-identifier hs-var">allFlags</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#%5C%5C"><span class="hs-operator hs-var">\\</span></a></span><span> </span><span class="annot"><span class="annottext">[FlagName]
</span><a href="#local-6989586621679747092"><span class="hs-identifier hs-var">cmdlineFlags</span></a></span><span>
</span><span id="line-859"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[FlagName]
</span><a href="#local-6989586621679747085"><span class="hs-identifier hs-var">diffFlags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-860"></span><span>        </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747095"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;'--exact-configuration' was given, &quot;</span></span><span>
</span><span id="line-861"></span><span>        </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;but the following flags were not specified: &quot;</span></span><span>
</span><span id="line-862"></span><span>        </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#intercalate"><span class="hs-identifier hs-var">intercalate</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><a href="../../base-4.16.3.0/src/GHC-Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">[FlagName]
</span><a href="#local-6989586621679747085"><span class="hs-identifier hs-var">diffFlags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-863"></span><span>
</span><span id="line-864"></span><span class="hs-comment">-- | Create a PackageIndex that makes *any libraries that might be*</span><span>
</span><span id="line-865"></span><span class="hs-comment">-- defined internally to this package look like installed packages, in</span><span>
</span><span id="line-866"></span><span class="hs-comment">-- case an executable should refer to any of them as dependencies.</span><span>
</span><span id="line-867"></span><span class="hs-comment">--</span><span>
</span><span id="line-868"></span><span class="hs-comment">-- It must be *any libraries that might be* defined rather than the</span><span>
</span><span id="line-869"></span><span class="hs-comment">-- actual definitions, because these depend on conditionals in the .cabal</span><span>
</span><span id="line-870"></span><span class="hs-comment">-- file, and we haven't resolved them yet.  finalizePD</span><span>
</span><span id="line-871"></span><span class="hs-comment">-- does the resolution of conditionals, and it takes internalPackageSet</span><span>
</span><span id="line-872"></span><span class="hs-comment">-- as part of its input.</span><span>
</span><span id="line-873"></span><span class="annot"><a href="Distribution.Simple.Configure.html#getInternalLibraries"><span class="hs-identifier hs-type">getInternalLibraries</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.GenericPackageDescription.html#GenericPackageDescription"><span class="hs-identifier hs-type">GenericPackageDescription</span></a></span><span>
</span><span id="line-874"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Distribution.Types.LibraryName.html#LibraryName"><span class="hs-identifier hs-type">LibraryName</span></a></span><span>
</span><span id="line-875"></span><span id="getInternalLibraries"><span class="annot"><span class="annottext">getInternalLibraries :: GenericPackageDescription -&gt; Set LibraryName
</span><a href="Distribution.Simple.Configure.html#getInternalLibraries"><span class="hs-identifier hs-var hs-var">getInternalLibraries</span></a></span></span><span> </span><span id="local-6989586621679747084"><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747084"><span class="hs-identifier hs-var">pkg_descr0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-876"></span><span>    </span><span class="hs-comment">-- TODO: some day, executables will be fair game here too!</span><span>
</span><span id="line-877"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747083"><span class="annot"><span class="annottext">pkg_descr :: PackageDescription
</span><a href="#local-6989586621679747083"><span class="hs-identifier hs-var hs-var">pkg_descr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription -&gt; PackageDescription
</span><a href="Distribution.PackageDescription.Configuration.html#flattenPackageDescription"><span class="hs-identifier hs-var">flattenPackageDescription</span></a></span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747084"><span class="hs-identifier hs-var">pkg_descr0</span></a></span><span>
</span><span id="line-878"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#fromList"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Library -&gt; LibraryName
</span><a href="Distribution.Types.Library.html#libName"><span class="hs-identifier hs-var">libName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; [Library]
</span><a href="Distribution.Types.PackageDescription.html#allLibraries"><span class="hs-identifier hs-var">allLibraries</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747083"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-879"></span><span>
</span><span id="line-880"></span><span class="hs-comment">-- | Returns true if a dependency is satisfiable.  This function may</span><span>
</span><span id="line-881"></span><span class="hs-comment">-- report a dependency satisfiable even when it is not, but not vice</span><span>
</span><span id="line-882"></span><span class="hs-comment">-- versa. This is to be passed to finalize</span><span>
</span><span id="line-883"></span><span class="annot"><a href="Distribution.Simple.Configure.html#dependencySatisfiable"><span class="hs-identifier hs-type">dependencySatisfiable</span></a></span><span>
</span><span id="line-884"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- ^ use external internal deps?</span><span>
</span><span id="line-885"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- ^ exact configuration?</span><span>
</span><span id="line-886"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- ^ allow depending on private libs?</span><span>
</span><span id="line-887"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageName.html#PackageName"><span class="hs-identifier hs-type">PackageName</span></a></span><span>
</span><span id="line-888"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.PackageIndex.html#InstalledPackageIndex"><span class="hs-identifier hs-type">InstalledPackageIndex</span></a></span><span> </span><span class="hs-comment">-- ^ installed set</span><span>
</span><span id="line-889"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Distribution.Types.LibraryName.html#LibraryName"><span class="hs-identifier hs-type">LibraryName</span></a></span><span> </span><span class="hs-comment">-- ^ library components</span><span>
</span><span id="line-890"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.PackageName.html#PackageName"><span class="hs-identifier hs-type">PackageName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentName.html#ComponentName"><span class="hs-identifier hs-type">ComponentName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier hs-type">InstalledPackageInfo</span></a></span><span>
</span><span id="line-891"></span><span>       </span><span class="hs-comment">-- ^ required dependencies</span><span>
</span><span id="line-892"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.Dependency.html#Dependency"><span class="hs-identifier hs-type">Dependency</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span>
</span><span id="line-893"></span><span id="dependencySatisfiable"><span class="annot"><span class="annottext">dependencySatisfiable :: Bool
-&gt; Bool
-&gt; Bool
-&gt; PackageName
-&gt; InstalledPackageIndex
-&gt; Set LibraryName
-&gt; Map (PackageName, ComponentName) InstalledPackageInfo
-&gt; Dependency
-&gt; Bool
</span><a href="Distribution.Simple.Configure.html#dependencySatisfiable"><span class="hs-identifier hs-var hs-var">dependencySatisfiable</span></a></span></span><span>
</span><span id="line-894"></span><span>  </span><span id="local-6989586621679747079"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747079"><span class="hs-identifier hs-var">use_external_internal_deps</span></a></span></span><span>
</span><span id="line-895"></span><span>  </span><span id="local-6989586621679747078"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747078"><span class="hs-identifier hs-var">exact_config</span></a></span></span><span>
</span><span id="line-896"></span><span>  </span><span id="local-6989586621679747077"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747077"><span class="hs-identifier hs-var">allow_private_deps</span></a></span></span><span>
</span><span id="line-897"></span><span>  </span><span id="local-6989586621679747076"><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679747076"><span class="hs-identifier hs-var">pn</span></a></span></span><span> </span><span id="local-6989586621679747075"><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679747075"><span class="hs-identifier hs-var">installedPackageSet</span></a></span></span><span> </span><span id="local-6989586621679747074"><span class="annot"><span class="annottext">Set LibraryName
</span><a href="#local-6989586621679747074"><span class="hs-identifier hs-var">packageLibraries</span></a></span></span><span> </span><span id="local-6989586621679747073"><span class="annot"><span class="annottext">Map (PackageName, ComponentName) InstalledPackageInfo
</span><a href="#local-6989586621679747073"><span class="hs-identifier hs-var">requiredDepsMap</span></a></span></span><span>
</span><span id="line-898"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.Dependency.html#Dependency"><span class="hs-identifier hs-type">Dependency</span></a></span><span> </span><span id="local-6989586621679747071"><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679747071"><span class="hs-identifier hs-var">depName</span></a></span></span><span> </span><span id="local-6989586621679747070"><span class="annot"><span class="annottext">VersionRange
</span><a href="#local-6989586621679747070"><span class="hs-identifier hs-var">vr</span></a></span></span><span> </span><span id="local-6989586621679747069"><span class="annot"><span class="annottext">NonEmptySet LibraryName
</span><a href="#local-6989586621679747069"><span class="hs-identifier hs-var">sublibs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-899"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747078"><span class="hs-identifier hs-var">exact_config</span></a></span><span>
</span><span id="line-900"></span><span>    </span><span class="hs-comment">-- When we're given '--exact-configuration', we assume that all</span><span>
</span><span id="line-901"></span><span>    </span><span class="hs-comment">-- dependencies and flags are exactly specified on the command</span><span>
</span><span id="line-902"></span><span>    </span><span class="hs-comment">-- line. Thus we only consult the 'requiredDepsMap'. Note that</span><span>
</span><span id="line-903"></span><span>    </span><span class="hs-comment">-- we're not doing the version range check, so if there's some</span><span>
</span><span id="line-904"></span><span>    </span><span class="hs-comment">-- dependency that wasn't specified on the command line,</span><span>
</span><span id="line-905"></span><span>    </span><span class="hs-comment">-- 'finalizePD' will fail.</span><span>
</span><span id="line-906"></span><span>    </span><span class="hs-comment">-- TODO: mention '--exact-configuration' in the error message</span><span>
</span><span id="line-907"></span><span>    </span><span class="hs-comment">-- when this fails?</span><span>
</span><span id="line-908"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747068"><span class="hs-identifier hs-var">isInternalDep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747079"><span class="hs-identifier hs-var">use_external_internal_deps</span></a></span><span>
</span><span id="line-909"></span><span>        </span><span class="hs-comment">-- Except for internal deps, when we're NOT per-component mode;</span><span>
</span><span id="line-910"></span><span>        </span><span class="hs-comment">-- those are just True.</span><span>
</span><span id="line-911"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747067"><span class="hs-identifier hs-var">internalDepSatisfiable</span></a></span><span>
</span><span id="line-912"></span><span>        </span><span class="hs-keyword">else</span><span>
</span><span id="line-913"></span><span>          </span><span class="hs-comment">-- Backward compatibility for the old sublibrary syntax</span><span>
</span><span id="line-914"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmptySet LibraryName
</span><a href="#local-6989586621679747069"><span class="hs-identifier hs-var">sublibs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NonEmptySet LibraryName
</span><a href="Distribution.Types.Dependency.html#mainLibSet"><span class="hs-identifier hs-var">mainLibSet</span></a></span><span>
</span><span id="line-915"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#member"><span class="hs-identifier hs-var">Map.member</span></a></span><span>
</span><span id="line-916"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679747076"><span class="hs-identifier hs-var">pn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LibraryName -&gt; ComponentName
</span><a href="Distribution.Types.ComponentName.html#CLibName"><span class="hs-identifier hs-var">CLibName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UnqualComponentName -&gt; LibraryName
</span><a href="Distribution.Types.LibraryName.html#LSubLibName"><span class="hs-identifier hs-var">LSubLibName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-917"></span><span>                      </span><span class="annot"><span class="annottext">PackageName -&gt; UnqualComponentName
</span><a href="Distribution.Types.UnqualComponentName.html#packageNameToUnqualComponentName"><span class="hs-identifier hs-var">packageNameToUnqualComponentName</span></a></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679747071"><span class="hs-identifier hs-var">depName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-918"></span><span>                 </span><span class="annot"><span class="annottext">Map (PackageName, ComponentName) InstalledPackageInfo
</span><a href="#local-6989586621679747073"><span class="hs-identifier hs-var">requiredDepsMap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-919"></span><span>
</span><span id="line-920"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="annot"><span class="annottext">LibraryName -&gt; Bool
</span><a href="#local-6989586621679747060"><span class="hs-identifier hs-var">visible</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptySet LibraryName
</span><a href="#local-6989586621679747069"><span class="hs-identifier hs-var">sublibs</span></a></span><span>
</span><span id="line-921"></span><span>
</span><span id="line-922"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747068"><span class="hs-identifier hs-var">isInternalDep</span></a></span><span>
</span><span id="line-923"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747079"><span class="hs-identifier hs-var">use_external_internal_deps</span></a></span><span>
</span><span id="line-924"></span><span>        </span><span class="hs-comment">-- When we are doing per-component configure, we now need to</span><span>
</span><span id="line-925"></span><span>        </span><span class="hs-comment">-- test if the internal dependency is in the index.  This has</span><span>
</span><span id="line-926"></span><span>        </span><span class="hs-comment">-- DIFFERENT semantics from normal dependency satisfiability.</span><span>
</span><span id="line-927"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747059"><span class="hs-identifier hs-var">internalDepSatisfiableExternally</span></a></span><span>
</span><span id="line-928"></span><span>        </span><span class="hs-comment">-- If a 'PackageName' is defined by an internal component, the dep is</span><span>
</span><span id="line-929"></span><span>        </span><span class="hs-comment">-- satisfiable (we're going to build it ourselves)</span><span>
</span><span id="line-930"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747067"><span class="hs-identifier hs-var">internalDepSatisfiable</span></a></span><span>
</span><span id="line-931"></span><span>
</span><span id="line-932"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-933"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747058"><span class="hs-identifier hs-var">depSatisfiable</span></a></span><span>
</span><span id="line-934"></span><span>
</span><span id="line-935"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-936"></span><span>    </span><span class="hs-comment">-- Internal dependency is when dependency is the same as package.</span><span>
</span><span id="line-937"></span><span>    </span><span id="local-6989586621679747068"><span class="annot"><span class="annottext">isInternalDep :: Bool
</span><a href="#local-6989586621679747068"><span class="hs-identifier hs-var hs-var">isInternalDep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679747076"><span class="hs-identifier hs-var">pn</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679747071"><span class="hs-identifier hs-var">depName</span></a></span><span>
</span><span id="line-938"></span><span>
</span><span id="line-939"></span><span>    </span><span id="local-6989586621679747058"><span class="annot"><span class="annottext">depSatisfiable :: Bool
</span><a href="#local-6989586621679747058"><span class="hs-identifier hs-var hs-var">depSatisfiable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-940"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageIndex
-&gt; PackageName
-&gt; VersionRange
-&gt; [(Version, [InstalledPackageInfo])]
</span><a href="Distribution.Simple.PackageIndex.html#lookupDependency"><span class="hs-identifier hs-var">PackageIndex.lookupDependency</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679747075"><span class="hs-identifier hs-var">installedPackageSet</span></a></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679747071"><span class="hs-identifier hs-var">depName</span></a></span><span> </span><span class="annot"><span class="annottext">VersionRange
</span><a href="#local-6989586621679747070"><span class="hs-identifier hs-var">vr</span></a></span><span>
</span><span id="line-941"></span><span>
</span><span id="line-942"></span><span>    </span><span id="local-6989586621679747067"><span class="annot"><span class="annottext">internalDepSatisfiable :: Bool
</span><a href="#local-6989586621679747067"><span class="hs-identifier hs-var hs-var">internalDepSatisfiable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-943"></span><span>        </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Bool
</span><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#isSubsetOf"><span class="hs-identifier hs-var">Set.isSubsetOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NonEmptySet a -&gt; Set a
</span><a href="Distribution.Compat.NonEmptySet.html#toSet"><span class="hs-identifier hs-var">NES.toSet</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptySet LibraryName
</span><a href="#local-6989586621679747069"><span class="hs-identifier hs-var">sublibs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set LibraryName
</span><a href="#local-6989586621679747074"><span class="hs-identifier hs-var">packageLibraries</span></a></span><span>
</span><span id="line-944"></span><span>    </span><span id="local-6989586621679747059"><span class="annot"><span class="annottext">internalDepSatisfiableExternally :: Bool
</span><a href="#local-6989586621679747059"><span class="hs-identifier hs-var hs-var">internalDepSatisfiableExternally</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-945"></span><span>        </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679747049"><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679747049"><span class="hs-identifier hs-var">ln</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageIndex
-&gt; PackageName
-&gt; VersionRange
-&gt; LibraryName
-&gt; [(Version, [InstalledPackageInfo])]
</span><a href="Distribution.Simple.PackageIndex.html#lookupInternalDependency"><span class="hs-identifier hs-var">PackageIndex.lookupInternalDependency</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679747075"><span class="hs-identifier hs-var">installedPackageSet</span></a></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679747076"><span class="hs-identifier hs-var">pn</span></a></span><span> </span><span class="annot"><span class="annottext">VersionRange
</span><a href="#local-6989586621679747070"><span class="hs-identifier hs-var">vr</span></a></span><span> </span><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679747049"><span class="hs-identifier hs-var">ln</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmptySet LibraryName
</span><a href="#local-6989586621679747069"><span class="hs-identifier hs-var">sublibs</span></a></span><span>
</span><span id="line-946"></span><span>
</span><span id="line-947"></span><span>    </span><span class="hs-comment">-- Check whether a library exists and is visible.</span><span>
</span><span id="line-948"></span><span>    </span><span class="hs-comment">-- We don't disambiguate between dependency on non-existent or private</span><span>
</span><span id="line-949"></span><span>    </span><span class="hs-comment">-- library yet, so we just return a bool and later report a generic error.</span><span>
</span><span id="line-950"></span><span>    </span><span id="local-6989586621679747060"><span class="annot"><span class="annottext">visible :: LibraryName -&gt; Bool
</span><a href="#local-6989586621679747060"><span class="hs-identifier hs-var hs-var">visible</span></a></span></span><span> </span><span id="local-6989586621679747044"><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679747044"><span class="hs-identifier hs-var">lib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span>
</span><span id="line-951"></span><span>                    </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-comment">-- Does not even exist (wasn't in the depsMap)</span><span>
</span><span id="line-952"></span><span>                    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679747043"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679747043"><span class="hs-identifier hs-var">ipi</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo -&gt; LibraryVisibility
</span><a href="Distribution.Types.InstalledPackageInfo.html#libVisibility"><span class="hs-identifier hs-var">IPI.libVisibility</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679747043"><span class="hs-identifier hs-var">ipi</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">LibraryVisibility
</span><a href="Distribution.Types.LibraryVisibility.html#LibraryVisibilityPublic"><span class="hs-identifier hs-var">LibraryVisibilityPublic</span></a></span><span>
</span><span id="line-953"></span><span>                          </span><span class="hs-comment">-- If the override is enabled, the visibility does</span><span>
</span><span id="line-954"></span><span>                          </span><span class="hs-comment">-- not matter (it's handled externally)</span><span>
</span><span id="line-955"></span><span>                          </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747077"><span class="hs-identifier hs-var">allow_private_deps</span></a></span><span>
</span><span id="line-956"></span><span>                          </span><span class="hs-comment">-- If it's a library of the same package then it's</span><span>
</span><span id="line-957"></span><span>                          </span><span class="hs-comment">-- always visible.</span><span>
</span><span id="line-958"></span><span>                          </span><span class="hs-comment">-- This is only triggered when passing a component</span><span>
</span><span id="line-959"></span><span>                          </span><span class="hs-comment">-- of the same package as --dependency, such as in:</span><span>
</span><span id="line-960"></span><span>                          </span><span class="hs-comment">-- cabal-testsuite/PackageTests/ConfigureComponent/SubLib/setup-explicit.test.hs</span><span>
</span><span id="line-961"></span><span>                          </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier -&gt; PackageName
</span><a href="Distribution.Types.PackageId.html#pkgName"><span class="hs-identifier hs-var">pkgName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstalledPackageInfo -&gt; PackageIdentifier
</span><a href="Distribution.Types.InstalledPackageInfo.html#sourcePackageId"><span class="hs-identifier hs-var">IPI.sourcePackageId</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679747043"><span class="hs-identifier hs-var">ipi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679747076"><span class="hs-identifier hs-var">pn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-962"></span><span>                    </span><span class="annot"><span class="annottext">Maybe InstalledPackageInfo
</span><a href="#local-6989586621679747038"><span class="hs-identifier hs-var">maybeIPI</span></a></span><span>
</span><span id="line-963"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679747038"><span class="annot"><span class="annottext">maybeIPI :: Maybe InstalledPackageInfo
</span><a href="#local-6989586621679747038"><span class="hs-identifier hs-var hs-var">maybeIPI</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679747071"><span class="hs-identifier hs-var">depName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LibraryName -&gt; ComponentName
</span><a href="Distribution.Types.ComponentName.html#CLibName"><span class="hs-identifier hs-var">CLibName</span></a></span><span> </span><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679747044"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (PackageName, ComponentName) InstalledPackageInfo
</span><a href="#local-6989586621679747073"><span class="hs-identifier hs-var">requiredDepsMap</span></a></span><span>
</span><span id="line-964"></span><span>
</span><span id="line-965"></span><span class="hs-comment">-- | Finalize a generic package description.  The workhorse is</span><span>
</span><span id="line-966"></span><span class="hs-comment">-- 'finalizePD' but there's a bit of other nattering</span><span>
</span><span id="line-967"></span><span class="hs-comment">-- about necessary.</span><span>
</span><span id="line-968"></span><span class="hs-comment">--</span><span>
</span><span id="line-969"></span><span class="hs-comment">-- TODO: what exactly is the business with @flaggedTests@ and</span><span>
</span><span id="line-970"></span><span class="hs-comment">-- @flaggedBenchmarks@?</span><span>
</span><span id="line-971"></span><span class="annot"><a href="Distribution.Simple.Configure.html#configureFinalizedPackage"><span class="hs-identifier hs-type">configureFinalizedPackage</span></a></span><span>
</span><span id="line-972"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-973"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Setup.html#ConfigFlags"><span class="hs-identifier hs-type">ConfigFlags</span></a></span><span>
</span><span id="line-974"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentRequestedSpec.html#ComponentRequestedSpec"><span class="hs-identifier hs-type">ComponentRequestedSpec</span></a></span><span>
</span><span id="line-975"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Types.PackageVersionConstraint.html#PackageVersionConstraint"><span class="hs-identifier hs-type">PackageVersionConstraint</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-976"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.Dependency.html#Dependency"><span class="hs-identifier hs-type">Dependency</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ tests if a dependency is satisfiable.</span><span>
</span><span id="line-977"></span><span>                            </span><span class="hs-comment">-- Might say it's satisfiable even when not.</span><span>
</span><span id="line-978"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span>
</span><span id="line-979"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span>
</span><span id="line-980"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.GenericPackageDescription.html#GenericPackageDescription"><span class="hs-identifier hs-type">GenericPackageDescription</span></a></span><span>
</span><span id="line-981"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Types.Flag.html#FlagAssignment"><span class="hs-identifier hs-type">FlagAssignment</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-982"></span><span id="configureFinalizedPackage"><span class="annot"><span class="annottext">configureFinalizedPackage :: Verbosity
-&gt; ConfigFlags
-&gt; ComponentRequestedSpec
-&gt; [PackageVersionConstraint]
-&gt; (Dependency -&gt; Bool)
-&gt; Compiler
-&gt; Platform
-&gt; GenericPackageDescription
-&gt; IO (PackageDescription, FlagAssignment)
</span><a href="Distribution.Simple.Configure.html#configureFinalizedPackage"><span class="hs-identifier hs-var hs-var">configureFinalizedPackage</span></a></span></span><span> </span><span id="local-6989586621679747033"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747033"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679747032"><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747032"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span id="local-6989586621679747031"><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679747031"><span class="hs-identifier hs-var">enabled</span></a></span></span><span>
</span><span id="line-983"></span><span>  </span><span id="local-6989586621679747030"><span class="annot"><span class="annottext">[PackageVersionConstraint]
</span><a href="#local-6989586621679747030"><span class="hs-identifier hs-var">allConstraints</span></a></span></span><span> </span><span id="local-6989586621679747029"><span class="annot"><span class="annottext">Dependency -&gt; Bool
</span><a href="#local-6989586621679747029"><span class="hs-identifier hs-var">satisfies</span></a></span></span><span> </span><span id="local-6989586621679747028"><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747028"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span id="local-6989586621679747027"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679747027"><span class="hs-identifier hs-var">compPlatform</span></a></span></span><span> </span><span id="local-6989586621679747026"><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747026"><span class="hs-identifier hs-var">pkg_descr0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-984"></span><span>
</span><span id="line-985"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679747025"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747025"><span class="hs-identifier hs-var">pkg_descr0'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679747024"><span class="annot"><span class="annottext">FlagAssignment
</span><a href="#local-6989586621679747024"><span class="hs-identifier hs-var">flags</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-986"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FlagAssignment
-&gt; ComponentRequestedSpec
-&gt; (Dependency -&gt; Bool)
-&gt; Platform
-&gt; CompilerInfo
-&gt; [PackageVersionConstraint]
-&gt; GenericPackageDescription
-&gt; Either [Dependency] (PackageDescription, FlagAssignment)
</span><a href="Distribution.PackageDescription.Configuration.html#finalizePD"><span class="hs-identifier hs-var">finalizePD</span></a></span><span>
</span><span id="line-987"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; FlagAssignment
</span><a href="Distribution.Simple.Setup.html#configConfigurationsFlags"><span class="hs-identifier hs-var">configConfigurationsFlags</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747032"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-988"></span><span>                   </span><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679747031"><span class="hs-identifier hs-var">enabled</span></a></span><span>
</span><span id="line-989"></span><span>                   </span><span class="annot"><span class="annottext">Dependency -&gt; Bool
</span><a href="#local-6989586621679747029"><span class="hs-identifier hs-var">satisfies</span></a></span><span>
</span><span id="line-990"></span><span>                   </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679747027"><span class="hs-identifier hs-var">compPlatform</span></a></span><span>
</span><span id="line-991"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; CompilerInfo
</span><a href="Distribution.Simple.Compiler.html#compilerInfo"><span class="hs-identifier hs-var">compilerInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679747028"><span class="hs-identifier hs-var">comp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-992"></span><span>                   </span><span class="annot"><span class="annottext">[PackageVersionConstraint]
</span><a href="#local-6989586621679747030"><span class="hs-identifier hs-var">allConstraints</span></a></span><span>
</span><span id="line-993"></span><span>                   </span><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679747026"><span class="hs-identifier hs-var">pkg_descr0</span></a></span><span>
</span><span id="line-994"></span><span>            </span><span class="hs-keyword">of</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679747021"><span class="annot"><span class="annottext">(PackageDescription, FlagAssignment)
</span><a href="#local-6989586621679747021"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(PackageDescription, FlagAssignment)
</span><a href="#local-6989586621679747021"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-995"></span><span>               </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679747020"><span class="annot"><span class="annottext">[Dependency]
</span><a href="#local-6989586621679747020"><span class="hs-identifier hs-var">missing</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-996"></span><span>                   </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747033"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Encountered missing or private dependencies:\n&quot;</span></span><span>
</span><span id="line-997"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; [Char]
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#render"><span class="hs-identifier hs-var">render</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; [Doc] -&gt; [Doc]
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#punctuate"><span class="hs-identifier hs-var">punctuate</span></a></span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span>
</span><span id="line-998"></span><span>                                </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; Doc
</span><a href="Distribution.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Dependency -&gt; Dependency
</span><a href="Distribution.Types.Dependency.html#simplifyDependency"><span class="hs-identifier hs-var">simplifyDependency</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-999"></span><span>                                </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Dependency]
</span><a href="#local-6989586621679747020"><span class="hs-identifier hs-var">missing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1000"></span><span>
</span><span id="line-1001"></span><span>    </span><span class="hs-comment">-- add extra include/lib dirs as specified in cfg</span><span>
</span><span id="line-1002"></span><span>    </span><span class="hs-comment">-- we do it here so that those get checked too</span><span>
</span><span id="line-1003"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747018"><span class="annot"><span class="annottext">pkg_descr :: PackageDescription
</span><a href="#local-6989586621679747018"><span class="hs-identifier hs-var hs-var">pkg_descr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageDescription -&gt; PackageDescription
</span><a href="#local-6989586621679747017"><span class="hs-identifier hs-var">addExtraIncludeLibDirs</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747025"><span class="hs-identifier hs-var">pkg_descr0'</span></a></span><span>
</span><span id="line-1004"></span><span>
</span><span id="line-1005"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FlagAssignment -&gt; Bool
</span><a href="Distribution.Types.Flag.html#nullFlagAssignment"><span class="hs-identifier hs-var">nullFlagAssignment</span></a></span><span> </span><span class="annot"><span class="annottext">FlagAssignment
</span><a href="#local-6989586621679747024"><span class="hs-identifier hs-var">flags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1006"></span><span>      </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679747033"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Flags chosen: &quot;</span></span><span>
</span><span id="line-1007"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#intercalate"><span class="hs-identifier hs-var">intercalate</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FlagName -&gt; [Char]
</span><a href="Distribution.Types.Flag.html#unFlagName"><span class="hs-identifier hs-var">unFlagName</span></a></span><span> </span><span class="annot"><span class="annottext">FlagName
</span><a href="#local-6989586621679747014"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;=&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747013"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-1008"></span><span>                                        </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679747014"><span class="annot"><span class="annottext">FlagName
</span><a href="#local-6989586621679747014"><span class="hs-identifier hs-var">fn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679747013"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679747013"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FlagAssignment -&gt; [(FlagName, Bool)]
</span><a href="Distribution.Types.Flag.html#unFlagAssignment"><span class="hs-identifier hs-var">unFlagAssignment</span></a></span><span> </span><span class="annot"><span class="annottext">FlagAssignment
</span><a href="#local-6989586621679747024"><span class="hs-identifier hs-var">flags</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1009"></span><span>
</span><span id="line-1010"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747018"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FlagAssignment
</span><a href="#local-6989586621679747024"><span class="hs-identifier hs-var">flags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1011"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1012"></span><span>    </span><span id="local-6989586621679747017"><span class="annot"><span class="annottext">addExtraIncludeLibDirs :: PackageDescription -&gt; PackageDescription
</span><a href="#local-6989586621679747017"><span class="hs-identifier hs-var hs-var">addExtraIncludeLibDirs</span></a></span></span><span> </span><span id="local-6989586621679747010"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747010"><span class="hs-identifier hs-var">pkg_descr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1013"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679747008"><span class="annot"><span class="annottext">extraBi :: BuildInfo
</span><a href="#local-6989586621679747008"><span class="hs-identifier hs-var hs-var">extraBi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">extraLibDirs :: [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#extraLibDirs"><span class="hs-identifier hs-var">extraLibDirs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; [[Char]]
</span><a href="Distribution.Simple.Setup.html#configExtraLibDirs"><span class="hs-identifier hs-var">configExtraLibDirs</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747032"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-1014"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">extraFrameworkDirs :: [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#extraFrameworkDirs"><span class="hs-identifier hs-var">extraFrameworkDirs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; [[Char]]
</span><a href="Distribution.Simple.Setup.html#configExtraFrameworkDirs"><span class="hs-identifier hs-var">configExtraFrameworkDirs</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747032"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-1015"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">includeDirs :: [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#includeDirs"><span class="hs-identifier hs-var">includeDirs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; [[Char]]
</span><a href="Distribution.Simple.Setup.html#configExtraIncludeDirs"><span class="hs-identifier hs-var">configExtraIncludeDirs</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679747032"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-1016"></span><span>            </span><span id="local-6989586621679747000"><span class="annot"><span class="annottext">modifyLib :: Library -&gt; Library
</span><a href="#local-6989586621679747000"><span class="hs-identifier hs-var hs-var">modifyLib</span></a></span></span><span> </span><span id="local-6989586621679746999"><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679746999"><span class="hs-identifier hs-var">l</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679746999"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">libBuildInfo :: BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Library -&gt; BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679746999"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1017"></span><span>                                                          </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679747008"><span class="hs-identifier hs-var">extraBi</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1018"></span><span>            </span><span id="local-6989586621679746996"><span class="annot"><span class="annottext">modifyExecutable :: Executable -&gt; Executable
</span><a href="#local-6989586621679746996"><span class="hs-identifier hs-var hs-var">modifyExecutable</span></a></span></span><span> </span><span id="local-6989586621679746995"><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679746995"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679746995"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">buildInfo :: BuildInfo
</span><a href="Distribution.Types.Executable.html#buildInfo"><span class="hs-identifier hs-var">buildInfo</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Executable -&gt; BuildInfo
</span><a href="Distribution.Types.Executable.html#buildInfo"><span class="hs-identifier hs-var">buildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679746995"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1019"></span><span>                                                          </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679747008"><span class="hs-identifier hs-var">extraBi</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-1020"></span><span>            </span><span id="local-6989586621679746992"><span class="annot"><span class="annottext">modifyForeignLib :: ForeignLib -&gt; ForeignLib
</span><a href="#local-6989586621679746992"><span class="hs-identifier hs-var hs-var">modifyForeignLib</span></a></span></span><span> </span><span id="local-6989586621679746991"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679746991"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679746991"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">foreignLibBuildInfo :: BuildInfo
</span><a href="Distribution.Types.ForeignLib.html#foreignLibBuildInfo"><span class="hs-identifier hs-var">foreignLibBuildInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; BuildInfo
</span><a href="Distribution.Types.ForeignLib.html#foreignLibBuildInfo"><span class="hs-identifier hs-var">foreignLibBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679746991"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1021"></span><span>                                                          </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679747008"><span class="hs-identifier hs-var">extraBi</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-1022"></span><span>            </span><span id="local-6989586621679746988"><span class="annot"><span class="annottext">modifyTestsuite :: TestSuite -&gt; TestSuite
</span><a href="#local-6989586621679746988"><span class="hs-identifier hs-var hs-var">modifyTestsuite</span></a></span></span><span>  </span><span id="local-6989586621679746987"><span class="annot"><span class="annottext">TestSuite
</span><a href="#local-6989586621679746987"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TestSuite
</span><a href="#local-6989586621679746987"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">testBuildInfo :: BuildInfo
</span><a href="Distribution.Types.TestSuite.html#testBuildInfo"><span class="hs-identifier hs-var">testBuildInfo</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TestSuite -&gt; BuildInfo
</span><a href="Distribution.Types.TestSuite.html#testBuildInfo"><span class="hs-identifier hs-var">testBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TestSuite
</span><a href="#local-6989586621679746987"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1023"></span><span>                                                          </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679747008"><span class="hs-identifier hs-var">extraBi</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-1024"></span><span>            </span><span id="local-6989586621679746984"><span class="annot"><span class="annottext">modifyBenchmark :: Benchmark -&gt; Benchmark
</span><a href="#local-6989586621679746984"><span class="hs-identifier hs-var hs-var">modifyBenchmark</span></a></span></span><span>  </span><span id="local-6989586621679746983"><span class="annot"><span class="annottext">Benchmark
</span><a href="#local-6989586621679746983"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Benchmark
</span><a href="#local-6989586621679746983"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">benchmarkBuildInfo :: BuildInfo
</span><a href="Distribution.Types.Benchmark.html#benchmarkBuildInfo"><span class="hs-identifier hs-var">benchmarkBuildInfo</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Benchmark -&gt; BuildInfo
</span><a href="Distribution.Types.Benchmark.html#benchmarkBuildInfo"><span class="hs-identifier hs-var">benchmarkBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Benchmark
</span><a href="#local-6989586621679746983"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-1025"></span><span>                                                          </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679747008"><span class="hs-identifier hs-var">extraBi</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-1026"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747010"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span>
</span><span id="line-1027"></span><span>             </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">library :: Maybe Library
</span><a href="Distribution.Types.PackageDescription.html#library"><span class="hs-identifier hs-var">library</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Library -&gt; Library
</span><a href="#local-6989586621679747000"><span class="hs-identifier hs-var">modifyLib</span></a></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-operator hs-var">`fmap`</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription -&gt; Maybe Library
</span><a href="Distribution.Types.PackageDescription.html#library"><span class="hs-identifier hs-var">library</span></a></span><span>      </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747010"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span>
</span><span id="line-1028"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">subLibraries :: [Library]
</span><a href="Distribution.Types.PackageDescription.html#subLibraries"><span class="hs-identifier hs-var">subLibraries</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Library -&gt; Library
</span><a href="#local-6989586621679747000"><span class="hs-identifier hs-var">modifyLib</span></a></span><span>        </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-operator hs-var">`map`</span></a></span><span>  </span><span class="annot"><span class="annottext">PackageDescription -&gt; [Library]
</span><a href="Distribution.Types.PackageDescription.html#subLibraries"><span class="hs-identifier hs-var">subLibraries</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747010"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span>
</span><span id="line-1029"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">executables :: [Executable]
</span><a href="Distribution.Types.PackageDescription.html#executables"><span class="hs-identifier hs-var">executables</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Executable -&gt; Executable
</span><a href="#local-6989586621679746996"><span class="hs-identifier hs-var">modifyExecutable</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-operator hs-var">`map`</span></a></span><span>  </span><span class="annot"><span class="annottext">PackageDescription -&gt; [Executable]
</span><a href="Distribution.Types.PackageDescription.html#executables"><span class="hs-identifier hs-var">executables</span></a></span><span>  </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747010"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span>
</span><span id="line-1030"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">foreignLibs :: [ForeignLib]
</span><a href="Distribution.Types.PackageDescription.html#foreignLibs"><span class="hs-identifier hs-var">foreignLibs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; ForeignLib
</span><a href="#local-6989586621679746992"><span class="hs-identifier hs-var">modifyForeignLib</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-operator hs-var">`map`</span></a></span><span>  </span><span class="annot"><span class="annottext">PackageDescription -&gt; [ForeignLib]
</span><a href="Distribution.Types.PackageDescription.html#foreignLibs"><span class="hs-identifier hs-var">foreignLibs</span></a></span><span>  </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747010"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span>
</span><span id="line-1031"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">testSuites :: [TestSuite]
</span><a href="Distribution.Types.PackageDescription.html#testSuites"><span class="hs-identifier hs-var">testSuites</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TestSuite -&gt; TestSuite
</span><a href="#local-6989586621679746988"><span class="hs-identifier hs-var">modifyTestsuite</span></a></span><span>  </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-operator hs-var">`map`</span></a></span><span>  </span><span class="annot"><span class="annottext">PackageDescription -&gt; [TestSuite]
</span><a href="Distribution.Types.PackageDescription.html#testSuites"><span class="hs-identifier hs-var">testSuites</span></a></span><span>   </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747010"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span>
</span><span id="line-1032"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">benchmarks :: [Benchmark]
</span><a href="Distribution.Types.PackageDescription.html#benchmarks"><span class="hs-identifier hs-var">benchmarks</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Benchmark -&gt; Benchmark
</span><a href="#local-6989586621679746984"><span class="hs-identifier hs-var">modifyBenchmark</span></a></span><span>  </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-operator hs-var">`map`</span></a></span><span>  </span><span class="annot"><span class="annottext">PackageDescription -&gt; [Benchmark]
</span><a href="Distribution.Types.PackageDescription.html#benchmarks"><span class="hs-identifier hs-var">benchmarks</span></a></span><span>   </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679747010"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span>
</span><span id="line-1033"></span><span>             </span><span class="hs-special">}</span><span>
</span><span id="line-1034"></span><span>
</span><span id="line-1035"></span><span class="hs-comment">-- | Check for use of Cabal features which require compiler support</span><span>
</span><span id="line-1036"></span><span class="annot"><a href="Distribution.Simple.Configure.html#checkCompilerProblems"><span class="hs-identifier hs-type">checkCompilerProblems</span></a></span><span>
</span><span id="line-1037"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentRequestedSpec.html#ComponentRequestedSpec"><span class="hs-identifier hs-type">ComponentRequestedSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1038"></span><span id="checkCompilerProblems"><span class="annot"><span class="annottext">checkCompilerProblems :: Verbosity
-&gt; Compiler
-&gt; PackageDescription
-&gt; ComponentRequestedSpec
-&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#checkCompilerProblems"><span class="hs-identifier hs-var hs-var">checkCompilerProblems</span></a></span></span><span> </span><span id="local-6989586621679746975"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746975"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746974"><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746974"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span id="local-6989586621679746973"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746973"><span class="hs-identifier hs-var">pkg_descr</span></a></span></span><span> </span><span id="local-6989586621679746972"><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679746972"><span class="hs-identifier hs-var">enabled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1039"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; Bool
</span><a href="Distribution.Simple.Compiler.html#renamingPackageFlagsSupported"><span class="hs-identifier hs-var">renamingPackageFlagsSupported</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746974"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span>
</span><span id="line-1040"></span><span>             </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IncludeRenaming -&gt; Bool
</span><a href="Distribution.Types.IncludeRenaming.html#isDefaultIncludeRenaming"><span class="hs-identifier hs-var">isDefaultIncludeRenaming</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Mixin -&gt; IncludeRenaming
</span><a href="Distribution.Types.Mixin.html#mixinIncludeRenaming"><span class="hs-identifier hs-var">mixinIncludeRenaming</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [Mixin]
</span><a href="Distribution.Types.BuildInfo.html#mixins"><span class="hs-identifier hs-var">mixins</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1041"></span><span>                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; ComponentRequestedSpec -&gt; [BuildInfo]
</span><a href="Distribution.Types.PackageDescription.html#enabledBuildInfos"><span class="hs-identifier hs-var">enabledBuildInfos</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746973"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679746972"><span class="hs-identifier hs-var">enabled</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1042"></span><span>        </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746975"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1043"></span><span>              </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Your compiler does not support thinning and renaming on &quot;</span></span><span>
</span><span id="line-1044"></span><span>           </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;package flags.  To use this feature you must use &quot;</span></span><span>
</span><span id="line-1045"></span><span>           </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;GHC 7.9 or later.&quot;</span></span><span>
</span><span id="line-1046"></span><span>
</span><span id="line-1047"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span class="annot"><span class="annottext">Library -&gt; [ModuleReexport]
</span><a href="Distribution.Types.Library.html#reexportedModules"><span class="hs-identifier hs-var">reexportedModules</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; [Library]
</span><a href="Distribution.Types.PackageDescription.html#allLibraries"><span class="hs-identifier hs-var">allLibraries</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746973"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1048"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; Bool
</span><a href="Distribution.Simple.Compiler.html#reexportedModulesSupported"><span class="hs-identifier hs-var">reexportedModulesSupported</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746974"><span class="hs-identifier hs-var">comp</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1049"></span><span>        </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746975"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1050"></span><span>             </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Your compiler does not support module re-exports. To use &quot;</span></span><span>
</span><span id="line-1051"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;this feature you must use GHC 7.9 or later.&quot;</span></span><span>
</span><span id="line-1052"></span><span>
</span><span id="line-1053"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span class="annot"><span class="annottext">Library -&gt; [ModuleName]
</span><a href="Distribution.Types.Library.html#signatures"><span class="hs-identifier hs-var">signatures</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; [Library]
</span><a href="Distribution.Types.PackageDescription.html#allLibraries"><span class="hs-identifier hs-var">allLibraries</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746973"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1054"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; Bool
</span><a href="Distribution.Simple.Compiler.html#backpackSupported"><span class="hs-identifier hs-var">backpackSupported</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746974"><span class="hs-identifier hs-var">comp</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1055"></span><span>        </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746975"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1056"></span><span>               </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Your compiler does not support Backpack. To use &quot;</span></span><span>
</span><span id="line-1057"></span><span>           </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;this feature you must use GHC 8.1 or later.&quot;</span></span><span>
</span><span id="line-1058"></span><span>
</span><span id="line-1059"></span><span class="hs-comment">-- | Select dependencies for the package.</span><span>
</span><span id="line-1060"></span><span class="annot"><a href="Distribution.Simple.Configure.html#configureDependencies"><span class="hs-identifier hs-type">configureDependencies</span></a></span><span>
</span><span id="line-1061"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-1062"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#UseExternalInternalDeps"><span class="hs-identifier hs-type">UseExternalInternalDeps</span></a></span><span>
</span><span id="line-1063"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Distribution.Types.LibraryName.html#LibraryName"><span class="hs-identifier hs-type">LibraryName</span></a></span><span>
</span><span id="line-1064"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.PackageIndex.html#InstalledPackageIndex"><span class="hs-identifier hs-type">InstalledPackageIndex</span></a></span><span> </span><span class="hs-comment">-- ^ installed packages</span><span>
</span><span id="line-1065"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.PackageName.html#PackageName"><span class="hs-identifier hs-type">PackageName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentName.html#ComponentName"><span class="hs-identifier hs-type">ComponentName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier hs-type">InstalledPackageInfo</span></a></span><span> </span><span class="hs-comment">-- ^ required deps</span><span>
</span><span id="line-1066"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span>
</span><span id="line-1067"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentRequestedSpec.html#ComponentRequestedSpec"><span class="hs-identifier hs-type">ComponentRequestedSpec</span></a></span><span>
</span><span id="line-1068"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Backpack.PreExistingComponent.html#PreExistingComponent"><span class="hs-identifier hs-type">PreExistingComponent</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1069"></span><span id="configureDependencies"><span class="annot"><span class="annottext">configureDependencies :: Verbosity
-&gt; Bool
-&gt; Set LibraryName
-&gt; InstalledPackageIndex
-&gt; Map (PackageName, ComponentName) InstalledPackageInfo
-&gt; PackageDescription
-&gt; ComponentRequestedSpec
-&gt; IO [PreExistingComponent]
</span><a href="Distribution.Simple.Configure.html#configureDependencies"><span class="hs-identifier hs-var hs-var">configureDependencies</span></a></span></span><span> </span><span id="local-6989586621679746962"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746962"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746961"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746961"><span class="hs-identifier hs-var">use_external_internal_deps</span></a></span></span><span>
</span><span id="line-1070"></span><span>  </span><span id="local-6989586621679746960"><span class="annot"><span class="annottext">Set LibraryName
</span><a href="#local-6989586621679746960"><span class="hs-identifier hs-var">packageLibraries</span></a></span></span><span> </span><span id="local-6989586621679746959"><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679746959"><span class="hs-identifier hs-var">installedPackageSet</span></a></span></span><span> </span><span id="local-6989586621679746958"><span class="annot"><span class="annottext">Map (PackageName, ComponentName) InstalledPackageInfo
</span><a href="#local-6989586621679746958"><span class="hs-identifier hs-var">requiredDepsMap</span></a></span></span><span> </span><span id="local-6989586621679746957"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746957"><span class="hs-identifier hs-var">pkg_descr</span></a></span></span><span> </span><span id="local-6989586621679746956"><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679746956"><span class="hs-identifier hs-var">enableSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1071"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679746955"><span class="hs-identifier hs-type">failedDeps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Simple.Configure.html#FailedDependency"><span class="hs-identifier hs-type">FailedDependency</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1072"></span><span>        </span><span class="annot"><a href="#local-6989586621679746954"><span class="hs-identifier hs-type">allPkgDeps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Simple.Configure.html#ResolvedDependency"><span class="hs-identifier hs-type">ResolvedDependency</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1073"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679746955"><span class="annot"><span class="annottext">[FailedDependency]
</span><a href="#local-6989586621679746955"><span class="hs-identifier hs-var">failedDeps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746954"><span class="annot"><span class="annottext">[ResolvedDependency]
</span><a href="#local-6989586621679746954"><span class="hs-identifier hs-var">allPkgDeps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. [Either a b] -&gt; ([a], [b])
</span><a href="../../base-4.16.3.0/src/Data-Either.html#partitionEithers"><span class="hs-identifier hs-var">partitionEithers</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a></span><span>
</span><span id="line-1074"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679746947"><span class="annot"><span class="annottext">DependencyResolution
</span><a href="#local-6989586621679746947"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependency
</span><a href="#local-6989586621679746946"><span class="hs-identifier hs-var">dep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DependencyResolution
</span><a href="#local-6989586621679746947"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Either FailedDependency DependencyResolution]
</span><a href="#local-6989586621679746944"><span class="hs-identifier hs-var">status</span></a></span><span>
</span><span id="line-1075"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679746946"><span class="annot"><span class="annottext">Dependency
</span><a href="#local-6989586621679746946"><span class="hs-identifier hs-var">dep</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PackageDescription -&gt; ComponentRequestedSpec -&gt; [Dependency]
</span><a href="Distribution.Types.PackageDescription.html#enabledBuildDepends"><span class="hs-identifier hs-var">enabledBuildDepends</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746957"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679746956"><span class="hs-identifier hs-var">enableSpec</span></a></span><span>
</span><span id="line-1076"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746944"><span class="annot"><span class="annottext">status :: [Either FailedDependency DependencyResolution]
</span><a href="#local-6989586621679746944"><span class="hs-identifier hs-var hs-var">status</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
-&gt; Set LibraryName
-&gt; InstalledPackageIndex
-&gt; Map (PackageName, ComponentName) InstalledPackageInfo
-&gt; Bool
-&gt; Dependency
-&gt; [Either FailedDependency DependencyResolution]
</span><a href="Distribution.Simple.Configure.html#selectDependency"><span class="hs-identifier hs-var">selectDependency</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; PackageIdentifier
</span><a href="Distribution.Types.PackageDescription.html#package"><span class="hs-identifier hs-var">package</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746957"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1077"></span><span>                  </span><span class="annot"><span class="annottext">Set LibraryName
</span><a href="#local-6989586621679746960"><span class="hs-identifier hs-var">packageLibraries</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679746959"><span class="hs-identifier hs-var">installedPackageSet</span></a></span><span>
</span><span id="line-1078"></span><span>                  </span><span class="annot"><span class="annottext">Map (PackageName, ComponentName) InstalledPackageInfo
</span><a href="#local-6989586621679746958"><span class="hs-identifier hs-var">requiredDepsMap</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746961"><span class="hs-identifier hs-var">use_external_internal_deps</span></a></span><span> </span><span class="annot"><span class="annottext">Dependency
</span><a href="#local-6989586621679746946"><span class="hs-identifier hs-var">dep</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1079"></span><span>
</span><span id="line-1080"></span><span>        </span><span id="local-6989586621679746940"><span class="annot"><span class="annottext">internalPkgDeps :: [PackageIdentifier]
</span><a href="#local-6989586621679746940"><span class="hs-identifier hs-var hs-var">internalPkgDeps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679746939"><span class="hs-identifier hs-var">pkgid</span></a></span><span>
</span><span id="line-1081"></span><span>                          </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependency
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#InternalDependency"><span class="hs-identifier hs-type">InternalDependency</span></a></span><span> </span><span id="local-6989586621679746939"><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679746939"><span class="hs-identifier hs-var">pkgid</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[ResolvedDependency]
</span><a href="#local-6989586621679746954"><span class="hs-identifier hs-var">allPkgDeps</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1082"></span><span>        </span><span class="hs-comment">-- NB: we have to SAVE the package name, because this is the only</span><span>
</span><span id="line-1083"></span><span>        </span><span class="hs-comment">-- way we can be able to resolve package names in the package</span><span>
</span><span id="line-1084"></span><span>        </span><span class="hs-comment">-- description.</span><span>
</span><span id="line-1085"></span><span>        </span><span id="local-6989586621679746937"><span class="annot"><span class="annottext">externalPkgDeps :: [PreExistingComponent]
</span><a href="#local-6989586621679746937"><span class="hs-identifier hs-var hs-var">externalPkgDeps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">PreExistingComponent
</span><a href="#local-6989586621679746936"><span class="hs-identifier hs-var">pec</span></a></span><span>
</span><span id="line-1086"></span><span>                          </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependency
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#ExternalDependency"><span class="hs-identifier hs-type">ExternalDependency</span></a></span><span> </span><span id="local-6989586621679746936"><span class="annot"><span class="annottext">PreExistingComponent
</span><a href="#local-6989586621679746936"><span class="hs-identifier hs-var">pec</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[ResolvedDependency]
</span><a href="#local-6989586621679746954"><span class="hs-identifier hs-var">allPkgDeps</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1087"></span><span>
</span><span id="line-1088"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[PackageIdentifier]
</span><a href="#local-6989586621679746940"><span class="hs-identifier hs-var">internalPkgDeps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1089"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; Bool
</span><a href="Distribution.Backpack.ConfiguredComponent.html#newPackageDepsBehaviour"><span class="hs-identifier hs-var">newPackageDepsBehaviour</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746957"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1090"></span><span>        </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746962"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;The field 'build-depends: &quot;</span></span><span>
</span><span id="line-1091"></span><span>           </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#intercalate"><span class="hs-identifier hs-var">intercalate</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall pkg. Package pkg =&gt; pkg -&gt; PackageName
</span><a href="Distribution.Package.html#packageName"><span class="hs-identifier hs-var">packageName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PackageIdentifier]
</span><a href="#local-6989586621679746940"><span class="hs-identifier hs-var">internalPkgDeps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1092"></span><span>           </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;' refers to a library which is defined within the same &quot;</span></span><span>
</span><span id="line-1093"></span><span>           </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;package. To use this feature the package must specify at &quot;</span></span><span>
</span><span id="line-1094"></span><span>           </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;least 'cabal-version: &gt;= 1.8'.&quot;</span></span><span>
</span><span id="line-1095"></span><span>
</span><span id="line-1096"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; [FailedDependency] -&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#reportFailedDependencies"><span class="hs-identifier hs-var">reportFailedDependencies</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746962"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[FailedDependency]
</span><a href="#local-6989586621679746955"><span class="hs-identifier hs-var">failedDeps</span></a></span><span>
</span><span id="line-1097"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; [ResolvedDependency] -&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#reportSelectedDependencies"><span class="hs-identifier hs-var">reportSelectedDependencies</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746962"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[ResolvedDependency]
</span><a href="#local-6989586621679746954"><span class="hs-identifier hs-var">allPkgDeps</span></a></span><span>
</span><span id="line-1098"></span><span>
</span><span id="line-1099"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">[PreExistingComponent]
</span><a href="#local-6989586621679746937"><span class="hs-identifier hs-var">externalPkgDeps</span></a></span><span>
</span><span id="line-1100"></span><span>
</span><span id="line-1101"></span><span class="hs-comment">-- | Select and apply coverage settings for the build based on the</span><span>
</span><span id="line-1102"></span><span class="hs-comment">-- 'ConfigFlags' and 'Compiler'.</span><span>
</span><span id="line-1103"></span><span class="annot"><a href="Distribution.Simple.Configure.html#configureCoverage"><span class="hs-identifier hs-type">configureCoverage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Setup.html#ConfigFlags"><span class="hs-identifier hs-type">ConfigFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span>
</span><span id="line-1104"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1105"></span><span id="configureCoverage"><span class="annot"><span class="annottext">configureCoverage :: Verbosity
-&gt; ConfigFlags -&gt; Compiler -&gt; IO (LocalBuildInfo -&gt; LocalBuildInfo)
</span><a href="Distribution.Simple.Configure.html#configureCoverage"><span class="hs-identifier hs-var hs-var">configureCoverage</span></a></span></span><span> </span><span id="local-6989586621679746932"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746932"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746931"><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746931"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span id="local-6989586621679746930"><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746930"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1106"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746929"><span class="annot"><span class="annottext">tryExeCoverage :: Bool
</span><a href="#local-6989586621679746929"><span class="hs-identifier hs-var hs-var">tryExeCoverage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configCoverage"><span class="hs-identifier hs-var">configCoverage</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746931"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1107"></span><span>        </span><span id="local-6989586621679746926"><span class="annot"><span class="annottext">tryLibCoverage :: Bool
</span><a href="#local-6989586621679746926"><span class="hs-identifier hs-var hs-var">tryLibCoverage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746929"><span class="hs-identifier hs-var">tryExeCoverage</span></a></span><span>
</span><span id="line-1108"></span><span>                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-identifier hs-var">mappend</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configCoverage"><span class="hs-identifier hs-var">configCoverage</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746931"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configLibCoverage"><span class="hs-identifier hs-var">configLibCoverage</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746931"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1109"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; Bool
</span><a href="Distribution.Simple.Compiler.html#coverageSupported"><span class="hs-identifier hs-var">coverageSupported</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746930"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-1110"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1111"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746924"><span class="annot"><span class="annottext">apply :: LocalBuildInfo -&gt; LocalBuildInfo
</span><a href="#local-6989586621679746924"><span class="hs-identifier hs-var hs-var">apply</span></a></span></span><span> </span><span id="local-6989586621679746923"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746923"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746923"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">libCoverage :: Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#libCoverage"><span class="hs-identifier hs-var">libCoverage</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746926"><span class="hs-identifier hs-var">tryLibCoverage</span></a></span><span>
</span><span id="line-1112"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exeCoverage :: Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#exeCoverage"><span class="hs-identifier hs-var">exeCoverage</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746929"><span class="hs-identifier hs-var">tryExeCoverage</span></a></span><span>
</span><span id="line-1113"></span><span>                            </span><span class="hs-special">}</span><span>
</span><span id="line-1114"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; LocalBuildInfo
</span><a href="#local-6989586621679746924"><span class="hs-identifier hs-var">apply</span></a></span><span>
</span><span id="line-1115"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1116"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746922"><span class="annot"><span class="annottext">apply :: LocalBuildInfo -&gt; LocalBuildInfo
</span><a href="#local-6989586621679746922"><span class="hs-identifier hs-var hs-var">apply</span></a></span></span><span> </span><span id="local-6989586621679746921"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746921"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746921"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">libCoverage :: Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#libCoverage"><span class="hs-identifier hs-var">libCoverage</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1117"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exeCoverage :: Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#exeCoverage"><span class="hs-identifier hs-var">exeCoverage</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1118"></span><span>                            </span><span class="hs-special">}</span><span>
</span><span id="line-1119"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746929"><span class="hs-identifier hs-var">tryExeCoverage</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746926"><span class="hs-identifier hs-var">tryLibCoverage</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746932"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-1120"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;The compiler &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; [Char]
</span><a href="Distribution.Simple.Compiler.html#showCompilerId"><span class="hs-identifier hs-var">showCompilerId</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746930"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; does not support &quot;</span></span><span>
</span><span id="line-1121"></span><span>           </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;program coverage. Program coverage has been disabled.&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1122"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; LocalBuildInfo
</span><a href="#local-6989586621679746922"><span class="hs-identifier hs-var">apply</span></a></span><span>
</span><span id="line-1123"></span><span>
</span><span id="line-1124"></span><span class="hs-comment">-- | Compute the effective value of the profiling flags</span><span>
</span><span id="line-1125"></span><span class="hs-comment">-- @--enable-library-profiling@ and @--enable-executable-profiling@</span><span>
</span><span id="line-1126"></span><span class="hs-comment">-- from the specified 'ConfigFlags'.  This may be useful for</span><span>
</span><span id="line-1127"></span><span class="hs-comment">-- external Cabal tools which need to interact with Setup in</span><span>
</span><span id="line-1128"></span><span class="hs-comment">-- a backwards-compatible way: the most predictable mechanism</span><span>
</span><span id="line-1129"></span><span class="hs-comment">-- for enabling profiling across many legacy versions is to</span><span>
</span><span id="line-1130"></span><span class="hs-comment">-- NOT use @--enable-profiling@ and use those two flags instead.</span><span>
</span><span id="line-1131"></span><span class="hs-comment">--</span><span>
</span><span id="line-1132"></span><span class="hs-comment">-- Note that @--enable-executable-profiling@ also affects profiling</span><span>
</span><span id="line-1133"></span><span class="hs-comment">-- of benchmarks and (non-detailed) test suites.</span><span>
</span><span id="line-1134"></span><span class="annot"><a href="Distribution.Simple.Configure.html#computeEffectiveProfiling"><span class="hs-identifier hs-type">computeEffectiveProfiling</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Setup.html#ConfigFlags"><span class="hs-identifier hs-type">ConfigFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">{- lib -}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">{- exe -}</span><span class="hs-special">)</span><span>
</span><span id="line-1135"></span><span id="computeEffectiveProfiling"><span class="annot"><span class="annottext">computeEffectiveProfiling :: ConfigFlags -&gt; (Bool, Bool)
</span><a href="Distribution.Simple.Configure.html#computeEffectiveProfiling"><span class="hs-identifier hs-var hs-var">computeEffectiveProfiling</span></a></span></span><span> </span><span id="local-6989586621679746920"><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746920"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1136"></span><span>  </span><span class="hs-comment">-- The --profiling flag sets the default for both libs and exes,</span><span>
</span><span id="line-1137"></span><span>  </span><span class="hs-comment">-- but can be overidden by --library-profiling, or the old deprecated</span><span>
</span><span id="line-1138"></span><span>  </span><span class="hs-comment">-- --executable-profiling flag.</span><span>
</span><span id="line-1139"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-1140"></span><span>  </span><span class="hs-comment">-- The --profiling-detail and --library-profiling-detail flags behave</span><span>
</span><span id="line-1141"></span><span>  </span><span class="hs-comment">-- similarly</span><span>
</span><span id="line-1142"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746918"><span class="annot"><span class="annottext">tryExeProfiling :: Bool
</span><a href="#local-6989586621679746918"><span class="hs-identifier hs-var hs-var">tryExeProfiling</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1143"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-identifier hs-var">mappend</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configProf"><span class="hs-identifier hs-var">configProf</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746920"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configProfExe"><span class="hs-identifier hs-var">configProfExe</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746920"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1144"></span><span>      </span><span id="local-6989586621679746915"><span class="annot"><span class="annottext">tryLibProfiling :: Bool
</span><a href="#local-6989586621679746915"><span class="hs-identifier hs-var hs-var">tryLibProfiling</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746918"><span class="hs-identifier hs-var">tryExeProfiling</span></a></span><span>
</span><span id="line-1145"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-identifier hs-var">mappend</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configProf"><span class="hs-identifier hs-var">configProf</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746920"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Bool
</span><a href="Distribution.Simple.Setup.html#configProfLib"><span class="hs-identifier hs-var">configProfLib</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746920"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1146"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746915"><span class="hs-identifier hs-var">tryLibProfiling</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746918"><span class="hs-identifier hs-var">tryExeProfiling</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1147"></span><span>
</span><span id="line-1148"></span><span class="hs-comment">-- | Select and apply profiling settings for the build based on the</span><span>
</span><span id="line-1149"></span><span class="hs-comment">-- 'ConfigFlags' and 'Compiler'.</span><span>
</span><span id="line-1150"></span><span class="annot"><a href="Distribution.Simple.Configure.html#configureProfiling"><span class="hs-identifier hs-type">configureProfiling</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Setup.html#ConfigFlags"><span class="hs-identifier hs-type">ConfigFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span>
</span><span id="line-1151"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1152"></span><span id="configureProfiling"><span class="annot"><span class="annottext">configureProfiling :: Verbosity
-&gt; ConfigFlags -&gt; Compiler -&gt; IO (LocalBuildInfo -&gt; LocalBuildInfo)
</span><a href="Distribution.Simple.Configure.html#configureProfiling"><span class="hs-identifier hs-var hs-var">configureProfiling</span></a></span></span><span> </span><span id="local-6989586621679746913"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746913"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746912"><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746912"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span id="local-6989586621679746911"><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746911"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1153"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679746910"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746910"><span class="hs-identifier hs-var">tryLibProfiling</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746909"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746909"><span class="hs-identifier hs-var">tryExeProfiling</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; (Bool, Bool)
</span><a href="Distribution.Simple.Configure.html#computeEffectiveProfiling"><span class="hs-identifier hs-var">computeEffectiveProfiling</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746912"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-1154"></span><span>
</span><span id="line-1155"></span><span>      </span><span id="local-6989586621679746908"><span class="annot"><span class="annottext">tryExeProfileLevel :: ProfDetailLevel
</span><a href="#local-6989586621679746908"><span class="hs-identifier hs-var hs-var">tryExeProfileLevel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">ProfDetailLevel
</span><a href="Distribution.Simple.Compiler.html#ProfDetailDefault"><span class="hs-identifier hs-var">ProfDetailDefault</span></a></span><span>
</span><span id="line-1156"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag ProfDetailLevel
</span><a href="Distribution.Simple.Setup.html#configProfDetail"><span class="hs-identifier hs-var">configProfDetail</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746912"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1157"></span><span>      </span><span id="local-6989586621679746904"><span class="annot"><span class="annottext">tryLibProfileLevel :: ProfDetailLevel
</span><a href="#local-6989586621679746904"><span class="hs-identifier hs-var hs-var">tryLibProfileLevel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">ProfDetailLevel
</span><a href="Distribution.Simple.Compiler.html#ProfDetailDefault"><span class="hs-identifier hs-var">ProfDetailDefault</span></a></span><span>
</span><span id="line-1158"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-identifier hs-var">mappend</span></a></span><span>
</span><span id="line-1159"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag ProfDetailLevel
</span><a href="Distribution.Simple.Setup.html#configProfDetail"><span class="hs-identifier hs-var">configProfDetail</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746912"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1160"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag ProfDetailLevel
</span><a href="Distribution.Simple.Setup.html#configProfLibDetail"><span class="hs-identifier hs-var">configProfLibDetail</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746912"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1161"></span><span>
</span><span id="line-1162"></span><span>      </span><span id="local-6989586621679746895"><span class="annot"><span class="annottext">checkProfileLevel :: ProfDetailLevel -&gt; IO ProfDetailLevel
</span><a href="#local-6989586621679746895"><span class="hs-identifier hs-var hs-var">checkProfileLevel</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.Compiler.html#ProfDetailOther"><span class="hs-identifier hs-type">ProfDetailOther</span></a></span><span> </span><span id="local-6989586621679746893"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746893"><span class="hs-identifier hs-var">other</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1163"></span><span>        </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746913"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-1164"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Unknown profiling detail level '&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746893"><span class="hs-identifier hs-var">other</span></a></span><span>
</span><span id="line-1165"></span><span>           </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;', using default.\nThe profiling detail levels are: &quot;</span></span><span>
</span><span id="line-1166"></span><span>           </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#intercalate"><span class="hs-identifier hs-var">intercalate</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;, &quot;</span></span><span>
</span><span id="line-1167"></span><span>           </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746892"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679746892"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746892"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProfDetailLevel
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[([Char], [[Char]], ProfDetailLevel)]
</span><a href="Distribution.Simple.Compiler.html#knownProfDetailLevels"><span class="hs-identifier hs-var">knownProfDetailLevels</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1168"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">ProfDetailLevel
</span><a href="Distribution.Simple.Compiler.html#ProfDetailDefault"><span class="hs-identifier hs-var">ProfDetailDefault</span></a></span><span>
</span><span id="line-1169"></span><span>      </span><span class="annot"><a href="#local-6989586621679746895"><span class="hs-identifier hs-var">checkProfileLevel</span></a></span><span> </span><span id="local-6989586621679746890"><span class="annot"><span class="annottext">ProfDetailLevel
</span><a href="#local-6989586621679746890"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">ProfDetailLevel
</span><a href="#local-6989586621679746890"><span class="hs-identifier hs-var">other</span></a></span><span>
</span><span id="line-1170"></span><span>
</span><span id="line-1171"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679746889"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746889"><span class="hs-identifier hs-var">exeProfWithoutLibProf</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746888"><span class="annot"><span class="annottext">LocalBuildInfo -&gt; LocalBuildInfo
</span><a href="#local-6989586621679746888"><span class="hs-identifier hs-var">applyProfiling</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1172"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; Bool
</span><a href="Distribution.Simple.Compiler.html#profilingSupported"><span class="hs-identifier hs-var">profilingSupported</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746911"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-1173"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1174"></span><span>      </span><span id="local-6989586621679746886"><span class="annot"><span class="annottext">ProfDetailLevel
</span><a href="#local-6989586621679746886"><span class="hs-identifier hs-var">exeLevel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ProfDetailLevel -&gt; IO ProfDetailLevel
</span><a href="#local-6989586621679746895"><span class="hs-identifier hs-var">checkProfileLevel</span></a></span><span> </span><span class="annot"><span class="annottext">ProfDetailLevel
</span><a href="#local-6989586621679746908"><span class="hs-identifier hs-var">tryExeProfileLevel</span></a></span><span>
</span><span id="line-1175"></span><span>      </span><span id="local-6989586621679746885"><span class="annot"><span class="annottext">ProfDetailLevel
</span><a href="#local-6989586621679746885"><span class="hs-identifier hs-var">libLevel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ProfDetailLevel -&gt; IO ProfDetailLevel
</span><a href="#local-6989586621679746895"><span class="hs-identifier hs-var">checkProfileLevel</span></a></span><span> </span><span class="annot"><span class="annottext">ProfDetailLevel
</span><a href="#local-6989586621679746904"><span class="hs-identifier hs-var">tryLibProfileLevel</span></a></span><span>
</span><span id="line-1176"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746884"><span class="annot"><span class="annottext">apply :: LocalBuildInfo -&gt; LocalBuildInfo
</span><a href="#local-6989586621679746884"><span class="hs-identifier hs-var hs-var">apply</span></a></span></span><span> </span><span id="local-6989586621679746883"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746883"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746883"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">withProfLib :: Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfLib"><span class="hs-identifier hs-var">withProfLib</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746910"><span class="hs-identifier hs-var">tryLibProfiling</span></a></span><span>
</span><span id="line-1177"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">withProfLibDetail :: ProfDetailLevel
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfLibDetail"><span class="hs-identifier hs-var">withProfLibDetail</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProfDetailLevel
</span><a href="#local-6989586621679746885"><span class="hs-identifier hs-var">libLevel</span></a></span><span>
</span><span id="line-1178"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">withProfExe :: Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfExe"><span class="hs-identifier hs-var">withProfExe</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746909"><span class="hs-identifier hs-var">tryExeProfiling</span></a></span><span>
</span><span id="line-1179"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">withProfExeDetail :: ProfDetailLevel
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfExeDetail"><span class="hs-identifier hs-var">withProfExeDetail</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProfDetailLevel
</span><a href="#local-6989586621679746886"><span class="hs-identifier hs-var">exeLevel</span></a></span><span>
</span><span id="line-1180"></span><span>                          </span><span class="hs-special">}</span><span>
</span><span id="line-1181"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746909"><span class="hs-identifier hs-var">tryExeProfiling</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746910"><span class="hs-identifier hs-var">tryLibProfiling</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; LocalBuildInfo
</span><a href="#local-6989586621679746884"><span class="hs-identifier hs-var">apply</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1182"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1183"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746882"><span class="annot"><span class="annottext">apply :: LocalBuildInfo -&gt; LocalBuildInfo
</span><a href="#local-6989586621679746882"><span class="hs-identifier hs-var hs-var">apply</span></a></span></span><span> </span><span id="local-6989586621679746881"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746881"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746881"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">withProfLib :: Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfLib"><span class="hs-identifier hs-var">withProfLib</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1184"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">withProfLibDetail :: ProfDetailLevel
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfLibDetail"><span class="hs-identifier hs-var">withProfLibDetail</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProfDetailLevel
</span><a href="Distribution.Simple.Compiler.html#ProfDetailNone"><span class="hs-identifier hs-var">ProfDetailNone</span></a></span><span>
</span><span id="line-1185"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">withProfExe :: Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfExe"><span class="hs-identifier hs-var">withProfExe</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1186"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">withProfExeDetail :: ProfDetailLevel
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfExeDetail"><span class="hs-identifier hs-var">withProfExeDetail</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProfDetailLevel
</span><a href="Distribution.Simple.Compiler.html#ProfDetailNone"><span class="hs-identifier hs-var">ProfDetailNone</span></a></span><span>
</span><span id="line-1187"></span><span>                          </span><span class="hs-special">}</span><span>
</span><span id="line-1188"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746909"><span class="hs-identifier hs-var">tryExeProfiling</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746910"><span class="hs-identifier hs-var">tryLibProfiling</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746913"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-1189"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;The compiler &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; [Char]
</span><a href="Distribution.Simple.Compiler.html#showCompilerId"><span class="hs-identifier hs-var">showCompilerId</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746911"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; does not support &quot;</span></span><span>
</span><span id="line-1190"></span><span>         </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;profiling. Profiling has been disabled.&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1191"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; LocalBuildInfo
</span><a href="#local-6989586621679746882"><span class="hs-identifier hs-var">apply</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1192"></span><span>
</span><span id="line-1193"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746889"><span class="hs-identifier hs-var">exeProfWithoutLibProf</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746913"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-1194"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Executables will be built with profiling, but library &quot;</span></span><span>
</span><span id="line-1195"></span><span>     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;profiling is disabled. Linking will fail if any executables &quot;</span></span><span>
</span><span id="line-1196"></span><span>     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;depend on the library.&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1197"></span><span>
</span><span id="line-1198"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; LocalBuildInfo
</span><a href="#local-6989586621679746888"><span class="hs-identifier hs-var">applyProfiling</span></a></span><span>
</span><span id="line-1199"></span><span>
</span><span id="line-1200"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-1201"></span><span class="hs-comment">-- Configuring package dependencies</span><span>
</span><span id="line-1202"></span><span>
</span><span id="line-1203"></span><span class="annot"><a href="Distribution.Simple.Configure.html#reportProgram"><span class="hs-identifier hs-type">reportProgram</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Types.html#Program"><span class="hs-identifier hs-type">Program</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Types.html#ConfiguredProgram"><span class="hs-identifier hs-type">ConfiguredProgram</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1204"></span><span id="reportProgram"><span class="annot"><span class="annottext">reportProgram :: Verbosity -&gt; Program -&gt; Maybe ConfiguredProgram -&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#reportProgram"><span class="hs-identifier hs-var hs-var">reportProgram</span></a></span></span><span> </span><span id="local-6989586621679746880"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746880"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746879"><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679746879"><span class="hs-identifier hs-var">prog</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe ConfiguredProgram
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1205"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746880"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;No &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Program -&gt; [Char]
</span><a href="Distribution.Simple.Program.Types.html#programName"><span class="hs-identifier hs-var">programName</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679746879"><span class="hs-identifier hs-var">prog</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; found&quot;</span></span><span>
</span><span id="line-1206"></span><span class="annot"><a href="Distribution.Simple.Configure.html#reportProgram"><span class="hs-identifier hs-var">reportProgram</span></a></span><span> </span><span id="local-6989586621679746877"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746877"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746876"><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679746876"><span class="hs-identifier hs-var">prog</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679746875"><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679746875"><span class="hs-identifier hs-var">configuredProg</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1207"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746877"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Using &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Program -&gt; [Char]
</span><a href="Distribution.Simple.Program.Types.html#programName"><span class="hs-identifier hs-var">programName</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679746876"><span class="hs-identifier hs-var">prog</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746874"><span class="hs-identifier hs-var">version</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746873"><span class="hs-identifier hs-var">location</span></a></span><span>
</span><span id="line-1208"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679746873"><span class="annot"><span class="annottext">location :: [Char]
</span><a href="#local-6989586621679746873"><span class="hs-identifier hs-var hs-var">location</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram -&gt; ProgramLocation
</span><a href="Distribution.Simple.Program.Types.html#programLocation"><span class="hs-identifier hs-var">programLocation</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679746875"><span class="hs-identifier hs-var">configuredProg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1209"></span><span>            </span><span class="annot"><a href="Distribution.Simple.Program.Types.html#FoundOnSystem"><span class="hs-identifier hs-type">FoundOnSystem</span></a></span><span> </span><span id="local-6989586621679746867"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746867"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; found on system at: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746867"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1210"></span><span>            </span><span class="annot"><a href="Distribution.Simple.Program.Types.html#UserSpecified"><span class="hs-identifier hs-type">UserSpecified</span></a></span><span> </span><span id="local-6989586621679746865"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746865"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; given by user at: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746865"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1211"></span><span>          </span><span id="local-6989586621679746874"><span class="annot"><span class="annottext">version :: [Char]
</span><a href="#local-6989586621679746874"><span class="hs-identifier hs-var hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram -&gt; Maybe Version
</span><a href="Distribution.Simple.Program.Types.html#programVersion"><span class="hs-identifier hs-var">programVersion</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679746875"><span class="hs-identifier hs-var">configuredProg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1212"></span><span>            </span><span class="annot"><span class="annottext">Maybe Version
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1213"></span><span>            </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679746858"><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679746858"><span class="hs-identifier hs-var">v</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; version &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679746858"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1214"></span><span>
</span><span id="line-1215"></span><span class="annot"><a href="Distribution.Simple.Configure.html#hackageUrl"><span class="hs-identifier hs-type">hackageUrl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1216"></span><span id="hackageUrl"><span class="annot"><span class="annottext">hackageUrl :: [Char]
</span><a href="Distribution.Simple.Configure.html#hackageUrl"><span class="hs-identifier hs-var hs-var">hackageUrl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;http://hackage.haskell.org/package/&quot;</span></span><span>
</span><span id="line-1217"></span><span>
</span><span id="line-1218"></span><span class="hs-keyword">type</span><span> </span><span id="ResolvedDependency"><span class="annot"><a href="Distribution.Simple.Configure.html#ResolvedDependency"><span class="hs-identifier hs-var">ResolvedDependency</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.Dependency.html#Dependency"><span class="hs-identifier hs-type">Dependency</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#DependencyResolution"><span class="hs-identifier hs-type">DependencyResolution</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1219"></span><span>
</span><span id="line-1220"></span><span class="hs-keyword">data</span><span> </span><span id="DependencyResolution"><span class="annot"><a href="Distribution.Simple.Configure.html#DependencyResolution"><span class="hs-identifier hs-var">DependencyResolution</span></a></span></span><span>
</span><span id="line-1221"></span><span>    </span><span class="hs-comment">-- | An external dependency from the package database, OR an</span><span>
</span><span id="line-1222"></span><span>    </span><span class="hs-comment">-- internal dependency which we are getting from the package</span><span>
</span><span id="line-1223"></span><span>    </span><span class="hs-comment">-- database.</span><span>
</span><span id="line-1224"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="ExternalDependency"><span class="annot"><a href="Distribution.Simple.Configure.html#ExternalDependency"><span class="hs-identifier hs-var">ExternalDependency</span></a></span></span><span> </span><span class="annot"><a href="Distribution.Backpack.PreExistingComponent.html#PreExistingComponent"><span class="hs-identifier hs-type">PreExistingComponent</span></a></span><span>
</span><span id="line-1225"></span><span>    </span><span class="hs-comment">-- | An internal dependency ('PackageId' should be a library name)</span><span>
</span><span id="line-1226"></span><span>    </span><span class="hs-comment">-- which we are going to have to build.  (The</span><span>
</span><span id="line-1227"></span><span>    </span><span class="hs-comment">-- 'PackageId' here is a hack to get a modest amount of</span><span>
</span><span id="line-1228"></span><span>    </span><span class="hs-comment">-- polymorphism out of the 'Package' typeclass.)</span><span>
</span><span id="line-1229"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="InternalDependency"><span class="annot"><a href="Distribution.Simple.Configure.html#InternalDependency"><span class="hs-identifier hs-var">InternalDependency</span></a></span></span><span> </span><span class="annot"><a href="Distribution.Types.PackageId.html#PackageId"><span class="hs-identifier hs-type">PackageId</span></a></span><span>
</span><span id="line-1230"></span><span>
</span><span id="line-1231"></span><span class="hs-keyword">data</span><span> </span><span id="FailedDependency"><span class="annot"><a href="Distribution.Simple.Configure.html#FailedDependency"><span class="hs-identifier hs-var">FailedDependency</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DependencyNotExists"><span class="annot"><a href="Distribution.Simple.Configure.html#DependencyNotExists"><span class="hs-identifier hs-var">DependencyNotExists</span></a></span></span><span> </span><span class="annot"><a href="Distribution.Types.PackageName.html#PackageName"><span class="hs-identifier hs-type">PackageName</span></a></span><span>
</span><span id="line-1232"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span id="DependencyMissingInternal"><span class="annot"><a href="Distribution.Simple.Configure.html#DependencyMissingInternal"><span class="hs-identifier hs-var">DependencyMissingInternal</span></a></span></span><span> </span><span class="annot"><a href="Distribution.Types.PackageName.html#PackageName"><span class="hs-identifier hs-type">PackageName</span></a></span><span> </span><span class="annot"><a href="Distribution.Types.LibraryName.html#LibraryName"><span class="hs-identifier hs-type">LibraryName</span></a></span><span>
</span><span id="line-1233"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span id="DependencyNoVersion"><span class="annot"><a href="Distribution.Simple.Configure.html#DependencyNoVersion"><span class="hs-identifier hs-var">DependencyNoVersion</span></a></span></span><span> </span><span class="annot"><a href="Distribution.Types.Dependency.html#Dependency"><span class="hs-identifier hs-type">Dependency</span></a></span><span>
</span><span id="line-1234"></span><span>
</span><span id="line-1235"></span><span class="hs-comment">-- | Test for a package dependency and record the version we have installed.</span><span>
</span><span id="line-1236"></span><span class="annot"><a href="Distribution.Simple.Configure.html#selectDependency"><span class="hs-identifier hs-type">selectDependency</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.PackageId.html#PackageId"><span class="hs-identifier hs-type">PackageId</span></a></span><span> </span><span class="hs-comment">-- ^ Package id of current package</span><span>
</span><span id="line-1237"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Distribution.Types.LibraryName.html#LibraryName"><span class="hs-identifier hs-type">LibraryName</span></a></span><span> </span><span class="hs-comment">-- ^ package libraries</span><span>
</span><span id="line-1238"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.PackageIndex.html#InstalledPackageIndex"><span class="hs-identifier hs-type">InstalledPackageIndex</span></a></span><span>  </span><span class="hs-comment">-- ^ Installed packages</span><span>
</span><span id="line-1239"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.PackageName.html#PackageName"><span class="hs-identifier hs-type">PackageName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentName.html#ComponentName"><span class="hs-identifier hs-type">ComponentName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier hs-type">InstalledPackageInfo</span></a></span><span>
</span><span id="line-1240"></span><span>                    </span><span class="hs-comment">-- ^ Packages for which we have been given specific deps to</span><span>
</span><span id="line-1241"></span><span>                    </span><span class="hs-comment">-- use</span><span>
</span><span id="line-1242"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#UseExternalInternalDeps"><span class="hs-identifier hs-type">UseExternalInternalDeps</span></a></span><span> </span><span class="hs-comment">-- ^ Are we configuring a</span><span>
</span><span id="line-1243"></span><span>                                            </span><span class="hs-comment">-- single component?</span><span>
</span><span id="line-1244"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.Dependency.html#Dependency"><span class="hs-identifier hs-type">Dependency</span></a></span><span>
</span><span id="line-1245"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#FailedDependency"><span class="hs-identifier hs-type">FailedDependency</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#DependencyResolution"><span class="hs-identifier hs-type">DependencyResolution</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1246"></span><span id="selectDependency"><span class="annot"><span class="annottext">selectDependency :: PackageIdentifier
-&gt; Set LibraryName
-&gt; InstalledPackageIndex
-&gt; Map (PackageName, ComponentName) InstalledPackageInfo
-&gt; Bool
-&gt; Dependency
-&gt; [Either FailedDependency DependencyResolution]
</span><a href="Distribution.Simple.Configure.html#selectDependency"><span class="hs-identifier hs-var hs-var">selectDependency</span></a></span></span><span> </span><span id="local-6989586621679746852"><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679746852"><span class="hs-identifier hs-var">pkgid</span></a></span></span><span> </span><span id="local-6989586621679746851"><span class="annot"><span class="annottext">Set LibraryName
</span><a href="#local-6989586621679746851"><span class="hs-identifier hs-var">internalIndex</span></a></span></span><span> </span><span id="local-6989586621679746850"><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679746850"><span class="hs-identifier hs-var">installedIndex</span></a></span></span><span> </span><span id="local-6989586621679746849"><span class="annot"><span class="annottext">Map (PackageName, ComponentName) InstalledPackageInfo
</span><a href="#local-6989586621679746849"><span class="hs-identifier hs-var">requiredDepsMap</span></a></span></span><span>
</span><span id="line-1247"></span><span>  </span><span id="local-6989586621679746848"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746848"><span class="hs-identifier hs-var">use_external_internal_deps</span></a></span></span><span>
</span><span id="line-1248"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.Dependency.html#Dependency"><span class="hs-identifier hs-type">Dependency</span></a></span><span> </span><span id="local-6989586621679746847"><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746847"><span class="hs-identifier hs-var">dep_pkgname</span></a></span></span><span> </span><span id="local-6989586621679746846"><span class="annot"><span class="annottext">VersionRange
</span><a href="#local-6989586621679746846"><span class="hs-identifier hs-var">vr</span></a></span></span><span> </span><span id="local-6989586621679746845"><span class="annot"><span class="annottext">NonEmptySet LibraryName
</span><a href="#local-6989586621679746845"><span class="hs-identifier hs-var">libs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1249"></span><span>  </span><span class="hs-comment">-- If the dependency specification matches anything in the internal package</span><span>
</span><span id="line-1250"></span><span>  </span><span class="hs-comment">-- index, then we prefer that match to anything in the second.</span><span>
</span><span id="line-1251"></span><span>  </span><span class="hs-comment">-- For example:</span><span>
</span><span id="line-1252"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-1253"></span><span>  </span><span class="hs-comment">-- Name: MyLibrary</span><span>
</span><span id="line-1254"></span><span>  </span><span class="hs-comment">-- Version: 0.1</span><span>
</span><span id="line-1255"></span><span>  </span><span class="hs-comment">-- Library</span><span>
</span><span id="line-1256"></span><span>  </span><span class="hs-comment">--     ..</span><span>
</span><span id="line-1257"></span><span>  </span><span class="hs-comment">-- Executable my-exec</span><span>
</span><span id="line-1258"></span><span>  </span><span class="hs-comment">--     build-depends: MyLibrary</span><span>
</span><span id="line-1259"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-1260"></span><span>  </span><span class="hs-comment">-- We want &quot;build-depends: MyLibrary&quot; always to match the internal library</span><span>
</span><span id="line-1261"></span><span>  </span><span class="hs-comment">-- even if there is a newer installed library &quot;MyLibrary-0.2&quot;.</span><span>
</span><span id="line-1262"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746847"><span class="hs-identifier hs-var">dep_pkgname</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746844"><span class="hs-identifier hs-var">pn</span></a></span><span>
</span><span id="line-1263"></span><span>  </span><span class="hs-keyword">then</span><span>
</span><span id="line-1264"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746848"><span class="hs-identifier hs-var">use_external_internal_deps</span></a></span><span>
</span><span id="line-1265"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">LibraryName -&gt; Either FailedDependency DependencyResolution
</span><a href="#local-6989586621679746843"><span class="hs-identifier hs-var">do_external_internal</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. NonEmptySet a -&gt; [a]
</span><a href="Distribution.Compat.NonEmptySet.html#toList"><span class="hs-identifier hs-var">NES.toList</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptySet LibraryName
</span><a href="#local-6989586621679746845"><span class="hs-identifier hs-var">libs</span></a></span><span>
</span><span id="line-1266"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">LibraryName -&gt; Either FailedDependency DependencyResolution
</span><a href="#local-6989586621679746841"><span class="hs-identifier hs-var">do_internal</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. NonEmptySet a -&gt; [a]
</span><a href="Distribution.Compat.NonEmptySet.html#toList"><span class="hs-identifier hs-var">NES.toList</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptySet LibraryName
</span><a href="#local-6989586621679746845"><span class="hs-identifier hs-var">libs</span></a></span><span>
</span><span id="line-1267"></span><span>  </span><span class="hs-keyword">else</span><span>
</span><span id="line-1268"></span><span>      </span><span class="annot"><span class="annottext">LibraryName -&gt; Either FailedDependency DependencyResolution
</span><a href="#local-6989586621679746840"><span class="hs-identifier hs-var">do_external_external</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. NonEmptySet a -&gt; [a]
</span><a href="Distribution.Compat.NonEmptySet.html#toList"><span class="hs-identifier hs-var">NES.toList</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptySet LibraryName
</span><a href="#local-6989586621679746845"><span class="hs-identifier hs-var">libs</span></a></span><span>
</span><span id="line-1269"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1270"></span><span>    </span><span id="local-6989586621679746844"><span class="annot"><span class="annottext">pn :: PackageName
</span><a href="#local-6989586621679746844"><span class="hs-identifier hs-var hs-var">pn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall pkg. Package pkg =&gt; pkg -&gt; PackageName
</span><a href="Distribution.Package.html#packageName"><span class="hs-identifier hs-var">packageName</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679746852"><span class="hs-identifier hs-var">pkgid</span></a></span><span>
</span><span id="line-1271"></span><span>
</span><span id="line-1272"></span><span>    </span><span class="hs-comment">-- It's an internal library, and we're not per-component build</span><span>
</span><span id="line-1273"></span><span>    </span><span id="local-6989586621679746841"><span class="annot"><span class="annottext">do_internal :: LibraryName -&gt; Either FailedDependency DependencyResolution
</span><a href="#local-6989586621679746841"><span class="hs-identifier hs-var hs-var">do_internal</span></a></span></span><span> </span><span id="local-6989586621679746836"><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679746836"><span class="hs-identifier hs-var">lib</span></a></span></span><span>
</span><span id="line-1274"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#member"><span class="hs-identifier hs-var">Set.member</span></a></span><span> </span><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679746836"><span class="hs-identifier hs-var">lib</span></a></span><span> </span><span class="annot"><span class="annottext">Set LibraryName
</span><a href="#local-6989586621679746851"><span class="hs-identifier hs-var">internalIndex</span></a></span><span>
</span><span id="line-1275"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><a href="../../base-4.16.3.0/src/Data-Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier -&gt; DependencyResolution
</span><a href="Distribution.Simple.Configure.html#InternalDependency"><span class="hs-identifier hs-var">InternalDependency</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PackageName -&gt; Version -&gt; PackageIdentifier
</span><a href="Distribution.Types.PackageId.html#PackageIdentifier"><span class="hs-identifier hs-var">PackageIdentifier</span></a></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746847"><span class="hs-identifier hs-var">dep_pkgname</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall pkg. Package pkg =&gt; pkg -&gt; Version
</span><a href="Distribution.Package.html#packageVersion"><span class="hs-identifier hs-var">packageVersion</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679746852"><span class="hs-identifier hs-var">pkgid</span></a></span><span>
</span><span id="line-1276"></span><span>
</span><span id="line-1277"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1278"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PackageName -&gt; LibraryName -&gt; FailedDependency
</span><a href="Distribution.Simple.Configure.html#DependencyMissingInternal"><span class="hs-identifier hs-var">DependencyMissingInternal</span></a></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746847"><span class="hs-identifier hs-var">dep_pkgname</span></a></span><span> </span><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679746836"><span class="hs-identifier hs-var">lib</span></a></span><span>
</span><span id="line-1279"></span><span>
</span><span id="line-1280"></span><span>    </span><span class="hs-comment">-- We have to look it up externally</span><span>
</span><span id="line-1281"></span><span>    </span><span class="annot"><a href="#local-6989586621679746840"><span class="hs-identifier hs-type">do_external_external</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.LibraryName.html#LibraryName"><span class="hs-identifier hs-type">LibraryName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#FailedDependency"><span class="hs-identifier hs-type">FailedDependency</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#DependencyResolution"><span class="hs-identifier hs-type">DependencyResolution</span></a></span><span>
</span><span id="line-1282"></span><span>    </span><span id="local-6989586621679746840"><span class="annot"><span class="annottext">do_external_external :: LibraryName -&gt; Either FailedDependency DependencyResolution
</span><a href="#local-6989586621679746840"><span class="hs-identifier hs-var hs-var">do_external_external</span></a></span></span><span> </span><span id="local-6989586621679746833"><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679746833"><span class="hs-identifier hs-var">lib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1283"></span><span>      </span><span id="local-6989586621679746832"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746832"><span class="hs-identifier hs-var">ipi</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746847"><span class="hs-identifier hs-var">dep_pkgname</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LibraryName -&gt; ComponentName
</span><a href="Distribution.Types.ComponentName.html#CLibName"><span class="hs-identifier hs-var">CLibName</span></a></span><span> </span><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679746833"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (PackageName, ComponentName) InstalledPackageInfo
</span><a href="#local-6989586621679746849"><span class="hs-identifier hs-var">requiredDepsMap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1284"></span><span>        </span><span class="hs-comment">-- If we know the exact pkg to use, then use it.</span><span>
</span><span id="line-1285"></span><span>        </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679746831"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746831"><span class="hs-identifier hs-var">pkginstance</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><a href="../../base-4.16.3.0/src/Data-Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746831"><span class="hs-identifier hs-var">pkginstance</span></a></span><span>
</span><span id="line-1286"></span><span>        </span><span class="hs-comment">-- Otherwise we just pick an arbitrary instance of the latest version.</span><span>
</span><span id="line-1287"></span><span>        </span><span class="annot"><span class="annottext">Maybe InstalledPackageInfo
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[(Version, [InstalledPackageInfo])] -&gt; Maybe InstalledPackageInfo
</span><a href="#local-6989586621679746830"><span class="hs-identifier hs-var">pickLastIPI</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageIndex
-&gt; PackageName
-&gt; VersionRange
-&gt; [(Version, [InstalledPackageInfo])]
</span><a href="Distribution.Simple.PackageIndex.html#lookupDependency"><span class="hs-identifier hs-var">PackageIndex.lookupDependency</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679746850"><span class="hs-identifier hs-var">installedIndex</span></a></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746847"><span class="hs-identifier hs-var">dep_pkgname</span></a></span><span> </span><span class="annot"><span class="annottext">VersionRange
</span><a href="#local-6989586621679746846"><span class="hs-identifier hs-var">vr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1288"></span><span>          </span><span class="annot"><span class="annottext">Maybe InstalledPackageInfo
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageName -&gt; FailedDependency
</span><a href="Distribution.Simple.Configure.html#DependencyNotExists"><span class="hs-identifier hs-var">DependencyNotExists</span></a></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746847"><span class="hs-identifier hs-var">dep_pkgname</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1289"></span><span>          </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679746829"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746829"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><a href="../../base-4.16.3.0/src/Data-Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746829"><span class="hs-identifier hs-var">pkg</span></a></span><span>
</span><span id="line-1290"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PreExistingComponent -&gt; DependencyResolution
</span><a href="Distribution.Simple.Configure.html#ExternalDependency"><span class="hs-identifier hs-var">ExternalDependency</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo -&gt; PreExistingComponent
</span><a href="Distribution.Backpack.PreExistingComponent.html#ipiToPreExistingComponent"><span class="hs-identifier hs-var">ipiToPreExistingComponent</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746832"><span class="hs-identifier hs-var">ipi</span></a></span><span>
</span><span id="line-1291"></span><span>
</span><span id="line-1292"></span><span>    </span><span class="annot"><a href="#local-6989586621679746843"><span class="hs-identifier hs-type">do_external_internal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.LibraryName.html#LibraryName"><span class="hs-identifier hs-type">LibraryName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#FailedDependency"><span class="hs-identifier hs-type">FailedDependency</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.Configure.html#DependencyResolution"><span class="hs-identifier hs-type">DependencyResolution</span></a></span><span>
</span><span id="line-1293"></span><span>    </span><span id="local-6989586621679746843"><span class="annot"><span class="annottext">do_external_internal :: LibraryName -&gt; Either FailedDependency DependencyResolution
</span><a href="#local-6989586621679746843"><span class="hs-identifier hs-var hs-var">do_external_internal</span></a></span></span><span> </span><span id="local-6989586621679746827"><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679746827"><span class="hs-identifier hs-var">lib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1294"></span><span>      </span><span id="local-6989586621679746826"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746826"><span class="hs-identifier hs-var">ipi</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746847"><span class="hs-identifier hs-var">dep_pkgname</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LibraryName -&gt; ComponentName
</span><a href="Distribution.Types.ComponentName.html#CLibName"><span class="hs-identifier hs-var">CLibName</span></a></span><span> </span><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679746827"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (PackageName, ComponentName) InstalledPackageInfo
</span><a href="#local-6989586621679746849"><span class="hs-identifier hs-var">requiredDepsMap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1295"></span><span>        </span><span class="hs-comment">-- If we know the exact pkg to use, then use it.</span><span>
</span><span id="line-1296"></span><span>        </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679746825"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746825"><span class="hs-identifier hs-var">pkginstance</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><a href="../../base-4.16.3.0/src/Data-Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746825"><span class="hs-identifier hs-var">pkginstance</span></a></span><span>
</span><span id="line-1297"></span><span>        </span><span class="annot"><span class="annottext">Maybe InstalledPackageInfo
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[(Version, [InstalledPackageInfo])] -&gt; Maybe InstalledPackageInfo
</span><a href="#local-6989586621679746830"><span class="hs-identifier hs-var">pickLastIPI</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageIndex
-&gt; PackageName
-&gt; VersionRange
-&gt; LibraryName
-&gt; [(Version, [InstalledPackageInfo])]
</span><a href="Distribution.Simple.PackageIndex.html#lookupInternalDependency"><span class="hs-identifier hs-var">PackageIndex.lookupInternalDependency</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679746850"><span class="hs-identifier hs-var">installedIndex</span></a></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746844"><span class="hs-identifier hs-var">pn</span></a></span><span> </span><span class="annot"><span class="annottext">VersionRange
</span><a href="#local-6989586621679746846"><span class="hs-identifier hs-var">vr</span></a></span><span> </span><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679746827"><span class="hs-identifier hs-var">lib</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1298"></span><span>          </span><span class="hs-comment">-- It's an internal library, being looked up externally</span><span>
</span><span id="line-1299"></span><span>          </span><span class="annot"><span class="annottext">Maybe InstalledPackageInfo
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageName -&gt; LibraryName -&gt; FailedDependency
</span><a href="Distribution.Simple.Configure.html#DependencyMissingInternal"><span class="hs-identifier hs-var">DependencyMissingInternal</span></a></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746847"><span class="hs-identifier hs-var">dep_pkgname</span></a></span><span> </span><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679746827"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1300"></span><span>          </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679746824"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746824"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><a href="../../base-4.16.3.0/src/Data-Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746824"><span class="hs-identifier hs-var">pkg</span></a></span><span>
</span><span id="line-1301"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PreExistingComponent -&gt; DependencyResolution
</span><a href="Distribution.Simple.Configure.html#ExternalDependency"><span class="hs-identifier hs-var">ExternalDependency</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo -&gt; PreExistingComponent
</span><a href="Distribution.Backpack.PreExistingComponent.html#ipiToPreExistingComponent"><span class="hs-identifier hs-var">ipiToPreExistingComponent</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746826"><span class="hs-identifier hs-var">ipi</span></a></span><span>
</span><span id="line-1302"></span><span>
</span><span id="line-1303"></span><span>    </span><span class="annot"><a href="#local-6989586621679746830"><span class="hs-identifier hs-type">pickLastIPI</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.Version.html#Version"><span class="hs-identifier hs-type">Version</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier hs-type">InstalledPackageInfo</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier hs-type">InstalledPackageInfo</span></a></span><span>
</span><span id="line-1304"></span><span>    </span><span id="local-6989586621679746830"><span class="annot"><span class="annottext">pickLastIPI :: [(Version, [InstalledPackageInfo])] -&gt; Maybe InstalledPackageInfo
</span><a href="#local-6989586621679746830"><span class="hs-identifier hs-var hs-var">pickLastIPI</span></a></span></span><span> </span><span id="local-6989586621679746823"><span class="annot"><span class="annottext">[(Version, [InstalledPackageInfo])]
</span><a href="#local-6989586621679746823"><span class="hs-identifier hs-var">pkgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Maybe a
</span><a href="Distribution.Utils.Generic.html#safeHead"><span class="hs-identifier hs-var">safeHead</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. NonEmpty a -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-List-NonEmpty.html#last"><span class="hs-identifier hs-var">last</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Maybe (NonEmpty a)
</span><a href="../../base-4.16.3.0/src/Data-List-NonEmpty.html#nonEmpty"><span class="hs-identifier hs-var">nonEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">[(Version, [InstalledPackageInfo])]
</span><a href="#local-6989586621679746823"><span class="hs-identifier hs-var">pkgs</span></a></span><span>
</span><span id="line-1305"></span><span>
</span><span id="line-1306"></span><span class="annot"><a href="Distribution.Simple.Configure.html#reportSelectedDependencies"><span class="hs-identifier hs-type">reportSelectedDependencies</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-1307"></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Simple.Configure.html#ResolvedDependency"><span class="hs-identifier hs-type">ResolvedDependency</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1308"></span><span id="reportSelectedDependencies"><span class="annot"><span class="annottext">reportSelectedDependencies :: Verbosity -&gt; [ResolvedDependency] -&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#reportSelectedDependencies"><span class="hs-identifier hs-var hs-var">reportSelectedDependencies</span></a></span></span><span> </span><span id="local-6989586621679746818"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746818"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746817"><span class="annot"><span class="annottext">[ResolvedDependency]
</span><a href="#local-6989586621679746817"><span class="hs-identifier hs-var">deps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1309"></span><span>  </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746818"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; [Char]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#unlines"><span class="hs-identifier hs-var">unlines</span></a></span><span>
</span><span id="line-1310"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Dependency &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependency -&gt; Dependency
</span><a href="Distribution.Types.Dependency.html#simplifyDependency"><span class="hs-identifier hs-var">simplifyDependency</span></a></span><span> </span><span class="annot"><span class="annottext">Dependency
</span><a href="#local-6989586621679746815"><span class="hs-identifier hs-var">dep</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1311"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;: using &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679746814"><span class="hs-identifier hs-var">pkgid</span></a></span><span>
</span><span id="line-1312"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679746815"><span class="annot"><span class="annottext">Dependency
</span><a href="#local-6989586621679746815"><span class="hs-identifier hs-var">dep</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746813"><span class="annot"><span class="annottext">DependencyResolution
</span><a href="#local-6989586621679746813"><span class="hs-identifier hs-var">resolution</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[ResolvedDependency]
</span><a href="#local-6989586621679746817"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-1313"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746814"><span class="annot"><span class="annottext">pkgid :: PackageIdentifier
</span><a href="#local-6989586621679746814"><span class="hs-identifier hs-var hs-var">pkgid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DependencyResolution
</span><a href="#local-6989586621679746813"><span class="hs-identifier hs-var">resolution</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1314"></span><span>            </span><span class="annot"><a href="Distribution.Simple.Configure.html#ExternalDependency"><span class="hs-identifier hs-type">ExternalDependency</span></a></span><span> </span><span id="local-6989586621679746810"><span class="annot"><span class="annottext">PreExistingComponent
</span><a href="#local-6989586621679746810"><span class="hs-identifier hs-var">pkg'</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall pkg. Package pkg =&gt; pkg -&gt; PackageIdentifier
</span><a href="Distribution.Package.html#packageId"><span class="hs-identifier hs-var">packageId</span></a></span><span> </span><span class="annot"><span class="annottext">PreExistingComponent
</span><a href="#local-6989586621679746810"><span class="hs-identifier hs-var">pkg'</span></a></span><span>
</span><span id="line-1315"></span><span>            </span><span class="annot"><a href="Distribution.Simple.Configure.html#InternalDependency"><span class="hs-identifier hs-type">InternalDependency</span></a></span><span> </span><span id="local-6989586621679746809"><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679746809"><span class="hs-identifier hs-var">pkgid'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PackageIdentifier
</span><a href="#local-6989586621679746809"><span class="hs-identifier hs-var">pkgid'</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1316"></span><span>
</span><span id="line-1317"></span><span class="annot"><a href="Distribution.Simple.Configure.html#reportFailedDependencies"><span class="hs-identifier hs-type">reportFailedDependencies</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Simple.Configure.html#FailedDependency"><span class="hs-identifier hs-type">FailedDependency</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1318"></span><span id="reportFailedDependencies"><span class="annot"><span class="annottext">reportFailedDependencies :: Verbosity -&gt; [FailedDependency] -&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#reportFailedDependencies"><span class="hs-identifier hs-var hs-var">reportFailedDependencies</span></a></span></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1319"></span><span class="annot"><a href="Distribution.Simple.Configure.html#reportFailedDependencies"><span class="hs-identifier hs-var">reportFailedDependencies</span></a></span><span> </span><span id="local-6989586621679746808"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746808"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746807"><span class="annot"><span class="annottext">[FailedDependency]
</span><a href="#local-6989586621679746807"><span class="hs-identifier hs-var">failed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1320"></span><span>    </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746808"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#intercalate"><span class="hs-identifier hs-var">intercalate</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;\n\n&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">FailedDependency -&gt; [Char]
</span><a href="#local-6989586621679746806"><span class="hs-identifier hs-var">reportFailedDependency</span></a></span><span> </span><span class="annot"><span class="annottext">[FailedDependency]
</span><a href="#local-6989586621679746807"><span class="hs-identifier hs-var">failed</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1321"></span><span>
</span><span id="line-1322"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1323"></span><span>    </span><span id="local-6989586621679746806"><span class="annot"><span class="annottext">reportFailedDependency :: FailedDependency -&gt; [Char]
</span><a href="#local-6989586621679746806"><span class="hs-identifier hs-var hs-var">reportFailedDependency</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.Configure.html#DependencyNotExists"><span class="hs-identifier hs-type">DependencyNotExists</span></a></span><span> </span><span id="local-6989586621679746787"><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746787"><span class="hs-identifier hs-var">pkgname</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1324"></span><span>         </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;there is no version of &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746787"><span class="hs-identifier hs-var">pkgname</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; installed.\n&quot;</span></span><span>
</span><span id="line-1325"></span><span>      </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Perhaps you need to download and install it from\n&quot;</span></span><span>
</span><span id="line-1326"></span><span>      </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="Distribution.Simple.Configure.html#hackageUrl"><span class="hs-identifier hs-var">hackageUrl</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746787"><span class="hs-identifier hs-var">pkgname</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;?&quot;</span></span><span>
</span><span id="line-1327"></span><span>
</span><span id="line-1328"></span><span>    </span><span class="annot"><a href="#local-6989586621679746806"><span class="hs-identifier hs-var">reportFailedDependency</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.Configure.html#DependencyMissingInternal"><span class="hs-identifier hs-type">DependencyMissingInternal</span></a></span><span> </span><span id="local-6989586621679746786"><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746786"><span class="hs-identifier hs-var">pkgname</span></a></span></span><span> </span><span id="local-6989586621679746785"><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679746785"><span class="hs-identifier hs-var">lib</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1329"></span><span>         </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;internal dependency &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LibraryName -&gt; Doc
</span><a href="Distribution.Types.LibraryName.html#prettyLibraryNameComponent"><span class="hs-identifier hs-var">prettyLibraryNameComponent</span></a></span><span> </span><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679746785"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; not installed.\n&quot;</span></span><span>
</span><span id="line-1330"></span><span>      </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Perhaps you need to configure and install it first?\n&quot;</span></span><span>
</span><span id="line-1331"></span><span>      </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;(This library was defined by &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746786"><span class="hs-identifier hs-var">pkgname</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-1332"></span><span>
</span><span id="line-1333"></span><span>    </span><span class="annot"><a href="#local-6989586621679746806"><span class="hs-identifier hs-var">reportFailedDependency</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.Configure.html#DependencyNoVersion"><span class="hs-identifier hs-type">DependencyNoVersion</span></a></span><span> </span><span id="local-6989586621679746783"><span class="annot"><span class="annottext">Dependency
</span><a href="#local-6989586621679746783"><span class="hs-identifier hs-var">dep</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1334"></span><span>        </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;cannot satisfy dependency &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependency -&gt; Dependency
</span><a href="Distribution.Types.Dependency.html#simplifyDependency"><span class="hs-identifier hs-var">simplifyDependency</span></a></span><span> </span><span class="annot"><span class="annottext">Dependency
</span><a href="#local-6989586621679746783"><span class="hs-identifier hs-var">dep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;\n&quot;</span></span><span>
</span><span id="line-1335"></span><span>
</span><span id="line-1336"></span><span class="hs-comment">-- | List all installed packages in the given package databases.</span><span>
</span><span id="line-1337"></span><span class="hs-comment">-- Non-existent package databases do not cause errors, they just get skipped</span><span>
</span><span id="line-1338"></span><span class="hs-comment">-- with a warning and treated as empty ones, since technically they do not</span><span>
</span><span id="line-1339"></span><span class="hs-comment">-- contain any package.</span><span>
</span><span id="line-1340"></span><span class="annot"><a href="Distribution.Simple.Configure.html#getInstalledPackages"><span class="hs-identifier hs-type">getInstalledPackages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span>
</span><span id="line-1341"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDBStack"><span class="hs-identifier hs-type">PackageDBStack</span></a></span><span> </span><span class="hs-comment">-- ^ The stack of package databases.</span><span>
</span><span id="line-1342"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span>
</span><span id="line-1343"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Distribution.Simple.PackageIndex.html#InstalledPackageIndex"><span class="hs-identifier hs-type">InstalledPackageIndex</span></a></span><span>
</span><span id="line-1344"></span><span id="getInstalledPackages"><span class="annot"><span class="annottext">getInstalledPackages :: Verbosity
-&gt; Compiler
-&gt; PackageDBStack
-&gt; ProgramDb
-&gt; IO InstalledPackageIndex
</span><a href="Distribution.Simple.Configure.html#getInstalledPackages"><span class="hs-identifier hs-var hs-var">getInstalledPackages</span></a></span></span><span> </span><span id="local-6989586621679746782"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746782"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746781"><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746781"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span id="local-6989586621679746780"><span class="annot"><span class="annottext">PackageDBStack
</span><a href="#local-6989586621679746780"><span class="hs-identifier hs-var">packageDBs</span></a></span></span><span> </span><span id="local-6989586621679746779"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746779"><span class="hs-identifier hs-var">progdb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1345"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDBStack
</span><a href="#local-6989586621679746780"><span class="hs-identifier hs-var">packageDBs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1346"></span><span>    </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746782"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;No package databases have been specified. If you use &quot;</span></span><span>
</span><span id="line-1347"></span><span>       </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;--package-db=clear, you must follow it with --package-db= &quot;</span></span><span>
</span><span id="line-1348"></span><span>       </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;with 'global', 'user' or a specific file.&quot;</span></span><span>
</span><span id="line-1349"></span><span>
</span><span id="line-1350"></span><span>  </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746782"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Reading installed packages...&quot;</span></span><span>
</span><span id="line-1351"></span><span>  </span><span class="hs-comment">-- do not check empty packagedbs (ghc-pkg would error out)</span><span>
</span><span id="line-1352"></span><span>  </span><span id="local-6989586621679746778"><span class="annot"><span class="annottext">PackageDBStack
</span><a href="#local-6989586621679746778"><span class="hs-identifier hs-var">packageDBs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a.
Applicative m =&gt;
(a -&gt; m Bool) -&gt; [a] -&gt; m [a]
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#filterM"><span class="hs-identifier hs-var">filterM</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDB -&gt; IO Bool
</span><a href="#local-6989586621679746776"><span class="hs-identifier hs-var">packageDBExists</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDBStack
</span><a href="#local-6989586621679746780"><span class="hs-identifier hs-var">packageDBs</span></a></span><span>
</span><span id="line-1353"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; CompilerFlavor
</span><a href="Distribution.Simple.Compiler.html#compilerFlavor"><span class="hs-identifier hs-var">compilerFlavor</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746781"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1354"></span><span>    </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Compiler
-&gt; PackageDBStack
-&gt; ProgramDb
-&gt; IO InstalledPackageIndex
</span><a href="Distribution.Simple.GHC.html#getInstalledPackages"><span class="hs-identifier hs-var">GHC.getInstalledPackages</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746782"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746781"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDBStack
</span><a href="#local-6989586621679746778"><span class="hs-identifier hs-var">packageDBs'</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746779"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1355"></span><span>    </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHCJS"><span class="hs-identifier hs-var">GHCJS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; PackageDBStack -&gt; ProgramDb -&gt; IO InstalledPackageIndex
</span><a href="Distribution.Simple.GHCJS.html#getInstalledPackages"><span class="hs-identifier hs-var">GHCJS.getInstalledPackages</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746782"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDBStack
</span><a href="#local-6989586621679746778"><span class="hs-identifier hs-var">packageDBs'</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746779"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1356"></span><span>    </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#UHC"><span class="hs-identifier hs-var">UHC</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Compiler
-&gt; PackageDBStack
-&gt; ProgramDb
-&gt; IO InstalledPackageIndex
</span><a href="Distribution.Simple.UHC.html#getInstalledPackages"><span class="hs-identifier hs-var">UHC.getInstalledPackages</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746782"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746781"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDBStack
</span><a href="#local-6989586621679746778"><span class="hs-identifier hs-var">packageDBs'</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746779"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1357"></span><span>    </span><span class="annot"><a href="Distribution.Compiler.html#HaskellSuite"><span class="hs-identifier hs-type">HaskellSuite</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1358"></span><span>      </span><span class="annot"><span class="annottext">Verbosity
-&gt; PackageDBStack -&gt; ProgramDb -&gt; IO InstalledPackageIndex
</span><a href="Distribution.Simple.HaskellSuite.html#getInstalledPackages"><span class="hs-identifier hs-var">HaskellSuite.getInstalledPackages</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746782"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDBStack
</span><a href="#local-6989586621679746778"><span class="hs-identifier hs-var">packageDBs'</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746779"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1359"></span><span>    </span><span id="local-6989586621679746769"><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="#local-6989586621679746769"><span class="hs-identifier hs-var">flv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746782"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;don't know how to find the installed packages for &quot;</span></span><span>
</span><span id="line-1360"></span><span>              </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="#local-6989586621679746769"><span class="hs-identifier hs-var">flv</span></a></span><span>
</span><span id="line-1361"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1362"></span><span>    </span><span id="local-6989586621679746776"><span class="annot"><span class="annottext">packageDBExists :: PackageDB -&gt; IO Bool
</span><a href="#local-6989586621679746776"><span class="hs-identifier hs-var hs-var">packageDBExists</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.Compiler.html#SpecificPackageDB"><span class="hs-identifier hs-type">SpecificPackageDB</span></a></span><span> </span><span id="local-6989586621679746755"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746755"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1363"></span><span>      </span><span id="local-6989586621679746754"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746754"><span class="hs-identifier hs-var">exists</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; IO Bool
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#doesPathExist"><span class="hs-identifier hs-var">doesPathExist</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746755"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-1364"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746754"><span class="hs-identifier hs-var">exists</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1365"></span><span>        </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746782"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Package db &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746755"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; does not exist yet&quot;</span></span><span>
</span><span id="line-1366"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746754"><span class="hs-identifier hs-var">exists</span></a></span><span>
</span><span id="line-1367"></span><span>    </span><span class="hs-comment">-- Checking the user and global package dbs is more complicated and needs</span><span>
</span><span id="line-1368"></span><span>    </span><span class="hs-comment">-- way more data. Also ghc-pkg won't error out unless the user/global</span><span>
</span><span id="line-1369"></span><span>    </span><span class="hs-comment">-- pkgdb is overridden with an empty one, so we just don't check for them.</span><span>
</span><span id="line-1370"></span><span>    </span><span class="annot"><a href="#local-6989586621679746776"><span class="hs-identifier hs-var">packageDBExists</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#UserPackageDB"><span class="hs-identifier hs-var">UserPackageDB</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1371"></span><span>    </span><span class="annot"><a href="#local-6989586621679746776"><span class="hs-identifier hs-var">packageDBExists</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#GlobalPackageDB"><span class="hs-identifier hs-var">GlobalPackageDB</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1372"></span><span>
</span><span id="line-1373"></span><span class="hs-comment">-- | Like 'getInstalledPackages', but for a single package DB.</span><span>
</span><span id="line-1374"></span><span class="hs-comment">--</span><span>
</span><span id="line-1375"></span><span class="hs-comment">-- NB: Why isn't this always a fall through to 'getInstalledPackages'?</span><span>
</span><span id="line-1376"></span><span class="hs-comment">-- That is because 'getInstalledPackages' performs some sanity checks</span><span>
</span><span id="line-1377"></span><span class="hs-comment">-- on the package database stack in question.  However, when sandboxes</span><span>
</span><span id="line-1378"></span><span class="hs-comment">-- are involved these sanity checks are not desirable.</span><span>
</span><span id="line-1379"></span><span class="annot"><a href="Distribution.Simple.Configure.html#getPackageDBContents"><span class="hs-identifier hs-type">getPackageDBContents</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span>
</span><span id="line-1380"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDB"><span class="hs-identifier hs-type">PackageDB</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span>
</span><span id="line-1381"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Distribution.Simple.PackageIndex.html#InstalledPackageIndex"><span class="hs-identifier hs-type">InstalledPackageIndex</span></a></span><span>
</span><span id="line-1382"></span><span id="getPackageDBContents"><span class="annot"><span class="annottext">getPackageDBContents :: Verbosity
-&gt; Compiler -&gt; PackageDB -&gt; ProgramDb -&gt; IO InstalledPackageIndex
</span><a href="Distribution.Simple.Configure.html#getPackageDBContents"><span class="hs-identifier hs-var hs-var">getPackageDBContents</span></a></span></span><span> </span><span id="local-6989586621679746751"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746751"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746750"><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746750"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span id="local-6989586621679746749"><span class="annot"><span class="annottext">PackageDB
</span><a href="#local-6989586621679746749"><span class="hs-identifier hs-var">packageDB</span></a></span></span><span> </span><span id="local-6989586621679746748"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746748"><span class="hs-identifier hs-var">progdb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1383"></span><span>  </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746751"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Reading installed packages...&quot;</span></span><span>
</span><span id="line-1384"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; CompilerFlavor
</span><a href="Distribution.Simple.Compiler.html#compilerFlavor"><span class="hs-identifier hs-var">compilerFlavor</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746750"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1385"></span><span>    </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; PackageDB -&gt; ProgramDb -&gt; IO InstalledPackageIndex
</span><a href="Distribution.Simple.GHC.html#getPackageDBContents"><span class="hs-identifier hs-var">GHC.getPackageDBContents</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746751"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDB
</span><a href="#local-6989586621679746749"><span class="hs-identifier hs-var">packageDB</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746748"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1386"></span><span>    </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHCJS"><span class="hs-identifier hs-var">GHCJS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; PackageDB -&gt; ProgramDb -&gt; IO InstalledPackageIndex
</span><a href="Distribution.Simple.GHCJS.html#getPackageDBContents"><span class="hs-identifier hs-var">GHCJS.getPackageDBContents</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746751"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDB
</span><a href="#local-6989586621679746749"><span class="hs-identifier hs-var">packageDB</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746748"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1387"></span><span>    </span><span class="hs-comment">-- For other compilers, try to fall back on 'getInstalledPackages'.</span><span>
</span><span id="line-1388"></span><span>    </span><span class="annot"><span class="annottext">CompilerFlavor
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Compiler
-&gt; PackageDBStack
-&gt; ProgramDb
-&gt; IO InstalledPackageIndex
</span><a href="Distribution.Simple.Configure.html#getInstalledPackages"><span class="hs-identifier hs-var">getInstalledPackages</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746751"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746750"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PackageDB
</span><a href="#local-6989586621679746749"><span class="hs-identifier hs-var">packageDB</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746748"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1389"></span><span>
</span><span id="line-1390"></span><span>
</span><span id="line-1391"></span><span class="hs-comment">-- | A set of files (or directories) that can be monitored to detect when</span><span>
</span><span id="line-1392"></span><span class="hs-comment">-- there might have been a change in the installed packages.</span><span>
</span><span id="line-1393"></span><span class="hs-comment">--</span><span>
</span><span id="line-1394"></span><span class="annot"><a href="Distribution.Simple.Configure.html#getInstalledPackagesMonitorFiles"><span class="hs-identifier hs-type">getInstalledPackagesMonitorFiles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span>
</span><span id="line-1395"></span><span>                                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDBStack"><span class="hs-identifier hs-type">PackageDBStack</span></a></span><span>
</span><span id="line-1396"></span><span>                                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span>
</span><span id="line-1397"></span><span>                                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1398"></span><span id="getInstalledPackagesMonitorFiles"><span class="annot"><span class="annottext">getInstalledPackagesMonitorFiles :: Verbosity
-&gt; Compiler
-&gt; PackageDBStack
-&gt; ProgramDb
-&gt; Platform
-&gt; IO [[Char]]
</span><a href="Distribution.Simple.Configure.html#getInstalledPackagesMonitorFiles"><span class="hs-identifier hs-var hs-var">getInstalledPackagesMonitorFiles</span></a></span></span><span> </span><span id="local-6989586621679746745"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746745"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746744"><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746744"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span id="local-6989586621679746743"><span class="annot"><span class="annottext">PackageDBStack
</span><a href="#local-6989586621679746743"><span class="hs-identifier hs-var">packageDBs</span></a></span></span><span> </span><span id="local-6989586621679746742"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746742"><span class="hs-identifier hs-var">progdb</span></a></span></span><span> </span><span id="local-6989586621679746741"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679746741"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1399"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; CompilerFlavor
</span><a href="Distribution.Simple.Compiler.html#compilerFlavor"><span class="hs-identifier hs-var">compilerFlavor</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746744"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1400"></span><span>    </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; Platform -&gt; ProgramDb -&gt; PackageDBStack -&gt; IO [[Char]]
</span><a href="Distribution.Simple.GHC.html#getInstalledPackagesMonitorFiles"><span class="hs-identifier hs-var">GHC.getInstalledPackagesMonitorFiles</span></a></span><span>
</span><span id="line-1401"></span><span>               </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746745"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679746741"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746742"><span class="hs-identifier hs-var">progdb</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDBStack
</span><a href="#local-6989586621679746743"><span class="hs-identifier hs-var">packageDBs</span></a></span><span>
</span><span id="line-1402"></span><span>    </span><span id="local-6989586621679746739"><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="#local-6989586621679746739"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1403"></span><span>      </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746745"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;don't know how to find change monitoring files for &quot;</span></span><span>
</span><span id="line-1404"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;the installed package databases for &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="#local-6989586621679746739"><span class="hs-identifier hs-var">other</span></a></span><span>
</span><span id="line-1405"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1406"></span><span>
</span><span id="line-1407"></span><span class="hs-comment">-- | The user interface specifies the package dbs to use with a combination of</span><span>
</span><span id="line-1408"></span><span class="hs-comment">-- @--global@, @--user@ and @--package-db=global|user|clear|$file@.</span><span>
</span><span id="line-1409"></span><span class="hs-comment">-- This function combines the global/user flag and interprets the package-db</span><span>
</span><span id="line-1410"></span><span class="hs-comment">-- flag into a single package db stack.</span><span>
</span><span id="line-1411"></span><span class="hs-comment">--</span><span>
</span><span id="line-1412"></span><span class="annot"><a href="Distribution.Simple.Configure.html#interpretPackageDbFlags"><span class="hs-identifier hs-type">interpretPackageDbFlags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDB"><span class="hs-identifier hs-type">PackageDB</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDBStack"><span class="hs-identifier hs-type">PackageDBStack</span></a></span><span>
</span><span id="line-1413"></span><span id="interpretPackageDbFlags"><span class="annot"><span class="annottext">interpretPackageDbFlags :: Bool -&gt; [Maybe PackageDB] -&gt; PackageDBStack
</span><a href="Distribution.Simple.Configure.html#interpretPackageDbFlags"><span class="hs-identifier hs-var hs-var">interpretPackageDbFlags</span></a></span></span><span> </span><span id="local-6989586621679746738"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746738"><span class="hs-identifier hs-var">userInstall</span></a></span></span><span> </span><span id="local-6989586621679746737"><span class="annot"><span class="annottext">[Maybe PackageDB]
</span><a href="#local-6989586621679746737"><span class="hs-identifier hs-var">specificDBs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1414"></span><span>    </span><span class="annot"><span class="annottext">forall {a}. [a] -&gt; [Maybe a] -&gt; [a]
</span><a href="#local-6989586621679746736"><span class="hs-identifier hs-var">extra</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDBStack
</span><a href="#local-6989586621679746735"><span class="hs-identifier hs-var">initialStack</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe PackageDB]
</span><a href="#local-6989586621679746737"><span class="hs-identifier hs-var">specificDBs</span></a></span><span>
</span><span id="line-1415"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1416"></span><span>    </span><span id="local-6989586621679746735"><span class="annot"><span class="annottext">initialStack :: PackageDBStack
</span><a href="#local-6989586621679746735"><span class="hs-identifier hs-var hs-var">initialStack</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746738"><span class="hs-identifier hs-var">userInstall</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#GlobalPackageDB"><span class="hs-identifier hs-var">GlobalPackageDB</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#UserPackageDB"><span class="hs-identifier hs-var">UserPackageDB</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1417"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#GlobalPackageDB"><span class="hs-identifier hs-var">GlobalPackageDB</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1418"></span><span>
</span><span id="line-1419"></span><span>    </span><span id="local-6989586621679746736"><span class="annot"><span class="annottext">extra :: [a] -&gt; [Maybe a] -&gt; [a]
</span><a href="#local-6989586621679746736"><span class="hs-identifier hs-var hs-var">extra</span></a></span></span><span> </span><span id="local-6989586621679746734"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679746734"><span class="hs-identifier hs-var">dbs'</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679746734"><span class="hs-identifier hs-var">dbs'</span></a></span><span>
</span><span id="line-1420"></span><span>    </span><span class="annot"><a href="#local-6989586621679746736"><span class="hs-identifier hs-var">extra</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679746733"><span class="annot"><span class="annottext">[Maybe a]
</span><a href="#local-6989586621679746733"><span class="hs-identifier hs-var">dbs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [Maybe a] -&gt; [a]
</span><a href="#local-6989586621679746736"><span class="hs-identifier hs-var">extra</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>             </span><span class="annot"><span class="annottext">[Maybe a]
</span><a href="#local-6989586621679746733"><span class="hs-identifier hs-var">dbs</span></a></span><span>
</span><span id="line-1421"></span><span>    </span><span class="annot"><a href="#local-6989586621679746736"><span class="hs-identifier hs-var">extra</span></a></span><span> </span><span id="local-6989586621679746732"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679746732"><span class="hs-identifier hs-var">dbs'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679746731"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679746731"><span class="hs-identifier hs-var">db</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679746730"><span class="annot"><span class="annottext">[Maybe a]
</span><a href="#local-6989586621679746730"><span class="hs-identifier hs-var">dbs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [Maybe a] -&gt; [a]
</span><a href="#local-6989586621679746736"><span class="hs-identifier hs-var">extra</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679746732"><span class="hs-identifier hs-var">dbs'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679746731"><span class="hs-identifier hs-var">db</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Maybe a]
</span><a href="#local-6989586621679746730"><span class="hs-identifier hs-var">dbs</span></a></span><span>
</span><span id="line-1422"></span><span>
</span><span id="line-1423"></span><span class="hs-comment">-- We are given both --constraint=&quot;foo &lt; 2.0&quot; style constraints and also</span><span>
</span><span id="line-1424"></span><span class="hs-comment">-- specific packages to pick via --dependency=&quot;foo=foo-2.0-177d5cdf20962d0581&quot;.</span><span>
</span><span id="line-1425"></span><span class="hs-comment">--</span><span>
</span><span id="line-1426"></span><span class="hs-comment">-- When finalising the package we have to take into account the specific</span><span>
</span><span id="line-1427"></span><span class="hs-comment">-- installed deps we've been given, and the finalise function expects</span><span>
</span><span id="line-1428"></span><span class="hs-comment">-- constraints, so we have to translate these deps into version constraints.</span><span>
</span><span id="line-1429"></span><span class="hs-comment">--</span><span>
</span><span id="line-1430"></span><span class="hs-comment">-- But after finalising we then have to make sure we pick the right specific</span><span>
</span><span id="line-1431"></span><span class="hs-comment">-- deps in the end. So we still need to remember which installed packages to</span><span>
</span><span id="line-1432"></span><span class="hs-comment">-- pick.</span><span>
</span><span id="line-1433"></span><span class="annot"><a href="Distribution.Simple.Configure.html#combinedConstraints"><span class="hs-identifier hs-type">combinedConstraints</span></a></span><span>
</span><span id="line-1434"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Types.PackageVersionConstraint.html#PackageVersionConstraint"><span class="hs-identifier hs-type">PackageVersionConstraint</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1435"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Types.GivenComponent.html#GivenComponent"><span class="hs-identifier hs-type">GivenComponent</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1436"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.PackageIndex.html#InstalledPackageIndex"><span class="hs-identifier hs-type">InstalledPackageIndex</span></a></span><span>
</span><span id="line-1437"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Types.PackageVersionConstraint.html#PackageVersionConstraint"><span class="hs-identifier hs-type">PackageVersionConstraint</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1438"></span><span>                     </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.PackageName.html#PackageName"><span class="hs-identifier hs-type">PackageName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentName.html#ComponentName"><span class="hs-identifier hs-type">ComponentName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier hs-type">InstalledPackageInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1439"></span><span id="combinedConstraints"><span class="annot"><span class="annottext">combinedConstraints :: [PackageVersionConstraint]
-&gt; [GivenComponent]
-&gt; InstalledPackageIndex
-&gt; Either
     [Char]
     ([PackageVersionConstraint],
      Map (PackageName, ComponentName) InstalledPackageInfo)
</span><a href="Distribution.Simple.Configure.html#combinedConstraints"><span class="hs-identifier hs-var hs-var">combinedConstraints</span></a></span></span><span> </span><span id="local-6989586621679746729"><span class="annot"><span class="annottext">[PackageVersionConstraint]
</span><a href="#local-6989586621679746729"><span class="hs-identifier hs-var">constraints</span></a></span></span><span> </span><span id="local-6989586621679746728"><span class="annot"><span class="annottext">[GivenComponent]
</span><a href="#local-6989586621679746728"><span class="hs-identifier hs-var">dependencies</span></a></span></span><span> </span><span id="local-6989586621679746727"><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679746727"><span class="hs-identifier hs-var">installedPackages</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1440"></span><span>
</span><span id="line-1441"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[(PackageName, ComponentName, ComponentId)]
</span><a href="#local-6989586621679746726"><span class="hs-identifier hs-var">badComponentIds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1442"></span><span>      </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; [Char]
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#render"><span class="hs-identifier hs-var">render</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;The following package dependencies were requested&quot;</span></span><span>
</span><span id="line-1443"></span><span>         </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#%24%2B%24"><span class="hs-operator hs-var">$+$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {a} {a}.
(Pretty a, Pretty a) =&gt;
[(a, ComponentName, a)] -&gt; Doc
</span><a href="#local-6989586621679746725"><span class="hs-identifier hs-var">dispDependencies</span></a></span><span> </span><span class="annot"><span class="annottext">[(PackageName, ComponentName, ComponentId)]
</span><a href="#local-6989586621679746726"><span class="hs-identifier hs-var">badComponentIds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1444"></span><span>         </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#%24%2B%24"><span class="hs-operator hs-var">$+$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;however the given installed package instance does not exist.&quot;</span></span><span>
</span><span id="line-1445"></span><span>
</span><span id="line-1446"></span><span>    </span><span class="hs-comment">--TODO: we don't check that all dependencies are used!</span><span>
</span><span id="line-1447"></span><span>
</span><span id="line-1448"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[PackageVersionConstraint]
</span><a href="#local-6989586621679746724"><span class="hs-identifier hs-var">allConstraints</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map (PackageName, ComponentName) InstalledPackageInfo
</span><a href="#local-6989586621679746723"><span class="hs-identifier hs-var">idConstraintMap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1449"></span><span>
</span><span id="line-1450"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1451"></span><span>    </span><span class="annot"><a href="#local-6989586621679746724"><span class="hs-identifier hs-type">allConstraints</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Types.PackageVersionConstraint.html#PackageVersionConstraint"><span class="hs-identifier hs-type">PackageVersionConstraint</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1452"></span><span>    </span><span id="local-6989586621679746724"><span class="annot"><span class="annottext">allConstraints :: [PackageVersionConstraint]
</span><a href="#local-6989586621679746724"><span class="hs-identifier hs-var hs-var">allConstraints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PackageVersionConstraint]
</span><a href="#local-6989586621679746729"><span class="hs-identifier hs-var">constraints</span></a></span><span>
</span><span id="line-1453"></span><span>                  </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">PackageIdentifier -&gt; PackageVersionConstraint
</span><a href="Distribution.Types.PackageVersionConstraint.html#thisPackageVersionConstraint"><span class="hs-identifier hs-var">thisPackageVersionConstraint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pkg. Package pkg =&gt; pkg -&gt; PackageIdentifier
</span><a href="Distribution.Package.html#packageId"><span class="hs-identifier hs-var">packageId</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746721"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1454"></span><span>                     </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageName
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ComponentName
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ComponentId
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679746721"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746721"><span class="hs-identifier hs-var">pkg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(PackageName, ComponentName, ComponentId,
  Maybe InstalledPackageInfo)]
</span><a href="#local-6989586621679746720"><span class="hs-identifier hs-var">dependenciesPkgInfo</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1455"></span><span>
</span><span id="line-1456"></span><span>    </span><span class="annot"><a href="#local-6989586621679746723"><span class="hs-identifier hs-type">idConstraintMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.PackageName.html#PackageName"><span class="hs-identifier hs-type">PackageName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentName.html#ComponentName"><span class="hs-identifier hs-type">ComponentName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier hs-type">InstalledPackageInfo</span></a></span><span>
</span><span id="line-1457"></span><span>    </span><span id="local-6989586621679746723"><span class="annot"><span class="annottext">idConstraintMap :: Map (PackageName, ComponentName) InstalledPackageInfo
</span><a href="#local-6989586621679746723"><span class="hs-identifier hs-var hs-var">idConstraintMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#fromList"><span class="hs-identifier hs-var">Map.fromList</span></a></span><span>
</span><span id="line-1458"></span><span>                        </span><span class="hs-comment">-- NB: do NOT use the packageName from</span><span>
</span><span id="line-1459"></span><span>                        </span><span class="hs-comment">-- dependenciesPkgInfo!</span><span>
</span><span id="line-1460"></span><span>                        </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746718"><span class="hs-identifier hs-var">pn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ComponentName
</span><a href="#local-6989586621679746717"><span class="hs-identifier hs-var">cname</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746716"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1461"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679746718"><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746718"><span class="hs-identifier hs-var">pn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746717"><span class="annot"><span class="annottext">ComponentName
</span><a href="#local-6989586621679746717"><span class="hs-identifier hs-var">cname</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ComponentId
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679746716"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746716"><span class="hs-identifier hs-var">pkg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(PackageName, ComponentName, ComponentId,
  Maybe InstalledPackageInfo)]
</span><a href="#local-6989586621679746720"><span class="hs-identifier hs-var">dependenciesPkgInfo</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1462"></span><span>
</span><span id="line-1463"></span><span>    </span><span class="hs-comment">-- The dependencies along with the installed package info, if it exists</span><span>
</span><span id="line-1464"></span><span>    </span><span class="annot"><a href="#local-6989586621679746720"><span class="hs-identifier hs-type">dependenciesPkgInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.PackageName.html#PackageName"><span class="hs-identifier hs-type">PackageName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentName.html#ComponentName"><span class="hs-identifier hs-type">ComponentName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentId.html#ComponentId"><span class="hs-identifier hs-type">ComponentId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1465"></span><span>                             </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier hs-type">InstalledPackageInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1466"></span><span>    </span><span id="local-6989586621679746720"><span class="annot"><span class="annottext">dependenciesPkgInfo :: [(PackageName, ComponentName, ComponentId,
  Maybe InstalledPackageInfo)]
</span><a href="#local-6989586621679746720"><span class="hs-identifier hs-var hs-var">dependenciesPkgInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1467"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746715"><span class="hs-identifier hs-var">pkgname</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LibraryName -&gt; ComponentName
</span><a href="Distribution.Types.ComponentName.html#CLibName"><span class="hs-identifier hs-var">CLibName</span></a></span><span> </span><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679746714"><span class="hs-identifier hs-var">lname</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ComponentId
</span><a href="#local-6989586621679746713"><span class="hs-identifier hs-var">cid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe InstalledPackageInfo
</span><a href="#local-6989586621679746712"><span class="hs-identifier hs-var">mpkg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1468"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Distribution.Types.GivenComponent.html#GivenComponent"><span class="hs-identifier hs-type">GivenComponent</span></a></span><span> </span><span id="local-6989586621679746715"><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746715"><span class="hs-identifier hs-var">pkgname</span></a></span></span><span> </span><span id="local-6989586621679746714"><span class="annot"><span class="annottext">LibraryName
</span><a href="#local-6989586621679746714"><span class="hs-identifier hs-var">lname</span></a></span></span><span> </span><span id="local-6989586621679746713"><span class="annot"><span class="annottext">ComponentId
</span><a href="#local-6989586621679746713"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GivenComponent]
</span><a href="#local-6989586621679746728"><span class="hs-identifier hs-var">dependencies</span></a></span><span>
</span><span id="line-1469"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746712"><span class="annot"><span class="annottext">mpkg :: Maybe InstalledPackageInfo
</span><a href="#local-6989586621679746712"><span class="hs-identifier hs-var hs-var">mpkg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. PackageIndex a -&gt; ComponentId -&gt; Maybe a
</span><a href="Distribution.Simple.PackageIndex.html#lookupComponentId"><span class="hs-identifier hs-var">PackageIndex.lookupComponentId</span></a></span><span>
</span><span id="line-1470"></span><span>                     </span><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679746727"><span class="hs-identifier hs-var">installedPackages</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentId
</span><a href="#local-6989586621679746713"><span class="hs-identifier hs-var">cid</span></a></span><span>
</span><span id="line-1471"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-1472"></span><span>
</span><span id="line-1473"></span><span>    </span><span class="hs-comment">-- If we looked up a package specified by an installed package id</span><span>
</span><span id="line-1474"></span><span>    </span><span class="hs-comment">-- (i.e. someone has written a hash) and didn't find it then it's</span><span>
</span><span id="line-1475"></span><span>    </span><span class="hs-comment">-- an error.</span><span>
</span><span id="line-1476"></span><span>    </span><span id="local-6989586621679746726"><span class="annot"><span class="annottext">badComponentIds :: [(PackageName, ComponentName, ComponentId)]
</span><a href="#local-6989586621679746726"><span class="hs-identifier hs-var hs-var">badComponentIds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1477"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746709"><span class="hs-identifier hs-var">pkgname</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ComponentName
</span><a href="#local-6989586621679746708"><span class="hs-identifier hs-var">cname</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ComponentId
</span><a href="#local-6989586621679746707"><span class="hs-identifier hs-var">cid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1478"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679746709"><span class="annot"><span class="annottext">PackageName
</span><a href="#local-6989586621679746709"><span class="hs-identifier hs-var">pkgname</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746708"><span class="annot"><span class="annottext">ComponentName
</span><a href="#local-6989586621679746708"><span class="hs-identifier hs-var">cname</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746707"><span class="annot"><span class="annottext">ComponentId
</span><a href="#local-6989586621679746707"><span class="hs-identifier hs-var">cid</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe InstalledPackageInfo
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(PackageName, ComponentName, ComponentId,
  Maybe InstalledPackageInfo)]
</span><a href="#local-6989586621679746720"><span class="hs-identifier hs-var">dependenciesPkgInfo</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1479"></span><span>
</span><span id="line-1480"></span><span>    </span><span id="local-6989586621679746725"><span class="annot"><span class="annottext">dispDependencies :: [(a, ComponentName, a)] -&gt; Doc
</span><a href="#local-6989586621679746725"><span class="hs-identifier hs-var hs-var">dispDependencies</span></a></span></span><span> </span><span id="local-6989586621679746695"><span class="annot"><span class="annottext">[(a, ComponentName, a)]
</span><a href="#local-6989586621679746695"><span class="hs-identifier hs-var">deps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1481"></span><span>      </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span>      </span><span class="annot"><span class="annottext">[Char] -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;--dependency=&quot;</span></span><span>
</span><span id="line-1482"></span><span>             </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="Distribution.Compat.Prelude.html#%3C%3C%3E%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span>
</span><span id="line-1483"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; Doc
</span><a href="Distribution.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679746693"><span class="hs-identifier hs-var">pkgname</span></a></span><span>
</span><span id="line-1484"></span><span>                     </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="Distribution.Compat.Prelude.html#%3C%3C%3E%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;&gt;</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ComponentName
</span><a href="#local-6989586621679746692"><span class="hs-identifier hs-var">cname</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1485"></span><span>                            </span><span class="annot"><a href="Distribution.Types.ComponentName.html#CLibName"><span class="hs-identifier hs-type">CLibName</span></a></span><span> </span><span class="annot"><span class="annottext">LibraryName
</span><a href="Distribution.Types.LibraryName.html#LMainLibName"><span class="hs-identifier hs-var">LMainLibName</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1486"></span><span>                            </span><span class="annot"><a href="Distribution.Types.ComponentName.html#CLibName"><span class="hs-identifier hs-type">CLibName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.LibraryName.html#LSubLibName"><span class="hs-identifier hs-type">LSubLibName</span></a></span><span> </span><span id="local-6989586621679746690"><span class="annot"><span class="annottext">UnqualComponentName
</span><a href="#local-6989586621679746690"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;:&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="Distribution.Compat.Prelude.html#%3C%3C%3E%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; Doc
</span><a href="Distribution.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">UnqualComponentName
</span><a href="#local-6989586621679746690"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1487"></span><span>                            </span><span class="annot"><span class="annottext">ComponentName
</span><span class="hs-identifier">_</span></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;:&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="Distribution.Compat.Prelude.html#%3C%3C%3E%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; Doc
</span><a href="Distribution.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentName
</span><a href="#local-6989586621679746692"><span class="hs-identifier hs-var">cname</span></a></span><span>
</span><span id="line-1488"></span><span>                     </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="Distribution.Compat.Prelude.html#%3C%3C%3E%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Doc
</span><a href="../../pretty-1.1.3.6/src/Text-PrettyPrint-HughesPJ.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'='</span></span><span>
</span><span id="line-1489"></span><span>                     </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><a href="Distribution.Compat.Prelude.html#%3C%3C%3E%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; Doc
</span><a href="Distribution.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679746689"><span class="hs-identifier hs-var">cid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1490"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679746693"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679746693"><span class="hs-identifier hs-var">pkgname</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746692"><span class="annot"><span class="annottext">ComponentName
</span><a href="#local-6989586621679746692"><span class="hs-identifier hs-var">cname</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746689"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679746689"><span class="hs-identifier hs-var">cid</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(a, ComponentName, a)]
</span><a href="#local-6989586621679746695"><span class="hs-identifier hs-var">deps</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1491"></span><span>
</span><span id="line-1492"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-1493"></span><span class="hs-comment">-- Configuring program dependencies</span><span>
</span><span id="line-1494"></span><span>
</span><span id="line-1495"></span><span class="annot"><a href="Distribution.Simple.Configure.html#configureRequiredPrograms"><span class="hs-identifier hs-type">configureRequiredPrograms</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Types.LegacyExeDependency.html#LegacyExeDependency"><span class="hs-identifier hs-type">LegacyExeDependency</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span>
</span><span id="line-1496"></span><span>                             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span>
</span><span id="line-1497"></span><span id="configureRequiredPrograms"><span class="annot"><span class="annottext">configureRequiredPrograms :: Verbosity -&gt; [LegacyExeDependency] -&gt; ProgramDb -&gt; IO ProgramDb
</span><a href="Distribution.Simple.Configure.html#configureRequiredPrograms"><span class="hs-identifier hs-var hs-var">configureRequiredPrograms</span></a></span></span><span> </span><span id="local-6989586621679746688"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746688"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746687"><span class="annot"><span class="annottext">[LegacyExeDependency]
</span><a href="#local-6989586621679746687"><span class="hs-identifier hs-var">deps</span></a></span></span><span> </span><span id="local-6989586621679746686"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746686"><span class="hs-identifier hs-var">progdb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1498"></span><span>  </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#foldM"><span class="hs-identifier hs-var">foldM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Verbosity -&gt; ProgramDb -&gt; LegacyExeDependency -&gt; IO ProgramDb
</span><a href="Distribution.Simple.Configure.html#configureRequiredProgram"><span class="hs-identifier hs-var">configureRequiredProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746688"><span class="hs-identifier hs-var">verbosity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746686"><span class="hs-identifier hs-var">progdb</span></a></span><span> </span><span class="annot"><span class="annottext">[LegacyExeDependency]
</span><a href="#local-6989586621679746687"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-1499"></span><span>
</span><span id="line-1500"></span><span class="hs-comment">-- | Configure a required program, ensuring that it exists in the PATH</span><span>
</span><span id="line-1501"></span><span class="hs-comment">-- (or where the user has specified the program must live) and making it</span><span>
</span><span id="line-1502"></span><span class="hs-comment">-- available for use via the 'ProgramDb' interface.  If the program is</span><span>
</span><span id="line-1503"></span><span class="hs-comment">-- known (exists in the input 'ProgramDb'), we will make sure that the</span><span>
</span><span id="line-1504"></span><span class="hs-comment">-- program matches the required version; otherwise we will accept</span><span>
</span><span id="line-1505"></span><span class="hs-comment">-- any version of the program and assume that it is a simpleProgram.</span><span>
</span><span id="line-1506"></span><span class="annot"><a href="Distribution.Simple.Configure.html#configureRequiredProgram"><span class="hs-identifier hs-type">configureRequiredProgram</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LegacyExeDependency.html#LegacyExeDependency"><span class="hs-identifier hs-type">LegacyExeDependency</span></a></span><span>
</span><span id="line-1507"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span>
</span><span id="line-1508"></span><span id="configureRequiredProgram"><span class="annot"><span class="annottext">configureRequiredProgram :: Verbosity -&gt; ProgramDb -&gt; LegacyExeDependency -&gt; IO ProgramDb
</span><a href="Distribution.Simple.Configure.html#configureRequiredProgram"><span class="hs-identifier hs-var hs-var">configureRequiredProgram</span></a></span></span><span> </span><span id="local-6989586621679746683"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746683"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746682"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746682"><span class="hs-identifier hs-var">progdb</span></a></span></span><span>
</span><span id="line-1509"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.LegacyExeDependency.html#LegacyExeDependency"><span class="hs-identifier hs-type">LegacyExeDependency</span></a></span><span> </span><span id="local-6989586621679746681"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746681"><span class="hs-identifier hs-var">progName</span></a></span></span><span> </span><span id="local-6989586621679746680"><span class="annot"><span class="annottext">VersionRange
</span><a href="#local-6989586621679746680"><span class="hs-identifier hs-var">verRange</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1510"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ProgramDb -&gt; Maybe Program
</span><a href="Distribution.Simple.Program.Db.html#lookupKnownProgram"><span class="hs-identifier hs-var">lookupKnownProgram</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746681"><span class="hs-identifier hs-var">progName</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746682"><span class="hs-identifier hs-var">progdb</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1511"></span><span>    </span><span class="annot"><span class="annottext">Maybe Program
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1512"></span><span>      </span><span class="hs-comment">-- Try to configure it as a 'simpleProgram' automatically</span><span>
</span><span id="line-1513"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1514"></span><span>      </span><span class="hs-comment">-- There's a bit of a story behind this line.  In old versions</span><span>
</span><span id="line-1515"></span><span>      </span><span class="hs-comment">-- of Cabal, there were only internal build-tools dependencies.  So the</span><span>
</span><span id="line-1516"></span><span>      </span><span class="hs-comment">-- behavior in this case was:</span><span>
</span><span id="line-1517"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1518"></span><span>      </span><span class="hs-comment">--    - If a build-tool dependency was internal, don't do</span><span>
</span><span id="line-1519"></span><span>      </span><span class="hs-comment">--      any checking.</span><span>
</span><span id="line-1520"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1521"></span><span>      </span><span class="hs-comment">--    - If it was external, call 'configureRequiredProgram' to</span><span>
</span><span id="line-1522"></span><span>      </span><span class="hs-comment">--      &quot;configure&quot; the executable.  In particular, if</span><span>
</span><span id="line-1523"></span><span>      </span><span class="hs-comment">--      the program was not &quot;known&quot; (present in 'ProgramDb'),</span><span>
</span><span id="line-1524"></span><span>      </span><span class="hs-comment">--      then we would just error.  This was fine, because</span><span>
</span><span id="line-1525"></span><span>      </span><span class="hs-comment">--      the only way a program could be executed from 'ProgramDb'</span><span>
</span><span id="line-1526"></span><span>      </span><span class="hs-comment">--      is if some library code from Cabal actually called it,</span><span>
</span><span id="line-1527"></span><span>      </span><span class="hs-comment">--      and the pre-existing Cabal code only calls known</span><span>
</span><span id="line-1528"></span><span>      </span><span class="hs-comment">--      programs from 'defaultProgramDb', and so if it</span><span>
</span><span id="line-1529"></span><span>      </span><span class="hs-comment">--      is calling something else, you have a Custom setup</span><span>
</span><span id="line-1530"></span><span>      </span><span class="hs-comment">--      script, and in that case you are expected to register</span><span>
</span><span id="line-1531"></span><span>      </span><span class="hs-comment">--      the program you want to call in the ProgramDb.</span><span>
</span><span id="line-1532"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1533"></span><span>      </span><span class="hs-comment">-- OK, so that was fine, until I (ezyang, in 2016) refactored</span><span>
</span><span id="line-1534"></span><span>      </span><span class="hs-comment">-- Cabal to support per-component builds.  In this case, what</span><span>
</span><span id="line-1535"></span><span>      </span><span class="hs-comment">-- was previously an internal build-tool dependency now became</span><span>
</span><span id="line-1536"></span><span>      </span><span class="hs-comment">-- an external one, and now previously &quot;internal&quot; dependencies</span><span>
</span><span id="line-1537"></span><span>      </span><span class="hs-comment">-- are now external.  But these are permitted to exist even</span><span>
</span><span id="line-1538"></span><span>      </span><span class="hs-comment">-- when they are not previously configured (something that</span><span>
</span><span id="line-1539"></span><span>      </span><span class="hs-comment">-- can only occur by a Custom script.)</span><span>
</span><span id="line-1540"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1541"></span><span>      </span><span class="hs-comment">-- So, I decided, &quot;Fine, let's just accept these in any</span><span>
</span><span id="line-1542"></span><span>      </span><span class="hs-comment">-- case.&quot;  Thus this line.  The alternative would have been to</span><span>
</span><span id="line-1543"></span><span>      </span><span class="hs-comment">-- somehow detect when a build-tools dependency was &quot;internal&quot; (by</span><span>
</span><span id="line-1544"></span><span>      </span><span class="hs-comment">-- looking at the unflattened package description) but this</span><span>
</span><span id="line-1545"></span><span>      </span><span class="hs-comment">-- would also be incompatible with future work to support</span><span>
</span><span id="line-1546"></span><span>      </span><span class="hs-comment">-- external executable dependencies: we definitely cannot</span><span>
</span><span id="line-1547"></span><span>      </span><span class="hs-comment">-- assume they will be preinitialized in the 'ProgramDb'.</span><span>
</span><span id="line-1548"></span><span>      </span><span class="annot"><span class="annottext">Verbosity -&gt; Program -&gt; ProgramDb -&gt; IO ProgramDb
</span><a href="Distribution.Simple.Program.Db.html#configureProgram"><span class="hs-identifier hs-var">configureProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746683"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; Program
</span><a href="Distribution.Simple.Program.Types.html#simpleProgram"><span class="hs-identifier hs-var">simpleProgram</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746681"><span class="hs-identifier hs-var">progName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746682"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1549"></span><span>    </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679746676"><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679746676"><span class="hs-identifier hs-var">prog</span></a></span></span><span>
</span><span id="line-1550"></span><span>      </span><span class="hs-comment">-- requireProgramVersion always requires the program have a version</span><span>
</span><span id="line-1551"></span><span>      </span><span class="hs-comment">-- but if the user says &quot;build-depends: foo&quot; ie no version constraint</span><span>
</span><span id="line-1552"></span><span>      </span><span class="hs-comment">-- then we should not fail if we cannot discover the program version.</span><span>
</span><span id="line-1553"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">VersionRange
</span><a href="#local-6989586621679746680"><span class="hs-identifier hs-var">verRange</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">VersionRange
</span><a href="Distribution.Types.VersionRange.Internal.html#anyVersion"><span class="hs-identifier hs-var">anyVersion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1554"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfiguredProgram
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746674"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746674"><span class="hs-identifier hs-var">progdb'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Program -&gt; ProgramDb -&gt; IO (ConfiguredProgram, ProgramDb)
</span><a href="Distribution.Simple.Program.Db.html#requireProgram"><span class="hs-identifier hs-var">requireProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746683"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679746676"><span class="hs-identifier hs-var">prog</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746682"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1555"></span><span>          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746674"><span class="hs-identifier hs-var">progdb'</span></a></span><span>
</span><span id="line-1556"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1557"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfiguredProgram
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Version
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746672"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746672"><span class="hs-identifier hs-var">progdb'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Program
-&gt; VersionRange
-&gt; ProgramDb
-&gt; IO (ConfiguredProgram, Version, ProgramDb)
</span><a href="Distribution.Simple.Program.Db.html#requireProgramVersion"><span class="hs-identifier hs-var">requireProgramVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746683"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679746676"><span class="hs-identifier hs-var">prog</span></a></span><span> </span><span class="annot"><span class="annottext">VersionRange
</span><a href="#local-6989586621679746680"><span class="hs-identifier hs-var">verRange</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746682"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1558"></span><span>          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746672"><span class="hs-identifier hs-var">progdb'</span></a></span><span>
</span><span id="line-1559"></span><span>
</span><span id="line-1560"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-1561"></span><span class="hs-comment">-- Configuring pkg-config package dependencies</span><span>
</span><span id="line-1562"></span><span>
</span><span id="line-1563"></span><span class="annot"><a href="Distribution.Simple.Configure.html#configurePkgconfigPackages"><span class="hs-identifier hs-type">configurePkgconfigPackages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span>
</span><span id="line-1564"></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentRequestedSpec.html#ComponentRequestedSpec"><span class="hs-identifier hs-type">ComponentRequestedSpec</span></a></span><span>
</span><span id="line-1565"></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1566"></span><span id="configurePkgconfigPackages"><span class="annot"><span class="annottext">configurePkgconfigPackages :: Verbosity
-&gt; PackageDescription
-&gt; ProgramDb
-&gt; ComponentRequestedSpec
-&gt; IO (PackageDescription, ProgramDb)
</span><a href="Distribution.Simple.Configure.html#configurePkgconfigPackages"><span class="hs-identifier hs-var hs-var">configurePkgconfigPackages</span></a></span></span><span> </span><span id="local-6989586621679746670"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746670"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746669"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746669"><span class="hs-identifier hs-var">pkg_descr</span></a></span></span><span> </span><span id="local-6989586621679746668"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746668"><span class="hs-identifier hs-var">progdb</span></a></span></span><span> </span><span id="local-6989586621679746667"><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679746667"><span class="hs-identifier hs-var">enabled</span></a></span></span><span>
</span><span id="line-1567"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[PkgconfigDependency]
</span><a href="#local-6989586621679746666"><span class="hs-identifier hs-var">allpkgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746669"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746668"><span class="hs-identifier hs-var">progdb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1568"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1569"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfiguredProgram
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Version
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746665"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746665"><span class="hs-identifier hs-var">progdb'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Program
-&gt; VersionRange
-&gt; ProgramDb
-&gt; IO (ConfiguredProgram, Version, ProgramDb)
</span><a href="Distribution.Simple.Program.Db.html#requireProgramVersion"><span class="hs-identifier hs-var">requireProgramVersion</span></a></span><span>
</span><span id="line-1570"></span><span>                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Verbosity -&gt; Verbosity
</span><a href="Distribution.Verbosity.html#lessVerbose"><span class="hs-identifier hs-var">lessVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746670"><span class="hs-identifier hs-var">verbosity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#pkgConfigProgram"><span class="hs-identifier hs-var">pkgConfigProgram</span></a></span><span>
</span><span id="line-1571"></span><span>                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Version -&gt; VersionRange
</span><a href="Distribution.Types.VersionRange.Internal.html#orLaterVersion"><span class="hs-identifier hs-var">orLaterVersion</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Version
</span><a href="Distribution.Types.Version.html#mkVersion"><span class="hs-identifier hs-var">mkVersion</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">9</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746668"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1572"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#traverse_"><span class="hs-identifier hs-var">traverse_</span></a></span><span> </span><span class="annot"><span class="annottext">PkgconfigDependency -&gt; IO ()
</span><a href="#local-6989586621679746661"><span class="hs-identifier hs-var">requirePkg</span></a></span><span> </span><span class="annot"><span class="annottext">[PkgconfigDependency]
</span><a href="#local-6989586621679746666"><span class="hs-identifier hs-var">allpkgs</span></a></span><span>
</span><span id="line-1573"></span><span>    </span><span id="local-6989586621679746660"><span class="annot"><span class="annottext">Maybe Library
</span><a href="#local-6989586621679746660"><span class="hs-identifier hs-var">mlib'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">Library -&gt; IO Library
</span><a href="#local-6989586621679746658"><span class="hs-identifier hs-var">addPkgConfigBILib</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; Maybe Library
</span><a href="Distribution.Types.PackageDescription.html#library"><span class="hs-identifier hs-var">library</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746669"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1574"></span><span>    </span><span id="local-6989586621679746657"><span class="annot"><span class="annottext">[Library]
</span><a href="#local-6989586621679746657"><span class="hs-identifier hs-var">libs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">Library -&gt; IO Library
</span><a href="#local-6989586621679746658"><span class="hs-identifier hs-var">addPkgConfigBILib</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; [Library]
</span><a href="Distribution.Types.PackageDescription.html#subLibraries"><span class="hs-identifier hs-var">subLibraries</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746669"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1575"></span><span>    </span><span id="local-6989586621679746656"><span class="annot"><span class="annottext">[Executable]
</span><a href="#local-6989586621679746656"><span class="hs-identifier hs-var">exes'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">Executable -&gt; IO Executable
</span><a href="#local-6989586621679746655"><span class="hs-identifier hs-var">addPkgConfigBIExe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; [Executable]
</span><a href="Distribution.Types.PackageDescription.html#executables"><span class="hs-identifier hs-var">executables</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746669"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1576"></span><span>    </span><span id="local-6989586621679746654"><span class="annot"><span class="annottext">[TestSuite]
</span><a href="#local-6989586621679746654"><span class="hs-identifier hs-var">tests'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">TestSuite -&gt; IO TestSuite
</span><a href="#local-6989586621679746653"><span class="hs-identifier hs-var">addPkgConfigBITest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; [TestSuite]
</span><a href="Distribution.Types.PackageDescription.html#testSuites"><span class="hs-identifier hs-var">testSuites</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746669"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1577"></span><span>    </span><span id="local-6989586621679746652"><span class="annot"><span class="annottext">[Benchmark]
</span><a href="#local-6989586621679746652"><span class="hs-identifier hs-var">benches'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">Benchmark -&gt; IO Benchmark
</span><a href="#local-6989586621679746651"><span class="hs-identifier hs-var">addPkgConfigBIBench</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; [Benchmark]
</span><a href="Distribution.Types.PackageDescription.html#benchmarks"><span class="hs-identifier hs-var">benchmarks</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746669"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1578"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746650"><span class="annot"><span class="annottext">pkg_descr' :: PackageDescription
</span><a href="#local-6989586621679746650"><span class="hs-identifier hs-var hs-var">pkg_descr'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746669"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">library :: Maybe Library
</span><a href="Distribution.Types.PackageDescription.html#library"><span class="hs-identifier hs-var">library</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Library
</span><a href="#local-6989586621679746660"><span class="hs-identifier hs-var">mlib'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1579"></span><span>                                 </span><span class="annot"><span class="annottext">subLibraries :: [Library]
</span><a href="Distribution.Types.PackageDescription.html#subLibraries"><span class="hs-identifier hs-var">subLibraries</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Library]
</span><a href="#local-6989586621679746657"><span class="hs-identifier hs-var">libs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">executables :: [Executable]
</span><a href="Distribution.Types.PackageDescription.html#executables"><span class="hs-identifier hs-var">executables</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Executable]
</span><a href="#local-6989586621679746656"><span class="hs-identifier hs-var">exes'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1580"></span><span>                                 </span><span class="annot"><span class="annottext">testSuites :: [TestSuite]
</span><a href="Distribution.Types.PackageDescription.html#testSuites"><span class="hs-identifier hs-var">testSuites</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TestSuite]
</span><a href="#local-6989586621679746654"><span class="hs-identifier hs-var">tests'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">benchmarks :: [Benchmark]
</span><a href="Distribution.Types.PackageDescription.html#benchmarks"><span class="hs-identifier hs-var">benchmarks</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Benchmark]
</span><a href="#local-6989586621679746652"><span class="hs-identifier hs-var">benches'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1581"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746650"><span class="hs-identifier hs-var">pkg_descr'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746665"><span class="hs-identifier hs-var">progdb'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1582"></span><span>
</span><span id="line-1583"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1584"></span><span>    </span><span id="local-6989586621679746666"><span class="annot"><span class="annottext">allpkgs :: [PkgconfigDependency]
</span><a href="#local-6989586621679746666"><span class="hs-identifier hs-var hs-var">allpkgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [PkgconfigDependency]
</span><a href="Distribution.Types.BuildInfo.html#pkgconfigDepends"><span class="hs-identifier hs-var">pkgconfigDepends</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; ComponentRequestedSpec -&gt; [BuildInfo]
</span><a href="Distribution.Types.PackageDescription.html#enabledBuildInfos"><span class="hs-identifier hs-var">enabledBuildInfos</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746669"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentRequestedSpec
</span><a href="#local-6989586621679746667"><span class="hs-identifier hs-var">enabled</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1585"></span><span>    </span><span id="local-6989586621679746647"><span class="annot"><span class="annottext">pkgconfig :: [[Char]] -&gt; IO [Char]
</span><a href="#local-6989586621679746647"><span class="hs-identifier hs-var hs-var">pkgconfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; Program -&gt; ProgramDb -&gt; [[Char]] -&gt; IO [Char]
</span><a href="Distribution.Simple.Program.html#getDbProgramOutput"><span class="hs-identifier hs-var">getDbProgramOutput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Verbosity -&gt; Verbosity
</span><a href="Distribution.Verbosity.html#lessVerbose"><span class="hs-identifier hs-var">lessVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746670"><span class="hs-identifier hs-var">verbosity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1586"></span><span>                  </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#pkgConfigProgram"><span class="hs-identifier hs-var">pkgConfigProgram</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746668"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1587"></span><span>
</span><span id="line-1588"></span><span>    </span><span id="local-6989586621679746661"><span class="annot"><span class="annottext">requirePkg :: PkgconfigDependency -&gt; IO ()
</span><a href="#local-6989586621679746661"><span class="hs-identifier hs-var hs-var">requirePkg</span></a></span></span><span> </span><span id="local-6989586621679746641"><span class="annot"><span class="annottext">dep :: PkgconfigDependency
</span><a href="#local-6989586621679746641"><span class="hs-identifier hs-var">dep</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.PkgconfigDependency.html#PkgconfigDependency"><span class="hs-identifier hs-type">PkgconfigDependency</span></a></span><span> </span><span id="local-6989586621679746639"><span class="annot"><span class="annottext">PkgconfigName
</span><a href="#local-6989586621679746639"><span class="hs-identifier hs-var">pkgn</span></a></span></span><span> </span><span id="local-6989586621679746638"><span class="annot"><span class="annottext">PkgconfigVersionRange
</span><a href="#local-6989586621679746638"><span class="hs-identifier hs-var">range</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1589"></span><span>      </span><span id="local-6989586621679746637"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746637"><span class="hs-identifier hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; IO [Char]
</span><a href="#local-6989586621679746647"><span class="hs-identifier hs-var">pkgconfig</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;--modversion&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746636"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1590"></span><span>                 </span><span class="annot"><span class="annottext">forall a. IO a -&gt; (IOException -&gt; IO a) -&gt; IO a
</span><a href="Distribution.Compat.Exception.html#catchIO"><span class="hs-operator hs-var">`catchIO`</span></a></span><span>   </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">IOException
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746670"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746634"><span class="hs-identifier hs-var">notFound</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1591"></span><span>                 </span><span class="annot"><span class="annottext">forall a. IO a -&gt; (ExitCode -&gt; IO a) -&gt; IO a
</span><a href="Distribution.Compat.Exception.html#catchExit"><span class="hs-operator hs-var">`catchExit`</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">ExitCode
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746670"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746634"><span class="hs-identifier hs-var">notFound</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1592"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746632"><span class="annot"><span class="annottext">trim :: ShowS
</span><a href="#local-6989586621679746632"><span class="hs-identifier hs-var hs-var">trim</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#dropWhile"><span class="hs-identifier hs-var">dropWhile</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="../../base-4.16.3.0/src/GHC-Unicode.html#isSpace"><span class="hs-identifier hs-var">isSpace</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#dropWhileEnd"><span class="hs-identifier hs-var">dropWhileEnd</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="../../base-4.16.3.0/src/GHC-Unicode.html#isSpace"><span class="hs-identifier hs-var">isSpace</span></a></span><span>
</span><span id="line-1593"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746629"><span class="annot"><span class="annottext">v :: PkgconfigVersion
</span><a href="#local-6989586621679746629"><span class="hs-identifier hs-var hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; PkgconfigVersion
</span><a href="Distribution.Types.PkgconfigVersion.html#PkgconfigVersion"><span class="hs-identifier hs-var">PkgconfigVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; ByteString
</span><a href="Distribution.Utils.Generic.html#toUTF8BS"><span class="hs-identifier hs-var">toUTF8BS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="#local-6989586621679746632"><span class="hs-identifier hs-var">trim</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746637"><span class="hs-identifier hs-var">version</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1594"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PkgconfigVersion -&gt; PkgconfigVersionRange -&gt; Bool
</span><a href="Distribution.Types.PkgconfigVersionRange.html#withinPkgconfigVersionRange"><span class="hs-identifier hs-var">withinPkgconfigVersionRange</span></a></span><span> </span><span class="annot"><span class="annottext">PkgconfigVersion
</span><a href="#local-6989586621679746629"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">PkgconfigVersionRange
</span><a href="#local-6989586621679746638"><span class="hs-identifier hs-var">range</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1595"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746670"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="#local-6989586621679746625"><span class="hs-identifier hs-var">badVersion</span></a></span><span> </span><span class="annot"><span class="annottext">PkgconfigVersion
</span><a href="#local-6989586621679746629"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1596"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746670"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="#local-6989586621679746624"><span class="hs-identifier hs-var">depSatisfied</span></a></span><span> </span><span class="annot"><span class="annottext">PkgconfigVersion
</span><a href="#local-6989586621679746629"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1597"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1598"></span><span>        </span><span id="local-6989586621679746634"><span class="annot"><span class="annottext">notFound :: [Char]
</span><a href="#local-6989586621679746634"><span class="hs-identifier hs-var hs-var">notFound</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;The pkg-config package '&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746636"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;'&quot;</span></span><span>
</span><span id="line-1599"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746619"><span class="hs-identifier hs-var">versionRequirement</span></a></span><span>
</span><span id="line-1600"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; is required but it could not be found.&quot;</span></span><span>
</span><span id="line-1601"></span><span>        </span><span id="local-6989586621679746625"><span class="annot"><span class="annottext">badVersion :: a -&gt; [Char]
</span><a href="#local-6989586621679746625"><span class="hs-identifier hs-var hs-var">badVersion</span></a></span></span><span> </span><span id="local-6989586621679746611"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679746611"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;The pkg-config package '&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746636"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;'&quot;</span></span><span>
</span><span id="line-1602"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746619"><span class="hs-identifier hs-var">versionRequirement</span></a></span><span>
</span><span id="line-1603"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; is required but the version installed on the&quot;</span></span><span>
</span><span id="line-1604"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; system is version &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679746611"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1605"></span><span>        </span><span id="local-6989586621679746624"><span class="annot"><span class="annottext">depSatisfied :: a -&gt; [Char]
</span><a href="#local-6989586621679746624"><span class="hs-identifier hs-var hs-var">depSatisfied</span></a></span></span><span> </span><span id="local-6989586621679746603"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679746603"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Dependency &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">PkgconfigDependency
</span><a href="#local-6989586621679746641"><span class="hs-identifier hs-var">dep</span></a></span><span>
</span><span id="line-1606"></span><span>                      </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;: using version &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679746603"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1607"></span><span>
</span><span id="line-1608"></span><span>        </span><span id="local-6989586621679746619"><span class="annot"><span class="annottext">versionRequirement :: [Char]
</span><a href="#local-6989586621679746619"><span class="hs-identifier hs-var hs-var">versionRequirement</span></a></span></span><span>
</span><span id="line-1609"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PkgconfigVersionRange -&gt; Bool
</span><a href="Distribution.Types.PkgconfigVersionRange.html#isAnyPkgconfigVersion"><span class="hs-identifier hs-var">isAnyPkgconfigVersion</span></a></span><span> </span><span class="annot"><span class="annottext">PkgconfigVersionRange
</span><a href="#local-6989586621679746638"><span class="hs-identifier hs-var">range</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1610"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; version &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">PkgconfigVersionRange
</span><a href="#local-6989586621679746638"><span class="hs-identifier hs-var">range</span></a></span><span>
</span><span id="line-1611"></span><span>
</span><span id="line-1612"></span><span>        </span><span id="local-6989586621679746636"><span class="annot"><span class="annottext">pkg :: [Char]
</span><a href="#local-6989586621679746636"><span class="hs-identifier hs-var hs-var">pkg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PkgconfigName -&gt; [Char]
</span><a href="Distribution.Types.PkgconfigName.html#unPkgconfigName"><span class="hs-identifier hs-var">unPkgconfigName</span></a></span><span> </span><span class="annot"><span class="annottext">PkgconfigName
</span><a href="#local-6989586621679746639"><span class="hs-identifier hs-var">pkgn</span></a></span><span>
</span><span id="line-1613"></span><span>
</span><span id="line-1614"></span><span>    </span><span class="hs-comment">-- Adds pkgconfig dependencies to the build info for a component</span><span>
</span><span id="line-1615"></span><span>    </span><span id="local-6989586621679746592"><span class="annot"><span class="annottext">addPkgConfigBI :: (t -&gt; BuildInfo) -&gt; (t -&gt; BuildInfo -&gt; b) -&gt; t -&gt; IO b
</span><a href="#local-6989586621679746592"><span class="hs-identifier hs-var hs-var">addPkgConfigBI</span></a></span></span><span> </span><span id="local-6989586621679746591"><span class="annot"><span class="annottext">t -&gt; BuildInfo
</span><a href="#local-6989586621679746591"><span class="hs-identifier hs-var">compBI</span></a></span></span><span> </span><span id="local-6989586621679746590"><span class="annot"><span class="annottext">t -&gt; BuildInfo -&gt; b
</span><a href="#local-6989586621679746590"><span class="hs-identifier hs-var">setCompBI</span></a></span></span><span> </span><span id="local-6989586621679746589"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679746589"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1616"></span><span>      </span><span id="local-6989586621679746588"><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679746588"><span class="hs-identifier hs-var">bi</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[PkgconfigDependency] -&gt; IO BuildInfo
</span><a href="#local-6989586621679746587"><span class="hs-identifier hs-var">pkgconfigBuildInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; [PkgconfigDependency]
</span><a href="Distribution.Types.BuildInfo.html#pkgconfigDepends"><span class="hs-identifier hs-var">pkgconfigDepends</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; BuildInfo
</span><a href="#local-6989586621679746591"><span class="hs-identifier hs-var">compBI</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679746589"><span class="hs-identifier hs-var">comp</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1617"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; BuildInfo -&gt; b
</span><a href="#local-6989586621679746590"><span class="hs-identifier hs-var">setCompBI</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679746589"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; BuildInfo
</span><a href="#local-6989586621679746591"><span class="hs-identifier hs-var">compBI</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679746589"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679746588"><span class="hs-identifier hs-var">bi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1618"></span><span>
</span><span id="line-1619"></span><span>    </span><span class="hs-comment">-- Adds pkgconfig dependencies to the build info for a library</span><span>
</span><span id="line-1620"></span><span>    </span><span id="local-6989586621679746658"><span class="annot"><span class="annottext">addPkgConfigBILib :: Library -&gt; IO Library
</span><a href="#local-6989586621679746658"><span class="hs-identifier hs-var hs-var">addPkgConfigBILib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {t} {b}.
(t -&gt; BuildInfo) -&gt; (t -&gt; BuildInfo -&gt; b) -&gt; t -&gt; IO b
</span><a href="#local-6989586621679746592"><span class="hs-identifier hs-var">addPkgConfigBI</span></a></span><span> </span><span class="annot"><span class="annottext">Library -&gt; BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1621"></span><span>                          </span><span class="hs-glyph">\</span><span id="local-6989586621679746586"><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679746586"><span class="hs-identifier hs-var">lib</span></a></span></span><span> </span><span id="local-6989586621679746585"><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679746585"><span class="hs-identifier hs-var">bi</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679746586"><span class="hs-identifier hs-var">lib</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">libBuildInfo :: BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679746585"><span class="hs-identifier hs-var">bi</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1622"></span><span>
</span><span id="line-1623"></span><span>    </span><span class="hs-comment">-- Adds pkgconfig dependencies to the build info for an executable</span><span>
</span><span id="line-1624"></span><span>    </span><span id="local-6989586621679746655"><span class="annot"><span class="annottext">addPkgConfigBIExe :: Executable -&gt; IO Executable
</span><a href="#local-6989586621679746655"><span class="hs-identifier hs-var hs-var">addPkgConfigBIExe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {t} {b}.
(t -&gt; BuildInfo) -&gt; (t -&gt; BuildInfo -&gt; b) -&gt; t -&gt; IO b
</span><a href="#local-6989586621679746592"><span class="hs-identifier hs-var">addPkgConfigBI</span></a></span><span> </span><span class="annot"><span class="annottext">Executable -&gt; BuildInfo
</span><a href="Distribution.Types.Executable.html#buildInfo"><span class="hs-identifier hs-var">buildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1625"></span><span>                          </span><span class="hs-glyph">\</span><span id="local-6989586621679746584"><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679746584"><span class="hs-identifier hs-var">exe</span></a></span></span><span> </span><span id="local-6989586621679746583"><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679746583"><span class="hs-identifier hs-var">bi</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679746584"><span class="hs-identifier hs-var">exe</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">buildInfo :: BuildInfo
</span><a href="Distribution.Types.Executable.html#buildInfo"><span class="hs-identifier hs-var">buildInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679746583"><span class="hs-identifier hs-var">bi</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1626"></span><span>
</span><span id="line-1627"></span><span>    </span><span class="hs-comment">-- Adds pkgconfig dependencies to the build info for a test suite</span><span>
</span><span id="line-1628"></span><span>    </span><span id="local-6989586621679746653"><span class="annot"><span class="annottext">addPkgConfigBITest :: TestSuite -&gt; IO TestSuite
</span><a href="#local-6989586621679746653"><span class="hs-identifier hs-var hs-var">addPkgConfigBITest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {t} {b}.
(t -&gt; BuildInfo) -&gt; (t -&gt; BuildInfo -&gt; b) -&gt; t -&gt; IO b
</span><a href="#local-6989586621679746592"><span class="hs-identifier hs-var">addPkgConfigBI</span></a></span><span> </span><span class="annot"><span class="annottext">TestSuite -&gt; BuildInfo
</span><a href="Distribution.Types.TestSuite.html#testBuildInfo"><span class="hs-identifier hs-var">testBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1629"></span><span>                          </span><span class="hs-glyph">\</span><span id="local-6989586621679746582"><span class="annot"><span class="annottext">TestSuite
</span><a href="#local-6989586621679746582"><span class="hs-identifier hs-var">test</span></a></span></span><span> </span><span id="local-6989586621679746581"><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679746581"><span class="hs-identifier hs-var">bi</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestSuite
</span><a href="#local-6989586621679746582"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">testBuildInfo :: BuildInfo
</span><a href="Distribution.Types.TestSuite.html#testBuildInfo"><span class="hs-identifier hs-var">testBuildInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679746581"><span class="hs-identifier hs-var">bi</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1630"></span><span>
</span><span id="line-1631"></span><span>    </span><span class="hs-comment">-- Adds pkgconfig dependencies to the build info for a benchmark</span><span>
</span><span id="line-1632"></span><span>    </span><span id="local-6989586621679746651"><span class="annot"><span class="annottext">addPkgConfigBIBench :: Benchmark -&gt; IO Benchmark
</span><a href="#local-6989586621679746651"><span class="hs-identifier hs-var hs-var">addPkgConfigBIBench</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {t} {b}.
(t -&gt; BuildInfo) -&gt; (t -&gt; BuildInfo -&gt; b) -&gt; t -&gt; IO b
</span><a href="#local-6989586621679746592"><span class="hs-identifier hs-var">addPkgConfigBI</span></a></span><span> </span><span class="annot"><span class="annottext">Benchmark -&gt; BuildInfo
</span><a href="Distribution.Types.Benchmark.html#benchmarkBuildInfo"><span class="hs-identifier hs-var">benchmarkBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1633"></span><span>                          </span><span class="hs-glyph">\</span><span id="local-6989586621679746580"><span class="annot"><span class="annottext">Benchmark
</span><a href="#local-6989586621679746580"><span class="hs-identifier hs-var">bench</span></a></span></span><span> </span><span id="local-6989586621679746579"><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679746579"><span class="hs-identifier hs-var">bi</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Benchmark
</span><a href="#local-6989586621679746580"><span class="hs-identifier hs-var">bench</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">benchmarkBuildInfo :: BuildInfo
</span><a href="Distribution.Types.Benchmark.html#benchmarkBuildInfo"><span class="hs-identifier hs-var">benchmarkBuildInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679746579"><span class="hs-identifier hs-var">bi</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1634"></span><span>
</span><span id="line-1635"></span><span>    </span><span class="annot"><a href="#local-6989586621679746587"><span class="hs-identifier hs-type">pkgconfigBuildInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Types.PkgconfigDependency.html#PkgconfigDependency"><span class="hs-identifier hs-type">PkgconfigDependency</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Distribution.Types.BuildInfo.html#BuildInfo"><span class="hs-identifier hs-type">BuildInfo</span></a></span><span>
</span><span id="line-1636"></span><span>    </span><span id="local-6989586621679746587"><span class="annot"><span class="annottext">pkgconfigBuildInfo :: [PkgconfigDependency] -&gt; IO BuildInfo
</span><a href="#local-6989586621679746587"><span class="hs-identifier hs-var hs-var">pkgconfigBuildInfo</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1637"></span><span>    </span><span class="annot"><a href="#local-6989586621679746587"><span class="hs-identifier hs-var">pkgconfigBuildInfo</span></a></span><span> </span><span id="local-6989586621679746578"><span class="annot"><span class="annottext">[PkgconfigDependency]
</span><a href="#local-6989586621679746578"><span class="hs-identifier hs-var">pkgdeps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1638"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746572"><span class="annot"><span class="annottext">pkgs :: [[Char]]
</span><a href="#local-6989586621679746572"><span class="hs-identifier hs-var hs-var">pkgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#nub"><span class="hs-identifier hs-var">nub</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">PkgconfigName
</span><a href="#local-6989586621679746571"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Distribution.Types.PkgconfigDependency.html#PkgconfigDependency"><span class="hs-identifier hs-type">PkgconfigDependency</span></a></span><span> </span><span id="local-6989586621679746571"><span class="annot"><span class="annottext">PkgconfigName
</span><a href="#local-6989586621679746571"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span class="annot"><span class="annottext">PkgconfigVersionRange
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[PkgconfigDependency]
</span><a href="#local-6989586621679746578"><span class="hs-identifier hs-var">pkgdeps</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1639"></span><span>      </span><span id="local-6989586621679746570"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746570"><span class="hs-identifier hs-var">ccflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; IO [Char]
</span><a href="#local-6989586621679746647"><span class="hs-identifier hs-var">pkgconfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;--cflags&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746572"><span class="hs-identifier hs-var">pkgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1640"></span><span>      </span><span id="local-6989586621679746569"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746569"><span class="hs-identifier hs-var">ldflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; IO [Char]
</span><a href="#local-6989586621679746647"><span class="hs-identifier hs-var">pkgconfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;--libs&quot;</span></span><span>   </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746572"><span class="hs-identifier hs-var">pkgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1641"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[Char]] -&gt; [[Char]] -&gt; BuildInfo
</span><a href="Distribution.Simple.Configure.html#ccLdOptionsBuildInfo"><span class="hs-identifier hs-var">ccLdOptionsBuildInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; [[Char]]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#words"><span class="hs-identifier hs-var">words</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746570"><span class="hs-identifier hs-var">ccflags</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; [[Char]]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#words"><span class="hs-identifier hs-var">words</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746569"><span class="hs-identifier hs-var">ldflags</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1642"></span><span>
</span><span id="line-1643"></span><span class="hs-comment">-- | Makes a 'BuildInfo' from C compiler and linker flags.</span><span>
</span><span id="line-1644"></span><span class="hs-comment">--</span><span>
</span><span id="line-1645"></span><span class="hs-comment">-- This can be used with the output from configuration programs like pkg-config</span><span>
</span><span id="line-1646"></span><span class="hs-comment">-- and similar package-specific programs like mysql-config, freealut-config etc.</span><span>
</span><span id="line-1647"></span><span class="hs-comment">-- For example:</span><span>
</span><span id="line-1648"></span><span class="hs-comment">--</span><span>
</span><span id="line-1649"></span><span class="hs-comment">-- &gt; ccflags &lt;- getDbProgramOutput verbosity prog progdb [&quot;--cflags&quot;]</span><span>
</span><span id="line-1650"></span><span class="hs-comment">-- &gt; ldflags &lt;- getDbProgramOutput verbosity prog progdb [&quot;--libs&quot;]</span><span>
</span><span id="line-1651"></span><span class="hs-comment">-- &gt; return (ccldOptionsBuildInfo (words ccflags) (words ldflags))</span><span>
</span><span id="line-1652"></span><span class="hs-comment">--</span><span>
</span><span id="line-1653"></span><span class="annot"><a href="Distribution.Simple.Configure.html#ccLdOptionsBuildInfo"><span class="hs-identifier hs-type">ccLdOptionsBuildInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.BuildInfo.html#BuildInfo"><span class="hs-identifier hs-type">BuildInfo</span></a></span><span>
</span><span id="line-1654"></span><span id="ccLdOptionsBuildInfo"><span class="annot"><span class="annottext">ccLdOptionsBuildInfo :: [[Char]] -&gt; [[Char]] -&gt; BuildInfo
</span><a href="Distribution.Simple.Configure.html#ccLdOptionsBuildInfo"><span class="hs-identifier hs-var hs-var">ccLdOptionsBuildInfo</span></a></span></span><span> </span><span id="local-6989586621679746567"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746567"><span class="hs-identifier hs-var">cflags</span></a></span></span><span> </span><span id="local-6989586621679746566"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746566"><span class="hs-identifier hs-var">ldflags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1655"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679746562"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746562"><span class="hs-identifier hs-var">includeDirs'</span></a></span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621679746561"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746561"><span class="hs-identifier hs-var">cflags'</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-I&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#isPrefixOf"><span class="hs-operator hs-var">`isPrefixOf`</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746567"><span class="hs-identifier hs-var">cflags</span></a></span><span>
</span><span id="line-1656"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679746556"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746556"><span class="hs-identifier hs-var">extraLibs'</span></a></span></span><span class="hs-special">,</span><span>    </span><span id="local-6989586621679746555"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746555"><span class="hs-identifier hs-var">ldflags'</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-l&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#isPrefixOf"><span class="hs-operator hs-var">`isPrefixOf`</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746566"><span class="hs-identifier hs-var">ldflags</span></a></span><span>
</span><span id="line-1657"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679746551"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746551"><span class="hs-identifier hs-var">extraLibDirs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746550"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746550"><span class="hs-identifier hs-var">ldflags''</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-L&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#isPrefixOf"><span class="hs-operator hs-var">`isPrefixOf`</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746555"><span class="hs-identifier hs-var">ldflags'</span></a></span><span>
</span><span id="line-1658"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1659"></span><span>       </span><span class="annot"><span class="annottext">includeDirs :: [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#includeDirs"><span class="hs-identifier hs-var">includeDirs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#drop"><span class="hs-identifier hs-var">drop</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746562"><span class="hs-identifier hs-var">includeDirs'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1660"></span><span>       </span><span class="annot"><span class="annottext">extraLibs :: [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#extraLibs"><span class="hs-identifier hs-var">extraLibs</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#drop"><span class="hs-identifier hs-var">drop</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746556"><span class="hs-identifier hs-var">extraLibs'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1661"></span><span>       </span><span class="annot"><span class="annottext">extraLibDirs :: [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#extraLibDirs"><span class="hs-identifier hs-var">extraLibDirs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#drop"><span class="hs-identifier hs-var">drop</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746551"><span class="hs-identifier hs-var">extraLibDirs'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1662"></span><span>       </span><span class="annot"><span class="annottext">ccOptions :: [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#ccOptions"><span class="hs-identifier hs-var">ccOptions</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746561"><span class="hs-identifier hs-var">cflags'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1663"></span><span>       </span><span class="annot"><span class="annottext">ldOptions :: [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#ldOptions"><span class="hs-identifier hs-var">ldOptions</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746550"><span class="hs-identifier hs-var">ldflags''</span></a></span><span>
</span><span id="line-1664"></span><span>     </span><span class="hs-special">}</span><span>
</span><span id="line-1665"></span><span>
</span><span id="line-1666"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-1667"></span><span class="hs-comment">-- Determining the compiler details</span><span>
</span><span id="line-1668"></span><span>
</span><span id="line-1669"></span><span class="annot"><a href="Distribution.Simple.Configure.html#configCompilerAuxEx"><span class="hs-identifier hs-type">configCompilerAuxEx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Setup.html#ConfigFlags"><span class="hs-identifier hs-type">ConfigFlags</span></a></span><span>
</span><span id="line-1670"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1671"></span><span id="configCompilerAuxEx"><span class="annot"><span class="annottext">configCompilerAuxEx :: ConfigFlags -&gt; IO (Compiler, Platform, ProgramDb)
</span><a href="Distribution.Simple.Configure.html#configCompilerAuxEx"><span class="hs-identifier hs-var hs-var">configCompilerAuxEx</span></a></span></span><span> </span><span id="local-6989586621679746545"><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746545"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe CompilerFlavor
-&gt; Maybe [Char]
-&gt; Maybe [Char]
-&gt; ProgramDb
-&gt; Verbosity
-&gt; IO (Compiler, Platform, ProgramDb)
</span><a href="Distribution.Simple.Configure.html#configCompilerEx"><span class="hs-identifier hs-var">configCompilerEx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Flag a -&gt; Maybe a
</span><a href="Distribution.Simple.Flag.html#flagToMaybe"><span class="hs-identifier hs-var">flagToMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag CompilerFlavor
</span><a href="Distribution.Simple.Setup.html#configHcFlavor"><span class="hs-identifier hs-var">configHcFlavor</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746545"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1672"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Flag a -&gt; Maybe a
</span><a href="Distribution.Simple.Flag.html#flagToMaybe"><span class="hs-identifier hs-var">flagToMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag [Char]
</span><a href="Distribution.Simple.Setup.html#configHcPath"><span class="hs-identifier hs-var">configHcPath</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746545"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1673"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Flag a -&gt; Maybe a
</span><a href="Distribution.Simple.Flag.html#flagToMaybe"><span class="hs-identifier hs-var">flagToMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag [Char]
</span><a href="Distribution.Simple.Setup.html#configHcPkg"><span class="hs-identifier hs-var">configHcPkg</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746545"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1674"></span><span>                                           </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746544"><span class="hs-identifier hs-var">programDb</span></a></span><span>
</span><span id="line-1675"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag Verbosity
</span><a href="Distribution.Simple.Setup.html#configVerbosity"><span class="hs-identifier hs-var">configVerbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746545"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1676"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1677"></span><span>    </span><span id="local-6989586621679746544"><span class="annot"><span class="annottext">programDb :: ProgramDb
</span><a href="#local-6989586621679746544"><span class="hs-identifier hs-var hs-var">programDb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; ProgramDb -&gt; ProgramDb
</span><a href="Distribution.Simple.Configure.html#mkProgramDb"><span class="hs-identifier hs-var">mkProgramDb</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags
</span><a href="#local-6989586621679746545"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="Distribution.Simple.Program.Db.html#defaultProgramDb"><span class="hs-identifier hs-var">defaultProgramDb</span></a></span><span>
</span><span id="line-1678"></span><span>
</span><span id="line-1679"></span><span class="annot"><a href="Distribution.Simple.Configure.html#configCompilerEx"><span class="hs-identifier hs-type">configCompilerEx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Distribution.Compiler.html#CompilerFlavor"><span class="hs-identifier hs-type">CompilerFlavor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1680"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-1681"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1682"></span><span id="configCompilerEx"><span class="annot"><span class="annottext">configCompilerEx :: Maybe CompilerFlavor
-&gt; Maybe [Char]
-&gt; Maybe [Char]
-&gt; ProgramDb
-&gt; Verbosity
-&gt; IO (Compiler, Platform, ProgramDb)
</span><a href="Distribution.Simple.Configure.html#configCompilerEx"><span class="hs-identifier hs-var hs-var">configCompilerEx</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe CompilerFlavor
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679746542"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746542"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746542"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Unknown compiler&quot;</span></span><span>
</span><span id="line-1683"></span><span class="annot"><a href="Distribution.Simple.Configure.html#configCompilerEx"><span class="hs-identifier hs-var">configCompilerEx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679746541"><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="#local-6989586621679746541"><span class="hs-identifier hs-var">hcFlavor</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679746540"><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621679746540"><span class="hs-identifier hs-var">hcPath</span></a></span></span><span> </span><span id="local-6989586621679746539"><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621679746539"><span class="hs-identifier hs-var">hcPkg</span></a></span></span><span> </span><span id="local-6989586621679746538"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746538"><span class="hs-identifier hs-var">progdb</span></a></span></span><span> </span><span id="local-6989586621679746537"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746537"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1684"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679746536"><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746536"><span class="hs-identifier hs-var">comp</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746535"><span class="annot"><span class="annottext">Maybe Platform
</span><a href="#local-6989586621679746535"><span class="hs-identifier hs-var">maybePlatform</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746534"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746534"><span class="hs-identifier hs-var">programDb</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="#local-6989586621679746541"><span class="hs-identifier hs-var">hcFlavor</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1685"></span><span>    </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Maybe [Char]
-&gt; Maybe [Char]
-&gt; ProgramDb
-&gt; IO (Compiler, Maybe Platform, ProgramDb)
</span><a href="Distribution.Simple.GHC.html#configure"><span class="hs-identifier hs-var">GHC.configure</span></a></span><span>  </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746537"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621679746540"><span class="hs-identifier hs-var">hcPath</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621679746539"><span class="hs-identifier hs-var">hcPkg</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746538"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1686"></span><span>    </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHCJS"><span class="hs-identifier hs-var">GHCJS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Maybe [Char]
-&gt; Maybe [Char]
-&gt; ProgramDb
-&gt; IO (Compiler, Maybe Platform, ProgramDb)
</span><a href="Distribution.Simple.GHCJS.html#configure"><span class="hs-identifier hs-var">GHCJS.configure</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746537"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621679746540"><span class="hs-identifier hs-var">hcPath</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621679746539"><span class="hs-identifier hs-var">hcPkg</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746538"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1687"></span><span>    </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#UHC"><span class="hs-identifier hs-var">UHC</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Maybe [Char]
-&gt; Maybe [Char]
-&gt; ProgramDb
-&gt; IO (Compiler, Maybe Platform, ProgramDb)
</span><a href="Distribution.Simple.UHC.html#configure"><span class="hs-identifier hs-var">UHC.configure</span></a></span><span>  </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746537"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621679746540"><span class="hs-identifier hs-var">hcPath</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621679746539"><span class="hs-identifier hs-var">hcPkg</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746538"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1688"></span><span>    </span><span class="annot"><a href="Distribution.Compiler.html#HaskellSuite"><span class="hs-identifier hs-type">HaskellSuite</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Maybe [Char]
-&gt; Maybe [Char]
-&gt; ProgramDb
-&gt; IO (Compiler, Maybe Platform, ProgramDb)
</span><a href="Distribution.Simple.HaskellSuite.html#configure"><span class="hs-identifier hs-var">HaskellSuite.configure</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746537"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621679746540"><span class="hs-identifier hs-var">hcPath</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621679746539"><span class="hs-identifier hs-var">hcPkg</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746538"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-1689"></span><span>    </span><span class="annot"><span class="annottext">CompilerFlavor
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746537"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Unknown compiler&quot;</span></span><span>
</span><span id="line-1690"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746536"><span class="hs-identifier hs-var">comp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="Distribution.System.html#buildPlatform"><span class="hs-identifier hs-var">buildPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Platform
</span><a href="#local-6989586621679746535"><span class="hs-identifier hs-var">maybePlatform</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679746534"><span class="hs-identifier hs-var">programDb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1691"></span><span>
</span><span id="line-1692"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-1693"></span><span class="hs-comment">-- Testing C lib and header dependencies</span><span>
</span><span id="line-1694"></span><span>
</span><span id="line-1695"></span><span class="hs-comment">-- Try to build a test C program which includes every header and links every</span><span>
</span><span id="line-1696"></span><span class="hs-comment">-- lib. If that fails, try to narrow it down by preprocessing (only) and linking</span><span>
</span><span id="line-1697"></span><span class="hs-comment">-- with individual headers and libs.  If none is the obvious culprit then give a</span><span>
</span><span id="line-1698"></span><span class="hs-comment">-- generic error message.</span><span>
</span><span id="line-1699"></span><span class="hs-comment">-- TODO: produce a log file from the compiler errors, if any.</span><span>
</span><span id="line-1700"></span><span class="annot"><a href="Distribution.Simple.Configure.html#checkForeignDeps"><span class="hs-identifier hs-type">checkForeignDeps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1701"></span><span id="checkForeignDeps"><span class="annot"><span class="annottext">checkForeignDeps :: PackageDescription -&gt; LocalBuildInfo -&gt; Verbosity -&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#checkForeignDeps"><span class="hs-identifier hs-var hs-var">checkForeignDeps</span></a></span></span><span> </span><span id="local-6989586621679746527"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746527"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span id="local-6989586621679746526"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span id="local-6989586621679746525"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746525"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1702"></span><span>  </span><span class="annot"><span class="annottext">forall {b}. [[Char]] -&gt; [[Char]] -&gt; IO b -&gt; IO b -&gt; IO b
</span><a href="#local-6989586621679746524"><span class="hs-identifier hs-var">ifBuildsWith</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746523"><span class="hs-identifier hs-var">allHeaders</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746522"><span class="hs-identifier hs-var">commonCcArgs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; [[Char]]
</span><a href="#local-6989586621679746521"><span class="hs-identifier hs-var">makeLdArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746520"><span class="hs-identifier hs-var">allLibs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- I'm feeling</span><span>
</span><span id="line-1703"></span><span>                                                               </span><span class="hs-comment">-- lucky</span><span>
</span><span id="line-1704"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1705"></span><span>           </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679746519"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746519"><span class="hs-identifier hs-var">missingLibs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO [[Char]]
</span><a href="#local-6989586621679746518"><span class="hs-identifier hs-var">findMissingLibs</span></a></span><span>
</span><span id="line-1706"></span><span>               </span><span id="local-6989586621679746517"><span class="annot"><span class="annottext">Maybe (Either [Char] [Char])
</span><a href="#local-6989586621679746517"><span class="hs-identifier hs-var">missingHdr</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Maybe (Either [Char] [Char]))
</span><a href="#local-6989586621679746516"><span class="hs-identifier hs-var">findOffendingHdr</span></a></span><span>
</span><span id="line-1707"></span><span>               </span><span class="annot"><span class="annottext">Maybe (Either [Char] [Char]) -&gt; [[Char]] -&gt; IO ()
</span><a href="#local-6989586621679746515"><span class="hs-identifier hs-var">explainErrors</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Either [Char] [Char])
</span><a href="#local-6989586621679746517"><span class="hs-identifier hs-var">missingHdr</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746519"><span class="hs-identifier hs-var">missingLibs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1708"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1709"></span><span>        </span><span id="local-6989586621679746523"><span class="annot"><span class="annottext">allHeaders :: [[Char]]
</span><a href="#local-6989586621679746523"><span class="hs-identifier hs-var hs-var">allHeaders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {b}. (BuildInfo -&gt; [b]) -&gt; [b]
</span><a href="#local-6989586621679746514"><span class="hs-identifier hs-var">collectField</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#includes"><span class="hs-identifier hs-var">includes</span></a></span><span>
</span><span id="line-1710"></span><span>        </span><span id="local-6989586621679746520"><span class="annot"><span class="annottext">allLibs :: [[Char]]
</span><a href="#local-6989586621679746520"><span class="hs-identifier hs-var hs-var">allLibs</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {b}. (BuildInfo -&gt; [b]) -&gt; [b]
</span><a href="#local-6989586621679746514"><span class="hs-identifier hs-var">collectField</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#extraLibs"><span class="hs-identifier hs-var">extraLibs</span></a></span><span>
</span><span id="line-1711"></span><span>
</span><span id="line-1712"></span><span>        </span><span id="local-6989586621679746524"><span class="annot"><span class="annottext">ifBuildsWith :: [[Char]] -&gt; [[Char]] -&gt; IO b -&gt; IO b -&gt; IO b
</span><a href="#local-6989586621679746524"><span class="hs-identifier hs-var hs-var">ifBuildsWith</span></a></span></span><span> </span><span id="local-6989586621679746510"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746510"><span class="hs-identifier hs-var">headers</span></a></span></span><span> </span><span id="local-6989586621679746509"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746509"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621679746508"><span class="annot"><span class="annottext">IO b
</span><a href="#local-6989586621679746508"><span class="hs-identifier hs-var">success</span></a></span></span><span> </span><span id="local-6989586621679746507"><span class="annot"><span class="annottext">IO b
</span><a href="#local-6989586621679746507"><span class="hs-identifier hs-var">failure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1713"></span><span>            </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679746506"><span class="hs-identifier hs-var">checkDuplicateHeaders</span></a></span><span>
</span><span id="line-1714"></span><span>            </span><span id="local-6989586621679746505"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746505"><span class="hs-identifier hs-var">ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [[Char]] -&gt; IO Bool
</span><a href="#local-6989586621679746504"><span class="hs-identifier hs-var">builds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[Char]] -&gt; [Char]
</span><a href="#local-6989586621679746503"><span class="hs-identifier hs-var">makeProgram</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746510"><span class="hs-identifier hs-var">headers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746509"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1715"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746505"><span class="hs-identifier hs-var">ok</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">IO b
</span><a href="#local-6989586621679746508"><span class="hs-identifier hs-var">success</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">IO b
</span><a href="#local-6989586621679746507"><span class="hs-identifier hs-var">failure</span></a></span><span>
</span><span id="line-1716"></span><span>
</span><span id="line-1717"></span><span>        </span><span class="hs-comment">-- Ensure that there is only one header with a given name</span><span>
</span><span id="line-1718"></span><span>        </span><span class="hs-comment">-- in either the generated (most likely by `configure`)</span><span>
</span><span id="line-1719"></span><span>        </span><span class="hs-comment">-- build directory (e.g. `dist/build`) or in the source directory.</span><span>
</span><span id="line-1720"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-1721"></span><span>        </span><span class="hs-comment">-- If it exists in both, we'll remove the one in the source</span><span>
</span><span id="line-1722"></span><span>        </span><span class="hs-comment">-- directory, as the generated should take precedence.</span><span>
</span><span id="line-1723"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-1724"></span><span>        </span><span class="hs-comment">-- C compilers like to prefer source local relative includes,</span><span>
</span><span id="line-1725"></span><span>        </span><span class="hs-comment">-- so the search paths provided to the compiler via -I are</span><span>
</span><span id="line-1726"></span><span>        </span><span class="hs-comment">-- ignored if the included file can be found relative to the</span><span>
</span><span id="line-1727"></span><span>        </span><span class="hs-comment">-- including file.  As such we need to take drastic measures</span><span>
</span><span id="line-1728"></span><span>        </span><span class="hs-comment">-- and delete the offending file in the source directory.</span><span>
</span><span id="line-1729"></span><span>        </span><span id="local-6989586621679746506"><span class="annot"><span class="annottext">checkDuplicateHeaders :: IO ()
</span><a href="#local-6989586621679746506"><span class="hs-identifier hs-var hs-var">checkDuplicateHeaders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1730"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746482"><span class="annot"><span class="annottext">relIncDirs :: [[Char]]
</span><a href="#local-6989586621679746482"><span class="hs-identifier hs-var hs-var">relIncDirs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Bool
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#isAbsolute"><span class="hs-identifier hs-var">isAbsolute</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {b}. (BuildInfo -&gt; [b]) -&gt; [b]
</span><a href="#local-6989586621679746514"><span class="hs-identifier hs-var">collectField</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#includeDirs"><span class="hs-identifier hs-var">includeDirs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1731"></span><span>              </span><span id="local-6989586621679746478"><span class="annot"><span class="annottext">isHeader :: [Char] -&gt; Bool
</span><a href="#local-6989586621679746478"><span class="hs-identifier hs-var hs-var">isHeader</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#isSuffixOf"><span class="hs-identifier hs-var">isSuffixOf</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;.h&quot;</span></span><span>
</span><span id="line-1732"></span><span>          </span><span id="local-6989586621679746476"><span class="annot"><span class="annottext">[[[Char]]]
</span><a href="#local-6989586621679746476"><span class="hs-identifier hs-var">genHeaders</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#for"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746482"><span class="hs-identifier hs-var">relIncDirs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679746474"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746474"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1733"></span><span>            </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746474"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Bool
</span><a href="#local-6989586621679746478"><span class="hs-identifier hs-var">isHeader</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span>
</span><span id="line-1734"></span><span>            </span><span class="annot"><span class="annottext">[Char] -&gt; IO [[Char]]
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#listDirectory"><span class="hs-identifier hs-var">listDirectory</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; [Char]
</span><a href="Distribution.Types.LocalBuildInfo.html#buildDir"><span class="hs-identifier hs-var">buildDir</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746474"><span class="hs-identifier hs-var">dir</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. IO a -&gt; (IOException -&gt; IO a) -&gt; IO a
</span><a href="Distribution.Compat.Exception.html#catchIO"><span class="hs-operator hs-var">`catchIO`</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">IOException
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1735"></span><span>          </span><span id="local-6989586621679746473"><span class="annot"><span class="annottext">[[[Char]]]
</span><a href="#local-6989586621679746473"><span class="hs-identifier hs-var">srcHeaders</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#for"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746482"><span class="hs-identifier hs-var">relIncDirs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679746472"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746472"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1736"></span><span>            </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746472"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Bool
</span><a href="#local-6989586621679746478"><span class="hs-identifier hs-var">isHeader</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span>
</span><span id="line-1737"></span><span>            </span><span class="annot"><span class="annottext">[Char] -&gt; IO [[Char]]
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#listDirectory"><span class="hs-identifier hs-var">listDirectory</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; [Char]
</span><a href="#local-6989586621679746471"><span class="hs-identifier hs-var">baseDir</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746472"><span class="hs-identifier hs-var">dir</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. IO a -&gt; (IOException -&gt; IO a) -&gt; IO a
</span><a href="Distribution.Compat.Exception.html#catchIO"><span class="hs-operator hs-var">`catchIO`</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">IOException
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1738"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746466"><span class="annot"><span class="annottext">commonHeaders :: [[Char]]
</span><a href="#local-6989586621679746466"><span class="hs-identifier hs-var hs-var">commonHeaders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a></span><span> </span><span class="annot"><span class="annottext">[[[Char]]]
</span><a href="#local-6989586621679746476"><span class="hs-identifier hs-var">genHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#intersect"><span class="hs-operator hs-var">`intersect`</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a></span><span> </span><span class="annot"><span class="annottext">[[[Char]]]
</span><a href="#local-6989586621679746473"><span class="hs-identifier hs-var">srcHeaders</span></a></span><span>
</span><span id="line-1739"></span><span>          </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#for_"><span class="hs-identifier hs-var">for_</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746466"><span class="hs-identifier hs-var">commonHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679746464"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746464"><span class="hs-identifier hs-var">hdr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1740"></span><span>            </span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746525"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Duplicate header found in &quot;</span></span><span>
</span><span id="line-1741"></span><span>                          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; [Char]
</span><a href="Distribution.Types.LocalBuildInfo.html#buildDir"><span class="hs-identifier hs-var">buildDir</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746464"><span class="hs-identifier hs-var">hdr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1742"></span><span>                          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; and &quot;</span></span><span>
</span><span id="line-1743"></span><span>                          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; [Char]
</span><a href="#local-6989586621679746471"><span class="hs-identifier hs-var">baseDir</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746464"><span class="hs-identifier hs-var">hdr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1744"></span><span>                          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;; removing &quot;</span></span><span>
</span><span id="line-1745"></span><span>                          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; [Char]
</span><a href="#local-6989586621679746471"><span class="hs-identifier hs-var">baseDir</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746464"><span class="hs-identifier hs-var">hdr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1746"></span><span>            </span><span class="annot"><span class="annottext">[Char] -&gt; IO ()
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#removeFile"><span class="hs-identifier hs-var">removeFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; [Char]
</span><a href="#local-6989586621679746471"><span class="hs-identifier hs-var">baseDir</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746464"><span class="hs-identifier hs-var">hdr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1747"></span><span>
</span><span id="line-1748"></span><span>        </span><span id="local-6989586621679746516"><span class="annot"><span class="annottext">findOffendingHdr :: IO (Maybe (Either [Char] [Char]))
</span><a href="#local-6989586621679746516"><span class="hs-identifier hs-var hs-var">findOffendingHdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1749"></span><span>            </span><span class="annot"><span class="annottext">forall {b}. [[Char]] -&gt; [[Char]] -&gt; IO b -&gt; IO b -&gt; IO b
</span><a href="#local-6989586621679746524"><span class="hs-identifier hs-var">ifBuildsWith</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746523"><span class="hs-identifier hs-var">allHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746462"><span class="hs-identifier hs-var">ccArgs</span></a></span><span>
</span><span id="line-1750"></span><span>                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1751"></span><span>                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[[Char]]] -&gt; IO (Maybe (Either [Char] [Char]))
</span><a href="#local-6989586621679746461"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#tail"><span class="hs-identifier hs-var">Unsafe.tail</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#inits"><span class="hs-identifier hs-var">inits</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746523"><span class="hs-identifier hs-var">allHeaders</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- inits always contains at least []</span><span>
</span><span id="line-1752"></span><span>            </span><span class="hs-keyword">where</span><span>
</span><span id="line-1753"></span><span>              </span><span id="local-6989586621679746461"><span class="annot"><span class="annottext">go :: [[[Char]]] -&gt; IO (Maybe (Either [Char] [Char]))
</span><a href="#local-6989586621679746461"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>       </span><span class="hs-comment">-- cannot happen</span><span>
</span><span id="line-1754"></span><span>              </span><span class="annot"><a href="#local-6989586621679746461"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679746455"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746455"><span class="hs-identifier hs-var">hdrs</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679746454"><span class="annot"><span class="annottext">[[[Char]]]
</span><a href="#local-6989586621679746454"><span class="hs-identifier hs-var">hdrsInits</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1755"></span><span>                    </span><span class="hs-comment">-- Try just preprocessing first</span><span>
</span><span id="line-1756"></span><span>                    </span><span class="annot"><span class="annottext">forall {b}. [[Char]] -&gt; [[Char]] -&gt; IO b -&gt; IO b -&gt; IO b
</span><a href="#local-6989586621679746524"><span class="hs-identifier hs-var">ifBuildsWith</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746455"><span class="hs-identifier hs-var">hdrs</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746453"><span class="hs-identifier hs-var">cppArgs</span></a></span><span>
</span><span id="line-1757"></span><span>                      </span><span class="hs-comment">-- If that works, try compiling too</span><span>
</span><span id="line-1758"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {b}. [[Char]] -&gt; [[Char]] -&gt; IO b -&gt; IO b -&gt; IO b
</span><a href="#local-6989586621679746524"><span class="hs-identifier hs-var">ifBuildsWith</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746455"><span class="hs-identifier hs-var">hdrs</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746462"><span class="hs-identifier hs-var">ccArgs</span></a></span><span>
</span><span id="line-1759"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[[Char]]] -&gt; IO (Maybe (Either [Char] [Char]))
</span><a href="#local-6989586621679746461"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[[[Char]]]
</span><a href="#local-6989586621679746454"><span class="hs-identifier hs-var">hdrsInits</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1760"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><a href="../../base-4.16.3.0/src/Data-Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Maybe a
</span><a href="Distribution.Utils.Generic.html#safeLast"><span class="hs-identifier hs-var">safeLast</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746455"><span class="hs-identifier hs-var">hdrs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1761"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Maybe a
</span><a href="Distribution.Utils.Generic.html#safeLast"><span class="hs-identifier hs-var">safeLast</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746455"><span class="hs-identifier hs-var">hdrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1762"></span><span>
</span><span id="line-1763"></span><span>
</span><span id="line-1764"></span><span>              </span><span id="local-6989586621679746453"><span class="annot"><span class="annottext">cppArgs :: [[Char]]
</span><a href="#local-6989586621679746453"><span class="hs-identifier hs-var hs-var">cppArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-E&quot;</span></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746449"><span class="hs-identifier hs-var">commonCppArgs</span></a></span><span> </span><span class="hs-comment">-- preprocess only</span><span>
</span><span id="line-1765"></span><span>              </span><span id="local-6989586621679746462"><span class="annot"><span class="annottext">ccArgs :: [[Char]]
</span><a href="#local-6989586621679746462"><span class="hs-identifier hs-var hs-var">ccArgs</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-c&quot;</span></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746522"><span class="hs-identifier hs-var">commonCcArgs</span></a></span><span>  </span><span class="hs-comment">-- don't try to link</span><span>
</span><span id="line-1766"></span><span>
</span><span id="line-1767"></span><span>        </span><span id="local-6989586621679746518"><span class="annot"><span class="annottext">findMissingLibs :: IO [[Char]]
</span><a href="#local-6989586621679746518"><span class="hs-identifier hs-var hs-var">findMissingLibs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {b}. [[Char]] -&gt; [[Char]] -&gt; IO b -&gt; IO b -&gt; IO b
</span><a href="#local-6989586621679746524"><span class="hs-identifier hs-var">ifBuildsWith</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[Char]] -&gt; [[Char]]
</span><a href="#local-6989586621679746521"><span class="hs-identifier hs-var">makeLdArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746520"><span class="hs-identifier hs-var">allLibs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1768"></span><span>                                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1769"></span><span>                                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a.
Applicative m =&gt;
(a -&gt; m Bool) -&gt; [a] -&gt; m [a]
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#filterM"><span class="hs-identifier hs-var">filterM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; IO Bool
</span><a href="#local-6989586621679746443"><span class="hs-identifier hs-var">libExists</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746520"><span class="hs-identifier hs-var">allLibs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1770"></span><span>
</span><span id="line-1771"></span><span>        </span><span id="local-6989586621679746443"><span class="annot"><span class="annottext">libExists :: [Char] -&gt; IO Bool
</span><a href="#local-6989586621679746443"><span class="hs-identifier hs-var hs-var">libExists</span></a></span></span><span> </span><span id="local-6989586621679746442"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746442"><span class="hs-identifier hs-var">lib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [[Char]] -&gt; IO Bool
</span><a href="#local-6989586621679746504"><span class="hs-identifier hs-var">builds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[Char]] -&gt; [Char]
</span><a href="#local-6989586621679746503"><span class="hs-identifier hs-var">makeProgram</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[Char]] -&gt; [[Char]]
</span><a href="#local-6989586621679746521"><span class="hs-identifier hs-var">makeLdArgs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746442"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1772"></span><span>
</span><span id="line-1773"></span><span>        </span><span id="local-6989586621679746471"><span class="annot"><span class="annottext">baseDir :: LocalBuildInfo -&gt; [Char]
</span><a href="#local-6989586621679746471"><span class="hs-identifier hs-var hs-var">baseDir</span></a></span></span><span> </span><span id="local-6989586621679746438"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746438"><span class="hs-identifier hs-var">lbi'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#takeDirectory"><span class="hs-identifier hs-var">takeDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Maybe [Char]
</span><a href="Distribution.Types.LocalBuildInfo.html#cabalFilePath"><span class="hs-identifier hs-var">cabalFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746438"><span class="hs-identifier hs-var">lbi'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1774"></span><span>
</span><span id="line-1775"></span><span>        </span><span id="local-6989586621679746449"><span class="annot"><span class="annottext">commonCppArgs :: [[Char]]
</span><a href="#local-6989586621679746449"><span class="hs-identifier hs-var hs-var">commonCppArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; [[Char]]
</span><a href="Distribution.Simple.PreProcess.html#platformDefines"><span class="hs-identifier hs-var">platformDefines</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1776"></span><span>                     </span><span class="hs-comment">-- TODO: This is a massive hack, to work around the</span><span>
</span><span id="line-1777"></span><span>                     </span><span class="hs-comment">-- fact that the test performed here should be</span><span>
</span><span id="line-1778"></span><span>                     </span><span class="hs-comment">-- PER-component (c.f. the &quot;I'm Feeling Lucky&quot;; we</span><span>
</span><span id="line-1779"></span><span>                     </span><span class="hs-comment">-- should NOT be glomming everything together.)</span><span>
</span><span id="line-1780"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-I&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; [Char]
</span><a href="Distribution.Types.LocalBuildInfo.html#buildDir"><span class="hs-identifier hs-var">buildDir</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;autogen&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1781"></span><span>                     </span><span class="hs-comment">-- `configure' may generate headers in the build directory</span><span>
</span><span id="line-1782"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-I&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; [Char]
</span><a href="Distribution.Types.LocalBuildInfo.html#buildDir"><span class="hs-identifier hs-var">buildDir</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746423"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-1783"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679746423"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746423"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="Distribution.Utils.Generic.html#ordNub"><span class="hs-identifier hs-var">ordNub</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {b}. (BuildInfo -&gt; [b]) -&gt; [b]
</span><a href="#local-6989586621679746514"><span class="hs-identifier hs-var">collectField</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#includeDirs"><span class="hs-identifier hs-var">includeDirs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1784"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; Bool
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#isAbsolute"><span class="hs-identifier hs-var">isAbsolute</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746423"><span class="hs-identifier hs-var">dir</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1785"></span><span>                     </span><span class="hs-comment">-- we might also reference headers from the</span><span>
</span><span id="line-1786"></span><span>                     </span><span class="hs-comment">-- packages directory.</span><span>
</span><span id="line-1787"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-I&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; [Char]
</span><a href="#local-6989586621679746471"><span class="hs-identifier hs-var">baseDir</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746421"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-1788"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679746421"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746421"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="Distribution.Utils.Generic.html#ordNub"><span class="hs-identifier hs-var">ordNub</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {b}. (BuildInfo -&gt; [b]) -&gt; [b]
</span><a href="#local-6989586621679746514"><span class="hs-identifier hs-var">collectField</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#includeDirs"><span class="hs-identifier hs-var">includeDirs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1789"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; Bool
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#isAbsolute"><span class="hs-identifier hs-var">isAbsolute</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746421"><span class="hs-identifier hs-var">dir</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1790"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-I&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746420"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679746420"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746420"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="Distribution.Utils.Generic.html#ordNub"><span class="hs-identifier hs-var">ordNub</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {b}. (BuildInfo -&gt; [b]) -&gt; [b]
</span><a href="#local-6989586621679746514"><span class="hs-identifier hs-var">collectField</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#includeDirs"><span class="hs-identifier hs-var">includeDirs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1791"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Bool
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#isAbsolute"><span class="hs-identifier hs-var">isAbsolute</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746420"><span class="hs-identifier hs-var">dir</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1792"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-I&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; [Char]
</span><a href="#local-6989586621679746471"><span class="hs-identifier hs-var">baseDir</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1793"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall {b}. (BuildInfo -&gt; [b]) -&gt; [b]
</span><a href="#local-6989586621679746514"><span class="hs-identifier hs-var">collectField</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#cppOptions"><span class="hs-identifier hs-var">cppOptions</span></a></span><span>
</span><span id="line-1794"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall {b}. (BuildInfo -&gt; [b]) -&gt; [b]
</span><a href="#local-6989586621679746514"><span class="hs-identifier hs-var">collectField</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#ccOptions"><span class="hs-identifier hs-var">ccOptions</span></a></span><span>
</span><span id="line-1795"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-I&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746418"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-1796"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679746418"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746418"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="Distribution.Utils.Generic.html#ordNub"><span class="hs-identifier hs-var">ordNub</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746417"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-1797"></span><span>                                        </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679746416"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746416"><span class="hs-identifier hs-var">dep</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[InstalledPackageInfo]
</span><a href="#local-6989586621679746415"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-1798"></span><span>                                        </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746417"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746417"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo -&gt; [[Char]]
</span><a href="Distribution.Types.InstalledPackageInfo.html#includeDirs"><span class="hs-identifier hs-var">IPI.includeDirs</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746416"><span class="hs-identifier hs-var">dep</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1799"></span><span>                                 </span><span class="hs-comment">-- dedupe include dirs of dependencies</span><span>
</span><span id="line-1800"></span><span>                                 </span><span class="hs-comment">-- to prevent quadratic blow-up</span><span>
</span><span id="line-1801"></span><span>                        </span><span class="hs-special">]</span><span>
</span><span id="line-1802"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746413"><span class="hs-identifier hs-var">opt</span></a></span><span>
</span><span id="line-1803"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679746412"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746412"><span class="hs-identifier hs-var">dep</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[InstalledPackageInfo]
</span><a href="#local-6989586621679746415"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-1804"></span><span>                        </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746413"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746413"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo -&gt; [[Char]]
</span><a href="Distribution.Types.InstalledPackageInfo.html#ccOptions"><span class="hs-identifier hs-var">IPI.ccOptions</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746412"><span class="hs-identifier hs-var">dep</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1805"></span><span>
</span><span id="line-1806"></span><span>        </span><span id="local-6989586621679746522"><span class="annot"><span class="annottext">commonCcArgs :: [[Char]]
</span><a href="#local-6989586621679746522"><span class="hs-identifier hs-var hs-var">commonCcArgs</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746449"><span class="hs-identifier hs-var">commonCppArgs</span></a></span><span>
</span><span id="line-1807"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall {b}. (BuildInfo -&gt; [b]) -&gt; [b]
</span><a href="#local-6989586621679746514"><span class="hs-identifier hs-var">collectField</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#ccOptions"><span class="hs-identifier hs-var">ccOptions</span></a></span><span>
</span><span id="line-1808"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746410"><span class="hs-identifier hs-var">opt</span></a></span><span>
</span><span id="line-1809"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679746409"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746409"><span class="hs-identifier hs-var">dep</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[InstalledPackageInfo]
</span><a href="#local-6989586621679746415"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-1810"></span><span>                        </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746410"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746410"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo -&gt; [[Char]]
</span><a href="Distribution.Types.InstalledPackageInfo.html#ccOptions"><span class="hs-identifier hs-var">IPI.ccOptions</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746409"><span class="hs-identifier hs-var">dep</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1811"></span><span>
</span><span id="line-1812"></span><span>        </span><span id="local-6989586621679746402"><span class="annot"><span class="annottext">commonLdArgs :: [[Char]]
</span><a href="#local-6989586621679746402"><span class="hs-identifier hs-var hs-var">commonLdArgs</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-L&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746401"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-1813"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679746401"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746401"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="Distribution.Utils.Generic.html#ordNub"><span class="hs-identifier hs-var">ordNub</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {b}. (BuildInfo -&gt; [b]) -&gt; [b]
</span><a href="#local-6989586621679746514"><span class="hs-identifier hs-var">collectField</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#extraLibDirs"><span class="hs-identifier hs-var">extraLibDirs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1814"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall {b}. (BuildInfo -&gt; [b]) -&gt; [b]
</span><a href="#local-6989586621679746514"><span class="hs-identifier hs-var">collectField</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [[Char]]
</span><a href="Distribution.Types.BuildInfo.html#ldOptions"><span class="hs-identifier hs-var">ldOptions</span></a></span><span>
</span><span id="line-1815"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-L&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746400"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-1816"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679746400"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746400"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="Distribution.Utils.Generic.html#ordNub"><span class="hs-identifier hs-var">ordNub</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746399"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-1817"></span><span>                                        </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679746398"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746398"><span class="hs-identifier hs-var">dep</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[InstalledPackageInfo]
</span><a href="#local-6989586621679746415"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-1818"></span><span>                                        </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679746399"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746399"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo -&gt; [[Char]]
</span><a href="Distribution.Types.InstalledPackageInfo.html#libraryDirs"><span class="hs-identifier hs-var">IPI.libraryDirs</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746398"><span class="hs-identifier hs-var">dep</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1819"></span><span>                        </span><span class="hs-special">]</span><span>
</span><span id="line-1820"></span><span>                     </span><span class="hs-comment">--TODO: do we also need dependent packages' ld options?</span><span>
</span><span id="line-1821"></span><span>        </span><span id="local-6989586621679746521"><span class="annot"><span class="annottext">makeLdArgs :: [[Char]] -&gt; [[Char]]
</span><a href="#local-6989586621679746521"><span class="hs-identifier hs-var hs-var">makeLdArgs</span></a></span></span><span> </span><span id="local-6989586621679746394"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746394"><span class="hs-identifier hs-var">libs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-l&quot;</span></span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746393"><span class="hs-identifier hs-var">lib</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679746393"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746393"><span class="hs-identifier hs-var">lib</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746394"><span class="hs-identifier hs-var">libs</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746402"><span class="hs-identifier hs-var">commonLdArgs</span></a></span><span>
</span><span id="line-1822"></span><span>
</span><span id="line-1823"></span><span>        </span><span id="local-6989586621679746503"><span class="annot"><span class="annottext">makeProgram :: [[Char]] -&gt; [Char]
</span><a href="#local-6989586621679746503"><span class="hs-identifier hs-var hs-var">makeProgram</span></a></span></span><span> </span><span id="local-6989586621679746388"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746388"><span class="hs-identifier hs-var">hdrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; [Char]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#unlines"><span class="hs-identifier hs-var">unlines</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1824"></span><span>                           </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;#include \&quot;&quot;</span></span><span>  </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746387"><span class="hs-identifier hs-var">hdr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679746387"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746387"><span class="hs-identifier hs-var">hdr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746388"><span class="hs-identifier hs-var">hdrs</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-1825"></span><span>                           </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;int main(int argc, char** argv) { return 0; }&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-1826"></span><span>
</span><span id="line-1827"></span><span>        </span><span id="local-6989586621679746514"><span class="annot"><span class="annottext">collectField :: (BuildInfo -&gt; [b]) -&gt; [b]
</span><a href="#local-6989586621679746514"><span class="hs-identifier hs-var hs-var">collectField</span></a></span></span><span> </span><span id="local-6989586621679746385"><span class="annot"><span class="annottext">BuildInfo -&gt; [b]
</span><a href="#local-6989586621679746385"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [b]
</span><a href="#local-6989586621679746385"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[BuildInfo]
</span><a href="#local-6989586621679746384"><span class="hs-identifier hs-var">allBi</span></a></span><span>
</span><span id="line-1828"></span><span>        </span><span id="local-6989586621679746384"><span class="annot"><span class="annottext">allBi :: [BuildInfo]
</span><a href="#local-6989586621679746384"><span class="hs-identifier hs-var hs-var">allBi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageDescription -&gt; ComponentRequestedSpec -&gt; [BuildInfo]
</span><a href="Distribution.Types.PackageDescription.html#enabledBuildInfos"><span class="hs-identifier hs-var">enabledBuildInfos</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746527"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ComponentRequestedSpec
</span><a href="Distribution.Types.LocalBuildInfo.html#componentEnabledSpec"><span class="hs-identifier hs-var">componentEnabledSpec</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1829"></span><span>        </span><span id="local-6989586621679746415"><span class="annot"><span class="annottext">deps :: [InstalledPackageInfo]
</span><a href="#local-6989586621679746415"><span class="hs-identifier hs-var hs-var">deps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. PackageInstalled a =&gt; PackageIndex a -&gt; [a]
</span><a href="Distribution.Simple.PackageIndex.html#topologicalOrder"><span class="hs-identifier hs-var">PackageIndex.topologicalOrder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; InstalledPackageIndex
</span><a href="Distribution.Types.LocalBuildInfo.html#installedPkgs"><span class="hs-identifier hs-var">installedPkgs</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1830"></span><span>
</span><span id="line-1831"></span><span>        </span><span id="local-6989586621679746504"><span class="annot"><span class="annottext">builds :: [Char] -&gt; [[Char]] -&gt; IO Bool
</span><a href="#local-6989586621679746504"><span class="hs-identifier hs-var hs-var">builds</span></a></span></span><span> </span><span id="local-6989586621679746370"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746370"><span class="hs-identifier hs-var">program</span></a></span></span><span> </span><span id="local-6989586621679746369"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746369"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1832"></span><span>            </span><span id="local-6989586621679746368"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746368"><span class="hs-identifier hs-var">tempDir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO [Char]
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#getTemporaryDirectory"><span class="hs-identifier hs-var">getTemporaryDirectory</span></a></span><span>
</span><span id="line-1833"></span><span>            </span><span class="annot"><span class="annottext">forall a. [Char] -&gt; [Char] -&gt; ([Char] -&gt; Handle -&gt; IO a) -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#withTempFile"><span class="hs-identifier hs-var">withTempFile</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746368"><span class="hs-identifier hs-var">tempDir</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;.c&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679746366"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746366"><span class="hs-identifier hs-var">cName</span></a></span></span><span> </span><span id="local-6989586621679746365"><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679746365"><span class="hs-identifier hs-var">cHnd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1834"></span><span>              </span><span class="annot"><span class="annottext">forall a. [Char] -&gt; [Char] -&gt; ([Char] -&gt; Handle -&gt; IO a) -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#withTempFile"><span class="hs-identifier hs-var">withTempFile</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746368"><span class="hs-identifier hs-var">tempDir</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679746364"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746364"><span class="hs-identifier hs-var">oNname</span></a></span></span><span> </span><span id="local-6989586621679746363"><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679746363"><span class="hs-identifier hs-var">oHnd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1835"></span><span>                </span><span class="annot"><span class="annottext">Handle -&gt; [Char] -&gt; IO ()
</span><a href="../../base-4.16.3.0/src/GHC-IO-Handle-Text.html#hPutStrLn"><span class="hs-identifier hs-var">hPutStrLn</span></a></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679746365"><span class="hs-identifier hs-var">cHnd</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746370"><span class="hs-identifier hs-var">program</span></a></span><span>
</span><span id="line-1836"></span><span>                </span><span class="annot"><span class="annottext">Handle -&gt; IO ()
</span><a href="../../base-4.16.3.0/src/GHC-IO-Handle.html#hClose"><span class="hs-identifier hs-var">hClose</span></a></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679746365"><span class="hs-identifier hs-var">cHnd</span></a></span><span>
</span><span id="line-1837"></span><span>                </span><span class="annot"><span class="annottext">Handle -&gt; IO ()
</span><a href="../../base-4.16.3.0/src/GHC-IO-Handle.html#hClose"><span class="hs-identifier hs-var">hClose</span></a></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679746363"><span class="hs-identifier hs-var">oHnd</span></a></span><span>
</span><span id="line-1838"></span><span>                </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; Program -&gt; ProgramDb -&gt; [[Char]] -&gt; IO [Char]
</span><a href="Distribution.Simple.Program.html#getDbProgramOutput"><span class="hs-identifier hs-var">getDbProgramOutput</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746525"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-1839"></span><span>                  </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#gccProgram"><span class="hs-identifier hs-var">gccProgram</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProgramDb
</span><a href="Distribution.Types.LocalBuildInfo.html#withPrograms"><span class="hs-identifier hs-var">withPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746366"><span class="hs-identifier hs-var">cName</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-o&quot;</span></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746364"><span class="hs-identifier hs-var">oNname</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746369"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1840"></span><span>                </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1841"></span><span>           </span><span class="annot"><span class="annottext">forall a. IO a -&gt; (IOException -&gt; IO a) -&gt; IO a
</span><a href="Distribution.Compat.Exception.html#catchIO"><span class="hs-operator hs-var">`catchIO`</span></a></span><span>   </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">IOException
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-1842"></span><span>           </span><span class="annot"><span class="annottext">forall a. IO a -&gt; (ExitCode -&gt; IO a) -&gt; IO a
</span><a href="Distribution.Compat.Exception.html#catchExit"><span class="hs-operator hs-var">`catchExit`</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">ExitCode
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-1843"></span><span>
</span><span id="line-1844"></span><span>        </span><span id="local-6989586621679746515"><span class="annot"><span class="annottext">explainErrors :: Maybe (Either [Char] [Char]) -&gt; [[Char]] -&gt; IO ()
</span><a href="#local-6989586621679746515"><span class="hs-identifier hs-var hs-var">explainErrors</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (Either [Char] [Char])
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- should be impossible!</span><span>
</span><span id="line-1845"></span><span>        </span><span class="annot"><a href="#local-6989586621679746515"><span class="hs-identifier hs-var">explainErrors</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Either [Char] [Char])
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1846"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#isNothing"><span class="hs-identifier hs-var">isNothing</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Program -&gt; ProgramDb -&gt; Maybe ConfiguredProgram
</span><a href="Distribution.Simple.Program.Db.html#lookupProgram"><span class="hs-identifier hs-var">lookupProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#gccProgram"><span class="hs-identifier hs-var">gccProgram</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProgramDb
</span><a href="Distribution.Types.LocalBuildInfo.html#withPrograms"><span class="hs-identifier hs-var">withPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746526"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1847"></span><span>
</span><span id="line-1848"></span><span>                              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746525"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; [Char]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#unlines"><span class="hs-identifier hs-var">unlines</span></a></span><span>
</span><span id="line-1849"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;No working gcc&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1850"></span><span>                  </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;This package depends on foreign library but we cannot &quot;</span></span><span>
</span><span id="line-1851"></span><span>               </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;find a working C compiler. If you have it in a &quot;</span></span><span>
</span><span id="line-1852"></span><span>               </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;non-standard location you can use the --with-gcc &quot;</span></span><span>
</span><span id="line-1853"></span><span>               </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;flag to specify it.&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1854"></span><span>
</span><span id="line-1855"></span><span>        </span><span class="annot"><a href="#local-6989586621679746515"><span class="hs-identifier hs-var">explainErrors</span></a></span><span> </span><span id="local-6989586621679746345"><span class="annot"><span class="annottext">Maybe (Either [Char] [Char])
</span><a href="#local-6989586621679746345"><span class="hs-identifier hs-var">hdr</span></a></span></span><span> </span><span id="local-6989586621679746344"><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746344"><span class="hs-identifier hs-var">libs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746525"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; [Char]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#unlines"><span class="hs-identifier hs-var">unlines</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1856"></span><span>             </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746343"><span class="hs-identifier hs-var">plural</span></a></span><span>
</span><span id="line-1857"></span><span>                 </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Missing dependencies on foreign libraries:&quot;</span></span><span>
</span><span id="line-1858"></span><span>                 </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Missing dependency on a foreign library:&quot;</span></span><span>
</span><span id="line-1859"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746342"><span class="hs-identifier hs-var">missing</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1860"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Either [Char] [Char])
</span><a href="#local-6989586621679746345"><span class="hs-identifier hs-var">hdr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1861"></span><span>               </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679746341"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746341"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;* Missing (or bad) header file: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746341"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1862"></span><span>               </span><span class="annot"><span class="annottext">Maybe (Either [Char] [Char])
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1863"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746344"><span class="hs-identifier hs-var">libs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1864"></span><span>               </span><span class="hs-special">[</span><span class="hs-special">]</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1865"></span><span>               </span><span class="hs-special">[</span><span id="local-6989586621679746340"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746340"><span class="hs-identifier hs-var">lib</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;* Missing (or bad) C library: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746340"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1866"></span><span>               </span><span class="annot"><span class="annottext">[[Char]]
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;* Missing (or bad) C libraries: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-1867"></span><span>                         </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#intercalate"><span class="hs-identifier hs-var">intercalate</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746344"><span class="hs-identifier hs-var">libs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1868"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746343"><span class="hs-identifier hs-var">plural</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746339"><span class="hs-identifier hs-var">messagePlural</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746338"><span class="hs-identifier hs-var">messageSingular</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746342"><span class="hs-identifier hs-var">missing</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1869"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Either [Char] [Char])
</span><a href="#local-6989586621679746345"><span class="hs-identifier hs-var">hdr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1870"></span><span>               </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span>  </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746337"><span class="hs-identifier hs-var">headerCppMessage</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1871"></span><span>               </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679746336"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746336"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746342"><span class="hs-identifier hs-var">missing</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;* &quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1872"></span><span>                                   </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Bad header file: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746336"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-1873"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746335"><span class="hs-identifier hs-var">headerCcMessage</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1874"></span><span>               </span><span class="annot"><span class="annottext">Maybe (Either [Char] [Char])
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1875"></span><span>
</span><span id="line-1876"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1877"></span><span>            </span><span id="local-6989586621679746343"><span class="annot"><span class="annottext">plural :: Bool
</span><a href="#local-6989586621679746343"><span class="hs-identifier hs-var hs-var">plural</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746344"><span class="hs-identifier hs-var">libs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-1878"></span><span>            </span><span class="hs-comment">-- Is there something missing? (as opposed to broken)</span><span>
</span><span id="line-1879"></span><span>            </span><span id="local-6989586621679746342"><span class="annot"><span class="annottext">missing :: Bool
</span><a href="#local-6989586621679746342"><span class="hs-identifier hs-var hs-var">missing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746344"><span class="hs-identifier hs-var">libs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1880"></span><span>                   </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Either [Char] [Char])
</span><a href="#local-6989586621679746345"><span class="hs-identifier hs-var">hdr</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Maybe (Either [Char] [Char])
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1881"></span><span>
</span><span id="line-1882"></span><span>        </span><span id="local-6989586621679746338"><span class="annot"><span class="annottext">messageSingular :: [Char]
</span><a href="#local-6989586621679746338"><span class="hs-identifier hs-var hs-var">messageSingular</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1883"></span><span>             </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;This problem can usually be solved by installing the system &quot;</span></span><span>
</span><span id="line-1884"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;package that provides this library (you may need the &quot;</span></span><span>
</span><span id="line-1885"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;\&quot;-dev\&quot; version). If the library is already installed &quot;</span></span><span>
</span><span id="line-1886"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;but in a non-standard location then you can use the flags &quot;</span></span><span>
</span><span id="line-1887"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;--extra-include-dirs= and --extra-lib-dirs= to specify &quot;</span></span><span>
</span><span id="line-1888"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;where it is.&quot;</span></span><span>
</span><span id="line-1889"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;If the library file does exist, it may contain errors that &quot;</span></span><span>
</span><span id="line-1890"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;are caught by the C compiler at the preprocessing stage. &quot;</span></span><span>
</span><span id="line-1891"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;In this case you can re-run configure with the verbosity &quot;</span></span><span>
</span><span id="line-1892"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;flag -v3 to see the error messages.&quot;</span></span><span>
</span><span id="line-1893"></span><span>        </span><span id="local-6989586621679746339"><span class="annot"><span class="annottext">messagePlural :: [Char]
</span><a href="#local-6989586621679746339"><span class="hs-identifier hs-var hs-var">messagePlural</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1894"></span><span>             </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;This problem can usually be solved by installing the system &quot;</span></span><span>
</span><span id="line-1895"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;packages that provide these libraries (you may need the &quot;</span></span><span>
</span><span id="line-1896"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;\&quot;-dev\&quot; versions). If the libraries are already installed &quot;</span></span><span>
</span><span id="line-1897"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;but in a non-standard location then you can use the flags &quot;</span></span><span>
</span><span id="line-1898"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;--extra-include-dirs= and --extra-lib-dirs= to specify &quot;</span></span><span>
</span><span id="line-1899"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;where they are.&quot;</span></span><span>
</span><span id="line-1900"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;If the library files do exist, it may contain errors that &quot;</span></span><span>
</span><span id="line-1901"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;are caught by the C compiler at the preprocessing stage. &quot;</span></span><span>
</span><span id="line-1902"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;In this case you can re-run configure with the verbosity &quot;</span></span><span>
</span><span id="line-1903"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;flag -v3 to see the error messages.&quot;</span></span><span>
</span><span id="line-1904"></span><span>        </span><span id="local-6989586621679746337"><span class="annot"><span class="annottext">headerCppMessage :: [Char]
</span><a href="#local-6989586621679746337"><span class="hs-identifier hs-var hs-var">headerCppMessage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1905"></span><span>             </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;If the header file does exist, it may contain errors that &quot;</span></span><span>
</span><span id="line-1906"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;are caught by the C compiler at the preprocessing stage. &quot;</span></span><span>
</span><span id="line-1907"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;In this case you can re-run configure with the verbosity &quot;</span></span><span>
</span><span id="line-1908"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;flag -v3 to see the error messages.&quot;</span></span><span>
</span><span id="line-1909"></span><span>        </span><span id="local-6989586621679746335"><span class="annot"><span class="annottext">headerCcMessage :: [Char]
</span><a href="#local-6989586621679746335"><span class="hs-identifier hs-var hs-var">headerCcMessage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1910"></span><span>             </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;The header file contains a compile error. &quot;</span></span><span>
</span><span id="line-1911"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;You can re-run configure with the verbosity flag &quot;</span></span><span>
</span><span id="line-1912"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-v3 to see the error messages from the C compiler.&quot;</span></span><span>
</span><span id="line-1913"></span><span>
</span><span id="line-1914"></span><span class="hs-comment">-- | Output package check warnings and errors. Exit if any errors.</span><span>
</span><span id="line-1915"></span><span class="annot"><a href="Distribution.Simple.Configure.html#checkPackageProblems"><span class="hs-identifier hs-type">checkPackageProblems</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-1916"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1917"></span><span>                        </span><span class="hs-comment">-- ^ Path to the @.cabal@ file's directory</span><span>
</span><span id="line-1918"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.GenericPackageDescription.html#GenericPackageDescription"><span class="hs-identifier hs-type">GenericPackageDescription</span></a></span><span>
</span><span id="line-1919"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span>
</span><span id="line-1920"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1921"></span><span id="checkPackageProblems"><span class="annot"><span class="annottext">checkPackageProblems :: Verbosity
-&gt; [Char]
-&gt; GenericPackageDescription
-&gt; PackageDescription
-&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#checkPackageProblems"><span class="hs-identifier hs-var hs-var">checkPackageProblems</span></a></span></span><span> </span><span id="local-6989586621679746292"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746292"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746291"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746291"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span id="local-6989586621679746290"><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679746290"><span class="hs-identifier hs-var">gpkg</span></a></span></span><span> </span><span id="local-6989586621679746289"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746289"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1922"></span><span>  </span><span id="local-6989586621679746288"><span class="annot"><span class="annottext">[PackageCheck]
</span><a href="#local-6989586621679746288"><span class="hs-identifier hs-var">ioChecks</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; PackageDescription -&gt; [Char] -&gt; IO [PackageCheck]
</span><a href="Distribution.PackageDescription.Check.html#checkPackageFiles"><span class="hs-identifier hs-var">checkPackageFiles</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746292"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746289"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746291"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-1923"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679746286"><span class="annot"><span class="annottext">pureChecks :: [PackageCheck]
</span><a href="#local-6989586621679746286"><span class="hs-identifier hs-var hs-var">pureChecks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription
-&gt; Maybe PackageDescription -&gt; [PackageCheck]
</span><a href="Distribution.PackageDescription.Check.html#checkPackage"><span class="hs-identifier hs-var">checkPackage</span></a></span><span> </span><span class="annot"><span class="annottext">GenericPackageDescription
</span><a href="#local-6989586621679746290"><span class="hs-identifier hs-var">gpkg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746289"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1924"></span><span>      </span><span id="local-6989586621679746284"><span class="annot"><span class="annottext">errors :: [[Char]]
</span><a href="#local-6989586621679746284"><span class="hs-identifier hs-var hs-var">errors</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746283"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Distribution.PackageDescription.Check.html#PackageBuildImpossible"><span class="hs-identifier hs-type">PackageBuildImpossible</span></a></span><span> </span><span id="local-6989586621679746283"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746283"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[PackageCheck]
</span><a href="#local-6989586621679746286"><span class="hs-identifier hs-var">pureChecks</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[PackageCheck]
</span><a href="#local-6989586621679746288"><span class="hs-identifier hs-var">ioChecks</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1925"></span><span>      </span><span id="local-6989586621679746281"><span class="annot"><span class="annottext">warnings :: [[Char]]
</span><a href="#local-6989586621679746281"><span class="hs-identifier hs-var hs-var">warnings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746280"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Distribution.PackageDescription.Check.html#PackageBuildWarning"><span class="hs-identifier hs-type">PackageBuildWarning</span></a></span><span>    </span><span id="local-6989586621679746280"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746280"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[PackageCheck]
</span><a href="#local-6989586621679746286"><span class="hs-identifier hs-var">pureChecks</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[PackageCheck]
</span><a href="#local-6989586621679746288"><span class="hs-identifier hs-var">ioChecks</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1926"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746284"><span class="hs-identifier hs-var">errors</span></a></span><span>
</span><span id="line-1927"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#traverse_"><span class="hs-identifier hs-var">traverse_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Verbosity -&gt; [Char] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746292"><span class="hs-identifier hs-var">verbosity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746281"><span class="hs-identifier hs-var">warnings</span></a></span><span>
</span><span id="line-1928"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746292"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#intercalate"><span class="hs-identifier hs-var">intercalate</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;\n\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621679746284"><span class="hs-identifier hs-var">errors</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1929"></span><span>
</span><span id="line-1930"></span><span class="hs-comment">-- | Preform checks if a relocatable build is allowed</span><span>
</span><span id="line-1931"></span><span class="annot"><a href="Distribution.Simple.Configure.html#checkRelocatable"><span class="hs-identifier hs-type">checkRelocatable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-1932"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span>
</span><span id="line-1933"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>
</span><span id="line-1934"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1935"></span><span id="checkRelocatable"><span class="annot"><span class="annottext">checkRelocatable :: Verbosity -&gt; PackageDescription -&gt; LocalBuildInfo -&gt; IO ()
</span><a href="Distribution.Simple.Configure.html#checkRelocatable"><span class="hs-identifier hs-var hs-var">checkRelocatable</span></a></span></span><span> </span><span id="local-6989586621679746278"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746278"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679746277"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746277"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span id="local-6989586621679746276"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746276"><span class="hs-identifier hs-var">lbi</span></a></span></span><span>
</span><span id="line-1936"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#sequence_"><span class="hs-identifier hs-var">sequence_</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679746275"><span class="hs-identifier hs-var">checkOS</span></a></span><span>
</span><span id="line-1937"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679746274"><span class="hs-identifier hs-var">checkCompiler</span></a></span><span>
</span><span id="line-1938"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679746273"><span class="hs-identifier hs-var">packagePrefixRelative</span></a></span><span>
</span><span id="line-1939"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679746272"><span class="hs-identifier hs-var">depsPrefixRelative</span></a></span><span>
</span><span id="line-1940"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-1941"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1942"></span><span>    </span><span class="hs-comment">-- Check if the OS support relocatable builds.</span><span>
</span><span id="line-1943"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1944"></span><span>    </span><span class="hs-comment">-- If you add new OS' to this list, and your OS supports dynamic libraries</span><span>
</span><span id="line-1945"></span><span>    </span><span class="hs-comment">-- and RPATH, make sure you add your OS to RPATH-support list of:</span><span>
</span><span id="line-1946"></span><span>    </span><span class="hs-comment">-- Distribution.Simple.GHC.getRPaths</span><span>
</span><span id="line-1947"></span><span>    </span><span id="local-6989586621679746275"><span class="annot"><span class="annottext">checkOS :: IO ()
</span><a href="#local-6989586621679746275"><span class="hs-identifier hs-var hs-var">checkOS</span></a></span></span><span>
</span><span id="line-1948"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679746262"><span class="hs-identifier hs-var">os</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#OSX"><span class="hs-identifier hs-var">OSX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Linux"><span class="hs-identifier hs-var">Linux</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1949"></span><span>        </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746278"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Operating system: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679746262"><span class="hs-identifier hs-var">os</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-1950"></span><span>                </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;, does not support relocatable builds&quot;</span></span><span>
</span><span id="line-1951"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1952"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679746262"><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679746262"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746276"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1953"></span><span>
</span><span id="line-1954"></span><span>    </span><span class="hs-comment">-- Check if the Compiler support relocatable builds</span><span>
</span><span id="line-1955"></span><span>    </span><span id="local-6989586621679746274"><span class="annot"><span class="annottext">checkCompiler :: IO ()
</span><a href="#local-6989586621679746274"><span class="hs-identifier hs-var hs-var">checkCompiler</span></a></span></span><span>
</span><span id="line-1956"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; CompilerFlavor
</span><a href="Distribution.Simple.Compiler.html#compilerFlavor"><span class="hs-identifier hs-var">compilerFlavor</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746248"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1957"></span><span>        </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746278"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Compiler: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><a href="../../base-4.16.3.0/src/GHC-Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746248"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-1958"></span><span>                </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;, does not support relocatable builds&quot;</span></span><span>
</span><span id="line-1959"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1960"></span><span>        </span><span id="local-6989586621679746248"><span class="annot"><span class="annottext">comp :: Compiler
</span><a href="#local-6989586621679746248"><span class="hs-identifier hs-var hs-var">comp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Compiler
</span><a href="Distribution.Types.LocalBuildInfo.html#compiler"><span class="hs-identifier hs-var">compiler</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746276"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1961"></span><span>
</span><span id="line-1962"></span><span>    </span><span class="hs-comment">-- Check if all the install dirs are relative to same prefix</span><span>
</span><span id="line-1963"></span><span>    </span><span id="local-6989586621679746273"><span class="annot"><span class="annottext">packagePrefixRelative :: IO ()
</span><a href="#local-6989586621679746273"><span class="hs-identifier hs-var hs-var">packagePrefixRelative</span></a></span></span><span>
</span><span id="line-1964"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstallDirs [Char] -&gt; Bool
</span><a href="#local-6989586621679746238"><span class="hs-identifier hs-var">relativeInstallDirs</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679746237"><span class="hs-identifier hs-var">installDirs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1965"></span><span>        </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746278"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Installation directories are not prefix_relative:\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-1966"></span><span>                </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><a href="../../base-4.16.3.0/src/GHC-Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679746237"><span class="hs-identifier hs-var">installDirs</span></a></span><span>
</span><span id="line-1967"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1968"></span><span>        </span><span class="hs-comment">-- NB: should be good enough to check this against the default</span><span>
</span><span id="line-1969"></span><span>        </span><span class="hs-comment">-- component ID, but if we wanted to be strictly correct we'd</span><span>
</span><span id="line-1970"></span><span>        </span><span class="hs-comment">-- check for each ComponentId.</span><span>
</span><span id="line-1971"></span><span>        </span><span id="local-6989586621679746237"><span class="annot"><span class="annottext">installDirs :: InstallDirs [Char]
</span><a href="#local-6989586621679746237"><span class="hs-identifier hs-var hs-var">installDirs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageDescription
-&gt; LocalBuildInfo -&gt; CopyDest -&gt; InstallDirs [Char]
</span><a href="Distribution.Simple.LocalBuildInfo.html#absoluteInstallDirs"><span class="hs-identifier hs-var">absoluteInstallDirs</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746277"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746276"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">CopyDest
</span><a href="Distribution.Simple.InstallDirs.html#NoCopyDest"><span class="hs-identifier hs-var">NoCopyDest</span></a></span><span>
</span><span id="line-1972"></span><span>        </span><span id="local-6989586621679746236"><span class="annot"><span class="annottext">p :: [Char]
</span><a href="#local-6989586621679746236"><span class="hs-identifier hs-var hs-var">p</span></a></span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#prefix"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679746237"><span class="hs-identifier hs-var">installDirs</span></a></span><span>
</span><span id="line-1973"></span><span>        </span><span id="local-6989586621679746238"><span class="annot"><span class="annottext">relativeInstallDirs :: InstallDirs [Char] -&gt; Bool
</span><a href="#local-6989586621679746238"><span class="hs-identifier hs-var hs-var">relativeInstallDirs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.InstallDirs.html#InstallDirs"><span class="hs-identifier hs-type">InstallDirs</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679746216"><span id="local-6989586621679746217"><span id="local-6989586621679746218"><span id="local-6989586621679746219"><span id="local-6989586621679746220"><span id="local-6989586621679746221"><span id="local-6989586621679746222"><span id="local-6989586621679746223"><span id="local-6989586621679746224"><span id="local-6989586621679746225"><span id="local-6989586621679746226"><span id="local-6989586621679746227"><span id="local-6989586621679746228"><span id="local-6989586621679746229"><span id="local-6989586621679746230"><span id="local-6989586621679746231"><span class="annot"><span class="annottext">[Char]
mandir :: forall dir. InstallDirs dir -&gt; dir
libsubdir :: forall dir. InstallDirs dir -&gt; dir
libexecsubdir :: forall dir. InstallDirs dir -&gt; dir
includedir :: forall dir. InstallDirs dir -&gt; dir
htmldir :: forall dir. InstallDirs dir -&gt; dir
haddockdir :: forall dir. InstallDirs dir -&gt; dir
flibdir :: forall dir. InstallDirs dir -&gt; dir
datasubdir :: forall dir. InstallDirs dir -&gt; dir
sysconfdir :: [Char]
haddockdir :: [Char]
htmldir :: [Char]
mandir :: [Char]
docdir :: [Char]
datasubdir :: [Char]
datadir :: [Char]
includedir :: [Char]
libexecsubdir :: [Char]
libexecdir :: [Char]
flibdir :: [Char]
dynlibdir :: [Char]
libsubdir :: [Char]
libdir :: [Char]
bindir :: [Char]
prefix :: [Char]
sysconfdir :: forall dir. InstallDirs dir -&gt; dir
docdir :: forall dir. InstallDirs dir -&gt; dir
datadir :: forall dir. InstallDirs dir -&gt; dir
libexecdir :: forall dir. InstallDirs dir -&gt; dir
dynlibdir :: forall dir. InstallDirs dir -&gt; dir
libdir :: forall dir. InstallDirs dir -&gt; dir
bindir :: forall dir. InstallDirs dir -&gt; dir
prefix :: forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#mandir"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1974"></span><span>          </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#isJust"><span class="hs-identifier hs-var">isJust</span></a></span><span>
</span><span id="line-1975"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Maybe [a]
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#stripPrefix"><span class="hs-identifier hs-var">stripPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746236"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1976"></span><span>                    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746230"><span class="hs-identifier hs-var">bindir</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746229"><span class="hs-identifier hs-var">libdir</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746227"><span class="hs-identifier hs-var">dynlibdir</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746225"><span class="hs-identifier hs-var">libexecdir</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746223"><span class="hs-identifier hs-var">includedir</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746222"><span class="hs-identifier hs-var">datadir</span></a></span><span>
</span><span id="line-1977"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746220"><span class="hs-identifier hs-var">docdir</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746219"><span class="hs-identifier hs-var">mandir</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746218"><span class="hs-identifier hs-var">htmldir</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746217"><span class="hs-identifier hs-var">haddockdir</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746216"><span class="hs-identifier hs-var">sysconfdir</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1978"></span><span>
</span><span id="line-1979"></span><span>    </span><span class="hs-comment">-- Check if the library dirs of the dependencies that are in the package</span><span>
</span><span id="line-1980"></span><span>    </span><span class="hs-comment">-- database to which the package is installed are relative to the</span><span>
</span><span id="line-1981"></span><span>    </span><span class="hs-comment">-- prefix of the package</span><span>
</span><span id="line-1982"></span><span>    </span><span id="local-6989586621679746272"><span class="annot"><span class="annottext">depsPrefixRelative :: IO ()
</span><a href="#local-6989586621679746272"><span class="hs-identifier hs-var hs-var">depsPrefixRelative</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1983"></span><span>        </span><span id="local-6989586621679746204"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746204"><span class="hs-identifier hs-var">pkgr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; LocalBuildInfo -&gt; PackageDB -&gt; IO [Char]
</span><a href="Distribution.Simple.GHC.html#pkgRoot"><span class="hs-identifier hs-var">GHC.pkgRoot</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746278"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746276"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDBStack -&gt; PackageDB
</span><a href="Distribution.Simple.Compiler.html#registrationPackageDB"><span class="hs-identifier hs-var">registrationPackageDB</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; PackageDBStack
</span><a href="Distribution.Types.LocalBuildInfo.html#withPackageDB"><span class="hs-identifier hs-var">withPackageDB</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746276"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1984"></span><span>        </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#traverse_"><span class="hs-identifier hs-var">traverse_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; InstalledPackageInfo -&gt; IO ()
</span><a href="#local-6989586621679746201"><span class="hs-identifier hs-var">doCheck</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746204"><span class="hs-identifier hs-var">pkgr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[InstalledPackageInfo]
</span><a href="#local-6989586621679746200"><span class="hs-identifier hs-var">ipkgs</span></a></span><span>
</span><span id="line-1985"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1986"></span><span>        </span><span id="local-6989586621679746201"><span class="annot"><span class="annottext">doCheck :: [Char] -&gt; InstalledPackageInfo -&gt; IO ()
</span><a href="#local-6989586621679746201"><span class="hs-identifier hs-var hs-var">doCheck</span></a></span></span><span> </span><span id="local-6989586621679746189"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746189"><span class="hs-identifier hs-var">pkgr</span></a></span></span><span> </span><span id="local-6989586621679746188"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746188"><span class="hs-identifier hs-var">ipkg</span></a></span></span><span>
</span><span id="line-1987"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746189"><span class="hs-identifier hs-var">pkgr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstalledPackageInfo -&gt; Maybe [Char]
</span><a href="Distribution.Types.InstalledPackageInfo.html#pkgRoot"><span class="hs-identifier hs-var">IPI.pkgRoot</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746188"><span class="hs-identifier hs-var">ipkg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1988"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#for_"><span class="hs-identifier hs-var">for_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstalledPackageInfo -&gt; [[Char]]
</span><a href="Distribution.Types.InstalledPackageInfo.html#libraryDirs"><span class="hs-identifier hs-var">IPI.libraryDirs</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679746188"><span class="hs-identifier hs-var">ipkg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679746186"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746186"><span class="hs-identifier hs-var">libdir</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1989"></span><span>              </span><span class="hs-comment">-- When @prefix@ is not under @pkgroot@,</span><span>
</span><span id="line-1990"></span><span>              </span><span class="hs-comment">-- @shortRelativePath prefix pkgroot@ will return a path with</span><span>
</span><span id="line-1991"></span><span>              </span><span class="hs-comment">-- @..@s and following check will fail without @canonicalizePath@.</span><span>
</span><span id="line-1992"></span><span>              </span><span id="local-6989586621679746185"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746185"><span class="hs-identifier hs-var">canonicalized</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; IO [Char]
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#canonicalizePath"><span class="hs-identifier hs-var">canonicalizePath</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746186"><span class="hs-identifier hs-var">libdir</span></a></span><span>
</span><span id="line-1993"></span><span>              </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746184"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#isPrefixOf"><span class="hs-operator hs-var">`isPrefixOf`</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746185"><span class="hs-identifier hs-var">canonicalized</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1994"></span><span>                </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; [Char] -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679746278"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><a href="#local-6989586621679746183"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746186"><span class="hs-identifier hs-var">libdir</span></a></span><span>
</span><span id="line-1995"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1996"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1997"></span><span>        </span><span class="hs-comment">-- NB: should be good enough to check this against the default</span><span>
</span><span id="line-1998"></span><span>        </span><span class="hs-comment">-- component ID, but if we wanted to be strictly correct we'd</span><span>
</span><span id="line-1999"></span><span>        </span><span class="hs-comment">-- check for each ComponentId.</span><span>
</span><span id="line-2000"></span><span>        </span><span id="local-6989586621679746182"><span class="annot"><span class="annottext">installDirs :: InstallDirs [Char]
</span><a href="#local-6989586621679746182"><span class="hs-identifier hs-var hs-var">installDirs</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageDescription
-&gt; LocalBuildInfo -&gt; CopyDest -&gt; InstallDirs [Char]
</span><a href="Distribution.Simple.LocalBuildInfo.html#absoluteInstallDirs"><span class="hs-identifier hs-var">absoluteInstallDirs</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679746277"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746276"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">CopyDest
</span><a href="Distribution.Simple.InstallDirs.html#NoCopyDest"><span class="hs-identifier hs-var">NoCopyDest</span></a></span><span>
</span><span id="line-2001"></span><span>        </span><span id="local-6989586621679746184"><span class="annot"><span class="annottext">p :: [Char]
</span><a href="#local-6989586621679746184"><span class="hs-identifier hs-var hs-var">p</span></a></span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#prefix"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="annot"><span class="annottext">InstallDirs [Char]
</span><a href="#local-6989586621679746182"><span class="hs-identifier hs-var">installDirs</span></a></span><span>
</span><span id="line-2002"></span><span>        </span><span id="local-6989586621679746200"><span class="annot"><span class="annottext">ipkgs :: [InstalledPackageInfo]
</span><a href="#local-6989586621679746200"><span class="hs-identifier hs-var hs-var">ipkgs</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. PackageIndex a -&gt; [a]
</span><a href="Distribution.Simple.PackageIndex.html#allPackages"><span class="hs-identifier hs-var">PackageIndex.allPackages</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; InstalledPackageIndex
</span><a href="Distribution.Types.LocalBuildInfo.html#installedPkgs"><span class="hs-identifier hs-var">installedPkgs</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679746276"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2003"></span><span>        </span><span id="local-6989586621679746183"><span class="annot"><span class="annottext">msg :: a -&gt; [Char]
</span><a href="#local-6989586621679746183"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679746173"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679746173"><span class="hs-identifier hs-var">l</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Library directory of a dependency: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><a href="../../base-4.16.3.0/src/GHC-Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679746173"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-2004"></span><span>                        </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;\nis not relative to the installation prefix:\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-2005"></span><span>                        </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><a href="../../base-4.16.3.0/src/GHC-Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679746184"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-2006"></span><span>
</span><span id="line-2007"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-2008"></span><span class="hs-comment">-- Testing foreign library requirements</span><span>
</span><span id="line-2009"></span><span>
</span><span id="line-2010"></span><span class="annot"><a href="Distribution.Simple.Configure.html#unsupportedForeignLibs"><span class="hs-identifier hs-type">unsupportedForeignLibs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2011"></span><span id="unsupportedForeignLibs"><span class="annot"><span class="annottext">unsupportedForeignLibs :: Compiler -&gt; Platform -&gt; [ForeignLib] -&gt; [[Char]]
</span><a href="Distribution.Simple.Configure.html#unsupportedForeignLibs"><span class="hs-identifier hs-var hs-var">unsupportedForeignLibs</span></a></span></span><span> </span><span id="local-6989586621679746172"><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746172"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span id="local-6989586621679746171"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679746171"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2012"></span><span>    </span><span class="annot"><span class="annottext">forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#mapMaybe"><span class="hs-identifier hs-var">mapMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; Platform -&gt; ForeignLib -&gt; Maybe [Char]
</span><a href="Distribution.Simple.Configure.html#checkForeignLibSupported"><span class="hs-identifier hs-var">checkForeignLibSupported</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746172"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679746171"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2013"></span><span>
</span><span id="line-2014"></span><span class="annot"><a href="Distribution.Simple.Configure.html#checkForeignLibSupported"><span class="hs-identifier hs-type">checkForeignLibSupported</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-2015"></span><span id="checkForeignLibSupported"><span class="annot"><span class="annottext">checkForeignLibSupported :: Compiler -&gt; Platform -&gt; ForeignLib -&gt; Maybe [Char]
</span><a href="Distribution.Simple.Configure.html#checkForeignLibSupported"><span class="hs-identifier hs-var hs-var">checkForeignLibSupported</span></a></span></span><span> </span><span id="local-6989586621679746168"><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746168"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span id="local-6989586621679746167"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679746167"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span id="local-6989586621679746166"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679746166"><span class="hs-identifier hs-var">flib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerFlavor -&gt; Maybe [Char]
</span><a href="#local-6989586621679746165"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; CompilerFlavor
</span><a href="Distribution.Simple.Compiler.html#compilerFlavor"><span class="hs-identifier hs-var">compilerFlavor</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746168"><span class="hs-identifier hs-var">comp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2016"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2017"></span><span>    </span><span class="annot"><a href="#local-6989586621679746165"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Compiler.html#CompilerFlavor"><span class="hs-identifier hs-type">CompilerFlavor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-2018"></span><span>    </span><span id="local-6989586621679746165"><span class="annot"><span class="annottext">go :: CompilerFlavor -&gt; Maybe [Char]
</span><a href="#local-6989586621679746165"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span>
</span><span id="line-2019"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; Version
</span><a href="Distribution.Simple.Compiler.html#compilerVersion"><span class="hs-identifier hs-var">compilerVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679746168"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Version
</span><a href="Distribution.Types.Version.html#mkVersion"><span class="hs-identifier hs-var">mkVersion</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; Maybe [Char]
</span><a href="#local-6989586621679746163"><span class="hs-identifier hs-var">unsupported</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2020"></span><span>        </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Building foreign libraires is only supported with GHC &gt;= 7.8&quot;</span></span><span>
</span><span id="line-2021"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-2022"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Maybe [Char]
</span><a href="#local-6989586621679746162"><span class="hs-identifier hs-var">goGhcPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679746167"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-2023"></span><span>    </span><span class="annot"><a href="#local-6989586621679746165"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; Maybe [Char]
</span><a href="#local-6989586621679746163"><span class="hs-identifier hs-var">unsupported</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2024"></span><span>        </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Building foreign libraries is currently only supported with ghc&quot;</span></span><span>
</span><span id="line-2025"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-2026"></span><span>
</span><span id="line-2027"></span><span>    </span><span class="annot"><a href="#local-6989586621679746162"><span class="hs-identifier hs-type">goGhcPlatform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-2028"></span><span>    </span><span id="local-6989586621679746162"><span class="annot"><span class="annottext">goGhcPlatform :: Platform -&gt; Maybe [Char]
</span><a href="#local-6989586621679746162"><span class="hs-identifier hs-var hs-var">goGhcPlatform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="annot"><span class="annottext">Arch
</span><a href="Distribution.System.html#X86_64"><span class="hs-identifier hs-var">X86_64</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#OSX"><span class="hs-identifier hs-var">OSX</span></a></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLibType -&gt; Maybe [Char]
</span><a href="#local-6989586621679746160"><span class="hs-identifier hs-var">goGhcOsx</span></a></span><span>     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignLib -&gt; ForeignLibType
</span><a href="Distribution.Types.ForeignLib.html#foreignLibType"><span class="hs-identifier hs-var">foreignLibType</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679746166"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2029"></span><span>    </span><span class="annot"><a href="#local-6989586621679746162"><span class="hs-identifier hs-var">goGhcPlatform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier">_</span></span><span>      </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Linux"><span class="hs-identifier hs-var">Linux</span></a></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLibType -&gt; Maybe [Char]
</span><a href="#local-6989586621679746158"><span class="hs-identifier hs-var">goGhcLinux</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignLib -&gt; ForeignLibType
</span><a href="Distribution.Types.ForeignLib.html#foreignLibType"><span class="hs-identifier hs-var">foreignLibType</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679746166"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2030"></span><span>    </span><span class="annot"><a href="#local-6989586621679746162"><span class="hs-identifier hs-var">goGhcPlatform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="annot"><span class="annottext">Arch
</span><a href="Distribution.System.html#I386"><span class="hs-identifier hs-var">I386</span></a></span><span>   </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Windows"><span class="hs-identifier hs-var">Windows</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLibType -&gt; Maybe [Char]
</span><a href="#local-6989586621679746156"><span class="hs-identifier hs-var">goGhcWindows</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignLib -&gt; ForeignLibType
</span><a href="Distribution.Types.ForeignLib.html#foreignLibType"><span class="hs-identifier hs-var">foreignLibType</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679746166"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2031"></span><span>    </span><span class="annot"><a href="#local-6989586621679746162"><span class="hs-identifier hs-var">goGhcPlatform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="annot"><span class="annottext">Arch
</span><a href="Distribution.System.html#X86_64"><span class="hs-identifier hs-var">X86_64</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Windows"><span class="hs-identifier hs-var">Windows</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLibType -&gt; Maybe [Char]
</span><a href="#local-6989586621679746156"><span class="hs-identifier hs-var">goGhcWindows</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignLib -&gt; ForeignLibType
</span><a href="Distribution.Types.ForeignLib.html#foreignLibType"><span class="hs-identifier hs-var">foreignLibType</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679746166"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2032"></span><span>    </span><span class="annot"><a href="#local-6989586621679746162"><span class="hs-identifier hs-var">goGhcPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; Maybe [Char]
</span><a href="#local-6989586621679746163"><span class="hs-identifier hs-var">unsupported</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2033"></span><span>        </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Building foreign libraries is currently only supported on OSX, &quot;</span></span><span>
</span><span id="line-2034"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Linux and Windows&quot;</span></span><span>
</span><span id="line-2035"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-2036"></span><span>
</span><span id="line-2037"></span><span>    </span><span class="annot"><a href="#local-6989586621679746160"><span class="hs-identifier hs-type">goGhcOsx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.ForeignLibType.html#ForeignLibType"><span class="hs-identifier hs-type">ForeignLibType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-2038"></span><span>    </span><span id="local-6989586621679746160"><span class="annot"><span class="annottext">goGhcOsx :: ForeignLibType -&gt; Maybe [Char]
</span><a href="#local-6989586621679746160"><span class="hs-identifier hs-var hs-var">goGhcOsx</span></a></span></span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibNativeShared"><span class="hs-identifier hs-var">ForeignLibNativeShared</span></a></span><span>
</span><span id="line-2039"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignLib -&gt; [[Char]]
</span><a href="Distribution.Types.ForeignLib.html#foreignLibModDefFile"><span class="hs-identifier hs-var">foreignLibModDefFile</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679746166"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; Maybe [Char]
</span><a href="#local-6989586621679746163"><span class="hs-identifier hs-var">unsupported</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2040"></span><span>            </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Module definition file not supported on OSX&quot;</span></span><span>
</span><span id="line-2041"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-2042"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignLib -&gt; Maybe LibVersionInfo
</span><a href="Distribution.Types.ForeignLib.html#foreignLibVersionInfo"><span class="hs-identifier hs-var">foreignLibVersionInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679746166"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; Maybe [Char]
</span><a href="#local-6989586621679746163"><span class="hs-identifier hs-var">unsupported</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2043"></span><span>            </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Foreign library versioning not currently supported on OSX&quot;</span></span><span>
</span><span id="line-2044"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-2045"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2046"></span><span>          </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2047"></span><span>    </span><span class="annot"><a href="#local-6989586621679746160"><span class="hs-identifier hs-var">goGhcOsx</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; Maybe [Char]
</span><a href="#local-6989586621679746163"><span class="hs-identifier hs-var">unsupported</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2048"></span><span>        </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;We can currently only build shared foreign libraries on OSX&quot;</span></span><span>
</span><span id="line-2049"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-2050"></span><span>
</span><span id="line-2051"></span><span>    </span><span class="annot"><a href="#local-6989586621679746158"><span class="hs-identifier hs-type">goGhcLinux</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.ForeignLibType.html#ForeignLibType"><span class="hs-identifier hs-type">ForeignLibType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-2052"></span><span>    </span><span id="local-6989586621679746158"><span class="annot"><span class="annottext">goGhcLinux :: ForeignLibType -&gt; Maybe [Char]
</span><a href="#local-6989586621679746158"><span class="hs-identifier hs-var hs-var">goGhcLinux</span></a></span></span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibNativeShared"><span class="hs-identifier hs-var">ForeignLibNativeShared</span></a></span><span>
</span><span id="line-2053"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignLib -&gt; [[Char]]
</span><a href="Distribution.Types.ForeignLib.html#foreignLibModDefFile"><span class="hs-identifier hs-var">foreignLibModDefFile</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679746166"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; Maybe [Char]
</span><a href="#local-6989586621679746163"><span class="hs-identifier hs-var">unsupported</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2054"></span><span>            </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Module definition file not supported on Linux&quot;</span></span><span>
</span><span id="line-2055"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-2056"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignLib -&gt; Maybe LibVersionInfo
</span><a href="Distribution.Types.ForeignLib.html#foreignLibVersionInfo"><span class="hs-identifier hs-var">foreignLibVersionInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679746166"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2057"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignLib -&gt; Maybe Version
</span><a href="Distribution.Types.ForeignLib.html#foreignLibVersionLinux"><span class="hs-identifier hs-var">foreignLibVersionLinux</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679746166"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; Maybe [Char]
</span><a href="#local-6989586621679746163"><span class="hs-identifier hs-var">unsupported</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2058"></span><span>            </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;You must not specify both lib-version-info and lib-version-linux&quot;</span></span><span>
</span><span id="line-2059"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-2060"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2061"></span><span>          </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2062"></span><span>    </span><span class="annot"><a href="#local-6989586621679746158"><span class="hs-identifier hs-var">goGhcLinux</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; Maybe [Char]
</span><a href="#local-6989586621679746163"><span class="hs-identifier hs-var">unsupported</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2063"></span><span>        </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;We can currently only build shared foreign libraries on Linux&quot;</span></span><span>
</span><span id="line-2064"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-2065"></span><span>
</span><span id="line-2066"></span><span>    </span><span class="annot"><a href="#local-6989586621679746156"><span class="hs-identifier hs-type">goGhcWindows</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.ForeignLibType.html#ForeignLibType"><span class="hs-identifier hs-type">ForeignLibType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-2067"></span><span>    </span><span id="local-6989586621679746156"><span class="annot"><span class="annottext">goGhcWindows :: ForeignLibType -&gt; Maybe [Char]
</span><a href="#local-6989586621679746156"><span class="hs-identifier hs-var hs-var">goGhcWindows</span></a></span></span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibNativeShared"><span class="hs-identifier hs-var">ForeignLibNativeShared</span></a></span><span>
</span><span id="line-2068"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679746151"><span class="hs-identifier hs-var">standalone</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; Maybe [Char]
</span><a href="#local-6989586621679746163"><span class="hs-identifier hs-var">unsupported</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2069"></span><span>            </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;We can currently only build standalone libraries on Windows. Use\n&quot;</span></span><span>
</span><span id="line-2070"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;  if os(Windows)\n&quot;</span></span><span>
</span><span id="line-2071"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;    options: standalone\n&quot;</span></span><span>
</span><span id="line-2072"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;in your foreign-library stanza.&quot;</span></span><span>
</span><span id="line-2073"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-2074"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignLib -&gt; Maybe LibVersionInfo
</span><a href="Distribution.Types.ForeignLib.html#foreignLibVersionInfo"><span class="hs-identifier hs-var">foreignLibVersionInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679746166"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; Maybe [Char]
</span><a href="#local-6989586621679746163"><span class="hs-identifier hs-var">unsupported</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2075"></span><span>            </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Foreign library versioning not currently supported on Windows.\n&quot;</span></span><span>
</span><span id="line-2076"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;You can specify module definition files in the mod-def-file field.&quot;</span></span><span>
</span><span id="line-2077"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-2078"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2079"></span><span>         </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2080"></span><span>    </span><span class="annot"><a href="#local-6989586621679746156"><span class="hs-identifier hs-var">goGhcWindows</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; Maybe [Char]
</span><a href="#local-6989586621679746163"><span class="hs-identifier hs-var">unsupported</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2081"></span><span>        </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;We can currently only build shared foreign libraries on Windows&quot;</span></span><span>
</span><span id="line-2082"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-2083"></span><span>
</span><span id="line-2084"></span><span>    </span><span class="annot"><a href="#local-6989586621679746151"><span class="hs-identifier hs-type">standalone</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2085"></span><span>    </span><span id="local-6989586621679746151"><span class="annot"><span class="annottext">standalone :: Bool
</span><a href="#local-6989586621679746151"><span class="hs-identifier hs-var hs-var">standalone</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLibOption
</span><a href="Distribution.Types.ForeignLibOption.html#ForeignLibStandalone"><span class="hs-identifier hs-var">ForeignLibStandalone</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; [ForeignLibOption]
</span><a href="Distribution.Types.ForeignLib.html#foreignLibOptions"><span class="hs-identifier hs-var">foreignLibOptions</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679746166"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-2086"></span><span>
</span><span id="line-2087"></span><span>    </span><span class="annot"><a href="#local-6989586621679746163"><span class="hs-identifier hs-type">unsupported</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-2088"></span><span>    </span><span id="local-6989586621679746163"><span class="annot"><span class="annottext">unsupported :: [[Char]] -&gt; Maybe [Char]
</span><a href="#local-6989586621679746163"><span class="hs-identifier hs-var hs-var">unsupported</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a></span><span>
</span><span id="line-2089"></span></pre></body></html>
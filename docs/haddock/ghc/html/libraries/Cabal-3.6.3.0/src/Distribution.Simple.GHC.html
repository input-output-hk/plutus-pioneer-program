<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE MultiWayIf #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE TupleSections #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- Module      :  Distribution.Simple.GHC</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- Copyright   :  Isaac Jones 2003-2007</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- License     :  BSD3</span><span>
</span><span id="line-12"></span><span class="hs-comment">--</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- Maintainer  :  cabal-devel@haskell.org</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- Portability :  portable</span><span>
</span><span id="line-15"></span><span class="hs-comment">--</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- This is a fairly large module. It contains most of the GHC-specific code for</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- configuring, building and installing packages. It also exports a function</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- for finding out what packages are already installed. Configuring involves</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- finding the @ghc@ and @ghc-pkg@ programs, finding what language extensions</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- this version of ghc supports and returning a 'Compiler' value.</span><span>
</span><span id="line-21"></span><span class="hs-comment">--</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- 'getInstalledPackages' involves calling the @ghc-pkg@ program to find out</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- what packages are installed.</span><span>
</span><span id="line-24"></span><span class="hs-comment">--</span><span>
</span><span id="line-25"></span><span class="hs-comment">-- Building is somewhat complex as there is quite a bit of information to take</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- into account. We have to build libs and programs, possibly for profiling and</span><span>
</span><span id="line-27"></span><span class="hs-comment">-- shared libs. We have to support building libraries that will be usable by</span><span>
</span><span id="line-28"></span><span class="hs-comment">-- GHCi and also ghc's @-split-objs@ feature. We have to compile any C files</span><span>
</span><span id="line-29"></span><span class="hs-comment">-- using ghc. Linking, especially for @split-objs@ is remarkably complex,</span><span>
</span><span id="line-30"></span><span class="hs-comment">-- partly because there tend to be 1,000's of @.o@ files and this can often be</span><span>
</span><span id="line-31"></span><span class="hs-comment">-- more than we can pass to the @ld@ or @ar@ programs in one go.</span><span>
</span><span id="line-32"></span><span class="hs-comment">--</span><span>
</span><span id="line-33"></span><span class="hs-comment">-- Installing for libs and exes involves finding the right files and copying</span><span>
</span><span id="line-34"></span><span class="hs-comment">-- them to the right places. One of the more tricky things about this module is</span><span>
</span><span id="line-35"></span><span class="hs-comment">-- remembering the layout of files in the build directory (which is not</span><span>
</span><span id="line-36"></span><span class="hs-comment">-- explicitly documented) and thus what search dirs are used for various kinds</span><span>
</span><span id="line-37"></span><span class="hs-comment">-- of files.</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Distribution.Simple.GHC</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-40"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#getGhcInfo"><span class="hs-identifier">getGhcInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#configure"><span class="hs-identifier">configure</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#getInstalledPackages"><span class="hs-identifier">getInstalledPackages</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#getInstalledPackagesMonitorFiles"><span class="hs-identifier">getInstalledPackagesMonitorFiles</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#getPackageDBContents"><span class="hs-identifier">getPackageDBContents</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#buildLib"><span class="hs-identifier">buildLib</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#buildFLib"><span class="hs-identifier">buildFLib</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#buildExe"><span class="hs-identifier">buildExe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#replLib"><span class="hs-identifier">replLib</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#replFLib"><span class="hs-identifier">replFLib</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#replExe"><span class="hs-identifier">replExe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#startInterpreter"><span class="hs-identifier">startInterpreter</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#installLib"><span class="hs-identifier">installLib</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#installFLib"><span class="hs-identifier">installFLib</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#installExe"><span class="hs-identifier">installExe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#libAbiHash"><span class="hs-identifier">libAbiHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#hcPkgInfo"><span class="hs-identifier">hcPkgInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#registerPackage"><span class="hs-identifier">registerPackage</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#componentGhcOptions"><span class="hs-identifier">componentGhcOptions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#componentCcGhcOptions"><span class="hs-identifier">componentCcGhcOptions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#getGhcAppDir"><span class="hs-identifier">getGhcAppDir</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#getLibDir"><span class="hs-identifier">getLibDir</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#isDynamic"><span class="hs-identifier">isDynamic</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#getGlobalPackageDB"><span class="hs-identifier">getGlobalPackageDB</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#pkgRoot"><span class="hs-identifier">pkgRoot</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Constructing and deconstructing GHC environment files</span></span><span>
</span><span id="line-60"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.Internal.html#GhcEnvironmentFileEntry"><span class="hs-identifier">Internal.GhcEnvironmentFileEntry</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.Internal.html#simpleGhcEnvironmentFile"><span class="hs-identifier">Internal.simpleGhcEnvironmentFile</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.Internal.html#renderGhcEnvironmentFile"><span class="hs-identifier">Internal.renderGhcEnvironmentFile</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.Internal.html#writeGhcEnvironmentFile"><span class="hs-identifier">Internal.writeGhcEnvironmentFile</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.Internal.html#ghcPlatformAndVersionString"><span class="hs-identifier">Internal.ghcPlatformAndVersionString</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.EnvironmentParser.html#readGhcEnvironmentFile"><span class="hs-identifier">readGhcEnvironmentFile</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.EnvironmentParser.html#parseGhcEnvironmentFile"><span class="hs-identifier">parseGhcEnvironmentFile</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.EnvironmentParser.html#ParseErrorExc"><span class="hs-identifier">ParseErrorExc</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Version-specific implementation quirks</span></span><span>
</span><span id="line-69"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.ImplInfo.html#getImplInfo"><span class="hs-identifier">getImplInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.ImplInfo.html#GhcImplInfo"><span class="hs-identifier">GhcImplInfo</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Prelude.html#"><span class="hs-identifier">Prelude</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Compat.Prelude.html"><span class="hs-identifier">Distribution.Compat.Prelude</span></a></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.Internal.html"><span class="hs-identifier">Distribution.Simple.GHC.Internal</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Internal</span></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.CabalSpecVersion.html"><span class="hs-identifier">Distribution.CabalSpecVersion</span></a></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.ImplInfo.html"><span class="hs-identifier">Distribution.Simple.GHC.ImplInfo</span></a></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.EnvironmentParser.html"><span class="hs-identifier">Distribution.Simple.GHC.EnvironmentParser</span></a></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.PackageDescription.Utils.html"><span class="hs-identifier">Distribution.PackageDescription.Utils</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.PackageDescription.Utils.html#cabalBug"><span class="hs-identifier">cabalBug</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.PackageDescription.html"><span class="hs-identifier">Distribution.PackageDescription</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PD</span></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.InstalledPackageInfo.html"><span class="hs-identifier">Distribution.InstalledPackageInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier">InstalledPackageInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.InstalledPackageInfo.html"><span class="hs-identifier">Distribution.InstalledPackageInfo</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">InstalledPackageInfo</span></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.PackageIndex.html"><span class="hs-identifier">Distribution.Simple.PackageIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.PackageIndex.html#InstalledPackageIndex"><span class="hs-identifier">InstalledPackageIndex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Simple.PackageIndex.html"><span class="hs-identifier">Distribution.Simple.PackageIndex</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PackageIndex</span></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.LocalBuildInfo.html"><span class="hs-identifier">Distribution.Simple.LocalBuildInfo</span></a></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html"><span class="hs-identifier">Distribution.Types.ComponentLocalBuildInfo</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Simple.Hpc.html"><span class="hs-identifier">Distribution.Simple.Hpc</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Hpc</span></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.BuildPaths.html"><span class="hs-identifier">Distribution.Simple.BuildPaths</span></a></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.Utils.html"><span class="hs-identifier">Distribution.Simple.Utils</span></a></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Package.html"><span class="hs-identifier">Distribution.Package</span></a></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.ModuleName.html"><span class="hs-identifier">Distribution.ModuleName</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ModuleName</span></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.ModuleName.html"><span class="hs-identifier">Distribution.ModuleName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.ModuleName.html#ModuleName"><span class="hs-identifier">ModuleName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.html"><span class="hs-identifier">Distribution.Simple.Program</span></a></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Builtin.html"><span class="hs-identifier">Distribution.Simple.Program.Builtin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.Program.Builtin.html#runghcProgram"><span class="hs-identifier">runghcProgram</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.HcPkg.html"><span class="hs-identifier">Distribution.Simple.Program.HcPkg</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HcPkg</span></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Ar.html"><span class="hs-identifier">Distribution.Simple.Program.Ar</span></a></span><span>    </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ar</span></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Ld.html"><span class="hs-identifier">Distribution.Simple.Program.Ld</span></a></span><span>    </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ld</span></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Strip.html"><span class="hs-identifier">Distribution.Simple.Program.Strip</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Strip</span></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.GHC.html"><span class="hs-identifier">Distribution.Simple.Program.GHC</span></a></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.Setup.html"><span class="hs-identifier">Distribution.Simple.Setup</span></a></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Simple.Setup.html"><span class="hs-identifier">Distribution.Simple.Setup</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cabal</span></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html"><span class="hs-identifier">Distribution.Simple.Compiler</span></a></span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Version.html"><span class="hs-identifier">Distribution.Version</span></a></span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.System.html"><span class="hs-identifier">Distribution.System</span></a></span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html"><span class="hs-identifier">Distribution.Verbosity</span></a></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Pretty.html"><span class="hs-identifier">Distribution.Pretty</span></a></span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Utils.NubList.html"><span class="hs-identifier">Distribution.Utils.NubList</span></a></span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Utils.Path.html"><span class="hs-identifier">Distribution.Utils.Path</span></a></span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Language.Haskell.Extension.html"><span class="hs-identifier">Language.Haskell.Extension</span></a></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Control-Monad.html#"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Foldable.html#msum"><span class="hs-identifier">msum</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Foldable.html#forM_"><span class="hs-identifier">forM_</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Char.html#"><span class="hs-identifier">Data.Char</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Unicode.html#isLower"><span class="hs-identifier">isLower</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Map.html#"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-115"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#"><span class="hs-identifier">System.Directory</span></a></span><span>
</span><span id="line-116"></span><span>         </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#doesFileExist"><span class="hs-identifier">doesFileExist</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#getAppUserDataDirectory"><span class="hs-identifier">getAppUserDataDirectory</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#createDirectoryIfMissing"><span class="hs-identifier">createDirectoryIfMissing</span></a></span><span>
</span><span id="line-117"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#canonicalizePath"><span class="hs-identifier">canonicalizePath</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#removeFile"><span class="hs-identifier">removeFile</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#renameFile"><span class="hs-identifier">renameFile</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#getDirectoryContents"><span class="hs-identifier">getDirectoryContents</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../filepath-1.4.2.2/src/System-FilePath.html#"><span class="hs-identifier">System.FilePath</span></a></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator">(&lt;/&gt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator">(&lt;.&gt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#takeExtension"><span class="hs-identifier">takeExtension</span></a></span><span>
</span><span id="line-119"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#takeDirectory"><span class="hs-identifier">takeDirectory</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#replaceExtension"><span class="hs-identifier">replaceExtension</span></a></span><span>
</span><span id="line-120"></span><span>                                </span><span class="hs-special">,</span><span class="annot"><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#isRelative"><span class="hs-identifier">isRelative</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/System-Info.html#"><span class="hs-identifier">System.Info</span></a></span><span class="hs-cpp">
#ifndef mingw32_HOST_OS
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../unix-2.7.2.2/src/System-Posix.html#"><span class="hs-identifier">System.Posix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../unix-2.7.2.2/src/System-Posix-Files.html#createSymbolicLink"><span class="hs-identifier">createSymbolicLink</span></a></span><span class="hs-special">)</span><span class="hs-cpp">
#endif /* mingw32_HOST_OS */
</span><span>
</span><span id="line-126"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-127"></span><span class="hs-comment">-- Configuring</span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="annot"><a href="Distribution.Simple.GHC.html#configure"><span class="hs-identifier hs-type">configure</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-130"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span>
</span><span id="line-131"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span id="configure"><span class="annot"><span class="annottext">configure :: Verbosity
-&gt; Maybe String
-&gt; Maybe String
-&gt; ProgramDb
-&gt; IO (Compiler, Maybe Platform, ProgramDb)
</span><a href="Distribution.Simple.GHC.html#configure"><span class="hs-identifier hs-var hs-var">configure</span></a></span></span><span> </span><span id="local-6989586621679739819"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739819"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739818"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679739818"><span class="hs-identifier hs-var">hcPath</span></a></span></span><span> </span><span id="local-6989586621679739817"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679739817"><span class="hs-identifier hs-var">hcPkgPath</span></a></span></span><span> </span><span id="local-6989586621679739816"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739816"><span class="hs-identifier hs-var">conf0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679739815"><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739815"><span class="hs-identifier hs-var">ghcProg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679739814"><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739814"><span class="hs-identifier hs-var">ghcVersion</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679739813"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739813"><span class="hs-identifier hs-var">progdb1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-135"></span><span>    </span><span class="annot"><span class="annottext">Verbosity
-&gt; Program
-&gt; VersionRange
-&gt; ProgramDb
-&gt; IO (ConfiguredProgram, Version, ProgramDb)
</span><a href="Distribution.Simple.Program.Db.html#requireProgramVersion"><span class="hs-identifier hs-var">requireProgramVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739819"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ghcProgram"><span class="hs-identifier hs-var">ghcProgram</span></a></span><span>
</span><span id="line-136"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Version -&gt; VersionRange
</span><a href="Distribution.Types.VersionRange.Internal.html#orLaterVersion"><span class="hs-identifier hs-var">orLaterVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Int] -&gt; Version
</span><a href="Distribution.Types.Version.html#mkVersion"><span class="hs-identifier hs-var">mkVersion</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Maybe String -&gt; ProgramDb -&gt; ProgramDb
</span><a href="Distribution.Simple.Program.Db.html#userMaybeSpecifyPath"><span class="hs-identifier hs-var">userMaybeSpecifyPath</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ghc&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679739818"><span class="hs-identifier hs-var">hcPath</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739816"><span class="hs-identifier hs-var">conf0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739807"><span class="annot"><span class="annottext">implInfo :: GhcImplInfo
</span><a href="#local-6989586621679739807"><span class="hs-identifier hs-var hs-var">implInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Version -&gt; GhcImplInfo
</span><a href="Distribution.Simple.GHC.ImplInfo.html#ghcVersionImplInfo"><span class="hs-identifier hs-var">ghcVersionImplInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739814"><span class="hs-identifier hs-var">ghcVersion</span></a></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-comment">-- Cabal currently supports ghc &gt;= 7.0.1 &amp;&amp; &lt; 9.4</span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-comment">-- ... and the following odd development version</span><span>
</span><span id="line-142"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739814"><span class="hs-identifier hs-var">ghcVersion</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Version
</span><a href="Distribution.Types.Version.html#mkVersion"><span class="hs-identifier hs-var">mkVersion</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">9</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-143"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739819"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-144"></span><span>         </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unknown/unsupported 'ghc' version detected &quot;</span></span><span>
</span><span id="line-145"></span><span>      </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(Cabal &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; String
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="Distribution.Simple.Utils.html#cabalVersion"><span class="hs-identifier hs-var">cabalVersion</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; supports 'ghc' version &lt; 9.4): &quot;</span></span><span>
</span><span id="line-146"></span><span>      </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram -&gt; String
</span><a href="Distribution.Simple.Program.Types.html#programPath"><span class="hs-identifier hs-var">programPath</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739815"><span class="hs-identifier hs-var">ghcProg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; is version &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; String
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739814"><span class="hs-identifier hs-var">ghcVersion</span></a></span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-comment">-- This is slightly tricky, we have to configure ghc first, then we use the</span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-comment">-- location of ghc to help find ghc-pkg in the case that the user did not</span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-comment">-- specify the location of ghc-pkg directly:</span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679739799"><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739799"><span class="hs-identifier hs-var">ghcPkgProg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679739798"><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739798"><span class="hs-identifier hs-var">ghcPkgVersion</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679739797"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739797"><span class="hs-identifier hs-var">progdb2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><span class="annottext">Verbosity
-&gt; Program
-&gt; VersionRange
-&gt; ProgramDb
-&gt; IO (ConfiguredProgram, Version, ProgramDb)
</span><a href="Distribution.Simple.Program.Db.html#requireProgramVersion"><span class="hs-identifier hs-var">requireProgramVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739819"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ghcPkgProgram"><span class="hs-identifier hs-var">ghcPkgProgram</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-153"></span><span>      </span><span class="annot"><span class="annottext">programFindLocation :: Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.Program.Types.html#programFindLocation"><span class="hs-identifier hs-var">programFindLocation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
-&gt; Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessGhcPkgFromGhcPath"><span class="hs-identifier hs-var">guessGhcPkgFromGhcPath</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739815"><span class="hs-identifier hs-var">ghcProg</span></a></span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-155"></span><span>    </span><span class="annot"><span class="annottext">VersionRange
</span><a href="Distribution.Types.VersionRange.Internal.html#anyVersion"><span class="hs-identifier hs-var">anyVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Maybe String -&gt; ProgramDb -&gt; ProgramDb
</span><a href="Distribution.Simple.Program.Db.html#userMaybeSpecifyPath"><span class="hs-identifier hs-var">userMaybeSpecifyPath</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ghc-pkg&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679739817"><span class="hs-identifier hs-var">hcPkgPath</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739813"><span class="hs-identifier hs-var">progdb1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739814"><span class="hs-identifier hs-var">ghcVersion</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739798"><span class="hs-identifier hs-var">ghcPkgVersion</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; String -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739819"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-158"></span><span>       </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Version mismatch between ghc and ghc-pkg: &quot;</span></span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram -&gt; String
</span><a href="Distribution.Simple.Program.Types.html#programPath"><span class="hs-identifier hs-var">programPath</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739815"><span class="hs-identifier hs-var">ghcProg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; is version &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; String
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739814"><span class="hs-identifier hs-var">ghcVersion</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span>
</span><span id="line-160"></span><span>    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram -&gt; String
</span><a href="Distribution.Simple.Program.Types.html#programPath"><span class="hs-identifier hs-var">programPath</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739799"><span class="hs-identifier hs-var">ghcPkgProg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; is version &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; String
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739798"><span class="hs-identifier hs-var">ghcPkgVersion</span></a></span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-comment">-- Likewise we try to find the matching hsc2hs and haddock programs.</span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739789"><span class="annot"><span class="annottext">hsc2hsProgram' :: Program
</span><a href="#local-6989586621679739789"><span class="hs-identifier hs-var hs-var">hsc2hsProgram'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#hsc2hsProgram"><span class="hs-identifier hs-var">hsc2hsProgram</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-164"></span><span>                           </span><span class="annot"><span class="annottext">programFindLocation :: Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.Program.Types.html#programFindLocation"><span class="hs-identifier hs-var">programFindLocation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
-&gt; Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessHsc2hsFromGhcPath"><span class="hs-identifier hs-var">guessHsc2hsFromGhcPath</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739815"><span class="hs-identifier hs-var">ghcProg</span></a></span><span>
</span><span id="line-165"></span><span>                       </span><span class="hs-special">}</span><span>
</span><span id="line-166"></span><span>      </span><span id="local-6989586621679739786"><span class="annot"><span class="annottext">haddockProgram' :: Program
</span><a href="#local-6989586621679739786"><span class="hs-identifier hs-var hs-var">haddockProgram'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#haddockProgram"><span class="hs-identifier hs-var">haddockProgram</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-167"></span><span>                           </span><span class="annot"><span class="annottext">programFindLocation :: Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.Program.Types.html#programFindLocation"><span class="hs-identifier hs-var">programFindLocation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
-&gt; Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessHaddockFromGhcPath"><span class="hs-identifier hs-var">guessHaddockFromGhcPath</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739815"><span class="hs-identifier hs-var">ghcProg</span></a></span><span>
</span><span id="line-168"></span><span>                       </span><span class="hs-special">}</span><span>
</span><span id="line-169"></span><span>      </span><span id="local-6989586621679739783"><span class="annot"><span class="annottext">hpcProgram' :: Program
</span><a href="#local-6989586621679739783"><span class="hs-identifier hs-var hs-var">hpcProgram'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#hpcProgram"><span class="hs-identifier hs-var">hpcProgram</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-170"></span><span>                        </span><span class="annot"><span class="annottext">programFindLocation :: Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.Program.Types.html#programFindLocation"><span class="hs-identifier hs-var">programFindLocation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
-&gt; Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessHpcFromGhcPath"><span class="hs-identifier hs-var">guessHpcFromGhcPath</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739815"><span class="hs-identifier hs-var">ghcProg</span></a></span><span>
</span><span id="line-171"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-172"></span><span>      </span><span id="local-6989586621679739780"><span class="annot"><span class="annottext">runghcProgram' :: Program
</span><a href="#local-6989586621679739780"><span class="hs-identifier hs-var hs-var">runghcProgram'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#runghcProgram"><span class="hs-identifier hs-var">runghcProgram</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-173"></span><span>                        </span><span class="annot"><span class="annottext">programFindLocation :: Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.Program.Types.html#programFindLocation"><span class="hs-identifier hs-var">programFindLocation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
-&gt; Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessRunghcFromGhcPath"><span class="hs-identifier hs-var">guessRunghcFromGhcPath</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739815"><span class="hs-identifier hs-var">ghcProg</span></a></span><span>
</span><span id="line-174"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-175"></span><span>      </span><span id="local-6989586621679739778"><span class="annot"><span class="annottext">progdb3 :: ProgramDb
</span><a href="#local-6989586621679739778"><span class="hs-identifier hs-var hs-var">progdb3</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Program -&gt; ProgramDb -&gt; ProgramDb
</span><a href="Distribution.Simple.Program.Db.html#addKnownProgram"><span class="hs-identifier hs-var">addKnownProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679739786"><span class="hs-identifier hs-var">haddockProgram'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-176"></span><span>              </span><span class="annot"><span class="annottext">Program -&gt; ProgramDb -&gt; ProgramDb
</span><a href="Distribution.Simple.Program.Db.html#addKnownProgram"><span class="hs-identifier hs-var">addKnownProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679739789"><span class="hs-identifier hs-var">hsc2hsProgram'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-177"></span><span>              </span><span class="annot"><span class="annottext">Program -&gt; ProgramDb -&gt; ProgramDb
</span><a href="Distribution.Simple.Program.Db.html#addKnownProgram"><span class="hs-identifier hs-var">addKnownProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679739783"><span class="hs-identifier hs-var">hpcProgram'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-178"></span><span>              </span><span class="annot"><span class="annottext">Program -&gt; ProgramDb -&gt; ProgramDb
</span><a href="Distribution.Simple.Program.Db.html#addKnownProgram"><span class="hs-identifier hs-var">addKnownProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679739780"><span class="hs-identifier hs-var">runghcProgram'</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739797"><span class="hs-identifier hs-var">progdb2</span></a></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span>  </span><span id="local-6989586621679739776"><span class="annot"><span class="annottext">[(Language, String)]
</span><a href="#local-6989586621679739776"><span class="hs-identifier hs-var">languages</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; GhcImplInfo -&gt; ConfiguredProgram -&gt; IO [(Language, String)]
</span><a href="Distribution.Simple.GHC.Internal.html#getLanguages"><span class="hs-identifier hs-var">Internal.getLanguages</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739819"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679739807"><span class="hs-identifier hs-var">implInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739815"><span class="hs-identifier hs-var">ghcProg</span></a></span><span>
</span><span id="line-181"></span><span>  </span><span id="local-6989586621679739774"><span class="annot"><span class="annottext">[(Extension, Maybe String)]
</span><a href="#local-6989586621679739774"><span class="hs-identifier hs-var">extensions0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; GhcImplInfo
-&gt; ConfiguredProgram
-&gt; IO [(Extension, Maybe String)]
</span><a href="Distribution.Simple.GHC.Internal.html#getExtensions"><span class="hs-identifier hs-var">Internal.getExtensions</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739819"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679739807"><span class="hs-identifier hs-var">implInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739815"><span class="hs-identifier hs-var">ghcProg</span></a></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span>  </span><span id="local-6989586621679739772"><span class="annot"><span class="annottext">[(String, String)]
</span><a href="#local-6989586621679739772"><span class="hs-identifier hs-var">ghcInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; GhcImplInfo -&gt; ConfiguredProgram -&gt; IO [(String, String)]
</span><a href="Distribution.Simple.GHC.Internal.html#getGhcInfo"><span class="hs-identifier hs-var">Internal.getGhcInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739819"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679739807"><span class="hs-identifier hs-var">implInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739815"><span class="hs-identifier hs-var">ghcProg</span></a></span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739768"><span class="annot"><span class="annottext">ghcInfoMap :: Map String String
</span><a href="#local-6989586621679739768"><span class="hs-identifier hs-var hs-var">ghcInfoMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#fromList"><span class="hs-identifier hs-var">Map.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">[(String, String)]
</span><a href="#local-6989586621679739772"><span class="hs-identifier hs-var">ghcInfo</span></a></span><span>
</span><span id="line-185"></span><span>      </span><span id="local-6989586621679739766"><span class="annot"><span class="annottext">extensions :: [(Extension, Maybe String)]
</span><a href="#local-6989586621679739766"><span class="hs-identifier hs-var hs-var">extensions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- workaround https://gitlab.haskell.org/ghc/ghc/-/issues/11214</span><span>
</span><span id="line-186"></span><span>                   </span><span class="annot"><span class="annottext">forall {b}. KnownExtension -&gt; [(Extension, b)] -&gt; [(Extension, b)]
</span><a href="#local-6989586621679739765"><span class="hs-identifier hs-var">filterExt</span></a></span><span> </span><span class="annot"><span class="annottext">KnownExtension
</span><a href="Language.Haskell.Extension.html#JavaScriptFFI"><span class="hs-identifier hs-var">JavaScriptFFI</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-187"></span><span>                   </span><span class="hs-comment">-- see 'filterExtTH' comment below</span><span>
</span><span id="line-188"></span><span>                   </span><span class="annot"><span class="annottext">forall {b}. [(Extension, b)] -&gt; [(Extension, b)]
</span><a href="#local-6989586621679739763"><span class="hs-identifier hs-var">filterExtTH</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(Extension, Maybe String)]
</span><a href="#local-6989586621679739774"><span class="hs-identifier hs-var">extensions0</span></a></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span>      </span><span class="hs-comment">-- starting with GHC 8.0, `TemplateHaskell` will be omitted from</span><span>
</span><span id="line-191"></span><span>      </span><span class="hs-comment">-- `--supported-extensions` when it's not available.</span><span>
</span><span id="line-192"></span><span>      </span><span class="hs-comment">-- for older GHCs we can use the &quot;Have interpreter&quot; property to</span><span>
</span><span id="line-193"></span><span>      </span><span class="hs-comment">-- filter out `TemplateHaskell`</span><span>
</span><span id="line-194"></span><span>      </span><span id="local-6989586621679739763"><span class="annot"><span class="annottext">filterExtTH :: [(Extension, b)] -&gt; [(Extension, b)]
</span><a href="#local-6989586621679739763"><span class="hs-identifier hs-var hs-var">filterExtTH</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739814"><span class="hs-identifier hs-var">ghcVersion</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Version
</span><a href="Distribution.Types.Version.html#mkVersion"><span class="hs-identifier hs-var">mkVersion</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">]</span><span>
</span><span id="line-195"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NO&quot;</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Have interpreter&quot;</span></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679739768"><span class="hs-identifier hs-var">ghcInfoMap</span></a></span><span>
</span><span id="line-196"></span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {b}. KnownExtension -&gt; [(Extension, b)] -&gt; [(Extension, b)]
</span><a href="#local-6989586621679739765"><span class="hs-identifier hs-var">filterExt</span></a></span><span> </span><span class="annot"><span class="annottext">KnownExtension
</span><a href="Language.Haskell.Extension.html#TemplateHaskell"><span class="hs-identifier hs-var">TemplateHaskell</span></a></span><span>
</span><span id="line-197"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span>      </span><span id="local-6989586621679739765"><span class="annot"><span class="annottext">filterExt :: KnownExtension -&gt; [(Extension, b)] -&gt; [(Extension, b)]
</span><a href="#local-6989586621679739765"><span class="hs-identifier hs-var hs-var">filterExt</span></a></span></span><span> </span><span id="local-6989586621679739754"><span class="annot"><span class="annottext">KnownExtension
</span><a href="#local-6989586621679739754"><span class="hs-identifier hs-var">ext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">KnownExtension -&gt; Extension
</span><a href="Language.Haskell.Extension.html#EnableExtension"><span class="hs-identifier hs-var">EnableExtension</span></a></span><span> </span><span class="annot"><span class="annottext">KnownExtension
</span><a href="#local-6989586621679739754"><span class="hs-identifier hs-var">ext</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739751"><span class="annot"><span class="annottext">comp :: Compiler
</span><a href="#local-6989586621679739751"><span class="hs-identifier hs-var hs-var">comp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-202"></span><span>        </span><span class="annot"><span class="annottext">compilerId :: CompilerId
</span><a href="Distribution.Simple.Compiler.html#compilerId"><span class="hs-identifier hs-var">compilerId</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerFlavor -&gt; Version -&gt; CompilerId
</span><a href="Distribution.Compiler.html#CompilerId"><span class="hs-identifier hs-var">CompilerId</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739814"><span class="hs-identifier hs-var">ghcVersion</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-203"></span><span>        </span><span class="annot"><span class="annottext">compilerAbiTag :: AbiTag
</span><a href="Distribution.Simple.Compiler.html#compilerAbiTag"><span class="hs-identifier hs-var">compilerAbiTag</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AbiTag
</span><a href="Distribution.Compiler.html#NoAbiTag"><span class="hs-identifier hs-var">NoAbiTag</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-204"></span><span>        </span><span class="annot"><span class="annottext">compilerCompat :: [CompilerId]
</span><a href="Distribution.Simple.Compiler.html#compilerCompat"><span class="hs-identifier hs-var">compilerCompat</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-205"></span><span>        </span><span class="annot"><span class="annottext">compilerLanguages :: [(Language, String)]
</span><a href="Distribution.Simple.Compiler.html#compilerLanguages"><span class="hs-identifier hs-var">compilerLanguages</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Language, String)]
</span><a href="#local-6989586621679739776"><span class="hs-identifier hs-var">languages</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-206"></span><span>        </span><span class="annot"><span class="annottext">compilerExtensions :: [(Extension, Maybe String)]
</span><a href="Distribution.Simple.Compiler.html#compilerExtensions"><span class="hs-identifier hs-var">compilerExtensions</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Extension, Maybe String)]
</span><a href="#local-6989586621679739766"><span class="hs-identifier hs-var">extensions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-207"></span><span>        </span><span class="annot"><span class="annottext">compilerProperties :: Map String String
</span><a href="Distribution.Simple.Compiler.html#compilerProperties"><span class="hs-identifier hs-var">compilerProperties</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679739768"><span class="hs-identifier hs-var">ghcInfoMap</span></a></span><span>
</span><span id="line-208"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-209"></span><span>      </span><span id="local-6989586621679739740"><span class="annot"><span class="annottext">compPlatform :: Maybe Platform
</span><a href="#local-6989586621679739740"><span class="hs-identifier hs-var hs-var">compPlatform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(String, String)] -&gt; Maybe Platform
</span><a href="Distribution.Simple.GHC.Internal.html#targetPlatform"><span class="hs-identifier hs-var">Internal.targetPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">[(String, String)]
</span><a href="#local-6989586621679739772"><span class="hs-identifier hs-var">ghcInfo</span></a></span><span>
</span><span id="line-210"></span><span>      </span><span class="hs-comment">-- configure gcc and ld</span><span>
</span><span id="line-211"></span><span>      </span><span id="local-6989586621679739738"><span class="annot"><span class="annottext">progdb4 :: ProgramDb
</span><a href="#local-6989586621679739738"><span class="hs-identifier hs-var hs-var">progdb4</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
-&gt; ConfiguredProgram -&gt; Map String String -&gt; ProgramDb -&gt; ProgramDb
</span><a href="Distribution.Simple.GHC.Internal.html#configureToolchain"><span class="hs-identifier hs-var">Internal.configureToolchain</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679739807"><span class="hs-identifier hs-var">implInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739815"><span class="hs-identifier hs-var">ghcProg</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679739768"><span class="hs-identifier hs-var">ghcInfoMap</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739778"><span class="hs-identifier hs-var">progdb3</span></a></span><span>
</span><span id="line-212"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739751"><span class="hs-identifier hs-var">comp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Platform
</span><a href="#local-6989586621679739740"><span class="hs-identifier hs-var">compPlatform</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739738"><span class="hs-identifier hs-var">progdb4</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="hs-comment">-- | Given something like /usr/local/bin/ghc-6.6.1(.exe) we try and find</span><span>
</span><span id="line-215"></span><span class="hs-comment">-- the corresponding tool; e.g. if the tool is ghc-pkg, we try looking</span><span>
</span><span id="line-216"></span><span class="hs-comment">-- for a versioned or unversioned ghc-pkg in the same dir, that is:</span><span>
</span><span id="line-217"></span><span class="hs-comment">--</span><span>
</span><span id="line-218"></span><span class="hs-comment">-- &gt; /usr/local/bin/ghc-pkg-ghc-6.6.1(.exe)</span><span>
</span><span id="line-219"></span><span class="hs-comment">-- &gt; /usr/local/bin/ghc-pkg-6.6.1(.exe)</span><span>
</span><span id="line-220"></span><span class="hs-comment">-- &gt; /usr/local/bin/ghc-pkg(.exe)</span><span>
</span><span id="line-221"></span><span class="hs-comment">--</span><span>
</span><span id="line-222"></span><span class="annot"><a href="Distribution.Simple.GHC.html#guessToolFromGhcPath"><span class="hs-identifier hs-type">guessToolFromGhcPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Types.html#Program"><span class="hs-identifier hs-type">Program</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Types.html#ConfiguredProgram"><span class="hs-identifier hs-type">ConfiguredProgram</span></a></span><span>
</span><span id="line-223"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Find.html#ProgramSearchPath"><span class="hs-identifier hs-type">ProgramSearchPath</span></a></span><span>
</span><span id="line-224"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span id="guessToolFromGhcPath"><span class="annot"><span class="annottext">guessToolFromGhcPath :: Program
-&gt; ConfiguredProgram
-&gt; Verbosity
-&gt; ProgramSearchPath
-&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessToolFromGhcPath"><span class="hs-identifier hs-var hs-var">guessToolFromGhcPath</span></a></span></span><span> </span><span id="local-6989586621679739735"><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679739735"><span class="hs-identifier hs-var">tool</span></a></span></span><span> </span><span id="local-6989586621679739734"><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739734"><span class="hs-identifier hs-var">ghcProg</span></a></span></span><span> </span><span id="local-6989586621679739733"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739733"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739732"><span class="annot"><span class="annottext">ProgramSearchPath
</span><a href="#local-6989586621679739732"><span class="hs-identifier hs-var">searchpath</span></a></span></span><span>
</span><span id="line-226"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739731"><span class="annot"><span class="annottext">toolname :: String
</span><a href="#local-6989586621679739731"><span class="hs-identifier hs-var hs-var">toolname</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Program -&gt; String
</span><a href="Distribution.Simple.Program.Types.html#programName"><span class="hs-identifier hs-var">programName</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679739735"><span class="hs-identifier hs-var">tool</span></a></span><span>
</span><span id="line-227"></span><span>           </span><span id="local-6989586621679739729"><span class="annot"><span class="annottext">given_path :: String
</span><a href="#local-6989586621679739729"><span class="hs-identifier hs-var hs-var">given_path</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram -&gt; String
</span><a href="Distribution.Simple.Program.Types.html#programPath"><span class="hs-identifier hs-var">programPath</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739734"><span class="hs-identifier hs-var">ghcProg</span></a></span><span>
</span><span id="line-228"></span><span>           </span><span id="local-6989586621679739728"><span class="annot"><span class="annottext">given_dir :: String
</span><a href="#local-6989586621679739728"><span class="hs-identifier hs-var hs-var">given_dir</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#takeDirectory"><span class="hs-identifier hs-var">takeDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739729"><span class="hs-identifier hs-var">given_path</span></a></span><span>
</span><span id="line-229"></span><span>       </span><span id="local-6989586621679739727"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739727"><span class="hs-identifier hs-var">real_path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#canonicalizePath"><span class="hs-identifier hs-var">canonicalizePath</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739729"><span class="hs-identifier hs-var">given_path</span></a></span><span>
</span><span id="line-230"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739726"><span class="annot"><span class="annottext">real_dir :: String
</span><a href="#local-6989586621679739726"><span class="hs-identifier hs-var hs-var">real_dir</span></a></span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#takeDirectory"><span class="hs-identifier hs-var">takeDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739727"><span class="hs-identifier hs-var">real_path</span></a></span><span>
</span><span id="line-231"></span><span>           </span><span id="local-6989586621679739725"><span class="annot"><span class="annottext">versionSuffix :: String -&gt; String
</span><a href="#local-6989586621679739725"><span class="hs-identifier hs-var hs-var">versionSuffix</span></a></span></span><span> </span><span id="local-6989586621679739724"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739724"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="#local-6989586621679739723"><span class="hs-identifier hs-var">takeVersionSuffix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="Distribution.Simple.Utils.html#dropExeExtension"><span class="hs-identifier hs-var">dropExeExtension</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739724"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span>           </span><span id="local-6989586621679739721"><span class="annot"><span class="annottext">given_suf :: String
</span><a href="#local-6989586621679739721"><span class="hs-identifier hs-var hs-var">given_suf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="#local-6989586621679739725"><span class="hs-identifier hs-var">versionSuffix</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739729"><span class="hs-identifier hs-var">given_path</span></a></span><span>
</span><span id="line-233"></span><span>           </span><span id="local-6989586621679739720"><span class="annot"><span class="annottext">real_suf :: String
</span><a href="#local-6989586621679739720"><span class="hs-identifier hs-var hs-var">real_suf</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="#local-6989586621679739725"><span class="hs-identifier hs-var">versionSuffix</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739727"><span class="hs-identifier hs-var">real_path</span></a></span><span>
</span><span id="line-234"></span><span>           </span><span id="local-6989586621679739719"><span class="annot"><span class="annottext">guessNormal :: String -&gt; String
</span><a href="#local-6989586621679739719"><span class="hs-identifier hs-var hs-var">guessNormal</span></a></span></span><span>       </span><span id="local-6989586621679739718"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739718"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739718"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739731"><span class="hs-identifier hs-var">toolname</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#exeExtension"><span class="hs-identifier hs-var">exeExtension</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="Distribution.System.html#buildPlatform"><span class="hs-identifier hs-var">buildPlatform</span></a></span><span>
</span><span id="line-235"></span><span>           </span><span id="local-6989586621679739715"><span class="annot"><span class="annottext">guessGhcVersioned :: String -&gt; String -&gt; String
</span><a href="#local-6989586621679739715"><span class="hs-identifier hs-var hs-var">guessGhcVersioned</span></a></span></span><span> </span><span id="local-6989586621679739714"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739714"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span id="local-6989586621679739713"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739713"><span class="hs-identifier hs-var">suf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739714"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739731"><span class="hs-identifier hs-var">toolname</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-ghc&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739713"><span class="hs-identifier hs-var">suf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>                                           </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#exeExtension"><span class="hs-identifier hs-var">exeExtension</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="Distribution.System.html#buildPlatform"><span class="hs-identifier hs-var">buildPlatform</span></a></span><span>
</span><span id="line-237"></span><span>           </span><span id="local-6989586621679739712"><span class="annot"><span class="annottext">guessVersioned :: String -&gt; String -&gt; String
</span><a href="#local-6989586621679739712"><span class="hs-identifier hs-var hs-var">guessVersioned</span></a></span></span><span>    </span><span id="local-6989586621679739711"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739711"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span id="local-6989586621679739710"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739710"><span class="hs-identifier hs-var">suf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739711"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739731"><span class="hs-identifier hs-var">toolname</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739710"><span class="hs-identifier hs-var">suf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>                                           </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#exeExtension"><span class="hs-identifier hs-var">exeExtension</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="Distribution.System.html#buildPlatform"><span class="hs-identifier hs-var">buildPlatform</span></a></span><span>
</span><span id="line-239"></span><span>           </span><span id="local-6989586621679739708"><span class="annot"><span class="annottext">mkGuesses :: String -&gt; String -&gt; [String]
</span><a href="#local-6989586621679739708"><span class="hs-identifier hs-var hs-var">mkGuesses</span></a></span></span><span> </span><span id="local-6989586621679739707"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739707"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span id="local-6989586621679739706"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739706"><span class="hs-identifier hs-var">suf</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739706"><span class="hs-identifier hs-var">suf</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="#local-6989586621679739719"><span class="hs-identifier hs-var">guessNormal</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739707"><span class="hs-identifier hs-var">dir</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-240"></span><span>                             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="#local-6989586621679739715"><span class="hs-identifier hs-var">guessGhcVersioned</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739707"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739706"><span class="hs-identifier hs-var">suf</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-241"></span><span>                                            </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="#local-6989586621679739712"><span class="hs-identifier hs-var">guessVersioned</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739707"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739706"><span class="hs-identifier hs-var">suf</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-242"></span><span>                                            </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="#local-6989586621679739719"><span class="hs-identifier hs-var">guessNormal</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739707"><span class="hs-identifier hs-var">dir</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-243"></span><span>           </span><span class="hs-comment">-- order matters here, see https://github.com/haskell/cabal/issues/7390</span><span>
</span><span id="line-244"></span><span>           </span><span id="local-6989586621679739702"><span class="annot"><span class="annottext">guesses :: [String]
</span><a href="#local-6989586621679739702"><span class="hs-identifier hs-var hs-var">guesses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739727"><span class="hs-identifier hs-var">real_path</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739729"><span class="hs-identifier hs-var">given_path</span></a></span><span>
</span><span id="line-245"></span><span>                        </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-246"></span><span>                        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; [String]
</span><a href="#local-6989586621679739708"><span class="hs-identifier hs-var">mkGuesses</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739726"><span class="hs-identifier hs-var">real_dir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739720"><span class="hs-identifier hs-var">real_suf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-247"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; [String]
</span><a href="#local-6989586621679739708"><span class="hs-identifier hs-var">mkGuesses</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739728"><span class="hs-identifier hs-var">given_dir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739721"><span class="hs-identifier hs-var">given_suf</span></a></span><span>
</span><span id="line-248"></span><span>       </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739733"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;looking for tool &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739731"><span class="hs-identifier hs-var">toolname</span></a></span><span>
</span><span id="line-249"></span><span>         </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; near compiler in &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739728"><span class="hs-identifier hs-var">given_dir</span></a></span><span>
</span><span id="line-250"></span><span>       </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#debug"><span class="hs-identifier hs-var">debug</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739733"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;candidate locations: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.16.3.0/src/GHC-Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739702"><span class="hs-identifier hs-var">guesses</span></a></span><span>
</span><span id="line-251"></span><span>       </span><span id="local-6989586621679739698"><span class="annot"><span class="annottext">[Bool]
</span><a href="#local-6989586621679739698"><span class="hs-identifier hs-var">exists</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Bool
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#doesFileExist"><span class="hs-identifier hs-var">doesFileExist</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739702"><span class="hs-identifier hs-var">guesses</span></a></span><span>
</span><span id="line-252"></span><span>       </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739696"><span class="hs-identifier hs-var">file</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679739696"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739696"><span class="hs-identifier hs-var">file</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739702"><span class="hs-identifier hs-var">guesses</span></a></span><span> </span><span class="annot"><span class="annottext">[Bool]
</span><a href="#local-6989586621679739698"><span class="hs-identifier hs-var">exists</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-253"></span><span>                   </span><span class="hs-comment">-- If we can't find it near ghc, fall back to the usual</span><span>
</span><span id="line-254"></span><span>                   </span><span class="hs-comment">-- method.</span><span>
</span><span id="line-255"></span><span>         </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Program
-&gt; Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.Program.Types.html#programFindLocation"><span class="hs-identifier hs-var">programFindLocation</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="#local-6989586621679739735"><span class="hs-identifier hs-var">tool</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739733"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramSearchPath
</span><a href="#local-6989586621679739732"><span class="hs-identifier hs-var">searchpath</span></a></span><span>
</span><span id="line-256"></span><span>         </span><span class="hs-special">(</span><span id="local-6989586621679739695"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739695"><span class="hs-identifier hs-var">fp</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739733"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;found &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739731"><span class="hs-identifier hs-var">toolname</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; in &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739695"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-257"></span><span>                      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739694"><span class="annot"><span class="annottext">lookedAt :: [String]
</span><a href="#local-6989586621679739694"><span class="hs-identifier hs-var hs-var">lookedAt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span>
</span><span id="line-258"></span><span>                                   </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#takeWhile"><span class="hs-identifier hs-var">takeWhile</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679739692"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739692"><span class="hs-identifier hs-var">_file</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679739691"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739691"><span class="hs-identifier hs-var">exist</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739691"><span class="hs-identifier hs-var">exist</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>                                   </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739702"><span class="hs-identifier hs-var">guesses</span></a></span><span> </span><span class="annot"><span class="annottext">[Bool]
</span><a href="#local-6989586621679739698"><span class="hs-identifier hs-var">exists</span></a></span><span>
</span><span id="line-260"></span><span>                      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739695"><span class="hs-identifier hs-var">fp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739694"><span class="hs-identifier hs-var">lookedAt</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span class="annot"><a href="#local-6989586621679739723"><span class="hs-identifier hs-type">takeVersionSuffix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-263"></span><span>        </span><span id="local-6989586621679739723"><span class="annot"><span class="annottext">takeVersionSuffix :: String -&gt; String
</span><a href="#local-6989586621679739723"><span class="hs-identifier hs-var hs-var">takeVersionSuffix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="Distribution.Utils.Generic.html#takeWhileEndLE"><span class="hs-identifier hs-var">takeWhileEndLE</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679739688"><span class="hs-identifier hs-var">isSuffixChar</span></a></span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span>        </span><span class="annot"><a href="#local-6989586621679739688"><span class="hs-identifier hs-type">isSuffixChar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-266"></span><span>        </span><span id="local-6989586621679739688"><span class="annot"><span class="annottext">isSuffixChar :: Char -&gt; Bool
</span><a href="#local-6989586621679739688"><span class="hs-identifier hs-var hs-var">isSuffixChar</span></a></span></span><span> </span><span id="local-6989586621679739687"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679739687"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="../../base-4.16.3.0/src/GHC-Unicode.html#isDigit"><span class="hs-identifier hs-var">isDigit</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679739687"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679739687"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'.'</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679739687"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'-'</span></span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span class="hs-comment">-- | Given something like /usr/local/bin/ghc-6.6.1(.exe) we try and find a</span><span>
</span><span id="line-269"></span><span class="hs-comment">-- corresponding ghc-pkg, we try looking for both a versioned and unversioned</span><span>
</span><span id="line-270"></span><span class="hs-comment">-- ghc-pkg in the same dir, that is:</span><span>
</span><span id="line-271"></span><span class="hs-comment">--</span><span>
</span><span id="line-272"></span><span class="hs-comment">-- &gt; /usr/local/bin/ghc-pkg-ghc-6.6.1(.exe)</span><span>
</span><span id="line-273"></span><span class="hs-comment">-- &gt; /usr/local/bin/ghc-pkg-6.6.1(.exe)</span><span>
</span><span id="line-274"></span><span class="hs-comment">-- &gt; /usr/local/bin/ghc-pkg(.exe)</span><span>
</span><span id="line-275"></span><span class="hs-comment">--</span><span>
</span><span id="line-276"></span><span class="annot"><a href="Distribution.Simple.GHC.html#guessGhcPkgFromGhcPath"><span class="hs-identifier hs-type">guessGhcPkgFromGhcPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Types.html#ConfiguredProgram"><span class="hs-identifier hs-type">ConfiguredProgram</span></a></span><span>
</span><span id="line-277"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Find.html#ProgramSearchPath"><span class="hs-identifier hs-type">ProgramSearchPath</span></a></span><span>
</span><span id="line-278"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span id="guessGhcPkgFromGhcPath"><span class="annot"><span class="annottext">guessGhcPkgFromGhcPath :: ConfiguredProgram
-&gt; Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessGhcPkgFromGhcPath"><span class="hs-identifier hs-var hs-var">guessGhcPkgFromGhcPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Program
-&gt; ConfiguredProgram
-&gt; Verbosity
-&gt; ProgramSearchPath
-&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessToolFromGhcPath"><span class="hs-identifier hs-var">guessToolFromGhcPath</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ghcPkgProgram"><span class="hs-identifier hs-var">ghcPkgProgram</span></a></span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span class="hs-comment">-- | Given something like /usr/local/bin/ghc-6.6.1(.exe) we try and find a</span><span>
</span><span id="line-282"></span><span class="hs-comment">-- corresponding hsc2hs, we try looking for both a versioned and unversioned</span><span>
</span><span id="line-283"></span><span class="hs-comment">-- hsc2hs in the same dir, that is:</span><span>
</span><span id="line-284"></span><span class="hs-comment">--</span><span>
</span><span id="line-285"></span><span class="hs-comment">-- &gt; /usr/local/bin/hsc2hs-ghc-6.6.1(.exe)</span><span>
</span><span id="line-286"></span><span class="hs-comment">-- &gt; /usr/local/bin/hsc2hs-6.6.1(.exe)</span><span>
</span><span id="line-287"></span><span class="hs-comment">-- &gt; /usr/local/bin/hsc2hs(.exe)</span><span>
</span><span id="line-288"></span><span class="hs-comment">--</span><span>
</span><span id="line-289"></span><span class="annot"><a href="Distribution.Simple.GHC.html#guessHsc2hsFromGhcPath"><span class="hs-identifier hs-type">guessHsc2hsFromGhcPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Types.html#ConfiguredProgram"><span class="hs-identifier hs-type">ConfiguredProgram</span></a></span><span>
</span><span id="line-290"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Find.html#ProgramSearchPath"><span class="hs-identifier hs-type">ProgramSearchPath</span></a></span><span>
</span><span id="line-291"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span id="guessHsc2hsFromGhcPath"><span class="annot"><span class="annottext">guessHsc2hsFromGhcPath :: ConfiguredProgram
-&gt; Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessHsc2hsFromGhcPath"><span class="hs-identifier hs-var hs-var">guessHsc2hsFromGhcPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Program
-&gt; ConfiguredProgram
-&gt; Verbosity
-&gt; ProgramSearchPath
-&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessToolFromGhcPath"><span class="hs-identifier hs-var">guessToolFromGhcPath</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#hsc2hsProgram"><span class="hs-identifier hs-var">hsc2hsProgram</span></a></span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span class="hs-comment">-- | Given something like /usr/local/bin/ghc-6.6.1(.exe) we try and find a</span><span>
</span><span id="line-295"></span><span class="hs-comment">-- corresponding haddock, we try looking for both a versioned and unversioned</span><span>
</span><span id="line-296"></span><span class="hs-comment">-- haddock in the same dir, that is:</span><span>
</span><span id="line-297"></span><span class="hs-comment">--</span><span>
</span><span id="line-298"></span><span class="hs-comment">-- &gt; /usr/local/bin/haddock-ghc-6.6.1(.exe)</span><span>
</span><span id="line-299"></span><span class="hs-comment">-- &gt; /usr/local/bin/haddock-6.6.1(.exe)</span><span>
</span><span id="line-300"></span><span class="hs-comment">-- &gt; /usr/local/bin/haddock(.exe)</span><span>
</span><span id="line-301"></span><span class="hs-comment">--</span><span>
</span><span id="line-302"></span><span class="annot"><a href="Distribution.Simple.GHC.html#guessHaddockFromGhcPath"><span class="hs-identifier hs-type">guessHaddockFromGhcPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Types.html#ConfiguredProgram"><span class="hs-identifier hs-type">ConfiguredProgram</span></a></span><span>
</span><span id="line-303"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Find.html#ProgramSearchPath"><span class="hs-identifier hs-type">ProgramSearchPath</span></a></span><span>
</span><span id="line-304"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span id="guessHaddockFromGhcPath"><span class="annot"><span class="annottext">guessHaddockFromGhcPath :: ConfiguredProgram
-&gt; Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessHaddockFromGhcPath"><span class="hs-identifier hs-var hs-var">guessHaddockFromGhcPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Program
-&gt; ConfiguredProgram
-&gt; Verbosity
-&gt; ProgramSearchPath
-&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessToolFromGhcPath"><span class="hs-identifier hs-var">guessToolFromGhcPath</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#haddockProgram"><span class="hs-identifier hs-var">haddockProgram</span></a></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span class="annot"><a href="Distribution.Simple.GHC.html#guessHpcFromGhcPath"><span class="hs-identifier hs-type">guessHpcFromGhcPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Types.html#ConfiguredProgram"><span class="hs-identifier hs-type">ConfiguredProgram</span></a></span><span>
</span><span id="line-308"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Find.html#ProgramSearchPath"><span class="hs-identifier hs-type">ProgramSearchPath</span></a></span><span>
</span><span id="line-309"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span id="guessHpcFromGhcPath"><span class="annot"><span class="annottext">guessHpcFromGhcPath :: ConfiguredProgram
-&gt; Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessHpcFromGhcPath"><span class="hs-identifier hs-var hs-var">guessHpcFromGhcPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Program
-&gt; ConfiguredProgram
-&gt; Verbosity
-&gt; ProgramSearchPath
-&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessToolFromGhcPath"><span class="hs-identifier hs-var">guessToolFromGhcPath</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#hpcProgram"><span class="hs-identifier hs-var">hpcProgram</span></a></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="annot"><a href="Distribution.Simple.GHC.html#guessRunghcFromGhcPath"><span class="hs-identifier hs-type">guessRunghcFromGhcPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Types.html#ConfiguredProgram"><span class="hs-identifier hs-type">ConfiguredProgram</span></a></span><span>
</span><span id="line-313"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Find.html#ProgramSearchPath"><span class="hs-identifier hs-type">ProgramSearchPath</span></a></span><span>
</span><span id="line-314"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-315"></span><span id="guessRunghcFromGhcPath"><span class="annot"><span class="annottext">guessRunghcFromGhcPath :: ConfiguredProgram
-&gt; Verbosity -&gt; ProgramSearchPath -&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessRunghcFromGhcPath"><span class="hs-identifier hs-var hs-var">guessRunghcFromGhcPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Program
-&gt; ConfiguredProgram
-&gt; Verbosity
-&gt; ProgramSearchPath
-&gt; IO (Maybe (String, [String]))
</span><a href="Distribution.Simple.GHC.html#guessToolFromGhcPath"><span class="hs-identifier hs-var">guessToolFromGhcPath</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#runghcProgram"><span class="hs-identifier hs-var">runghcProgram</span></a></span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span class="annot"><a href="Distribution.Simple.GHC.html#getGhcInfo"><span class="hs-identifier hs-type">getGhcInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Types.html#ConfiguredProgram"><span class="hs-identifier hs-type">ConfiguredProgram</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-319"></span><span id="getGhcInfo"><span class="annot"><span class="annottext">getGhcInfo :: Verbosity -&gt; ConfiguredProgram -&gt; IO [(String, String)]
</span><a href="Distribution.Simple.GHC.html#getGhcInfo"><span class="hs-identifier hs-var hs-var">getGhcInfo</span></a></span></span><span> </span><span id="local-6989586621679739684"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739684"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739683"><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739683"><span class="hs-identifier hs-var">ghcProg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; GhcImplInfo -&gt; ConfiguredProgram -&gt; IO [(String, String)]
</span><a href="Distribution.Simple.GHC.Internal.html#getGhcInfo"><span class="hs-identifier hs-var">Internal.getGhcInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739684"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679739682"><span class="hs-identifier hs-var">implInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739683"><span class="hs-identifier hs-var">ghcProg</span></a></span><span>
</span><span id="line-320"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-321"></span><span>    </span><span id="local-6989586621679739679"><span class="annot"><span class="annottext">version :: Version
</span><a href="#local-6989586621679739679"><span class="hs-identifier hs-var hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.getGhcInfo: no ghc version&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram -&gt; Maybe Version
</span><a href="Distribution.Simple.Program.Types.html#programVersion"><span class="hs-identifier hs-var">programVersion</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739683"><span class="hs-identifier hs-var">ghcProg</span></a></span><span>
</span><span id="line-322"></span><span>    </span><span id="local-6989586621679739682"><span class="annot"><span class="annottext">implInfo :: GhcImplInfo
</span><a href="#local-6989586621679739682"><span class="hs-identifier hs-var hs-var">implInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Version -&gt; GhcImplInfo
</span><a href="Distribution.Simple.GHC.ImplInfo.html#ghcVersionImplInfo"><span class="hs-identifier hs-var">ghcVersionImplInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739679"><span class="hs-identifier hs-var">version</span></a></span><span>
</span><span id="line-323"></span><span>
</span><span id="line-324"></span><span class="hs-comment">-- | Given a single package DB, return all installed packages.</span><span>
</span><span id="line-325"></span><span class="annot"><a href="Distribution.Simple.GHC.html#getPackageDBContents"><span class="hs-identifier hs-type">getPackageDBContents</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDB"><span class="hs-identifier hs-type">PackageDB</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span>
</span><span id="line-326"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Distribution.Simple.PackageIndex.html#InstalledPackageIndex"><span class="hs-identifier hs-type">InstalledPackageIndex</span></a></span><span>
</span><span id="line-327"></span><span id="getPackageDBContents"><span class="annot"><span class="annottext">getPackageDBContents :: Verbosity -&gt; PackageDB -&gt; ProgramDb -&gt; IO InstalledPackageIndex
</span><a href="Distribution.Simple.GHC.html#getPackageDBContents"><span class="hs-identifier hs-var hs-var">getPackageDBContents</span></a></span></span><span> </span><span id="local-6989586621679739675"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739675"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739674"><span class="annot"><span class="annottext">PackageDB
</span><a href="#local-6989586621679739674"><span class="hs-identifier hs-var">packagedb</span></a></span></span><span> </span><span id="local-6989586621679739673"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739673"><span class="hs-identifier hs-var">progdb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-328"></span><span>  </span><span id="local-6989586621679739672"><span class="annot"><span class="annottext">[(PackageDB, [InstalledPackageInfo])]
</span><a href="#local-6989586621679739672"><span class="hs-identifier hs-var">pkgss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; [PackageDB]
-&gt; ProgramDb
-&gt; IO [(PackageDB, [InstalledPackageInfo])]
</span><a href="Distribution.Simple.GHC.html#getInstalledPackages%27"><span class="hs-identifier hs-var">getInstalledPackages'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739675"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PackageDB
</span><a href="#local-6989586621679739674"><span class="hs-identifier hs-var">packagedb</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739673"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-329"></span><span>  </span><span class="annot"><span class="annottext">Verbosity
-&gt; [(PackageDB, [InstalledPackageInfo])]
-&gt; ProgramDb
-&gt; IO InstalledPackageIndex
</span><a href="Distribution.Simple.GHC.html#toPackageIndex"><span class="hs-identifier hs-var">toPackageIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739675"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[(PackageDB, [InstalledPackageInfo])]
</span><a href="#local-6989586621679739672"><span class="hs-identifier hs-var">pkgss</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739673"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span class="hs-comment">-- | Given a package DB stack, return all installed packages.</span><span>
</span><span id="line-332"></span><span class="annot"><a href="Distribution.Simple.GHC.html#getInstalledPackages"><span class="hs-identifier hs-type">getInstalledPackages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDBStack"><span class="hs-identifier hs-type">PackageDBStack</span></a></span><span>
</span><span id="line-333"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span>
</span><span id="line-334"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Distribution.Simple.PackageIndex.html#InstalledPackageIndex"><span class="hs-identifier hs-type">InstalledPackageIndex</span></a></span><span>
</span><span id="line-335"></span><span id="getInstalledPackages"><span class="annot"><span class="annottext">getInstalledPackages :: Verbosity
-&gt; Compiler -&gt; [PackageDB] -&gt; ProgramDb -&gt; IO InstalledPackageIndex
</span><a href="Distribution.Simple.GHC.html#getInstalledPackages"><span class="hs-identifier hs-var hs-var">getInstalledPackages</span></a></span></span><span> </span><span id="local-6989586621679739668"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739668"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739667"><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739667"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span id="local-6989586621679739666"><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739666"><span class="hs-identifier hs-var">packagedbs</span></a></span></span><span> </span><span id="local-6989586621679739665"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739665"><span class="hs-identifier hs-var">progdb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-336"></span><span>  </span><span class="annot"><span class="annottext">Verbosity -&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#checkPackageDbEnvVar"><span class="hs-identifier hs-var">checkPackageDbEnvVar</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739668"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-337"></span><span>  </span><span class="annot"><span class="annottext">Verbosity -&gt; Compiler -&gt; [PackageDB] -&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#checkPackageDbStack"><span class="hs-identifier hs-var">checkPackageDbStack</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739668"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739667"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739666"><span class="hs-identifier hs-var">packagedbs</span></a></span><span>
</span><span id="line-338"></span><span>  </span><span id="local-6989586621679739662"><span class="annot"><span class="annottext">[(PackageDB, [InstalledPackageInfo])]
</span><a href="#local-6989586621679739662"><span class="hs-identifier hs-var">pkgss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; [PackageDB]
-&gt; ProgramDb
-&gt; IO [(PackageDB, [InstalledPackageInfo])]
</span><a href="Distribution.Simple.GHC.html#getInstalledPackages%27"><span class="hs-identifier hs-var">getInstalledPackages'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739668"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739666"><span class="hs-identifier hs-var">packagedbs</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739665"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-339"></span><span>  </span><span id="local-6989586621679739661"><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679739661"><span class="hs-identifier hs-var">index</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; [(PackageDB, [InstalledPackageInfo])]
-&gt; ProgramDb
-&gt; IO InstalledPackageIndex
</span><a href="Distribution.Simple.GHC.html#toPackageIndex"><span class="hs-identifier hs-var">toPackageIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739668"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[(PackageDB, [InstalledPackageInfo])]
</span><a href="#local-6989586621679739662"><span class="hs-identifier hs-var">pkgss</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739665"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-340"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24%21"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageIndex -&gt; InstalledPackageIndex
</span><a href="#local-6989586621679739659"><span class="hs-identifier hs-var">hackRtsPackage</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679739661"><span class="hs-identifier hs-var">index</span></a></span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-343"></span><span>    </span><span id="local-6989586621679739659"><span class="annot"><span class="annottext">hackRtsPackage :: InstalledPackageIndex -&gt; InstalledPackageIndex
</span><a href="#local-6989586621679739659"><span class="hs-identifier hs-var hs-var">hackRtsPackage</span></a></span></span><span> </span><span id="local-6989586621679739658"><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679739658"><span class="hs-identifier hs-var">index</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-344"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. PackageIndex a -&gt; PackageName -&gt; [(Version, [a])]
</span><a href="Distribution.Simple.PackageIndex.html#lookupPackageName"><span class="hs-identifier hs-var">PackageIndex.lookupPackageName</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679739658"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; PackageName
</span><a href="Distribution.Types.PackageName.html#mkPackageName"><span class="hs-identifier hs-var">mkPackageName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rts&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-345"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Version
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span class="hs-special">[</span><span id="local-6989586621679739655"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679739655"><span class="hs-identifier hs-var">rts</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-346"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
-&gt; InstalledPackageIndex -&gt; InstalledPackageIndex
</span><a href="Distribution.Simple.PackageIndex.html#insert"><span class="hs-identifier hs-var">PackageIndex.insert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstalledPackageInfo -&gt; InstalledPackageInfo
</span><a href="Distribution.Simple.GHC.html#removeMingwIncludeDir"><span class="hs-identifier hs-var">removeMingwIncludeDir</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679739655"><span class="hs-identifier hs-var">rts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679739658"><span class="hs-identifier hs-var">index</span></a></span><span>
</span><span id="line-347"></span><span>        </span><span class="annot"><span class="annottext">[(Version, [InstalledPackageInfo])]
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">InstalledPackageIndex
</span><a href="#local-6989586621679739658"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="hs-comment">-- No (or multiple) ghc rts package is registered!!</span><span>
</span><span id="line-348"></span><span>                    </span><span class="hs-comment">-- Feh, whatever, the ghc test suite does some crazy stuff.</span><span>
</span><span id="line-349"></span><span>
</span><span id="line-350"></span><span class="hs-comment">-- | Given a list of @(PackageDB, InstalledPackageInfo)@ pairs, produce a</span><span>
</span><span id="line-351"></span><span class="hs-comment">-- @PackageIndex@. Helper function used by 'getPackageDBContents' and</span><span>
</span><span id="line-352"></span><span class="hs-comment">-- 'getInstalledPackages'.</span><span>
</span><span id="line-353"></span><span class="annot"><a href="Distribution.Simple.GHC.html#toPackageIndex"><span class="hs-identifier hs-type">toPackageIndex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-354"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDB"><span class="hs-identifier hs-type">PackageDB</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier hs-type">InstalledPackageInfo</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-355"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span>
</span><span id="line-356"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Distribution.Simple.PackageIndex.html#InstalledPackageIndex"><span class="hs-identifier hs-type">InstalledPackageIndex</span></a></span><span>
</span><span id="line-357"></span><span id="toPackageIndex"><span class="annot"><span class="annottext">toPackageIndex :: Verbosity
-&gt; [(PackageDB, [InstalledPackageInfo])]
-&gt; ProgramDb
-&gt; IO InstalledPackageIndex
</span><a href="Distribution.Simple.GHC.html#toPackageIndex"><span class="hs-identifier hs-var hs-var">toPackageIndex</span></a></span></span><span> </span><span id="local-6989586621679739652"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739652"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739651"><span class="annot"><span class="annottext">[(PackageDB, [InstalledPackageInfo])]
</span><a href="#local-6989586621679739651"><span class="hs-identifier hs-var">pkgss</span></a></span></span><span> </span><span id="local-6989586621679739650"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739650"><span class="hs-identifier hs-var">progdb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-358"></span><span>  </span><span class="hs-comment">-- On Windows, various fields have $topdir/foo rather than full</span><span>
</span><span id="line-359"></span><span>  </span><span class="hs-comment">-- paths. We need to substitute the right value in so that when</span><span>
</span><span id="line-360"></span><span>  </span><span class="hs-comment">-- we, for example, call gcc, we have proper paths to give it.</span><span>
</span><span id="line-361"></span><span>  </span><span id="local-6989586621679739649"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739649"><span class="hs-identifier hs-var">topDir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; ConfiguredProgram -&gt; IO String
</span><a href="Distribution.Simple.GHC.html#getLibDir%27"><span class="hs-identifier hs-var">getLibDir'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739652"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739647"><span class="hs-identifier hs-var">ghcProg</span></a></span><span>
</span><span id="line-362"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739646"><span class="annot"><span class="annottext">indices :: [InstalledPackageIndex]
</span><a href="#local-6989586621679739646"><span class="hs-identifier hs-var hs-var">indices</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[InstalledPackageInfo] -&gt; InstalledPackageIndex
</span><a href="Distribution.Simple.PackageIndex.html#fromList"><span class="hs-identifier hs-var">PackageIndex.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; InstalledPackageInfo -&gt; InstalledPackageInfo
</span><a href="Distribution.Simple.GHC.Internal.html#substTopDir"><span class="hs-identifier hs-var">Internal.substTopDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739649"><span class="hs-identifier hs-var">topDir</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[InstalledPackageInfo]
</span><a href="#local-6989586621679739643"><span class="hs-identifier hs-var">pkgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDB
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679739643"><span class="annot"><span class="annottext">[InstalledPackageInfo]
</span><a href="#local-6989586621679739643"><span class="hs-identifier hs-var">pkgs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(PackageDB, [InstalledPackageInfo])]
</span><a href="#local-6989586621679739651"><span class="hs-identifier hs-var">pkgss</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-364"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24%21"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">[InstalledPackageIndex]
</span><a href="#local-6989586621679739646"><span class="hs-identifier hs-var">indices</span></a></span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-367"></span><span>    </span><span id="local-6989586621679739647"><span class="annot"><span class="annottext">ghcProg :: ConfiguredProgram
</span><a href="#local-6989586621679739647"><span class="hs-identifier hs-var hs-var">ghcProg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.toPackageIndex: no ghc program&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Program -&gt; ProgramDb -&gt; Maybe ConfiguredProgram
</span><a href="Distribution.Simple.Program.Db.html#lookupProgram"><span class="hs-identifier hs-var">lookupProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ghcProgram"><span class="hs-identifier hs-var">ghcProgram</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739650"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span class="hs-comment">-- | Return the 'FilePath' to the GHC application data directory.</span><span>
</span><span id="line-370"></span><span class="hs-comment">--</span><span>
</span><span id="line-371"></span><span class="hs-comment">-- @since 3.4.0.0</span><span>
</span><span id="line-372"></span><span class="annot"><a href="Distribution.Simple.GHC.html#getGhcAppDir"><span class="hs-identifier hs-type">getGhcAppDir</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-373"></span><span id="getGhcAppDir"><span class="annot"><span class="annottext">getGhcAppDir :: IO String
</span><a href="Distribution.Simple.GHC.html#getGhcAppDir"><span class="hs-identifier hs-var hs-var">getGhcAppDir</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#getAppUserDataDirectory"><span class="hs-identifier hs-var">getAppUserDataDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ghc&quot;</span></span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span class="annot"><a href="Distribution.Simple.GHC.html#getLibDir"><span class="hs-identifier hs-type">getLibDir</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-376"></span><span id="getLibDir"><span class="annot"><span class="annottext">getLibDir :: Verbosity -&gt; LocalBuildInfo -&gt; IO String
</span><a href="Distribution.Simple.GHC.html#getLibDir"><span class="hs-identifier hs-var hs-var">getLibDir</span></a></span></span><span> </span><span id="local-6989586621679739639"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739639"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739638"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739638"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-377"></span><span>    </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="Distribution.Utils.Generic.html#dropWhileEndLE"><span class="hs-identifier hs-var">dropWhileEndLE</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="../../base-4.16.3.0/src/GHC-Unicode.html#isSpace"><span class="hs-identifier hs-var">isSpace</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-operator hs-var">`fmap`</span></a></span><span>
</span><span id="line-378"></span><span>     </span><span class="annot"><span class="annottext">Verbosity -&gt; Program -&gt; ProgramDb -&gt; [String] -&gt; IO String
</span><a href="Distribution.Simple.Program.html#getDbProgramOutput"><span class="hs-identifier hs-var">getDbProgramOutput</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739639"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ghcProgram"><span class="hs-identifier hs-var">ghcProgram</span></a></span><span>
</span><span id="line-379"></span><span>     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProgramDb
</span><a href="Distribution.Types.LocalBuildInfo.html#withPrograms"><span class="hs-identifier hs-var">withPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739638"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;--print-libdir&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="annot"><a href="Distribution.Simple.GHC.html#getLibDir%27"><span class="hs-identifier hs-type">getLibDir'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Types.html#ConfiguredProgram"><span class="hs-identifier hs-type">ConfiguredProgram</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-382"></span><span id="getLibDir%27"><span class="annot"><span class="annottext">getLibDir' :: Verbosity -&gt; ConfiguredProgram -&gt; IO String
</span><a href="Distribution.Simple.GHC.html#getLibDir%27"><span class="hs-identifier hs-var hs-var">getLibDir'</span></a></span></span><span> </span><span id="local-6989586621679739633"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739633"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739632"><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739632"><span class="hs-identifier hs-var">ghcProg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-383"></span><span>    </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="Distribution.Utils.Generic.html#dropWhileEndLE"><span class="hs-identifier hs-var">dropWhileEndLE</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="../../base-4.16.3.0/src/GHC-Unicode.html#isSpace"><span class="hs-identifier hs-var">isSpace</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-operator hs-var">`fmap`</span></a></span><span>
</span><span id="line-384"></span><span>     </span><span class="annot"><span class="annottext">Verbosity -&gt; ConfiguredProgram -&gt; [String] -&gt; IO String
</span><a href="Distribution.Simple.Program.html#getProgramOutput"><span class="hs-identifier hs-var">getProgramOutput</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739633"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739632"><span class="hs-identifier hs-var">ghcProg</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;--print-libdir&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span>
</span><span id="line-387"></span><span class="hs-comment">-- | Return the 'FilePath' to the global GHC package database.</span><span>
</span><span id="line-388"></span><span class="annot"><a href="Distribution.Simple.GHC.html#getGlobalPackageDB"><span class="hs-identifier hs-type">getGlobalPackageDB</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Types.html#ConfiguredProgram"><span class="hs-identifier hs-type">ConfiguredProgram</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-389"></span><span id="getGlobalPackageDB"><span class="annot"><span class="annottext">getGlobalPackageDB :: Verbosity -&gt; ConfiguredProgram -&gt; IO String
</span><a href="Distribution.Simple.GHC.html#getGlobalPackageDB"><span class="hs-identifier hs-var hs-var">getGlobalPackageDB</span></a></span></span><span> </span><span id="local-6989586621679739630"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739630"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739629"><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739629"><span class="hs-identifier hs-var">ghcProg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-390"></span><span>    </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="Distribution.Utils.Generic.html#dropWhileEndLE"><span class="hs-identifier hs-var">dropWhileEndLE</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="../../base-4.16.3.0/src/GHC-Unicode.html#isSpace"><span class="hs-identifier hs-var">isSpace</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-operator hs-var">`fmap`</span></a></span><span>
</span><span id="line-391"></span><span>     </span><span class="annot"><span class="annottext">Verbosity -&gt; ConfiguredProgram -&gt; [String] -&gt; IO String
</span><a href="Distribution.Simple.Program.html#getProgramOutput"><span class="hs-identifier hs-var">getProgramOutput</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739630"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739629"><span class="hs-identifier hs-var">ghcProg</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;--print-global-package-db&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span class="hs-comment">-- | Return the 'FilePath' to the per-user GHC package database.</span><span>
</span><span id="line-394"></span><span class="annot"><a href="Distribution.Simple.GHC.html#getUserPackageDB"><span class="hs-identifier hs-type">getUserPackageDB</span></a></span><span>
</span><span id="line-395"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Types.html#ConfiguredProgram"><span class="hs-identifier hs-type">ConfiguredProgram</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-396"></span><span id="getUserPackageDB"><span class="annot"><span class="annottext">getUserPackageDB :: Verbosity -&gt; ConfiguredProgram -&gt; Platform -&gt; IO String
</span><a href="Distribution.Simple.GHC.html#getUserPackageDB"><span class="hs-identifier hs-var hs-var">getUserPackageDB</span></a></span></span><span> </span><span id="local-6989586621679739627"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739627"><span class="hs-identifier hs-var">_verbosity</span></a></span></span><span> </span><span id="local-6989586621679739626"><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739626"><span class="hs-identifier hs-var">ghcProg</span></a></span></span><span> </span><span id="local-6989586621679739625"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679739625"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-397"></span><span>    </span><span class="hs-comment">-- It's rather annoying that we have to reconstruct this, because ghc</span><span>
</span><span id="line-398"></span><span>    </span><span class="hs-comment">-- hides this information from us otherwise. But for certain use cases</span><span>
</span><span id="line-399"></span><span>    </span><span class="hs-comment">-- like change monitoring it really can't remain hidden.</span><span>
</span><span id="line-400"></span><span>    </span><span id="local-6989586621679739624"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739624"><span class="hs-identifier hs-var">appdir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO String
</span><a href="Distribution.Simple.GHC.html#getGhcAppDir"><span class="hs-identifier hs-var">getGhcAppDir</span></a></span><span>
</span><span id="line-401"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739624"><span class="hs-identifier hs-var">appdir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739623"><span class="hs-identifier hs-var">platformAndVersion</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739622"><span class="hs-identifier hs-var">packageConfFileName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-403"></span><span>    </span><span id="local-6989586621679739623"><span class="annot"><span class="annottext">platformAndVersion :: String
</span><a href="#local-6989586621679739623"><span class="hs-identifier hs-var hs-var">platformAndVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Version -&gt; String
</span><a href="Distribution.Simple.GHC.Internal.html#ghcPlatformAndVersionString"><span class="hs-identifier hs-var">Internal.ghcPlatformAndVersionString</span></a></span><span>
</span><span id="line-404"></span><span>                           </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679739625"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739621"><span class="hs-identifier hs-var">ghcVersion</span></a></span><span>
</span><span id="line-405"></span><span>    </span><span id="local-6989586621679739622"><span class="annot"><span class="annottext">packageConfFileName :: String
</span><a href="#local-6989586621679739622"><span class="hs-identifier hs-var hs-var">packageConfFileName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;package.conf.d&quot;</span></span><span>
</span><span id="line-406"></span><span>    </span><span id="local-6989586621679739621"><span class="annot"><span class="annottext">ghcVersion :: Version
</span><a href="#local-6989586621679739621"><span class="hs-identifier hs-var hs-var">ghcVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.getUserPackageDB: no ghc version&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram -&gt; Maybe Version
</span><a href="Distribution.Simple.Program.Types.html#programVersion"><span class="hs-identifier hs-var">programVersion</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739626"><span class="hs-identifier hs-var">ghcProg</span></a></span><span>
</span><span id="line-407"></span><span>
</span><span id="line-408"></span><span class="annot"><a href="Distribution.Simple.GHC.html#checkPackageDbEnvVar"><span class="hs-identifier hs-type">checkPackageDbEnvVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-409"></span><span id="checkPackageDbEnvVar"><span class="annot"><span class="annottext">checkPackageDbEnvVar :: Verbosity -&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#checkPackageDbEnvVar"><span class="hs-identifier hs-var hs-var">checkPackageDbEnvVar</span></a></span></span><span> </span><span id="local-6989586621679739618"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739618"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-410"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.GHC.Internal.html#checkPackageDbEnvVar"><span class="hs-identifier hs-var">Internal.checkPackageDbEnvVar</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739618"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC_PACKAGE_PATH&quot;</span></span><span>
</span><span id="line-411"></span><span>
</span><span id="line-412"></span><span class="annot"><a href="Distribution.Simple.GHC.html#checkPackageDbStack"><span class="hs-identifier hs-type">checkPackageDbStack</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDBStack"><span class="hs-identifier hs-type">PackageDBStack</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-413"></span><span id="checkPackageDbStack"><span class="annot"><span class="annottext">checkPackageDbStack :: Verbosity -&gt; Compiler -&gt; [PackageDB] -&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#checkPackageDbStack"><span class="hs-identifier hs-var hs-var">checkPackageDbStack</span></a></span></span><span> </span><span id="local-6989586621679739616"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739616"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739615"><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739615"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-414"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">GhcImplInfo -&gt; Bool
</span><a href="Distribution.Simple.GHC.ImplInfo.html#flagPackageConf"><span class="hs-identifier hs-var">flagPackageConf</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679739613"><span class="hs-identifier hs-var">implInfo</span></a></span><span>
</span><span id="line-415"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; [PackageDB] -&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#checkPackageDbStackPre76"><span class="hs-identifier hs-var">checkPackageDbStackPre76</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739616"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-416"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; [PackageDB] -&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#checkPackageDbStackPost76"><span class="hs-identifier hs-var">checkPackageDbStackPost76</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739616"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-417"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679739613"><span class="annot"><span class="annottext">implInfo :: GhcImplInfo
</span><a href="#local-6989586621679739613"><span class="hs-identifier hs-var hs-var">implInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Version -&gt; GhcImplInfo
</span><a href="Distribution.Simple.GHC.ImplInfo.html#ghcVersionImplInfo"><span class="hs-identifier hs-var">ghcVersionImplInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; Version
</span><a href="Distribution.Simple.Compiler.html#compilerVersion"><span class="hs-identifier hs-var">compilerVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739615"><span class="hs-identifier hs-var">comp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>
</span><span id="line-419"></span><span class="annot"><a href="Distribution.Simple.GHC.html#checkPackageDbStackPost76"><span class="hs-identifier hs-type">checkPackageDbStackPost76</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDBStack"><span class="hs-identifier hs-type">PackageDBStack</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span id="checkPackageDbStackPost76"><span class="annot"><span class="annottext">checkPackageDbStackPost76 :: Verbosity -&gt; [PackageDB] -&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#checkPackageDbStackPost76"><span class="hs-identifier hs-var hs-var">checkPackageDbStackPost76</span></a></span></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#GlobalPackageDB"><span class="hs-identifier hs-var">GlobalPackageDB</span></a></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679739608"><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739608"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-421"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#GlobalPackageDB"><span class="hs-identifier hs-var">GlobalPackageDB</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#notElem"><span class="hs-operator hs-var">`notElem`</span></a></span><span> </span><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739608"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-422"></span><span class="annot"><a href="Distribution.Simple.GHC.html#checkPackageDbStackPost76"><span class="hs-identifier hs-var">checkPackageDbStackPost76</span></a></span><span> </span><span id="local-6989586621679739606"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739606"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739605"><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739605"><span class="hs-identifier hs-var">rest</span></a></span></span><span>
</span><span id="line-423"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#GlobalPackageDB"><span class="hs-identifier hs-var">GlobalPackageDB</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739605"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-424"></span><span>  </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; String -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739606"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;If the global package db is specified, it must be &quot;</span></span><span>
</span><span id="line-425"></span><span>     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;specified first and cannot be specified multiple times&quot;</span></span><span>
</span><span id="line-426"></span><span class="annot"><a href="Distribution.Simple.GHC.html#checkPackageDbStackPost76"><span class="hs-identifier hs-var">checkPackageDbStackPost76</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[PackageDB]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span class="annot"><a href="Distribution.Simple.GHC.html#checkPackageDbStackPre76"><span class="hs-identifier hs-type">checkPackageDbStackPre76</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDBStack"><span class="hs-identifier hs-type">PackageDBStack</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-429"></span><span id="checkPackageDbStackPre76"><span class="annot"><span class="annottext">checkPackageDbStackPre76 :: Verbosity -&gt; [PackageDB] -&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#checkPackageDbStackPre76"><span class="hs-identifier hs-var hs-var">checkPackageDbStackPre76</span></a></span></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#GlobalPackageDB"><span class="hs-identifier hs-var">GlobalPackageDB</span></a></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679739603"><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739603"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-430"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#GlobalPackageDB"><span class="hs-identifier hs-var">GlobalPackageDB</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#notElem"><span class="hs-operator hs-var">`notElem`</span></a></span><span> </span><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739603"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-431"></span><span class="annot"><a href="Distribution.Simple.GHC.html#checkPackageDbStackPre76"><span class="hs-identifier hs-var">checkPackageDbStackPre76</span></a></span><span> </span><span id="local-6989586621679739602"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739602"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739601"><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739601"><span class="hs-identifier hs-var">rest</span></a></span></span><span>
</span><span id="line-432"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#GlobalPackageDB"><span class="hs-identifier hs-var">GlobalPackageDB</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#notElem"><span class="hs-operator hs-var">`notElem`</span></a></span><span> </span><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739601"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-433"></span><span>  </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; String -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739602"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-434"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;With current ghc versions the global package db is always used &quot;</span></span><span>
</span><span id="line-435"></span><span>     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;and must be listed first. This ghc limitation is lifted in GHC 7.6,&quot;</span></span><span>
</span><span id="line-436"></span><span>     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;see https://gitlab.haskell.org/ghc/ghc/-/issues/5977&quot;</span></span><span>
</span><span id="line-437"></span><span class="annot"><a href="Distribution.Simple.GHC.html#checkPackageDbStackPre76"><span class="hs-identifier hs-var">checkPackageDbStackPre76</span></a></span><span> </span><span id="local-6989586621679739600"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739600"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span class="annot"><span class="annottext">[PackageDB]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-438"></span><span>  </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; String -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739600"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;If the global package db is specified, it must be &quot;</span></span><span>
</span><span id="line-439"></span><span>     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;specified first and cannot be specified multiple times&quot;</span></span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span class="hs-comment">-- GHC &lt; 6.10 put &quot;$topdir/include/mingw&quot; in rts's installDirs. This</span><span>
</span><span id="line-442"></span><span class="hs-comment">-- breaks when you want to use a different gcc, so we need to filter</span><span>
</span><span id="line-443"></span><span class="hs-comment">-- it out.</span><span>
</span><span id="line-444"></span><span class="annot"><a href="Distribution.Simple.GHC.html#removeMingwIncludeDir"><span class="hs-identifier hs-type">removeMingwIncludeDir</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier hs-type">InstalledPackageInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier hs-type">InstalledPackageInfo</span></a></span><span>
</span><span id="line-445"></span><span id="removeMingwIncludeDir"><span class="annot"><span class="annottext">removeMingwIncludeDir :: InstalledPackageInfo -&gt; InstalledPackageInfo
</span><a href="Distribution.Simple.GHC.html#removeMingwIncludeDir"><span class="hs-identifier hs-var hs-var">removeMingwIncludeDir</span></a></span></span><span> </span><span id="local-6989586621679739599"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679739599"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-446"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739598"><span class="annot"><span class="annottext">ids :: [String]
</span><a href="#local-6989586621679739598"><span class="hs-identifier hs-var hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo -&gt; [String]
</span><a href="Distribution.Types.InstalledPackageInfo.html#includeDirs"><span class="hs-identifier hs-var">InstalledPackageInfo.includeDirs</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679739599"><span class="hs-identifier hs-var">pkg</span></a></span><span>
</span><span id="line-447"></span><span>        </span><span id="local-6989586621679739595"><span class="annot"><span class="annottext">ids' :: [String]
</span><a href="#local-6989586621679739595"><span class="hs-identifier hs-var hs-var">ids'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mingw&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#isSuffixOf"><span class="hs-operator hs-var">`isSuffixOf`</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739598"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-448"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679739599"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">includeDirs :: [String]
</span><a href="Distribution.Types.InstalledPackageInfo.html#includeDirs"><span class="hs-identifier hs-var">InstalledPackageInfo.includeDirs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739595"><span class="hs-identifier hs-var">ids'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span class="hs-comment">-- | Get the packages from specific PackageDBs, not cumulative.</span><span>
</span><span id="line-451"></span><span class="hs-comment">--</span><span>
</span><span id="line-452"></span><span class="annot"><a href="Distribution.Simple.GHC.html#getInstalledPackages%27"><span class="hs-identifier hs-type">getInstalledPackages'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDB"><span class="hs-identifier hs-type">PackageDB</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span>
</span><span id="line-453"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDB"><span class="hs-identifier hs-type">PackageDB</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier hs-type">InstalledPackageInfo</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-454"></span><span id="getInstalledPackages%27"><span class="annot"><span class="annottext">getInstalledPackages' :: Verbosity
-&gt; [PackageDB]
-&gt; ProgramDb
-&gt; IO [(PackageDB, [InstalledPackageInfo])]
</span><a href="Distribution.Simple.GHC.html#getInstalledPackages%27"><span class="hs-identifier hs-var hs-var">getInstalledPackages'</span></a></span></span><span> </span><span id="local-6989586621679739593"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739593"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739592"><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739592"><span class="hs-identifier hs-var">packagedbs</span></a></span></span><span> </span><span id="local-6989586621679739591"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739591"><span class="hs-identifier hs-var">progdb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-455"></span><span>  </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#sequenceA"><span class="hs-identifier hs-var">sequenceA</span></a></span><span>
</span><span id="line-456"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679739589"><span class="annot"><span class="annottext">[InstalledPackageInfo]
</span><a href="#local-6989586621679739589"><span class="hs-identifier hs-var">pkgs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HcPkgInfo -&gt; Verbosity -&gt; PackageDB -&gt; IO [InstalledPackageInfo]
</span><a href="Distribution.Simple.Program.HcPkg.html#dump"><span class="hs-identifier hs-var">HcPkg.dump</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProgramDb -&gt; HcPkgInfo
</span><a href="Distribution.Simple.GHC.html#hcPkgInfo"><span class="hs-identifier hs-var">hcPkgInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739591"><span class="hs-identifier hs-var">progdb</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739593"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDB
</span><a href="#local-6989586621679739587"><span class="hs-identifier hs-var">packagedb</span></a></span><span>
</span><span id="line-457"></span><span>         </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDB
</span><a href="#local-6989586621679739587"><span class="hs-identifier hs-var">packagedb</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[InstalledPackageInfo]
</span><a href="#local-6989586621679739589"><span class="hs-identifier hs-var">pkgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679739587"><span class="annot"><span class="annottext">PackageDB
</span><a href="#local-6989586621679739587"><span class="hs-identifier hs-var">packagedb</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739592"><span class="hs-identifier hs-var">packagedbs</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-459"></span><span>
</span><span id="line-460"></span><span class="annot"><a href="Distribution.Simple.GHC.html#getInstalledPackagesMonitorFiles"><span class="hs-identifier hs-type">getInstalledPackagesMonitorFiles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span>
</span><span id="line-461"></span><span>                                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span>
</span><span id="line-462"></span><span>                                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDB"><span class="hs-identifier hs-type">PackageDB</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-463"></span><span>                                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-464"></span><span id="getInstalledPackagesMonitorFiles"><span class="annot"><span class="annottext">getInstalledPackagesMonitorFiles :: Verbosity -&gt; Platform -&gt; ProgramDb -&gt; [PackageDB] -&gt; IO [String]
</span><a href="Distribution.Simple.GHC.html#getInstalledPackagesMonitorFiles"><span class="hs-identifier hs-var hs-var">getInstalledPackagesMonitorFiles</span></a></span></span><span> </span><span id="local-6989586621679739586"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739586"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739585"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679739585"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span id="local-6989586621679739584"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739584"><span class="hs-identifier hs-var">progdb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-465"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDB -&gt; IO String
</span><a href="#local-6989586621679739583"><span class="hs-identifier hs-var">getPackageDBPath</span></a></span><span>
</span><span id="line-466"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-467"></span><span>    </span><span class="annot"><a href="#local-6989586621679739583"><span class="hs-identifier hs-type">getPackageDBPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDB"><span class="hs-identifier hs-type">PackageDB</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-468"></span><span>    </span><span id="local-6989586621679739583"><span class="annot"><span class="annottext">getPackageDBPath :: PackageDB -&gt; IO String
</span><a href="#local-6989586621679739583"><span class="hs-identifier hs-var hs-var">getPackageDBPath</span></a></span></span><span> </span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#GlobalPackageDB"><span class="hs-identifier hs-var">GlobalPackageDB</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-469"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="#local-6989586621679739582"><span class="hs-identifier hs-var">selectMonitorFile</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; ConfiguredProgram -&gt; IO String
</span><a href="Distribution.Simple.GHC.html#getGlobalPackageDB"><span class="hs-identifier hs-var">getGlobalPackageDB</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739586"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739580"><span class="hs-identifier hs-var">ghcProg</span></a></span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span>    </span><span class="annot"><a href="#local-6989586621679739583"><span class="hs-identifier hs-var">getPackageDBPath</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#UserPackageDB"><span class="hs-identifier hs-var">UserPackageDB</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-472"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="#local-6989586621679739582"><span class="hs-identifier hs-var">selectMonitorFile</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; ConfiguredProgram -&gt; Platform -&gt; IO String
</span><a href="Distribution.Simple.GHC.html#getUserPackageDB"><span class="hs-identifier hs-var">getUserPackageDB</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739586"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739580"><span class="hs-identifier hs-var">ghcProg</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679739585"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-473"></span><span>
</span><span id="line-474"></span><span>    </span><span class="annot"><a href="#local-6989586621679739583"><span class="hs-identifier hs-var">getPackageDBPath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.Compiler.html#SpecificPackageDB"><span class="hs-identifier hs-type">SpecificPackageDB</span></a></span><span> </span><span id="local-6989586621679739577"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739577"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="#local-6989586621679739582"><span class="hs-identifier hs-var">selectMonitorFile</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739577"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span>    </span><span class="hs-comment">-- GHC has old style file dbs, and new style directory dbs.</span><span>
</span><span id="line-477"></span><span>    </span><span class="hs-comment">-- Note that for dir style dbs, we only need to monitor the cache file, not</span><span>
</span><span id="line-478"></span><span>    </span><span class="hs-comment">-- the whole directory. The ghc program itself only reads the cache file</span><span>
</span><span id="line-479"></span><span>    </span><span class="hs-comment">-- so it's safe to only monitor this one file.</span><span>
</span><span id="line-480"></span><span>    </span><span id="local-6989586621679739582"><span class="annot"><span class="annottext">selectMonitorFile :: String -&gt; IO String
</span><a href="#local-6989586621679739582"><span class="hs-identifier hs-var hs-var">selectMonitorFile</span></a></span></span><span> </span><span id="local-6989586621679739573"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739573"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-481"></span><span>      </span><span id="local-6989586621679739572"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739572"><span class="hs-identifier hs-var">isFileStyle</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Bool
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#doesFileExist"><span class="hs-identifier hs-var">doesFileExist</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739573"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-482"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739572"><span class="hs-identifier hs-var">isFileStyle</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739573"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-483"></span><span>                     </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739573"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;package.cache&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-484"></span><span>
</span><span id="line-485"></span><span>    </span><span id="local-6989586621679739580"><span class="annot"><span class="annottext">ghcProg :: ConfiguredProgram
</span><a href="#local-6989586621679739580"><span class="hs-identifier hs-var hs-var">ghcProg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.toPackageIndex: no ghc program&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Program -&gt; ProgramDb -&gt; Maybe ConfiguredProgram
</span><a href="Distribution.Simple.Program.Db.html#lookupProgram"><span class="hs-identifier hs-var">lookupProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ghcProgram"><span class="hs-identifier hs-var">ghcProgram</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739584"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-486"></span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-489"></span><span class="hs-comment">-- Building a library</span><span>
</span><span id="line-490"></span><span>
</span><span id="line-491"></span><span class="annot"><a href="Distribution.Simple.GHC.html#buildLib"><span class="hs-identifier hs-type">buildLib</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Flag.html#Flag"><span class="hs-identifier hs-type">Cabal.Flag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-492"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>
</span><span id="line-493"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.Library.html#Library"><span class="hs-identifier hs-type">Library</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-494"></span><span id="buildLib"><span class="annot"><span class="annottext">buildLib :: Verbosity
-&gt; Flag (Maybe Int)
-&gt; PackageDescription
-&gt; LocalBuildInfo
-&gt; Library
-&gt; ComponentLocalBuildInfo
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#buildLib"><span class="hs-identifier hs-var hs-var">buildLib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [String]
-&gt; Verbosity
-&gt; Flag (Maybe Int)
-&gt; PackageDescription
-&gt; LocalBuildInfo
-&gt; Library
-&gt; ComponentLocalBuildInfo
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#buildOrReplLib"><span class="hs-identifier hs-var">buildOrReplLib</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span class="annot"><a href="Distribution.Simple.GHC.html#replLib"><span class="hs-identifier hs-type">replLib</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-497"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Flag.html#Flag"><span class="hs-identifier hs-type">Cabal.Flag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span>
</span><span id="line-498"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.Library.html#Library"><span class="hs-identifier hs-type">Library</span></a></span><span>
</span><span id="line-499"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-500"></span><span id="replLib"><span class="annot"><span class="annottext">replLib :: [String]
-&gt; Verbosity
-&gt; Flag (Maybe Int)
-&gt; PackageDescription
-&gt; LocalBuildInfo
-&gt; Library
-&gt; ComponentLocalBuildInfo
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#replLib"><span class="hs-identifier hs-var hs-var">replLib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [String]
-&gt; Verbosity
-&gt; Flag (Maybe Int)
-&gt; PackageDescription
-&gt; LocalBuildInfo
-&gt; Library
-&gt; ComponentLocalBuildInfo
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#buildOrReplLib"><span class="hs-identifier hs-var">buildOrReplLib</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span class="annot"><a href="Distribution.Simple.GHC.html#buildOrReplLib"><span class="hs-identifier hs-type">buildOrReplLib</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-503"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Flag.html#Flag"><span class="hs-identifier hs-type">Cabal.Flag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span>
</span><span id="line-504"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.Library.html#Library"><span class="hs-identifier hs-type">Library</span></a></span><span>
</span><span id="line-505"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-506"></span><span id="buildOrReplLib"><span class="annot"><span class="annottext">buildOrReplLib :: Maybe [String]
-&gt; Verbosity
-&gt; Flag (Maybe Int)
-&gt; PackageDescription
-&gt; LocalBuildInfo
-&gt; Library
-&gt; ComponentLocalBuildInfo
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#buildOrReplLib"><span class="hs-identifier hs-var hs-var">buildOrReplLib</span></a></span></span><span> </span><span id="local-6989586621679739568"><span class="annot"><span class="annottext">Maybe [String]
</span><a href="#local-6989586621679739568"><span class="hs-identifier hs-var">mReplFlags</span></a></span></span><span> </span><span id="local-6989586621679739567"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739566"><span class="annot"><span class="annottext">Flag (Maybe Int)
</span><a href="#local-6989586621679739566"><span class="hs-identifier hs-var">numJobs</span></a></span></span><span> </span><span id="local-6989586621679739565"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679739565"><span class="hs-identifier hs-var">pkg_descr</span></a></span></span><span> </span><span id="local-6989586621679739564"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span id="local-6989586621679739563"><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679739563"><span class="hs-identifier hs-var">lib</span></a></span></span><span> </span><span id="local-6989586621679739562"><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-507"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739561"><span class="annot"><span class="annottext">uid :: UnitId
</span><a href="#local-6989586621679739561"><span class="hs-identifier hs-var hs-var">uid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo -&gt; UnitId
</span><a href="Distribution.Types.ComponentLocalBuildInfo.html#componentUnitId"><span class="hs-identifier hs-var">componentUnitId</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span>
</span><span id="line-508"></span><span>      </span><span id="local-6989586621679739559"><span class="annot"><span class="annottext">libTargetDir :: String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var hs-var">libTargetDir</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ComponentLocalBuildInfo -&gt; String
</span><a href="Distribution.Simple.LocalBuildInfo.html#componentBuildDir"><span class="hs-identifier hs-var">componentBuildDir</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span>
</span><span id="line-509"></span><span>      </span><span id="local-6989586621679739555"><span class="annot"><span class="annottext">whenVanillaLib :: Bool -&gt; f () -&gt; f ()
</span><a href="#local-6989586621679739555"><span class="hs-identifier hs-var hs-var">whenVanillaLib</span></a></span></span><span> </span><span id="local-6989586621679739554"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739554"><span class="hs-identifier hs-var">forceVanilla</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-510"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739554"><span class="hs-identifier hs-var">forceVanilla</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withVanillaLib"><span class="hs-identifier hs-var">withVanillaLib</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-511"></span><span>      </span><span id="local-6989586621679739551"><span class="annot"><span class="annottext">whenProfLib :: IO () -&gt; IO ()
</span><a href="#local-6989586621679739551"><span class="hs-identifier hs-var hs-var">whenProfLib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfLib"><span class="hs-identifier hs-var">withProfLib</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-512"></span><span>      </span><span id="local-6989586621679739547"><span class="annot"><span class="annottext">whenSharedLib :: Bool -&gt; f () -&gt; f ()
</span><a href="#local-6989586621679739547"><span class="hs-identifier hs-var hs-var">whenSharedLib</span></a></span></span><span> </span><span id="local-6989586621679739546"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739546"><span class="hs-identifier hs-var">forceShared</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-513"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739546"><span class="hs-identifier hs-var">forceShared</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withSharedLib"><span class="hs-identifier hs-var">withSharedLib</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-514"></span><span>      </span><span id="local-6989586621679739542"><span class="annot"><span class="annottext">whenStaticLib :: Bool -&gt; f () -&gt; f ()
</span><a href="#local-6989586621679739542"><span class="hs-identifier hs-var hs-var">whenStaticLib</span></a></span></span><span> </span><span id="local-6989586621679739541"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739541"><span class="hs-identifier hs-var">forceStatic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-515"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739541"><span class="hs-identifier hs-var">forceStatic</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withStaticLib"><span class="hs-identifier hs-var">withStaticLib</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-516"></span><span>      </span><span id="local-6989586621679739538"><span class="annot"><span class="annottext">whenGHCiLib :: IO () -&gt; IO ()
</span><a href="#local-6989586621679739538"><span class="hs-identifier hs-var hs-var">whenGHCiLib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withGHCiLib"><span class="hs-identifier hs-var">withGHCiLib</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-517"></span><span>      </span><span id="local-6989586621679739536"><span class="annot"><span class="annottext">forRepl :: Bool
</span><a href="#local-6989586621679739536"><span class="hs-identifier hs-var hs-var">forRepl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe [String]
</span><a href="#local-6989586621679739568"><span class="hs-identifier hs-var">mReplFlags</span></a></span><span>
</span><span id="line-518"></span><span>      </span><span id="local-6989586621679739532"><span class="annot"><span class="annottext">whenReplLib :: IO () -&gt; IO ()
</span><a href="#local-6989586621679739532"><span class="hs-identifier hs-var hs-var">whenReplLib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739536"><span class="hs-identifier hs-var">forRepl</span></a></span><span>
</span><span id="line-519"></span><span>      </span><span id="local-6989586621679739529"><span class="annot"><span class="annottext">replFlags :: [String]
</span><a href="#local-6989586621679739529"><span class="hs-identifier hs-var hs-var">replFlags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [String]
</span><a href="#local-6989586621679739568"><span class="hs-identifier hs-var">mReplFlags</span></a></span><span>
</span><span id="line-520"></span><span>      </span><span id="local-6989586621679739528"><span class="annot"><span class="annottext">comp :: Compiler
</span><a href="#local-6989586621679739528"><span class="hs-identifier hs-var hs-var">comp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Compiler
</span><a href="Distribution.Types.LocalBuildInfo.html#compiler"><span class="hs-identifier hs-var">compiler</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-521"></span><span>      </span><span id="local-6989586621679739526"><span class="annot"><span class="annottext">ghcVersion :: Version
</span><a href="#local-6989586621679739526"><span class="hs-identifier hs-var hs-var">ghcVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; Version
</span><a href="Distribution.Simple.Compiler.html#compilerVersion"><span class="hs-identifier hs-var">compilerVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739528"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-522"></span><span>      </span><span id="local-6989586621679739525"><span class="annot"><span class="annottext">implInfo :: GhcImplInfo
</span><a href="#local-6989586621679739525"><span class="hs-identifier hs-var hs-var">implInfo</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; GhcImplInfo
</span><a href="Distribution.Simple.GHC.ImplInfo.html#getImplInfo"><span class="hs-identifier hs-var">getImplInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739528"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-523"></span><span>      </span><span id="local-6989586621679739524"><span class="annot"><span class="annottext">platform :: Platform
</span><a href="#local-6989586621679739524"><span class="hs-identifier hs-var">platform</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span id="local-6989586621679739522"><span class="annot"><span class="annottext">Arch
</span><a href="#local-6989586621679739522"><span class="hs-identifier hs-var">_hostArch</span></a></span></span><span> </span><span id="local-6989586621679739521"><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679739521"><span class="hs-identifier hs-var">hostOS</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-524"></span><span>      </span><span id="local-6989586621679739519"><span class="annot"><span class="annottext">has_code :: Bool
</span><a href="#local-6989586621679739519"><span class="hs-identifier hs-var hs-var">has_code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentLocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.ComponentLocalBuildInfo.html#componentIsIndefinite"><span class="hs-identifier hs-var">componentIsIndefinite</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-525"></span><span>
</span><span id="line-526"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679739517"><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739517"><span class="hs-identifier hs-var">ghcProg</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Program -&gt; ProgramDb -&gt; IO (ConfiguredProgram, ProgramDb)
</span><a href="Distribution.Simple.Program.Db.html#requireProgram"><span class="hs-identifier hs-var">requireProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ghcProgram"><span class="hs-identifier hs-var">ghcProgram</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProgramDb
</span><a href="Distribution.Types.LocalBuildInfo.html#withPrograms"><span class="hs-identifier hs-var">withPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-527"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739515"><span class="annot"><span class="annottext">runGhcProg :: GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739515"><span class="hs-identifier hs-var hs-var">runGhcProg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; ConfiguredProgram -&gt; Compiler -&gt; Platform -&gt; GhcOptions -&gt; IO ()
</span><a href="Distribution.Simple.Program.GHC.html#runGHC"><span class="hs-identifier hs-var">runGHC</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739517"><span class="hs-identifier hs-var">ghcProg</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739528"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679739524"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-528"></span><span>
</span><span id="line-529"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739513"><span class="annot"><span class="annottext">libBi :: BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var hs-var">libBi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Library -&gt; BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679739563"><span class="hs-identifier hs-var">lib</span></a></span><span>
</span><span id="line-530"></span><span>
</span><span id="line-531"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739511"><span class="annot"><span class="annottext">isGhcDynamic :: Bool
</span><a href="#local-6989586621679739511"><span class="hs-identifier hs-var hs-var">isGhcDynamic</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.html#isDynamic"><span class="hs-identifier hs-var">isDynamic</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739528"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-532"></span><span>      </span><span id="local-6989586621679739510"><span class="annot"><span class="annottext">dynamicTooSupported :: Bool
</span><a href="#local-6989586621679739510"><span class="hs-identifier hs-var hs-var">dynamicTooSupported</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.html#supportsDynamicToo"><span class="hs-identifier hs-var">supportsDynamicToo</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739528"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-533"></span><span>      </span><span id="local-6989586621679739508"><span class="annot"><span class="annottext">doingTH :: Bool
</span><a href="#local-6989586621679739508"><span class="hs-identifier hs-var hs-var">doingTH</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; Bool
</span><a href="Distribution.Types.BuildInfo.html#usesTemplateHaskellOrQQ"><span class="hs-identifier hs-var">usesTemplateHaskellOrQQ</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span>
</span><span id="line-534"></span><span>      </span><span id="local-6989586621679739506"><span class="annot"><span class="annottext">forceVanillaLib :: Bool
</span><a href="#local-6989586621679739506"><span class="hs-identifier hs-var hs-var">forceVanillaLib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739508"><span class="hs-identifier hs-var">doingTH</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739511"><span class="hs-identifier hs-var">isGhcDynamic</span></a></span><span>
</span><span id="line-535"></span><span>      </span><span id="local-6989586621679739504"><span class="annot"><span class="annottext">forceSharedLib :: Bool
</span><a href="#local-6989586621679739504"><span class="hs-identifier hs-var hs-var">forceSharedLib</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739508"><span class="hs-identifier hs-var">doingTH</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>     </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739511"><span class="hs-identifier hs-var">isGhcDynamic</span></a></span><span>
</span><span id="line-536"></span><span>      </span><span class="hs-comment">-- TH always needs default libs, even when building for profiling</span><span>
</span><span id="line-537"></span><span>
</span><span id="line-538"></span><span>  </span><span class="hs-comment">-- Determine if program coverage should be enabled and if so, what</span><span>
</span><span id="line-539"></span><span>  </span><span class="hs-comment">-- '-hpcdir' should be.</span><span>
</span><span id="line-540"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739503"><span class="annot"><span class="annottext">isCoverageEnabled :: Bool
</span><a href="#local-6989586621679739503"><span class="hs-identifier hs-var hs-var">isCoverageEnabled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#libCoverage"><span class="hs-identifier hs-var">libCoverage</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-541"></span><span>      </span><span class="hs-comment">-- TODO: Historically HPC files have been put into a directory which</span><span>
</span><span id="line-542"></span><span>      </span><span class="hs-comment">-- has the package name.  I'm going to avoid changing this for</span><span>
</span><span id="line-543"></span><span>      </span><span class="hs-comment">-- now, but it would probably be better for this to be the</span><span>
</span><span id="line-544"></span><span>      </span><span class="hs-comment">-- component ID instead...</span><span>
</span><span id="line-545"></span><span>      </span><span id="local-6989586621679739499"><span class="annot"><span class="annottext">pkg_name :: String
</span><a href="#local-6989586621679739499"><span class="hs-identifier hs-var hs-var">pkg_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; String
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; PackageIdentifier
</span><a href="Distribution.Types.PackageDescription.html#package"><span class="hs-identifier hs-var">PD.package</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679739565"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-546"></span><span>      </span><span id="local-6989586621679739495"><span class="annot"><span class="annottext">distPref :: String
</span><a href="#local-6989586621679739495"><span class="hs-identifier hs-var hs-var">distPref</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag String
</span><a href="Distribution.Simple.Setup.html#configDistPref"><span class="hs-identifier hs-var">configDistPref</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ConfigFlags
</span><a href="Distribution.Types.LocalBuildInfo.html#configFlags"><span class="hs-identifier hs-var">configFlags</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-547"></span><span>      </span><span id="local-6989586621679739488"><span class="annot"><span class="annottext">hpcdir :: Way -&gt; Flag String
</span><a href="#local-6989586621679739488"><span class="hs-identifier hs-var hs-var">hpcdir</span></a></span></span><span> </span><span id="local-6989586621679739487"><span class="annot"><span class="annottext">Way
</span><a href="#local-6989586621679739487"><span class="hs-identifier hs-var">way</span></a></span></span><span>
</span><span id="line-548"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739536"><span class="hs-identifier hs-var">forRepl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>  </span><span class="hs-comment">-- HPC is not supported in ghci</span><span>
</span><span id="line-549"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739503"><span class="hs-identifier hs-var">isCoverageEnabled</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Way -&gt; String -&gt; String
</span><a href="Distribution.Simple.Hpc.html#mixDir"><span class="hs-identifier hs-var">Hpc.mixDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739495"><span class="hs-identifier hs-var">distPref</span></a></span><span> </span><span class="annot"><span class="annottext">Way
</span><a href="#local-6989586621679739487"><span class="hs-identifier hs-var">way</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739499"><span class="hs-identifier hs-var">pkg_name</span></a></span><span>
</span><span id="line-550"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-551"></span><span>
</span><span id="line-552"></span><span>  </span><span class="annot"><span class="annottext">Verbosity -&gt; Bool -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#createDirectoryIfMissingVerbose"><span class="hs-identifier hs-var">createDirectoryIfMissingVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span>
</span><span id="line-553"></span><span>  </span><span class="hs-comment">-- TODO: do we need to put hs-boot files into place for mutually recursive</span><span>
</span><span id="line-554"></span><span>  </span><span class="hs-comment">-- modules?</span><span>
</span><span id="line-555"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739476"><span class="annot"><span class="annottext">cLikeSources :: [String]
</span><a href="#local-6989586621679739476"><span class="hs-identifier hs-var hs-var">cLikeSources</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. NubListR a -&gt; [a]
</span><a href="Distribution.Utils.NubList.html#fromNubListR"><span class="hs-identifier hs-var">fromNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span>
</span><span id="line-556"></span><span>                      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cSources"><span class="hs-identifier hs-var">cSources</span></a></span><span>   </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-557"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cxxSources"><span class="hs-identifier hs-var">cxxSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-558"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cmmSources"><span class="hs-identifier hs-var">cmmSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-559"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#asmSources"><span class="hs-identifier hs-var">asmSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-560"></span><span>                      </span><span class="hs-special">]</span><span>
</span><span id="line-561"></span><span>      </span><span id="local-6989586621679739469"><span class="annot"><span class="annottext">cLikeObjs :: [String]
</span><a href="#local-6989586621679739469"><span class="hs-identifier hs-var hs-var">cLikeObjs</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#replaceExtension"><span class="hs-operator hs-var">`replaceExtension`</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="Distribution.Simple.BuildPaths.html#objExtension"><span class="hs-identifier hs-var">objExtension</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739476"><span class="hs-identifier hs-var">cLikeSources</span></a></span><span>
</span><span id="line-562"></span><span>      </span><span id="local-6989586621679739467"><span class="annot"><span class="annottext">baseOpts :: GhcOptions
</span><a href="#local-6989586621679739467"><span class="hs-identifier hs-var hs-var">baseOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; LocalBuildInfo
-&gt; BuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; GhcOptions
</span><a href="Distribution.Simple.GHC.html#componentGhcOptions"><span class="hs-identifier hs-var">componentGhcOptions</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span>
</span><span id="line-563"></span><span>      </span><span id="local-6989586621679739461"><span class="annot"><span class="annottext">vanillaOpts :: GhcOptions
</span><a href="#local-6989586621679739461"><span class="hs-identifier hs-var hs-var">vanillaOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739467"><span class="hs-identifier hs-var">baseOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-564"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptMode :: Flag GhcMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptMode"><span class="hs-identifier hs-var">ghcOptMode</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcModeMake"><span class="hs-identifier hs-var">GhcModeMake</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-565"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptNumJobs :: Flag (Maybe Int)
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptNumJobs"><span class="hs-identifier hs-var">ghcOptNumJobs</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Flag (Maybe Int)
</span><a href="#local-6989586621679739566"><span class="hs-identifier hs-var">numJobs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-566"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptInputModules :: NubListR ModuleName
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptInputModules"><span class="hs-identifier hs-var">ghcOptInputModules</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Library -&gt; ComponentLocalBuildInfo -&gt; [ModuleName]
</span><a href="Distribution.Simple.LocalBuildInfo.html#allLibModules"><span class="hs-identifier hs-var">allLibModules</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679739563"><span class="hs-identifier hs-var">lib</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-567"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptHPCDir :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHPCDir"><span class="hs-identifier hs-var">ghcOptHPCDir</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Way -&gt; Flag String
</span><a href="#local-6989586621679739488"><span class="hs-identifier hs-var">hpcdir</span></a></span><span> </span><span class="annot"><span class="annottext">Way
</span><a href="Distribution.Simple.Hpc.html#Vanilla"><span class="hs-identifier hs-var">Hpc.Vanilla</span></a></span><span>
</span><span id="line-568"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-569"></span><span>
</span><span id="line-570"></span><span>      </span><span id="local-6989586621679739451"><span class="annot"><span class="annottext">profOpts :: GhcOptions
</span><a href="#local-6989586621679739451"><span class="hs-identifier hs-var hs-var">profOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739461"><span class="hs-identifier hs-var">vanillaOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-571"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptProfilingMode :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptProfilingMode"><span class="hs-identifier hs-var">ghcOptProfilingMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-572"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptProfilingAuto :: Flag GhcProfAuto
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptProfilingAuto"><span class="hs-identifier hs-var">ghcOptProfilingAuto</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ProfDetailLevel -&gt; Flag GhcProfAuto
</span><a href="Distribution.Simple.GHC.Internal.html#profDetailLevelFlag"><span class="hs-identifier hs-var">Internal.profDetailLevelFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-573"></span><span>                                              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProfDetailLevel
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfLibDetail"><span class="hs-identifier hs-var">withProfLibDetail</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-574"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptHiSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHiSuffix"><span class="hs-identifier hs-var">ghcOptHiSuffix</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p_hi&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-575"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p_o&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-576"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptExtra :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptExtra"><span class="hs-identifier hs-var">ghcOptExtra</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerFlavor -&gt; BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#hcProfOptions"><span class="hs-identifier hs-var">hcProfOptions</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-577"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptHPCDir :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHPCDir"><span class="hs-identifier hs-var">ghcOptHPCDir</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Way -&gt; Flag String
</span><a href="#local-6989586621679739488"><span class="hs-identifier hs-var">hpcdir</span></a></span><span> </span><span class="annot"><span class="annottext">Way
</span><a href="Distribution.Simple.Hpc.html#Prof"><span class="hs-identifier hs-var">Hpc.Prof</span></a></span><span>
</span><span id="line-578"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-579"></span><span>
</span><span id="line-580"></span><span>      </span><span id="local-6989586621679739439"><span class="annot"><span class="annottext">sharedOpts :: GhcOptions
</span><a href="#local-6989586621679739439"><span class="hs-identifier hs-var hs-var">sharedOpts</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739461"><span class="hs-identifier hs-var">vanillaOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-581"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptDynLinkMode :: Flag GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynLinkMode"><span class="hs-identifier hs-var">ghcOptDynLinkMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcDynamicOnly"><span class="hs-identifier hs-var">GhcDynamicOnly</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-582"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-583"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptHiSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHiSuffix"><span class="hs-identifier hs-var">ghcOptHiSuffix</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_hi&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-584"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_o&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-585"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptExtra :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptExtra"><span class="hs-identifier hs-var">ghcOptExtra</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerFlavor -&gt; BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#hcSharedOptions"><span class="hs-identifier hs-var">hcSharedOptions</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-586"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptHPCDir :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHPCDir"><span class="hs-identifier hs-var">ghcOptHPCDir</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Way -&gt; Flag String
</span><a href="#local-6989586621679739488"><span class="hs-identifier hs-var">hpcdir</span></a></span><span> </span><span class="annot"><span class="annottext">Way
</span><a href="Distribution.Simple.Hpc.html#Dyn"><span class="hs-identifier hs-var">Hpc.Dyn</span></a></span><span>
</span><span id="line-587"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-588"></span><span>      </span><span id="local-6989586621679739427"><span class="annot"><span class="annottext">linkerOpts :: GhcOptions
</span><a href="#local-6989586621679739427"><span class="hs-identifier hs-var hs-var">linkerOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-589"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptLinkOptions :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkOptions"><span class="hs-identifier hs-var">ghcOptLinkOptions</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#ldOptions"><span class="hs-identifier hs-var">PD.ldOptions</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span>
</span><span id="line-590"></span><span>                                                </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-static&quot;</span></span><span>
</span><span id="line-591"></span><span>                                                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withFullyStaticExe"><span class="hs-identifier hs-var">withFullyStaticExe</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-592"></span><span>                                                </span><span class="hs-comment">-- Pass extra `ld-options` given</span><span>
</span><span id="line-593"></span><span>                                                </span><span class="hs-comment">-- through to GHC's linker.</span><span>
</span><span id="line-594"></span><span>                                                </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram -&gt; [String]
</span><a href="Distribution.Simple.Program.Types.html#programOverrideArgs"><span class="hs-identifier hs-var">programOverrideArgs</span></a></span><span>
</span><span id="line-595"></span><span>                                                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Program -&gt; ProgramDb -&gt; Maybe ConfiguredProgram
</span><a href="Distribution.Simple.Program.Db.html#lookupProgram"><span class="hs-identifier hs-var">lookupProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ldProgram"><span class="hs-identifier hs-var">ldProgram</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProgramDb
</span><a href="Distribution.Types.LocalBuildInfo.html#withPrograms"><span class="hs-identifier hs-var">withPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-596"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptLinkLibs :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkLibs"><span class="hs-identifier hs-var">ghcOptLinkLibs</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraLibs"><span class="hs-identifier hs-var">extraLibs</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-597"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptLinkLibPath :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkLibPath"><span class="hs-identifier hs-var">ghcOptLinkLibPath</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraLibDirs"><span class="hs-identifier hs-var">extraLibDirs</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-598"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptLinkFrameworks :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkFrameworks"><span class="hs-identifier hs-var">ghcOptLinkFrameworks</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#frameworks"><span class="hs-identifier hs-var">PD.frameworks</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-599"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptLinkFrameworkDirs :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkFrameworkDirs"><span class="hs-identifier hs-var">ghcOptLinkFrameworkDirs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-600"></span><span>                                                </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraFrameworkDirs"><span class="hs-identifier hs-var">PD.extraFrameworkDirs</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-601"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptInputFiles :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptInputFiles"><span class="hs-identifier hs-var">ghcOptInputFiles</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span>
</span><span id="line-602"></span><span>                                             </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739412"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679739412"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739412"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739469"><span class="hs-identifier hs-var">cLikeObjs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-603"></span><span>                   </span><span class="hs-special">}</span><span>
</span><span id="line-604"></span><span>      </span><span id="local-6989586621679739405"><span class="annot"><span class="annottext">replOpts :: GhcOptions
</span><a href="#local-6989586621679739405"><span class="hs-identifier hs-var hs-var">replOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739461"><span class="hs-identifier hs-var">vanillaOpts</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-605"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptExtra :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptExtra"><span class="hs-identifier hs-var">ghcOptExtra</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String]
</span><a href="Distribution.Simple.GHC.Internal.html#filterGhciFlags"><span class="hs-identifier hs-var">Internal.filterGhciFlags</span></a></span><span>
</span><span id="line-606"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptExtra"><span class="hs-identifier hs-var">ghcOptExtra</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739461"><span class="hs-identifier hs-var">vanillaOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-607"></span><span>                                           </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739529"><span class="hs-identifier hs-var">replFlags</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-608"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptNumJobs :: Flag (Maybe Int)
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptNumJobs"><span class="hs-identifier hs-var">ghcOptNumJobs</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-609"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-610"></span><span>                    </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739427"><span class="hs-identifier hs-var">linkerOpts</span></a></span><span>
</span><span id="line-611"></span><span>                    </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-612"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptMode :: Flag GhcMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptMode"><span class="hs-identifier hs-var">ghcOptMode</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcModeInteractive"><span class="hs-identifier hs-var">GhcModeInteractive</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-613"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptOptimisation :: Flag GhcOptimisation
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptOptimisation"><span class="hs-identifier hs-var">ghcOptOptimisation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptimisation
</span><a href="Distribution.Simple.Program.GHC.html#GhcNoOptimisation"><span class="hs-identifier hs-var">GhcNoOptimisation</span></a></span><span>
</span><span id="line-614"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-615"></span><span>
</span><span id="line-616"></span><span>      </span><span id="local-6989586621679739398"><span class="annot"><span class="annottext">vanillaSharedOpts :: GhcOptions
</span><a href="#local-6989586621679739398"><span class="hs-identifier hs-var hs-var">vanillaSharedOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739461"><span class="hs-identifier hs-var">vanillaOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-617"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptDynLinkMode :: Flag GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynLinkMode"><span class="hs-identifier hs-var">ghcOptDynLinkMode</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcStaticAndDynamic"><span class="hs-identifier hs-var">GhcStaticAndDynamic</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-618"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptDynHiSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynHiSuffix"><span class="hs-identifier hs-var">ghcOptDynHiSuffix</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_hi&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-619"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptDynObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynObjSuffix"><span class="hs-identifier hs-var">ghcOptDynObjSuffix</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_o&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-620"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptHPCDir :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHPCDir"><span class="hs-identifier hs-var">ghcOptHPCDir</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Way -&gt; Flag String
</span><a href="#local-6989586621679739488"><span class="hs-identifier hs-var">hpcdir</span></a></span><span> </span><span class="annot"><span class="annottext">Way
</span><a href="Distribution.Simple.Hpc.html#Dyn"><span class="hs-identifier hs-var">Hpc.Dyn</span></a></span><span>
</span><span id="line-621"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-622"></span><span>
</span><span id="line-623"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739536"><span class="hs-identifier hs-var">forRepl</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Library -&gt; ComponentLocalBuildInfo -&gt; [ModuleName]
</span><a href="Distribution.Simple.LocalBuildInfo.html#allLibModules"><span class="hs-identifier hs-var">allLibModules</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679739563"><span class="hs-identifier hs-var">lib</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-624"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739393"><span class="annot"><span class="annottext">vanilla :: IO ()
</span><a href="#local-6989586621679739393"><span class="hs-identifier hs-var hs-var">vanilla</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="#local-6989586621679739555"><span class="hs-identifier hs-var">whenVanillaLib</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739506"><span class="hs-identifier hs-var">forceVanillaLib</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739515"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739461"><span class="hs-identifier hs-var">vanillaOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-625"></span><span>           </span><span id="local-6989586621679739391"><span class="annot"><span class="annottext">shared :: IO ()
</span><a href="#local-6989586621679739391"><span class="hs-identifier hs-var hs-var">shared</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="#local-6989586621679739547"><span class="hs-identifier hs-var">whenSharedLib</span></a></span><span>  </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739504"><span class="hs-identifier hs-var">forceSharedLib</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739515"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739439"><span class="hs-identifier hs-var">sharedOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-626"></span><span>           </span><span id="local-6989586621679739389"><span class="annot"><span class="annottext">useDynToo :: Bool
</span><a href="#local-6989586621679739389"><span class="hs-identifier hs-var hs-var">useDynToo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739510"><span class="hs-identifier hs-var">dynamicTooSupported</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-627"></span><span>                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739506"><span class="hs-identifier hs-var">forceVanillaLib</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withVanillaLib"><span class="hs-identifier hs-var">withVanillaLib</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-628"></span><span>                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739504"><span class="hs-identifier hs-var">forceSharedLib</span></a></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withSharedLib"><span class="hs-identifier hs-var">withSharedLib</span></a></span><span>  </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-629"></span><span>                       </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CompilerFlavor -&gt; BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#hcSharedOptions"><span class="hs-identifier hs-var">hcSharedOptions</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-630"></span><span>       </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739519"><span class="hs-identifier hs-var">has_code</span></a></span><span>
</span><span id="line-631"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679739393"><span class="hs-identifier hs-var">vanilla</span></a></span><span>
</span><span id="line-632"></span><span>        </span><span class="hs-keyword">else</span><span>
</span><span id="line-633"></span><span>         </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739389"><span class="hs-identifier hs-var">useDynToo</span></a></span><span>
</span><span id="line-634"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-635"></span><span>              </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739515"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739398"><span class="hs-identifier hs-var">vanillaSharedOpts</span></a></span><span>
</span><span id="line-636"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Way -&gt; Flag String
</span><a href="#local-6989586621679739488"><span class="hs-identifier hs-var">hpcdir</span></a></span><span> </span><span class="annot"><span class="annottext">Way
</span><a href="Distribution.Simple.Hpc.html#Dyn"><span class="hs-identifier hs-var">Hpc.Dyn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Way -&gt; Flag String
</span><a href="#local-6989586621679739488"><span class="hs-identifier hs-var">hpcdir</span></a></span><span> </span><span class="annot"><span class="annottext">Way
</span><a href="Distribution.Simple.Hpc.html#Vanilla"><span class="hs-identifier hs-var">Hpc.Vanilla</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-637"></span><span>                </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.Flag.html#Flag"><span class="hs-identifier hs-type">Cabal.Flag</span></a></span><span> </span><span id="local-6989586621679739387"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739387"><span class="hs-identifier hs-var">dynDir</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.Flag.html#Flag"><span class="hs-identifier hs-type">Cabal.Flag</span></a></span><span> </span><span id="local-6989586621679739386"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739386"><span class="hs-identifier hs-var">vanillaDir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-638"></span><span>                    </span><span class="hs-comment">-- When the vanilla and shared library builds are done</span><span>
</span><span id="line-639"></span><span>                    </span><span class="hs-comment">-- in one pass, only one set of HPC module interfaces</span><span>
</span><span id="line-640"></span><span>                    </span><span class="hs-comment">-- are generated. This set should suffice for both</span><span>
</span><span id="line-641"></span><span>                    </span><span class="hs-comment">-- static and dynamically linked executables. We copy</span><span>
</span><span id="line-642"></span><span>                    </span><span class="hs-comment">-- the modules interfaces so they are available under</span><span>
</span><span id="line-643"></span><span>                    </span><span class="hs-comment">-- both ways.</span><span>
</span><span id="line-644"></span><span>                    </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#copyDirectoryRecursive"><span class="hs-identifier hs-var">copyDirectoryRecursive</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739387"><span class="hs-identifier hs-var">dynDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739386"><span class="hs-identifier hs-var">vanillaDir</span></a></span><span>
</span><span id="line-645"></span><span>                </span><span class="annot"><span class="annottext">(Flag String, Flag String)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-646"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739511"><span class="hs-identifier hs-var">isGhcDynamic</span></a></span><span>
</span><span id="line-647"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679739391"><span class="hs-identifier hs-var">shared</span></a></span><span class="hs-special">;</span><span>  </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679739393"><span class="hs-identifier hs-var">vanilla</span></a></span><span>
</span><span id="line-648"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679739393"><span class="hs-identifier hs-var">vanilla</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679739391"><span class="hs-identifier hs-var">shared</span></a></span><span>
</span><span id="line-649"></span><span>       </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679739551"><span class="hs-identifier hs-var">whenProfLib</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739515"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739451"><span class="hs-identifier hs-var">profOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-650"></span><span>
</span><span id="line-651"></span><span>  </span><span class="hs-comment">-- Build any C++ sources separately.</span><span>
</span><span id="line-652"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739519"><span class="hs-identifier hs-var">has_code</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cxxSources"><span class="hs-identifier hs-var">cxxSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-653"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Building C++ Sources...&quot;</span></span><span>
</span><span id="line-654"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#sequence_"><span class="hs-identifier hs-var">sequence_</span></a></span><span>
</span><span id="line-655"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739383"><span class="annot"><span class="annottext">baseCxxOpts :: GhcOptions
</span><a href="#local-6989586621679739383"><span class="hs-identifier hs-var hs-var">baseCxxOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; GhcImplInfo
-&gt; LocalBuildInfo
-&gt; BuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; String
-&gt; GhcOptions
</span><a href="Distribution.Simple.GHC.Internal.html#componentCxxGhcOptions"><span class="hs-identifier hs-var">Internal.componentCxxGhcOptions</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679739525"><span class="hs-identifier hs-var">implInfo</span></a></span><span>
</span><span id="line-656"></span><span>                                </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739381"><span class="hs-identifier hs-var">filename</span></a></span><span>
</span><span id="line-657"></span><span>               </span><span id="local-6989586621679739380"><span class="annot"><span class="annottext">vanillaCxxOpts :: GhcOptions
</span><a href="#local-6989586621679739380"><span class="hs-identifier hs-var hs-var">vanillaCxxOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739511"><span class="hs-identifier hs-var">isGhcDynamic</span></a></span><span>
</span><span id="line-658"></span><span>                                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739383"><span class="hs-identifier hs-var">baseCxxOpts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-659"></span><span>                                </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739383"><span class="hs-identifier hs-var">baseCxxOpts</span></a></span><span>
</span><span id="line-660"></span><span>               </span><span id="local-6989586621679739377"><span class="annot"><span class="annottext">profCxxOpts :: GhcOptions
</span><a href="#local-6989586621679739377"><span class="hs-identifier hs-var hs-var">profCxxOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739380"><span class="hs-identifier hs-var">vanillaCxxOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-661"></span><span>                                  </span><span class="annot"><span class="annottext">ghcOptProfilingMode :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptProfilingMode"><span class="hs-identifier hs-var">ghcOptProfilingMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-662"></span><span>                                  </span><span class="annot"><span class="annottext">ghcOptObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p_o&quot;</span></span><span>
</span><span id="line-663"></span><span>                                </span><span class="hs-special">}</span><span>
</span><span id="line-664"></span><span>               </span><span id="local-6989586621679739374"><span class="annot"><span class="annottext">sharedCxxOpts :: GhcOptions
</span><a href="#local-6989586621679739374"><span class="hs-identifier hs-var hs-var">sharedCxxOpts</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739380"><span class="hs-identifier hs-var">vanillaCxxOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-665"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-666"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptDynLinkMode :: Flag GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynLinkMode"><span class="hs-identifier hs-var">ghcOptDynLinkMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcDynamicOnly"><span class="hs-identifier hs-var">GhcDynamicOnly</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-667"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_o&quot;</span></span><span>
</span><span id="line-668"></span><span>                               </span><span class="hs-special">}</span><span>
</span><span id="line-669"></span><span>               </span><span id="local-6989586621679739371"><span class="annot"><span class="annottext">odir :: String
</span><a href="#local-6989586621679739371"><span class="hs-identifier hs-var hs-var">odir</span></a></span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjDir"><span class="hs-identifier hs-var">ghcOptObjDir</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739380"><span class="hs-identifier hs-var">vanillaCxxOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-670"></span><span>           </span><span class="annot"><span class="annottext">Verbosity -&gt; Bool -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#createDirectoryIfMissingVerbose"><span class="hs-identifier hs-var">createDirectoryIfMissingVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739371"><span class="hs-identifier hs-var">odir</span></a></span><span>
</span><span id="line-671"></span><span>           </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739367"><span class="annot"><span class="annottext">runGhcProgIfNeeded :: GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739367"><span class="hs-identifier hs-var hs-var">runGhcProgIfNeeded</span></a></span></span><span> </span><span id="local-6989586621679739366"><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739366"><span class="hs-identifier hs-var">cxxOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-672"></span><span>                 </span><span id="local-6989586621679739365"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739365"><span class="hs-identifier hs-var">needsRecomp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; GhcOptions -&gt; IO Bool
</span><a href="Distribution.Simple.GHC.html#checkNeedsRecompilation"><span class="hs-identifier hs-var">checkNeedsRecompilation</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739381"><span class="hs-identifier hs-var">filename</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739366"><span class="hs-identifier hs-var">cxxOpts</span></a></span><span>
</span><span id="line-673"></span><span>                 </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739365"><span class="hs-identifier hs-var">needsRecomp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739515"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739366"><span class="hs-identifier hs-var">cxxOpts</span></a></span><span>
</span><span id="line-674"></span><span>           </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739367"><span class="hs-identifier hs-var">runGhcProgIfNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739380"><span class="hs-identifier hs-var">vanillaCxxOpts</span></a></span><span>
</span><span id="line-675"></span><span>           </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739536"><span class="hs-identifier hs-var">forRepl</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-676"></span><span>             </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="#local-6989586621679739547"><span class="hs-identifier hs-var">whenSharedLib</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739504"><span class="hs-identifier hs-var">forceSharedLib</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739367"><span class="hs-identifier hs-var">runGhcProgIfNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739374"><span class="hs-identifier hs-var">sharedCxxOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-677"></span><span>           </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739536"><span class="hs-identifier hs-var">forRepl</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679739551"><span class="hs-identifier hs-var">whenProfLib</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739367"><span class="hs-identifier hs-var">runGhcProgIfNeeded</span></a></span><span>   </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739377"><span class="hs-identifier hs-var">profCxxOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-678"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679739381"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739381"><span class="hs-identifier hs-var">filename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cxxSources"><span class="hs-identifier hs-var">cxxSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-679"></span><span>
</span><span id="line-680"></span><span>  </span><span class="hs-comment">-- build any C sources</span><span>
</span><span id="line-681"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739519"><span class="hs-identifier hs-var">has_code</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cSources"><span class="hs-identifier hs-var">cSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-682"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Building C Sources...&quot;</span></span><span>
</span><span id="line-683"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#sequence_"><span class="hs-identifier hs-var">sequence_</span></a></span><span>
</span><span id="line-684"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739363"><span class="annot"><span class="annottext">baseCcOpts :: GhcOptions
</span><a href="#local-6989586621679739363"><span class="hs-identifier hs-var hs-var">baseCcOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; GhcImplInfo
-&gt; LocalBuildInfo
-&gt; BuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; String
-&gt; GhcOptions
</span><a href="Distribution.Simple.GHC.Internal.html#componentCcGhcOptions"><span class="hs-identifier hs-var">Internal.componentCcGhcOptions</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679739525"><span class="hs-identifier hs-var">implInfo</span></a></span><span>
</span><span id="line-685"></span><span>                               </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739361"><span class="hs-identifier hs-var">filename</span></a></span><span>
</span><span id="line-686"></span><span>               </span><span id="local-6989586621679739360"><span class="annot"><span class="annottext">vanillaCcOpts :: GhcOptions
</span><a href="#local-6989586621679739360"><span class="hs-identifier hs-var hs-var">vanillaCcOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739511"><span class="hs-identifier hs-var">isGhcDynamic</span></a></span><span>
</span><span id="line-687"></span><span>                               </span><span class="hs-comment">-- Dynamic GHC requires C sources to be built</span><span>
</span><span id="line-688"></span><span>                               </span><span class="hs-comment">-- with -fPIC for REPL to work. See #2207.</span><span>
</span><span id="line-689"></span><span>                               </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739363"><span class="hs-identifier hs-var">baseCcOpts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-690"></span><span>                               </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739363"><span class="hs-identifier hs-var">baseCcOpts</span></a></span><span>
</span><span id="line-691"></span><span>               </span><span id="local-6989586621679739357"><span class="annot"><span class="annottext">profCcOpts :: GhcOptions
</span><a href="#local-6989586621679739357"><span class="hs-identifier hs-var hs-var">profCcOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739360"><span class="hs-identifier hs-var">vanillaCcOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-692"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptProfilingMode :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptProfilingMode"><span class="hs-identifier hs-var">ghcOptProfilingMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-693"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p_o&quot;</span></span><span>
</span><span id="line-694"></span><span>                               </span><span class="hs-special">}</span><span>
</span><span id="line-695"></span><span>               </span><span id="local-6989586621679739354"><span class="annot"><span class="annottext">sharedCcOpts :: GhcOptions
</span><a href="#local-6989586621679739354"><span class="hs-identifier hs-var hs-var">sharedCcOpts</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739360"><span class="hs-identifier hs-var">vanillaCcOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-696"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-697"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptDynLinkMode :: Flag GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynLinkMode"><span class="hs-identifier hs-var">ghcOptDynLinkMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcDynamicOnly"><span class="hs-identifier hs-var">GhcDynamicOnly</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-698"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_o&quot;</span></span><span>
</span><span id="line-699"></span><span>                               </span><span class="hs-special">}</span><span>
</span><span id="line-700"></span><span>               </span><span id="local-6989586621679739351"><span class="annot"><span class="annottext">odir :: String
</span><a href="#local-6989586621679739351"><span class="hs-identifier hs-var hs-var">odir</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjDir"><span class="hs-identifier hs-var">ghcOptObjDir</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739360"><span class="hs-identifier hs-var">vanillaCcOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-701"></span><span>           </span><span class="annot"><span class="annottext">Verbosity -&gt; Bool -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#createDirectoryIfMissingVerbose"><span class="hs-identifier hs-var">createDirectoryIfMissingVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739351"><span class="hs-identifier hs-var">odir</span></a></span><span>
</span><span id="line-702"></span><span>           </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739348"><span class="annot"><span class="annottext">runGhcProgIfNeeded :: GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739348"><span class="hs-identifier hs-var hs-var">runGhcProgIfNeeded</span></a></span></span><span> </span><span id="local-6989586621679739347"><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739347"><span class="hs-identifier hs-var">ccOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-703"></span><span>                 </span><span id="local-6989586621679739346"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739346"><span class="hs-identifier hs-var">needsRecomp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; GhcOptions -&gt; IO Bool
</span><a href="Distribution.Simple.GHC.html#checkNeedsRecompilation"><span class="hs-identifier hs-var">checkNeedsRecompilation</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739361"><span class="hs-identifier hs-var">filename</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739347"><span class="hs-identifier hs-var">ccOpts</span></a></span><span>
</span><span id="line-704"></span><span>                 </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739346"><span class="hs-identifier hs-var">needsRecomp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739515"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739347"><span class="hs-identifier hs-var">ccOpts</span></a></span><span>
</span><span id="line-705"></span><span>           </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739348"><span class="hs-identifier hs-var">runGhcProgIfNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739360"><span class="hs-identifier hs-var">vanillaCcOpts</span></a></span><span>
</span><span id="line-706"></span><span>           </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739536"><span class="hs-identifier hs-var">forRepl</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-707"></span><span>             </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="#local-6989586621679739547"><span class="hs-identifier hs-var">whenSharedLib</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739504"><span class="hs-identifier hs-var">forceSharedLib</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739348"><span class="hs-identifier hs-var">runGhcProgIfNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739354"><span class="hs-identifier hs-var">sharedCcOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-708"></span><span>           </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739536"><span class="hs-identifier hs-var">forRepl</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679739551"><span class="hs-identifier hs-var">whenProfLib</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739348"><span class="hs-identifier hs-var">runGhcProgIfNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739357"><span class="hs-identifier hs-var">profCcOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-709"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679739361"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739361"><span class="hs-identifier hs-var">filename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cSources"><span class="hs-identifier hs-var">cSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-710"></span><span>
</span><span id="line-711"></span><span>  </span><span class="hs-comment">-- build any ASM sources</span><span>
</span><span id="line-712"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739519"><span class="hs-identifier hs-var">has_code</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#asmSources"><span class="hs-identifier hs-var">asmSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-713"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Building Assembler Sources...&quot;</span></span><span>
</span><span id="line-714"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#sequence_"><span class="hs-identifier hs-var">sequence_</span></a></span><span>
</span><span id="line-715"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739345"><span class="annot"><span class="annottext">baseAsmOpts :: GhcOptions
</span><a href="#local-6989586621679739345"><span class="hs-identifier hs-var hs-var">baseAsmOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; GhcImplInfo
-&gt; LocalBuildInfo
-&gt; BuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; String
-&gt; GhcOptions
</span><a href="Distribution.Simple.GHC.Internal.html#componentAsmGhcOptions"><span class="hs-identifier hs-var">Internal.componentAsmGhcOptions</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679739525"><span class="hs-identifier hs-var">implInfo</span></a></span><span>
</span><span id="line-716"></span><span>                                </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739343"><span class="hs-identifier hs-var">filename</span></a></span><span>
</span><span id="line-717"></span><span>               </span><span id="local-6989586621679739342"><span class="annot"><span class="annottext">vanillaAsmOpts :: GhcOptions
</span><a href="#local-6989586621679739342"><span class="hs-identifier hs-var hs-var">vanillaAsmOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739511"><span class="hs-identifier hs-var">isGhcDynamic</span></a></span><span>
</span><span id="line-718"></span><span>                                </span><span class="hs-comment">-- Dynamic GHC requires objects to be built</span><span>
</span><span id="line-719"></span><span>                                </span><span class="hs-comment">-- with -fPIC for REPL to work. See #2207.</span><span>
</span><span id="line-720"></span><span>                                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739345"><span class="hs-identifier hs-var">baseAsmOpts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-721"></span><span>                                </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739345"><span class="hs-identifier hs-var">baseAsmOpts</span></a></span><span>
</span><span id="line-722"></span><span>               </span><span id="local-6989586621679739339"><span class="annot"><span class="annottext">profAsmOpts :: GhcOptions
</span><a href="#local-6989586621679739339"><span class="hs-identifier hs-var hs-var">profAsmOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739342"><span class="hs-identifier hs-var">vanillaAsmOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-723"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptProfilingMode :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptProfilingMode"><span class="hs-identifier hs-var">ghcOptProfilingMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-724"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p_o&quot;</span></span><span>
</span><span id="line-725"></span><span>                               </span><span class="hs-special">}</span><span>
</span><span id="line-726"></span><span>               </span><span id="local-6989586621679739336"><span class="annot"><span class="annottext">sharedAsmOpts :: GhcOptions
</span><a href="#local-6989586621679739336"><span class="hs-identifier hs-var hs-var">sharedAsmOpts</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739342"><span class="hs-identifier hs-var">vanillaAsmOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-727"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-728"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptDynLinkMode :: Flag GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynLinkMode"><span class="hs-identifier hs-var">ghcOptDynLinkMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcDynamicOnly"><span class="hs-identifier hs-var">GhcDynamicOnly</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-729"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_o&quot;</span></span><span>
</span><span id="line-730"></span><span>                               </span><span class="hs-special">}</span><span>
</span><span id="line-731"></span><span>               </span><span id="local-6989586621679739333"><span class="annot"><span class="annottext">odir :: String
</span><a href="#local-6989586621679739333"><span class="hs-identifier hs-var hs-var">odir</span></a></span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjDir"><span class="hs-identifier hs-var">ghcOptObjDir</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739342"><span class="hs-identifier hs-var">vanillaAsmOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-732"></span><span>           </span><span class="annot"><span class="annottext">Verbosity -&gt; Bool -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#createDirectoryIfMissingVerbose"><span class="hs-identifier hs-var">createDirectoryIfMissingVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739333"><span class="hs-identifier hs-var">odir</span></a></span><span>
</span><span id="line-733"></span><span>           </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739330"><span class="annot"><span class="annottext">runGhcProgIfNeeded :: GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739330"><span class="hs-identifier hs-var hs-var">runGhcProgIfNeeded</span></a></span></span><span> </span><span id="local-6989586621679739329"><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739329"><span class="hs-identifier hs-var">asmOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-734"></span><span>                 </span><span id="local-6989586621679739328"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739328"><span class="hs-identifier hs-var">needsRecomp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; GhcOptions -&gt; IO Bool
</span><a href="Distribution.Simple.GHC.html#checkNeedsRecompilation"><span class="hs-identifier hs-var">checkNeedsRecompilation</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739343"><span class="hs-identifier hs-var">filename</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739329"><span class="hs-identifier hs-var">asmOpts</span></a></span><span>
</span><span id="line-735"></span><span>                 </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739328"><span class="hs-identifier hs-var">needsRecomp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739515"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739329"><span class="hs-identifier hs-var">asmOpts</span></a></span><span>
</span><span id="line-736"></span><span>           </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739330"><span class="hs-identifier hs-var">runGhcProgIfNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739342"><span class="hs-identifier hs-var">vanillaAsmOpts</span></a></span><span>
</span><span id="line-737"></span><span>           </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739536"><span class="hs-identifier hs-var">forRepl</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-738"></span><span>             </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="#local-6989586621679739547"><span class="hs-identifier hs-var">whenSharedLib</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739504"><span class="hs-identifier hs-var">forceSharedLib</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739330"><span class="hs-identifier hs-var">runGhcProgIfNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739336"><span class="hs-identifier hs-var">sharedAsmOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-739"></span><span>           </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739536"><span class="hs-identifier hs-var">forRepl</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679739551"><span class="hs-identifier hs-var">whenProfLib</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739330"><span class="hs-identifier hs-var">runGhcProgIfNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739339"><span class="hs-identifier hs-var">profAsmOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-740"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679739343"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739343"><span class="hs-identifier hs-var">filename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#asmSources"><span class="hs-identifier hs-var">asmSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-741"></span><span>
</span><span id="line-742"></span><span>  </span><span class="hs-comment">-- build any Cmm sources</span><span>
</span><span id="line-743"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739519"><span class="hs-identifier hs-var">has_code</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cmmSources"><span class="hs-identifier hs-var">cmmSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-744"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Building C-- Sources...&quot;</span></span><span>
</span><span id="line-745"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#sequence_"><span class="hs-identifier hs-var">sequence_</span></a></span><span>
</span><span id="line-746"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739327"><span class="annot"><span class="annottext">baseCmmOpts :: GhcOptions
</span><a href="#local-6989586621679739327"><span class="hs-identifier hs-var hs-var">baseCmmOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; GhcImplInfo
-&gt; LocalBuildInfo
-&gt; BuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; String
-&gt; GhcOptions
</span><a href="Distribution.Simple.GHC.Internal.html#componentCmmGhcOptions"><span class="hs-identifier hs-var">Internal.componentCmmGhcOptions</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679739525"><span class="hs-identifier hs-var">implInfo</span></a></span><span>
</span><span id="line-747"></span><span>                                </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739325"><span class="hs-identifier hs-var">filename</span></a></span><span>
</span><span id="line-748"></span><span>               </span><span id="local-6989586621679739324"><span class="annot"><span class="annottext">vanillaCmmOpts :: GhcOptions
</span><a href="#local-6989586621679739324"><span class="hs-identifier hs-var hs-var">vanillaCmmOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739511"><span class="hs-identifier hs-var">isGhcDynamic</span></a></span><span>
</span><span id="line-749"></span><span>                                </span><span class="hs-comment">-- Dynamic GHC requires C sources to be built</span><span>
</span><span id="line-750"></span><span>                                </span><span class="hs-comment">-- with -fPIC for REPL to work. See #2207.</span><span>
</span><span id="line-751"></span><span>                                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739327"><span class="hs-identifier hs-var">baseCmmOpts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-752"></span><span>                                </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739327"><span class="hs-identifier hs-var">baseCmmOpts</span></a></span><span>
</span><span id="line-753"></span><span>               </span><span id="local-6989586621679739321"><span class="annot"><span class="annottext">profCmmOpts :: GhcOptions
</span><a href="#local-6989586621679739321"><span class="hs-identifier hs-var hs-var">profCmmOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739324"><span class="hs-identifier hs-var">vanillaCmmOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-754"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptProfilingMode :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptProfilingMode"><span class="hs-identifier hs-var">ghcOptProfilingMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-755"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p_o&quot;</span></span><span>
</span><span id="line-756"></span><span>                               </span><span class="hs-special">}</span><span>
</span><span id="line-757"></span><span>               </span><span id="local-6989586621679739318"><span class="annot"><span class="annottext">sharedCmmOpts :: GhcOptions
</span><a href="#local-6989586621679739318"><span class="hs-identifier hs-var hs-var">sharedCmmOpts</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739324"><span class="hs-identifier hs-var">vanillaCmmOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-758"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-759"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptDynLinkMode :: Flag GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynLinkMode"><span class="hs-identifier hs-var">ghcOptDynLinkMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcDynamicOnly"><span class="hs-identifier hs-var">GhcDynamicOnly</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-760"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_o&quot;</span></span><span>
</span><span id="line-761"></span><span>                               </span><span class="hs-special">}</span><span>
</span><span id="line-762"></span><span>               </span><span id="local-6989586621679739315"><span class="annot"><span class="annottext">odir :: String
</span><a href="#local-6989586621679739315"><span class="hs-identifier hs-var hs-var">odir</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjDir"><span class="hs-identifier hs-var">ghcOptObjDir</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739324"><span class="hs-identifier hs-var">vanillaCmmOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-763"></span><span>           </span><span class="annot"><span class="annottext">Verbosity -&gt; Bool -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#createDirectoryIfMissingVerbose"><span class="hs-identifier hs-var">createDirectoryIfMissingVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739315"><span class="hs-identifier hs-var">odir</span></a></span><span>
</span><span id="line-764"></span><span>           </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739312"><span class="annot"><span class="annottext">runGhcProgIfNeeded :: GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739312"><span class="hs-identifier hs-var hs-var">runGhcProgIfNeeded</span></a></span></span><span> </span><span id="local-6989586621679739311"><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739311"><span class="hs-identifier hs-var">cmmOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-765"></span><span>                 </span><span id="local-6989586621679739310"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739310"><span class="hs-identifier hs-var">needsRecomp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; GhcOptions -&gt; IO Bool
</span><a href="Distribution.Simple.GHC.html#checkNeedsRecompilation"><span class="hs-identifier hs-var">checkNeedsRecompilation</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739325"><span class="hs-identifier hs-var">filename</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739311"><span class="hs-identifier hs-var">cmmOpts</span></a></span><span>
</span><span id="line-766"></span><span>                 </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739310"><span class="hs-identifier hs-var">needsRecomp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739515"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739311"><span class="hs-identifier hs-var">cmmOpts</span></a></span><span>
</span><span id="line-767"></span><span>           </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739312"><span class="hs-identifier hs-var">runGhcProgIfNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739324"><span class="hs-identifier hs-var">vanillaCmmOpts</span></a></span><span>
</span><span id="line-768"></span><span>           </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739536"><span class="hs-identifier hs-var">forRepl</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-769"></span><span>             </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="#local-6989586621679739547"><span class="hs-identifier hs-var">whenSharedLib</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739504"><span class="hs-identifier hs-var">forceSharedLib</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739312"><span class="hs-identifier hs-var">runGhcProgIfNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739318"><span class="hs-identifier hs-var">sharedCmmOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-770"></span><span>           </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739536"><span class="hs-identifier hs-var">forRepl</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679739551"><span class="hs-identifier hs-var">whenProfLib</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739312"><span class="hs-identifier hs-var">runGhcProgIfNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739321"><span class="hs-identifier hs-var">profCmmOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-771"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679739325"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739325"><span class="hs-identifier hs-var">filename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cmmSources"><span class="hs-identifier hs-var">cmmSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-772"></span><span>
</span><span id="line-773"></span><span>  </span><span class="hs-comment">-- TODO: problem here is we need the .c files built first, so we can load them</span><span>
</span><span id="line-774"></span><span>  </span><span class="hs-comment">-- with ghci, but .c files can depend on .h files generated by ghc by ffi</span><span>
</span><span id="line-775"></span><span>  </span><span class="hs-comment">-- exports.</span><span>
</span><span id="line-776"></span><span>  </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679739532"><span class="hs-identifier hs-var">whenReplLib</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-777"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Library -&gt; ComponentLocalBuildInfo -&gt; [ModuleName]
</span><a href="Distribution.Simple.LocalBuildInfo.html#allLibModules"><span class="hs-identifier hs-var">allLibModules</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679739563"><span class="hs-identifier hs-var">lib</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No exposed modules&quot;</span></span><span>
</span><span id="line-778"></span><span>    </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739515"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739405"><span class="hs-identifier hs-var">replOpts</span></a></span><span>
</span><span id="line-779"></span><span>
</span><span id="line-780"></span><span>  </span><span class="hs-comment">-- link:</span><span>
</span><span id="line-781"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739519"><span class="hs-identifier hs-var">has_code</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739536"><span class="hs-identifier hs-var">forRepl</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-782"></span><span>    </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Linking...&quot;</span></span><span>
</span><span id="line-783"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739309"><span class="annot"><span class="annottext">cLikeProfObjs :: [String]
</span><a href="#local-6989586621679739309"><span class="hs-identifier hs-var hs-var">cLikeProfObjs</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#replaceExtension"><span class="hs-operator hs-var">`replaceExtension`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p_&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="Distribution.Simple.BuildPaths.html#objExtension"><span class="hs-identifier hs-var">objExtension</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-784"></span><span>                               </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739476"><span class="hs-identifier hs-var">cLikeSources</span></a></span><span>
</span><span id="line-785"></span><span>        </span><span id="local-6989586621679739308"><span class="annot"><span class="annottext">cLikeSharedObjs :: [String]
</span><a href="#local-6989586621679739308"><span class="hs-identifier hs-var hs-var">cLikeSharedObjs</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#replaceExtension"><span class="hs-operator hs-var">`replaceExtension`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="Distribution.Simple.BuildPaths.html#objExtension"><span class="hs-identifier hs-var">objExtension</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-786"></span><span>                               </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739476"><span class="hs-identifier hs-var">cLikeSources</span></a></span><span>
</span><span id="line-787"></span><span>        </span><span id="local-6989586621679739307"><span class="annot"><span class="annottext">compiler_id :: CompilerId
</span><a href="#local-6989586621679739307"><span class="hs-identifier hs-var hs-var">compiler_id</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; CompilerId
</span><a href="Distribution.Simple.Compiler.html#compilerId"><span class="hs-identifier hs-var">compilerId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Compiler
</span><a href="Distribution.Types.LocalBuildInfo.html#compiler"><span class="hs-identifier hs-var">compiler</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-788"></span><span>        </span><span id="local-6989586621679739306"><span class="annot"><span class="annottext">vanillaLibFilePath :: String
</span><a href="#local-6989586621679739306"><span class="hs-identifier hs-var hs-var">vanillaLibFilePath</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#mkLibName"><span class="hs-identifier hs-var">mkLibName</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621679739561"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-789"></span><span>        </span><span id="local-6989586621679739304"><span class="annot"><span class="annottext">profileLibFilePath :: String
</span><a href="#local-6989586621679739304"><span class="hs-identifier hs-var hs-var">profileLibFilePath</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#mkProfLibName"><span class="hs-identifier hs-var">mkProfLibName</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621679739561"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-790"></span><span>        </span><span id="local-6989586621679739302"><span class="annot"><span class="annottext">sharedLibFilePath :: String
</span><a href="#local-6989586621679739302"><span class="hs-identifier hs-var hs-var">sharedLibFilePath</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span>
</span><span id="line-791"></span><span>                               </span><span class="annot"><span class="annottext">Platform -&gt; CompilerId -&gt; UnitId -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#mkSharedLibName"><span class="hs-identifier hs-var">mkSharedLibName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CompilerId
</span><a href="#local-6989586621679739307"><span class="hs-identifier hs-var">compiler_id</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621679739561"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-792"></span><span>        </span><span id="local-6989586621679739300"><span class="annot"><span class="annottext">staticLibFilePath :: String
</span><a href="#local-6989586621679739300"><span class="hs-identifier hs-var hs-var">staticLibFilePath</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span>
</span><span id="line-793"></span><span>                               </span><span class="annot"><span class="annottext">Platform -&gt; CompilerId -&gt; UnitId -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#mkStaticLibName"><span class="hs-identifier hs-var">mkStaticLibName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CompilerId
</span><a href="#local-6989586621679739307"><span class="hs-identifier hs-var">compiler_id</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621679739561"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-794"></span><span>        </span><span id="local-6989586621679739298"><span class="annot"><span class="annottext">ghciLibFilePath :: String
</span><a href="#local-6989586621679739298"><span class="hs-identifier hs-var hs-var">ghciLibFilePath</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; String
</span><a href="Distribution.Simple.GHC.Internal.html#mkGHCiLibName"><span class="hs-identifier hs-var">Internal.mkGHCiLibName</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621679739561"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-795"></span><span>        </span><span id="local-6989586621679739296"><span class="annot"><span class="annottext">ghciProfLibFilePath :: String
</span><a href="#local-6989586621679739296"><span class="hs-identifier hs-var hs-var">ghciProfLibFilePath</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; String
</span><a href="Distribution.Simple.GHC.Internal.html#mkGHCiProfLibName"><span class="hs-identifier hs-var">Internal.mkGHCiProfLibName</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621679739561"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-796"></span><span>        </span><span id="local-6989586621679739294"><span class="annot"><span class="annottext">libInstallPath :: String
</span><a href="#local-6989586621679739294"><span class="hs-identifier hs-var hs-var">libInstallPath</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall dir. InstallDirs dir -&gt; dir
</span><a href="Distribution.Simple.InstallDirs.html#libdir"><span class="hs-identifier hs-var">libdir</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-797"></span><span>                               </span><span class="annot"><span class="annottext">PackageDescription
-&gt; LocalBuildInfo -&gt; UnitId -&gt; CopyDest -&gt; InstallDirs String
</span><a href="Distribution.Simple.LocalBuildInfo.html#absoluteComponentInstallDirs"><span class="hs-identifier hs-var">absoluteComponentInstallDirs</span></a></span><span>
</span><span id="line-798"></span><span>                               </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679739565"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621679739561"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">CopyDest
</span><a href="Distribution.Simple.InstallDirs.html#NoCopyDest"><span class="hs-identifier hs-var">NoCopyDest</span></a></span><span>
</span><span id="line-799"></span><span>        </span><span id="local-6989586621679739290"><span class="annot"><span class="annottext">sharedLibInstallPath :: String
</span><a href="#local-6989586621679739290"><span class="hs-identifier hs-var hs-var">sharedLibInstallPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739294"><span class="hs-identifier hs-var">libInstallPath</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span>
</span><span id="line-800"></span><span>                               </span><span class="annot"><span class="annottext">Platform -&gt; CompilerId -&gt; UnitId -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#mkSharedLibName"><span class="hs-identifier hs-var">mkSharedLibName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CompilerId
</span><a href="#local-6989586621679739307"><span class="hs-identifier hs-var">compiler_id</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621679739561"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-801"></span><span>
</span><span id="line-802"></span><span>    </span><span id="local-6989586621679739289"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739289"><span class="hs-identifier hs-var">stubObjs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. [Maybe a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#catMaybes"><span class="hs-identifier hs-var">catMaybes</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#sequenceA"><span class="hs-identifier hs-var">sequenceA</span></a></span><span>
</span><span id="line-803"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; String -&gt; IO (Maybe String)
</span><a href="Distribution.Simple.Utils.html#findFileWithExtension"><span class="hs-identifier hs-var">findFileWithExtension</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="Distribution.Simple.BuildPaths.html#objExtension"><span class="hs-identifier hs-var">objExtension</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-804"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; String
</span><a href="Distribution.ModuleName.html#toFilePath"><span class="hs-identifier hs-var">ModuleName.toFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621679739284"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_stub&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-805"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739526"><span class="hs-identifier hs-var">ghcVersion</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Version
</span><a href="Distribution.Types.Version.html#mkVersion"><span class="hs-identifier hs-var">mkVersion</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ghc-7.2+ does not make _stub.o files</span><span>
</span><span id="line-806"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679739284"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621679739284"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Library -&gt; ComponentLocalBuildInfo -&gt; [ModuleName]
</span><a href="Distribution.Simple.LocalBuildInfo.html#allLibModules"><span class="hs-identifier hs-var">allLibModules</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679739563"><span class="hs-identifier hs-var">lib</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-807"></span><span>    </span><span id="local-6989586621679739283"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739283"><span class="hs-identifier hs-var">stubProfObjs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. [Maybe a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#catMaybes"><span class="hs-identifier hs-var">catMaybes</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#sequenceA"><span class="hs-identifier hs-var">sequenceA</span></a></span><span>
</span><span id="line-808"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; String -&gt; IO (Maybe String)
</span><a href="Distribution.Simple.Utils.html#findFileWithExtension"><span class="hs-identifier hs-var">findFileWithExtension</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p_&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="Distribution.Simple.BuildPaths.html#objExtension"><span class="hs-identifier hs-var">objExtension</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-809"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; String
</span><a href="Distribution.ModuleName.html#toFilePath"><span class="hs-identifier hs-var">ModuleName.toFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621679739282"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_stub&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739526"><span class="hs-identifier hs-var">ghcVersion</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Version
</span><a href="Distribution.Types.Version.html#mkVersion"><span class="hs-identifier hs-var">mkVersion</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ghc-7.2+ does not make _stub.o files</span><span>
</span><span id="line-811"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679739282"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621679739282"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Library -&gt; ComponentLocalBuildInfo -&gt; [ModuleName]
</span><a href="Distribution.Simple.LocalBuildInfo.html#allLibModules"><span class="hs-identifier hs-var">allLibModules</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679739563"><span class="hs-identifier hs-var">lib</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-812"></span><span>    </span><span id="local-6989586621679739281"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739281"><span class="hs-identifier hs-var">stubSharedObjs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. [Maybe a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#catMaybes"><span class="hs-identifier hs-var">catMaybes</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#sequenceA"><span class="hs-identifier hs-var">sequenceA</span></a></span><span>
</span><span id="line-813"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; String -&gt; IO (Maybe String)
</span><a href="Distribution.Simple.Utils.html#findFileWithExtension"><span class="hs-identifier hs-var">findFileWithExtension</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="Distribution.Simple.BuildPaths.html#objExtension"><span class="hs-identifier hs-var">objExtension</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-814"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; String
</span><a href="Distribution.ModuleName.html#toFilePath"><span class="hs-identifier hs-var">ModuleName.toFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621679739280"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_stub&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-815"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739526"><span class="hs-identifier hs-var">ghcVersion</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Version
</span><a href="Distribution.Types.Version.html#mkVersion"><span class="hs-identifier hs-var">mkVersion</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ghc-7.2+ does not make _stub.o files</span><span>
</span><span id="line-816"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679739280"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621679739280"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Library -&gt; ComponentLocalBuildInfo -&gt; [ModuleName]
</span><a href="Distribution.Simple.LocalBuildInfo.html#allLibModules"><span class="hs-identifier hs-var">allLibModules</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679739563"><span class="hs-identifier hs-var">lib</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-817"></span><span>
</span><span id="line-818"></span><span>    </span><span id="local-6989586621679739279"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739279"><span class="hs-identifier hs-var">hObjs</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
-&gt; Library
-&gt; LocalBuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; String
-&gt; Bool
-&gt; IO [String]
</span><a href="Distribution.Simple.GHC.Internal.html#getHaskellObjects"><span class="hs-identifier hs-var">Internal.getHaskellObjects</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679739525"><span class="hs-identifier hs-var">implInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679739563"><span class="hs-identifier hs-var">lib</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span>
</span><span id="line-819"></span><span>                      </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="Distribution.Simple.BuildPaths.html#objExtension"><span class="hs-identifier hs-var">objExtension</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-820"></span><span>    </span><span id="local-6989586621679739277"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739277"><span class="hs-identifier hs-var">hProfObjs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-821"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfLib"><span class="hs-identifier hs-var">withProfLib</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-822"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
-&gt; Library
-&gt; LocalBuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; String
-&gt; Bool
-&gt; IO [String]
</span><a href="Distribution.Simple.GHC.Internal.html#getHaskellObjects"><span class="hs-identifier hs-var">Internal.getHaskellObjects</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679739525"><span class="hs-identifier hs-var">implInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679739563"><span class="hs-identifier hs-var">lib</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span>
</span><span id="line-823"></span><span>                      </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p_&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="Distribution.Simple.BuildPaths.html#objExtension"><span class="hs-identifier hs-var">objExtension</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-824"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-825"></span><span>    </span><span id="local-6989586621679739276"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739276"><span class="hs-identifier hs-var">hSharedObjs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-826"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withSharedLib"><span class="hs-identifier hs-var">withSharedLib</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-827"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
-&gt; Library
-&gt; LocalBuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; String
-&gt; Bool
-&gt; IO [String]
</span><a href="Distribution.Simple.GHC.Internal.html#getHaskellObjects"><span class="hs-identifier hs-var">Internal.getHaskellObjects</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679739525"><span class="hs-identifier hs-var">implInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679739563"><span class="hs-identifier hs-var">lib</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span>
</span><span id="line-828"></span><span>                      </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="Distribution.Simple.BuildPaths.html#objExtension"><span class="hs-identifier hs-var">objExtension</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-829"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-830"></span><span>
</span><span id="line-831"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739279"><span class="hs-identifier hs-var">hObjs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739469"><span class="hs-identifier hs-var">cLikeObjs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739289"><span class="hs-identifier hs-var">stubObjs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-832"></span><span>      </span><span id="local-6989586621679739275"><span class="annot"><span class="annottext">NubListR String
</span><a href="#local-6989586621679739275"><span class="hs-identifier hs-var">rpaths</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ComponentLocalBuildInfo -&gt; IO (NubListR String)
</span><a href="Distribution.Simple.GHC.html#getRPaths"><span class="hs-identifier hs-var">getRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739273"><span class="annot"><span class="annottext">staticObjectFiles :: [String]
</span><a href="#local-6989586621679739273"><span class="hs-identifier hs-var hs-var">staticObjectFiles</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-835"></span><span>                 </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739279"><span class="hs-identifier hs-var">hObjs</span></a></span><span>
</span><span id="line-836"></span><span>              </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739469"><span class="hs-identifier hs-var">cLikeObjs</span></a></span><span>
</span><span id="line-837"></span><span>              </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739289"><span class="hs-identifier hs-var">stubObjs</span></a></span><span>
</span><span id="line-838"></span><span>          </span><span id="local-6989586621679739272"><span class="annot"><span class="annottext">profObjectFiles :: [String]
</span><a href="#local-6989586621679739272"><span class="hs-identifier hs-var hs-var">profObjectFiles</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-839"></span><span>                 </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739277"><span class="hs-identifier hs-var">hProfObjs</span></a></span><span>
</span><span id="line-840"></span><span>              </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739309"><span class="hs-identifier hs-var">cLikeProfObjs</span></a></span><span>
</span><span id="line-841"></span><span>              </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739283"><span class="hs-identifier hs-var">stubProfObjs</span></a></span><span>
</span><span id="line-842"></span><span>          </span><span id="local-6989586621679739271"><span class="annot"><span class="annottext">dynamicObjectFiles :: [String]
</span><a href="#local-6989586621679739271"><span class="hs-identifier hs-var hs-var">dynamicObjectFiles</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-843"></span><span>                 </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739276"><span class="hs-identifier hs-var">hSharedObjs</span></a></span><span>
</span><span id="line-844"></span><span>              </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739559"><span class="hs-identifier hs-var">libTargetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739308"><span class="hs-identifier hs-var">cLikeSharedObjs</span></a></span><span>
</span><span id="line-845"></span><span>              </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739281"><span class="hs-identifier hs-var">stubSharedObjs</span></a></span><span>
</span><span id="line-846"></span><span>          </span><span class="hs-comment">-- After the relocation lib is created we invoke ghc -shared</span><span>
</span><span id="line-847"></span><span>          </span><span class="hs-comment">-- with the dependencies spelled out as -package arguments</span><span>
</span><span id="line-848"></span><span>          </span><span class="hs-comment">-- and ghc invokes the linker with the proper library paths</span><span>
</span><span id="line-849"></span><span>          </span><span id="local-6989586621679739251"><span class="annot"><span class="annottext">ghcSharedLinkArgs :: GhcOptions
</span><a href="#local-6989586621679739251"><span class="hs-identifier hs-var hs-var">ghcSharedLinkArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-850"></span><span>              </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-851"></span><span>                </span><span class="annot"><span class="annottext">ghcOptShared :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptShared"><span class="hs-identifier hs-var">ghcOptShared</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-852"></span><span>                </span><span class="annot"><span class="annottext">ghcOptDynLinkMode :: Flag GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynLinkMode"><span class="hs-identifier hs-var">ghcOptDynLinkMode</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcDynamicOnly"><span class="hs-identifier hs-var">GhcDynamicOnly</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-853"></span><span>                </span><span class="annot"><span class="annottext">ghcOptInputFiles :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptInputFiles"><span class="hs-identifier hs-var">ghcOptInputFiles</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739271"><span class="hs-identifier hs-var">dynamicObjectFiles</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-854"></span><span>                </span><span class="annot"><span class="annottext">ghcOptOutputFile :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptOutputFile"><span class="hs-identifier hs-var">ghcOptOutputFile</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739302"><span class="hs-identifier hs-var">sharedLibFilePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-855"></span><span>                </span><span class="annot"><span class="annottext">ghcOptExtra :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptExtra"><span class="hs-identifier hs-var">ghcOptExtra</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerFlavor -&gt; BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#hcSharedOptions"><span class="hs-identifier hs-var">hcSharedOptions</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-856"></span><span>                </span><span class="hs-comment">-- For dynamic libs, Mac OS/X needs to know the install location</span><span>
</span><span id="line-857"></span><span>                </span><span class="hs-comment">-- at build time. This only applies to GHC &lt; 7.8 - see the</span><span>
</span><span id="line-858"></span><span>                </span><span class="hs-comment">-- discussion in #1660.</span><span>
</span><span id="line-859"></span><span>                </span><span class="annot"><span class="annottext">ghcOptDylibName :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDylibName"><span class="hs-identifier hs-var">ghcOptDylibName</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679739521"><span class="hs-identifier hs-var">hostOS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#OSX"><span class="hs-identifier hs-var">OSX</span></a></span><span>
</span><span id="line-860"></span><span>                                              </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679739526"><span class="hs-identifier hs-var">ghcVersion</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Version
</span><a href="Distribution.Types.Version.html#mkVersion"><span class="hs-identifier hs-var">mkVersion</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">]</span><span>
</span><span id="line-861"></span><span>                                            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739290"><span class="hs-identifier hs-var">sharedLibInstallPath</span></a></span><span>
</span><span id="line-862"></span><span>                                            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-863"></span><span>                </span><span class="annot"><span class="annottext">ghcOptHideAllPackages :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHideAllPackages"><span class="hs-identifier hs-var">ghcOptHideAllPackages</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-864"></span><span>                </span><span class="annot"><span class="annottext">ghcOptNoAutoLinkPackages :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptNoAutoLinkPackages"><span class="hs-identifier hs-var">ghcOptNoAutoLinkPackages</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-865"></span><span>                </span><span class="annot"><span class="annottext">ghcOptPackageDBs :: [PackageDB]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptPackageDBs"><span class="hs-identifier hs-var">ghcOptPackageDBs</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; [PackageDB]
</span><a href="Distribution.Types.LocalBuildInfo.html#withPackageDB"><span class="hs-identifier hs-var">withPackageDB</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-866"></span><span>                </span><span class="annot"><span class="annottext">ghcOptThisUnitId :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptThisUnitId"><span class="hs-identifier hs-var">ghcOptThisUnitId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-867"></span><span>                    </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#LibComponentLocalBuildInfo"><span class="hs-identifier hs-type">LibComponentLocalBuildInfo</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">componentCompatPackageKey :: ComponentLocalBuildInfo -&gt; String
</span><a href="Distribution.Types.ComponentLocalBuildInfo.html#componentCompatPackageKey"><span class="hs-identifier hs-var">componentCompatPackageKey</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679739239"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739239"><span class="hs-identifier hs-var">pk</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-868"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739239"><span class="hs-identifier hs-var">pk</span></a></span><span>
</span><span id="line-869"></span><span>                    </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-870"></span><span>                </span><span class="annot"><span class="annottext">ghcOptThisComponentId :: Flag ComponentId
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptThisComponentId"><span class="hs-identifier hs-var">ghcOptThisComponentId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-871"></span><span>                    </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#LibComponentLocalBuildInfo"><span class="hs-identifier hs-type">LibComponentLocalBuildInfo</span></a></span><span>
</span><span id="line-872"></span><span>                      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">componentInstantiatedWith :: ComponentLocalBuildInfo -&gt; [(ModuleName, OpenModule)]
</span><a href="Distribution.Types.ComponentLocalBuildInfo.html#componentInstantiatedWith"><span class="hs-identifier hs-var">componentInstantiatedWith</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679739236"><span class="annot"><span class="annottext">[(ModuleName, OpenModule)]
</span><a href="#local-6989586621679739236"><span class="hs-identifier hs-var">insts</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-873"></span><span>                        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[(ModuleName, OpenModule)]
</span><a href="#local-6989586621679739236"><span class="hs-identifier hs-var">insts</span></a></span><span>
</span><span id="line-874"></span><span>                            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-875"></span><span>                            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentLocalBuildInfo -&gt; ComponentId
</span><a href="Distribution.Types.ComponentLocalBuildInfo.html#componentComponentId"><span class="hs-identifier hs-var">componentComponentId</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-876"></span><span>                    </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-877"></span><span>                </span><span class="annot"><span class="annottext">ghcOptInstantiatedWith :: [(ModuleName, OpenModule)]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptInstantiatedWith"><span class="hs-identifier hs-var">ghcOptInstantiatedWith</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-878"></span><span>                    </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#LibComponentLocalBuildInfo"><span class="hs-identifier hs-type">LibComponentLocalBuildInfo</span></a></span><span>
</span><span id="line-879"></span><span>                      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">componentInstantiatedWith :: ComponentLocalBuildInfo -&gt; [(ModuleName, OpenModule)]
</span><a href="Distribution.Types.ComponentLocalBuildInfo.html#componentInstantiatedWith"><span class="hs-identifier hs-var">componentInstantiatedWith</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679739233"><span class="annot"><span class="annottext">[(ModuleName, OpenModule)]
</span><a href="#local-6989586621679739233"><span class="hs-identifier hs-var">insts</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-880"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(ModuleName, OpenModule)]
</span><a href="#local-6989586621679739233"><span class="hs-identifier hs-var">insts</span></a></span><span>
</span><span id="line-881"></span><span>                    </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-882"></span><span>                </span><span class="annot"><span class="annottext">ghcOptPackages :: NubListR (OpenUnitId, ModuleRenaming)
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptPackages"><span class="hs-identifier hs-var">ghcOptPackages</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-883"></span><span>                                           </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo -&gt; [(OpenUnitId, ModuleRenaming)]
</span><a href="Distribution.Simple.GHC.Internal.html#mkGhcOptPackages"><span class="hs-identifier hs-var">Internal.mkGhcOptPackages</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="hs-special">,</span><span>
</span><span id="line-884"></span><span>                </span><span class="annot"><span class="annottext">ghcOptLinkLibs :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkLibs"><span class="hs-identifier hs-var">ghcOptLinkLibs</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraLibs"><span class="hs-identifier hs-var">extraLibs</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-885"></span><span>                </span><span class="annot"><span class="annottext">ghcOptLinkLibPath :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkLibPath"><span class="hs-identifier hs-var">ghcOptLinkLibPath</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraLibDirs"><span class="hs-identifier hs-var">extraLibDirs</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-886"></span><span>                </span><span class="annot"><span class="annottext">ghcOptLinkFrameworks :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkFrameworks"><span class="hs-identifier hs-var">ghcOptLinkFrameworks</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#frameworks"><span class="hs-identifier hs-var">PD.frameworks</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-887"></span><span>                </span><span class="annot"><span class="annottext">ghcOptLinkFrameworkDirs :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkFrameworkDirs"><span class="hs-identifier hs-var">ghcOptLinkFrameworkDirs</span></a></span><span>  </span><span class="hs-glyph">=</span><span>
</span><span id="line-888"></span><span>                  </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraFrameworkDirs"><span class="hs-identifier hs-var">PD.extraFrameworkDirs</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-889"></span><span>                </span><span class="annot"><span class="annottext">ghcOptRPaths :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptRPaths"><span class="hs-identifier hs-var">ghcOptRPaths</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NubListR String
</span><a href="#local-6989586621679739275"><span class="hs-identifier hs-var">rpaths</span></a></span><span>
</span><span id="line-890"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-891"></span><span>          </span><span id="local-6989586621679739218"><span class="annot"><span class="annottext">ghcStaticLinkArgs :: GhcOptions
</span><a href="#local-6989586621679739218"><span class="hs-identifier hs-var hs-var">ghcStaticLinkArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-892"></span><span>              </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-893"></span><span>                </span><span class="annot"><span class="annottext">ghcOptStaticLib :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptStaticLib"><span class="hs-identifier hs-var">ghcOptStaticLib</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-894"></span><span>                </span><span class="annot"><span class="annottext">ghcOptInputFiles :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptInputFiles"><span class="hs-identifier hs-var">ghcOptInputFiles</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739273"><span class="hs-identifier hs-var">staticObjectFiles</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-895"></span><span>                </span><span class="annot"><span class="annottext">ghcOptOutputFile :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptOutputFile"><span class="hs-identifier hs-var">ghcOptOutputFile</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739300"><span class="hs-identifier hs-var">staticLibFilePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-896"></span><span>                </span><span class="annot"><span class="annottext">ghcOptExtra :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptExtra"><span class="hs-identifier hs-var">ghcOptExtra</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerFlavor -&gt; BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#hcStaticOptions"><span class="hs-identifier hs-var">hcStaticOptions</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-897"></span><span>                </span><span class="annot"><span class="annottext">ghcOptHideAllPackages :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHideAllPackages"><span class="hs-identifier hs-var">ghcOptHideAllPackages</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-898"></span><span>                </span><span class="annot"><span class="annottext">ghcOptNoAutoLinkPackages :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptNoAutoLinkPackages"><span class="hs-identifier hs-var">ghcOptNoAutoLinkPackages</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-899"></span><span>                </span><span class="annot"><span class="annottext">ghcOptPackageDBs :: [PackageDB]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptPackageDBs"><span class="hs-identifier hs-var">ghcOptPackageDBs</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; [PackageDB]
</span><a href="Distribution.Types.LocalBuildInfo.html#withPackageDB"><span class="hs-identifier hs-var">withPackageDB</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-900"></span><span>                </span><span class="annot"><span class="annottext">ghcOptThisUnitId :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptThisUnitId"><span class="hs-identifier hs-var">ghcOptThisUnitId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-901"></span><span>                    </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#LibComponentLocalBuildInfo"><span class="hs-identifier hs-type">LibComponentLocalBuildInfo</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">componentCompatPackageKey :: ComponentLocalBuildInfo -&gt; String
</span><a href="Distribution.Types.ComponentLocalBuildInfo.html#componentCompatPackageKey"><span class="hs-identifier hs-var">componentCompatPackageKey</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679739215"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739215"><span class="hs-identifier hs-var">pk</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-902"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739215"><span class="hs-identifier hs-var">pk</span></a></span><span>
</span><span id="line-903"></span><span>                    </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-904"></span><span>                </span><span class="annot"><span class="annottext">ghcOptThisComponentId :: Flag ComponentId
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptThisComponentId"><span class="hs-identifier hs-var">ghcOptThisComponentId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-905"></span><span>                    </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#LibComponentLocalBuildInfo"><span class="hs-identifier hs-type">LibComponentLocalBuildInfo</span></a></span><span>
</span><span id="line-906"></span><span>                      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">componentInstantiatedWith :: ComponentLocalBuildInfo -&gt; [(ModuleName, OpenModule)]
</span><a href="Distribution.Types.ComponentLocalBuildInfo.html#componentInstantiatedWith"><span class="hs-identifier hs-var">componentInstantiatedWith</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679739214"><span class="annot"><span class="annottext">[(ModuleName, OpenModule)]
</span><a href="#local-6989586621679739214"><span class="hs-identifier hs-var">insts</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-907"></span><span>                        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[(ModuleName, OpenModule)]
</span><a href="#local-6989586621679739214"><span class="hs-identifier hs-var">insts</span></a></span><span>
</span><span id="line-908"></span><span>                            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-909"></span><span>                            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentLocalBuildInfo -&gt; ComponentId
</span><a href="Distribution.Types.ComponentLocalBuildInfo.html#componentComponentId"><span class="hs-identifier hs-var">componentComponentId</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-910"></span><span>                    </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-911"></span><span>                </span><span class="annot"><span class="annottext">ghcOptInstantiatedWith :: [(ModuleName, OpenModule)]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptInstantiatedWith"><span class="hs-identifier hs-var">ghcOptInstantiatedWith</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-912"></span><span>                    </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#LibComponentLocalBuildInfo"><span class="hs-identifier hs-type">LibComponentLocalBuildInfo</span></a></span><span>
</span><span id="line-913"></span><span>                      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">componentInstantiatedWith :: ComponentLocalBuildInfo -&gt; [(ModuleName, OpenModule)]
</span><a href="Distribution.Types.ComponentLocalBuildInfo.html#componentInstantiatedWith"><span class="hs-identifier hs-var">componentInstantiatedWith</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679739213"><span class="annot"><span class="annottext">[(ModuleName, OpenModule)]
</span><a href="#local-6989586621679739213"><span class="hs-identifier hs-var">insts</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-914"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(ModuleName, OpenModule)]
</span><a href="#local-6989586621679739213"><span class="hs-identifier hs-var">insts</span></a></span><span>
</span><span id="line-915"></span><span>                    </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-916"></span><span>                </span><span class="annot"><span class="annottext">ghcOptPackages :: NubListR (OpenUnitId, ModuleRenaming)
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptPackages"><span class="hs-identifier hs-var">ghcOptPackages</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-917"></span><span>                                           </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo -&gt; [(OpenUnitId, ModuleRenaming)]
</span><a href="Distribution.Simple.GHC.Internal.html#mkGhcOptPackages"><span class="hs-identifier hs-var">Internal.mkGhcOptPackages</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739562"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="hs-special">,</span><span>
</span><span id="line-918"></span><span>                </span><span class="annot"><span class="annottext">ghcOptLinkLibs :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkLibs"><span class="hs-identifier hs-var">ghcOptLinkLibs</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraLibs"><span class="hs-identifier hs-var">extraLibs</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-919"></span><span>                </span><span class="annot"><span class="annottext">ghcOptLinkLibPath :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkLibPath"><span class="hs-identifier hs-var">ghcOptLinkLibPath</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraLibDirs"><span class="hs-identifier hs-var">extraLibDirs</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739513"><span class="hs-identifier hs-var">libBi</span></a></span><span>
</span><span id="line-920"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-921"></span><span>
</span><span id="line-922"></span><span>      </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.16.3.0/src/GHC-Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; NubListR (OpenUnitId, ModuleRenaming)
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptPackages"><span class="hs-identifier hs-var">ghcOptPackages</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739251"><span class="hs-identifier hs-var">ghcSharedLinkArgs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-923"></span><span>
</span><span id="line-924"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="#local-6989586621679739555"><span class="hs-identifier hs-var">whenVanillaLib</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-925"></span><span>        </span><span class="annot"><span class="annottext">Verbosity -&gt; LocalBuildInfo -&gt; String -&gt; [String] -&gt; IO ()
</span><a href="Distribution.Simple.Program.Ar.html#createArLibArchive"><span class="hs-identifier hs-var">Ar.createArLibArchive</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739306"><span class="hs-identifier hs-var">vanillaLibFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739273"><span class="hs-identifier hs-var">staticObjectFiles</span></a></span><span>
</span><span id="line-926"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679739538"><span class="hs-identifier hs-var">whenGHCiLib</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-927"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679739211"><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739211"><span class="hs-identifier hs-var">ldProg</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Program -&gt; ProgramDb -&gt; IO (ConfiguredProgram, ProgramDb)
</span><a href="Distribution.Simple.Program.Db.html#requireProgram"><span class="hs-identifier hs-var">requireProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ldProgram"><span class="hs-identifier hs-var">ldProgram</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProgramDb
</span><a href="Distribution.Types.LocalBuildInfo.html#withPrograms"><span class="hs-identifier hs-var">withPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-928"></span><span>          </span><span class="annot"><span class="annottext">Verbosity
-&gt; LocalBuildInfo
-&gt; ConfiguredProgram
-&gt; String
-&gt; [String]
-&gt; IO ()
</span><a href="Distribution.Simple.Program.Ld.html#combineObjectFiles"><span class="hs-identifier hs-var">Ld.combineObjectFiles</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739211"><span class="hs-identifier hs-var">ldProg</span></a></span><span>
</span><span id="line-929"></span><span>            </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739298"><span class="hs-identifier hs-var">ghciLibFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739273"><span class="hs-identifier hs-var">staticObjectFiles</span></a></span><span>
</span><span id="line-930"></span><span>
</span><span id="line-931"></span><span>      </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679739551"><span class="hs-identifier hs-var">whenProfLib</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-932"></span><span>        </span><span class="annot"><span class="annottext">Verbosity -&gt; LocalBuildInfo -&gt; String -&gt; [String] -&gt; IO ()
</span><a href="Distribution.Simple.Program.Ar.html#createArLibArchive"><span class="hs-identifier hs-var">Ar.createArLibArchive</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739304"><span class="hs-identifier hs-var">profileLibFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739272"><span class="hs-identifier hs-var">profObjectFiles</span></a></span><span>
</span><span id="line-933"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679739538"><span class="hs-identifier hs-var">whenGHCiLib</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-934"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679739209"><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739209"><span class="hs-identifier hs-var">ldProg</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Program -&gt; ProgramDb -&gt; IO (ConfiguredProgram, ProgramDb)
</span><a href="Distribution.Simple.Program.Db.html#requireProgram"><span class="hs-identifier hs-var">requireProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ldProgram"><span class="hs-identifier hs-var">ldProgram</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProgramDb
</span><a href="Distribution.Types.LocalBuildInfo.html#withPrograms"><span class="hs-identifier hs-var">withPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-935"></span><span>          </span><span class="annot"><span class="annottext">Verbosity
-&gt; LocalBuildInfo
-&gt; ConfiguredProgram
-&gt; String
-&gt; [String]
-&gt; IO ()
</span><a href="Distribution.Simple.Program.Ld.html#combineObjectFiles"><span class="hs-identifier hs-var">Ld.combineObjectFiles</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739567"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739564"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739209"><span class="hs-identifier hs-var">ldProg</span></a></span><span>
</span><span id="line-936"></span><span>            </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739296"><span class="hs-identifier hs-var">ghciProfLibFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739272"><span class="hs-identifier hs-var">profObjectFiles</span></a></span><span>
</span><span id="line-937"></span><span>
</span><span id="line-938"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="#local-6989586621679739547"><span class="hs-identifier hs-var">whenSharedLib</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-939"></span><span>        </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739515"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739251"><span class="hs-identifier hs-var">ghcSharedLinkArgs</span></a></span><span>
</span><span id="line-940"></span><span>
</span><span id="line-941"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="#local-6989586621679739542"><span class="hs-identifier hs-var">whenStaticLib</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-942"></span><span>        </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739515"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739218"><span class="hs-identifier hs-var">ghcStaticLinkArgs</span></a></span><span>
</span><span id="line-943"></span><span>
</span><span id="line-944"></span><span class="hs-comment">-- | Start a REPL without loading any source files.</span><span>
</span><span id="line-945"></span><span class="annot"><a href="Distribution.Simple.GHC.html#startInterpreter"><span class="hs-identifier hs-type">startInterpreter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span>
</span><span id="line-946"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDBStack"><span class="hs-identifier hs-type">PackageDBStack</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-947"></span><span id="startInterpreter"><span class="annot"><span class="annottext">startInterpreter :: Verbosity
-&gt; ProgramDb -&gt; Compiler -&gt; Platform -&gt; [PackageDB] -&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#startInterpreter"><span class="hs-identifier hs-var hs-var">startInterpreter</span></a></span></span><span> </span><span id="local-6989586621679739208"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739208"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739207"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739207"><span class="hs-identifier hs-var">progdb</span></a></span></span><span> </span><span id="local-6989586621679739206"><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739206"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span id="local-6989586621679739205"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679739205"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span id="local-6989586621679739204"><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739204"><span class="hs-identifier hs-var">packageDBs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-948"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739202"><span class="annot"><span class="annottext">replOpts :: GhcOptions
</span><a href="#local-6989586621679739202"><span class="hs-identifier hs-var hs-var">replOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-949"></span><span>        </span><span class="annot"><span class="annottext">ghcOptMode :: Flag GhcMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptMode"><span class="hs-identifier hs-var">ghcOptMode</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcModeInteractive"><span class="hs-identifier hs-var">GhcModeInteractive</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-950"></span><span>        </span><span class="annot"><span class="annottext">ghcOptPackageDBs :: [PackageDB]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptPackageDBs"><span class="hs-identifier hs-var">ghcOptPackageDBs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739204"><span class="hs-identifier hs-var">packageDBs</span></a></span><span>
</span><span id="line-951"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-952"></span><span>  </span><span class="annot"><span class="annottext">Verbosity -&gt; Compiler -&gt; [PackageDB] -&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#checkPackageDbStack"><span class="hs-identifier hs-var">checkPackageDbStack</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739208"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739206"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679739204"><span class="hs-identifier hs-var">packageDBs</span></a></span><span>
</span><span id="line-953"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679739201"><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739201"><span class="hs-identifier hs-var">ghcProg</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Program -&gt; ProgramDb -&gt; IO (ConfiguredProgram, ProgramDb)
</span><a href="Distribution.Simple.Program.Db.html#requireProgram"><span class="hs-identifier hs-var">requireProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739208"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ghcProgram"><span class="hs-identifier hs-var">ghcProgram</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679739207"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-954"></span><span>  </span><span class="annot"><span class="annottext">Verbosity
-&gt; ConfiguredProgram -&gt; Compiler -&gt; Platform -&gt; GhcOptions -&gt; IO ()
</span><a href="Distribution.Simple.Program.GHC.html#runGHC"><span class="hs-identifier hs-var">runGHC</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739208"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739201"><span class="hs-identifier hs-var">ghcProg</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739206"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679739205"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679739202"><span class="hs-identifier hs-var">replOpts</span></a></span><span>
</span><span id="line-955"></span><span>
</span><span id="line-956"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-957"></span><span class="hs-comment">-- Building an executable or foreign library</span><span>
</span><span id="line-958"></span><span>
</span><span id="line-959"></span><span class="hs-comment">-- | Build a foreign library</span><span>
</span><span id="line-960"></span><span class="annot"><a href="Distribution.Simple.GHC.html#buildFLib"><span class="hs-identifier hs-type">buildFLib</span></a></span><span>
</span><span id="line-961"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Flag.html#Flag"><span class="hs-identifier hs-type">Cabal.Flag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-962"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>
</span><span id="line-963"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-964"></span><span id="buildFLib"><span class="annot"><span class="annottext">buildFLib :: Verbosity
-&gt; Flag (Maybe Int)
-&gt; PackageDescription
-&gt; LocalBuildInfo
-&gt; ForeignLib
-&gt; ComponentLocalBuildInfo
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#buildFLib"><span class="hs-identifier hs-var hs-var">buildFLib</span></a></span></span><span> </span><span id="local-6989586621679739200"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739200"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679739199"><span class="annot"><span class="annottext">Flag (Maybe Int)
</span><a href="#local-6989586621679739199"><span class="hs-identifier hs-var">njobs</span></a></span></span><span> </span><span id="local-6989586621679739198"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679739198"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span id="local-6989586621679739197"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739197"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Flag (Maybe Int)
-&gt; PackageDescription
-&gt; LocalBuildInfo
-&gt; GBuildMode
-&gt; ComponentLocalBuildInfo
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#gbuild"><span class="hs-identifier hs-var">gbuild</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739200"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Flag (Maybe Int)
</span><a href="#local-6989586621679739199"><span class="hs-identifier hs-var">njobs</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679739198"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739197"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; GBuildMode
</span><a href="Distribution.Simple.GHC.html#GBuildFLib"><span class="hs-identifier hs-var">GBuildFLib</span></a></span><span>
</span><span id="line-965"></span><span>
</span><span id="line-966"></span><span class="annot"><a href="Distribution.Simple.GHC.html#replFLib"><span class="hs-identifier hs-type">replFLib</span></a></span><span>
</span><span id="line-967"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-968"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Flag.html#Flag"><span class="hs-identifier hs-type">Cabal.Flag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span>
</span><span id="line-969"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a></span><span>
</span><span id="line-970"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-971"></span><span id="replFLib"><span class="annot"><span class="annottext">replFLib :: [String]
-&gt; Verbosity
-&gt; Flag (Maybe Int)
-&gt; PackageDescription
-&gt; LocalBuildInfo
-&gt; ForeignLib
-&gt; ComponentLocalBuildInfo
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#replFLib"><span class="hs-identifier hs-var hs-var">replFLib</span></a></span></span><span> </span><span id="local-6989586621679739194"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739194"><span class="hs-identifier hs-var">replFlags</span></a></span></span><span>  </span><span id="local-6989586621679739193"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739193"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679739192"><span class="annot"><span class="annottext">Flag (Maybe Int)
</span><a href="#local-6989586621679739192"><span class="hs-identifier hs-var">njobs</span></a></span></span><span> </span><span id="local-6989586621679739191"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679739191"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span id="local-6989586621679739190"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739190"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-972"></span><span>  </span><span class="annot"><span class="annottext">Verbosity
-&gt; Flag (Maybe Int)
-&gt; PackageDescription
-&gt; LocalBuildInfo
-&gt; GBuildMode
-&gt; ComponentLocalBuildInfo
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#gbuild"><span class="hs-identifier hs-var">gbuild</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739193"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Flag (Maybe Int)
</span><a href="#local-6989586621679739192"><span class="hs-identifier hs-var">njobs</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679739191"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739190"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; ForeignLib -&gt; GBuildMode
</span><a href="Distribution.Simple.GHC.html#GReplFLib"><span class="hs-identifier hs-var">GReplFLib</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739194"><span class="hs-identifier hs-var">replFlags</span></a></span><span>
</span><span id="line-973"></span><span>
</span><span id="line-974"></span><span class="hs-comment">-- | Build an executable with GHC.</span><span>
</span><span id="line-975"></span><span class="hs-comment">--</span><span>
</span><span id="line-976"></span><span class="annot"><a href="Distribution.Simple.GHC.html#buildExe"><span class="hs-identifier hs-type">buildExe</span></a></span><span>
</span><span id="line-977"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Flag.html#Flag"><span class="hs-identifier hs-type">Cabal.Flag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-978"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>
</span><span id="line-979"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.Executable.html#Executable"><span class="hs-identifier hs-type">Executable</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-980"></span><span id="buildExe"><span class="annot"><span class="annottext">buildExe :: Verbosity
-&gt; Flag (Maybe Int)
-&gt; PackageDescription
-&gt; LocalBuildInfo
-&gt; Executable
-&gt; ComponentLocalBuildInfo
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#buildExe"><span class="hs-identifier hs-var hs-var">buildExe</span></a></span></span><span> </span><span id="local-6989586621679739188"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739188"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679739187"><span class="annot"><span class="annottext">Flag (Maybe Int)
</span><a href="#local-6989586621679739187"><span class="hs-identifier hs-var">njobs</span></a></span></span><span> </span><span id="local-6989586621679739186"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679739186"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span id="local-6989586621679739185"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739185"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Flag (Maybe Int)
-&gt; PackageDescription
-&gt; LocalBuildInfo
-&gt; GBuildMode
-&gt; ComponentLocalBuildInfo
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#gbuild"><span class="hs-identifier hs-var">gbuild</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739188"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Flag (Maybe Int)
</span><a href="#local-6989586621679739187"><span class="hs-identifier hs-var">njobs</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679739186"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739185"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Executable -&gt; GBuildMode
</span><a href="Distribution.Simple.GHC.html#GBuildExe"><span class="hs-identifier hs-var">GBuildExe</span></a></span><span>
</span><span id="line-981"></span><span>
</span><span id="line-982"></span><span class="annot"><a href="Distribution.Simple.GHC.html#replExe"><span class="hs-identifier hs-type">replExe</span></a></span><span>
</span><span id="line-983"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-984"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Flag.html#Flag"><span class="hs-identifier hs-type">Cabal.Flag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span>
</span><span id="line-985"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.Executable.html#Executable"><span class="hs-identifier hs-type">Executable</span></a></span><span>
</span><span id="line-986"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-987"></span><span id="replExe"><span class="annot"><span class="annottext">replExe :: [String]
-&gt; Verbosity
-&gt; Flag (Maybe Int)
-&gt; PackageDescription
-&gt; LocalBuildInfo
-&gt; Executable
-&gt; ComponentLocalBuildInfo
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#replExe"><span class="hs-identifier hs-var hs-var">replExe</span></a></span></span><span> </span><span id="local-6989586621679739183"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739183"><span class="hs-identifier hs-var">replFlags</span></a></span></span><span> </span><span id="local-6989586621679739182"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739182"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679739181"><span class="annot"><span class="annottext">Flag (Maybe Int)
</span><a href="#local-6989586621679739181"><span class="hs-identifier hs-var">njobs</span></a></span></span><span> </span><span id="local-6989586621679739180"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679739180"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span id="local-6989586621679739179"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739179"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-988"></span><span>  </span><span class="annot"><span class="annottext">Verbosity
-&gt; Flag (Maybe Int)
-&gt; PackageDescription
-&gt; LocalBuildInfo
-&gt; GBuildMode
-&gt; ComponentLocalBuildInfo
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#gbuild"><span class="hs-identifier hs-var">gbuild</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739182"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Flag (Maybe Int)
</span><a href="#local-6989586621679739181"><span class="hs-identifier hs-var">njobs</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679739180"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739179"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Executable -&gt; GBuildMode
</span><a href="Distribution.Simple.GHC.html#GReplExe"><span class="hs-identifier hs-var">GReplExe</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739183"><span class="hs-identifier hs-var">replFlags</span></a></span><span>
</span><span id="line-989"></span><span>
</span><span id="line-990"></span><span class="hs-comment">-- | Building an executable, starting the REPL, and building foreign</span><span>
</span><span id="line-991"></span><span class="hs-comment">-- libraries are all very similar and implemented in 'gbuild'. The</span><span>
</span><span id="line-992"></span><span class="hs-comment">-- 'GBuildMode' distinguishes between the various kinds of operation.</span><span>
</span><span id="line-993"></span><span class="hs-keyword">data</span><span> </span><span id="GBuildMode"><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildMode"><span class="hs-identifier hs-var">GBuildMode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-994"></span><span>    </span><span id="GBuildExe"><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildExe"><span class="hs-identifier hs-var">GBuildExe</span></a></span></span><span>  </span><span class="annot"><a href="Distribution.Types.Executable.html#Executable"><span class="hs-identifier hs-type">Executable</span></a></span><span>
</span><span id="line-995"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GReplExe"><span class="annot"><a href="Distribution.Simple.GHC.html#GReplExe"><span class="hs-identifier hs-var">GReplExe</span></a></span></span><span>   </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Distribution.Types.Executable.html#Executable"><span class="hs-identifier hs-type">Executable</span></a></span><span>
</span><span id="line-996"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GBuildFLib"><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildFLib"><span class="hs-identifier hs-var">GBuildFLib</span></a></span></span><span> </span><span class="annot"><a href="Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a></span><span>
</span><span id="line-997"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GReplFLib"><span class="annot"><a href="Distribution.Simple.GHC.html#GReplFLib"><span class="hs-identifier hs-var">GReplFLib</span></a></span></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a></span><span>
</span><span id="line-998"></span><span>
</span><span id="line-999"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildInfo"><span class="hs-identifier hs-type">gbuildInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildMode"><span class="hs-identifier hs-type">GBuildMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.BuildInfo.html#BuildInfo"><span class="hs-identifier hs-type">BuildInfo</span></a></span><span>
</span><span id="line-1000"></span><span id="gbuildInfo"><span class="annot"><span class="annottext">gbuildInfo :: GBuildMode -&gt; BuildInfo
</span><a href="Distribution.Simple.GHC.html#gbuildInfo"><span class="hs-identifier hs-var hs-var">gbuildInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildExe"><span class="hs-identifier hs-type">GBuildExe</span></a></span><span>  </span><span id="local-6989586621679739176"><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739176"><span class="hs-identifier hs-var">exe</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Executable -&gt; BuildInfo
</span><a href="Distribution.Types.Executable.html#buildInfo"><span class="hs-identifier hs-var">buildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739176"><span class="hs-identifier hs-var">exe</span></a></span><span>
</span><span id="line-1001"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildInfo"><span class="hs-identifier hs-var">gbuildInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplExe"><span class="hs-identifier hs-type">GReplExe</span></a></span><span>   </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679739174"><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739174"><span class="hs-identifier hs-var">exe</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Executable -&gt; BuildInfo
</span><a href="Distribution.Types.Executable.html#buildInfo"><span class="hs-identifier hs-var">buildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739174"><span class="hs-identifier hs-var">exe</span></a></span><span>
</span><span id="line-1002"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildInfo"><span class="hs-identifier hs-var">gbuildInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildFLib"><span class="hs-identifier hs-type">GBuildFLib</span></a></span><span> </span><span id="local-6989586621679739173"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739173"><span class="hs-identifier hs-var">flib</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; BuildInfo
</span><a href="Distribution.Types.ForeignLib.html#foreignLibBuildInfo"><span class="hs-identifier hs-var">foreignLibBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739173"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1003"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildInfo"><span class="hs-identifier hs-var">gbuildInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplFLib"><span class="hs-identifier hs-type">GReplFLib</span></a></span><span>  </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679739171"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739171"><span class="hs-identifier hs-var">flib</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; BuildInfo
</span><a href="Distribution.Types.ForeignLib.html#foreignLibBuildInfo"><span class="hs-identifier hs-var">foreignLibBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739171"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1004"></span><span>
</span><span id="line-1005"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildName"><span class="hs-identifier hs-type">gbuildName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildMode"><span class="hs-identifier hs-type">GBuildMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1006"></span><span id="gbuildName"><span class="annot"><span class="annottext">gbuildName :: GBuildMode -&gt; String
</span><a href="Distribution.Simple.GHC.html#gbuildName"><span class="hs-identifier hs-var hs-var">gbuildName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildExe"><span class="hs-identifier hs-type">GBuildExe</span></a></span><span>  </span><span id="local-6989586621679739169"><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739169"><span class="hs-identifier hs-var">exe</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnqualComponentName -&gt; String
</span><a href="Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Executable -&gt; UnqualComponentName
</span><a href="Distribution.Types.Executable.html#exeName"><span class="hs-identifier hs-var">exeName</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739169"><span class="hs-identifier hs-var">exe</span></a></span><span>
</span><span id="line-1007"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildName"><span class="hs-identifier hs-var">gbuildName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplExe"><span class="hs-identifier hs-type">GReplExe</span></a></span><span>   </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679739166"><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739166"><span class="hs-identifier hs-var">exe</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnqualComponentName -&gt; String
</span><a href="Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Executable -&gt; UnqualComponentName
</span><a href="Distribution.Types.Executable.html#exeName"><span class="hs-identifier hs-var">exeName</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739166"><span class="hs-identifier hs-var">exe</span></a></span><span>
</span><span id="line-1008"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildName"><span class="hs-identifier hs-var">gbuildName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildFLib"><span class="hs-identifier hs-type">GBuildFLib</span></a></span><span> </span><span id="local-6989586621679739165"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739165"><span class="hs-identifier hs-var">flib</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnqualComponentName -&gt; String
</span><a href="Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; UnqualComponentName
</span><a href="Distribution.Types.ForeignLib.html#foreignLibName"><span class="hs-identifier hs-var">foreignLibName</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739165"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1009"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildName"><span class="hs-identifier hs-var">gbuildName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplFLib"><span class="hs-identifier hs-type">GReplFLib</span></a></span><span>  </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679739163"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739163"><span class="hs-identifier hs-var">flib</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnqualComponentName -&gt; String
</span><a href="Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; UnqualComponentName
</span><a href="Distribution.Types.ForeignLib.html#foreignLibName"><span class="hs-identifier hs-var">foreignLibName</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739163"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1010"></span><span>
</span><span id="line-1011"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildTargetName"><span class="hs-identifier hs-type">gbuildTargetName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildMode"><span class="hs-identifier hs-type">GBuildMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1012"></span><span id="gbuildTargetName"><span class="annot"><span class="annottext">gbuildTargetName :: LocalBuildInfo -&gt; GBuildMode -&gt; String
</span><a href="Distribution.Simple.GHC.html#gbuildTargetName"><span class="hs-identifier hs-var hs-var">gbuildTargetName</span></a></span></span><span> </span><span id="local-6989586621679739161"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739161"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildExe"><span class="hs-identifier hs-type">GBuildExe</span></a></span><span>  </span><span id="local-6989586621679739160"><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739160"><span class="hs-identifier hs-var">exe</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Executable -&gt; String
</span><a href="Distribution.Simple.GHC.html#exeTargetName"><span class="hs-identifier hs-var">exeTargetName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739161"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739160"><span class="hs-identifier hs-var">exe</span></a></span><span>
</span><span id="line-1013"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildTargetName"><span class="hs-identifier hs-var">gbuildTargetName</span></a></span><span> </span><span id="local-6989586621679739158"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739158"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplExe"><span class="hs-identifier hs-type">GReplExe</span></a></span><span>   </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679739157"><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739157"><span class="hs-identifier hs-var">exe</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Executable -&gt; String
</span><a href="Distribution.Simple.GHC.html#exeTargetName"><span class="hs-identifier hs-var">exeTargetName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739158"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739157"><span class="hs-identifier hs-var">exe</span></a></span><span>
</span><span id="line-1014"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildTargetName"><span class="hs-identifier hs-var">gbuildTargetName</span></a></span><span> </span><span id="local-6989586621679739156"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739156"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildFLib"><span class="hs-identifier hs-type">GBuildFLib</span></a></span><span> </span><span id="local-6989586621679739155"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739155"><span class="hs-identifier hs-var">flib</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ForeignLib -&gt; String
</span><a href="Distribution.Simple.GHC.html#flibTargetName"><span class="hs-identifier hs-var">flibTargetName</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739156"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739155"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1015"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildTargetName"><span class="hs-identifier hs-var">gbuildTargetName</span></a></span><span> </span><span id="local-6989586621679739153"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739153"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplFLib"><span class="hs-identifier hs-type">GReplFLib</span></a></span><span>  </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679739152"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739152"><span class="hs-identifier hs-var">flib</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ForeignLib -&gt; String
</span><a href="Distribution.Simple.GHC.html#flibTargetName"><span class="hs-identifier hs-var">flibTargetName</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739153"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739152"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1016"></span><span>
</span><span id="line-1017"></span><span class="annot"><a href="Distribution.Simple.GHC.html#exeTargetName"><span class="hs-identifier hs-type">exeTargetName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.Executable.html#Executable"><span class="hs-identifier hs-type">Executable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1018"></span><span id="exeTargetName"><span class="annot"><span class="annottext">exeTargetName :: Platform -&gt; Executable -&gt; String
</span><a href="Distribution.Simple.GHC.html#exeTargetName"><span class="hs-identifier hs-var hs-var">exeTargetName</span></a></span></span><span> </span><span id="local-6989586621679739151"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679739151"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span id="local-6989586621679739150"><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739150"><span class="hs-identifier hs-var">exe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnqualComponentName -&gt; String
</span><a href="Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Executable -&gt; UnqualComponentName
</span><a href="Distribution.Types.Executable.html#exeName"><span class="hs-identifier hs-var">exeName</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739150"><span class="hs-identifier hs-var">exe</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="Distribution.Simple.GHC.html#withExt"><span class="hs-operator hs-var">`withExt`</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#exeExtension"><span class="hs-identifier hs-var">exeExtension</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679739151"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-1019"></span><span>
</span><span id="line-1020"></span><span class="hs-comment">-- | Target name for a foreign library (the actual file name)</span><span>
</span><span id="line-1021"></span><span class="hs-comment">--</span><span>
</span><span id="line-1022"></span><span class="hs-comment">-- We do not use mkLibName and co here because the naming for foreign libraries</span><span>
</span><span id="line-1023"></span><span class="hs-comment">-- is slightly different (we don't use &quot;_p&quot; or compiler version suffices, and we</span><span>
</span><span id="line-1024"></span><span class="hs-comment">-- don't want the &quot;lib&quot; prefix on Windows).</span><span>
</span><span id="line-1025"></span><span class="hs-comment">--</span><span>
</span><span id="line-1026"></span><span class="hs-comment">-- TODO: We do use `dllExtension` and co here, but really that's wrong: they</span><span>
</span><span id="line-1027"></span><span class="hs-comment">-- use the OS used to build cabal to determine which extension to use, rather</span><span>
</span><span id="line-1028"></span><span class="hs-comment">-- than the target OS (but this is wrong elsewhere in Cabal as well).</span><span>
</span><span id="line-1029"></span><span class="annot"><a href="Distribution.Simple.GHC.html#flibTargetName"><span class="hs-identifier hs-type">flibTargetName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1030"></span><span id="flibTargetName"><span class="annot"><span class="annottext">flibTargetName :: LocalBuildInfo -&gt; ForeignLib -&gt; String
</span><a href="Distribution.Simple.GHC.html#flibTargetName"><span class="hs-identifier hs-var hs-var">flibTargetName</span></a></span></span><span> </span><span id="local-6989586621679739148"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739148"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span id="local-6989586621679739147"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739147"><span class="hs-identifier hs-var">flib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1031"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679739146"><span class="hs-identifier hs-var">os</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; ForeignLibType
</span><a href="Distribution.Types.ForeignLib.html#foreignLibType"><span class="hs-identifier hs-var">foreignLibType</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739147"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1032"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Windows"><span class="hs-identifier hs-var">Windows</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibNativeShared"><span class="hs-identifier hs-var">ForeignLibNativeShared</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739142"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dll&quot;</span></span><span>
</span><span id="line-1033"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Windows"><span class="hs-identifier hs-var">Windows</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibNativeStatic"><span class="hs-identifier hs-var">ForeignLibNativeStatic</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739142"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lib&quot;</span></span><span>
</span><span id="line-1034"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Linux"><span class="hs-identifier hs-var">Linux</span></a></span><span class="hs-special">,</span><span>   </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibNativeShared"><span class="hs-identifier hs-var">ForeignLibNativeShared</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lib&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739142"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739139"><span class="hs-identifier hs-var">versionedExt</span></a></span><span>
</span><span id="line-1035"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679739138"><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679739138"><span class="hs-identifier hs-var">_other</span></a></span></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibNativeShared"><span class="hs-identifier hs-var">ForeignLibNativeShared</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1036"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lib&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739142"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#dllExtension"><span class="hs-identifier hs-var">dllExtension</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739148"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1037"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679739136"><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679739136"><span class="hs-identifier hs-var">_other</span></a></span></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibNativeStatic"><span class="hs-identifier hs-var">ForeignLibNativeStatic</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1038"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lib&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739142"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#staticLibExtension"><span class="hs-identifier hs-var">staticLibExtension</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739148"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1039"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679739134"><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679739134"><span class="hs-identifier hs-var">_any</span></a></span></span><span class="hs-special">,</span><span>    </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibTypeUnknown"><span class="hs-identifier hs-var">ForeignLibTypeUnknown</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="Distribution.PackageDescription.Utils.html#cabalBug"><span class="hs-identifier hs-var">cabalBug</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unknown foreign lib type&quot;</span></span><span>
</span><span id="line-1040"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1041"></span><span>    </span><span class="annot"><a href="#local-6989586621679739142"><span class="hs-identifier hs-type">nm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1042"></span><span>    </span><span id="local-6989586621679739142"><span class="annot"><span class="annottext">nm :: String
</span><a href="#local-6989586621679739142"><span class="hs-identifier hs-var hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnqualComponentName -&gt; String
</span><a href="Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; UnqualComponentName
</span><a href="Distribution.Types.ForeignLib.html#foreignLibName"><span class="hs-identifier hs-var">foreignLibName</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739147"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1043"></span><span>
</span><span id="line-1044"></span><span>    </span><span class="annot"><a href="#local-6989586621679739146"><span class="hs-identifier hs-type">os</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.System.html#OS"><span class="hs-identifier hs-type">OS</span></a></span><span>
</span><span id="line-1045"></span><span>    </span><span id="local-6989586621679739146"><span class="annot"><span class="annottext">os :: OS
</span><a href="#local-6989586621679739146"><span class="hs-identifier hs-var hs-var">os</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679739132"><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679739132"><span class="hs-identifier hs-var">os'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739148"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1046"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679739132"><span class="hs-identifier hs-var">os'</span></a></span><span>
</span><span id="line-1047"></span><span>
</span><span id="line-1048"></span><span>    </span><span class="hs-comment">-- If a foreign lib foo has lib-version-info 5:1:2 or</span><span>
</span><span id="line-1049"></span><span>    </span><span class="hs-comment">-- lib-version-linux 3.2.1, it should be built as libfoo.so.3.2.1</span><span>
</span><span id="line-1050"></span><span>    </span><span class="hs-comment">-- Libtool's version-info data is translated into library versions in a</span><span>
</span><span id="line-1051"></span><span>    </span><span class="hs-comment">-- nontrivial way: so refer to libtool documentation.</span><span>
</span><span id="line-1052"></span><span>    </span><span class="annot"><a href="#local-6989586621679739139"><span class="hs-identifier hs-type">versionedExt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1053"></span><span>    </span><span id="local-6989586621679739139"><span class="annot"><span class="annottext">versionedExt :: String
</span><a href="#local-6989586621679739139"><span class="hs-identifier hs-var hs-var">versionedExt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1054"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739131"><span class="annot"><span class="annottext">nums :: [Int]
</span><a href="#local-6989586621679739131"><span class="hs-identifier hs-var hs-var">nums</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; OS -&gt; [Int]
</span><a href="Distribution.Types.ForeignLib.html#foreignLibVersion"><span class="hs-identifier hs-var">foreignLibVersion</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739147"><span class="hs-identifier hs-var">flib</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679739146"><span class="hs-identifier hs-var">os</span></a></span><span>
</span><span id="line-1055"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#foldl"><span class="hs-identifier hs-var">foldl</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator hs-var">(&lt;.&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;so&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.16.3.0/src/GHC-Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679739131"><span class="hs-identifier hs-var">nums</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1056"></span><span>
</span><span id="line-1057"></span><span class="hs-comment">-- | Name for the library when building.</span><span>
</span><span id="line-1058"></span><span class="hs-comment">--</span><span>
</span><span id="line-1059"></span><span class="hs-comment">-- If the `lib-version-info` field or the `lib-version-linux` field of</span><span>
</span><span id="line-1060"></span><span class="hs-comment">-- a foreign library target is set, we need to incorporate that</span><span>
</span><span id="line-1061"></span><span class="hs-comment">-- version into the SONAME field.</span><span>
</span><span id="line-1062"></span><span class="hs-comment">--</span><span>
</span><span id="line-1063"></span><span class="hs-comment">-- If a foreign library foo has lib-version-info 5:1:2, it should be</span><span>
</span><span id="line-1064"></span><span class="hs-comment">-- built as libfoo.so.3.2.1.  We want it to get soname libfoo.so.3.</span><span>
</span><span id="line-1065"></span><span class="hs-comment">-- However, GHC does not allow overriding soname by setting linker</span><span>
</span><span id="line-1066"></span><span class="hs-comment">-- options, as it sets a soname of its own (namely the output</span><span>
</span><span id="line-1067"></span><span class="hs-comment">-- filename), after the user-supplied linker options.  Hence, we have</span><span>
</span><span id="line-1068"></span><span class="hs-comment">-- to compile the library with the soname as its filename.  We rename</span><span>
</span><span id="line-1069"></span><span class="hs-comment">-- the compiled binary afterwards.</span><span>
</span><span id="line-1070"></span><span class="hs-comment">--</span><span>
</span><span id="line-1071"></span><span class="hs-comment">-- This method allows to adjust the name of the library at build time</span><span>
</span><span id="line-1072"></span><span class="hs-comment">-- such that the correct soname can be set.</span><span>
</span><span id="line-1073"></span><span class="annot"><a href="Distribution.Simple.GHC.html#flibBuildName"><span class="hs-identifier hs-type">flibBuildName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1074"></span><span id="flibBuildName"><span class="annot"><span class="annottext">flibBuildName :: LocalBuildInfo -&gt; ForeignLib -&gt; String
</span><a href="Distribution.Simple.GHC.html#flibBuildName"><span class="hs-identifier hs-var hs-var">flibBuildName</span></a></span></span><span> </span><span id="local-6989586621679739127"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739127"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span id="local-6989586621679739126"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739126"><span class="hs-identifier hs-var">flib</span></a></span></span><span>
</span><span id="line-1075"></span><span>  </span><span class="hs-comment">-- On linux, if a foreign-library has version data, the first digit is used</span><span>
</span><span id="line-1076"></span><span>  </span><span class="hs-comment">-- to produce the SONAME.</span><span>
</span><span id="line-1077"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679739125"><span class="hs-identifier hs-var">os</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; ForeignLibType
</span><a href="Distribution.Types.ForeignLib.html#foreignLibType"><span class="hs-identifier hs-var">foreignLibType</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739126"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span>
</span><span id="line-1078"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Linux"><span class="hs-identifier hs-var">Linux</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibNativeShared"><span class="hs-identifier hs-var">ForeignLibNativeShared</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1079"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739124"><span class="annot"><span class="annottext">nums :: [Int]
</span><a href="#local-6989586621679739124"><span class="hs-identifier hs-var hs-var">nums</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; OS -&gt; [Int]
</span><a href="Distribution.Types.ForeignLib.html#foreignLibVersion"><span class="hs-identifier hs-var">foreignLibVersion</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739126"><span class="hs-identifier hs-var">flib</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679739125"><span class="hs-identifier hs-var">os</span></a></span><span>
</span><span id="line-1080"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lib&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739123"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#foldl"><span class="hs-identifier hs-var">foldl</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator hs-var">(&lt;.&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;so&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.16.3.0/src/GHC-Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#take"><span class="hs-identifier hs-var">take</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679739124"><span class="hs-identifier hs-var">nums</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1081"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ForeignLib -&gt; String
</span><a href="Distribution.Simple.GHC.html#flibTargetName"><span class="hs-identifier hs-var">flibTargetName</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739127"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739126"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1082"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1083"></span><span>    </span><span class="annot"><a href="#local-6989586621679739125"><span class="hs-identifier hs-type">os</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.System.html#OS"><span class="hs-identifier hs-type">OS</span></a></span><span>
</span><span id="line-1084"></span><span>    </span><span id="local-6989586621679739125"><span class="annot"><span class="annottext">os :: OS
</span><a href="#local-6989586621679739125"><span class="hs-identifier hs-var hs-var">os</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679739121"><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679739121"><span class="hs-identifier hs-var">os'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739127"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1085"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679739121"><span class="hs-identifier hs-var">os'</span></a></span><span>
</span><span id="line-1086"></span><span>
</span><span id="line-1087"></span><span>    </span><span class="annot"><a href="#local-6989586621679739123"><span class="hs-identifier hs-type">nm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1088"></span><span>    </span><span id="local-6989586621679739123"><span class="annot"><span class="annottext">nm :: String
</span><a href="#local-6989586621679739123"><span class="hs-identifier hs-var hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnqualComponentName -&gt; String
</span><a href="Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; UnqualComponentName
</span><a href="Distribution.Types.ForeignLib.html#foreignLibName"><span class="hs-identifier hs-var">foreignLibName</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739126"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1089"></span><span>
</span><span id="line-1090"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildIsRepl"><span class="hs-identifier hs-type">gbuildIsRepl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildMode"><span class="hs-identifier hs-type">GBuildMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1091"></span><span id="gbuildIsRepl"><span class="annot"><span class="annottext">gbuildIsRepl :: GBuildMode -&gt; Bool
</span><a href="Distribution.Simple.GHC.html#gbuildIsRepl"><span class="hs-identifier hs-var hs-var">gbuildIsRepl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildExe"><span class="hs-identifier hs-type">GBuildExe</span></a></span><span>  </span><span class="annot"><span class="annottext">Executable
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1092"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildIsRepl"><span class="hs-identifier hs-var">gbuildIsRepl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplExe"><span class="hs-identifier hs-type">GReplExe</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Executable
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1093"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildIsRepl"><span class="hs-identifier hs-var">gbuildIsRepl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildFLib"><span class="hs-identifier hs-type">GBuildFLib</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1094"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildIsRepl"><span class="hs-identifier hs-var">gbuildIsRepl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplFLib"><span class="hs-identifier hs-type">GReplFLib</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1095"></span><span>
</span><span id="line-1096"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildNeedDynamic"><span class="hs-identifier hs-type">gbuildNeedDynamic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildMode"><span class="hs-identifier hs-type">GBuildMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1097"></span><span id="gbuildNeedDynamic"><span class="annot"><span class="annottext">gbuildNeedDynamic :: LocalBuildInfo -&gt; GBuildMode -&gt; Bool
</span><a href="Distribution.Simple.GHC.html#gbuildNeedDynamic"><span class="hs-identifier hs-var hs-var">gbuildNeedDynamic</span></a></span></span><span> </span><span id="local-6989586621679739118"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739118"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span id="local-6989586621679739117"><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739117"><span class="hs-identifier hs-var">bm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1098"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739117"><span class="hs-identifier hs-var">bm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1099"></span><span>      </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildExe"><span class="hs-identifier hs-type">GBuildExe</span></a></span><span>  </span><span class="annot"><span class="annottext">Executable
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withDynExe"><span class="hs-identifier hs-var">withDynExe</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739118"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1100"></span><span>      </span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplExe"><span class="hs-identifier hs-type">GReplExe</span></a></span><span>   </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Executable
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withDynExe"><span class="hs-identifier hs-var">withDynExe</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739118"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1101"></span><span>      </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildFLib"><span class="hs-identifier hs-type">GBuildFLib</span></a></span><span> </span><span id="local-6989586621679739115"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739115"><span class="hs-identifier hs-var">flib</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; Bool
</span><a href="#local-6989586621679739114"><span class="hs-identifier hs-var">withDynFLib</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739115"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1102"></span><span>      </span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplFLib"><span class="hs-identifier hs-type">GReplFLib</span></a></span><span>  </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679739113"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739113"><span class="hs-identifier hs-var">flib</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; Bool
</span><a href="#local-6989586621679739114"><span class="hs-identifier hs-var">withDynFLib</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739113"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1103"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1104"></span><span>    </span><span id="local-6989586621679739114"><span class="annot"><span class="annottext">withDynFLib :: ForeignLib -&gt; Bool
</span><a href="#local-6989586621679739114"><span class="hs-identifier hs-var hs-var">withDynFLib</span></a></span></span><span> </span><span id="local-6989586621679739109"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739109"><span class="hs-identifier hs-var">flib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1105"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; ForeignLibType
</span><a href="Distribution.Types.ForeignLib.html#foreignLibType"><span class="hs-identifier hs-var">foreignLibType</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739109"><span class="hs-identifier hs-var">flib</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1106"></span><span>        </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibNativeShared"><span class="hs-identifier hs-var">ForeignLibNativeShared</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1107"></span><span>          </span><span class="annot"><span class="annottext">ForeignLibOption
</span><a href="Distribution.Types.ForeignLibOption.html#ForeignLibStandalone"><span class="hs-identifier hs-var">ForeignLibStandalone</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#notElem"><span class="hs-operator hs-var">`notElem`</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; [ForeignLibOption]
</span><a href="Distribution.Types.ForeignLib.html#foreignLibOptions"><span class="hs-identifier hs-var">foreignLibOptions</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739109"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1108"></span><span>        </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibNativeStatic"><span class="hs-identifier hs-var">ForeignLibNativeStatic</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1109"></span><span>          </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1110"></span><span>        </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibTypeUnknown"><span class="hs-identifier hs-var">ForeignLibTypeUnknown</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1111"></span><span>          </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="Distribution.PackageDescription.Utils.html#cabalBug"><span class="hs-identifier hs-var">cabalBug</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unknown foreign lib type&quot;</span></span><span>
</span><span id="line-1112"></span><span>
</span><span id="line-1113"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildModDefFiles"><span class="hs-identifier hs-type">gbuildModDefFiles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildMode"><span class="hs-identifier hs-type">GBuildMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1114"></span><span id="gbuildModDefFiles"><span class="annot"><span class="annottext">gbuildModDefFiles :: GBuildMode -&gt; [String]
</span><a href="Distribution.Simple.GHC.html#gbuildModDefFiles"><span class="hs-identifier hs-var hs-var">gbuildModDefFiles</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildExe"><span class="hs-identifier hs-type">GBuildExe</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1115"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildModDefFiles"><span class="hs-identifier hs-var">gbuildModDefFiles</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplExe"><span class="hs-identifier hs-type">GReplExe</span></a></span><span>  </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Executable
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1116"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildModDefFiles"><span class="hs-identifier hs-var">gbuildModDefFiles</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildFLib"><span class="hs-identifier hs-type">GBuildFLib</span></a></span><span> </span><span id="local-6989586621679739105"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739105"><span class="hs-identifier hs-var">flib</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; [String]
</span><a href="Distribution.Types.ForeignLib.html#foreignLibModDefFile"><span class="hs-identifier hs-var">foreignLibModDefFile</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739105"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1117"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildModDefFiles"><span class="hs-identifier hs-var">gbuildModDefFiles</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplFLib"><span class="hs-identifier hs-type">GReplFLib</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679739103"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739103"><span class="hs-identifier hs-var">flib</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; [String]
</span><a href="Distribution.Types.ForeignLib.html#foreignLibModDefFile"><span class="hs-identifier hs-var">foreignLibModDefFile</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739103"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1118"></span><span>
</span><span id="line-1119"></span><span class="hs-comment">-- | &quot;Main&quot; module name when overridden by @ghc-options: -main-is ...@</span><span>
</span><span id="line-1120"></span><span class="hs-comment">-- or 'Nothing' if no @-main-is@ flag could be found.</span><span>
</span><span id="line-1121"></span><span class="hs-comment">--</span><span>
</span><span id="line-1122"></span><span class="hs-comment">-- In case of 'Nothing', 'Distribution.ModuleName.main' can be assumed.</span><span>
</span><span id="line-1123"></span><span class="annot"><a href="Distribution.Simple.GHC.html#exeMainModuleName"><span class="hs-identifier hs-type">exeMainModuleName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.Executable.html#Executable"><span class="hs-identifier hs-type">Executable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Distribution.ModuleName.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-1124"></span><span id="exeMainModuleName"><span class="annot"><span class="annottext">exeMainModuleName :: Executable -&gt; Maybe ModuleName
</span><a href="Distribution.Simple.GHC.html#exeMainModuleName"><span class="hs-identifier hs-var hs-var">exeMainModuleName</span></a></span></span><span> </span><span class="annot"><a href="Distribution.Types.Executable.html#Executable"><span class="hs-identifier hs-type">Executable</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">buildInfo :: Executable -&gt; BuildInfo
</span><a href="Distribution.Types.Executable.html#buildInfo"><span class="hs-identifier hs-var">buildInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679739100"><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739100"><span class="hs-identifier hs-var">bnfo</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1125"></span><span>    </span><span class="hs-comment">-- GHC honors the last occurrence of a module name updated via -main-is</span><span>
</span><span id="line-1126"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1127"></span><span>    </span><span class="hs-comment">-- Moreover, -main-is when parsed left-to-right can update either</span><span>
</span><span id="line-1128"></span><span>    </span><span class="hs-comment">-- the &quot;Main&quot; module name, or the &quot;main&quot; function name, or both,</span><span>
</span><span id="line-1129"></span><span>    </span><span class="hs-comment">-- see also 'decodeMainIsArg'.</span><span>
</span><span id="line-1130"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, MonadPlus m) =&gt;
t (m a) -&gt; m a
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#msum"><span class="hs-identifier hs-var">msum</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe ModuleName
</span><a href="Distribution.Simple.GHC.html#decodeMainIsArg"><span class="hs-identifier hs-var">decodeMainIsArg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String]
</span><a href="#local-6989586621679739097"><span class="hs-identifier hs-var">findIsMainArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739096"><span class="hs-identifier hs-var">ghcopts</span></a></span><span>
</span><span id="line-1131"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1132"></span><span>    </span><span id="local-6989586621679739096"><span class="annot"><span class="annottext">ghcopts :: [String]
</span><a href="#local-6989586621679739096"><span class="hs-identifier hs-var hs-var">ghcopts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerFlavor -&gt; BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#hcOptions"><span class="hs-identifier hs-var">hcOptions</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739100"><span class="hs-identifier hs-var">bnfo</span></a></span><span>
</span><span id="line-1133"></span><span>
</span><span id="line-1134"></span><span>    </span><span id="local-6989586621679739097"><span class="annot"><span class="annottext">findIsMainArgs :: [String] -&gt; [String]
</span><a href="#local-6989586621679739097"><span class="hs-identifier hs-var hs-var">findIsMainArgs</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1135"></span><span>    </span><span class="annot"><a href="#local-6989586621679739097"><span class="hs-identifier hs-var">findIsMainArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-main-is&quot;</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679739094"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739094"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679739093"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739093"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739094"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String]
</span><a href="#local-6989586621679739097"><span class="hs-identifier hs-var">findIsMainArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739093"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1136"></span><span>    </span><span class="annot"><a href="#local-6989586621679739097"><span class="hs-identifier hs-var">findIsMainArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679739092"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739092"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String]
</span><a href="#local-6989586621679739097"><span class="hs-identifier hs-var">findIsMainArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739092"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1137"></span><span>
</span><span id="line-1138"></span><span class="hs-comment">-- | Decode argument to '-main-is'</span><span>
</span><span id="line-1139"></span><span class="hs-comment">--</span><span>
</span><span id="line-1140"></span><span class="hs-comment">-- Returns 'Nothing' if argument set only the function name.</span><span>
</span><span id="line-1141"></span><span class="hs-comment">--</span><span>
</span><span id="line-1142"></span><span class="hs-comment">-- This code has been stolen/refactored from GHC's DynFlags.setMainIs</span><span>
</span><span id="line-1143"></span><span class="hs-comment">-- function. The logic here is deliberately imperfect as it is</span><span>
</span><span id="line-1144"></span><span class="hs-comment">-- intended to be bug-compatible with GHC's parser. See discussion in</span><span>
</span><span id="line-1145"></span><span class="hs-comment">-- https://github.com/haskell/cabal/pull/4539#discussion_r118981753.</span><span>
</span><span id="line-1146"></span><span class="annot"><a href="Distribution.Simple.GHC.html#decodeMainIsArg"><span class="hs-identifier hs-type">decodeMainIsArg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Distribution.ModuleName.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-1147"></span><span id="decodeMainIsArg"><span class="annot"><span class="annottext">decodeMainIsArg :: String -&gt; Maybe ModuleName
</span><a href="Distribution.Simple.GHC.html#decodeMainIsArg"><span class="hs-identifier hs-var hs-var">decodeMainIsArg</span></a></span></span><span> </span><span id="local-6989586621679739091"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739091"><span class="hs-identifier hs-var">arg</span></a></span></span><span>
</span><span id="line-1148"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Char -&gt; Bool) -&gt; Bool
</span><a href="#local-6989586621679739090"><span class="hs-identifier hs-var">headOf</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739089"><span class="hs-identifier hs-var">main_fn</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="../../base-4.16.3.0/src/GHC-Unicode.html#isLower"><span class="hs-identifier hs-var">isLower</span></a></span><span>
</span><span id="line-1149"></span><span>                        </span><span class="hs-comment">-- The arg looked like &quot;Foo.Bar.baz&quot;</span><span>
</span><span id="line-1150"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. IsString a =&gt; String -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-String.html#fromString"><span class="hs-identifier hs-var">ModuleName.fromString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739088"><span class="hs-identifier hs-var">main_mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1151"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Char -&gt; Bool) -&gt; Bool
</span><a href="#local-6989586621679739090"><span class="hs-identifier hs-var">headOf</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739091"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="../../base-4.16.3.0/src/GHC-Unicode.html#isUpper"><span class="hs-identifier hs-var">isUpper</span></a></span><span>  </span><span class="hs-comment">-- The arg looked like &quot;Foo&quot; or &quot;Foo.Bar&quot;</span><span>
</span><span id="line-1152"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. IsString a =&gt; String -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-String.html#fromString"><span class="hs-identifier hs-var">ModuleName.fromString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739091"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1153"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>           </span><span class="hs-comment">-- The arg looked like &quot;baz&quot;</span><span>
</span><span id="line-1154"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1155"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1156"></span><span>    </span><span class="annot"><a href="#local-6989586621679739090"><span class="hs-identifier hs-type">headOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1157"></span><span>    </span><span id="local-6989586621679739090"><span class="annot"><span class="annottext">headOf :: String -&gt; (Char -&gt; Bool) -&gt; Bool
</span><a href="#local-6989586621679739090"><span class="hs-identifier hs-var hs-var">headOf</span></a></span></span><span> </span><span id="local-6989586621679739086"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739086"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span id="local-6989586621679739085"><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679739085"><span class="hs-identifier hs-var">pred'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679739085"><span class="hs-identifier hs-var">pred'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; Maybe a
</span><a href="Distribution.Utils.Generic.html#safeHead"><span class="hs-identifier hs-var">safeHead</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739086"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1158"></span><span>
</span><span id="line-1159"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679739088"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739088"><span class="hs-identifier hs-var">main_mod</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679739089"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739089"><span class="hs-identifier hs-var">main_fn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Char -&gt; Bool) -&gt; (String, String)
</span><a href="#local-6989586621679739081"><span class="hs-identifier hs-var">splitLongestPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739091"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'.'</span></span><span class="hs-special">)</span><span>
</span><span id="line-1160"></span><span>
</span><span id="line-1161"></span><span>    </span><span class="annot"><a href="#local-6989586621679739081"><span class="hs-identifier hs-type">splitLongestPrefix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">,</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1162"></span><span>    </span><span id="local-6989586621679739081"><span class="annot"><span class="annottext">splitLongestPrefix :: String -&gt; (Char -&gt; Bool) -&gt; (String, String)
</span><a href="#local-6989586621679739081"><span class="hs-identifier hs-var hs-var">splitLongestPrefix</span></a></span></span><span> </span><span id="local-6989586621679739080"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739080"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span id="local-6989586621679739079"><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679739079"><span class="hs-identifier hs-var">pred'</span></a></span></span><span>
</span><span id="line-1163"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739078"><span class="hs-identifier hs-var">r_pre</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739080"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">,</span><span>           </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1164"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="Distribution.Utils.Generic.html#safeTail"><span class="hs-identifier hs-var">safeTail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739078"><span class="hs-identifier hs-var">r_pre</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739076"><span class="hs-identifier hs-var">r_suf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1165"></span><span>                           </span><span class="hs-comment">-- 'safeTail' drops the char satisfying 'pred'</span><span>
</span><span id="line-1166"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679739076"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739076"><span class="hs-identifier hs-var">r_suf</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679739078"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739078"><span class="hs-identifier hs-var">r_pre</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.3.0/src/GHC-List.html#break"><span class="hs-identifier hs-var">break</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679739079"><span class="hs-identifier hs-var">pred'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739080"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1167"></span><span>
</span><span id="line-1168"></span><span class="hs-comment">-- | A collection of:</span><span>
</span><span id="line-1169"></span><span class="hs-comment">--    * C input files</span><span>
</span><span id="line-1170"></span><span class="hs-comment">--    * C++ input files</span><span>
</span><span id="line-1171"></span><span class="hs-comment">--    * GHC input files</span><span>
</span><span id="line-1172"></span><span class="hs-comment">--    * GHC input modules</span><span>
</span><span id="line-1173"></span><span class="hs-comment">--</span><span>
</span><span id="line-1174"></span><span class="hs-comment">-- Used to correctly build and link sources.</span><span>
</span><span id="line-1175"></span><span class="hs-keyword">data</span><span> </span><span id="BuildSources"><span class="annot"><a href="Distribution.Simple.GHC.html#BuildSources"><span class="hs-identifier hs-var">BuildSources</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BuildSources"><span class="annot"><a href="Distribution.Simple.GHC.html#BuildSources"><span class="hs-identifier hs-var">BuildSources</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1176"></span><span>        </span><span id="cSourcesFiles"><span class="annot"><span class="annottext">BuildSources -&gt; [String]
</span><a href="Distribution.Simple.GHC.html#cSourcesFiles"><span class="hs-identifier hs-var hs-var">cSourcesFiles</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1177"></span><span>        </span><span id="cxxSourceFiles"><span class="annot"><span class="annottext">BuildSources -&gt; [String]
</span><a href="Distribution.Simple.GHC.html#cxxSourceFiles"><span class="hs-identifier hs-var hs-var">cxxSourceFiles</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1178"></span><span>        </span><span id="inputSourceFiles"><span class="annot"><span class="annottext">BuildSources -&gt; [String]
</span><a href="Distribution.Simple.GHC.html#inputSourceFiles"><span class="hs-identifier hs-var hs-var">inputSourceFiles</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1179"></span><span>        </span><span id="inputSourceModules"><span class="annot"><span class="annottext">BuildSources -&gt; [ModuleName]
</span><a href="Distribution.Simple.GHC.html#inputSourceModules"><span class="hs-identifier hs-var hs-var">inputSourceModules</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.ModuleName.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1180"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1181"></span><span>
</span><span id="line-1182"></span><span class="hs-comment">-- | Locate and return the 'BuildSources' required to build and link.</span><span>
</span><span id="line-1183"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuildSources"><span class="hs-identifier hs-type">gbuildSources</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-1184"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.CabalSpecVersion.html#CabalSpecVersion"><span class="hs-identifier hs-type">CabalSpecVersion</span></a></span><span>
</span><span id="line-1185"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1186"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildMode"><span class="hs-identifier hs-type">GBuildMode</span></a></span><span>
</span><span id="line-1187"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#BuildSources"><span class="hs-identifier hs-type">BuildSources</span></a></span><span>
</span><span id="line-1188"></span><span id="gbuildSources"><span class="annot"><span class="annottext">gbuildSources :: Verbosity
-&gt; CabalSpecVersion -&gt; String -&gt; GBuildMode -&gt; IO BuildSources
</span><a href="Distribution.Simple.GHC.html#gbuildSources"><span class="hs-identifier hs-var hs-var">gbuildSources</span></a></span></span><span> </span><span id="local-6989586621679739068"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739068"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739067"><span class="annot"><span class="annottext">CabalSpecVersion
</span><a href="#local-6989586621679739067"><span class="hs-identifier hs-var">specVer</span></a></span></span><span> </span><span id="local-6989586621679739066"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739066"><span class="hs-identifier hs-var">tmpDir</span></a></span></span><span> </span><span id="local-6989586621679739065"><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739065"><span class="hs-identifier hs-var">bm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1189"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739065"><span class="hs-identifier hs-var">bm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1190"></span><span>      </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildExe"><span class="hs-identifier hs-type">GBuildExe</span></a></span><span>  </span><span id="local-6989586621679739064"><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739064"><span class="hs-identifier hs-var">exe</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Executable -&gt; IO BuildSources
</span><a href="#local-6989586621679739063"><span class="hs-identifier hs-var">exeSources</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739064"><span class="hs-identifier hs-var">exe</span></a></span><span>
</span><span id="line-1191"></span><span>      </span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplExe"><span class="hs-identifier hs-type">GReplExe</span></a></span><span>   </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679739062"><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739062"><span class="hs-identifier hs-var">exe</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Executable -&gt; IO BuildSources
</span><a href="#local-6989586621679739063"><span class="hs-identifier hs-var">exeSources</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739062"><span class="hs-identifier hs-var">exe</span></a></span><span>
</span><span id="line-1192"></span><span>      </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildFLib"><span class="hs-identifier hs-type">GBuildFLib</span></a></span><span> </span><span id="local-6989586621679739061"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739061"><span class="hs-identifier hs-var">flib</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; BuildSources
</span><a href="#local-6989586621679739060"><span class="hs-identifier hs-var">flibSources</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739061"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1193"></span><span>      </span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplFLib"><span class="hs-identifier hs-type">GReplFLib</span></a></span><span>  </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679739059"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739059"><span class="hs-identifier hs-var">flib</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; BuildSources
</span><a href="#local-6989586621679739060"><span class="hs-identifier hs-var">flibSources</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739059"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1194"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1195"></span><span>    </span><span class="annot"><a href="#local-6989586621679739063"><span class="hs-identifier hs-type">exeSources</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.Executable.html#Executable"><span class="hs-identifier hs-type">Executable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#BuildSources"><span class="hs-identifier hs-type">BuildSources</span></a></span><span>
</span><span id="line-1196"></span><span>    </span><span id="local-6989586621679739063"><span class="annot"><span class="annottext">exeSources :: Executable -&gt; IO BuildSources
</span><a href="#local-6989586621679739063"><span class="hs-identifier hs-var hs-var">exeSources</span></a></span></span><span> </span><span id="local-6989586621679739058"><span class="annot"><span class="annottext">exe :: Executable
</span><a href="#local-6989586621679739058"><span class="hs-identifier hs-var">exe</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Distribution.Types.Executable.html#Executable"><span class="hs-identifier hs-type">Executable</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">buildInfo :: Executable -&gt; BuildInfo
</span><a href="Distribution.Types.Executable.html#buildInfo"><span class="hs-identifier hs-var">buildInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679739057"><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739057"><span class="hs-identifier hs-var">bnfo</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">modulePath :: Executable -&gt; String
</span><a href="Distribution.Types.Executable.html#modulePath"><span class="hs-identifier hs-var">modulePath</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679739055"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739055"><span class="hs-identifier hs-var">modPath</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1197"></span><span>      </span><span id="local-6989586621679739054"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739054"><span class="hs-identifier hs-var">main</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; [String] -&gt; String -&gt; IO String
</span><a href="Distribution.Simple.Utils.html#findFileEx"><span class="hs-identifier hs-var">findFileEx</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739068"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739066"><span class="hs-identifier hs-var">tmpDir</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall from to. SymbolicPath from to -&gt; String
</span><a href="Distribution.Utils.Path.html#getSymbolicPath"><span class="hs-identifier hs-var">getSymbolicPath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; [SymbolicPath PackageDir SourceDir]
</span><a href="Distribution.Types.BuildInfo.html#hsSourceDirs"><span class="hs-identifier hs-var">hsSourceDirs</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739057"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739055"><span class="hs-identifier hs-var">modPath</span></a></span><span>
</span><span id="line-1198"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739050"><span class="annot"><span class="annottext">mainModName :: ModuleName
</span><a href="#local-6989586621679739050"><span class="hs-identifier hs-var hs-var">mainModName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="Distribution.ModuleName.html#main"><span class="hs-identifier hs-var">ModuleName.main</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Executable -&gt; Maybe ModuleName
</span><a href="Distribution.Simple.GHC.html#exeMainModuleName"><span class="hs-identifier hs-var">exeMainModuleName</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739058"><span class="hs-identifier hs-var">exe</span></a></span><span>
</span><span id="line-1199"></span><span>          </span><span id="local-6989586621679739048"><span class="annot"><span class="annottext">otherModNames :: [ModuleName]
</span><a href="#local-6989586621679739048"><span class="hs-identifier hs-var hs-var">otherModNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Executable -&gt; [ModuleName]
</span><a href="Distribution.Types.Executable.html#exeModules"><span class="hs-identifier hs-var">exeModules</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739058"><span class="hs-identifier hs-var">exe</span></a></span><span>
</span><span id="line-1200"></span><span>
</span><span id="line-1201"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
</span><a href="#local-6989586621679739046"><span class="hs-identifier hs-var">isHaskell</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739054"><span class="hs-identifier hs-var">main</span></a></span><span>
</span><span id="line-1202"></span><span>        </span><span class="hs-keyword">then</span><span>
</span><span id="line-1203"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">CabalSpecVersion
</span><a href="#local-6989586621679739067"><span class="hs-identifier hs-var">specVer</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">CabalSpecVersion
</span><a href="Distribution.CabalSpecVersion.html#CabalSpecV2_0"><span class="hs-identifier hs-var">CabalSpecV2_0</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621679739050"><span class="hs-identifier hs-var">mainModName</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[ModuleName]
</span><a href="#local-6989586621679739048"><span class="hs-identifier hs-var">otherModNames</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1204"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1205"></span><span>             </span><span class="hs-comment">-- The cabal manual clearly states that `other-modules` is</span><span>
</span><span id="line-1206"></span><span>             </span><span class="hs-comment">-- intended for non-main modules.  However, there's at least one</span><span>
</span><span id="line-1207"></span><span>             </span><span class="hs-comment">-- important package on Hackage (happy-1.19.5) which</span><span>
</span><span id="line-1208"></span><span>             </span><span class="hs-comment">-- violates this. We workaround this here so that we don't</span><span>
</span><span id="line-1209"></span><span>             </span><span class="hs-comment">-- invoke GHC with e.g.  'ghc --make Main src/Main.hs' which</span><span>
</span><span id="line-1210"></span><span>             </span><span class="hs-comment">-- would result in GHC complaining about duplicate Main</span><span>
</span><span id="line-1211"></span><span>             </span><span class="hs-comment">-- modules.</span><span>
</span><span id="line-1212"></span><span>             </span><span class="hs-comment">--</span><span>
</span><span id="line-1213"></span><span>             </span><span class="hs-comment">-- Finally, we only enable this workaround for</span><span>
</span><span id="line-1214"></span><span>             </span><span class="hs-comment">-- specVersion &lt; 2, as 'cabal-version:&gt;=2.0' cabal files</span><span>
</span><span id="line-1215"></span><span>             </span><span class="hs-comment">-- have no excuse anymore to keep doing it wrong... ;-)</span><span>
</span><span id="line-1216"></span><span>             </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#warn"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739068"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Enabling workaround for Main module '&quot;</span></span><span>
</span><span id="line-1217"></span><span>                            </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; String
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621679739050"><span class="hs-identifier hs-var">mainModName</span></a></span><span>
</span><span id="line-1218"></span><span>                            </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;' listed in 'other-modules' illegally!&quot;</span></span><span>
</span><span id="line-1219"></span><span>
</span><span id="line-1220"></span><span>             </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#BuildSources"><span class="hs-identifier hs-type">BuildSources</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1221"></span><span>                        </span><span class="annot"><span class="annottext">cSourcesFiles :: [String]
</span><a href="Distribution.Simple.GHC.html#cSourcesFiles"><span class="hs-identifier hs-var">cSourcesFiles</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cSources"><span class="hs-identifier hs-var">cSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739057"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1222"></span><span>                        </span><span class="annot"><span class="annottext">cxxSourceFiles :: [String]
</span><a href="Distribution.Simple.GHC.html#cxxSourceFiles"><span class="hs-identifier hs-var">cxxSourceFiles</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cxxSources"><span class="hs-identifier hs-var">cxxSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739057"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1223"></span><span>                        </span><span class="annot"><span class="annottext">inputSourceFiles :: [String]
</span><a href="Distribution.Simple.GHC.html#inputSourceFiles"><span class="hs-identifier hs-var">inputSourceFiles</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739054"><span class="hs-identifier hs-var">main</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1224"></span><span>                        </span><span class="annot"><span class="annottext">inputSourceModules :: [ModuleName]
</span><a href="Distribution.Simple.GHC.html#inputSourceModules"><span class="hs-identifier hs-var">inputSourceModules</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621679739050"><span class="hs-identifier hs-var">mainModName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1225"></span><span>                                             </span><span class="annot"><span class="annottext">Executable -&gt; [ModuleName]
</span><a href="Distribution.Types.Executable.html#exeModules"><span class="hs-identifier hs-var">exeModules</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739058"><span class="hs-identifier hs-var">exe</span></a></span><span>
</span><span id="line-1226"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-1227"></span><span>
</span><span id="line-1228"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#BuildSources"><span class="hs-identifier hs-type">BuildSources</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1229"></span><span>                          </span><span class="annot"><span class="annottext">cSourcesFiles :: [String]
</span><a href="Distribution.Simple.GHC.html#cSourcesFiles"><span class="hs-identifier hs-var">cSourcesFiles</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cSources"><span class="hs-identifier hs-var">cSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739057"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1230"></span><span>                          </span><span class="annot"><span class="annottext">cxxSourceFiles :: [String]
</span><a href="Distribution.Simple.GHC.html#cxxSourceFiles"><span class="hs-identifier hs-var">cxxSourceFiles</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cxxSources"><span class="hs-identifier hs-var">cxxSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739057"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1231"></span><span>                          </span><span class="annot"><span class="annottext">inputSourceFiles :: [String]
</span><a href="Distribution.Simple.GHC.html#inputSourceFiles"><span class="hs-identifier hs-var">inputSourceFiles</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739054"><span class="hs-identifier hs-var">main</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1232"></span><span>                          </span><span class="annot"><span class="annottext">inputSourceModules :: [ModuleName]
</span><a href="Distribution.Simple.GHC.html#inputSourceModules"><span class="hs-identifier hs-var">inputSourceModules</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Executable -&gt; [ModuleName]
</span><a href="Distribution.Types.Executable.html#exeModules"><span class="hs-identifier hs-var">exeModules</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739058"><span class="hs-identifier hs-var">exe</span></a></span><span>
</span><span id="line-1233"></span><span>                      </span><span class="hs-special">}</span><span>
</span><span id="line-1234"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679739044"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739044"><span class="hs-identifier hs-var">csf</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679739043"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739043"><span class="hs-identifier hs-var">cxxsf</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1235"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
</span><a href="#local-6989586621679739042"><span class="hs-identifier hs-var">isCxx</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739054"><span class="hs-identifier hs-var">main</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span>       </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cSources"><span class="hs-identifier hs-var">cSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739057"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739054"><span class="hs-identifier hs-var">main</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cxxSources"><span class="hs-identifier hs-var">cxxSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739057"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1236"></span><span>                   </span><span class="hs-comment">-- if main is not a Haskell source</span><span>
</span><span id="line-1237"></span><span>                   </span><span class="hs-comment">-- and main is not a C++ source</span><span>
</span><span id="line-1238"></span><span>                   </span><span class="hs-comment">-- then we assume that it is a C source</span><span>
</span><span id="line-1239"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739054"><span class="hs-identifier hs-var">main</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cSources"><span class="hs-identifier hs-var">cSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739057"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">,</span><span>        </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cxxSources"><span class="hs-identifier hs-var">cxxSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739057"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1240"></span><span>
</span><span id="line-1241"></span><span>             </span><span class="hs-keyword">in</span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#BuildSources"><span class="hs-identifier hs-type">BuildSources</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1242"></span><span>                            </span><span class="annot"><span class="annottext">cSourcesFiles :: [String]
</span><a href="Distribution.Simple.GHC.html#cSourcesFiles"><span class="hs-identifier hs-var">cSourcesFiles</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739044"><span class="hs-identifier hs-var">csf</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1243"></span><span>                            </span><span class="annot"><span class="annottext">cxxSourceFiles :: [String]
</span><a href="Distribution.Simple.GHC.html#cxxSourceFiles"><span class="hs-identifier hs-var">cxxSourceFiles</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739043"><span class="hs-identifier hs-var">cxxsf</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1244"></span><span>                            </span><span class="annot"><span class="annottext">inputSourceFiles :: [String]
</span><a href="Distribution.Simple.GHC.html#inputSourceFiles"><span class="hs-identifier hs-var">inputSourceFiles</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1245"></span><span>                            </span><span class="annot"><span class="annottext">inputSourceModules :: [ModuleName]
</span><a href="Distribution.Simple.GHC.html#inputSourceModules"><span class="hs-identifier hs-var">inputSourceModules</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Executable -&gt; [ModuleName]
</span><a href="Distribution.Types.Executable.html#exeModules"><span class="hs-identifier hs-var">exeModules</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679739058"><span class="hs-identifier hs-var">exe</span></a></span><span>
</span><span id="line-1246"></span><span>                        </span><span class="hs-special">}</span><span>
</span><span id="line-1247"></span><span>
</span><span id="line-1248"></span><span>    </span><span class="annot"><a href="#local-6989586621679739060"><span class="hs-identifier hs-type">flibSources</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#BuildSources"><span class="hs-identifier hs-type">BuildSources</span></a></span><span>
</span><span id="line-1249"></span><span>    </span><span id="local-6989586621679739060"><span class="annot"><span class="annottext">flibSources :: ForeignLib -&gt; BuildSources
</span><a href="#local-6989586621679739060"><span class="hs-identifier hs-var hs-var">flibSources</span></a></span></span><span> </span><span id="local-6989586621679739041"><span class="annot"><span class="annottext">flib :: ForeignLib
</span><a href="#local-6989586621679739041"><span class="hs-identifier hs-var">flib</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">foreignLibBuildInfo :: ForeignLib -&gt; BuildInfo
</span><a href="Distribution.Types.ForeignLib.html#foreignLibBuildInfo"><span class="hs-identifier hs-var">foreignLibBuildInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679739039"><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739039"><span class="hs-identifier hs-var">bnfo</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1250"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#BuildSources"><span class="hs-identifier hs-type">BuildSources</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1251"></span><span>            </span><span class="annot"><span class="annottext">cSourcesFiles :: [String]
</span><a href="Distribution.Simple.GHC.html#cSourcesFiles"><span class="hs-identifier hs-var">cSourcesFiles</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cSources"><span class="hs-identifier hs-var">cSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739039"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1252"></span><span>            </span><span class="annot"><span class="annottext">cxxSourceFiles :: [String]
</span><a href="Distribution.Simple.GHC.html#cxxSourceFiles"><span class="hs-identifier hs-var">cxxSourceFiles</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cxxSources"><span class="hs-identifier hs-var">cxxSources</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739039"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1253"></span><span>            </span><span class="annot"><span class="annottext">inputSourceFiles :: [String]
</span><a href="Distribution.Simple.GHC.html#inputSourceFiles"><span class="hs-identifier hs-var">inputSourceFiles</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1254"></span><span>            </span><span class="annot"><span class="annottext">inputSourceModules :: [ModuleName]
</span><a href="Distribution.Simple.GHC.html#inputSourceModules"><span class="hs-identifier hs-var">inputSourceModules</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; [ModuleName]
</span><a href="Distribution.Types.ForeignLib.html#foreignLibModules"><span class="hs-identifier hs-var">foreignLibModules</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679739041"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1255"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1256"></span><span>
</span><span id="line-1257"></span><span>    </span><span class="annot"><a href="#local-6989586621679739046"><span class="hs-identifier hs-type">isHaskell</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1258"></span><span>    </span><span id="local-6989586621679739046"><span class="annot"><span class="annottext">isHaskell :: String -&gt; Bool
</span><a href="#local-6989586621679739046"><span class="hs-identifier hs-var hs-var">isHaskell</span></a></span></span><span> </span><span id="local-6989586621679739037"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739037"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#elem"><span class="hs-identifier hs-var">elem</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#takeExtension"><span class="hs-identifier hs-var">takeExtension</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739037"><span class="hs-identifier hs-var">fp</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.hs&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.lhs&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-1259"></span><span>
</span><span id="line-1260"></span><span>    </span><span class="annot"><a href="#local-6989586621679739042"><span class="hs-identifier hs-type">isCxx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1261"></span><span>    </span><span id="local-6989586621679739042"><span class="annot"><span class="annottext">isCxx :: String -&gt; Bool
</span><a href="#local-6989586621679739042"><span class="hs-identifier hs-var hs-var">isCxx</span></a></span></span><span> </span><span id="local-6989586621679739036"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739036"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#elem"><span class="hs-identifier hs-var">elem</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#takeExtension"><span class="hs-identifier hs-var">takeExtension</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739036"><span class="hs-identifier hs-var">fp</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.cpp&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.cxx&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.c++&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-1262"></span><span>
</span><span id="line-1263"></span><span class="hs-comment">-- | Generic build function. See comment for 'GBuildMode'.</span><span>
</span><span id="line-1264"></span><span class="annot"><a href="Distribution.Simple.GHC.html#gbuild"><span class="hs-identifier hs-type">gbuild</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Flag.html#Flag"><span class="hs-identifier hs-type">Cabal.Flag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-1265"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>
</span><span id="line-1266"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildMode"><span class="hs-identifier hs-type">GBuildMode</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1267"></span><span id="gbuild"><span class="annot"><span class="annottext">gbuild :: Verbosity
-&gt; Flag (Maybe Int)
-&gt; PackageDescription
-&gt; LocalBuildInfo
-&gt; GBuildMode
-&gt; ComponentLocalBuildInfo
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#gbuild"><span class="hs-identifier hs-var hs-var">gbuild</span></a></span></span><span> </span><span id="local-6989586621679739035"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739035"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679739034"><span class="annot"><span class="annottext">Flag (Maybe Int)
</span><a href="#local-6989586621679739034"><span class="hs-identifier hs-var">numJobs</span></a></span></span><span> </span><span id="local-6989586621679739033"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679739033"><span class="hs-identifier hs-var">pkg_descr</span></a></span></span><span> </span><span id="local-6989586621679739032"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span id="local-6989586621679739031"><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span></span><span> </span><span id="local-6989586621679739030"><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739030"><span class="hs-identifier hs-var">clbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1268"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679739029"><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739029"><span class="hs-identifier hs-var">ghcProg</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Program -&gt; ProgramDb -&gt; IO (ConfiguredProgram, ProgramDb)
</span><a href="Distribution.Simple.Program.Db.html#requireProgram"><span class="hs-identifier hs-var">requireProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739035"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ghcProgram"><span class="hs-identifier hs-var">ghcProgram</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProgramDb
</span><a href="Distribution.Types.LocalBuildInfo.html#withPrograms"><span class="hs-identifier hs-var">withPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1269"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739026"><span class="annot"><span class="annottext">replFlags :: [String]
</span><a href="#local-6989586621679739026"><span class="hs-identifier hs-var hs-var">replFlags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1270"></span><span>          </span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplExe"><span class="hs-identifier hs-type">GReplExe</span></a></span><span> </span><span id="local-6989586621679739025"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739025"><span class="hs-identifier hs-var">flags</span></a></span></span><span> </span><span class="annot"><span class="annottext">Executable
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739025"><span class="hs-identifier hs-var">flags</span></a></span><span>
</span><span id="line-1271"></span><span>          </span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplFLib"><span class="hs-identifier hs-type">GReplFLib</span></a></span><span> </span><span id="local-6989586621679739024"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739024"><span class="hs-identifier hs-var">flags</span></a></span></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739024"><span class="hs-identifier hs-var">flags</span></a></span><span>
</span><span id="line-1272"></span><span>          </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildExe"><span class="hs-identifier hs-type">GBuildExe</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1273"></span><span>          </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildFLib"><span class="hs-identifier hs-type">GBuildFLib</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1274"></span><span>      </span><span id="local-6989586621679739023"><span class="annot"><span class="annottext">comp :: Compiler
</span><a href="#local-6989586621679739023"><span class="hs-identifier hs-var hs-var">comp</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Compiler
</span><a href="Distribution.Types.LocalBuildInfo.html#compiler"><span class="hs-identifier hs-var">compiler</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1275"></span><span>      </span><span id="local-6989586621679739022"><span class="annot"><span class="annottext">platform :: Platform
</span><a href="#local-6989586621679739022"><span class="hs-identifier hs-var hs-var">platform</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1276"></span><span>      </span><span id="local-6989586621679739021"><span class="annot"><span class="annottext">implInfo :: GhcImplInfo
</span><a href="#local-6989586621679739021"><span class="hs-identifier hs-var hs-var">implInfo</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; GhcImplInfo
</span><a href="Distribution.Simple.GHC.ImplInfo.html#getImplInfo"><span class="hs-identifier hs-var">getImplInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739023"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-1277"></span><span>      </span><span id="local-6989586621679739020"><span class="annot"><span class="annottext">runGhcProg :: GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739020"><span class="hs-identifier hs-var hs-var">runGhcProg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; ConfiguredProgram -&gt; Compiler -&gt; Platform -&gt; GhcOptions -&gt; IO ()
</span><a href="Distribution.Simple.Program.GHC.html#runGHC"><span class="hs-identifier hs-var">runGHC</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739035"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679739029"><span class="hs-identifier hs-var">ghcProg</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739023"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679739022"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-1278"></span><span>
</span><span id="line-1279"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679739019"><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739019"><span class="hs-identifier hs-var">bnfo</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679739018"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739018"><span class="hs-identifier hs-var">threaded</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1280"></span><span>        </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildFLib"><span class="hs-identifier hs-type">GBuildFLib</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; (BuildInfo, Bool)
</span><a href="Distribution.Simple.GHC.html#popThreadedFlag"><span class="hs-identifier hs-var">popThreadedFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GBuildMode -&gt; BuildInfo
</span><a href="Distribution.Simple.GHC.html#gbuildInfo"><span class="hs-identifier hs-var">gbuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1281"></span><span>        </span><span class="annot"><span class="annottext">GBuildMode
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GBuildMode -&gt; BuildInfo
</span><a href="Distribution.Simple.GHC.html#gbuildInfo"><span class="hs-identifier hs-var">gbuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-1282"></span><span>
</span><span id="line-1283"></span><span>  </span><span class="hs-comment">-- the name that GHC really uses (e.g., with .exe on Windows for executables)</span><span>
</span><span id="line-1284"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739016"><span class="annot"><span class="annottext">targetName :: String
</span><a href="#local-6989586621679739016"><span class="hs-identifier hs-var hs-var">targetName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; GBuildMode -&gt; String
</span><a href="Distribution.Simple.GHC.html#gbuildTargetName"><span class="hs-identifier hs-var">gbuildTargetName</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span><span>
</span><span id="line-1285"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739015"><span class="annot"><span class="annottext">targetDir :: String
</span><a href="#local-6989586621679739015"><span class="hs-identifier hs-var hs-var">targetDir</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; String
</span><a href="Distribution.Types.LocalBuildInfo.html#buildDir"><span class="hs-identifier hs-var">buildDir</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GBuildMode -&gt; String
</span><a href="Distribution.Simple.GHC.html#gbuildName"><span class="hs-identifier hs-var">gbuildName</span></a></span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1286"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739013"><span class="annot"><span class="annottext">tmpDir :: String
</span><a href="#local-6989586621679739013"><span class="hs-identifier hs-var hs-var">tmpDir</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739015"><span class="hs-identifier hs-var">targetDir</span></a></span><span>    </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GBuildMode -&gt; String
</span><a href="Distribution.Simple.GHC.html#gbuildName"><span class="hs-identifier hs-var">gbuildName</span></a></span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-tmp&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1287"></span><span>  </span><span class="annot"><span class="annottext">Verbosity -&gt; Bool -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#createDirectoryIfMissingVerbose"><span class="hs-identifier hs-var">createDirectoryIfMissingVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739035"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739015"><span class="hs-identifier hs-var">targetDir</span></a></span><span>
</span><span id="line-1288"></span><span>  </span><span class="annot"><span class="annottext">Verbosity -&gt; Bool -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#createDirectoryIfMissingVerbose"><span class="hs-identifier hs-var">createDirectoryIfMissingVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739035"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739013"><span class="hs-identifier hs-var">tmpDir</span></a></span><span>
</span><span id="line-1289"></span><span>
</span><span id="line-1290"></span><span>  </span><span class="hs-comment">-- TODO: do we need to put hs-boot files into place for mutually recursive</span><span>
</span><span id="line-1291"></span><span>  </span><span class="hs-comment">-- modules?  FIX: what about exeName.hi-boot?</span><span>
</span><span id="line-1292"></span><span>
</span><span id="line-1293"></span><span>  </span><span class="hs-comment">-- Determine if program coverage should be enabled and if so, what</span><span>
</span><span id="line-1294"></span><span>  </span><span class="hs-comment">-- '-hpcdir' should be.</span><span>
</span><span id="line-1295"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739012"><span class="annot"><span class="annottext">isCoverageEnabled :: Bool
</span><a href="#local-6989586621679739012"><span class="hs-identifier hs-var hs-var">isCoverageEnabled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#exeCoverage"><span class="hs-identifier hs-var">exeCoverage</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1296"></span><span>      </span><span id="local-6989586621679739008"><span class="annot"><span class="annottext">distPref :: String
</span><a href="#local-6989586621679739008"><span class="hs-identifier hs-var hs-var">distPref</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigFlags -&gt; Flag String
</span><a href="Distribution.Simple.Setup.html#configDistPref"><span class="hs-identifier hs-var">configDistPref</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ConfigFlags
</span><a href="Distribution.Types.LocalBuildInfo.html#configFlags"><span class="hs-identifier hs-var">configFlags</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1297"></span><span>      </span><span id="local-6989586621679739005"><span class="annot"><span class="annottext">hpcdir :: Way -&gt; Flag String
</span><a href="#local-6989586621679739005"><span class="hs-identifier hs-var hs-var">hpcdir</span></a></span></span><span> </span><span id="local-6989586621679739004"><span class="annot"><span class="annottext">Way
</span><a href="#local-6989586621679739004"><span class="hs-identifier hs-var">way</span></a></span></span><span>
</span><span id="line-1298"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GBuildMode -&gt; Bool
</span><a href="Distribution.Simple.GHC.html#gbuildIsRepl"><span class="hs-identifier hs-var">gbuildIsRepl</span></a></span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>  </span><span class="hs-comment">-- HPC is not supported in ghci</span><span>
</span><span id="line-1299"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739012"><span class="hs-identifier hs-var">isCoverageEnabled</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Way -&gt; String -&gt; String
</span><a href="Distribution.Simple.Hpc.html#mixDir"><span class="hs-identifier hs-var">Hpc.mixDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739008"><span class="hs-identifier hs-var">distPref</span></a></span><span> </span><span class="annot"><span class="annottext">Way
</span><a href="#local-6989586621679739004"><span class="hs-identifier hs-var">way</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GBuildMode -&gt; String
</span><a href="Distribution.Simple.GHC.html#gbuildName"><span class="hs-identifier hs-var">gbuildName</span></a></span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1300"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1301"></span><span>
</span><span id="line-1302"></span><span>  </span><span id="local-6989586621679739003"><span class="annot"><span class="annottext">NubListR String
</span><a href="#local-6989586621679739003"><span class="hs-identifier hs-var">rpaths</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ComponentLocalBuildInfo -&gt; IO (NubListR String)
</span><a href="Distribution.Simple.GHC.html#getRPaths"><span class="hs-identifier hs-var">getRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739030"><span class="hs-identifier hs-var">clbi</span></a></span><span>
</span><span id="line-1303"></span><span>  </span><span id="local-6989586621679739002"><span class="annot"><span class="annottext">BuildSources
</span><a href="#local-6989586621679739002"><span class="hs-identifier hs-var">buildSources</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; CabalSpecVersion -&gt; String -&gt; GBuildMode -&gt; IO BuildSources
</span><a href="Distribution.Simple.GHC.html#gbuildSources"><span class="hs-identifier hs-var">gbuildSources</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739035"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PackageDescription -&gt; CabalSpecVersion
</span><a href="Distribution.Types.PackageDescription.html#specVersion"><span class="hs-identifier hs-var">specVersion</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679739033"><span class="hs-identifier hs-var">pkg_descr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739013"><span class="hs-identifier hs-var">tmpDir</span></a></span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span><span>
</span><span id="line-1304"></span><span>
</span><span id="line-1305"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679739000"><span class="annot"><span class="annottext">cSrcs :: [String]
</span><a href="#local-6989586621679739000"><span class="hs-identifier hs-var hs-var">cSrcs</span></a></span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildSources -&gt; [String]
</span><a href="Distribution.Simple.GHC.html#cSourcesFiles"><span class="hs-identifier hs-var">cSourcesFiles</span></a></span><span> </span><span class="annot"><span class="annottext">BuildSources
</span><a href="#local-6989586621679739002"><span class="hs-identifier hs-var">buildSources</span></a></span><span>
</span><span id="line-1306"></span><span>      </span><span id="local-6989586621679738999"><span class="annot"><span class="annottext">cxxSrcs :: [String]
</span><a href="#local-6989586621679738999"><span class="hs-identifier hs-var hs-var">cxxSrcs</span></a></span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildSources -&gt; [String]
</span><a href="Distribution.Simple.GHC.html#cxxSourceFiles"><span class="hs-identifier hs-var">cxxSourceFiles</span></a></span><span> </span><span class="annot"><span class="annottext">BuildSources
</span><a href="#local-6989586621679739002"><span class="hs-identifier hs-var">buildSources</span></a></span><span>
</span><span id="line-1307"></span><span>      </span><span id="local-6989586621679738998"><span class="annot"><span class="annottext">inputFiles :: [String]
</span><a href="#local-6989586621679738998"><span class="hs-identifier hs-var hs-var">inputFiles</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildSources -&gt; [String]
</span><a href="Distribution.Simple.GHC.html#inputSourceFiles"><span class="hs-identifier hs-var">inputSourceFiles</span></a></span><span> </span><span class="annot"><span class="annottext">BuildSources
</span><a href="#local-6989586621679739002"><span class="hs-identifier hs-var">buildSources</span></a></span><span>
</span><span id="line-1308"></span><span>      </span><span id="local-6989586621679738997"><span class="annot"><span class="annottext">inputModules :: [ModuleName]
</span><a href="#local-6989586621679738997"><span class="hs-identifier hs-var hs-var">inputModules</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildSources -&gt; [ModuleName]
</span><a href="Distribution.Simple.GHC.html#inputSourceModules"><span class="hs-identifier hs-var">inputSourceModules</span></a></span><span> </span><span class="annot"><span class="annottext">BuildSources
</span><a href="#local-6989586621679739002"><span class="hs-identifier hs-var">buildSources</span></a></span><span>
</span><span id="line-1309"></span><span>      </span><span id="local-6989586621679738996"><span class="annot"><span class="annottext">isGhcDynamic :: Bool
</span><a href="#local-6989586621679738996"><span class="hs-identifier hs-var hs-var">isGhcDynamic</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.html#isDynamic"><span class="hs-identifier hs-var">isDynamic</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739023"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-1310"></span><span>      </span><span id="local-6989586621679738995"><span class="annot"><span class="annottext">dynamicTooSupported :: Bool
</span><a href="#local-6989586621679738995"><span class="hs-identifier hs-var hs-var">dynamicTooSupported</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.html#supportsDynamicToo"><span class="hs-identifier hs-var">supportsDynamicToo</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739023"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-1311"></span><span>      </span><span id="local-6989586621679738994"><span class="annot"><span class="annottext">cLikeObjs :: [String]
</span><a href="#local-6989586621679738994"><span class="hs-identifier hs-var hs-var">cLikeObjs</span></a></span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#replaceExtension"><span class="hs-operator hs-var">`replaceExtension`</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="Distribution.Simple.BuildPaths.html#objExtension"><span class="hs-identifier hs-var">objExtension</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739000"><span class="hs-identifier hs-var">cSrcs</span></a></span><span>
</span><span id="line-1312"></span><span>      </span><span id="local-6989586621679738993"><span class="annot"><span class="annottext">cxxObjs :: [String]
</span><a href="#local-6989586621679738993"><span class="hs-identifier hs-var hs-var">cxxObjs</span></a></span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#replaceExtension"><span class="hs-operator hs-var">`replaceExtension`</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="Distribution.Simple.BuildPaths.html#objExtension"><span class="hs-identifier hs-var">objExtension</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738999"><span class="hs-identifier hs-var">cxxSrcs</span></a></span><span>
</span><span id="line-1313"></span><span>      </span><span id="local-6989586621679738992"><span class="annot"><span class="annottext">needDynamic :: Bool
</span><a href="#local-6989586621679738992"><span class="hs-identifier hs-var hs-var">needDynamic</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; GBuildMode -&gt; Bool
</span><a href="Distribution.Simple.GHC.html#gbuildNeedDynamic"><span class="hs-identifier hs-var">gbuildNeedDynamic</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span><span>
</span><span id="line-1314"></span><span>      </span><span id="local-6989586621679738991"><span class="annot"><span class="annottext">needProfiling :: Bool
</span><a href="#local-6989586621679738991"><span class="hs-identifier hs-var hs-var">needProfiling</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfExe"><span class="hs-identifier hs-var">withProfExe</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1315"></span><span>
</span><span id="line-1316"></span><span>  </span><span class="hs-comment">-- build executables</span><span>
</span><span id="line-1317"></span><span>      </span><span id="local-6989586621679738984"><span class="annot"><span class="annottext">baseOpts :: GhcOptions
</span><a href="#local-6989586621679738984"><span class="hs-identifier hs-var hs-var">baseOpts</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Verbosity
-&gt; LocalBuildInfo
-&gt; BuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; GhcOptions
</span><a href="Distribution.Simple.GHC.html#componentGhcOptions"><span class="hs-identifier hs-var">componentGhcOptions</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739035"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739019"><span class="hs-identifier hs-var">bnfo</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739030"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739013"><span class="hs-identifier hs-var">tmpDir</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1318"></span><span>                    </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1319"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptMode :: Flag GhcMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptMode"><span class="hs-identifier hs-var">ghcOptMode</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcModeMake"><span class="hs-identifier hs-var">GhcModeMake</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1320"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptInputFiles :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptInputFiles"><span class="hs-identifier hs-var">ghcOptInputFiles</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738998"><span class="hs-identifier hs-var">inputFiles</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1321"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptInputModules :: NubListR ModuleName
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptInputModules"><span class="hs-identifier hs-var">ghcOptInputModules</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">[ModuleName]
</span><a href="#local-6989586621679738997"><span class="hs-identifier hs-var">inputModules</span></a></span><span>
</span><span id="line-1322"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-1323"></span><span>      </span><span id="local-6989586621679738981"><span class="annot"><span class="annottext">staticOpts :: GhcOptions
</span><a href="#local-6989586621679738981"><span class="hs-identifier hs-var hs-var">staticOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738984"><span class="hs-identifier hs-var">baseOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1324"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptDynLinkMode :: Flag GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynLinkMode"><span class="hs-identifier hs-var">ghcOptDynLinkMode</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcStaticOnly"><span class="hs-identifier hs-var">GhcStaticOnly</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1325"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptHPCDir :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHPCDir"><span class="hs-identifier hs-var">ghcOptHPCDir</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Way -&gt; Flag String
</span><a href="#local-6989586621679739005"><span class="hs-identifier hs-var">hpcdir</span></a></span><span> </span><span class="annot"><span class="annottext">Way
</span><a href="Distribution.Simple.Hpc.html#Vanilla"><span class="hs-identifier hs-var">Hpc.Vanilla</span></a></span><span>
</span><span id="line-1326"></span><span>                   </span><span class="hs-special">}</span><span>
</span><span id="line-1327"></span><span>      </span><span id="local-6989586621679738977"><span class="annot"><span class="annottext">profOpts :: GhcOptions
</span><a href="#local-6989586621679738977"><span class="hs-identifier hs-var hs-var">profOpts</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738984"><span class="hs-identifier hs-var">baseOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1328"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptProfilingMode :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptProfilingMode"><span class="hs-identifier hs-var">ghcOptProfilingMode</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-1329"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptProfilingAuto :: Flag GhcProfAuto
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptProfilingAuto"><span class="hs-identifier hs-var">ghcOptProfilingAuto</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ProfDetailLevel -&gt; Flag GhcProfAuto
</span><a href="Distribution.Simple.GHC.Internal.html#profDetailLevelFlag"><span class="hs-identifier hs-var">Internal.profDetailLevelFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1330"></span><span>                                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProfDetailLevel
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfExeDetail"><span class="hs-identifier hs-var">withProfExeDetail</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1331"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptHiSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHiSuffix"><span class="hs-identifier hs-var">ghcOptHiSuffix</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p_hi&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1332"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p_o&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1333"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptExtra :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptExtra"><span class="hs-identifier hs-var">ghcOptExtra</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerFlavor -&gt; BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#hcProfOptions"><span class="hs-identifier hs-var">hcProfOptions</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739019"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1334"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptHPCDir :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHPCDir"><span class="hs-identifier hs-var">ghcOptHPCDir</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Way -&gt; Flag String
</span><a href="#local-6989586621679739005"><span class="hs-identifier hs-var">hpcdir</span></a></span><span> </span><span class="annot"><span class="annottext">Way
</span><a href="Distribution.Simple.Hpc.html#Prof"><span class="hs-identifier hs-var">Hpc.Prof</span></a></span><span>
</span><span id="line-1335"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-1336"></span><span>      </span><span id="local-6989586621679738973"><span class="annot"><span class="annottext">dynOpts :: GhcOptions
</span><a href="#local-6989586621679738973"><span class="hs-identifier hs-var hs-var">dynOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738984"><span class="hs-identifier hs-var">baseOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1337"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptDynLinkMode :: Flag GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynLinkMode"><span class="hs-identifier hs-var">ghcOptDynLinkMode</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcDynamicOnly"><span class="hs-identifier hs-var">GhcDynamicOnly</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1338"></span><span>                      </span><span class="hs-comment">-- TODO: Does it hurt to set -fPIC for executables?</span><span>
</span><span id="line-1339"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-1340"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptHiSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHiSuffix"><span class="hs-identifier hs-var">ghcOptHiSuffix</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_hi&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1341"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_o&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1342"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptExtra :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptExtra"><span class="hs-identifier hs-var">ghcOptExtra</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerFlavor -&gt; BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#hcSharedOptions"><span class="hs-identifier hs-var">hcSharedOptions</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739019"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1343"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptHPCDir :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHPCDir"><span class="hs-identifier hs-var">ghcOptHPCDir</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Way -&gt; Flag String
</span><a href="#local-6989586621679739005"><span class="hs-identifier hs-var">hpcdir</span></a></span><span> </span><span class="annot"><span class="annottext">Way
</span><a href="Distribution.Simple.Hpc.html#Dyn"><span class="hs-identifier hs-var">Hpc.Dyn</span></a></span><span>
</span><span id="line-1344"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-1345"></span><span>      </span><span id="local-6989586621679738970"><span class="annot"><span class="annottext">dynTooOpts :: GhcOptions
</span><a href="#local-6989586621679738970"><span class="hs-identifier hs-var hs-var">dynTooOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738981"><span class="hs-identifier hs-var">staticOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1346"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptDynLinkMode :: Flag GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynLinkMode"><span class="hs-identifier hs-var">ghcOptDynLinkMode</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcStaticAndDynamic"><span class="hs-identifier hs-var">GhcStaticAndDynamic</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1347"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptDynHiSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynHiSuffix"><span class="hs-identifier hs-var">ghcOptDynHiSuffix</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_hi&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1348"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptDynObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynObjSuffix"><span class="hs-identifier hs-var">ghcOptDynObjSuffix</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_o&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1349"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptHPCDir :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHPCDir"><span class="hs-identifier hs-var">ghcOptHPCDir</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Way -&gt; Flag String
</span><a href="#local-6989586621679739005"><span class="hs-identifier hs-var">hpcdir</span></a></span><span> </span><span class="annot"><span class="annottext">Way
</span><a href="Distribution.Simple.Hpc.html#Dyn"><span class="hs-identifier hs-var">Hpc.Dyn</span></a></span><span>
</span><span id="line-1350"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-1351"></span><span>      </span><span id="local-6989586621679738963"><span class="annot"><span class="annottext">linkerOpts :: GhcOptions
</span><a href="#local-6989586621679738963"><span class="hs-identifier hs-var hs-var">linkerOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1352"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptLinkOptions :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkOptions"><span class="hs-identifier hs-var">ghcOptLinkOptions</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#ldOptions"><span class="hs-identifier hs-var">PD.ldOptions</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739019"><span class="hs-identifier hs-var">bnfo</span></a></span><span>
</span><span id="line-1353"></span><span>                                                </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-static&quot;</span></span><span>
</span><span id="line-1354"></span><span>                                                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withFullyStaticExe"><span class="hs-identifier hs-var">withFullyStaticExe</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1355"></span><span>                                                </span><span class="hs-comment">-- Pass extra `ld-options` given</span><span>
</span><span id="line-1356"></span><span>                                                </span><span class="hs-comment">-- through to GHC's linker.</span><span>
</span><span id="line-1357"></span><span>                                                </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram -&gt; [String]
</span><a href="Distribution.Simple.Program.Types.html#programOverrideArgs"><span class="hs-identifier hs-var">programOverrideArgs</span></a></span><span>
</span><span id="line-1358"></span><span>                                                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Program -&gt; ProgramDb -&gt; Maybe ConfiguredProgram
</span><a href="Distribution.Simple.Program.Db.html#lookupProgram"><span class="hs-identifier hs-var">lookupProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ldProgram"><span class="hs-identifier hs-var">ldProgram</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProgramDb
</span><a href="Distribution.Types.LocalBuildInfo.html#withPrograms"><span class="hs-identifier hs-var">withPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1359"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptLinkLibs :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkLibs"><span class="hs-identifier hs-var">ghcOptLinkLibs</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraLibs"><span class="hs-identifier hs-var">extraLibs</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739019"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1360"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptLinkLibPath :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkLibPath"><span class="hs-identifier hs-var">ghcOptLinkLibPath</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraLibDirs"><span class="hs-identifier hs-var">extraLibDirs</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739019"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1361"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptLinkFrameworks :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkFrameworks"><span class="hs-identifier hs-var">ghcOptLinkFrameworks</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1362"></span><span>                                                </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#frameworks"><span class="hs-identifier hs-var">PD.frameworks</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739019"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1363"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptLinkFrameworkDirs :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkFrameworkDirs"><span class="hs-identifier hs-var">ghcOptLinkFrameworkDirs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1364"></span><span>                                                </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraFrameworkDirs"><span class="hs-identifier hs-var">PD.extraFrameworkDirs</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739019"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1365"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptInputFiles :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptInputFiles"><span class="hs-identifier hs-var">ghcOptInputFiles</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span>
</span><span id="line-1366"></span><span>                                             </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739013"><span class="hs-identifier hs-var">tmpDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738962"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679738962"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738962"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738994"><span class="hs-identifier hs-var">cLikeObjs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738993"><span class="hs-identifier hs-var">cxxObjs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1367"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-1368"></span><span>      </span><span id="local-6989586621679738958"><span class="annot"><span class="annottext">dynLinkerOpts :: GhcOptions
</span><a href="#local-6989586621679738958"><span class="hs-identifier hs-var hs-var">dynLinkerOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1369"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptRPaths :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptRPaths"><span class="hs-identifier hs-var">ghcOptRPaths</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NubListR String
</span><a href="#local-6989586621679739003"><span class="hs-identifier hs-var">rpaths</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1370"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptInputFiles :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptInputFiles"><span class="hs-identifier hs-var">ghcOptInputFiles</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span>
</span><span id="line-1371"></span><span>                                             </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739013"><span class="hs-identifier hs-var">tmpDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738957"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679738957"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738957"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738994"><span class="hs-identifier hs-var">cLikeObjs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738993"><span class="hs-identifier hs-var">cxxObjs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1372"></span><span>                   </span><span class="hs-special">}</span><span>
</span><span id="line-1373"></span><span>      </span><span id="local-6989586621679738952"><span class="annot"><span class="annottext">replOpts :: GhcOptions
</span><a href="#local-6989586621679738952"><span class="hs-identifier hs-var hs-var">replOpts</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738984"><span class="hs-identifier hs-var">baseOpts</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1374"></span><span>                    </span><span class="annot"><span class="annottext">ghcOptExtra :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptExtra"><span class="hs-identifier hs-var">ghcOptExtra</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String]
</span><a href="Distribution.Simple.GHC.Internal.html#filterGhciFlags"><span class="hs-identifier hs-var">Internal.filterGhciFlags</span></a></span><span>
</span><span id="line-1375"></span><span>                                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptExtra"><span class="hs-identifier hs-var">ghcOptExtra</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738984"><span class="hs-identifier hs-var">baseOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1376"></span><span>                                             </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739026"><span class="hs-identifier hs-var">replFlags</span></a></span><span>
</span><span id="line-1377"></span><span>                   </span><span class="hs-special">}</span><span>
</span><span id="line-1378"></span><span>                   </span><span class="hs-comment">-- For a normal compile we do separate invocations of ghc for</span><span>
</span><span id="line-1379"></span><span>                   </span><span class="hs-comment">-- compiling as for linking. But for repl we have to do just</span><span>
</span><span id="line-1380"></span><span>                   </span><span class="hs-comment">-- the one invocation, so that one has to include all the</span><span>
</span><span id="line-1381"></span><span>                   </span><span class="hs-comment">-- linker stuff too, like -l flags and any .o files from C</span><span>
</span><span id="line-1382"></span><span>                   </span><span class="hs-comment">-- files etc.</span><span>
</span><span id="line-1383"></span><span>                   </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738963"><span class="hs-identifier hs-var">linkerOpts</span></a></span><span>
</span><span id="line-1384"></span><span>                   </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1385"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptMode :: Flag GhcMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptMode"><span class="hs-identifier hs-var">ghcOptMode</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcModeInteractive"><span class="hs-identifier hs-var">GhcModeInteractive</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1386"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptOptimisation :: Flag GhcOptimisation
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptOptimisation"><span class="hs-identifier hs-var">ghcOptOptimisation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptimisation
</span><a href="Distribution.Simple.Program.GHC.html#GhcNoOptimisation"><span class="hs-identifier hs-var">GhcNoOptimisation</span></a></span><span>
</span><span id="line-1387"></span><span>                     </span><span class="hs-special">}</span><span>
</span><span id="line-1388"></span><span>      </span><span id="local-6989586621679738951"><span class="annot"><span class="annottext">commonOpts :: GhcOptions
</span><a href="#local-6989586621679738951"><span class="hs-identifier hs-var hs-var">commonOpts</span></a></span></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738991"><span class="hs-identifier hs-var">needProfiling</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738977"><span class="hs-identifier hs-var">profOpts</span></a></span><span>
</span><span id="line-1389"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738992"><span class="hs-identifier hs-var">needDynamic</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738973"><span class="hs-identifier hs-var">dynOpts</span></a></span><span>
</span><span id="line-1390"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738981"><span class="hs-identifier hs-var">staticOpts</span></a></span><span>
</span><span id="line-1391"></span><span>      </span><span id="local-6989586621679738950"><span class="annot"><span class="annottext">compileOpts :: GhcOptions
</span><a href="#local-6989586621679738950"><span class="hs-identifier hs-var hs-var">compileOpts</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738949"><span class="hs-identifier hs-var">useDynToo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738970"><span class="hs-identifier hs-var">dynTooOpts</span></a></span><span>
</span><span id="line-1392"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738951"><span class="hs-identifier hs-var">commonOpts</span></a></span><span>
</span><span id="line-1393"></span><span>      </span><span id="local-6989586621679738948"><span class="annot"><span class="annottext">withStaticExe :: Bool
</span><a href="#local-6989586621679738948"><span class="hs-identifier hs-var hs-var">withStaticExe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738991"><span class="hs-identifier hs-var">needProfiling</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738992"><span class="hs-identifier hs-var">needDynamic</span></a></span><span>
</span><span id="line-1394"></span><span>
</span><span id="line-1395"></span><span>      </span><span class="hs-comment">-- For building exe's that use TH with -prof or -dynamic we actually have</span><span>
</span><span id="line-1396"></span><span>      </span><span class="hs-comment">-- to build twice, once without -prof/-dynamic and then again with</span><span>
</span><span id="line-1397"></span><span>      </span><span class="hs-comment">-- -prof/-dynamic. This is because the code that TH needs to run at</span><span>
</span><span id="line-1398"></span><span>      </span><span class="hs-comment">-- compile time needs to be the vanilla ABI so it can be loaded up and run</span><span>
</span><span id="line-1399"></span><span>      </span><span class="hs-comment">-- by the compiler.</span><span>
</span><span id="line-1400"></span><span>      </span><span class="hs-comment">-- With dynamic-by-default GHC the TH object files loaded at compile-time</span><span>
</span><span id="line-1401"></span><span>      </span><span class="hs-comment">-- need to be .dyn_o instead of .o.</span><span>
</span><span id="line-1402"></span><span>      </span><span id="local-6989586621679738947"><span class="annot"><span class="annottext">doingTH :: Bool
</span><a href="#local-6989586621679738947"><span class="hs-identifier hs-var hs-var">doingTH</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; Bool
</span><a href="Distribution.Types.BuildInfo.html#usesTemplateHaskellOrQQ"><span class="hs-identifier hs-var">usesTemplateHaskellOrQQ</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739019"><span class="hs-identifier hs-var">bnfo</span></a></span><span>
</span><span id="line-1403"></span><span>      </span><span class="hs-comment">-- Should we use -dynamic-too instead of compiling twice?</span><span>
</span><span id="line-1404"></span><span>      </span><span id="local-6989586621679738949"><span class="annot"><span class="annottext">useDynToo :: Bool
</span><a href="#local-6989586621679738949"><span class="hs-identifier hs-var hs-var">useDynToo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738995"><span class="hs-identifier hs-var">dynamicTooSupported</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738996"><span class="hs-identifier hs-var">isGhcDynamic</span></a></span><span>
</span><span id="line-1405"></span><span>                  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738947"><span class="hs-identifier hs-var">doingTH</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738948"><span class="hs-identifier hs-var">withStaticExe</span></a></span><span>
</span><span id="line-1406"></span><span>                  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CompilerFlavor -&gt; BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#hcSharedOptions"><span class="hs-identifier hs-var">hcSharedOptions</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739019"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1407"></span><span>      </span><span id="local-6989586621679738945"><span class="annot"><span class="annottext">compileTHOpts :: GhcOptions
</span><a href="#local-6989586621679738945"><span class="hs-identifier hs-var hs-var">compileTHOpts</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738996"><span class="hs-identifier hs-var">isGhcDynamic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738973"><span class="hs-identifier hs-var">dynOpts</span></a></span><span>
</span><span id="line-1408"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738981"><span class="hs-identifier hs-var">staticOpts</span></a></span><span>
</span><span id="line-1409"></span><span>      </span><span id="local-6989586621679738944"><span class="annot"><span class="annottext">compileForTH :: Bool
</span><a href="#local-6989586621679738944"><span class="hs-identifier hs-var hs-var">compileForTH</span></a></span></span><span>
</span><span id="line-1410"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GBuildMode -&gt; Bool
</span><a href="Distribution.Simple.GHC.html#gbuildIsRepl"><span class="hs-identifier hs-var">gbuildIsRepl</span></a></span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1411"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738949"><span class="hs-identifier hs-var">useDynToo</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1412"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738996"><span class="hs-identifier hs-var">isGhcDynamic</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738947"><span class="hs-identifier hs-var">doingTH</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738991"><span class="hs-identifier hs-var">needProfiling</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738948"><span class="hs-identifier hs-var">withStaticExe</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1413"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738947"><span class="hs-identifier hs-var">doingTH</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738991"><span class="hs-identifier hs-var">needProfiling</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738992"><span class="hs-identifier hs-var">needDynamic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1414"></span><span>
</span><span id="line-1415"></span><span>   </span><span class="hs-comment">-- Build static/dynamic object files for TH, if needed.</span><span>
</span><span id="line-1416"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738944"><span class="hs-identifier hs-var">compileForTH</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1417"></span><span>    </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739020"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738945"><span class="hs-identifier hs-var">compileTHOpts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ghcOptNoLink :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptNoLink"><span class="hs-identifier hs-var">ghcOptNoLink</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1418"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ghcOptNumJobs :: Flag (Maybe Int)
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptNumJobs"><span class="hs-identifier hs-var">ghcOptNumJobs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Flag (Maybe Int)
</span><a href="#local-6989586621679739034"><span class="hs-identifier hs-var">numJobs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1419"></span><span>
</span><span id="line-1420"></span><span>  </span><span class="hs-comment">-- Do not try to build anything if there are no input files.</span><span>
</span><span id="line-1421"></span><span>  </span><span class="hs-comment">-- This can happen if the cabal file ends up with only cSrcs</span><span>
</span><span id="line-1422"></span><span>  </span><span class="hs-comment">-- but no Haskell modules.</span><span>
</span><span id="line-1423"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738998"><span class="hs-identifier hs-var">inputFiles</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[ModuleName]
</span><a href="#local-6989586621679738997"><span class="hs-identifier hs-var">inputModules</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1424"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">GBuildMode -&gt; Bool
</span><a href="Distribution.Simple.GHC.html#gbuildIsRepl"><span class="hs-identifier hs-var">gbuildIsRepl</span></a></span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1425"></span><span>    </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739020"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738950"><span class="hs-identifier hs-var">compileOpts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ghcOptNoLink :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptNoLink"><span class="hs-identifier hs-var">ghcOptNoLink</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1426"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ghcOptNumJobs :: Flag (Maybe Int)
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptNumJobs"><span class="hs-identifier hs-var">ghcOptNumJobs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Flag (Maybe Int)
</span><a href="#local-6989586621679739034"><span class="hs-identifier hs-var">numJobs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1427"></span><span>
</span><span id="line-1428"></span><span>  </span><span class="hs-comment">-- build any C++ sources</span><span>
</span><span id="line-1429"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738999"><span class="hs-identifier hs-var">cxxSrcs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1430"></span><span>   </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739035"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Building C++ Sources...&quot;</span></span><span>
</span><span id="line-1431"></span><span>   </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#sequence_"><span class="hs-identifier hs-var">sequence_</span></a></span><span>
</span><span id="line-1432"></span><span>     </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679738942"><span class="annot"><span class="annottext">baseCxxOpts :: GhcOptions
</span><a href="#local-6989586621679738942"><span class="hs-identifier hs-var hs-var">baseCxxOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; GhcImplInfo
-&gt; LocalBuildInfo
-&gt; BuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; String
-&gt; GhcOptions
</span><a href="Distribution.Simple.GHC.Internal.html#componentCxxGhcOptions"><span class="hs-identifier hs-var">Internal.componentCxxGhcOptions</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739035"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679739021"><span class="hs-identifier hs-var">implInfo</span></a></span><span>
</span><span id="line-1433"></span><span>                               </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739019"><span class="hs-identifier hs-var">bnfo</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739030"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739013"><span class="hs-identifier hs-var">tmpDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738941"><span class="hs-identifier hs-var">filename</span></a></span><span>
</span><span id="line-1434"></span><span>              </span><span id="local-6989586621679738940"><span class="annot"><span class="annottext">vanillaCxxOpts :: GhcOptions
</span><a href="#local-6989586621679738940"><span class="hs-identifier hs-var hs-var">vanillaCxxOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738996"><span class="hs-identifier hs-var">isGhcDynamic</span></a></span><span>
</span><span id="line-1435"></span><span>                                </span><span class="hs-comment">-- Dynamic GHC requires C++ sources to be built</span><span>
</span><span id="line-1436"></span><span>                                </span><span class="hs-comment">-- with -fPIC for REPL to work. See #2207.</span><span>
</span><span id="line-1437"></span><span>                               </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738942"><span class="hs-identifier hs-var">baseCxxOpts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1438"></span><span>                               </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738942"><span class="hs-identifier hs-var">baseCxxOpts</span></a></span><span>
</span><span id="line-1439"></span><span>              </span><span id="local-6989586621679738937"><span class="annot"><span class="annottext">profCxxOpts :: GhcOptions
</span><a href="#local-6989586621679738937"><span class="hs-identifier hs-var hs-var">profCxxOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738940"><span class="hs-identifier hs-var">vanillaCxxOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1440"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptProfilingMode :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptProfilingMode"><span class="hs-identifier hs-var">ghcOptProfilingMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1441"></span><span>                               </span><span class="hs-special">}</span><span>
</span><span id="line-1442"></span><span>              </span><span id="local-6989586621679738934"><span class="annot"><span class="annottext">sharedCxxOpts :: GhcOptions
</span><a href="#local-6989586621679738934"><span class="hs-identifier hs-var hs-var">sharedCxxOpts</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738940"><span class="hs-identifier hs-var">vanillaCxxOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1443"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-1444"></span><span>                                 </span><span class="annot"><span class="annottext">ghcOptDynLinkMode :: Flag GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynLinkMode"><span class="hs-identifier hs-var">ghcOptDynLinkMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcDynamicOnly"><span class="hs-identifier hs-var">GhcDynamicOnly</span></a></span><span>
</span><span id="line-1445"></span><span>                               </span><span class="hs-special">}</span><span>
</span><span id="line-1446"></span><span>              </span><span id="local-6989586621679738933"><span class="annot"><span class="annottext">opts :: GhcOptions
</span><a href="#local-6989586621679738933"><span class="hs-identifier hs-var hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738991"><span class="hs-identifier hs-var">needProfiling</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738937"><span class="hs-identifier hs-var">profCxxOpts</span></a></span><span>
</span><span id="line-1447"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738992"><span class="hs-identifier hs-var">needDynamic</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738934"><span class="hs-identifier hs-var">sharedCxxOpts</span></a></span><span>
</span><span id="line-1448"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738940"><span class="hs-identifier hs-var">vanillaCxxOpts</span></a></span><span>
</span><span id="line-1449"></span><span>              </span><span class="hs-comment">-- TODO: Placing all Haskell, C, &amp; C++ objects in a single directory</span><span>
</span><span id="line-1450"></span><span>              </span><span class="hs-comment">--       Has the potential for file collisions. In general we would</span><span>
</span><span id="line-1451"></span><span>              </span><span class="hs-comment">--       consider this a user error. However, we should strive to</span><span>
</span><span id="line-1452"></span><span>              </span><span class="hs-comment">--       add a warning if this occurs.</span><span>
</span><span id="line-1453"></span><span>              </span><span id="local-6989586621679738930"><span class="annot"><span class="annottext">odir :: String
</span><a href="#local-6989586621679738930"><span class="hs-identifier hs-var hs-var">odir</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjDir"><span class="hs-identifier hs-var">ghcOptObjDir</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738933"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1454"></span><span>          </span><span class="annot"><span class="annottext">Verbosity -&gt; Bool -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#createDirectoryIfMissingVerbose"><span class="hs-identifier hs-var">createDirectoryIfMissingVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739035"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738930"><span class="hs-identifier hs-var">odir</span></a></span><span>
</span><span id="line-1455"></span><span>          </span><span id="local-6989586621679738929"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738929"><span class="hs-identifier hs-var">needsRecomp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; GhcOptions -&gt; IO Bool
</span><a href="Distribution.Simple.GHC.html#checkNeedsRecompilation"><span class="hs-identifier hs-var">checkNeedsRecompilation</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738941"><span class="hs-identifier hs-var">filename</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738933"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-1456"></span><span>          </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738929"><span class="hs-identifier hs-var">needsRecomp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1457"></span><span>            </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739020"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738933"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-1458"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679738941"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738941"><span class="hs-identifier hs-var">filename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738999"><span class="hs-identifier hs-var">cxxSrcs</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1459"></span><span>
</span><span id="line-1460"></span><span>  </span><span class="hs-comment">-- build any C sources</span><span>
</span><span id="line-1461"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739000"><span class="hs-identifier hs-var">cSrcs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1462"></span><span>   </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739035"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Building C Sources...&quot;</span></span><span>
</span><span id="line-1463"></span><span>   </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#sequence_"><span class="hs-identifier hs-var">sequence_</span></a></span><span>
</span><span id="line-1464"></span><span>     </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679738928"><span class="annot"><span class="annottext">baseCcOpts :: GhcOptions
</span><a href="#local-6989586621679738928"><span class="hs-identifier hs-var hs-var">baseCcOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; GhcImplInfo
-&gt; LocalBuildInfo
-&gt; BuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; String
-&gt; GhcOptions
</span><a href="Distribution.Simple.GHC.Internal.html#componentCcGhcOptions"><span class="hs-identifier hs-var">Internal.componentCcGhcOptions</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739035"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679739021"><span class="hs-identifier hs-var">implInfo</span></a></span><span>
</span><span id="line-1465"></span><span>                              </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679739019"><span class="hs-identifier hs-var">bnfo</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679739030"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739013"><span class="hs-identifier hs-var">tmpDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738927"><span class="hs-identifier hs-var">filename</span></a></span><span>
</span><span id="line-1466"></span><span>              </span><span id="local-6989586621679738926"><span class="annot"><span class="annottext">vanillaCcOpts :: GhcOptions
</span><a href="#local-6989586621679738926"><span class="hs-identifier hs-var hs-var">vanillaCcOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738996"><span class="hs-identifier hs-var">isGhcDynamic</span></a></span><span>
</span><span id="line-1467"></span><span>                              </span><span class="hs-comment">-- Dynamic GHC requires C sources to be built</span><span>
</span><span id="line-1468"></span><span>                              </span><span class="hs-comment">-- with -fPIC for REPL to work. See #2207.</span><span>
</span><span id="line-1469"></span><span>                              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738928"><span class="hs-identifier hs-var">baseCcOpts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1470"></span><span>                              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738928"><span class="hs-identifier hs-var">baseCcOpts</span></a></span><span>
</span><span id="line-1471"></span><span>              </span><span id="local-6989586621679738923"><span class="annot"><span class="annottext">profCcOpts :: GhcOptions
</span><a href="#local-6989586621679738923"><span class="hs-identifier hs-var hs-var">profCcOpts</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738926"><span class="hs-identifier hs-var">vanillaCcOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1472"></span><span>                                </span><span class="annot"><span class="annottext">ghcOptProfilingMode :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptProfilingMode"><span class="hs-identifier hs-var">ghcOptProfilingMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1473"></span><span>                              </span><span class="hs-special">}</span><span>
</span><span id="line-1474"></span><span>              </span><span id="local-6989586621679738920"><span class="annot"><span class="annottext">sharedCcOpts :: GhcOptions
</span><a href="#local-6989586621679738920"><span class="hs-identifier hs-var hs-var">sharedCcOpts</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738926"><span class="hs-identifier hs-var">vanillaCcOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1475"></span><span>                                </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-1476"></span><span>                                </span><span class="annot"><span class="annottext">ghcOptDynLinkMode :: Flag GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynLinkMode"><span class="hs-identifier hs-var">ghcOptDynLinkMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcDynamicOnly"><span class="hs-identifier hs-var">GhcDynamicOnly</span></a></span><span>
</span><span id="line-1477"></span><span>                              </span><span class="hs-special">}</span><span>
</span><span id="line-1478"></span><span>              </span><span id="local-6989586621679738919"><span class="annot"><span class="annottext">opts :: GhcOptions
</span><a href="#local-6989586621679738919"><span class="hs-identifier hs-var hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738991"><span class="hs-identifier hs-var">needProfiling</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738923"><span class="hs-identifier hs-var">profCcOpts</span></a></span><span>
</span><span id="line-1479"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738992"><span class="hs-identifier hs-var">needDynamic</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738920"><span class="hs-identifier hs-var">sharedCcOpts</span></a></span><span>
</span><span id="line-1480"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738926"><span class="hs-identifier hs-var">vanillaCcOpts</span></a></span><span>
</span><span id="line-1481"></span><span>              </span><span id="local-6989586621679738916"><span class="annot"><span class="annottext">odir :: String
</span><a href="#local-6989586621679738916"><span class="hs-identifier hs-var hs-var">odir</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjDir"><span class="hs-identifier hs-var">ghcOptObjDir</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738919"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1482"></span><span>          </span><span class="annot"><span class="annottext">Verbosity -&gt; Bool -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#createDirectoryIfMissingVerbose"><span class="hs-identifier hs-var">createDirectoryIfMissingVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739035"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738916"><span class="hs-identifier hs-var">odir</span></a></span><span>
</span><span id="line-1483"></span><span>          </span><span id="local-6989586621679738915"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738915"><span class="hs-identifier hs-var">needsRecomp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; GhcOptions -&gt; IO Bool
</span><a href="Distribution.Simple.GHC.html#checkNeedsRecompilation"><span class="hs-identifier hs-var">checkNeedsRecompilation</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738927"><span class="hs-identifier hs-var">filename</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738919"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-1484"></span><span>          </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738915"><span class="hs-identifier hs-var">needsRecomp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1485"></span><span>            </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739020"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738919"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-1486"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679738927"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738927"><span class="hs-identifier hs-var">filename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679739000"><span class="hs-identifier hs-var">cSrcs</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1487"></span><span>
</span><span id="line-1488"></span><span>  </span><span class="hs-comment">-- TODO: problem here is we need the .c files built first, so we can load them</span><span>
</span><span id="line-1489"></span><span>  </span><span class="hs-comment">-- with ghci, but .c files can depend on .h files generated by ghc by ffi</span><span>
</span><span id="line-1490"></span><span>  </span><span class="hs-comment">-- exports.</span><span>
</span><span id="line-1491"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1492"></span><span>    </span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplExe"><span class="hs-identifier hs-type">GReplExe</span></a></span><span>  </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Executable
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739020"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738952"><span class="hs-identifier hs-var">replOpts</span></a></span><span>
</span><span id="line-1493"></span><span>    </span><span class="annot"><a href="Distribution.Simple.GHC.html#GReplFLib"><span class="hs-identifier hs-type">GReplFLib</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739020"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738952"><span class="hs-identifier hs-var">replOpts</span></a></span><span>
</span><span id="line-1494"></span><span>    </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildExe"><span class="hs-identifier hs-type">GBuildExe</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1495"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679738908"><span class="annot"><span class="annottext">linkOpts :: GhcOptions
</span><a href="#local-6989586621679738908"><span class="hs-identifier hs-var hs-var">linkOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738951"><span class="hs-identifier hs-var">commonOpts</span></a></span><span>
</span><span id="line-1496"></span><span>                   </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738963"><span class="hs-identifier hs-var">linkerOpts</span></a></span><span>
</span><span id="line-1497"></span><span>                   </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1498"></span><span>                      </span><span class="annot"><span class="annottext">ghcOptLinkNoHsMain :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkNoHsMain"><span class="hs-identifier hs-var">ghcOptLinkNoHsMain</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738998"><span class="hs-identifier hs-var">inputFiles</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1499"></span><span>                     </span><span class="hs-special">}</span><span>
</span><span id="line-1500"></span><span>                   </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withDynExe"><span class="hs-identifier hs-var">withDynExe</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738958"><span class="hs-identifier hs-var">dynLinkerOpts</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1501"></span><span>
</span><span id="line-1502"></span><span>      </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739035"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Linking...&quot;</span></span><span>
</span><span id="line-1503"></span><span>      </span><span class="hs-comment">-- Work around old GHCs not relinking in this</span><span>
</span><span id="line-1504"></span><span>      </span><span class="hs-comment">-- situation, see #3294</span><span>
</span><span id="line-1505"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679738906"><span class="annot"><span class="annottext">target :: String
</span><a href="#local-6989586621679738906"><span class="hs-identifier hs-var hs-var">target</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739015"><span class="hs-identifier hs-var">targetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739016"><span class="hs-identifier hs-var">targetName</span></a></span><span>
</span><span id="line-1506"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; Version
</span><a href="Distribution.Simple.Compiler.html#compilerVersion"><span class="hs-identifier hs-var">compilerVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679739023"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Version
</span><a href="Distribution.Types.Version.html#mkVersion"><span class="hs-identifier hs-var">mkVersion</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1507"></span><span>        </span><span id="local-6989586621679738905"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738905"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Bool
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#doesFileExist"><span class="hs-identifier hs-var">doesFileExist</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738906"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-1508"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738905"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#removeFile"><span class="hs-identifier hs-var">removeFile</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738906"><span class="hs-identifier hs-var">target</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1509"></span><span>      </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739020"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738908"><span class="hs-identifier hs-var">linkOpts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ghcOptOutputFile :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptOutputFile"><span class="hs-identifier hs-var">ghcOptOutputFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738906"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1510"></span><span>    </span><span class="annot"><a href="Distribution.Simple.GHC.html#GBuildFLib"><span class="hs-identifier hs-type">GBuildFLib</span></a></span><span> </span><span id="local-6989586621679738904"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679738904"><span class="hs-identifier hs-var">flib</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1511"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679738903"><span class="annot"><span class="annottext">rtsInfo :: RtsInfo
</span><a href="#local-6989586621679738903"><span class="hs-identifier hs-var hs-var">rtsInfo</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; RtsInfo
</span><a href="Distribution.Simple.GHC.html#extractRtsInfo"><span class="hs-identifier hs-var">extractRtsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1512"></span><span>          </span><span id="local-6989586621679738901"><span class="annot"><span class="annottext">rtsOptLinkLibs :: [String]
</span><a href="#local-6989586621679738901"><span class="hs-identifier hs-var hs-var">rtsOptLinkLibs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-1513"></span><span>              </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738992"><span class="hs-identifier hs-var">needDynamic</span></a></span><span>
</span><span id="line-1514"></span><span>                  </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739018"><span class="hs-identifier hs-var">threaded</span></a></span><span>
</span><span id="line-1515"></span><span>                            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">DynamicRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#dynRtsThreadedLib"><span class="hs-identifier hs-var">dynRtsThreadedLib</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RtsInfo -&gt; DynamicRtsInfo
</span><a href="Distribution.Simple.GHC.html#rtsDynamicInfo"><span class="hs-identifier hs-var">rtsDynamicInfo</span></a></span><span> </span><span class="annot"><span class="annottext">RtsInfo
</span><a href="#local-6989586621679738903"><span class="hs-identifier hs-var">rtsInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1516"></span><span>                            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">DynamicRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#dynRtsVanillaLib"><span class="hs-identifier hs-var">dynRtsVanillaLib</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RtsInfo -&gt; DynamicRtsInfo
</span><a href="Distribution.Simple.GHC.html#rtsDynamicInfo"><span class="hs-identifier hs-var">rtsDynamicInfo</span></a></span><span> </span><span class="annot"><span class="annottext">RtsInfo
</span><a href="#local-6989586621679738903"><span class="hs-identifier hs-var">rtsInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1517"></span><span>                  </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679739018"><span class="hs-identifier hs-var">threaded</span></a></span><span>
</span><span id="line-1518"></span><span>                           </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">StaticRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#statRtsThreadedLib"><span class="hs-identifier hs-var">statRtsThreadedLib</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RtsInfo -&gt; StaticRtsInfo
</span><a href="Distribution.Simple.GHC.html#rtsStaticInfo"><span class="hs-identifier hs-var">rtsStaticInfo</span></a></span><span> </span><span class="annot"><span class="annottext">RtsInfo
</span><a href="#local-6989586621679738903"><span class="hs-identifier hs-var">rtsInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1519"></span><span>                           </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">StaticRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#statRtsVanillaLib"><span class="hs-identifier hs-var">statRtsVanillaLib</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RtsInfo -&gt; StaticRtsInfo
</span><a href="Distribution.Simple.GHC.html#rtsStaticInfo"><span class="hs-identifier hs-var">rtsStaticInfo</span></a></span><span> </span><span class="annot"><span class="annottext">RtsInfo
</span><a href="#local-6989586621679738903"><span class="hs-identifier hs-var">rtsInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1520"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-1521"></span><span>          </span><span id="local-6989586621679738884"><span class="annot"><span class="annottext">linkOpts :: GhcOptions
</span><a href="#local-6989586621679738884"><span class="hs-identifier hs-var hs-var">linkOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; ForeignLibType
</span><a href="Distribution.Types.ForeignLib.html#foreignLibType"><span class="hs-identifier hs-var">foreignLibType</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679738904"><span class="hs-identifier hs-var">flib</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1522"></span><span>            </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibNativeShared"><span class="hs-identifier hs-var">ForeignLibNativeShared</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1523"></span><span>                        </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738951"><span class="hs-identifier hs-var">commonOpts</span></a></span><span>
</span><span id="line-1524"></span><span>              </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738963"><span class="hs-identifier hs-var">linkerOpts</span></a></span><span>
</span><span id="line-1525"></span><span>              </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738958"><span class="hs-identifier hs-var">dynLinkerOpts</span></a></span><span>
</span><span id="line-1526"></span><span>              </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1527"></span><span>                 </span><span class="annot"><span class="annottext">ghcOptLinkNoHsMain :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkNoHsMain"><span class="hs-identifier hs-var">ghcOptLinkNoHsMain</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-1528"></span><span>                 </span><span class="annot"><span class="annottext">ghcOptShared :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptShared"><span class="hs-identifier hs-var">ghcOptShared</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-1529"></span><span>                 </span><span class="annot"><span class="annottext">ghcOptLinkLibs :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkLibs"><span class="hs-identifier hs-var">ghcOptLinkLibs</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738901"><span class="hs-identifier hs-var">rtsOptLinkLibs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1530"></span><span>                 </span><span class="annot"><span class="annottext">ghcOptLinkLibPath :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkLibPath"><span class="hs-identifier hs-var">ghcOptLinkLibPath</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RtsInfo -&gt; [String]
</span><a href="Distribution.Simple.GHC.html#rtsLibPaths"><span class="hs-identifier hs-var">rtsLibPaths</span></a></span><span> </span><span class="annot"><span class="annottext">RtsInfo
</span><a href="#local-6989586621679738903"><span class="hs-identifier hs-var">rtsInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1531"></span><span>                 </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-1532"></span><span>                 </span><span class="annot"><span class="annottext">ghcOptLinkModDefFiles :: NubListR String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkModDefFiles"><span class="hs-identifier hs-var">ghcOptLinkModDefFiles</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GBuildMode -&gt; [String]
</span><a href="Distribution.Simple.GHC.html#gbuildModDefFiles"><span class="hs-identifier hs-var">gbuildModDefFiles</span></a></span><span> </span><span class="annot"><span class="annottext">GBuildMode
</span><a href="#local-6989586621679739031"><span class="hs-identifier hs-var">bm</span></a></span><span>
</span><span id="line-1533"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-1534"></span><span>              </span><span class="hs-comment">-- See Note [RPATH]</span><span>
</span><span id="line-1535"></span><span>              </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; LocalBuildInfo -&gt; a -&gt; a
</span><a href="Distribution.Simple.GHC.html#ifNeedsRPathWorkaround"><span class="hs-identifier hs-var">ifNeedsRPathWorkaround</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1536"></span><span>                  </span><span class="annot"><span class="annottext">ghcOptLinkOptions :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkOptions"><span class="hs-identifier hs-var">ghcOptLinkOptions</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-Wl,--no-as-needed&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-1537"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ghcOptLinkLibs :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptLinkLibs"><span class="hs-identifier hs-var">ghcOptLinkLibs</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ffi&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-1538"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-1539"></span><span>            </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibNativeStatic"><span class="hs-identifier hs-var">ForeignLibNativeStatic</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1540"></span><span>              </span><span class="hs-comment">-- this should be caught by buildFLib</span><span>
</span><span id="line-1541"></span><span>              </span><span class="hs-comment">-- (and if we do implement this, we probably don't even want to call</span><span>
</span><span id="line-1542"></span><span>              </span><span class="hs-comment">-- ghc here, but rather Ar.createArLibArchive or something)</span><span>
</span><span id="line-1543"></span><span>              </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="Distribution.PackageDescription.Utils.html#cabalBug"><span class="hs-identifier hs-var">cabalBug</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;static libraries not yet implemented&quot;</span></span><span>
</span><span id="line-1544"></span><span>            </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="Distribution.Types.ForeignLibType.html#ForeignLibTypeUnknown"><span class="hs-identifier hs-var">ForeignLibTypeUnknown</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1545"></span><span>              </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="Distribution.PackageDescription.Utils.html#cabalBug"><span class="hs-identifier hs-var">cabalBug</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unknown foreign lib type&quot;</span></span><span>
</span><span id="line-1546"></span><span>      </span><span class="hs-comment">-- We build under a (potentially) different filename to set a</span><span>
</span><span id="line-1547"></span><span>      </span><span class="hs-comment">-- soname on supported platforms.  See also the note for</span><span>
</span><span id="line-1548"></span><span>      </span><span class="hs-comment">-- @flibBuildName@.</span><span>
</span><span id="line-1549"></span><span>      </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#info"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679739035"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Linking...&quot;</span></span><span>
</span><span id="line-1550"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679738880"><span class="annot"><span class="annottext">buildName :: String
</span><a href="#local-6989586621679738880"><span class="hs-identifier hs-var hs-var">buildName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ForeignLib -&gt; String
</span><a href="Distribution.Simple.GHC.html#flibBuildName"><span class="hs-identifier hs-var">flibBuildName</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679739032"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679738904"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1551"></span><span>      </span><span class="annot"><span class="annottext">GhcOptions -&gt; IO ()
</span><a href="#local-6989586621679739020"><span class="hs-identifier hs-var">runGhcProg</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738884"><span class="hs-identifier hs-var">linkOpts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ghcOptOutputFile :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptOutputFile"><span class="hs-identifier hs-var">ghcOptOutputFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739015"><span class="hs-identifier hs-var">targetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738880"><span class="hs-identifier hs-var">buildName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1552"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; String -&gt; IO ()
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#renameFile"><span class="hs-identifier hs-var">renameFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739015"><span class="hs-identifier hs-var">targetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738880"><span class="hs-identifier hs-var">buildName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739015"><span class="hs-identifier hs-var">targetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679739016"><span class="hs-identifier hs-var">targetName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1553"></span><span>
</span><span id="line-1554"></span><span class="hs-comment">{-
Note [RPATH]
~~~~~~~~~~~~

Suppose that the dynamic library depends on `base`, but not (directly) on
`integer-gmp` (which, however, is a dependency of `base`). We will link the
library as

    gcc ... -lHSbase-4.7.0.2-ghc7.8.4 -lHSinteger-gmp-0.5.1.0-ghc7.8.4 ...

However, on systems (like Ubuntu) where the linker gets called with `-as-needed`
by default, the linker will notice that `integer-gmp` isn't actually a direct
dependency and hence omit the link.

Then when we attempt to link a C program against this dynamic library, the
_static_ linker will attempt to verify that all symbols can be resolved.  The
dynamic library itself does not require any symbols from `integer-gmp`, but
`base` does. In order to verify that the symbols used by `base` can be
resolved, the static linker needs to be able to _find_ integer-gmp.

Finding the `base` dependency is simple, because the dynamic elf header
(`readelf -d`) for the library that we have created looks something like

    (NEEDED) Shared library: [libHSbase-4.7.0.2-ghc7.8.4.so]
    (RPATH)  Library rpath: [/path/to/base-4.7.0.2:...]

However, when it comes to resolving the dependency on `integer-gmp`, it needs
to look at the dynamic header for `base`. On modern ghc (7.8 and higher) this
looks something like

    (NEEDED) Shared library: [libHSinteger-gmp-0.5.1.0-ghc7.8.4.so]
    (RPATH)  Library rpath: [$ORIGIN/../integer-gmp-0.5.1.0:...]

This specifies the location of `integer-gmp` _in terms of_ the location of base
(using the `$ORIGIN`) variable. But here's the crux: when the static linker
attempts to verify that all symbols can be resolved, [**IT DOES NOT RESOLVE
`$ORIGIN`**](http://stackoverflow.com/questions/6323603/ld-using-rpath-origin-inside-a-shared-library-recursive).
As a consequence, it will not be able to resolve the symbols and report the
missing symbols as errors, _even though the dynamic linker **would** be able to
resolve these symbols_. We can tell the static linker not to report these
errors by using `--unresolved-symbols=ignore-all` and all will be fine when we
run the program ([(indeed, this is what the gold linker
does)](https://sourceware.org/ml/binutils/2013-05/msg00038.html), but it makes
the resulting library more difficult to use.

Instead what we can do is make sure that the generated dynamic library has
explicit top-level dependencies on these libraries. This means that the static
linker knows where to find them, and when we have transitive dependencies on
the same libraries the linker will only load them once, so we avoid needing to
look at the `RPATH` of our dependencies. We can do this by passing
`--no-as-needed` to the linker, so that it doesn't omit any libraries.

Note that on older ghc (7.6 and before) the Haskell libraries don't have an
RPATH set at all, which makes it even more important that we make these
top-level dependencies.

Finally, we have to explicitly link against `libffi` for the same reason. For
newer ghc this _happens_ to be unnecessary on many systems because `libffi` is
a library which is not specific to GHC, and when the static linker verifies
that all symbols can be resolved it will find the `libffi` that is globally
installed (completely independent from ghc). Of course, this may well be the
_wrong_ version of `libffi`, but it's quite possible that symbol resolution
happens to work. This is of course the wrong approach, which is why we link
explicitly against `libffi` so that we will find the _right_ version of
`libffi`.
-}</span><span>
</span><span id="line-1620"></span><span>
</span><span id="line-1621"></span><span class="hs-comment">-- | Do we need the RPATH workaround?</span><span>
</span><span id="line-1622"></span><span class="hs-comment">--</span><span>
</span><span id="line-1623"></span><span class="hs-comment">-- See Note [RPATH].</span><span>
</span><span id="line-1624"></span><span id="local-6989586621679740204"><span class="annot"><a href="Distribution.Simple.GHC.html#ifNeedsRPathWorkaround"><span class="hs-identifier hs-type">ifNeedsRPathWorkaround</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679740204"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679740204"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679740204"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1625"></span><span id="ifNeedsRPathWorkaround"><span class="annot"><span class="annottext">ifNeedsRPathWorkaround :: forall a. Monoid a =&gt; LocalBuildInfo -&gt; a -&gt; a
</span><a href="Distribution.Simple.GHC.html#ifNeedsRPathWorkaround"><span class="hs-identifier hs-var hs-var">ifNeedsRPathWorkaround</span></a></span></span><span> </span><span id="local-6989586621679738877"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738877"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span id="local-6989586621679738876"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679738876"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1626"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738877"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1627"></span><span>    </span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Linux"><span class="hs-identifier hs-var">Linux</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679738876"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1628"></span><span>    </span><span id="local-6989586621679738875"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679738875"><span class="hs-identifier hs-var">_otherwise</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1629"></span><span>
</span><span id="line-1630"></span><span class="hs-keyword">data</span><span> </span><span id="DynamicRtsInfo"><span class="annot"><a href="Distribution.Simple.GHC.html#DynamicRtsInfo"><span class="hs-identifier hs-var">DynamicRtsInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DynamicRtsInfo"><span class="annot"><a href="Distribution.Simple.GHC.html#DynamicRtsInfo"><span class="hs-identifier hs-var">DynamicRtsInfo</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1631"></span><span>    </span><span id="dynRtsVanillaLib"><span class="annot"><span class="annottext">DynamicRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#dynRtsVanillaLib"><span class="hs-identifier hs-var hs-var">dynRtsVanillaLib</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1632"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="dynRtsThreadedLib"><span class="annot"><span class="annottext">DynamicRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#dynRtsThreadedLib"><span class="hs-identifier hs-var hs-var">dynRtsThreadedLib</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1633"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="dynRtsDebugLib"><span class="annot"><span class="annottext">DynamicRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#dynRtsDebugLib"><span class="hs-identifier hs-var hs-var">dynRtsDebugLib</span></a></span></span><span>            </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1634"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="dynRtsEventlogLib"><span class="annot"><span class="annottext">DynamicRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#dynRtsEventlogLib"><span class="hs-identifier hs-var hs-var">dynRtsEventlogLib</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1635"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="dynRtsThreadedDebugLib"><span class="annot"><span class="annottext">DynamicRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#dynRtsThreadedDebugLib"><span class="hs-identifier hs-var hs-var">dynRtsThreadedDebugLib</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1636"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="dynRtsThreadedEventlogLib"><span class="annot"><span class="annottext">DynamicRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#dynRtsThreadedEventlogLib"><span class="hs-identifier hs-var hs-var">dynRtsThreadedEventlogLib</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1637"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1638"></span><span>
</span><span id="line-1639"></span><span class="hs-keyword">data</span><span> </span><span id="StaticRtsInfo"><span class="annot"><a href="Distribution.Simple.GHC.html#StaticRtsInfo"><span class="hs-identifier hs-var">StaticRtsInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="StaticRtsInfo"><span class="annot"><a href="Distribution.Simple.GHC.html#StaticRtsInfo"><span class="hs-identifier hs-var">StaticRtsInfo</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1640"></span><span>    </span><span id="statRtsVanillaLib"><span class="annot"><span class="annottext">StaticRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#statRtsVanillaLib"><span class="hs-identifier hs-var hs-var">statRtsVanillaLib</span></a></span></span><span>           </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1641"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="statRtsThreadedLib"><span class="annot"><span class="annottext">StaticRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#statRtsThreadedLib"><span class="hs-identifier hs-var hs-var">statRtsThreadedLib</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1642"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="statRtsDebugLib"><span class="annot"><span class="annottext">StaticRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#statRtsDebugLib"><span class="hs-identifier hs-var hs-var">statRtsDebugLib</span></a></span></span><span>             </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1643"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="statRtsEventlogLib"><span class="annot"><span class="annottext">StaticRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#statRtsEventlogLib"><span class="hs-identifier hs-var hs-var">statRtsEventlogLib</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1644"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="statRtsThreadedDebugLib"><span class="annot"><span class="annottext">StaticRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#statRtsThreadedDebugLib"><span class="hs-identifier hs-var hs-var">statRtsThreadedDebugLib</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1645"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="statRtsThreadedEventlogLib"><span class="annot"><span class="annottext">StaticRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#statRtsThreadedEventlogLib"><span class="hs-identifier hs-var hs-var">statRtsThreadedEventlogLib</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1646"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="statRtsProfilingLib"><span class="annot"><span class="annottext">StaticRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#statRtsProfilingLib"><span class="hs-identifier hs-var hs-var">statRtsProfilingLib</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1647"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="statRtsThreadedProfilingLib"><span class="annot"><span class="annottext">StaticRtsInfo -&gt; String
</span><a href="Distribution.Simple.GHC.html#statRtsThreadedProfilingLib"><span class="hs-identifier hs-var hs-var">statRtsThreadedProfilingLib</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1648"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1649"></span><span>
</span><span id="line-1650"></span><span class="hs-keyword">data</span><span> </span><span id="RtsInfo"><span class="annot"><a href="Distribution.Simple.GHC.html#RtsInfo"><span class="hs-identifier hs-var">RtsInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RtsInfo"><span class="annot"><a href="Distribution.Simple.GHC.html#RtsInfo"><span class="hs-identifier hs-var">RtsInfo</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1651"></span><span>    </span><span id="rtsDynamicInfo"><span class="annot"><span class="annottext">RtsInfo -&gt; DynamicRtsInfo
</span><a href="Distribution.Simple.GHC.html#rtsDynamicInfo"><span class="hs-identifier hs-var hs-var">rtsDynamicInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#DynamicRtsInfo"><span class="hs-identifier hs-type">DynamicRtsInfo</span></a></span><span>
</span><span id="line-1652"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="rtsStaticInfo"><span class="annot"><span class="annottext">RtsInfo -&gt; StaticRtsInfo
</span><a href="Distribution.Simple.GHC.html#rtsStaticInfo"><span class="hs-identifier hs-var hs-var">rtsStaticInfo</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#StaticRtsInfo"><span class="hs-identifier hs-type">StaticRtsInfo</span></a></span><span>
</span><span id="line-1653"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="rtsLibPaths"><span class="annot"><span class="annottext">RtsInfo -&gt; [String]
</span><a href="Distribution.Simple.GHC.html#rtsLibPaths"><span class="hs-identifier hs-var hs-var">rtsLibPaths</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1654"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1655"></span><span>
</span><span id="line-1656"></span><span class="hs-comment">-- | Extract (and compute) information about the RTS library</span><span>
</span><span id="line-1657"></span><span class="hs-comment">--</span><span>
</span><span id="line-1658"></span><span class="hs-comment">-- TODO: This hardcodes the name as @HSrts-ghc&lt;version&gt;@. I don't know if we can</span><span>
</span><span id="line-1659"></span><span class="hs-comment">-- find this information somewhere. We can lookup the 'hsLibraries' field of</span><span>
</span><span id="line-1660"></span><span class="hs-comment">-- 'InstalledPackageInfo' but it will tell us @[&quot;HSrts&quot;, &quot;Cffi&quot;]@, which</span><span>
</span><span id="line-1661"></span><span class="hs-comment">-- doesn't really help.</span><span>
</span><span id="line-1662"></span><span class="annot"><a href="Distribution.Simple.GHC.html#extractRtsInfo"><span class="hs-identifier hs-type">extractRtsInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#RtsInfo"><span class="hs-identifier hs-type">RtsInfo</span></a></span><span>
</span><span id="line-1663"></span><span id="extractRtsInfo"><span class="annot"><span class="annottext">extractRtsInfo :: LocalBuildInfo -&gt; RtsInfo
</span><a href="Distribution.Simple.GHC.html#extractRtsInfo"><span class="hs-identifier hs-var hs-var">extractRtsInfo</span></a></span></span><span> </span><span id="local-6989586621679738861"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738861"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1664"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. PackageIndex a -&gt; PackageName -&gt; [(Version, [a])]
</span><a href="Distribution.Simple.PackageIndex.html#lookupPackageName"><span class="hs-identifier hs-var">PackageIndex.lookupPackageName</span></a></span><span>
</span><span id="line-1665"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; InstalledPackageIndex
</span><a href="Distribution.Types.LocalBuildInfo.html#installedPkgs"><span class="hs-identifier hs-var">installedPkgs</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738861"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; PackageName
</span><a href="Distribution.Types.PackageName.html#mkPackageName"><span class="hs-identifier hs-var">mkPackageName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rts&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1666"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Version
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span id="local-6989586621679738859"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679738859"><span class="hs-identifier hs-var">rts</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo -&gt; RtsInfo
</span><a href="#local-6989586621679738858"><span class="hs-identifier hs-var">aux</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679738859"><span class="hs-identifier hs-var">rts</span></a></span><span>
</span><span id="line-1667"></span><span>      </span><span id="local-6989586621679738857"><span class="annot"><span class="annottext">[(Version, [InstalledPackageInfo])]
</span><a href="#local-6989586621679738857"><span class="hs-identifier hs-var">_otherwise</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No (or multiple) ghc rts package is registered&quot;</span></span><span>
</span><span id="line-1668"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1669"></span><span>    </span><span class="annot"><a href="#local-6989586621679738858"><span class="hs-identifier hs-type">aux</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier hs-type">InstalledPackageInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#RtsInfo"><span class="hs-identifier hs-type">RtsInfo</span></a></span><span>
</span><span id="line-1670"></span><span>    </span><span id="local-6989586621679738858"><span class="annot"><span class="annottext">aux :: InstalledPackageInfo -&gt; RtsInfo
</span><a href="#local-6989586621679738858"><span class="hs-identifier hs-var hs-var">aux</span></a></span></span><span> </span><span id="local-6989586621679738856"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679738856"><span class="hs-identifier hs-var">rts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#RtsInfo"><span class="hs-identifier hs-type">RtsInfo</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1671"></span><span>        </span><span class="annot"><span class="annottext">rtsDynamicInfo :: DynamicRtsInfo
</span><a href="Distribution.Simple.GHC.html#rtsDynamicInfo"><span class="hs-identifier hs-var">rtsDynamicInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#DynamicRtsInfo"><span class="hs-identifier hs-type">DynamicRtsInfo</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1672"></span><span>            </span><span class="annot"><span class="annottext">dynRtsVanillaLib :: String
</span><a href="Distribution.Simple.GHC.html#dynRtsVanillaLib"><span class="hs-identifier hs-var">dynRtsVanillaLib</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="#local-6989586621679738855"><span class="hs-identifier hs-var">withGhcVersion</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HSrts&quot;</span></span><span>
</span><span id="line-1673"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynRtsThreadedLib :: String
</span><a href="Distribution.Simple.GHC.html#dynRtsThreadedLib"><span class="hs-identifier hs-var">dynRtsThreadedLib</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="#local-6989586621679738855"><span class="hs-identifier hs-var">withGhcVersion</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HSrts_thr&quot;</span></span><span>
</span><span id="line-1674"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynRtsDebugLib :: String
</span><a href="Distribution.Simple.GHC.html#dynRtsDebugLib"><span class="hs-identifier hs-var">dynRtsDebugLib</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="#local-6989586621679738855"><span class="hs-identifier hs-var">withGhcVersion</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HSrts_debug&quot;</span></span><span>
</span><span id="line-1675"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynRtsEventlogLib :: String
</span><a href="Distribution.Simple.GHC.html#dynRtsEventlogLib"><span class="hs-identifier hs-var">dynRtsEventlogLib</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="#local-6989586621679738855"><span class="hs-identifier hs-var">withGhcVersion</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HSrts_l&quot;</span></span><span>
</span><span id="line-1676"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynRtsThreadedDebugLib :: String
</span><a href="Distribution.Simple.GHC.html#dynRtsThreadedDebugLib"><span class="hs-identifier hs-var">dynRtsThreadedDebugLib</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="#local-6989586621679738855"><span class="hs-identifier hs-var">withGhcVersion</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HSrts_thr_debug&quot;</span></span><span>
</span><span id="line-1677"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynRtsThreadedEventlogLib :: String
</span><a href="Distribution.Simple.GHC.html#dynRtsThreadedEventlogLib"><span class="hs-identifier hs-var">dynRtsThreadedEventlogLib</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="#local-6989586621679738855"><span class="hs-identifier hs-var">withGhcVersion</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HSrts_thr_l&quot;</span></span><span>
</span><span id="line-1678"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-1679"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rtsStaticInfo :: StaticRtsInfo
</span><a href="Distribution.Simple.GHC.html#rtsStaticInfo"><span class="hs-identifier hs-var">rtsStaticInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.html#StaticRtsInfo"><span class="hs-identifier hs-type">StaticRtsInfo</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1680"></span><span>            </span><span class="annot"><span class="annottext">statRtsVanillaLib :: String
</span><a href="Distribution.Simple.GHC.html#statRtsVanillaLib"><span class="hs-identifier hs-var">statRtsVanillaLib</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HSrts&quot;</span></span><span>
</span><span id="line-1681"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">statRtsThreadedLib :: String
</span><a href="Distribution.Simple.GHC.html#statRtsThreadedLib"><span class="hs-identifier hs-var">statRtsThreadedLib</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HSrts_thr&quot;</span></span><span>
</span><span id="line-1682"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">statRtsDebugLib :: String
</span><a href="Distribution.Simple.GHC.html#statRtsDebugLib"><span class="hs-identifier hs-var">statRtsDebugLib</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HSrts_debug&quot;</span></span><span>
</span><span id="line-1683"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">statRtsEventlogLib :: String
</span><a href="Distribution.Simple.GHC.html#statRtsEventlogLib"><span class="hs-identifier hs-var">statRtsEventlogLib</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HSrts_l&quot;</span></span><span>
</span><span id="line-1684"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">statRtsThreadedDebugLib :: String
</span><a href="Distribution.Simple.GHC.html#statRtsThreadedDebugLib"><span class="hs-identifier hs-var">statRtsThreadedDebugLib</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HSrts_thr_debug&quot;</span></span><span>
</span><span id="line-1685"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">statRtsThreadedEventlogLib :: String
</span><a href="Distribution.Simple.GHC.html#statRtsThreadedEventlogLib"><span class="hs-identifier hs-var">statRtsThreadedEventlogLib</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HSrts_thr_l&quot;</span></span><span>
</span><span id="line-1686"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">statRtsProfilingLib :: String
</span><a href="Distribution.Simple.GHC.html#statRtsProfilingLib"><span class="hs-identifier hs-var">statRtsProfilingLib</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HSrts_p&quot;</span></span><span>
</span><span id="line-1687"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">statRtsThreadedProfilingLib :: String
</span><a href="Distribution.Simple.GHC.html#statRtsThreadedProfilingLib"><span class="hs-identifier hs-var">statRtsThreadedProfilingLib</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HSrts_thr_p&quot;</span></span><span>
</span><span id="line-1688"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-1689"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rtsLibPaths :: [String]
</span><a href="Distribution.Simple.GHC.html#rtsLibPaths"><span class="hs-identifier hs-var">rtsLibPaths</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo -&gt; [String]
</span><a href="Distribution.Types.InstalledPackageInfo.html#libraryDirs"><span class="hs-identifier hs-var">InstalledPackageInfo.libraryDirs</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679738856"><span class="hs-identifier hs-var">rts</span></a></span><span>
</span><span id="line-1690"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1691"></span><span>    </span><span id="local-6989586621679738855"><span class="annot"><span class="annottext">withGhcVersion :: String -&gt; String
</span><a href="#local-6989586621679738855"><span class="hs-identifier hs-var hs-var">withGhcVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-ghc&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; String
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; Version
</span><a href="Distribution.Simple.Compiler.html#compilerVersion"><span class="hs-identifier hs-var">compilerVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Compiler
</span><a href="Distribution.Types.LocalBuildInfo.html#compiler"><span class="hs-identifier hs-var">compiler</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738861"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1692"></span><span>
</span><span id="line-1693"></span><span class="hs-comment">-- | Returns True if the modification date of the given source file is newer than</span><span>
</span><span id="line-1694"></span><span class="hs-comment">-- the object file we last compiled for it, or if no object file exists yet.</span><span>
</span><span id="line-1695"></span><span class="annot"><a href="Distribution.Simple.GHC.html#checkNeedsRecompilation"><span class="hs-identifier hs-type">checkNeedsRecompilation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.GHC.html#GhcOptions"><span class="hs-identifier hs-type">GhcOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1696"></span><span id="checkNeedsRecompilation"><span class="annot"><span class="annottext">checkNeedsRecompilation :: String -&gt; GhcOptions -&gt; IO Bool
</span><a href="Distribution.Simple.GHC.html#checkNeedsRecompilation"><span class="hs-identifier hs-var hs-var">checkNeedsRecompilation</span></a></span></span><span> </span><span id="local-6989586621679738852"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738852"><span class="hs-identifier hs-var">filename</span></a></span></span><span> </span><span id="local-6989586621679738851"><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738851"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738852"><span class="hs-identifier hs-var">filename</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; IO Bool
</span><a href="Distribution.Simple.Utils.html#moreRecentFile"><span class="hs-operator hs-var">`moreRecentFile`</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738849"><span class="hs-identifier hs-var">oname</span></a></span><span>
</span><span id="line-1697"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679738849"><span class="annot"><span class="annottext">oname :: String
</span><a href="#local-6989586621679738849"><span class="hs-identifier hs-var hs-var">oname</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; GhcOptions -&gt; String
</span><a href="Distribution.Simple.GHC.html#getObjectFileName"><span class="hs-identifier hs-var">getObjectFileName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738852"><span class="hs-identifier hs-var">filename</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738851"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-1698"></span><span>
</span><span id="line-1699"></span><span class="hs-comment">-- | Finds the object file name of the given source file</span><span>
</span><span id="line-1700"></span><span class="annot"><a href="Distribution.Simple.GHC.html#getObjectFileName"><span class="hs-identifier hs-type">getObjectFileName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.GHC.html#GhcOptions"><span class="hs-identifier hs-type">GhcOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1701"></span><span id="getObjectFileName"><span class="annot"><span class="annottext">getObjectFileName :: String -&gt; GhcOptions -&gt; String
</span><a href="Distribution.Simple.GHC.html#getObjectFileName"><span class="hs-identifier hs-var hs-var">getObjectFileName</span></a></span></span><span> </span><span id="local-6989586621679738847"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738847"><span class="hs-identifier hs-var">filename</span></a></span></span><span> </span><span id="local-6989586621679738846"><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738846"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738845"><span class="hs-identifier hs-var">oname</span></a></span><span>
</span><span id="line-1702"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679738842"><span class="annot"><span class="annottext">odir :: String
</span><a href="#local-6989586621679738842"><span class="hs-identifier hs-var hs-var">odir</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjDir"><span class="hs-identifier hs-var">ghcOptObjDir</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738846"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1703"></span><span>          </span><span id="local-6989586621679738841"><span class="annot"><span class="annottext">oext :: String
</span><a href="#local-6989586621679738841"><span class="hs-identifier hs-var hs-var">oext</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;o&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738846"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1704"></span><span>          </span><span id="local-6989586621679738845"><span class="annot"><span class="annottext">oname :: String
</span><a href="#local-6989586621679738845"><span class="hs-identifier hs-var hs-var">oname</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738842"><span class="hs-identifier hs-var">odir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#replaceExtension"><span class="hs-identifier hs-var">replaceExtension</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738847"><span class="hs-identifier hs-var">filename</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738841"><span class="hs-identifier hs-var">oext</span></a></span><span>
</span><span id="line-1705"></span><span>
</span><span id="line-1706"></span><span class="hs-comment">-- | Calculate the RPATHs for the component we are building.</span><span>
</span><span id="line-1707"></span><span class="hs-comment">--</span><span>
</span><span id="line-1708"></span><span class="hs-comment">-- Calculates relative RPATHs when 'relocatable' is set.</span><span>
</span><span id="line-1709"></span><span class="annot"><a href="Distribution.Simple.GHC.html#getRPaths"><span class="hs-identifier hs-type">getRPaths</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>
</span><span id="line-1710"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a></span><span> </span><span class="hs-comment">-- ^ Component we are building</span><span>
</span><span id="line-1711"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Utils.NubList.html#NubListR"><span class="hs-identifier hs-type">NubListR</span></a></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1712"></span><span id="getRPaths"><span class="annot"><span class="annottext">getRPaths :: LocalBuildInfo -&gt; ComponentLocalBuildInfo -&gt; IO (NubListR String)
</span><a href="Distribution.Simple.GHC.html#getRPaths"><span class="hs-identifier hs-var hs-var">getRPaths</span></a></span></span><span> </span><span id="local-6989586621679738839"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738839"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span id="local-6989586621679738838"><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679738838"><span class="hs-identifier hs-var">clbi</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">OS -&gt; Bool
</span><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679738836"><span class="hs-identifier hs-var">hostOS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1713"></span><span>    </span><span id="local-6989586621679738835"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738835"><span class="hs-identifier hs-var">libraryPaths</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; Bool -&gt; LocalBuildInfo -&gt; ComponentLocalBuildInfo -&gt; IO [String]
</span><a href="Distribution.Simple.LocalBuildInfo.html#depLibraryPaths"><span class="hs-identifier hs-var">depLibraryPaths</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#relocatable"><span class="hs-identifier hs-var">relocatable</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738839"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738839"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679738838"><span class="hs-identifier hs-var">clbi</span></a></span><span>
</span><span id="line-1714"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679738832"><span class="annot"><span class="annottext">hostPref :: String
</span><a href="#local-6989586621679738832"><span class="hs-identifier hs-var hs-var">hostPref</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679738836"><span class="hs-identifier hs-var">hostOS</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1715"></span><span>                     </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#OSX"><span class="hs-identifier hs-var">OSX</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;@loader_path&quot;</span></span><span>
</span><span id="line-1716"></span><span>                     </span><span class="annot"><span class="annottext">OS
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;$ORIGIN&quot;</span></span><span>
</span><span id="line-1717"></span><span>        </span><span id="local-6989586621679738831"><span class="annot"><span class="annottext">relPath :: String -&gt; String
</span><a href="#local-6989586621679738831"><span class="hs-identifier hs-var hs-var">relPath</span></a></span></span><span> </span><span id="local-6989586621679738830"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738830"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#isRelative"><span class="hs-identifier hs-var">isRelative</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738830"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738832"><span class="hs-identifier hs-var">hostPref</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738830"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738830"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1718"></span><span>        </span><span id="local-6989586621679738827"><span class="annot"><span class="annottext">rpaths :: NubListR String
</span><a href="#local-6989586621679738827"><span class="hs-identifier hs-var hs-var">rpaths</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="#local-6989586621679738831"><span class="hs-identifier hs-var">relPath</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738835"><span class="hs-identifier hs-var">libraryPaths</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1719"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">NubListR String
</span><a href="#local-6989586621679738827"><span class="hs-identifier hs-var">rpaths</span></a></span><span>
</span><span id="line-1720"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1721"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679738836"><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679738836"><span class="hs-identifier hs-var">hostOS</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738839"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1722"></span><span>    </span><span id="local-6989586621679738826"><span class="annot"><span class="annottext">compid :: CompilerId
</span><a href="#local-6989586621679738826"><span class="hs-identifier hs-var hs-var">compid</span></a></span></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; CompilerId
</span><a href="Distribution.Simple.Compiler.html#compilerId"><span class="hs-identifier hs-var">compilerId</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Compiler
</span><a href="Distribution.Types.LocalBuildInfo.html#compiler"><span class="hs-identifier hs-var">compiler</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738839"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1723"></span><span>
</span><span id="line-1724"></span><span>    </span><span class="hs-comment">-- The list of RPath-supported operating systems below reflects the</span><span>
</span><span id="line-1725"></span><span>    </span><span class="hs-comment">-- platforms on which Cabal's RPATH handling is tested. It does _NOT_</span><span>
</span><span id="line-1726"></span><span>    </span><span class="hs-comment">-- reflect whether the OS supports RPATH.</span><span>
</span><span id="line-1727"></span><span>
</span><span id="line-1728"></span><span>    </span><span class="hs-comment">-- E.g. when this comment was written, the *BSD operating systems were</span><span>
</span><span id="line-1729"></span><span>    </span><span class="hs-comment">-- untested with regards to Cabal RPATH handling, and were hence set to</span><span>
</span><span id="line-1730"></span><span>    </span><span class="hs-comment">-- 'False', while those operating systems themselves do support RPATH.</span><span>
</span><span id="line-1731"></span><span>    </span><span id="local-6989586621679738837"><span class="annot"><span class="annottext">supportRPaths :: OS -&gt; Bool
</span><a href="#local-6989586621679738837"><span class="hs-identifier hs-var hs-var">supportRPaths</span></a></span></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Linux"><span class="hs-identifier hs-var">Linux</span></a></span><span>   &#160;   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1732"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Windows"><span class="hs-identifier hs-var">Windows</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1733"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#OSX"><span class="hs-identifier hs-var">OSX</span></a></span><span>     &#160;   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1734"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#FreeBSD"><span class="hs-identifier hs-var">FreeBSD</span></a></span><span> &#160;   </span><span class="hs-glyph">=</span><span>
</span><span id="line-1735"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CompilerId
</span><a href="#local-6989586621679738826"><span class="hs-identifier hs-var">compid</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1736"></span><span>        </span><span class="annot"><a href="Distribution.Compiler.html#CompilerId"><span class="hs-identifier hs-type">CompilerId</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span id="local-6989586621679738823"><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679738823"><span class="hs-identifier hs-var">ver</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679738823"><span class="hs-identifier hs-var">ver</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Version
</span><a href="Distribution.Types.Version.html#mkVersion"><span class="hs-identifier hs-var">mkVersion</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1737"></span><span>        </span><span class="annot"><span class="annottext">CompilerId
</span><span class="hs-identifier">_</span></span><span>                                              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1738"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#OpenBSD"><span class="hs-identifier hs-var">OpenBSD</span></a></span><span> &#160;   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1739"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#NetBSD"><span class="hs-identifier hs-var">NetBSD</span></a></span><span>  &#160;   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1740"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#DragonFly"><span class="hs-identifier hs-var">DragonFly</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1741"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Solaris"><span class="hs-identifier hs-var">Solaris</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1742"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#AIX"><span class="hs-identifier hs-var">AIX</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1743"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#HPUX"><span class="hs-identifier hs-var">HPUX</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1744"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#IRIX"><span class="hs-identifier hs-var">IRIX</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1745"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#HaLVM"><span class="hs-identifier hs-var">HaLVM</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1746"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#IOS"><span class="hs-identifier hs-var">IOS</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1747"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Android"><span class="hs-identifier hs-var">Android</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1748"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Ghcjs"><span class="hs-identifier hs-var">Ghcjs</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1749"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Hurd"><span class="hs-identifier hs-var">Hurd</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1750"></span><span>    </span><span class="annot"><a href="#local-6989586621679738837"><span class="hs-identifier hs-var">supportRPaths</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.System.html#OtherOS"><span class="hs-identifier hs-type">OtherOS</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1751"></span><span>    </span><span class="hs-comment">-- Do _not_ add a default case so that we get a warning here when a new OS</span><span>
</span><span id="line-1752"></span><span>    </span><span class="hs-comment">-- is added.</span><span>
</span><span id="line-1753"></span><span>
</span><span id="line-1754"></span><span class="annot"><a href="Distribution.Simple.GHC.html#getRPaths"><span class="hs-identifier hs-var">getRPaths</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1755"></span><span>
</span><span id="line-1756"></span><span class="hs-comment">-- | Remove the &quot;-threaded&quot; flag when building a foreign library, as it has no</span><span>
</span><span id="line-1757"></span><span class="hs-comment">--   effect when used with &quot;-shared&quot;. Returns the updated 'BuildInfo', along</span><span>
</span><span id="line-1758"></span><span class="hs-comment">--   with whether or not the flag was present, so we can use it to link against</span><span>
</span><span id="line-1759"></span><span class="hs-comment">--   the appropriate RTS on our own.</span><span>
</span><span id="line-1760"></span><span class="annot"><a href="Distribution.Simple.GHC.html#popThreadedFlag"><span class="hs-identifier hs-type">popThreadedFlag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.BuildInfo.html#BuildInfo"><span class="hs-identifier hs-type">BuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.BuildInfo.html#BuildInfo"><span class="hs-identifier hs-type">BuildInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span>
</span><span id="line-1761"></span><span id="popThreadedFlag"><span class="annot"><span class="annottext">popThreadedFlag :: BuildInfo -&gt; (BuildInfo, Bool)
</span><a href="Distribution.Simple.GHC.html#popThreadedFlag"><span class="hs-identifier hs-var hs-var">popThreadedFlag</span></a></span></span><span> </span><span id="local-6989586621679738809"><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679738809"><span class="hs-identifier hs-var">bi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1762"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679738809"><span class="hs-identifier hs-var">bi</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">options :: PerCompilerFlavor [String]
</span><a href="Distribution.Types.BuildInfo.html#options"><span class="hs-identifier hs-var">options</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Bool)
-&gt; PerCompilerFlavor [String] -&gt; PerCompilerFlavor [String]
</span><a href="#local-6989586621679738807"><span class="hs-identifier hs-var">filterHcOptions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-threaded&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; PerCompilerFlavor [String]
</span><a href="Distribution.Types.BuildInfo.html#options"><span class="hs-identifier hs-var">options</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679738809"><span class="hs-identifier hs-var">bi</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1763"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PerCompilerFlavor [String] -&gt; Bool
</span><a href="#local-6989586621679738806"><span class="hs-identifier hs-var">hasThreaded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; PerCompilerFlavor [String]
</span><a href="Distribution.Types.BuildInfo.html#options"><span class="hs-identifier hs-var">options</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679738809"><span class="hs-identifier hs-var">bi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1764"></span><span>
</span><span id="line-1765"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1766"></span><span>    </span><span class="annot"><a href="#local-6989586621679738807"><span class="hs-identifier hs-type">filterHcOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span>
</span><span id="line-1767"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Compiler.html#PerCompilerFlavor"><span class="hs-identifier hs-type">PerCompilerFlavor</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1768"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Compiler.html#PerCompilerFlavor"><span class="hs-identifier hs-type">PerCompilerFlavor</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1769"></span><span>    </span><span id="local-6989586621679738807"><span class="annot"><span class="annottext">filterHcOptions :: (String -&gt; Bool)
-&gt; PerCompilerFlavor [String] -&gt; PerCompilerFlavor [String]
</span><a href="#local-6989586621679738807"><span class="hs-identifier hs-var hs-var">filterHcOptions</span></a></span></span><span> </span><span id="local-6989586621679738805"><span class="annot"><span class="annottext">String -&gt; Bool
</span><a href="#local-6989586621679738805"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Compiler.html#PerCompilerFlavor"><span class="hs-identifier hs-type">PerCompilerFlavor</span></a></span><span> </span><span id="local-6989586621679738803"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738803"><span class="hs-identifier hs-var">ghc</span></a></span></span><span> </span><span id="local-6989586621679738802"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738802"><span class="hs-identifier hs-var">ghcjs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1770"></span><span>        </span><span class="annot"><span class="annottext">forall v. v -&gt; v -&gt; PerCompilerFlavor v
</span><a href="Distribution.Compiler.html#PerCompilerFlavor"><span class="hs-identifier hs-var">PerCompilerFlavor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
</span><a href="#local-6989586621679738805"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738803"><span class="hs-identifier hs-var">ghc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738802"><span class="hs-identifier hs-var">ghcjs</span></a></span><span>
</span><span id="line-1771"></span><span>
</span><span id="line-1772"></span><span>    </span><span class="annot"><a href="#local-6989586621679738806"><span class="hs-identifier hs-type">hasThreaded</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Compiler.html#PerCompilerFlavor"><span class="hs-identifier hs-type">PerCompilerFlavor</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1773"></span><span>    </span><span id="local-6989586621679738806"><span class="annot"><span class="annottext">hasThreaded :: PerCompilerFlavor [String] -&gt; Bool
</span><a href="#local-6989586621679738806"><span class="hs-identifier hs-var hs-var">hasThreaded</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Compiler.html#PerCompilerFlavor"><span class="hs-identifier hs-type">PerCompilerFlavor</span></a></span><span> </span><span id="local-6989586621679738801"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738801"><span class="hs-identifier hs-var">ghc</span></a></span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#elem"><span class="hs-identifier hs-var">elem</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-threaded&quot;</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738801"><span class="hs-identifier hs-var">ghc</span></a></span><span>
</span><span id="line-1774"></span><span>
</span><span id="line-1775"></span><span class="hs-comment">-- | Extracts a String representing a hash of the ABI of a built</span><span>
</span><span id="line-1776"></span><span class="hs-comment">-- library.  It can fail if the library has not yet been built.</span><span>
</span><span id="line-1777"></span><span class="hs-comment">--</span><span>
</span><span id="line-1778"></span><span class="annot"><a href="Distribution.Simple.GHC.html#libAbiHash"><span class="hs-identifier hs-type">libAbiHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>
</span><span id="line-1779"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.Library.html#Library"><span class="hs-identifier hs-type">Library</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1780"></span><span id="libAbiHash"><span class="annot"><span class="annottext">libAbiHash :: Verbosity
-&gt; PackageDescription
-&gt; LocalBuildInfo
-&gt; Library
-&gt; ComponentLocalBuildInfo
-&gt; IO String
</span><a href="Distribution.Simple.GHC.html#libAbiHash"><span class="hs-identifier hs-var hs-var">libAbiHash</span></a></span></span><span> </span><span id="local-6989586621679738800"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738800"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679738799"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679738799"><span class="hs-identifier hs-var">_pkg_descr</span></a></span></span><span> </span><span id="local-6989586621679738798"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738798"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span id="local-6989586621679738797"><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738797"><span class="hs-identifier hs-var">lib</span></a></span></span><span> </span><span id="local-6989586621679738796"><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679738796"><span class="hs-identifier hs-var">clbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1781"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-1782"></span><span>      </span><span id="local-6989586621679738795"><span class="annot"><span class="annottext">libBi :: BuildInfo
</span><a href="#local-6989586621679738795"><span class="hs-identifier hs-var hs-var">libBi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Library -&gt; BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738797"><span class="hs-identifier hs-var">lib</span></a></span><span>
</span><span id="line-1783"></span><span>      </span><span id="local-6989586621679738794"><span class="annot"><span class="annottext">comp :: Compiler
</span><a href="#local-6989586621679738794"><span class="hs-identifier hs-var hs-var">comp</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Compiler
</span><a href="Distribution.Types.LocalBuildInfo.html#compiler"><span class="hs-identifier hs-var">compiler</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738798"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1784"></span><span>      </span><span id="local-6989586621679738793"><span class="annot"><span class="annottext">platform :: Platform
</span><a href="#local-6989586621679738793"><span class="hs-identifier hs-var hs-var">platform</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738798"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1785"></span><span>      </span><span id="local-6989586621679738789"><span class="annot"><span class="annottext">vanillaArgs0 :: GhcOptions
</span><a href="#local-6989586621679738789"><span class="hs-identifier hs-var hs-var">vanillaArgs0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1786"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Verbosity
-&gt; LocalBuildInfo
-&gt; BuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; GhcOptions
</span><a href="Distribution.Simple.GHC.html#componentGhcOptions"><span class="hs-identifier hs-var">componentGhcOptions</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738800"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738798"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679738795"><span class="hs-identifier hs-var">libBi</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679738796"><span class="hs-identifier hs-var">clbi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ComponentLocalBuildInfo -&gt; String
</span><a href="Distribution.Simple.LocalBuildInfo.html#componentBuildDir"><span class="hs-identifier hs-var">componentBuildDir</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738798"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679738796"><span class="hs-identifier hs-var">clbi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1787"></span><span>        </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1788"></span><span>          </span><span class="annot"><span class="annottext">ghcOptMode :: Flag GhcMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptMode"><span class="hs-identifier hs-var">ghcOptMode</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcModeAbiHash"><span class="hs-identifier hs-var">GhcModeAbiHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1789"></span><span>          </span><span class="annot"><span class="annottext">ghcOptInputModules :: NubListR ModuleName
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptInputModules"><span class="hs-identifier hs-var">ghcOptInputModules</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; NubListR a
</span><a href="Distribution.Utils.NubList.html#toNubListR"><span class="hs-identifier hs-var">toNubListR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Library -&gt; [ModuleName]
</span><a href="Distribution.Types.Library.html#exposedModules"><span class="hs-identifier hs-var">exposedModules</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738797"><span class="hs-identifier hs-var">lib</span></a></span><span>
</span><span id="line-1790"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1791"></span><span>      </span><span id="local-6989586621679738782"><span class="annot"><span class="annottext">vanillaArgs :: GhcOptions
</span><a href="#local-6989586621679738782"><span class="hs-identifier hs-var hs-var">vanillaArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1792"></span><span>          </span><span class="hs-comment">-- Package DBs unnecessary, and break ghc-cabal. See #3633</span><span>
</span><span id="line-1793"></span><span>          </span><span class="hs-comment">-- BUT, put at least the global database so that 7.4 doesn't</span><span>
</span><span id="line-1794"></span><span>          </span><span class="hs-comment">-- break.</span><span>
</span><span id="line-1795"></span><span>          </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738789"><span class="hs-identifier hs-var">vanillaArgs0</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ghcOptPackageDBs :: [PackageDB]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptPackageDBs"><span class="hs-identifier hs-var">ghcOptPackageDBs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#GlobalPackageDB"><span class="hs-identifier hs-var">GlobalPackageDB</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1796"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ghcOptPackages :: NubListR (OpenUnitId, ModuleRenaming)
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptPackages"><span class="hs-identifier hs-var">ghcOptPackages</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1797"></span><span>      </span><span id="local-6989586621679738779"><span class="annot"><span class="annottext">sharedArgs :: GhcOptions
</span><a href="#local-6989586621679738779"><span class="hs-identifier hs-var hs-var">sharedArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738782"><span class="hs-identifier hs-var">vanillaArgs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1798"></span><span>                       </span><span class="annot"><span class="annottext">ghcOptDynLinkMode :: Flag GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptDynLinkMode"><span class="hs-identifier hs-var">ghcOptDynLinkMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">GhcDynLinkMode
</span><a href="Distribution.Simple.Program.GHC.html#GhcDynamicOnly"><span class="hs-identifier hs-var">GhcDynamicOnly</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1799"></span><span>                       </span><span class="annot"><span class="annottext">ghcOptFPic :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptFPic"><span class="hs-identifier hs-var">ghcOptFPic</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-1800"></span><span>                       </span><span class="annot"><span class="annottext">ghcOptHiSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHiSuffix"><span class="hs-identifier hs-var">ghcOptHiSuffix</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_hi&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1801"></span><span>                       </span><span class="annot"><span class="annottext">ghcOptObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_o&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1802"></span><span>                       </span><span class="annot"><span class="annottext">ghcOptExtra :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptExtra"><span class="hs-identifier hs-var">ghcOptExtra</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerFlavor -&gt; BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#hcSharedOptions"><span class="hs-identifier hs-var">hcSharedOptions</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679738795"><span class="hs-identifier hs-var">libBi</span></a></span><span>
</span><span id="line-1803"></span><span>                   </span><span class="hs-special">}</span><span>
</span><span id="line-1804"></span><span>      </span><span id="local-6989586621679738776"><span class="annot"><span class="annottext">profArgs :: GhcOptions
</span><a href="#local-6989586621679738776"><span class="hs-identifier hs-var hs-var">profArgs</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738782"><span class="hs-identifier hs-var">vanillaArgs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1805"></span><span>                     </span><span class="annot"><span class="annottext">ghcOptProfilingMode :: Flag Bool
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptProfilingMode"><span class="hs-identifier hs-var">ghcOptProfilingMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-1806"></span><span>                     </span><span class="annot"><span class="annottext">ghcOptProfilingAuto :: Flag GhcProfAuto
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptProfilingAuto"><span class="hs-identifier hs-var">ghcOptProfilingAuto</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ProfDetailLevel -&gt; Flag GhcProfAuto
</span><a href="Distribution.Simple.GHC.Internal.html#profDetailLevelFlag"><span class="hs-identifier hs-var">Internal.profDetailLevelFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1807"></span><span>                                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProfDetailLevel
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfLibDetail"><span class="hs-identifier hs-var">withProfLibDetail</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738798"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1808"></span><span>                     </span><span class="annot"><span class="annottext">ghcOptHiSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptHiSuffix"><span class="hs-identifier hs-var">ghcOptHiSuffix</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p_hi&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1809"></span><span>                     </span><span class="annot"><span class="annottext">ghcOptObjSuffix :: Flag String
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Flag a
</span><a href="Distribution.Simple.Flag.html#toFlag"><span class="hs-identifier hs-var">toFlag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p_o&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1810"></span><span>                     </span><span class="annot"><span class="annottext">ghcOptExtra :: [String]
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptExtra"><span class="hs-identifier hs-var">ghcOptExtra</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerFlavor -&gt; BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#hcProfOptions"><span class="hs-identifier hs-var">hcProfOptions</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679738795"><span class="hs-identifier hs-var">libBi</span></a></span><span>
</span><span id="line-1811"></span><span>                   </span><span class="hs-special">}</span><span>
</span><span id="line-1812"></span><span>      </span><span id="local-6989586621679738773"><span class="annot"><span class="annottext">ghcArgs :: GhcOptions
</span><a href="#local-6989586621679738773"><span class="hs-identifier hs-var hs-var">ghcArgs</span></a></span></span><span>
</span><span id="line-1813"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withVanillaLib"><span class="hs-identifier hs-var">withVanillaLib</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738798"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738782"><span class="hs-identifier hs-var">vanillaArgs</span></a></span><span>
</span><span id="line-1814"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withSharedLib"><span class="hs-identifier hs-var">withSharedLib</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738798"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738779"><span class="hs-identifier hs-var">sharedArgs</span></a></span><span>
</span><span id="line-1815"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfLib"><span class="hs-identifier hs-var">withProfLib</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738798"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738776"><span class="hs-identifier hs-var">profArgs</span></a></span><span>
</span><span id="line-1816"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;libAbiHash: Can't find an enabled library way&quot;</span></span><span>
</span><span id="line-1817"></span><span>
</span><span id="line-1818"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679738772"><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679738772"><span class="hs-identifier hs-var">ghcProg</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity
-&gt; Program -&gt; ProgramDb -&gt; IO (ConfiguredProgram, ProgramDb)
</span><a href="Distribution.Simple.Program.Db.html#requireProgram"><span class="hs-identifier hs-var">requireProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738800"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ghcProgram"><span class="hs-identifier hs-var">ghcProgram</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProgramDb
</span><a href="Distribution.Types.LocalBuildInfo.html#withPrograms"><span class="hs-identifier hs-var">withPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738798"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1819"></span><span>  </span><span id="local-6989586621679738771"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738771"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; ProgramInvocation -&gt; IO String
</span><a href="Distribution.Simple.Program.Run.html#getProgramInvocationOutput"><span class="hs-identifier hs-var">getProgramInvocationOutput</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738800"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-1820"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConfiguredProgram
-&gt; Compiler -&gt; Platform -&gt; GhcOptions -&gt; ProgramInvocation
</span><a href="Distribution.Simple.Program.GHC.html#ghcInvocation"><span class="hs-identifier hs-var">ghcInvocation</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679738772"><span class="hs-identifier hs-var">ghcProg</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679738794"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679738793"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679738773"><span class="hs-identifier hs-var">ghcArgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1821"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#takeWhile"><span class="hs-identifier hs-var">takeWhile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="../../base-4.16.3.0/src/GHC-Unicode.html#isSpace"><span class="hs-identifier hs-var">isSpace</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738771"><span class="hs-identifier hs-var">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1822"></span><span>
</span><span id="line-1823"></span><span class="annot"><a href="Distribution.Simple.GHC.html#componentGhcOptions"><span class="hs-identifier hs-type">componentGhcOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>
</span><span id="line-1824"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.BuildInfo.html#BuildInfo"><span class="hs-identifier hs-type">BuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1825"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.GHC.html#GhcOptions"><span class="hs-identifier hs-type">GhcOptions</span></a></span><span>
</span><span id="line-1826"></span><span id="componentGhcOptions"><span class="annot"><span class="annottext">componentGhcOptions :: Verbosity
-&gt; LocalBuildInfo
-&gt; BuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; GhcOptions
</span><a href="Distribution.Simple.GHC.html#componentGhcOptions"><span class="hs-identifier hs-var hs-var">componentGhcOptions</span></a></span></span><span> </span><span id="local-6989586621679738768"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738768"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679738767"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738767"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1827"></span><span>  </span><span class="annot"><span class="annottext">Verbosity
-&gt; GhcImplInfo
-&gt; LocalBuildInfo
-&gt; BuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; GhcOptions
</span><a href="Distribution.Simple.GHC.Internal.html#componentGhcOptions"><span class="hs-identifier hs-var">Internal.componentGhcOptions</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738768"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679738765"><span class="hs-identifier hs-var">implInfo</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738767"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1828"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1829"></span><span>    </span><span id="local-6989586621679738764"><span class="annot"><span class="annottext">comp :: Compiler
</span><a href="#local-6989586621679738764"><span class="hs-identifier hs-var hs-var">comp</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Compiler
</span><a href="Distribution.Types.LocalBuildInfo.html#compiler"><span class="hs-identifier hs-var">compiler</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738767"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1830"></span><span>    </span><span id="local-6989586621679738765"><span class="annot"><span class="annottext">implInfo :: GhcImplInfo
</span><a href="#local-6989586621679738765"><span class="hs-identifier hs-var hs-var">implInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; GhcImplInfo
</span><a href="Distribution.Simple.GHC.ImplInfo.html#getImplInfo"><span class="hs-identifier hs-var">getImplInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679738764"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-1831"></span><span>
</span><span id="line-1832"></span><span class="annot"><a href="Distribution.Simple.GHC.html#componentCcGhcOptions"><span class="hs-identifier hs-type">componentCcGhcOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>
</span><span id="line-1833"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.BuildInfo.html#BuildInfo"><span class="hs-identifier hs-type">BuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a></span><span>
</span><span id="line-1834"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1835"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.GHC.html#GhcOptions"><span class="hs-identifier hs-type">GhcOptions</span></a></span><span>
</span><span id="line-1836"></span><span id="componentCcGhcOptions"><span class="annot"><span class="annottext">componentCcGhcOptions :: Verbosity
-&gt; LocalBuildInfo
-&gt; BuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; String
-&gt; GhcOptions
</span><a href="Distribution.Simple.GHC.html#componentCcGhcOptions"><span class="hs-identifier hs-var hs-var">componentCcGhcOptions</span></a></span></span><span> </span><span id="local-6989586621679738763"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738763"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679738762"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738762"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1837"></span><span>    </span><span class="annot"><span class="annottext">Verbosity
-&gt; GhcImplInfo
-&gt; LocalBuildInfo
-&gt; BuildInfo
-&gt; ComponentLocalBuildInfo
-&gt; String
-&gt; String
-&gt; GhcOptions
</span><a href="Distribution.Simple.GHC.Internal.html#componentCcGhcOptions"><span class="hs-identifier hs-var">Internal.componentCcGhcOptions</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738763"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">GhcImplInfo
</span><a href="#local-6989586621679738761"><span class="hs-identifier hs-var">implInfo</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738762"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1838"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1839"></span><span>    </span><span id="local-6989586621679738760"><span class="annot"><span class="annottext">comp :: Compiler
</span><a href="#local-6989586621679738760"><span class="hs-identifier hs-var hs-var">comp</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Compiler
</span><a href="Distribution.Types.LocalBuildInfo.html#compiler"><span class="hs-identifier hs-var">compiler</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738762"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1840"></span><span>    </span><span id="local-6989586621679738761"><span class="annot"><span class="annottext">implInfo :: GhcImplInfo
</span><a href="#local-6989586621679738761"><span class="hs-identifier hs-var hs-var">implInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; GhcImplInfo
</span><a href="Distribution.Simple.GHC.ImplInfo.html#getImplInfo"><span class="hs-identifier hs-var">getImplInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679738760"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-1841"></span><span>
</span><span id="line-1842"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-1843"></span><span class="hs-comment">-- Installing</span><span>
</span><span id="line-1844"></span><span>
</span><span id="line-1845"></span><span class="hs-comment">-- |Install executables for GHC.</span><span>
</span><span id="line-1846"></span><span class="annot"><a href="Distribution.Simple.GHC.html#installExe"><span class="hs-identifier hs-type">installExe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-1847"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>
</span><span id="line-1848"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-comment">-- ^Where to copy the files to</span><span>
</span><span id="line-1849"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>  </span><span class="hs-comment">-- ^Build location</span><span>
</span><span id="line-1850"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^Executable (prefix,suffix)</span><span>
</span><span id="line-1851"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span>
</span><span id="line-1852"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.Executable.html#Executable"><span class="hs-identifier hs-type">Executable</span></a></span><span>
</span><span id="line-1853"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1854"></span><span id="installExe"><span class="annot"><span class="annottext">installExe :: Verbosity
-&gt; LocalBuildInfo
-&gt; String
-&gt; String
-&gt; (String, String)
-&gt; PackageDescription
-&gt; Executable
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#installExe"><span class="hs-identifier hs-var hs-var">installExe</span></a></span></span><span> </span><span id="local-6989586621679738759"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738759"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679738758"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738758"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span id="local-6989586621679738757"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738757"><span class="hs-identifier hs-var">binDir</span></a></span></span><span> </span><span id="local-6989586621679738756"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738756"><span class="hs-identifier hs-var">buildPref</span></a></span></span><span>
</span><span id="line-1855"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679738755"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738755"><span class="hs-identifier hs-var">progprefix</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679738754"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738754"><span class="hs-identifier hs-var">progsuffix</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679738753"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679738753"><span class="hs-identifier hs-var">_pkg</span></a></span></span><span> </span><span id="local-6989586621679738752"><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679738752"><span class="hs-identifier hs-var">exe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1856"></span><span>  </span><span class="annot"><span class="annottext">Verbosity -&gt; Bool -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#createDirectoryIfMissingVerbose"><span class="hs-identifier hs-var">createDirectoryIfMissingVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738759"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738757"><span class="hs-identifier hs-var">binDir</span></a></span><span>
</span><span id="line-1857"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679738751"><span class="annot"><span class="annottext">exeName' :: String
</span><a href="#local-6989586621679738751"><span class="hs-identifier hs-var hs-var">exeName'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnqualComponentName -&gt; String
</span><a href="Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Executable -&gt; UnqualComponentName
</span><a href="Distribution.Types.Executable.html#exeName"><span class="hs-identifier hs-var">exeName</span></a></span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679738752"><span class="hs-identifier hs-var">exe</span></a></span><span>
</span><span id="line-1858"></span><span>      </span><span id="local-6989586621679738750"><span class="annot"><span class="annottext">exeFileName :: String
</span><a href="#local-6989586621679738750"><span class="hs-identifier hs-var hs-var">exeFileName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Executable -&gt; String
</span><a href="Distribution.Simple.GHC.html#exeTargetName"><span class="hs-identifier hs-var">exeTargetName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738758"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Executable
</span><a href="#local-6989586621679738752"><span class="hs-identifier hs-var">exe</span></a></span><span>
</span><span id="line-1859"></span><span>      </span><span id="local-6989586621679738749"><span class="annot"><span class="annottext">fixedExeBaseName :: String
</span><a href="#local-6989586621679738749"><span class="hs-identifier hs-var hs-var">fixedExeBaseName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738755"><span class="hs-identifier hs-var">progprefix</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738751"><span class="hs-identifier hs-var">exeName'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738754"><span class="hs-identifier hs-var">progsuffix</span></a></span><span>
</span><span id="line-1860"></span><span>      </span><span id="local-6989586621679738746"><span class="annot"><span class="annottext">installBinary :: String -&gt; IO ()
</span><a href="#local-6989586621679738746"><span class="hs-identifier hs-var hs-var">installBinary</span></a></span></span><span> </span><span id="local-6989586621679738745"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738745"><span class="hs-identifier hs-var">dest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1861"></span><span>          </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#installExecutableFile"><span class="hs-identifier hs-var">installExecutableFile</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738759"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-1862"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738756"><span class="hs-identifier hs-var">buildPref</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738751"><span class="hs-identifier hs-var">exeName'</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738750"><span class="hs-identifier hs-var">exeFileName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1863"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738745"><span class="hs-identifier hs-var">dest</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#exeExtension"><span class="hs-identifier hs-var">exeExtension</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738758"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1864"></span><span>          </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#stripExes"><span class="hs-identifier hs-var">stripExes</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738758"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1865"></span><span>            </span><span class="annot"><span class="annottext">Verbosity -&gt; Platform -&gt; ProgramDb -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Program.Strip.html#stripExe"><span class="hs-identifier hs-var">Strip.stripExe</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738759"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738758"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProgramDb
</span><a href="Distribution.Types.LocalBuildInfo.html#withPrograms"><span class="hs-identifier hs-var">withPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738758"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1866"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738745"><span class="hs-identifier hs-var">dest</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#exeExtension"><span class="hs-identifier hs-var">exeExtension</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738758"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1867"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><a href="#local-6989586621679738746"><span class="hs-identifier hs-var">installBinary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738757"><span class="hs-identifier hs-var">binDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738749"><span class="hs-identifier hs-var">fixedExeBaseName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1868"></span><span>
</span><span id="line-1869"></span><span class="hs-comment">-- |Install foreign library for GHC.</span><span>
</span><span id="line-1870"></span><span class="annot"><a href="Distribution.Simple.GHC.html#installFLib"><span class="hs-identifier hs-type">installFLib</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-1871"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>
</span><span id="line-1872"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>  </span><span class="hs-comment">-- ^install location</span><span>
</span><span id="line-1873"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>  </span><span class="hs-comment">-- ^Build location</span><span>
</span><span id="line-1874"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span>
</span><span id="line-1875"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a></span><span>
</span><span id="line-1876"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1877"></span><span id="installFLib"><span class="annot"><span class="annottext">installFLib :: Verbosity
-&gt; LocalBuildInfo
-&gt; String
-&gt; String
-&gt; PackageDescription
-&gt; ForeignLib
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#installFLib"><span class="hs-identifier hs-var hs-var">installFLib</span></a></span></span><span> </span><span id="local-6989586621679738741"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738741"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679738740"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738740"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span id="local-6989586621679738739"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738739"><span class="hs-identifier hs-var">targetDir</span></a></span></span><span> </span><span id="local-6989586621679738738"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738738"><span class="hs-identifier hs-var">builtDir</span></a></span></span><span> </span><span id="local-6989586621679738737"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679738737"><span class="hs-identifier hs-var">_pkg</span></a></span></span><span> </span><span id="local-6989586621679738736"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679738736"><span class="hs-identifier hs-var">flib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1878"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; String -&gt; String -&gt; IO ()
</span><a href="#local-6989586621679738735"><span class="hs-identifier hs-var">install</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignLib -&gt; Bool
</span><a href="Distribution.Types.ForeignLib.html#foreignLibIsShared"><span class="hs-identifier hs-var">foreignLibIsShared</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679738736"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1879"></span><span>            </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738738"><span class="hs-identifier hs-var">builtDir</span></a></span><span>
</span><span id="line-1880"></span><span>            </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738739"><span class="hs-identifier hs-var">targetDir</span></a></span><span>
</span><span id="line-1881"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ForeignLib -&gt; String
</span><a href="Distribution.Simple.GHC.html#flibTargetName"><span class="hs-identifier hs-var">flibTargetName</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738740"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679738736"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1882"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1883"></span><span>    </span><span id="local-6989586621679738735"><span class="annot"><span class="annottext">install :: Bool -&gt; String -&gt; String -&gt; String -&gt; IO ()
</span><a href="#local-6989586621679738735"><span class="hs-identifier hs-var hs-var">install</span></a></span></span><span> </span><span id="local-6989586621679738723"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738723"><span class="hs-identifier hs-var">isShared</span></a></span></span><span> </span><span id="local-6989586621679738722"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738722"><span class="hs-identifier hs-var">srcDir</span></a></span></span><span> </span><span id="local-6989586621679738721"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738721"><span class="hs-identifier hs-var">dstDir</span></a></span></span><span> </span><span id="local-6989586621679738720"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738720"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1884"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679738719"><span class="annot"><span class="annottext">src :: String
</span><a href="#local-6989586621679738719"><span class="hs-identifier hs-var hs-var">src</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738722"><span class="hs-identifier hs-var">srcDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738720"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1885"></span><span>          </span><span id="local-6989586621679738718"><span class="annot"><span class="annottext">dst :: String
</span><a href="#local-6989586621679738718"><span class="hs-identifier hs-var hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738721"><span class="hs-identifier hs-var">dstDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738720"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1886"></span><span>      </span><span class="annot"><span class="annottext">Verbosity -&gt; Bool -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#createDirectoryIfMissingVerbose"><span class="hs-identifier hs-var">createDirectoryIfMissingVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738741"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738739"><span class="hs-identifier hs-var">targetDir</span></a></span><span>
</span><span id="line-1887"></span><span>      </span><span class="hs-comment">-- TODO: Should we strip? (stripLibs lbi)</span><span>
</span><span id="line-1888"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738723"><span class="hs-identifier hs-var">isShared</span></a></span><span>
</span><span id="line-1889"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#installExecutableFile"><span class="hs-identifier hs-var">installExecutableFile</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738741"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738719"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738718"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-1890"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#installOrdinaryFile"><span class="hs-identifier hs-var">installOrdinaryFile</span></a></span><span>   </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738741"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738719"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738718"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-1891"></span><span>      </span><span class="hs-comment">-- Now install appropriate symlinks if library is versioned</span><span>
</span><span id="line-1892"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679738716"><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679738716"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738740"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-1893"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignLib -&gt; OS -&gt; [Int]
</span><a href="Distribution.Types.ForeignLib.html#foreignLibVersion"><span class="hs-identifier hs-var">foreignLibVersion</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679738736"><span class="hs-identifier hs-var">flib</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679738716"><span class="hs-identifier hs-var">os</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1894"></span><span>          </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679738716"><span class="hs-identifier hs-var">os</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="Distribution.System.html#Linux"><span class="hs-identifier hs-var">Linux</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; String -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738741"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-1895"></span><span>            </span><span class="hs-comment">-- It should be impossible to get here.</span><span>
</span><span id="line-1896"></span><span>            </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Can't install foreign-library symlink on non-Linux OS&quot;</span></span><span class="hs-cpp">
#ifndef mingw32_HOST_OS
</span><span>          </span><span class="hs-comment">-- 'createSymbolicLink file1 file2' creates a symbolic link</span><span>
</span><span id="line-1899"></span><span>          </span><span class="hs-comment">-- named 'file2' which points to the file 'file1'.</span><span>
</span><span id="line-1900"></span><span>          </span><span class="hs-comment">-- Note that we do want a symlink to 'name' rather than</span><span>
</span><span id="line-1901"></span><span>          </span><span class="hs-comment">-- 'dst', because the symlink will be relative to the</span><span>
</span><span id="line-1902"></span><span>          </span><span class="hs-comment">-- directory it's created in.</span><span>
</span><span id="line-1903"></span><span>          </span><span class="hs-comment">-- Finally, we first create the symlinks in a temporary</span><span>
</span><span id="line-1904"></span><span>          </span><span class="hs-comment">-- directory and then rename to simulate 'ln --force'.</span><span>
</span><span id="line-1905"></span><span>          </span><span class="annot"><span class="annottext">forall a. Verbosity -&gt; String -&gt; String -&gt; (String -&gt; IO a) -&gt; IO a
</span><a href="Distribution.Simple.Utils.html#withTempDirectory"><span class="hs-identifier hs-var">withTempDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738741"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738721"><span class="hs-identifier hs-var">dstDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738714"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679738713"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738713"><span class="hs-identifier hs-var">tmpDir</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1906"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679738712"><span class="annot"><span class="annottext">link1 :: String
</span><a href="#local-6989586621679738712"><span class="hs-identifier hs-var hs-var">link1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ForeignLib -&gt; String
</span><a href="Distribution.Simple.GHC.html#flibBuildName"><span class="hs-identifier hs-var">flibBuildName</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738740"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679738736"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-1907"></span><span>                  </span><span id="local-6989586621679738711"><span class="annot"><span class="annottext">link2 :: String
</span><a href="#local-6989586621679738711"><span class="hs-identifier hs-var hs-var">link2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lib&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738714"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;so&quot;</span></span><span>
</span><span id="line-1908"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; String -&gt; IO ()
</span><a href="../../unix-2.7.2.2/src/System-Posix-Files.html#createSymbolicLink"><span class="hs-identifier hs-var">createSymbolicLink</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738720"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738713"><span class="hs-identifier hs-var">tmpDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738712"><span class="hs-identifier hs-var">link1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1909"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; String -&gt; IO ()
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#renameFile"><span class="hs-identifier hs-var">renameFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738713"><span class="hs-identifier hs-var">tmpDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738712"><span class="hs-identifier hs-var">link1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738721"><span class="hs-identifier hs-var">dstDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738712"><span class="hs-identifier hs-var">link1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1910"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; String -&gt; IO ()
</span><a href="../../unix-2.7.2.2/src/System-Posix-Files.html#createSymbolicLink"><span class="hs-identifier hs-var">createSymbolicLink</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738720"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738713"><span class="hs-identifier hs-var">tmpDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738711"><span class="hs-identifier hs-var">link2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1911"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; String -&gt; IO ()
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#renameFile"><span class="hs-identifier hs-var">renameFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738713"><span class="hs-identifier hs-var">tmpDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738711"><span class="hs-identifier hs-var">link2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738721"><span class="hs-identifier hs-var">dstDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738711"><span class="hs-identifier hs-var">link2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1912"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1913"></span><span>          </span><span class="annot"><a href="#local-6989586621679738714"><span class="hs-identifier hs-type">nm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1914"></span><span>          </span><span id="local-6989586621679738714"><span class="annot"><span class="annottext">nm :: String
</span><a href="#local-6989586621679738714"><span class="hs-identifier hs-var hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnqualComponentName -&gt; String
</span><a href="Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; UnqualComponentName
</span><a href="Distribution.Types.ForeignLib.html#foreignLibName"><span class="hs-identifier hs-var">foreignLibName</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679738736"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-cpp">
#endif /* mingw32_HOST_OS */
</span><span>
</span><span id="line-1917"></span><span>
</span><span id="line-1918"></span><span class="hs-comment">-- |Install for ghc, .hi, .a and, if --with-ghci given, .o</span><span>
</span><span id="line-1919"></span><span class="annot"><a href="Distribution.Simple.GHC.html#installLib"><span class="hs-identifier hs-type">installLib</span></a></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-1920"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span>
</span><span id="line-1921"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>  </span><span class="hs-comment">-- ^install location</span><span>
</span><span id="line-1922"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>  </span><span class="hs-comment">-- ^install location for dynamic libraries</span><span>
</span><span id="line-1923"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>  </span><span class="hs-comment">-- ^Build location</span><span>
</span><span id="line-1924"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a></span><span>
</span><span id="line-1925"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.Library.html#Library"><span class="hs-identifier hs-type">Library</span></a></span><span>
</span><span id="line-1926"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a></span><span>
</span><span id="line-1927"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1928"></span><span id="installLib"><span class="annot"><span class="annottext">installLib :: Verbosity
-&gt; LocalBuildInfo
-&gt; String
-&gt; String
-&gt; String
-&gt; PackageDescription
-&gt; Library
-&gt; ComponentLocalBuildInfo
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#installLib"><span class="hs-identifier hs-var hs-var">installLib</span></a></span></span><span> </span><span id="local-6989586621679738710"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738710"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679738709"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738709"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span id="local-6989586621679738708"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738708"><span class="hs-identifier hs-var">targetDir</span></a></span></span><span> </span><span id="local-6989586621679738707"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738707"><span class="hs-identifier hs-var">dynlibTargetDir</span></a></span></span><span> </span><span id="local-6989586621679738706"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738706"><span class="hs-identifier hs-var">_builtDir</span></a></span></span><span> </span><span id="local-6989586621679738705"><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679738705"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span id="local-6989586621679738704"><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738704"><span class="hs-identifier hs-var">lib</span></a></span></span><span> </span><span id="local-6989586621679738703"><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679738703"><span class="hs-identifier hs-var">clbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1929"></span><span>  </span><span class="hs-comment">-- copy .hi files over:</span><span>
</span><span id="line-1930"></span><span>  </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679738702"><span class="hs-identifier hs-var">whenVanilla</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><a href="#local-6989586621679738701"><span class="hs-identifier hs-var">copyModuleFiles</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hi&quot;</span></span><span>
</span><span id="line-1931"></span><span>  </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679738700"><span class="hs-identifier hs-var">whenProf</span></a></span><span>    </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><a href="#local-6989586621679738701"><span class="hs-identifier hs-var">copyModuleFiles</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p_hi&quot;</span></span><span>
</span><span id="line-1932"></span><span>  </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679738699"><span class="hs-identifier hs-var">whenShared</span></a></span><span>  </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><a href="#local-6989586621679738701"><span class="hs-identifier hs-var">copyModuleFiles</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dyn_hi&quot;</span></span><span>
</span><span id="line-1933"></span><span>
</span><span id="line-1934"></span><span>  </span><span class="hs-comment">-- copy the built library files over:</span><span>
</span><span id="line-1935"></span><span>  </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679738698"><span class="hs-identifier hs-var">whenHasCode</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1936"></span><span>    </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679738702"><span class="hs-identifier hs-var">whenVanilla</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1937"></span><span>      </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#sequence_"><span class="hs-identifier hs-var">sequence_</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String -&gt; IO ()
</span><a href="#local-6989586621679738697"><span class="hs-identifier hs-var">installOrdinary</span></a></span><span>
</span><span id="line-1938"></span><span>                    </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738696"><span class="hs-identifier hs-var">builtDir</span></a></span><span>
</span><span id="line-1939"></span><span>                    </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738708"><span class="hs-identifier hs-var">targetDir</span></a></span><span>
</span><span id="line-1940"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#mkGenericStaticLibName"><span class="hs-identifier hs-var">mkGenericStaticLibName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738694"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738693"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1941"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679738694"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738694"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; String
</span><a href="Distribution.Types.UnitId.html#getHSLibraryName"><span class="hs-identifier hs-var">getHSLibraryName</span></a></span><span>
</span><span id="line-1942"></span><span>                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentLocalBuildInfo -&gt; UnitId
</span><a href="Distribution.Types.ComponentLocalBuildInfo.html#componentUnitId"><span class="hs-identifier hs-var">componentUnitId</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679738703"><span class="hs-identifier hs-var">clbi</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraBundledLibs"><span class="hs-identifier hs-var">extraBundledLibs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Library -&gt; BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738704"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1943"></span><span>                </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679738693"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738693"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraLibFlavours"><span class="hs-identifier hs-var">extraLibFlavours</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Library -&gt; BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738704"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1944"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-1945"></span><span>      </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679738689"><span class="hs-identifier hs-var">whenGHCi</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String -&gt; IO ()
</span><a href="#local-6989586621679738697"><span class="hs-identifier hs-var">installOrdinary</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738696"><span class="hs-identifier hs-var">builtDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738708"><span class="hs-identifier hs-var">targetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738688"><span class="hs-identifier hs-var">ghciLibName</span></a></span><span>
</span><span id="line-1946"></span><span>    </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679738700"><span class="hs-identifier hs-var">whenProf</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1947"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String -&gt; IO ()
</span><a href="#local-6989586621679738697"><span class="hs-identifier hs-var">installOrdinary</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738696"><span class="hs-identifier hs-var">builtDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738708"><span class="hs-identifier hs-var">targetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738687"><span class="hs-identifier hs-var">profileLibName</span></a></span><span>
</span><span id="line-1948"></span><span>      </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679738689"><span class="hs-identifier hs-var">whenGHCi</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String -&gt; IO ()
</span><a href="#local-6989586621679738697"><span class="hs-identifier hs-var">installOrdinary</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738696"><span class="hs-identifier hs-var">builtDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738708"><span class="hs-identifier hs-var">targetDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738686"><span class="hs-identifier hs-var">ghciProfLibName</span></a></span><span>
</span><span id="line-1949"></span><span>    </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621679738699"><span class="hs-identifier hs-var">whenShared</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">if</span><span>
</span><span id="line-1950"></span><span>      </span><span class="hs-comment">-- The behavior for &quot;extra-bundled-libraries&quot; changed in version 2.5.0.</span><span>
</span><span id="line-1951"></span><span>      </span><span class="hs-comment">-- See ghc issue #15837 and Cabal PR #5855.</span><span>
</span><span id="line-1952"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PackageDescription -&gt; CabalSpecVersion
</span><a href="Distribution.Types.PackageDescription.html#specVersion"><span class="hs-identifier hs-var">specVersion</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDescription
</span><a href="#local-6989586621679738705"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">CabalSpecVersion
</span><a href="Distribution.CabalSpecVersion.html#CabalSpecV3_0"><span class="hs-identifier hs-var">CabalSpecV3_0</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1953"></span><span>        </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#sequence_"><span class="hs-identifier hs-var">sequence_</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String -&gt; IO ()
</span><a href="#local-6989586621679738684"><span class="hs-identifier hs-var">installShared</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738696"><span class="hs-identifier hs-var">builtDir</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738707"><span class="hs-identifier hs-var">dynlibTargetDir</span></a></span><span>
</span><span id="line-1954"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; CompilerId -&gt; String -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#mkGenericSharedLibName"><span class="hs-identifier hs-var">mkGenericSharedLibName</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679738682"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerId
</span><a href="#local-6989586621679738681"><span class="hs-identifier hs-var">compiler_id</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738680"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738679"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1955"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679738680"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738680"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; String
</span><a href="Distribution.Types.UnitId.html#getHSLibraryName"><span class="hs-identifier hs-var">getHSLibraryName</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621679738678"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraBundledLibs"><span class="hs-identifier hs-var">extraBundledLibs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Library -&gt; BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738704"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1956"></span><span>          </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679738679"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738679"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraDynLibFlavours"><span class="hs-identifier hs-var">extraDynLibFlavours</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Library -&gt; BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738704"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1957"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1958"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1959"></span><span>        </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#sequence_"><span class="hs-identifier hs-var">sequence_</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String -&gt; IO ()
</span><a href="#local-6989586621679738684"><span class="hs-identifier hs-var">installShared</span></a></span><span>
</span><span id="line-1960"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738696"><span class="hs-identifier hs-var">builtDir</span></a></span><span>
</span><span id="line-1961"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738707"><span class="hs-identifier hs-var">dynlibTargetDir</span></a></span><span>
</span><span id="line-1962"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; CompilerId -&gt; String -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#mkGenericSharedLibName"><span class="hs-identifier hs-var">mkGenericSharedLibName</span></a></span><span>
</span><span id="line-1963"></span><span>                          </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679738682"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-1964"></span><span>                          </span><span class="annot"><span class="annottext">CompilerId
</span><a href="#local-6989586621679738681"><span class="hs-identifier hs-var">compiler_id</span></a></span><span>
</span><span id="line-1965"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitId -&gt; String
</span><a href="Distribution.Types.UnitId.html#getHSLibraryName"><span class="hs-identifier hs-var">getHSLibraryName</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621679738678"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738676"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1966"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679738676"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738676"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraDynLibFlavours"><span class="hs-identifier hs-var">extraDynLibFlavours</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Library -&gt; BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738704"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1967"></span><span>                  </span><span class="hs-special">]</span><span>
</span><span id="line-1968"></span><span>        </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#sequence_"><span class="hs-identifier hs-var">sequence_</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1969"></span><span>                    </span><span id="local-6989586621679738675"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738675"><span class="hs-identifier hs-var">files</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO [String]
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#getDirectoryContents"><span class="hs-identifier hs-var">getDirectoryContents</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738696"><span class="hs-identifier hs-var">builtDir</span></a></span><span>
</span><span id="line-1970"></span><span>                    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679738674"><span class="annot"><span class="annottext">l' :: String
</span><a href="#local-6989586621679738674"><span class="hs-identifier hs-var hs-var">l'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; CompilerId -&gt; String -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#mkGenericSharedBundledLibName"><span class="hs-identifier hs-var">mkGenericSharedBundledLibName</span></a></span><span>
</span><span id="line-1971"></span><span>                              </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679738682"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-1972"></span><span>                              </span><span class="annot"><span class="annottext">CompilerId
</span><a href="#local-6989586621679738681"><span class="hs-identifier hs-var">compiler_id</span></a></span><span>
</span><span id="line-1973"></span><span>                              </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738672"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1974"></span><span>                    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679738675"><span class="hs-identifier hs-var">files</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621679738671"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738671"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1975"></span><span>                      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738674"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#isPrefixOf"><span class="hs-operator hs-var">`isPrefixOf`</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738671"><span class="hs-identifier hs-var">file</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1976"></span><span>                        </span><span id="local-6989586621679738669"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738669"><span class="hs-identifier hs-var">isFile</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Bool
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#doesFileExist"><span class="hs-identifier hs-var">doesFileExist</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738696"><span class="hs-identifier hs-var">builtDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738671"><span class="hs-identifier hs-var">file</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1977"></span><span>                        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738669"><span class="hs-identifier hs-var">isFile</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1978"></span><span>                          </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String -&gt; IO ()
</span><a href="#local-6989586621679738684"><span class="hs-identifier hs-var">installShared</span></a></span><span>
</span><span id="line-1979"></span><span>                            </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738696"><span class="hs-identifier hs-var">builtDir</span></a></span><span>
</span><span id="line-1980"></span><span>                            </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738707"><span class="hs-identifier hs-var">dynlibTargetDir</span></a></span><span>
</span><span id="line-1981"></span><span>                            </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738671"><span class="hs-identifier hs-var">file</span></a></span><span>
</span><span id="line-1982"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679738672"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738672"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#extraBundledLibs"><span class="hs-identifier hs-var">extraBundledLibs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Library -&gt; BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738704"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1983"></span><span>                  </span><span class="hs-special">]</span><span>
</span><span id="line-1984"></span><span>
</span><span id="line-1985"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1986"></span><span>    </span><span id="local-6989586621679738696"><span class="annot"><span class="annottext">builtDir :: String
</span><a href="#local-6989586621679738696"><span class="hs-identifier hs-var hs-var">builtDir</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ComponentLocalBuildInfo -&gt; String
</span><a href="Distribution.Simple.LocalBuildInfo.html#componentBuildDir"><span class="hs-identifier hs-var">componentBuildDir</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738709"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679738703"><span class="hs-identifier hs-var">clbi</span></a></span><span>
</span><span id="line-1987"></span><span>
</span><span id="line-1988"></span><span>    </span><span id="local-6989586621679738665"><span class="annot"><span class="annottext">install :: Bool -&gt; String -&gt; String -&gt; String -&gt; IO ()
</span><a href="#local-6989586621679738665"><span class="hs-identifier hs-var hs-var">install</span></a></span></span><span> </span><span id="local-6989586621679738664"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738664"><span class="hs-identifier hs-var">isShared</span></a></span></span><span> </span><span id="local-6989586621679738663"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738663"><span class="hs-identifier hs-var">srcDir</span></a></span></span><span> </span><span id="local-6989586621679738662"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738662"><span class="hs-identifier hs-var">dstDir</span></a></span></span><span> </span><span id="local-6989586621679738661"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738661"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1989"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679738660"><span class="annot"><span class="annottext">src :: String
</span><a href="#local-6989586621679738660"><span class="hs-identifier hs-var hs-var">src</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738663"><span class="hs-identifier hs-var">srcDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738661"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1990"></span><span>          </span><span id="local-6989586621679738659"><span class="annot"><span class="annottext">dst :: String
</span><a href="#local-6989586621679738659"><span class="hs-identifier hs-var hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738662"><span class="hs-identifier hs-var">dstDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738661"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1991"></span><span>
</span><span id="line-1992"></span><span>      </span><span class="annot"><span class="annottext">Verbosity -&gt; Bool -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#createDirectoryIfMissingVerbose"><span class="hs-identifier hs-var">createDirectoryIfMissingVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738710"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738662"><span class="hs-identifier hs-var">dstDir</span></a></span><span>
</span><span id="line-1993"></span><span>
</span><span id="line-1994"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738664"><span class="hs-identifier hs-var">isShared</span></a></span><span>
</span><span id="line-1995"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#installExecutableFile"><span class="hs-identifier hs-var">installExecutableFile</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738710"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738660"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738659"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-1996"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#installOrdinaryFile"><span class="hs-identifier hs-var">installOrdinaryFile</span></a></span><span>   </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738710"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738660"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738659"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-1997"></span><span>
</span><span id="line-1998"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#stripLibs"><span class="hs-identifier hs-var">stripLibs</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738709"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; Platform -&gt; ProgramDb -&gt; String -&gt; IO ()
</span><a href="Distribution.Simple.Program.Strip.html#stripLib"><span class="hs-identifier hs-var">Strip.stripLib</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738710"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-1999"></span><span>                             </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679738682"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProgramDb
</span><a href="Distribution.Types.LocalBuildInfo.html#withPrograms"><span class="hs-identifier hs-var">withPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738709"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738659"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-2000"></span><span>
</span><span id="line-2001"></span><span>    </span><span id="local-6989586621679738697"><span class="annot"><span class="annottext">installOrdinary :: String -&gt; String -&gt; String -&gt; IO ()
</span><a href="#local-6989586621679738697"><span class="hs-identifier hs-var hs-var">installOrdinary</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; String -&gt; String -&gt; IO ()
</span><a href="#local-6989586621679738665"><span class="hs-identifier hs-var">install</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2002"></span><span>    </span><span id="local-6989586621679738684"><span class="annot"><span class="annottext">installShared :: String -&gt; String -&gt; String -&gt; IO ()
</span><a href="#local-6989586621679738684"><span class="hs-identifier hs-var hs-var">installShared</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; String -&gt; String -&gt; IO ()
</span><a href="#local-6989586621679738665"><span class="hs-identifier hs-var">install</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2003"></span><span>
</span><span id="line-2004"></span><span>    </span><span id="local-6989586621679738701"><span class="annot"><span class="annottext">copyModuleFiles :: String -&gt; IO ()
</span><a href="#local-6989586621679738701"><span class="hs-identifier hs-var hs-var">copyModuleFiles</span></a></span></span><span> </span><span id="local-6989586621679738655"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738655"><span class="hs-identifier hs-var">ext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2005"></span><span>      </span><span class="annot"><span class="annottext">Verbosity
-&gt; [String] -&gt; [String] -&gt; [ModuleName] -&gt; IO [(String, String)]
</span><a href="Distribution.Simple.Utils.html#findModuleFilesEx"><span class="hs-identifier hs-var">findModuleFilesEx</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738710"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738696"><span class="hs-identifier hs-var">builtDir</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738655"><span class="hs-identifier hs-var">ext</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Library -&gt; ComponentLocalBuildInfo -&gt; [ModuleName]
</span><a href="Distribution.Simple.LocalBuildInfo.html#allLibModules"><span class="hs-identifier hs-var">allLibModules</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738704"><span class="hs-identifier hs-var">lib</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679738703"><span class="hs-identifier hs-var">clbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2006"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; String -&gt; [(String, String)] -&gt; IO ()
</span><a href="Distribution.Simple.Utils.html#installOrdinaryFiles"><span class="hs-identifier hs-var">installOrdinaryFiles</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738710"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738708"><span class="hs-identifier hs-var">targetDir</span></a></span><span>
</span><span id="line-2007"></span><span>
</span><span id="line-2008"></span><span>    </span><span id="local-6989586621679738681"><span class="annot"><span class="annottext">compiler_id :: CompilerId
</span><a href="#local-6989586621679738681"><span class="hs-identifier hs-var hs-var">compiler_id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; CompilerId
</span><a href="Distribution.Simple.Compiler.html#compilerId"><span class="hs-identifier hs-var">compilerId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Compiler
</span><a href="Distribution.Types.LocalBuildInfo.html#compiler"><span class="hs-identifier hs-var">compiler</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738709"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2009"></span><span>    </span><span id="local-6989586621679738682"><span class="annot"><span class="annottext">platform :: Platform
</span><a href="#local-6989586621679738682"><span class="hs-identifier hs-var hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738709"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-2010"></span><span>    </span><span id="local-6989586621679738678"><span class="annot"><span class="annottext">uid :: UnitId
</span><a href="#local-6989586621679738678"><span class="hs-identifier hs-var hs-var">uid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo -&gt; UnitId
</span><a href="Distribution.Types.ComponentLocalBuildInfo.html#componentUnitId"><span class="hs-identifier hs-var">componentUnitId</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679738703"><span class="hs-identifier hs-var">clbi</span></a></span><span>
</span><span id="line-2011"></span><span>    </span><span id="local-6989586621679738687"><span class="annot"><span class="annottext">profileLibName :: String
</span><a href="#local-6989586621679738687"><span class="hs-identifier hs-var hs-var">profileLibName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; String
</span><a href="Distribution.Simple.BuildPaths.html#mkProfLibName"><span class="hs-identifier hs-var">mkProfLibName</span></a></span><span>          </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621679738678"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-2012"></span><span>    </span><span id="local-6989586621679738688"><span class="annot"><span class="annottext">ghciLibName :: String
</span><a href="#local-6989586621679738688"><span class="hs-identifier hs-var hs-var">ghciLibName</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; String
</span><a href="Distribution.Simple.GHC.Internal.html#mkGHCiLibName"><span class="hs-identifier hs-var">Internal.mkGHCiLibName</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621679738678"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-2013"></span><span>    </span><span id="local-6989586621679738686"><span class="annot"><span class="annottext">ghciProfLibName :: String
</span><a href="#local-6989586621679738686"><span class="hs-identifier hs-var hs-var">ghciProfLibName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; String
</span><a href="Distribution.Simple.GHC.Internal.html#mkGHCiProfLibName"><span class="hs-identifier hs-var">Internal.mkGHCiProfLibName</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621679738678"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-2014"></span><span>
</span><span id="line-2015"></span><span>    </span><span id="local-6989586621679738647"><span class="annot"><span class="annottext">hasLib :: Bool
</span><a href="#local-6989586621679738647"><span class="hs-identifier hs-var hs-var">hasLib</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Library -&gt; ComponentLocalBuildInfo -&gt; [ModuleName]
</span><a href="Distribution.Simple.LocalBuildInfo.html#allLibModules"><span class="hs-identifier hs-var">allLibModules</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738704"><span class="hs-identifier hs-var">lib</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679738703"><span class="hs-identifier hs-var">clbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2016"></span><span>                   </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cSources"><span class="hs-identifier hs-var">cSources</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Library -&gt; BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738704"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2017"></span><span>                   </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cxxSources"><span class="hs-identifier hs-var">cxxSources</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Library -&gt; BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738704"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2018"></span><span>                   </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#cmmSources"><span class="hs-identifier hs-var">cmmSources</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Library -&gt; BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738704"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2019"></span><span>                   </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuildInfo -&gt; [String]
</span><a href="Distribution.Types.BuildInfo.html#asmSources"><span class="hs-identifier hs-var">asmSources</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Library -&gt; BuildInfo
</span><a href="Distribution.Types.Library.html#libBuildInfo"><span class="hs-identifier hs-var">libBuildInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Library
</span><a href="#local-6989586621679738704"><span class="hs-identifier hs-var">lib</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2020"></span><span>    </span><span id="local-6989586621679738646"><span class="annot"><span class="annottext">has_code :: Bool
</span><a href="#local-6989586621679738646"><span class="hs-identifier hs-var hs-var">has_code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentLocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.ComponentLocalBuildInfo.html#componentIsIndefinite"><span class="hs-identifier hs-var">componentIsIndefinite</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentLocalBuildInfo
</span><a href="#local-6989586621679738703"><span class="hs-identifier hs-var">clbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2021"></span><span>    </span><span id="local-6989586621679738698"><span class="annot"><span class="annottext">whenHasCode :: IO () -&gt; IO ()
</span><a href="#local-6989586621679738698"><span class="hs-identifier hs-var hs-var">whenHasCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738646"><span class="hs-identifier hs-var">has_code</span></a></span><span>
</span><span id="line-2022"></span><span>    </span><span id="local-6989586621679738702"><span class="annot"><span class="annottext">whenVanilla :: IO () -&gt; IO ()
</span><a href="#local-6989586621679738702"><span class="hs-identifier hs-var hs-var">whenVanilla</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738647"><span class="hs-identifier hs-var">hasLib</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withVanillaLib"><span class="hs-identifier hs-var">withVanillaLib</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738709"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2023"></span><span>    </span><span id="local-6989586621679738700"><span class="annot"><span class="annottext">whenProf :: IO () -&gt; IO ()
</span><a href="#local-6989586621679738700"><span class="hs-identifier hs-var hs-var">whenProf</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738647"><span class="hs-identifier hs-var">hasLib</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withProfLib"><span class="hs-identifier hs-var">withProfLib</span></a></span><span>    </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738709"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738646"><span class="hs-identifier hs-var">has_code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2024"></span><span>    </span><span id="local-6989586621679738689"><span class="annot"><span class="annottext">whenGHCi :: IO () -&gt; IO ()
</span><a href="#local-6989586621679738689"><span class="hs-identifier hs-var hs-var">whenGHCi</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738647"><span class="hs-identifier hs-var">hasLib</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withGHCiLib"><span class="hs-identifier hs-var">withGHCiLib</span></a></span><span>    </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738709"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738646"><span class="hs-identifier hs-var">has_code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2025"></span><span>    </span><span id="local-6989586621679738699"><span class="annot"><span class="annottext">whenShared :: IO () -&gt; IO ()
</span><a href="#local-6989586621679738699"><span class="hs-identifier hs-var hs-var">whenShared</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738647"><span class="hs-identifier hs-var">hasLib</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Bool
</span><a href="Distribution.Types.LocalBuildInfo.html#withSharedLib"><span class="hs-identifier hs-var">withSharedLib</span></a></span><span>  </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738709"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679738646"><span class="hs-identifier hs-var">has_code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2026"></span><span>
</span><span id="line-2027"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-2028"></span><span class="hs-comment">-- Registering</span><span>
</span><span id="line-2029"></span><span>
</span><span id="line-2030"></span><span class="annot"><a href="Distribution.Simple.GHC.html#hcPkgInfo"><span class="hs-identifier hs-type">hcPkgInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.HcPkg.html#HcPkgInfo"><span class="hs-identifier hs-type">HcPkg.HcPkgInfo</span></a></span><span>
</span><span id="line-2031"></span><span id="hcPkgInfo"><span class="annot"><span class="annottext">hcPkgInfo :: ProgramDb -&gt; HcPkgInfo
</span><a href="Distribution.Simple.GHC.html#hcPkgInfo"><span class="hs-identifier hs-var hs-var">hcPkgInfo</span></a></span></span><span> </span><span id="local-6989586621679738640"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679738640"><span class="hs-identifier hs-var">progdb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.HcPkg.html#HcPkgInfo"><span class="hs-identifier hs-type">HcPkg.HcPkgInfo</span></a></span><span>
</span><span id="line-2032"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hcPkgProgram :: ConfiguredProgram
</span><a href="Distribution.Simple.Program.HcPkg.html#hcPkgProgram"><span class="hs-identifier hs-var">HcPkg.hcPkgProgram</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679738637"><span class="hs-identifier hs-var">ghcPkgProg</span></a></span><span>
</span><span id="line-2033"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">noPkgDbStack :: Bool
</span><a href="Distribution.Simple.Program.HcPkg.html#noPkgDbStack"><span class="hs-identifier hs-var">HcPkg.noPkgDbStack</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679738635"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">6</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">9</span></span><span class="hs-special">]</span><span>
</span><span id="line-2034"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">noVerboseFlag :: Bool
</span><a href="Distribution.Simple.Program.HcPkg.html#noVerboseFlag"><span class="hs-identifier hs-var">HcPkg.noVerboseFlag</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679738635"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">6</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">11</span></span><span class="hs-special">]</span><span>
</span><span id="line-2035"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">flagPackageConf :: Bool
</span><a href="Distribution.Simple.Program.HcPkg.html#flagPackageConf"><span class="hs-identifier hs-var">HcPkg.flagPackageConf</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679738635"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span class="hs-special">]</span><span>
</span><span id="line-2036"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">supportsDirDbs :: Bool
</span><a href="Distribution.Simple.Program.HcPkg.html#supportsDirDbs"><span class="hs-identifier hs-var">HcPkg.supportsDirDbs</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679738635"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">6</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">]</span><span>
</span><span id="line-2037"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">requiresDirDbs :: Bool
</span><a href="Distribution.Simple.Program.HcPkg.html#requiresDirDbs"><span class="hs-identifier hs-var">HcPkg.requiresDirDbs</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679738635"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">]</span><span>
</span><span id="line-2038"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nativeMultiInstance :: Bool
</span><a href="Distribution.Simple.Program.HcPkg.html#nativeMultiInstance"><span class="hs-identifier hs-var">HcPkg.nativeMultiInstance</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679738635"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">]</span><span>
</span><span id="line-2039"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recacheMultiInstance :: Bool
</span><a href="Distribution.Simple.Program.HcPkg.html#recacheMultiInstance"><span class="hs-identifier hs-var">HcPkg.recacheMultiInstance</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679738635"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">6</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">12</span></span><span class="hs-special">]</span><span>
</span><span id="line-2040"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">suppressFilesCheck :: Bool
</span><a href="Distribution.Simple.Program.HcPkg.html#suppressFilesCheck"><span class="hs-identifier hs-var">HcPkg.suppressFilesCheck</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679738635"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">6</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">6</span></span><span class="hs-special">]</span><span>
</span><span id="line-2041"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-2042"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2043"></span><span>    </span><span id="local-6989586621679738635"><span class="annot"><span class="annottext">v :: [Int]
</span><a href="#local-6989586621679738635"><span class="hs-identifier hs-var hs-var">v</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Version -&gt; [Int]
</span><a href="Distribution.Types.Version.html#versionNumbers"><span class="hs-identifier hs-var">versionNumbers</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679738626"><span class="hs-identifier hs-var">ver</span></a></span><span>
</span><span id="line-2044"></span><span>    </span><span id="local-6989586621679738637"><span class="annot"><span class="annottext">ghcPkgProg :: ConfiguredProgram
</span><a href="#local-6989586621679738637"><span class="hs-identifier hs-var hs-var">ghcPkgProg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.hcPkgInfo: no ghc program&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Program -&gt; ProgramDb -&gt; Maybe ConfiguredProgram
</span><a href="Distribution.Simple.Program.Db.html#lookupProgram"><span class="hs-identifier hs-var">lookupProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ghcPkgProgram"><span class="hs-identifier hs-var">ghcPkgProgram</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679738640"><span class="hs-identifier hs-var">progdb</span></a></span><span>
</span><span id="line-2045"></span><span>    </span><span id="local-6989586621679738626"><span class="annot"><span class="annottext">ver :: Version
</span><a href="#local-6989586621679738626"><span class="hs-identifier hs-var hs-var">ver</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.hcPkgInfo: no ghc version&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram -&gt; Maybe Version
</span><a href="Distribution.Simple.Program.Types.html#programVersion"><span class="hs-identifier hs-var">programVersion</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679738637"><span class="hs-identifier hs-var">ghcPkgProg</span></a></span><span>
</span><span id="line-2046"></span><span>
</span><span id="line-2047"></span><span class="annot"><a href="Distribution.Simple.GHC.html#registerPackage"><span class="hs-identifier hs-type">registerPackage</span></a></span><span>
</span><span id="line-2048"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-2049"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.Db.html#ProgramDb"><span class="hs-identifier hs-type">ProgramDb</span></a></span><span>
</span><span id="line-2050"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDBStack"><span class="hs-identifier hs-type">PackageDBStack</span></a></span><span>
</span><span id="line-2051"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.InstalledPackageInfo.html#InstalledPackageInfo"><span class="hs-identifier hs-type">InstalledPackageInfo</span></a></span><span>
</span><span id="line-2052"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.HcPkg.html#RegisterOptions"><span class="hs-identifier hs-type">HcPkg.RegisterOptions</span></a></span><span>
</span><span id="line-2053"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2054"></span><span id="registerPackage"><span class="annot"><span class="annottext">registerPackage :: Verbosity
-&gt; ProgramDb
-&gt; [PackageDB]
-&gt; InstalledPackageInfo
-&gt; RegisterOptions
-&gt; IO ()
</span><a href="Distribution.Simple.GHC.html#registerPackage"><span class="hs-identifier hs-var hs-var">registerPackage</span></a></span></span><span> </span><span id="local-6989586621679738621"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738621"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679738620"><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679738620"><span class="hs-identifier hs-var">progdb</span></a></span></span><span> </span><span id="local-6989586621679738619"><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679738619"><span class="hs-identifier hs-var">packageDbs</span></a></span></span><span> </span><span id="local-6989586621679738618"><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679738618"><span class="hs-identifier hs-var">installedPkgInfo</span></a></span></span><span> </span><span id="local-6989586621679738617"><span class="annot"><span class="annottext">RegisterOptions
</span><a href="#local-6989586621679738617"><span class="hs-identifier hs-var">registerOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2055"></span><span>    </span><span class="annot"><span class="annottext">HcPkgInfo
-&gt; Verbosity
-&gt; [PackageDB]
-&gt; InstalledPackageInfo
-&gt; RegisterOptions
-&gt; IO ()
</span><a href="Distribution.Simple.Program.HcPkg.html#register"><span class="hs-identifier hs-var">HcPkg.register</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProgramDb -&gt; HcPkgInfo
</span><a href="Distribution.Simple.GHC.html#hcPkgInfo"><span class="hs-identifier hs-var">hcPkgInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ProgramDb
</span><a href="#local-6989586621679738620"><span class="hs-identifier hs-var">progdb</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738621"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">[PackageDB]
</span><a href="#local-6989586621679738619"><span class="hs-identifier hs-var">packageDbs</span></a></span><span>
</span><span id="line-2056"></span><span>                   </span><span class="annot"><span class="annottext">InstalledPackageInfo
</span><a href="#local-6989586621679738618"><span class="hs-identifier hs-var">installedPkgInfo</span></a></span><span> </span><span class="annot"><span class="annottext">RegisterOptions
</span><a href="#local-6989586621679738617"><span class="hs-identifier hs-var">registerOptions</span></a></span><span>
</span><span id="line-2057"></span><span>
</span><span id="line-2058"></span><span class="annot"><a href="Distribution.Simple.GHC.html#pkgRoot"><span class="hs-identifier hs-type">pkgRoot</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#PackageDB"><span class="hs-identifier hs-type">PackageDB</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-2059"></span><span id="pkgRoot"><span class="annot"><span class="annottext">pkgRoot :: Verbosity -&gt; LocalBuildInfo -&gt; PackageDB -&gt; IO String
</span><a href="Distribution.Simple.GHC.html#pkgRoot"><span class="hs-identifier hs-var hs-var">pkgRoot</span></a></span></span><span> </span><span id="local-6989586621679738615"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738615"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679738614"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738614"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageDB -&gt; IO String
</span><a href="#local-6989586621679738613"><span class="hs-identifier hs-var">pkgRoot'</span></a></span><span>
</span><span id="line-2060"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-2061"></span><span>    </span><span id="local-6989586621679738613"><span class="annot"><span class="annottext">pkgRoot' :: PackageDB -&gt; IO String
</span><a href="#local-6989586621679738613"><span class="hs-identifier hs-var hs-var">pkgRoot'</span></a></span></span><span> </span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#GlobalPackageDB"><span class="hs-identifier hs-var">GlobalPackageDB</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2062"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679738605"><span class="annot"><span class="annottext">ghcProg :: ConfiguredProgram
</span><a href="#local-6989586621679738605"><span class="hs-identifier hs-var hs-var">ghcProg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.pkgRoot: no ghc program&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Program -&gt; ProgramDb -&gt; Maybe ConfiguredProgram
</span><a href="Distribution.Simple.Program.Db.html#lookupProgram"><span class="hs-identifier hs-var">lookupProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Program
</span><a href="Distribution.Simple.Program.Builtin.html#ghcProgram"><span class="hs-identifier hs-var">ghcProgram</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ProgramDb
</span><a href="Distribution.Types.LocalBuildInfo.html#withPrograms"><span class="hs-identifier hs-var">withPrograms</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738614"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2063"></span><span>      </span><span class="hs-keyword">in</span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#takeDirectory"><span class="hs-identifier hs-var">takeDirectory</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Verbosity -&gt; ConfiguredProgram -&gt; IO String
</span><a href="Distribution.Simple.GHC.html#getGlobalPackageDB"><span class="hs-identifier hs-var">getGlobalPackageDB</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679738615"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">ConfiguredProgram
</span><a href="#local-6989586621679738605"><span class="hs-identifier hs-var">ghcProg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2064"></span><span>    </span><span class="annot"><a href="#local-6989586621679738613"><span class="hs-identifier hs-var">pkgRoot'</span></a></span><span> </span><span class="annot"><span class="annottext">PackageDB
</span><a href="Distribution.Simple.Compiler.html#UserPackageDB"><span class="hs-identifier hs-var">UserPackageDB</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2065"></span><span>      </span><span id="local-6989586621679738604"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738604"><span class="hs-identifier hs-var">appDir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO String
</span><a href="Distribution.Simple.GHC.html#getGhcAppDir"><span class="hs-identifier hs-var">getGhcAppDir</span></a></span><span>
</span><span id="line-2066"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679738603"><span class="annot"><span class="annottext">ver :: Version
</span><a href="#local-6989586621679738603"><span class="hs-identifier hs-var hs-var">ver</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; Version
</span><a href="Distribution.Simple.Compiler.html#compilerVersion"><span class="hs-identifier hs-var">compilerVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Compiler
</span><a href="Distribution.Types.LocalBuildInfo.html#compiler"><span class="hs-identifier hs-var">compiler</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679738614"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2067"></span><span>          </span><span id="local-6989586621679738601"><span class="annot"><span class="annottext">subdir :: String
</span><a href="#local-6989586621679738601"><span class="hs-identifier hs-var hs-var">subdir</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="../../base-4.16.3.0/src/System-Info.html#arch"><span class="hs-identifier hs-var">System.Info.arch</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'-'</span></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">String
</span><a href="../../base-4.16.3.0/src/System-Info.html#os"><span class="hs-identifier hs-var">System.Info.os</span></a></span><span>
</span><span id="line-2068"></span><span>                     </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'-'</span></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">forall a. Pretty a =&gt; a -&gt; String
</span><a href="Distribution.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679738603"><span class="hs-identifier hs-var">ver</span></a></span><span>
</span><span id="line-2069"></span><span>          </span><span id="local-6989586621679738598"><span class="annot"><span class="annottext">rootDir :: String
</span><a href="#local-6989586621679738598"><span class="hs-identifier hs-var hs-var">rootDir</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738604"><span class="hs-identifier hs-var">appDir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738601"><span class="hs-identifier hs-var">subdir</span></a></span><span>
</span><span id="line-2070"></span><span>      </span><span class="hs-comment">-- We must create the root directory for the user package database if it</span><span>
</span><span id="line-2071"></span><span>      </span><span class="hs-comment">-- does not yet exists. Otherwise '${pkgroot}' will resolve to a</span><span>
</span><span id="line-2072"></span><span>      </span><span class="hs-comment">-- directory at the time of 'ghc-pkg register', and registration will</span><span>
</span><span id="line-2073"></span><span>      </span><span class="hs-comment">-- fail.</span><span>
</span><span id="line-2074"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; IO ()
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#createDirectoryIfMissing"><span class="hs-identifier hs-var">createDirectoryIfMissing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738598"><span class="hs-identifier hs-var">rootDir</span></a></span><span>
</span><span id="line-2075"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738598"><span class="hs-identifier hs-var">rootDir</span></a></span><span>
</span><span id="line-2076"></span><span>    </span><span class="annot"><a href="#local-6989586621679738613"><span class="hs-identifier hs-var">pkgRoot'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.Compiler.html#SpecificPackageDB"><span class="hs-identifier hs-type">SpecificPackageDB</span></a></span><span> </span><span id="local-6989586621679738597"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738597"><span class="hs-identifier hs-var">fp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#takeDirectory"><span class="hs-identifier hs-var">takeDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738597"><span class="hs-identifier hs-var">fp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2077"></span><span>
</span><span id="line-2078"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-2079"></span><span class="hs-comment">-- Utils</span><span>
</span><span id="line-2080"></span><span>
</span><span id="line-2081"></span><span class="annot"><a href="Distribution.Simple.GHC.html#isDynamic"><span class="hs-identifier hs-type">isDynamic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2082"></span><span id="isDynamic"><span class="annot"><span class="annottext">isDynamic :: Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.html#isDynamic"><span class="hs-identifier hs-var hs-var">isDynamic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.Internal.html#ghcLookupProperty"><span class="hs-identifier hs-var">Internal.ghcLookupProperty</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC Dynamic&quot;</span></span><span>
</span><span id="line-2083"></span><span>
</span><span id="line-2084"></span><span class="annot"><a href="Distribution.Simple.GHC.html#supportsDynamicToo"><span class="hs-identifier hs-type">supportsDynamicToo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2085"></span><span id="supportsDynamicToo"><span class="annot"><span class="annottext">supportsDynamicToo :: Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.html#supportsDynamicToo"><span class="hs-identifier hs-var hs-var">supportsDynamicToo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.Internal.html#ghcLookupProperty"><span class="hs-identifier hs-var">Internal.ghcLookupProperty</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Support dynamic-too&quot;</span></span><span>
</span><span id="line-2086"></span><span>
</span><span id="line-2087"></span><span class="annot"><a href="Distribution.Simple.GHC.html#withExt"><span class="hs-identifier hs-type">withExt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-2088"></span><span id="withExt"><span class="annot"><span class="annottext">withExt :: String -&gt; String -&gt; String
</span><a href="Distribution.Simple.GHC.html#withExt"><span class="hs-identifier hs-var hs-var">withExt</span></a></span></span><span> </span><span id="local-6989586621679738595"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738595"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span id="local-6989586621679738594"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738594"><span class="hs-identifier hs-var">ext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738595"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#takeExtension"><span class="hs-identifier hs-var">takeExtension</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738595"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'.'</span></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738594"><span class="hs-identifier hs-var">ext</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679738594"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-2089"></span></pre></body></html>
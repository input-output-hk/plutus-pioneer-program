<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP                 #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveFunctor       #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE MultiWayIf          #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The GRASP/AQUA Project, Glasgow University, 1993-1998


A ``lint'' pass to check for Core correctness.
See Note [Core Lint guarantee].
-}</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Core.Lint</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreBindings"><span class="hs-identifier">lintCoreBindings</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#lintUnfolding"><span class="hs-identifier">lintUnfolding</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="GHC.Core.Lint.html#lintPassResult"><span class="hs-identifier">lintPassResult</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#lintInteractiveExpr"><span class="hs-identifier">lintInteractiveExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#lintExpr"><span class="hs-identifier">lintExpr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="GHC.Core.Lint.html#lintAnnots"><span class="hs-identifier">lintAnnots</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#lintAxioms"><span class="hs-identifier">lintAxioms</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="GHC.Core.Lint.html#interactiveInScope"><span class="hs-identifier">interactiveInScope</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Debug output</span></span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="GHC.Core.Lint.html#endPass"><span class="hs-identifier">endPass</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#endPassIO"><span class="hs-identifier">endPassIO</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="GHC.Core.Lint.html#displayLintResults"><span class="hs-identifier">displayLintResults</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#dumpPassResult"><span class="hs-identifier">dumpPassResult</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="GHC.Core.Lint.html#dumpIfSet"><span class="hs-identifier">dumpIfSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">

#include &quot;HsVersions.h&quot;
</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html"><span class="hs-identifier">GHC.Driver.Session</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Ppr.html"><span class="hs-identifier">GHC.Driver.Ppr</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Env.html"><span class="hs-identifier">GHC.Driver.Env</span></a></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.html"><span class="hs-identifier">GHC.Core</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.FVs.html"><span class="hs-identifier">GHC.Core.FVs</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Utils.html"><span class="hs-identifier">GHC.Core.Utils</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Stats.html"><span class="hs-identifier">GHC.Core.Stats</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.Stats.html#coreBindsStats"><span class="hs-identifier">coreBindsStats</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Opt.Monad.html"><span class="hs-identifier">GHC.Core.Opt.Monad</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Literal.html"><span class="hs-identifier">GHC.Types.Literal</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html"><span class="hs-identifier">GHC.Core.DataCon</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.Prim.html"><span class="hs-identifier">GHC.Builtin.Types.Prim</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html"><span class="hs-identifier">GHC.Builtin.Types</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html#multiplicityTy"><span class="hs-identifier">multiplicityTy</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html"><span class="hs-identifier">GHC.Tc.Utils.TcType</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#isFloatingTy"><span class="hs-identifier">isFloatingTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#isTyFamFree"><span class="hs-identifier">isTyFamFree</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Var</span></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html"><span class="hs-identifier">GHC.Types.Var.Env</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html"><span class="hs-identifier">GHC.Types.Var.Set</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Set.html"><span class="hs-identifier">GHC.Types.Unique.Set</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Set.html#nonDetEltsUniqSet"><span class="hs-identifier">nonDetEltsUniqSet</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html"><span class="hs-identifier">GHC.Types.Name.Env</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.html"><span class="hs-identifier">GHC.Types.Id</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html"><span class="hs-identifier">GHC.Types.Id.Info</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Ppr.html"><span class="hs-identifier">GHC.Core.Ppr</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.html"><span class="hs-identifier">GHC.Core.Coercion</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html"><span class="hs-identifier">GHC.Types.Tickish</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Type</span></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html"><span class="hs-identifier">GHC.Core.Multiplicity</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html"><span class="hs-identifier">GHC.Core.UsageEnv</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.RepType.html"><span class="hs-identifier">GHC.Types.RepType</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html"><span class="hs-identifier">GHC.Core.TyCo.Rep</span></a></span><span>   </span><span class="hs-comment">-- checks validity of types/coercions</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Subst.html"><span class="hs-identifier">GHC.Core.TyCo.Subst</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.FVs.html"><span class="hs-identifier">GHC.Core.TyCo.FVs</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html"><span class="hs-identifier">GHC.Core.TyCo.Ppr</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier">pprTyVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html#pprTyVars"><span class="hs-identifier">pprTyVars</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TyCon</span></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html"><span class="hs-identifier">GHC.Core.Coercion.Axiom</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Unify.html"><span class="hs-identifier">GHC.Core.Unify</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html"><span class="hs-identifier">GHC.Utils.Error</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html"><span class="hs-identifier">GHC.Utils.Error</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Err</span></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html"><span class="hs-identifier">GHC.Utils.Logger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier">Logger</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#putLogMsg"><span class="hs-identifier">putLogMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#putDumpMsg"><span class="hs-identifier">putDumpMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#DumpFormat"><span class="hs-identifier">DumpFormat</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#getLogger"><span class="hs-identifier">getLogger</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html"><span class="hs-identifier">GHC.Utils.Logger</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Logger</span></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html"><span class="hs-identifier">GHC.Data.List.SetOps</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Outputable</span></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html"><span class="hs-identifier">GHC.Core.InstEnv</span></a></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html#instanceDFunId"><span class="hs-identifier">instanceDFunId</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Opt.html"><span class="hs-identifier">GHC.Core.Coercion.Opt</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Opt.html#checkAxInstCo"><span class="hs-identifier">checkAxInstCo</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Opt.Arity.html"><span class="hs-identifier">GHC.Core.Opt.Arity</span></a></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.Opt.Arity.html#typeArity"><span class="hs-identifier">typeArity</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Demand.html"><span class="hs-identifier">GHC.Types.Demand</span></a></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Demand.html#splitStrictSig"><span class="hs-identifier">splitStrictSig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Demand.html#isDeadEndDiv"><span class="hs-identifier">isDeadEndDiv</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.TypeEnv.html"><span class="hs-identifier">GHC.Types.TypeEnv</span></a></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModGuts.html"><span class="hs-identifier">GHC.Unit.Module.ModGuts</span></a></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Runtime.Context.html"><span class="hs-identifier">GHC.Runtime.Context</span></a></span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Control-Monad.html#"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.html"><span class="hs-identifier">GHC.Utils.Monad</span></a></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Foldable.html#"><span class="hs-identifier">Data.Foldable</span></a></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Foldable.html#toList"><span class="hs-identifier">toList</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-List-NonEmpty.html#"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#NonEmpty"><span class="hs-identifier">NonEmpty</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-List-NonEmpty.html#groupWith"><span class="hs-identifier">groupWith</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-List.html#"><span class="hs-identifier">Data.List</span></a></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-OldList.html#partition"><span class="hs-identifier">partition</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Maybe.html#"><span class="hs-identifier">Data.Maybe</span></a></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Pair.html"><span class="hs-identifier">GHC.Data.Pair</span></a></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../ghc-boot-9.2.4/src/GHC-LanguageExtensions.html#"><span class="hs-identifier">GHC.LanguageExtensions</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LangExt</span></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-comment">{-
Note [Core Lint guarantee]
~~~~~~~~~~~~~~~~~~~~~~~~~~
Core Lint is the type-checker for Core. Using it, we get the following guarantee:

If all of:
1. Core Lint passes,
2. there are no unsafe coercions (i.e. unsafeEqualityProof),
3. all plugin-supplied coercions (i.e. PluginProv) are valid, and
4. all case-matches are complete
then running the compiled program will not seg-fault, assuming no bugs downstream
(e.g. in the code generator). This guarantee is quite powerful, in that it allows us
to decouple the safety of the resulting program from the type inference algorithm.

However, do note point (4) above. Core Lint does not check for incomplete case-matches;
see Note [Case expression invariants] in GHC.Core, invariant (4). As explained there,
an incomplete case-match might slip by Core Lint and cause trouble at runtime.

Note [GHC Formalism]
~~~~~~~~~~~~~~~~~~~~
This file implements the type-checking algorithm for System FC, the &quot;official&quot;
name of the Core language. Type safety of FC is heart of the claim that
executables produced by GHC do not have segmentation faults. Thus, it is
useful to be able to reason about System FC independently of reading the code.
To this purpose, there is a document core-spec.pdf built in docs/core-spec that
contains a formalism of the types and functions dealt with here. If you change
just about anything in this file or you change other types/functions throughout
the Core language (all signposted to this note), you should update that
formalism. See docs/core-spec/README for more info about how to do so.

Note [check vs lint]
~~~~~~~~~~~~~~~~~~~~
This file implements both a type checking algorithm and also general sanity
checking. For example, the &quot;sanity checking&quot; checks for TyConApp on the left
of an AppTy, which should never happen. These sanity checks don't really
affect any notion of type soundness. Yet, it is convenient to do the sanity
checks at the same time as the type checks. So, we use the following naming
convention:

- Functions that begin with 'lint'... are involved in type checking. These
  functions might also do some sanity checking.

- Functions that begin with 'check'... are *not* involved in type checking.
  They exist only for sanity checking.

Issues surrounding variable naming, shadowing, and such are considered *not*
to be part of type checking, as the formalism omits these details.

Summary of checks
~~~~~~~~~~~~~~~~~
Checks that a set of core bindings is well-formed.  The PprStyle and String
just control what we print in the event of an error.  The Bool value
indicates whether we have done any specialisation yet (in which case we do
some extra checks).

We check for
        (a) type errors
        (b) Out-of-scope type variables
        (c) Out-of-scope local variables
        (d) Ill-kinded types
        (e) Incorrect unsafe coercions

If we have done specialisation the we check that there are
        (a) No top-level bindings of primitive (unboxed type)

Outstanding issues:

    -- Things are *not* OK if:
    --
    --  * Unsaturated type app before specialisation has been done;
    --
    --  * Oversaturated type app after specialisation (eta reduction
    --   may well be happening...);


Note [Linting function types]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
As described in Note [Representation of function types], all saturated
applications of funTyCon are represented with the FunTy constructor. We check
this invariant in lintType.

Note [Linting type lets]
~~~~~~~~~~~~~~~~~~~~~~~~
In the desugarer, it's very very convenient to be able to say (in effect)
        let a = Type Bool in
        let x::a = True in &lt;body&gt;
That is, use a type let.  See Note [Core type and coercion invariant] in &quot;GHC.Core&quot;.
One place it is used is in mkWwArgs; see Note [Join points and beta-redexes]
in GHC.Core.Opt.WorkWrap.Utils.  (Maybe there are other &quot;clients&quot; of this feature; I'm not sure).

* Hence when linting &lt;body&gt; we need to remember that a=Int, else we
  might reject a correct program.  So we carry a type substitution (in
  this example [a -&gt; Bool]) and apply this substitution before
  comparing types. In effect, in Lint, type equality is always
  equality-modulo-le-subst.  This is in the le_subst field of
  LintEnv.  But nota bene:

  (SI1) The le_subst substitution is applied to types and coercions only

  (SI2) The result of that substitution is used only to check for type
        equality, to check well-typed-ness, /but is then discarded/.
        The result of substittion does not outlive the CoreLint pass.

  (SI3) The InScopeSet of le_subst includes only TyVar and CoVar binders.

* The function
        lintInTy :: Type -&gt; LintM (Type, Kind)
  returns a substituted type.

* When we encounter a binder (like x::a) we must apply the substitution
  to the type of the binding variable.  lintBinders does this.

* Clearly we need to clone tyvar binders as we go.

* But take care (#17590)! We must also clone CoVar binders:
    let a = TYPE (ty |&gt; cv)
    in \cv -&gt; blah
  blindly substituting for `a` might capture `cv`.

* Alas, when cloning a coercion variable we might choose a unique
  that happens to clash with an inner Id, thus
      \cv_66 -&gt; let wild_X7 = blah in blah
  We decide to clone `cv_66` because it's already in scope.  Fine,
  choose a new unique.  Aha, X7 looks good.  So we check the lambda
  body with le_subst of [cv_66 :-&gt; cv_X7]

  This is all fine, even though we use the same unique as wild_X7.
  As (SI2) says, we do /not/ return a new lambda
     (\cv_X7 -&gt; let wild_X7 = blah in ...)
  We simply use the le_subst substitution in types/coercions only, when
  checking for equality.

* We still need to check that Id occurrences are bound by some
  enclosing binding.  We do /not/ use the InScopeSet for the le_subst
  for this purpose -- it contains only TyCoVars.  Instead we have a separate
  le_ids for the in-scope Id binders.

Sigh.  We might want to explore getting rid of type-let!

Note [Bad unsafe coercion]
~~~~~~~~~~~~~~~~~~~~~~~~~~
For discussion see https://gitlab.haskell.org/ghc/ghc/wikis/bad-unsafe-coercions
Linter introduces additional rules that checks improper coercion between
different types, called bad coercions. Following coercions are forbidden:

  (a) coercions between boxed and unboxed values;
  (b) coercions between unlifted values of the different sizes, here
      active size is checked, i.e. size of the actual value but not
      the space allocated for value;
  (c) coercions between floating and integral boxed values, this check
      is not yet supported for unboxed tuples, as no semantics were
      specified for that;
  (d) coercions from / to vector type
  (e) If types are unboxed tuples then tuple (# A_1,..,A_n #) can be
      coerced to (# B_1,..,B_m #) if n=m and for each pair A_i, B_i rules
      (a-e) holds.

Note [Join points]
~~~~~~~~~~~~~~~~~~
We check the rules listed in Note [Invariants on join points] in GHC.Core. The
only one that causes any difficulty is the first: All occurrences must be tail
calls. To this end, along with the in-scope set, we remember in le_joins the
subset of in-scope Ids that are valid join ids. For example:

  join j x = ... in
  case e of
    A -&gt; jump j y -- good
    B -&gt; case (jump j z) of -- BAD
           C -&gt; join h = jump j w in ... -- good
           D -&gt; let x = jump j v in ... -- BAD

A join point remains valid in case branches, so when checking the A
branch, j is still valid. When we check the scrutinee of the inner
case, however, we set le_joins to empty, and catch the
error. Similarly, join points can occur free in RHSes of other join
points but not the RHSes of value bindings (thunks and functions).

************************************************************************
*                                                                      *
                 Beginning and ending passes
*                                                                      *
************************************************************************

These functions are not CoreM monad stuff, but they probably ought to
be, and it makes a convenient place for them.  They print out stuff
before and after core passes, and do Core Lint when necessary.
-}</span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span class="annot"><a href="GHC.Core.Lint.html#endPass"><span class="hs-identifier hs-type">endPass</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreToDo"><span class="hs-identifier hs-type">CoreToDo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreProgram"><span class="hs-identifier hs-type">CoreProgram</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreM"><span class="hs-identifier hs-type">CoreM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span id="endPass"><span class="annot"><span class="annottext">endPass :: CoreToDo -&gt; CoreProgram -&gt; [CoreRule] -&gt; CoreM ()
</span><a href="GHC.Core.Lint.html#endPass"><span class="hs-identifier hs-var hs-var">endPass</span></a></span></span><span> </span><span id="local-6989586621681151435"><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151435"><span class="hs-identifier hs-var">pass</span></a></span></span><span> </span><span id="local-6989586621681151434"><span class="annot"><span class="annottext">CoreProgram
</span><a href="#local-6989586621681151434"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621681151433"><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681151433"><span class="hs-identifier hs-var">rules</span></a></span></span><span>
</span><span id="line-288"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681151432"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681151432"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoreM HscEnv
</span><a href="GHC.Core.Opt.Monad.html#getHscEnv"><span class="hs-identifier hs-var">getHscEnv</span></a></span><span>
</span><span id="line-289"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681151430"><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="#local-6989586621681151430"><span class="hs-identifier hs-var">print_unqual</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoreM PrintUnqualified
</span><a href="GHC.Core.Opt.Monad.html#getPrintUnqualified"><span class="hs-identifier hs-var">getPrintUnqualified</span></a></span><span>
</span><span id="line-290"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.3.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
-&gt; PrintUnqualified
-&gt; CoreToDo
-&gt; CoreProgram
-&gt; [CoreRule]
-&gt; IO ()
</span><a href="GHC.Core.Lint.html#endPassIO"><span class="hs-identifier hs-var">endPassIO</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681151432"><span class="hs-identifier hs-var">hsc_env</span></a></span><span> </span><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="#local-6989586621681151430"><span class="hs-identifier hs-var">print_unqual</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151435"><span class="hs-identifier hs-var">pass</span></a></span><span> </span><span class="annot"><span class="annottext">CoreProgram
</span><a href="#local-6989586621681151434"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681151433"><span class="hs-identifier hs-var">rules</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span class="annot"><a href="GHC.Core.Lint.html#endPassIO"><span class="hs-identifier hs-type">endPassIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Env.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#PrintUnqualified"><span class="hs-identifier hs-type">PrintUnqualified</span></a></span><span>
</span><span id="line-293"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreToDo"><span class="hs-identifier hs-type">CoreToDo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreProgram"><span class="hs-identifier hs-type">CoreProgram</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span class="hs-comment">-- Used by the IO-is CorePrep too</span><span>
</span><span id="line-295"></span><span id="endPassIO"><span class="annot"><span class="annottext">endPassIO :: HscEnv
-&gt; PrintUnqualified
-&gt; CoreToDo
-&gt; CoreProgram
-&gt; [CoreRule]
-&gt; IO ()
</span><a href="GHC.Core.Lint.html#endPassIO"><span class="hs-identifier hs-var hs-var">endPassIO</span></a></span></span><span> </span><span id="local-6989586621681151427"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681151427"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span id="local-6989586621681151426"><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="#local-6989586621681151426"><span class="hs-identifier hs-var">print_unqual</span></a></span></span><span> </span><span id="local-6989586621681151425"><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151425"><span class="hs-identifier hs-var">pass</span></a></span></span><span> </span><span id="local-6989586621681151424"><span class="annot"><span class="annottext">CoreProgram
</span><a href="#local-6989586621681151424"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621681151423"><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681151423"><span class="hs-identifier hs-var">rules</span></a></span></span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Logger
-&gt; DynFlags
-&gt; PrintUnqualified
-&gt; Maybe DumpFlag
-&gt; SDoc
-&gt; SDoc
-&gt; CoreProgram
-&gt; [CoreRule]
-&gt; IO ()
</span><a href="GHC.Core.Lint.html#dumpPassResult"><span class="hs-identifier hs-var">dumpPassResult</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681151422"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151421"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="#local-6989586621681151426"><span class="hs-identifier hs-var">print_unqual</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe DumpFlag
</span><a href="#local-6989586621681151420"><span class="hs-identifier hs-var">mb_flag</span></a></span><span>
</span><span id="line-297"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151425"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreToDo -&gt; SDoc
</span><a href="GHC.Core.Opt.Monad.html#pprPassDetails"><span class="hs-identifier hs-var">pprPassDetails</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151425"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoreProgram
</span><a href="#local-6989586621681151424"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681151423"><span class="hs-identifier hs-var">rules</span></a></span><span>
</span><span id="line-298"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; CoreToDo -&gt; CoreProgram -&gt; IO ()
</span><a href="GHC.Core.Lint.html#lintPassResult"><span class="hs-identifier hs-var">lintPassResult</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681151427"><span class="hs-identifier hs-var">hsc_env</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151425"><span class="hs-identifier hs-var">pass</span></a></span><span> </span><span class="annot"><span class="annottext">CoreProgram
</span><a href="#local-6989586621681151424"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-300"></span><span>    </span><span id="local-6989586621681151422"><span class="annot"><span class="annottext">logger :: Logger
</span><a href="#local-6989586621681151422"><span class="hs-identifier hs-var hs-var">logger</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; Logger
</span><a href="GHC.Driver.Env.Types.html#hsc_logger"><span class="hs-identifier hs-var">hsc_logger</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681151427"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-301"></span><span>    </span><span id="local-6989586621681151421"><span class="annot"><span class="annottext">dflags :: DynFlags
</span><a href="#local-6989586621681151421"><span class="hs-identifier hs-var hs-var">dflags</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; DynFlags
</span><a href="GHC.Driver.Env.Types.html#hsc_dflags"><span class="hs-identifier hs-var">hsc_dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681151427"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-302"></span><span>    </span><span id="local-6989586621681151420"><span class="annot"><span class="annottext">mb_flag :: Maybe DumpFlag
</span><a href="#local-6989586621681151420"><span class="hs-identifier hs-var hs-var">mb_flag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CoreToDo -&gt; Maybe DumpFlag
</span><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151425"><span class="hs-identifier hs-var">pass</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-303"></span><span>                </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681151414"><span class="annot"><span class="annottext">DumpFlag
</span><a href="#local-6989586621681151414"><span class="hs-identifier hs-var">flag</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DumpFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#dopt"><span class="hs-identifier hs-var">dopt</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="#local-6989586621681151414"><span class="hs-identifier hs-var">flag</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151421"><span class="hs-identifier hs-var">dflags</span></a></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="#local-6989586621681151414"><span class="hs-identifier hs-var">flag</span></a></span><span>
</span><span id="line-304"></span><span>                          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DumpFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#dopt"><span class="hs-identifier hs-var">dopt</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_verbose_core2core"><span class="hs-identifier hs-var">Opt_D_verbose_core2core</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151421"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="#local-6989586621681151414"><span class="hs-identifier hs-var">flag</span></a></span><span>
</span><span id="line-305"></span><span>                </span><span class="annot"><span class="annottext">Maybe DumpFlag
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpIfSet"><span class="hs-identifier hs-type">dumpIfSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreToDo"><span class="hs-identifier hs-type">CoreToDo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span id="dumpIfSet"><span class="annot"><span class="annottext">dumpIfSet :: Logger -&gt; DynFlags -&gt; Bool -&gt; CoreToDo -&gt; SDoc -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Core.Lint.html#dumpIfSet"><span class="hs-identifier hs-var hs-var">dumpIfSet</span></a></span></span><span> </span><span id="local-6989586621681151411"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681151411"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681151410"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151410"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681151409"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681151409"><span class="hs-identifier hs-var">dump_me</span></a></span></span><span> </span><span id="local-6989586621681151408"><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151408"><span class="hs-identifier hs-var">pass</span></a></span></span><span> </span><span id="local-6989586621681151407"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151407"><span class="hs-identifier hs-var">extra_info</span></a></span></span><span> </span><span id="local-6989586621681151406"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151406"><span class="hs-identifier hs-var">doc</span></a></span></span><span>
</span><span id="line-309"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; Bool -&gt; String -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Logger.html#dumpIfSet"><span class="hs-identifier hs-var">Logger.dumpIfSet</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681151411"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151410"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681151409"><span class="hs-identifier hs-var">dump_me</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; SDoc -&gt; String
</span><a href="GHC.Driver.Ppr.html#showSDoc"><span class="hs-identifier hs-var">showSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151410"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151408"><span class="hs-identifier hs-var">pass</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151407"><span class="hs-identifier hs-var">extra_info</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151406"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpPassResult"><span class="hs-identifier hs-type">dumpPassResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span>
</span><span id="line-312"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>
</span><span id="line-313"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#PrintUnqualified"><span class="hs-identifier hs-type">PrintUnqualified</span></a></span><span>
</span><span id="line-314"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html#DumpFlag"><span class="hs-identifier hs-type">DumpFlag</span></a></span><span>        </span><span class="hs-comment">-- Just df =&gt; show details in a file whose</span><span>
</span><span id="line-315"></span><span>                                        </span><span class="hs-comment">--            name is specified by df</span><span>
</span><span id="line-316"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>                  </span><span class="hs-comment">-- Header</span><span>
</span><span id="line-317"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>                  </span><span class="hs-comment">-- Extra info to appear after header</span><span>
</span><span id="line-318"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreProgram"><span class="hs-identifier hs-type">CoreProgram</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-319"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-320"></span><span id="dumpPassResult"><span class="annot"><span class="annottext">dumpPassResult :: Logger
-&gt; DynFlags
-&gt; PrintUnqualified
-&gt; Maybe DumpFlag
-&gt; SDoc
-&gt; SDoc
-&gt; CoreProgram
-&gt; [CoreRule]
-&gt; IO ()
</span><a href="GHC.Core.Lint.html#dumpPassResult"><span class="hs-identifier hs-var hs-var">dumpPassResult</span></a></span></span><span> </span><span id="local-6989586621681151402"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681151402"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681151401"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151401"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681151400"><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="#local-6989586621681151400"><span class="hs-identifier hs-var">unqual</span></a></span></span><span> </span><span id="local-6989586621681151399"><span class="annot"><span class="annottext">Maybe DumpFlag
</span><a href="#local-6989586621681151399"><span class="hs-identifier hs-var">mb_flag</span></a></span></span><span> </span><span id="local-6989586621681151398"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151398"><span class="hs-identifier hs-var">hdr</span></a></span></span><span> </span><span id="local-6989586621681151397"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151397"><span class="hs-identifier hs-var">extra_info</span></a></span></span><span> </span><span id="local-6989586621681151396"><span class="annot"><span class="annottext">CoreProgram
</span><a href="#local-6989586621681151396"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621681151395"><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681151395"><span class="hs-identifier hs-var">rules</span></a></span></span><span>
</span><span id="line-321"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe DumpFlag
</span><a href="#local-6989586621681151399"><span class="hs-identifier hs-var">mb_flag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681151393"><span class="annot"><span class="annottext">DumpFlag
</span><a href="#local-6989586621681151393"><span class="hs-identifier hs-var">flag</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-322"></span><span>           </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681151392"><span class="annot"><span class="annottext">sty :: PprStyle
</span><a href="#local-6989586621681151392"><span class="hs-identifier hs-var hs-var">sty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrintUnqualified -&gt; PprStyle
</span><a href="GHC.Utils.Outputable.html#mkDumpStyle"><span class="hs-identifier hs-var">mkDumpStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="#local-6989586621681151400"><span class="hs-identifier hs-var">unqual</span></a></span><span>
</span><span id="line-323"></span><span>           </span><span class="annot"><span class="annottext">Logger -&gt; DumpAction
</span><a href="GHC.Utils.Logger.html#putDumpMsg"><span class="hs-identifier hs-var">putDumpMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681151402"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151401"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="#local-6989586621681151392"><span class="hs-identifier hs-var">sty</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="#local-6989586621681151393"><span class="hs-identifier hs-var">flag</span></a></span><span>
</span><span id="line-324"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; SDoc -&gt; String
</span><a href="GHC.Driver.Ppr.html#showSDoc"><span class="hs-identifier hs-var">showSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151401"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151398"><span class="hs-identifier hs-var">hdr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">DumpFormat
</span><a href="GHC.Utils.Logger.html#FormatCore"><span class="hs-identifier hs-var">FormatCore</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151389"><span class="hs-identifier hs-var">dump_doc</span></a></span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span>         </span><span class="hs-comment">-- Report result size</span><span>
</span><span id="line-327"></span><span>         </span><span class="hs-comment">-- This has the side effect of forcing the intermediate to be evaluated</span><span>
</span><span id="line-328"></span><span>         </span><span class="hs-comment">-- if it's not already forced by a -ddump flag.</span><span>
</span><span id="line-329"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; JoinArity -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier hs-var">Err.debugTraceMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681151402"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151401"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151387"><span class="hs-identifier hs-var">size_doc</span></a></span><span>
</span><span id="line-330"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-333"></span><span>    </span><span id="local-6989586621681151387"><span class="annot"><span class="annottext">size_doc :: SDoc
</span><a href="#local-6989586621681151387"><span class="hs-identifier hs-var hs-var">size_doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Result size of&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151398"><span class="hs-identifier hs-var">hdr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#equals"><span class="hs-identifier hs-var">equals</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreProgram -&gt; CoreStats
</span><a href="GHC.Core.Stats.html#coreBindsStats"><span class="hs-identifier hs-var">coreBindsStats</span></a></span><span> </span><span class="annot"><span class="annottext">CoreProgram
</span><a href="#local-6989586621681151396"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span>    </span><span id="local-6989586621681151389"><span class="annot"><span class="annottext">dump_doc :: SDoc
</span><a href="#local-6989586621681151389"><span class="hs-identifier hs-var hs-var">dump_doc</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151397"><span class="hs-identifier hs-var">extra_info</span></a></span><span>
</span><span id="line-336"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151387"><span class="hs-identifier hs-var">size_doc</span></a></span><span>
</span><span id="line-337"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#blankLine"><span class="hs-identifier hs-var">blankLine</span></a></span><span>
</span><span id="line-338"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoreProgram -&gt; SDoc
</span><a href="GHC.Core.Ppr.html#pprCoreBindingsWithSize"><span class="hs-identifier hs-var">pprCoreBindingsWithSize</span></a></span><span> </span><span class="annot"><span class="annottext">CoreProgram
</span><a href="#local-6989586621681151396"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-339"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppUnless"><span class="hs-identifier hs-var">ppUnless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681151395"><span class="hs-identifier hs-var">rules</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151377"><span class="hs-identifier hs-var">pp_rules</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-340"></span><span>    </span><span id="local-6989586621681151377"><span class="annot"><span class="annottext">pp_rules :: SDoc
</span><a href="#local-6989586621681151377"><span class="hs-identifier hs-var hs-var">pp_rules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#blankLine"><span class="hs-identifier hs-var">blankLine</span></a></span><span>
</span><span id="line-341"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;------ Local rules for imported ids --------&quot;</span></span><span>
</span><span id="line-342"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[CoreRule] -&gt; SDoc
</span><a href="GHC.Core.Ppr.html#pprRules"><span class="hs-identifier hs-var">pprRules</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681151395"><span class="hs-identifier hs-var">rules</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-343"></span><span>
</span><span id="line-344"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-type">coreDumpFlag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreToDo"><span class="hs-identifier hs-type">CoreToDo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html#DumpFlag"><span class="hs-identifier hs-type">DumpFlag</span></a></span><span>
</span><span id="line-345"></span><span id="coreDumpFlag"><span class="annot"><span class="annottext">coreDumpFlag :: CoreToDo -&gt; Maybe DumpFlag
</span><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var hs-var">coreDumpFlag</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreDoSimplify"><span class="hs-identifier hs-type">CoreDoSimplify</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_verbose_core2core"><span class="hs-identifier hs-var">Opt_D_verbose_core2core</span></a></span><span>
</span><span id="line-346"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreDoPluginPass"><span class="hs-identifier hs-type">CoreDoPluginPass</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_verbose_core2core"><span class="hs-identifier hs-var">Opt_D_verbose_core2core</span></a></span><span>
</span><span id="line-347"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDoFloatInwards"><span class="hs-identifier hs-var">CoreDoFloatInwards</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_verbose_core2core"><span class="hs-identifier hs-var">Opt_D_verbose_core2core</span></a></span><span>
</span><span id="line-348"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreDoFloatOutwards"><span class="hs-identifier hs-type">CoreDoFloatOutwards</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_verbose_core2core"><span class="hs-identifier hs-var">Opt_D_verbose_core2core</span></a></span><span>
</span><span id="line-349"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreLiberateCase"><span class="hs-identifier hs-var">CoreLiberateCase</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_verbose_core2core"><span class="hs-identifier hs-var">Opt_D_verbose_core2core</span></a></span><span>
</span><span id="line-350"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDoStaticArgs"><span class="hs-identifier hs-var">CoreDoStaticArgs</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_verbose_core2core"><span class="hs-identifier hs-var">Opt_D_verbose_core2core</span></a></span><span>
</span><span id="line-351"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDoCallArity"><span class="hs-identifier hs-var">CoreDoCallArity</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_call_arity"><span class="hs-identifier hs-var">Opt_D_dump_call_arity</span></a></span><span>
</span><span id="line-352"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDoExitify"><span class="hs-identifier hs-var">CoreDoExitify</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_exitify"><span class="hs-identifier hs-var">Opt_D_dump_exitify</span></a></span><span>
</span><span id="line-353"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDoDemand"><span class="hs-identifier hs-var">CoreDoDemand</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_stranal"><span class="hs-identifier hs-var">Opt_D_dump_stranal</span></a></span><span>
</span><span id="line-354"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDoCpr"><span class="hs-identifier hs-var">CoreDoCpr</span></a></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_cpranal"><span class="hs-identifier hs-var">Opt_D_dump_cpranal</span></a></span><span>
</span><span id="line-355"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDoWorkerWrapper"><span class="hs-identifier hs-var">CoreDoWorkerWrapper</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_worker_wrapper"><span class="hs-identifier hs-var">Opt_D_dump_worker_wrapper</span></a></span><span>
</span><span id="line-356"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDoSpecialising"><span class="hs-identifier hs-var">CoreDoSpecialising</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_spec"><span class="hs-identifier hs-var">Opt_D_dump_spec</span></a></span><span>
</span><span id="line-357"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDoSpecConstr"><span class="hs-identifier hs-var">CoreDoSpecConstr</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_spec"><span class="hs-identifier hs-var">Opt_D_dump_spec</span></a></span><span>
</span><span id="line-358"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreCSE"><span class="hs-identifier hs-var">CoreCSE</span></a></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_cse"><span class="hs-identifier hs-var">Opt_D_dump_cse</span></a></span><span>
</span><span id="line-359"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDesugar"><span class="hs-identifier hs-var">CoreDesugar</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_ds_preopt"><span class="hs-identifier hs-var">Opt_D_dump_ds_preopt</span></a></span><span>
</span><span id="line-360"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDesugarOpt"><span class="hs-identifier hs-var">CoreDesugarOpt</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_ds"><span class="hs-identifier hs-var">Opt_D_dump_ds</span></a></span><span>
</span><span id="line-361"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreTidy"><span class="hs-identifier hs-var">CoreTidy</span></a></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_simpl"><span class="hs-identifier hs-var">Opt_D_dump_simpl</span></a></span><span>
</span><span id="line-362"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CorePrep"><span class="hs-identifier hs-var">CorePrep</span></a></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_prep"><span class="hs-identifier hs-var">Opt_D_dump_prep</span></a></span><span>
</span><span id="line-363"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreOccurAnal"><span class="hs-identifier hs-var">CoreOccurAnal</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_occur_anal"><span class="hs-identifier hs-var">Opt_D_dump_occur_anal</span></a></span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreAddCallerCcs"><span class="hs-identifier hs-var">CoreAddCallerCcs</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-366"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDoPrintCore"><span class="hs-identifier hs-var">CoreDoPrintCore</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-367"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreDoRuleCheck"><span class="hs-identifier hs-type">CoreDoRuleCheck</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-368"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDoNothing"><span class="hs-identifier hs-var">CoreDoNothing</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-369"></span><span class="annot"><a href="GHC.Core.Lint.html#coreDumpFlag"><span class="hs-identifier hs-var">coreDumpFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreDoPasses"><span class="hs-identifier hs-type">CoreDoPasses</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                 Top-level interfaces
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span class="annot"><a href="GHC.Core.Lint.html#lintPassResult"><span class="hs-identifier hs-type">lintPassResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Env.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreToDo"><span class="hs-identifier hs-type">CoreToDo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreProgram"><span class="hs-identifier hs-type">CoreProgram</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-380"></span><span id="lintPassResult"><span class="annot"><span class="annottext">lintPassResult :: HscEnv -&gt; CoreToDo -&gt; CoreProgram -&gt; IO ()
</span><a href="GHC.Core.Lint.html#lintPassResult"><span class="hs-identifier hs-var hs-var">lintPassResult</span></a></span></span><span> </span><span id="local-6989586621681151339"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681151339"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span id="local-6989586621681151338"><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151338"><span class="hs-identifier hs-var">pass</span></a></span></span><span> </span><span id="local-6989586621681151337"><span class="annot"><span class="annottext">CoreProgram
</span><a href="#local-6989586621681151337"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-381"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GeneralFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#gopt"><span class="hs-identifier hs-var">gopt</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_DoCoreLinting"><span class="hs-identifier hs-var">Opt_DoCoreLinting</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151333"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-384"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681151332"><span class="annot"><span class="annottext">warns_and_errs :: WarnsAndErrs
</span><a href="#local-6989586621681151332"><span class="hs-identifier hs-var hs-var">warns_and_errs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; CoreToDo -&gt; [Var] -&gt; CoreProgram -&gt; WarnsAndErrs
</span><a href="GHC.Core.Lint.html#lintCoreBindings"><span class="hs-identifier hs-var">lintCoreBindings</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151333"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151338"><span class="hs-identifier hs-var">pass</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InteractiveContext -&gt; [Var]
</span><a href="GHC.Core.Lint.html#interactiveInScope"><span class="hs-identifier hs-var">interactiveInScope</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; InteractiveContext
</span><a href="GHC.Driver.Env.Types.html#hsc_IC"><span class="hs-identifier hs-var">hsc_IC</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681151339"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoreProgram
</span><a href="#local-6989586621681151337"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-385"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; String -&gt; IO ()
</span><a href="GHC.Utils.Error.html#showPass"><span class="hs-identifier hs-var">Err.showPass</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681151329"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151333"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Core Linted result of &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; DynFlags -&gt; a -&gt; String
</span><a href="GHC.Driver.Ppr.html#showPpr"><span class="hs-identifier hs-var">showPpr</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151333"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151338"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-386"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; Bool -&gt; SDoc -&gt; SDoc -&gt; WarnsAndErrs -&gt; IO ()
</span><a href="GHC.Core.Lint.html#displayLintResults"><span class="hs-identifier hs-var">displayLintResults</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681151329"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151333"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreToDo -&gt; Bool
</span><a href="GHC.Core.Lint.html#showLintWarnings"><span class="hs-identifier hs-var">showLintWarnings</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151338"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151338"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. OutputableBndr b =&gt; [Bind b] -&gt; SDoc
</span><a href="GHC.Core.Ppr.html#pprCoreBindings"><span class="hs-identifier hs-var">pprCoreBindings</span></a></span><span> </span><span class="annot"><span class="annottext">CoreProgram
</span><a href="#local-6989586621681151337"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681151332"><span class="hs-identifier hs-var">warns_and_errs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-388"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-389"></span><span>    </span><span id="local-6989586621681151333"><span class="annot"><span class="annottext">dflags :: DynFlags
</span><a href="#local-6989586621681151333"><span class="hs-identifier hs-var hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; DynFlags
</span><a href="GHC.Driver.Env.Types.html#hsc_dflags"><span class="hs-identifier hs-var">hsc_dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681151339"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-390"></span><span>    </span><span id="local-6989586621681151329"><span class="annot"><span class="annottext">logger :: Logger
</span><a href="#local-6989586621681151329"><span class="hs-identifier hs-var hs-var">logger</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; Logger
</span><a href="GHC.Driver.Env.Types.html#hsc_logger"><span class="hs-identifier hs-var">hsc_logger</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681151339"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span class="annot"><a href="GHC.Core.Lint.html#displayLintResults"><span class="hs-identifier hs-type">displayLintResults</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span>
</span><span id="line-393"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>
</span><span id="line-394"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- ^ If 'True', display linter warnings.</span><span>
</span><span id="line-395"></span><span>                           </span><span class="hs-comment">--   If 'False', ignore linter warnings.</span><span>
</span><span id="line-396"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-comment">-- ^ The source of the linted program</span><span>
</span><span id="line-397"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-comment">-- ^ The linted program, pretty-printed</span><span>
</span><span id="line-398"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#WarnsAndErrs"><span class="hs-identifier hs-type">WarnsAndErrs</span></a></span><span>
</span><span id="line-399"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-400"></span><span id="displayLintResults"><span class="annot"><span class="annottext">displayLintResults :: Logger -&gt; DynFlags -&gt; Bool -&gt; SDoc -&gt; SDoc -&gt; WarnsAndErrs -&gt; IO ()
</span><a href="GHC.Core.Lint.html#displayLintResults"><span class="hs-identifier hs-var hs-var">displayLintResults</span></a></span></span><span> </span><span id="local-6989586621681151325"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681151325"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681151324"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151324"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681151323"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681151323"><span class="hs-identifier hs-var">display_warnings</span></a></span></span><span> </span><span id="local-6989586621681151322"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151322"><span class="hs-identifier hs-var">pp_what</span></a></span></span><span> </span><span id="local-6989586621681151321"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151321"><span class="hs-identifier hs-var">pp_pgm</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681151320"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151320"><span class="hs-identifier hs-var">warns</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151319"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151319"><span class="hs-identifier hs-var">errs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-401"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151319"><span class="hs-identifier hs-var">errs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; LogAction
</span><a href="GHC.Utils.Logger.html#putLogMsg"><span class="hs-identifier hs-var">putLogMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681151325"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151324"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><a href="GHC.Driver.Flags.html#NoReason"><span class="hs-identifier hs-var">NoReason</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevDump"><span class="hs-identifier hs-var">Err.SevDump</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span>
</span><span id="line-403"></span><span>           </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultDumpStyle"><span class="hs-identifier hs-var">defaultDumpStyle</span></a></span><span>
</span><span id="line-404"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Core.Lint.html#lint_banner"><span class="hs-identifier hs-var">lint_banner</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;errors&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151322"><span class="hs-identifier hs-var">pp_what</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag SDoc -&gt; SDoc
</span><a href="GHC.Types.Error.html#pprMessageBag"><span class="hs-identifier hs-var">Err.pprMessageBag</span></a></span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151319"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-405"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;*** Offending Program ***&quot;</span></span><span>
</span><span id="line-406"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151321"><span class="hs-identifier hs-var">pp_pgm</span></a></span><span>
</span><span id="line-407"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;*** End of Offense ***&quot;</span></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-408"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; JoinArity -&gt; IO ()
</span><a href="GHC.Utils.Error.html#ghcExit"><span class="hs-identifier hs-var">Err.ghcExit</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681151325"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151324"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-409"></span><span>
</span><span id="line-410"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151320"><span class="hs-identifier hs-var">warns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-411"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#hasNoDebugOutput"><span class="hs-identifier hs-var">hasNoDebugOutput</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151324"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-412"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681151323"><span class="hs-identifier hs-var">display_warnings</span></a></span><span>
</span><span id="line-413"></span><span>  </span><span class="hs-comment">-- If the Core linter encounters an error, output to stderr instead of</span><span>
</span><span id="line-414"></span><span>  </span><span class="hs-comment">-- stdout (#13342)</span><span>
</span><span id="line-415"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; LogAction
</span><a href="GHC.Utils.Logger.html#putLogMsg"><span class="hs-identifier hs-var">putLogMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681151325"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151324"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><a href="GHC.Driver.Flags.html#NoReason"><span class="hs-identifier hs-var">NoReason</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevInfo"><span class="hs-identifier hs-var">Err.SevInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span>
</span><span id="line-416"></span><span>      </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultDumpStyle"><span class="hs-identifier hs-var">defaultDumpStyle</span></a></span><span>
</span><span id="line-417"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Core.Lint.html#lint_banner"><span class="hs-identifier hs-var">lint_banner</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;warnings&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151322"><span class="hs-identifier hs-var">pp_what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Bag SDoc -&gt; SDoc
</span><a href="GHC.Types.Error.html#pprMessageBag"><span class="hs-identifier hs-var">Err.pprMessageBag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; Bag a -&gt; Bag b
</span><a href="GHC.Data.Bag.html#mapBag"><span class="hs-identifier hs-var">mapBag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#blankLine"><span class="hs-identifier hs-var">blankLine</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151320"><span class="hs-identifier hs-var">warns</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>
</span><span id="line-419"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span class="annot"><a href="GHC.Core.Lint.html#lint_banner"><span class="hs-identifier hs-type">lint_banner</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-422"></span><span id="lint_banner"><span class="annot"><span class="annottext">lint_banner :: String -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Core.Lint.html#lint_banner"><span class="hs-identifier hs-var hs-var">lint_banner</span></a></span></span><span> </span><span id="local-6989586621681151305"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681151305"><span class="hs-identifier hs-var">string</span></a></span></span><span> </span><span id="local-6989586621681151304"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151304"><span class="hs-identifier hs-var">pass</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;*** Core Lint&quot;</span></span><span>      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681151305"><span class="hs-identifier hs-var">string</span></a></span><span>
</span><span id="line-423"></span><span>                          </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;: in result of&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151304"><span class="hs-identifier hs-var">pass</span></a></span><span>
</span><span id="line-424"></span><span>                          </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;***&quot;</span></span><span>
</span><span id="line-425"></span><span>
</span><span id="line-426"></span><span class="annot"><a href="GHC.Core.Lint.html#showLintWarnings"><span class="hs-identifier hs-type">showLintWarnings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreToDo"><span class="hs-identifier hs-type">CoreToDo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-427"></span><span class="hs-comment">-- Disable Lint warnings on the first simplifier pass, because</span><span>
</span><span id="line-428"></span><span class="hs-comment">-- there may be some INLINE knots still tied, which is tiresomely noisy</span><span>
</span><span id="line-429"></span><span id="showLintWarnings"><span class="annot"><span class="annottext">showLintWarnings :: CoreToDo -&gt; Bool
</span><a href="GHC.Core.Lint.html#showLintWarnings"><span class="hs-identifier hs-var hs-var">showLintWarnings</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreDoSimplify"><span class="hs-identifier hs-type">CoreDoSimplify</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Opt.Monad.html#SimplMode"><span class="hs-identifier hs-type">SimplMode</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sm_phase :: SimplMode -&gt; CompilerPhase
</span><a href="GHC.Core.Opt.Monad.html#sm_phase"><span class="hs-identifier hs-var">sm_phase</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerPhase
</span><a href="GHC.Types.Basic.html#InitialPhase"><span class="hs-identifier hs-var">InitialPhase</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-430"></span><span class="annot"><a href="GHC.Core.Lint.html#showLintWarnings"><span class="hs-identifier hs-var">showLintWarnings</span></a></span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span class="annot"><a href="GHC.Core.Lint.html#lintInteractiveExpr"><span class="hs-identifier hs-type">lintInteractiveExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-comment">-- ^ The source of the linted expression</span><span>
</span><span id="line-433"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Env.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span id="lintInteractiveExpr"><span class="annot"><span class="annottext">lintInteractiveExpr :: SDoc -&gt; HscEnv -&gt; CoreExpr -&gt; IO ()
</span><a href="GHC.Core.Lint.html#lintInteractiveExpr"><span class="hs-identifier hs-var hs-var">lintInteractiveExpr</span></a></span></span><span> </span><span id="local-6989586621681151300"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151300"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span id="local-6989586621681151299"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681151299"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span id="local-6989586621681151298"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151298"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-435"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GeneralFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#gopt"><span class="hs-identifier hs-var">gopt</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_DoCoreLinting"><span class="hs-identifier hs-var">Opt_DoCoreLinting</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151297"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-436"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-437"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681151296"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151296"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; [Var] -&gt; CoreExpr -&gt; Maybe (Bag SDoc)
</span><a href="GHC.Core.Lint.html#lintExpr"><span class="hs-identifier hs-var">lintExpr</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151297"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InteractiveContext -&gt; [Var]
</span><a href="GHC.Core.Lint.html#interactiveInScope"><span class="hs-identifier hs-var">interactiveInScope</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; InteractiveContext
</span><a href="GHC.Driver.Env.Types.html#hsc_IC"><span class="hs-identifier hs-var">hsc_IC</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681151299"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151298"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-438"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; Bool -&gt; SDoc -&gt; SDoc -&gt; WarnsAndErrs -&gt; IO ()
</span><a href="GHC.Core.Lint.html#displayLintResults"><span class="hs-identifier hs-var">displayLintResults</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681151295"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151297"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681151300"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. OutputableBndr b =&gt; Expr b -&gt; SDoc
</span><a href="GHC.Core.Ppr.html#pprCoreExpr"><span class="hs-identifier hs-var">pprCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151298"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151296"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-440"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-441"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-442"></span><span>    </span><span id="local-6989586621681151297"><span class="annot"><span class="annottext">dflags :: DynFlags
</span><a href="#local-6989586621681151297"><span class="hs-identifier hs-var hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; DynFlags
</span><a href="GHC.Driver.Env.Types.html#hsc_dflags"><span class="hs-identifier hs-var">hsc_dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681151299"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-443"></span><span>    </span><span id="local-6989586621681151295"><span class="annot"><span class="annottext">logger :: Logger
</span><a href="#local-6989586621681151295"><span class="hs-identifier hs-var hs-var">logger</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; Logger
</span><a href="GHC.Driver.Env.Types.html#hsc_logger"><span class="hs-identifier hs-var">hsc_logger</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681151299"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-444"></span><span>
</span><span id="line-445"></span><span class="annot"><a href="GHC.Core.Lint.html#interactiveInScope"><span class="hs-identifier hs-type">interactiveInScope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Runtime.Context.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-446"></span><span class="hs-comment">-- In GHCi we may lint expressions, or bindings arising from 'deriving'</span><span>
</span><span id="line-447"></span><span class="hs-comment">-- clauses, that mention variables bound in the interactive context.</span><span>
</span><span id="line-448"></span><span class="hs-comment">-- These are Local things (see Note [Interactively-bound Ids in GHCi] in GHC.Runtime.Context).</span><span>
</span><span id="line-449"></span><span class="hs-comment">-- So we have to tell Lint about them, lest it reports them as out of scope.</span><span>
</span><span id="line-450"></span><span class="hs-comment">--</span><span>
</span><span id="line-451"></span><span class="hs-comment">-- We do this by find local-named things that may appear free in interactive</span><span>
</span><span id="line-452"></span><span class="hs-comment">-- context.  This function is pretty revolting and quite possibly not quite right.</span><span>
</span><span id="line-453"></span><span class="hs-comment">-- When we are not in GHCi, the interactive context (hsc_IC hsc_env) is empty</span><span>
</span><span id="line-454"></span><span class="hs-comment">-- so this is a (cheap) no-op.</span><span>
</span><span id="line-455"></span><span class="hs-comment">--</span><span>
</span><span id="line-456"></span><span class="hs-comment">-- See #8215 for an example</span><span>
</span><span id="line-457"></span><span id="interactiveInScope"><span class="annot"><span class="annottext">interactiveInScope :: InteractiveContext -&gt; [Var]
</span><a href="GHC.Core.Lint.html#interactiveInScope"><span class="hs-identifier hs-var hs-var">interactiveInScope</span></a></span></span><span> </span><span id="local-6989586621681151292"><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621681151292"><span class="hs-identifier hs-var">ictxt</span></a></span></span><span>
</span><span id="line-458"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151291"><span class="hs-identifier hs-var">tyvars</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151290"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-459"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-460"></span><span>    </span><span class="hs-comment">-- C.f. GHC.Tc.Module.setInteractiveContext, Desugar.deSugarExpr</span><span>
</span><span id="line-461"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681151289"><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681151289"><span class="hs-identifier hs-var">cls_insts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151288"><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621681151288"><span class="hs-identifier hs-var">_fam_insts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractiveContext -&gt; ([ClsInst], [FamInst])
</span><a href="GHC.Runtime.Context.html#ic_instances"><span class="hs-identifier hs-var">ic_instances</span></a></span><span> </span><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621681151292"><span class="hs-identifier hs-var">ictxt</span></a></span><span>
</span><span id="line-462"></span><span>    </span><span id="local-6989586621681151286"><span class="annot"><span class="annottext">te1 :: TypeEnv
</span><a href="#local-6989586621681151286"><span class="hs-identifier hs-var hs-var">te1</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyThing] -&gt; TypeEnv
</span><a href="GHC.Types.TypeEnv.html#mkTypeEnvWithImplicits"><span class="hs-identifier hs-var">mkTypeEnvWithImplicits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InteractiveContext -&gt; [TyThing]
</span><a href="GHC.Runtime.Context.html#ic_tythings"><span class="hs-identifier hs-var">ic_tythings</span></a></span><span> </span><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621681151292"><span class="hs-identifier hs-var">ictxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>    </span><span id="local-6989586621681151283"><span class="annot"><span class="annottext">te :: TypeEnv
</span><a href="#local-6989586621681151283"><span class="hs-identifier hs-var hs-var">te</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; [Var] -&gt; TypeEnv
</span><a href="GHC.Types.TypeEnv.html#extendTypeEnvWithIds"><span class="hs-identifier hs-var">extendTypeEnvWithIds</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681151286"><span class="hs-identifier hs-var">te1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">ClsInst -&gt; Var
</span><a href="GHC.Core.InstEnv.html#instanceDFunId"><span class="hs-identifier hs-var">instanceDFunId</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681151289"><span class="hs-identifier hs-var">cls_insts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>    </span><span id="local-6989586621681151290"><span class="annot"><span class="annottext">ids :: [Var]
</span><a href="#local-6989586621681151290"><span class="hs-identifier hs-var hs-var">ids</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; [Var]
</span><a href="GHC.Types.TypeEnv.html#typeEnvIds"><span class="hs-identifier hs-var">typeEnvIds</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681151283"><span class="hs-identifier hs-var">te</span></a></span><span>
</span><span id="line-465"></span><span>    </span><span id="local-6989586621681151291"><span class="annot"><span class="annottext">tyvars :: [Var]
</span><a href="#local-6989586621681151291"><span class="hs-identifier hs-var hs-var">tyvars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LintedType] -&gt; [Var]
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypesList"><span class="hs-identifier hs-var">tyCoVarsOfTypesList</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151290"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-466"></span><span>              </span><span class="hs-comment">-- Why the type variables?  How can the top level envt have free tyvars?</span><span>
</span><span id="line-467"></span><span>              </span><span class="hs-comment">-- I think it's because of the GHCi debugger, which can bind variables</span><span>
</span><span id="line-468"></span><span>              </span><span class="hs-comment">--   f :: [t] -&gt; [t]</span><span>
</span><span id="line-469"></span><span>              </span><span class="hs-comment">-- where t is a RuntimeUnk (see TcType)</span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span class="hs-comment">-- | Type-check a 'CoreProgram'. See Note [Core Lint guarantee].</span><span>
</span><span id="line-472"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreBindings"><span class="hs-identifier hs-type">lintCoreBindings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreToDo"><span class="hs-identifier hs-type">CoreToDo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreProgram"><span class="hs-identifier hs-type">CoreProgram</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#WarnsAndErrs"><span class="hs-identifier hs-type">WarnsAndErrs</span></a></span><span>
</span><span id="line-473"></span><span class="hs-comment">--   Returns (warnings, errors)</span><span>
</span><span id="line-474"></span><span class="hs-comment">-- If you edit this function, you may need to update the GHC formalism</span><span>
</span><span id="line-475"></span><span class="hs-comment">-- See Note [GHC Formalism]</span><span>
</span><span id="line-476"></span><span id="lintCoreBindings"><span class="annot"><span class="annottext">lintCoreBindings :: DynFlags -&gt; CoreToDo -&gt; [Var] -&gt; CoreProgram -&gt; WarnsAndErrs
</span><a href="GHC.Core.Lint.html#lintCoreBindings"><span class="hs-identifier hs-var hs-var">lintCoreBindings</span></a></span></span><span> </span><span id="local-6989586621681151278"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151278"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681151277"><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151277"><span class="hs-identifier hs-var">pass</span></a></span></span><span> </span><span id="local-6989586621681151276"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151276"><span class="hs-identifier hs-var">local_in_scope</span></a></span></span><span> </span><span id="local-6989586621681151275"><span class="annot"><span class="annottext">CoreProgram
</span><a href="#local-6989586621681151275"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-477"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. DynFlags -&gt; LintFlags -&gt; [Var] -&gt; LintM a -&gt; WarnsAndErrs
</span><a href="GHC.Core.Lint.html#initL"><span class="hs-identifier hs-var">initL</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151278"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">LintFlags
</span><a href="#local-6989586621681151273"><span class="hs-identifier hs-var">flags</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151276"><span class="hs-identifier hs-var">local_in_scope</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-478"></span><span>    </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LintLocInfo
</span><a href="GHC.Core.Lint.html#TopLevelBindings"><span class="hs-identifier hs-var">TopLevelBindings</span></a></span><span>           </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-479"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[NonEmpty Var]
</span><a href="#local-6989586621681151269"><span class="hs-identifier hs-var">dups</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NonEmpty Var] -&gt; SDoc
</span><a href="GHC.Core.Lint.html#dupVars"><span class="hs-identifier hs-var">dupVars</span></a></span><span> </span><span class="annot"><span class="annottext">[NonEmpty Var]
</span><a href="#local-6989586621681151269"><span class="hs-identifier hs-var">dups</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-480"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[NonEmpty Name]
</span><a href="#local-6989586621681151267"><span class="hs-identifier hs-var">ext_dups</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NonEmpty Name] -&gt; SDoc
</span><a href="GHC.Core.Lint.html#dupExtVars"><span class="hs-identifier hs-var">dupExtVars</span></a></span><span> </span><span class="annot"><span class="annottext">[NonEmpty Name]
</span><a href="#local-6989586621681151267"><span class="hs-identifier hs-var">ext_dups</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-481"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a.
TopLevelFlag
-&gt; [(Var, CoreExpr)] -&gt; ([Var] -&gt; LintM a) -&gt; LintM (a, [UsageEnv])
</span><a href="GHC.Core.Lint.html#lintRecBindings"><span class="hs-identifier hs-var">lintRecBindings</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="GHC.Types.Basic.html#TopLevel"><span class="hs-identifier hs-var">TopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, CoreExpr)]
</span><a href="#local-6989586621681151263"><span class="hs-identifier hs-var">all_pairs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[Var]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-482"></span><span>         </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-483"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-484"></span><span>    </span><span id="local-6989586621681151263"><span class="annot"><span class="annottext">all_pairs :: [(Var, CoreExpr)]
</span><a href="#local-6989586621681151263"><span class="hs-identifier hs-var hs-var">all_pairs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. [Bind b] -&gt; [(b, Expr b)]
</span><a href="GHC.Core.html#flattenBinds"><span class="hs-identifier hs-var">flattenBinds</span></a></span><span> </span><span class="annot"><span class="annottext">CoreProgram
</span><a href="#local-6989586621681151275"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-485"></span><span>     </span><span class="hs-comment">-- Put all the top-level binders in scope at the start</span><span>
</span><span id="line-486"></span><span>     </span><span class="hs-comment">-- This is because rewrite rules can bring something</span><span>
</span><span id="line-487"></span><span>     </span><span class="hs-comment">-- into use 'unexpectedly'; see Note [Glomming] in &quot;GHC.Core.Opt.OccurAnal&quot;</span><span>
</span><span id="line-488"></span><span>    </span><span id="local-6989586621681151261"><span class="annot"><span class="annottext">binders :: [Var]
</span><a href="#local-6989586621681151261"><span class="hs-identifier hs-var hs-var">binders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, CoreExpr)]
</span><a href="#local-6989586621681151263"><span class="hs-identifier hs-var">all_pairs</span></a></span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span>    </span><span id="local-6989586621681151273"><span class="annot"><span class="annottext">flags :: LintFlags
</span><a href="#local-6989586621681151273"><span class="hs-identifier hs-var hs-var">flags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; LintFlags
</span><a href="GHC.Core.Lint.html#defaultLintFlags"><span class="hs-identifier hs-var">defaultLintFlags</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151278"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-491"></span><span>               </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lf_check_global_ids :: Bool
</span><a href="GHC.Core.Lint.html#lf_check_global_ids"><span class="hs-identifier hs-var">lf_check_global_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681151258"><span class="hs-identifier hs-var">check_globals</span></a></span><span>
</span><span id="line-492"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lf_check_inline_loop_breakers :: Bool
</span><a href="GHC.Core.Lint.html#lf_check_inline_loop_breakers"><span class="hs-identifier hs-var">lf_check_inline_loop_breakers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681151256"><span class="hs-identifier hs-var">check_lbs</span></a></span><span>
</span><span id="line-493"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lf_check_static_ptrs :: StaticPtrCheck
</span><a href="GHC.Core.Lint.html#lf_check_static_ptrs"><span class="hs-identifier hs-var">lf_check_static_ptrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StaticPtrCheck
</span><a href="#local-6989586621681151254"><span class="hs-identifier hs-var">check_static_ptrs</span></a></span><span>
</span><span id="line-494"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lf_check_linearity :: Bool
</span><a href="GHC.Core.Lint.html#lf_check_linearity"><span class="hs-identifier hs-var">lf_check_linearity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681151252"><span class="hs-identifier hs-var">check_linearity</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span>    </span><span class="hs-comment">-- See Note [Checking for global Ids]</span><span>
</span><span id="line-497"></span><span>    </span><span id="local-6989586621681151258"><span class="annot"><span class="annottext">check_globals :: Bool
</span><a href="#local-6989586621681151258"><span class="hs-identifier hs-var hs-var">check_globals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151277"><span class="hs-identifier hs-var">pass</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-498"></span><span>                      </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreTidy"><span class="hs-identifier hs-var">CoreTidy</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-499"></span><span>                      </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CorePrep"><span class="hs-identifier hs-var">CorePrep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-500"></span><span>                      </span><span class="annot"><span class="annottext">CoreToDo
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span>    </span><span class="hs-comment">-- See Note [Checking for INLINE loop breakers]</span><span>
</span><span id="line-503"></span><span>    </span><span id="local-6989586621681151256"><span class="annot"><span class="annottext">check_lbs :: Bool
</span><a href="#local-6989586621681151256"><span class="hs-identifier hs-var hs-var">check_lbs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151277"><span class="hs-identifier hs-var">pass</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-504"></span><span>                      </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDesugar"><span class="hs-identifier hs-var">CoreDesugar</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-505"></span><span>                      </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDesugarOpt"><span class="hs-identifier hs-var">CoreDesugarOpt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-506"></span><span>                      </span><span class="annot"><span class="annottext">CoreToDo
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-507"></span><span>
</span><span id="line-508"></span><span>    </span><span class="hs-comment">-- See Note [Checking StaticPtrs]</span><span>
</span><span id="line-509"></span><span>    </span><span id="local-6989586621681151254"><span class="annot"><span class="annottext">check_static_ptrs :: StaticPtrCheck
</span><a href="#local-6989586621681151254"><span class="hs-identifier hs-var hs-var">check_static_ptrs</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Extension -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#xopt"><span class="hs-identifier hs-var">xopt</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.StaticPointers</span></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151278"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StaticPtrCheck
</span><a href="GHC.Core.Lint.html#AllowAnywhere"><span class="hs-identifier hs-var">AllowAnywhere</span></a></span><span>
</span><span id="line-510"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151277"><span class="hs-identifier hs-var">pass</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-511"></span><span>                          </span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreDoFloatOutwards"><span class="hs-identifier hs-type">CoreDoFloatOutwards</span></a></span><span> </span><span class="annot"><span class="annottext">FloatOutSwitches
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StaticPtrCheck
</span><a href="GHC.Core.Lint.html#AllowAtTopLevel"><span class="hs-identifier hs-var">AllowAtTopLevel</span></a></span><span>
</span><span id="line-512"></span><span>                          </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreTidy"><span class="hs-identifier hs-var">CoreTidy</span></a></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StaticPtrCheck
</span><a href="GHC.Core.Lint.html#RejectEverywhere"><span class="hs-identifier hs-var">RejectEverywhere</span></a></span><span>
</span><span id="line-513"></span><span>                          </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CorePrep"><span class="hs-identifier hs-var">CorePrep</span></a></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StaticPtrCheck
</span><a href="GHC.Core.Lint.html#AllowAtTopLevel"><span class="hs-identifier hs-var">AllowAtTopLevel</span></a></span><span>
</span><span id="line-514"></span><span>                          </span><span class="annot"><span class="annottext">CoreToDo
</span><span class="hs-identifier">_</span></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StaticPtrCheck
</span><a href="GHC.Core.Lint.html#AllowAnywhere"><span class="hs-identifier hs-var">AllowAnywhere</span></a></span><span>
</span><span id="line-515"></span><span>
</span><span id="line-516"></span><span>    </span><span class="hs-comment">-- See Note [Linting linearity]</span><span>
</span><span id="line-517"></span><span>    </span><span id="local-6989586621681151252"><span class="annot"><span class="annottext">check_linearity :: Bool
</span><a href="#local-6989586621681151252"><span class="hs-identifier hs-var hs-var">check_linearity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GeneralFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#gopt"><span class="hs-identifier hs-var">gopt</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_DoLinearCoreLinting"><span class="hs-identifier hs-var">Opt_DoLinearCoreLinting</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151278"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-518"></span><span>                        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="#local-6989586621681151277"><span class="hs-identifier hs-var">pass</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-519"></span><span>                          </span><span class="annot"><span class="annottext">CoreToDo
</span><a href="GHC.Core.Opt.Monad.html#CoreDesugar"><span class="hs-identifier hs-var">CoreDesugar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-520"></span><span>                          </span><span class="annot"><span class="annottext">CoreToDo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151269"><span class="annot"><span class="annottext">[NonEmpty Var]
</span><a href="#local-6989586621681151269"><span class="hs-identifier hs-var">dups</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; ([a], [NonEmpty a])
</span><a href="GHC.Data.List.SetOps.html#removeDups"><span class="hs-identifier hs-var">removeDups</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151261"><span class="hs-identifier hs-var">binders</span></a></span><span>
</span><span id="line-523"></span><span>
</span><span id="line-524"></span><span>    </span><span class="hs-comment">-- dups_ext checks for names with different uniques</span><span>
</span><span id="line-525"></span><span>    </span><span class="hs-comment">-- but the same External name M.n.  We don't</span><span>
</span><span id="line-526"></span><span>    </span><span class="hs-comment">-- allow this at top level:</span><span>
</span><span id="line-527"></span><span>    </span><span class="hs-comment">--    M.n{r3}  = ...</span><span>
</span><span id="line-528"></span><span>    </span><span class="hs-comment">--    M.n{r29} = ...</span><span>
</span><span id="line-529"></span><span>    </span><span class="hs-comment">-- because they both get the same linker symbol</span><span>
</span><span id="line-530"></span><span>    </span><span id="local-6989586621681151267"><span class="annot"><span class="annottext">ext_dups :: [NonEmpty Name]
</span><a href="#local-6989586621681151267"><span class="hs-identifier hs-var hs-var">ext_dups</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; ([a], [NonEmpty a])
</span><a href="GHC.Data.List.SetOps.html#removeDups"><span class="hs-identifier hs-var">removeDups</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Ordering
</span><a href="#local-6989586621681151242"><span class="hs-identifier hs-var">ord_ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Name
</span><a href="GHC.Types.Var.html#varName"><span class="hs-identifier hs-var">Var.varName</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151261"><span class="hs-identifier hs-var">binders</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-531"></span><span>    </span><span id="local-6989586621681151242"><span class="annot"><span class="annottext">ord_ext :: Name -&gt; Name -&gt; Ordering
</span><a href="#local-6989586621681151242"><span class="hs-identifier hs-var hs-var">ord_ext</span></a></span></span><span> </span><span id="local-6989586621681151232"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681151232"><span class="hs-identifier hs-var">n1</span></a></span></span><span> </span><span id="local-6989586621681151231"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681151231"><span class="hs-identifier hs-var">n2</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681151230"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681151230"><span class="hs-identifier hs-var">m1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Module
</span><a href="GHC.Types.Name.html#nameModule_maybe"><span class="hs-identifier hs-var">nameModule_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681151232"><span class="hs-identifier hs-var">n1</span></a></span><span>
</span><span id="line-532"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681151228"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681151228"><span class="hs-identifier hs-var">m2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Module
</span><a href="GHC.Types.Name.html#nameModule_maybe"><span class="hs-identifier hs-var">nameModule_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681151231"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-533"></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681151230"><span class="hs-identifier hs-var">m1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681151232"><span class="hs-identifier hs-var">n1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681151228"><span class="hs-identifier hs-var">m2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681151231"><span class="hs-identifier hs-var">n2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-534"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-535"></span><span>
</span><span id="line-536"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[lintUnfolding]{lintUnfolding}
*                                                                      *
************************************************************************

Note [Linting Unfoldings from Interfaces]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

We use this to check all top-level unfoldings that come in from interfaces
(it is very painful to catch errors otherwise).

We do not need to call lintUnfolding on unfoldings that are nested within
top-level unfoldings; they are linted when we lint the top-level unfolding;
hence the `TopLevelFlag` on `tcPragExpr` in GHC.IfaceToCore.

-}</span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span class="annot"><a href="GHC.Core.Lint.html#lintUnfolding"><span class="hs-identifier hs-type">lintUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>               </span><span class="hs-comment">-- True &lt;=&gt; is a compulsory unfolding</span><span>
</span><span id="line-556"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>
</span><span id="line-557"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcLoc"><span class="hs-identifier hs-type">SrcLoc</span></a></span><span>
</span><span id="line-558"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span>             </span><span class="hs-comment">-- Treat these as in scope</span><span>
</span><span id="line-559"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>
</span><span id="line-560"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Nothing =&gt; OK</span><span>
</span><span id="line-561"></span><span>
</span><span id="line-562"></span><span id="lintUnfolding"><span class="annot"><span class="annottext">lintUnfolding :: Bool -&gt; DynFlags -&gt; SrcLoc -&gt; IdSet -&gt; CoreExpr -&gt; Maybe (Bag SDoc)
</span><a href="GHC.Core.Lint.html#lintUnfolding"><span class="hs-identifier hs-var hs-var">lintUnfolding</span></a></span></span><span> </span><span id="local-6989586621681151225"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681151225"><span class="hs-identifier hs-var">is_compulsory</span></a></span></span><span> </span><span id="local-6989586621681151224"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151224"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681151223"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621681151223"><span class="hs-identifier hs-var">locn</span></a></span></span><span> </span><span id="local-6989586621681151222"><span class="annot"><span class="annottext">IdSet
</span><a href="#local-6989586621681151222"><span class="hs-identifier hs-var">var_set</span></a></span></span><span> </span><span id="local-6989586621681151221"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151221"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-563"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151220"><span class="hs-identifier hs-var">errs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-564"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151220"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-565"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-566"></span><span>    </span><span id="local-6989586621681151219"><span class="annot"><span class="annottext">vars :: [Var]
</span><a href="#local-6989586621681151219"><span class="hs-identifier hs-var hs-var">vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall elt. UniqSet elt -&gt; [elt]
</span><a href="GHC.Types.Unique.Set.html#nonDetEltsUniqSet"><span class="hs-identifier hs-var">nonDetEltsUniqSet</span></a></span><span> </span><span class="annot"><span class="annottext">IdSet
</span><a href="#local-6989586621681151222"><span class="hs-identifier hs-var">var_set</span></a></span><span>
</span><span id="line-567"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681151218"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151218"><span class="hs-identifier hs-var">_warns</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151220"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151220"><span class="hs-identifier hs-var">errs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. DynFlags -&gt; LintFlags -&gt; [Var] -&gt; LintM a -&gt; WarnsAndErrs
</span><a href="GHC.Core.Lint.html#initL"><span class="hs-identifier hs-var">initL</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151224"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; LintFlags
</span><a href="GHC.Core.Lint.html#defaultLintFlags"><span class="hs-identifier hs-var">defaultLintFlags</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151224"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151219"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-568"></span><span>                     </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681151225"><span class="hs-identifier hs-var">is_compulsory</span></a></span><span>
</span><span id="line-569"></span><span>                       </span><span class="hs-comment">-- See Note [Checking for levity polymorphism]</span><span>
</span><span id="line-570"></span><span>                     </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a. LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#noLPChecks"><span class="hs-identifier hs-var">noLPChecks</span></a></span><span> </span><span class="annot"><span class="annottext">LintM (LintedType, UsageEnv)
</span><a href="#local-6989586621681151216"><span class="hs-identifier hs-var">linter</span></a></span><span>
</span><span id="line-571"></span><span>                     </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">LintM (LintedType, UsageEnv)
</span><a href="#local-6989586621681151216"><span class="hs-identifier hs-var">linter</span></a></span><span>
</span><span id="line-572"></span><span>    </span><span id="local-6989586621681151216"><span class="annot"><span class="annottext">linter :: LintM (LintedType, UsageEnv)
</span><a href="#local-6989586621681151216"><span class="hs-identifier hs-var hs-var">linter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#ImportedUnfolding"><span class="hs-identifier hs-var">ImportedUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621681151223"><span class="hs-identifier hs-var">locn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-573"></span><span>             </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151221"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-574"></span><span>
</span><span id="line-575"></span><span class="annot"><a href="GHC.Core.Lint.html#lintExpr"><span class="hs-identifier hs-type">lintExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>
</span><span id="line-576"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span>               </span><span class="hs-comment">-- Treat these as in scope</span><span>
</span><span id="line-577"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>
</span><span id="line-578"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- Nothing =&gt; OK</span><span>
</span><span id="line-579"></span><span>
</span><span id="line-580"></span><span id="lintExpr"><span class="annot"><span class="annottext">lintExpr :: DynFlags -&gt; [Var] -&gt; CoreExpr -&gt; Maybe (Bag SDoc)
</span><a href="GHC.Core.Lint.html#lintExpr"><span class="hs-identifier hs-var hs-var">lintExpr</span></a></span></span><span> </span><span id="local-6989586621681151213"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151213"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681151212"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151212"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621681151211"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151211"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-581"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151210"><span class="hs-identifier hs-var">errs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-582"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151210"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-583"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-584"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681151209"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151209"><span class="hs-identifier hs-var">_warns</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151210"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681151210"><span class="hs-identifier hs-var">errs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. DynFlags -&gt; LintFlags -&gt; [Var] -&gt; LintM a -&gt; WarnsAndErrs
</span><a href="GHC.Core.Lint.html#initL"><span class="hs-identifier hs-var">initL</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151213"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; LintFlags
</span><a href="GHC.Core.Lint.html#defaultLintFlags"><span class="hs-identifier hs-var">defaultLintFlags</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681151213"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151212"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">LintM (LintedType, UsageEnv)
</span><a href="#local-6989586621681151208"><span class="hs-identifier hs-var">linter</span></a></span><span>
</span><span id="line-585"></span><span>    </span><span id="local-6989586621681151208"><span class="annot"><span class="annottext">linter :: LintM (LintedType, UsageEnv)
</span><a href="#local-6989586621681151208"><span class="hs-identifier hs-var hs-var">linter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LintLocInfo
</span><a href="GHC.Core.Lint.html#TopLevelBindings"><span class="hs-identifier hs-var">TopLevelBindings</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-586"></span><span>             </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151211"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-587"></span><span>
</span><span id="line-588"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[lintCoreBinding]{lintCoreBinding}
*                                                                      *
************************************************************************

Check a core binding, returning the list of variables bound.
-}</span><span>
</span><span id="line-597"></span><span>
</span><span id="line-598"></span><span class="hs-comment">-- Returns a UsageEnv because this function is called in lintCoreExpr for</span><span>
</span><span id="line-599"></span><span class="hs-comment">-- Let</span><span>
</span><span id="line-600"></span><span>
</span><span id="line-601"></span><span id="local-6989586621681152624"><span class="annot"><a href="GHC.Core.Lint.html#lintRecBindings"><span class="hs-identifier hs-type">lintRecBindings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TopLevelFlag"><span class="hs-identifier hs-type">TopLevelFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-602"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Lint.html#LintedId"><span class="hs-identifier hs-type">LintedId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152624"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681152624"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-603"></span><span id="lintRecBindings"><span class="annot"><span class="annottext">lintRecBindings :: forall a.
TopLevelFlag
-&gt; [(Var, CoreExpr)] -&gt; ([Var] -&gt; LintM a) -&gt; LintM (a, [UsageEnv])
</span><a href="GHC.Core.Lint.html#lintRecBindings"><span class="hs-identifier hs-var hs-var">lintRecBindings</span></a></span></span><span> </span><span id="local-6989586621681151198"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681151198"><span class="hs-identifier hs-var">top_lvl</span></a></span></span><span> </span><span id="local-6989586621681151197"><span class="annot"><span class="annottext">[(Var, CoreExpr)]
</span><a href="#local-6989586621681151197"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span id="local-6989586621681151196"><span class="annot"><span class="annottext">[Var] -&gt; LintM a
</span><a href="#local-6989586621681151196"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-604"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. TopLevelFlag -&gt; [Var] -&gt; ([Var] -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintIdBndrs"><span class="hs-identifier hs-var">lintIdBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681151198"><span class="hs-identifier hs-var">top_lvl</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151194"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681151193"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151193"><span class="hs-identifier hs-var">bndrs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-605"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681151192"><span class="annot"><span class="annottext">[UsageEnv]
</span><a href="#local-6989586621681151192"><span class="hs-identifier hs-var">ues</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; m c) -&gt; [a] -&gt; [b] -&gt; m [c]
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#zipWithM"><span class="hs-identifier hs-var">zipWithM</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; CoreExpr -&gt; LintM UsageEnv
</span><a href="#local-6989586621681151190"><span class="hs-identifier hs-var">lint_pair</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151193"><span class="hs-identifier hs-var">bndrs'</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681151189"><span class="hs-identifier hs-var">rhss</span></a></span><span>
</span><span id="line-606"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681151188"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681151188"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Var] -&gt; LintM a
</span><a href="#local-6989586621681151196"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151193"><span class="hs-identifier hs-var">bndrs'</span></a></span><span>
</span><span id="line-607"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681151188"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[UsageEnv]
</span><a href="#local-6989586621681151192"><span class="hs-identifier hs-var">ues</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-608"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-609"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681151194"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151194"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151189"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681151189"><span class="hs-identifier hs-var">rhss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. [(a, b)] -&gt; ([a], [b])
</span><a href="../../base-4.16.3.0/src/GHC-List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, CoreExpr)]
</span><a href="#local-6989586621681151197"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-610"></span><span>    </span><span id="local-6989586621681151190"><span class="annot"><span class="annottext">lint_pair :: Var -&gt; CoreExpr -&gt; LintM UsageEnv
</span><a href="#local-6989586621681151190"><span class="hs-identifier hs-var hs-var">lint_pair</span></a></span></span><span> </span><span id="local-6989586621681151186"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151186"><span class="hs-identifier hs-var">bndr'</span></a></span></span><span> </span><span id="local-6989586621681151185"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151185"><span class="hs-identifier hs-var">rhs</span></a></span></span><span>
</span><span id="line-611"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#RhsOf"><span class="hs-identifier hs-var">RhsOf</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151186"><span class="hs-identifier hs-var">bndr'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-612"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681151183"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151183"><span class="hs-identifier hs-var">rhs_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151182"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681151182"><span class="hs-identifier hs-var">ue</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Var -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintRhs"><span class="hs-identifier hs-var">lintRhs</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151186"><span class="hs-identifier hs-var">bndr'</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151185"><span class="hs-identifier hs-var">rhs</span></a></span><span>         </span><span class="hs-comment">-- Check the rhs</span><span>
</span><span id="line-613"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
-&gt; RecFlag -&gt; Var -&gt; CoreExpr -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintLetBind"><span class="hs-identifier hs-var">lintLetBind</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681151198"><span class="hs-identifier hs-var">top_lvl</span></a></span><span> </span><span class="annot"><span class="annottext">RecFlag
</span><a href="GHC.Types.Basic.html#Recursive"><span class="hs-identifier hs-var">Recursive</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151186"><span class="hs-identifier hs-var">bndr'</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151185"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151183"><span class="hs-identifier hs-var">rhs_ty</span></a></span><span>
</span><span id="line-614"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681151182"><span class="hs-identifier hs-var">ue</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-615"></span><span>
</span><span id="line-616"></span><span class="annot"><a href="GHC.Core.Lint.html#lintLetBody"><span class="hs-identifier hs-type">lintLetBody</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Lint.html#LintedId"><span class="hs-identifier hs-type">LintedId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-617"></span><span id="lintLetBody"><span class="annot"><span class="annottext">lintLetBody :: [Var] -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintLetBody"><span class="hs-identifier hs-var hs-var">lintLetBody</span></a></span></span><span> </span><span id="local-6989586621681151177"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151177"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span id="local-6989586621681151176"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151176"><span class="hs-identifier hs-var">body</span></a></span></span><span>
</span><span id="line-618"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681151175"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151175"><span class="hs-identifier hs-var">body_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151174"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681151174"><span class="hs-identifier hs-var">body_ue</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var] -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#BodyOfLetRec"><span class="hs-identifier hs-var">BodyOfLetRec</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151177"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151176"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-619"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Var -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintJoinBndrType"><span class="hs-identifier hs-var">lintJoinBndrType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151175"><span class="hs-identifier hs-var">body_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151177"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-620"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151175"><span class="hs-identifier hs-var">body_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681151174"><span class="hs-identifier hs-var">body_ue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-621"></span><span>
</span><span id="line-622"></span><span class="annot"><a href="GHC.Core.Lint.html#lintLetBind"><span class="hs-identifier hs-type">lintLetBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TopLevelFlag"><span class="hs-identifier hs-type">TopLevelFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#RecFlag"><span class="hs-identifier hs-type">RecFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedId"><span class="hs-identifier hs-type">LintedId</span></a></span><span>
</span><span id="line-623"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-624"></span><span class="hs-comment">-- Binder's type, and the RHS, have already been linted</span><span>
</span><span id="line-625"></span><span class="hs-comment">-- This function checks other invariants</span><span>
</span><span id="line-626"></span><span id="lintLetBind"><span class="annot"><span class="annottext">lintLetBind :: TopLevelFlag
-&gt; RecFlag -&gt; Var -&gt; CoreExpr -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintLetBind"><span class="hs-identifier hs-var hs-var">lintLetBind</span></a></span></span><span> </span><span id="local-6989586621681151170"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681151170"><span class="hs-identifier hs-var">top_lvl</span></a></span></span><span> </span><span id="local-6989586621681151169"><span class="annot"><span class="annottext">RecFlag
</span><a href="#local-6989586621681151169"><span class="hs-identifier hs-var">rec_flag</span></a></span></span><span> </span><span id="local-6989586621681151168"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span></span><span> </span><span id="local-6989586621681151167"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151167"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span id="local-6989586621681151166"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151166"><span class="hs-identifier hs-var">rhs_ty</span></a></span></span><span>
</span><span id="line-627"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681151165"><span class="annot"><span class="annottext">binder_ty :: LintedType
</span><a href="#local-6989586621681151165"><span class="hs-identifier hs-var hs-var">binder_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span>
</span><span id="line-628"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151165"><span class="hs-identifier hs-var">binder_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151166"><span class="hs-identifier hs-var">rhs_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; SDoc -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkRhsMsg"><span class="hs-identifier hs-var">mkRhsMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RHS&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151166"><span class="hs-identifier hs-var">rhs_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-629"></span><span>
</span><span id="line-630"></span><span>       </span><span class="hs-comment">-- If the binding is for a CoVar, the RHS should be (Coercion co)</span><span>
</span><span id="line-631"></span><span>       </span><span class="hs-comment">-- See Note [Core type and coercion invariant] in GHC.Core</span><span>
</span><span id="line-632"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isCoVar"><span class="hs-identifier hs-var">isCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall b. Expr b -&gt; Bool
</span><a href="GHC.Core.html#isCoArg"><span class="hs-identifier hs-var">isCoArg</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151167"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-633"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkLetErr"><span class="hs-identifier hs-var">mkLetErr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151167"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-634"></span><span>
</span><span id="line-635"></span><span>        </span><span class="hs-comment">-- Check the let/app invariant</span><span>
</span><span id="line-636"></span><span>        </span><span class="hs-comment">-- See Note [Core let/app invariant] in GHC.Core</span><span>
</span><span id="line-637"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Id.html#isJoinId"><span class="hs-identifier hs-var">isJoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span>
</span><span id="line-638"></span><span>               </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isUnliftedType"><span class="hs-identifier hs-var">isUnliftedType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151165"><span class="hs-identifier hs-var">binder_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-639"></span><span>               </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecFlag -&gt; Bool
</span><a href="GHC.Types.Basic.html#isNonRec"><span class="hs-identifier hs-var">isNonRec</span></a></span><span> </span><span class="annot"><span class="annottext">RecFlag
</span><a href="#local-6989586621681151169"><span class="hs-identifier hs-var">rec_flag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Bool
</span><a href="GHC.Core.Utils.html#exprOkForSpeculation"><span class="hs-identifier hs-var">exprOkForSpeculation</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151167"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-640"></span><span>               </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Id.html#isDataConWorkId"><span class="hs-identifier hs-var">isDataConWorkId</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Id.html#isDataConWrapId"><span class="hs-identifier hs-var">isDataConWrapId</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span> </span><span class="hs-comment">-- until #17521 is fixed</span><span>
</span><span id="line-641"></span><span>               </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Bool
</span><a href="GHC.Core.Utils.html#exprIsTickedString"><span class="hs-identifier hs-var">exprIsTickedString</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151167"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-642"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Core.Lint.html#badBndrTyMsg"><span class="hs-identifier hs-var">badBndrTyMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unlifted&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-643"></span><span>
</span><span id="line-644"></span><span>        </span><span class="hs-comment">-- Check that if the binder is at the top level and has type Addr#,</span><span>
</span><span id="line-645"></span><span>        </span><span class="hs-comment">-- that it is a string literal, see</span><span>
</span><span id="line-646"></span><span>        </span><span class="hs-comment">-- Note [Core top-level string literals].</span><span>
</span><span id="line-647"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TopLevelFlag -&gt; Bool
</span><a href="GHC.Types.Basic.html#isTopLevel"><span class="hs-identifier hs-var">isTopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681151170"><span class="hs-identifier hs-var">top_lvl</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151165"><span class="hs-identifier hs-var">binder_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="GHC.Builtin.Types.Prim.html#addrPrimTy"><span class="hs-identifier hs-var">addrPrimTy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-648"></span><span>                 </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Bool
</span><a href="GHC.Core.Utils.html#exprIsTickedString"><span class="hs-identifier hs-var">exprIsTickedString</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151167"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-649"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkTopNonLitStrMsg"><span class="hs-identifier hs-var">mkTopNonLitStrMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-650"></span><span>
</span><span id="line-651"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681151146"><span class="annot"><span class="annottext">LintFlags
</span><a href="#local-6989586621681151146"><span class="hs-identifier hs-var">flags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM LintFlags
</span><a href="GHC.Core.Lint.html#getLintFlags"><span class="hs-identifier hs-var">getLintFlags</span></a></span><span>
</span><span id="line-652"></span><span>
</span><span id="line-653"></span><span>         </span><span class="hs-comment">-- Check that a join-point binder has a valid type</span><span>
</span><span id="line-654"></span><span>         </span><span class="hs-comment">-- NB: lintIdBinder has checked that it is not top-level bound</span><span>
</span><span id="line-655"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Maybe JoinArity
</span><a href="GHC.Types.Id.html#isJoinId_maybe"><span class="hs-identifier hs-var">isJoinId_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-656"></span><span>            </span><span class="annot"><span class="annottext">Maybe JoinArity
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-657"></span><span>            </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681151143"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681151143"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JoinArity -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isValidJoinPointType"><span class="hs-identifier hs-var">isValidJoinPointType</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681151143"><span class="hs-identifier hs-var">arity</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151165"><span class="hs-identifier hs-var">binder_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-658"></span><span>                                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkInvalidJoinPointMsg"><span class="hs-identifier hs-var">mkInvalidJoinPointMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151165"><span class="hs-identifier hs-var">binder_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-659"></span><span>
</span><span id="line-660"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintFlags -&gt; Bool
</span><a href="GHC.Core.Lint.html#lf_check_inline_loop_breakers"><span class="hs-identifier hs-var">lf_check_inline_loop_breakers</span></a></span><span> </span><span class="annot"><span class="annottext">LintFlags
</span><a href="#local-6989586621681151146"><span class="hs-identifier hs-var">flags</span></a></span><span>
</span><span id="line-661"></span><span>               </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isStableUnfolding"><span class="hs-identifier hs-var">isStableUnfolding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Unfolding
</span><a href="GHC.Types.Id.html#realIdUnfolding"><span class="hs-identifier hs-var">realIdUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-662"></span><span>               </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">OccInfo -&gt; Bool
</span><a href="GHC.Types.Basic.html#isStrongLoopBreaker"><span class="hs-identifier hs-var">isStrongLoopBreaker</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; OccInfo
</span><a href="GHC.Types.Id.html#idOccInfo"><span class="hs-identifier hs-var">idOccInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-663"></span><span>               </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">InlinePragma -&gt; Bool
</span><a href="GHC.Types.Basic.html#isInlinePragma"><span class="hs-identifier hs-var">isInlinePragma</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; InlinePragma
</span><a href="GHC.Types.Id.html#idInlinePragma"><span class="hs-identifier hs-var">idInlinePragma</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-664"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addWarnL"><span class="hs-identifier hs-var">addWarnL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;INLINE binder is (non-rule) loop breaker:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-665"></span><span>              </span><span class="hs-comment">-- Only non-rule loop breakers inhibit inlining</span><span>
</span><span id="line-666"></span><span>
</span><span id="line-667"></span><span>       </span><span class="hs-comment">-- We used to check that the dmdTypeDepth of a demand signature never</span><span>
</span><span id="line-668"></span><span>       </span><span class="hs-comment">-- exceeds idArity, but that is an unnecessary complication, see</span><span>
</span><span id="line-669"></span><span>       </span><span class="hs-comment">-- Note [idArity varies independently of dmdTypeDepth] in GHC.Core.Opt.DmdAnal</span><span>
</span><span id="line-670"></span><span>
</span><span id="line-671"></span><span>       </span><span class="hs-comment">-- Check that the binder's arity is within the bounds imposed by</span><span>
</span><span id="line-672"></span><span>       </span><span class="hs-comment">-- the type and the strictness signature. See Note [exprArity invariant]</span><span>
</span><span id="line-673"></span><span>       </span><span class="hs-comment">-- and Note [Trimming arity]</span><span>
</span><span id="line-674"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; [OneShotInfo]
</span><a href="GHC.Core.Opt.Arity.html#typeArity"><span class="hs-identifier hs-var">typeArity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; JoinArity -&gt; Bool
</span><a href="GHC.Utils.Misc.html#lengthAtLeast"><span class="hs-operator hs-var">`lengthAtLeast`</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; JoinArity
</span><a href="GHC.Types.Id.html#idArity"><span class="hs-identifier hs-var">idArity</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-675"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;idArity&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; JoinArity
</span><a href="GHC.Types.Id.html#idArity"><span class="hs-identifier hs-var">idArity</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-676"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;exceeds typeArity&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-677"></span><span>           </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; JoinArity
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; [OneShotInfo]
</span><a href="GHC.Core.Opt.Arity.html#typeArity"><span class="hs-identifier hs-var">typeArity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-678"></span><span>           </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-679"></span><span>
</span><span id="line-680"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">StrictSig -&gt; ([Demand], Divergence)
</span><a href="GHC.Types.Demand.html#splitStrictSig"><span class="hs-identifier hs-var">splitStrictSig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; StrictSig
</span><a href="GHC.Types.Id.html#idStrictness"><span class="hs-identifier hs-var">idStrictness</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-681"></span><span>           </span><span class="hs-special">(</span><span id="local-6989586621681151126"><span class="annot"><span class="annottext">[Demand]
</span><a href="#local-6989586621681151126"><span class="hs-identifier hs-var">demands</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151125"><span class="annot"><span class="annottext">Divergence
</span><a href="#local-6989586621681151125"><span class="hs-identifier hs-var">result_info</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Divergence -&gt; Bool
</span><a href="GHC.Types.Demand.html#isDeadEndDiv"><span class="hs-identifier hs-var">isDeadEndDiv</span></a></span><span> </span><span class="annot"><span class="annottext">Divergence
</span><a href="#local-6989586621681151125"><span class="hs-identifier hs-var">result_info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-682"></span><span>             </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Demand]
</span><a href="#local-6989586621681151126"><span class="hs-identifier hs-var">demands</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; JoinArity -&gt; Bool
</span><a href="GHC.Utils.Misc.html#lengthAtLeast"><span class="hs-operator hs-var">`lengthAtLeast`</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; JoinArity
</span><a href="GHC.Types.Id.html#idArity"><span class="hs-identifier hs-var">idArity</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-683"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;idArity&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; JoinArity
</span><a href="GHC.Types.Id.html#idArity"><span class="hs-identifier hs-var">idArity</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-684"></span><span>               </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;exceeds arity imposed by the strictness signature&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-685"></span><span>               </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; StrictSig
</span><a href="GHC.Types.Id.html#idStrictness"><span class="hs-identifier hs-var">idStrictness</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-686"></span><span>               </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-687"></span><span>           </span><span class="annot"><span class="annottext">([Demand], Divergence)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-688"></span><span>
</span><span id="line-689"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#RuleOf"><span class="hs-identifier hs-var">RuleOf</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType -&gt; CoreRule -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintCoreRule"><span class="hs-identifier hs-var">lintCoreRule</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151165"><span class="hs-identifier hs-var">binder_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; [CoreRule]
</span><a href="GHC.Types.Id.html#idCoreRules"><span class="hs-identifier hs-var">idCoreRules</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-690"></span><span>
</span><span id="line-691"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#UnfoldingOf"><span class="hs-identifier hs-var">UnfoldingOf</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-692"></span><span>         </span><span class="annot"><span class="annottext">Var -&gt; LintedType -&gt; Unfolding -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintIdUnfolding"><span class="hs-identifier hs-var">lintIdUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151165"><span class="hs-identifier hs-var">binder_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Unfolding
</span><a href="GHC.Types.Id.html#idUnfolding"><span class="hs-identifier hs-var">idUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151168"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-693"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-694"></span><span>
</span><span id="line-695"></span><span>        </span><span class="hs-comment">-- We should check the unfolding, if any, but this is tricky because</span><span>
</span><span id="line-696"></span><span>        </span><span class="hs-comment">-- the unfolding is a SimplifiableCoreExpr. Give up for now.</span><span>
</span><span id="line-697"></span><span>
</span><span id="line-698"></span><span class="hs-comment">-- | Checks the RHS of bindings. It only differs from 'lintCoreExpr'</span><span>
</span><span id="line-699"></span><span class="hs-comment">-- in that it doesn't reject occurrences of the function 'makeStatic' when they</span><span>
</span><span id="line-700"></span><span class="hs-comment">-- appear at the top level and @lf_check_static_ptrs == AllowAtTopLevel@, and</span><span>
</span><span id="line-701"></span><span class="hs-comment">-- for join points, it skips the outer lambdas that take arguments to the</span><span>
</span><span id="line-702"></span><span class="hs-comment">-- join point.</span><span>
</span><span id="line-703"></span><span class="hs-comment">--</span><span>
</span><span id="line-704"></span><span class="hs-comment">-- See Note [Checking StaticPtrs].</span><span>
</span><span id="line-705"></span><span class="annot"><a href="GHC.Core.Lint.html#lintRhs"><span class="hs-identifier hs-type">lintRhs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-706"></span><span class="hs-comment">-- NB: the Id can be Linted or not -- it's only used for</span><span>
</span><span id="line-707"></span><span class="hs-comment">--     its OccInfo and join-pointer-hood</span><span>
</span><span id="line-708"></span><span id="lintRhs"><span class="annot"><span class="annottext">lintRhs :: Var -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintRhs"><span class="hs-identifier hs-var hs-var">lintRhs</span></a></span></span><span> </span><span id="local-6989586621681151118"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151118"><span class="hs-identifier hs-var">bndr</span></a></span></span><span> </span><span id="local-6989586621681151117"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151117"><span class="hs-identifier hs-var">rhs</span></a></span></span><span>
</span><span id="line-709"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681151116"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681151116"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Maybe JoinArity
</span><a href="GHC.Types.Id.html#isJoinId_maybe"><span class="hs-identifier hs-var">isJoinId_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151118"><span class="hs-identifier hs-var">bndr</span></a></span><span>
</span><span id="line-710"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; Maybe Var -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintJoinLams"><span class="hs-identifier hs-var">lintJoinLams</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681151116"><span class="hs-identifier hs-var">arity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151118"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151117"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-711"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#AlwaysTailCalled"><span class="hs-identifier hs-type">AlwaysTailCalled</span></a></span><span> </span><span id="local-6989586621681151113"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681151113"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OccInfo -&gt; TailCallInfo
</span><a href="GHC.Types.Basic.html#tailCallInfo"><span class="hs-identifier hs-var">tailCallInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; OccInfo
</span><a href="GHC.Types.Id.html#idOccInfo"><span class="hs-identifier hs-var">idOccInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151118"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-712"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; Maybe Var -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintJoinLams"><span class="hs-identifier hs-var">lintJoinLams</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681151113"><span class="hs-identifier hs-var">arity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151117"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-713"></span><span>
</span><span id="line-714"></span><span class="hs-comment">-- Allow applications of the data constructor @StaticPtr@ at the top</span><span>
</span><span id="line-715"></span><span class="hs-comment">-- but produce errors otherwise.</span><span>
</span><span id="line-716"></span><span class="annot"><a href="GHC.Core.Lint.html#lintRhs"><span class="hs-identifier hs-var">lintRhs</span></a></span><span> </span><span id="local-6989586621681151111"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151111"><span class="hs-identifier hs-var">_bndr</span></a></span></span><span> </span><span id="local-6989586621681151110"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151110"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">LintFlags -&gt; StaticPtrCheck
</span><a href="GHC.Core.Lint.html#lf_check_static_ptrs"><span class="hs-identifier hs-var">lf_check_static_ptrs</span></a></span><span> </span><span class="annot"><span class="annottext">LintM LintFlags
</span><a href="GHC.Core.Lint.html#getLintFlags"><span class="hs-identifier hs-var">getLintFlags</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">StaticPtrCheck -&gt; LintM (LintedType, UsageEnv)
</span><a href="#local-6989586621681151109"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-717"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-718"></span><span>    </span><span class="hs-comment">-- Allow occurrences of 'makeStatic' at the top-level but produce errors</span><span>
</span><span id="line-719"></span><span>    </span><span class="hs-comment">-- otherwise.</span><span>
</span><span id="line-720"></span><span>    </span><span class="annot"><a href="#local-6989586621681151109"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#StaticPtrCheck"><span class="hs-identifier hs-type">StaticPtrCheck</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#OutType"><span class="hs-identifier hs-type">OutType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-721"></span><span>    </span><span id="local-6989586621681151109"><span class="annot"><span class="annottext">go :: StaticPtrCheck -&gt; LintM (LintedType, UsageEnv)
</span><a href="#local-6989586621681151109"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">StaticPtrCheck
</span><a href="GHC.Core.Lint.html#AllowAtTopLevel"><span class="hs-identifier hs-var">AllowAtTopLevel</span></a></span><span>
</span><span id="line-722"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681151107"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151107"><span class="hs-identifier hs-var">binders0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151106"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151106"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; ([Var], CoreExpr)
</span><a href="GHC.Core.html#collectTyBinders"><span class="hs-identifier hs-var">collectTyBinders</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151110"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-723"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681151104"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151104"><span class="hs-identifier hs-var">fun</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151103"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151103"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151102"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151102"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151101"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151101"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Maybe (CoreExpr, LintedType, CoreExpr, CoreExpr)
</span><a href="GHC.Core.Utils.html#collectMakeStaticArgs"><span class="hs-identifier hs-var">collectMakeStaticArgs</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151106"><span class="hs-identifier hs-var">rhs'</span></a></span><span>
</span><span id="line-724"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#markAllJoinsBad"><span class="hs-identifier hs-var">markAllJoinsBad</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-725"></span><span>        </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span>
</span><span id="line-726"></span><span>        </span><span class="hs-comment">-- imitate @lintCoreExpr (Lam ...)@</span><span>
</span><span id="line-727"></span><span>        </span><span class="annot"><span class="annottext">Var -&gt; LintM (LintedType, UsageEnv) -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintLambda"><span class="hs-identifier hs-var">lintLambda</span></a></span><span>
</span><span id="line-728"></span><span>        </span><span class="hs-comment">-- imitate @lintCoreExpr (App ...)@</span><span>
</span><span id="line-729"></span><span>        </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681151096"><span class="annot"><span class="annottext">(LintedType, UsageEnv)
</span><a href="#local-6989586621681151096"><span class="hs-identifier hs-var">fun_ty_ue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151104"><span class="hs-identifier hs-var">fun</span></a></span><span>
</span><span id="line-730"></span><span>            </span><span class="annot"><span class="annottext">(LintedType, UsageEnv)
-&gt; [CoreExpr] -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreArgs"><span class="hs-identifier hs-var">lintCoreArgs</span></a></span><span> </span><span class="annot"><span class="annottext">(LintedType, UsageEnv)
</span><a href="#local-6989586621681151096"><span class="hs-identifier hs-var">fun_ty_ue</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall b. LintedType -&gt; Expr b
</span><a href="GHC.Core.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151103"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151102"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151101"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-731"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-732"></span><span>        </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681151107"><span class="hs-identifier hs-var">binders0</span></a></span><span>
</span><span id="line-733"></span><span>    </span><span class="annot"><a href="#local-6989586621681151109"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">StaticPtrCheck
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#markAllJoinsBad"><span class="hs-identifier hs-var">markAllJoinsBad</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151110"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-734"></span><span>
</span><span id="line-735"></span><span class="hs-comment">-- | Lint the RHS of a join point with expected join arity of @n@ (see Note</span><span>
</span><span id="line-736"></span><span class="hs-comment">-- [Join points] in &quot;GHC.Core&quot;).</span><span>
</span><span id="line-737"></span><span class="annot"><a href="GHC.Core.Lint.html#lintJoinLams"><span class="hs-identifier hs-type">lintJoinLams</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#JoinArity"><span class="hs-identifier hs-type">JoinArity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-738"></span><span id="lintJoinLams"><span class="annot"><span class="annottext">lintJoinLams :: JoinArity -&gt; Maybe Var -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintJoinLams"><span class="hs-identifier hs-var hs-var">lintJoinLams</span></a></span></span><span> </span><span id="local-6989586621681151093"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681151093"><span class="hs-identifier hs-var">join_arity</span></a></span></span><span> </span><span id="local-6989586621681151092"><span class="annot"><span class="annottext">Maybe Var
</span><a href="#local-6989586621681151092"><span class="hs-identifier hs-var">enforce</span></a></span></span><span> </span><span id="local-6989586621681151091"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151091"><span class="hs-identifier hs-var">rhs</span></a></span></span><span>
</span><span id="line-739"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="#local-6989586621681151090"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681151093"><span class="hs-identifier hs-var">join_arity</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151091"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-740"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-741"></span><span>    </span><span id="local-6989586621681151090"><span class="annot"><span class="annottext">go :: JoinArity -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="#local-6989586621681151090"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">0</span></span><span> </span><span id="local-6989586621681151089"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151089"><span class="hs-identifier hs-var">expr</span></a></span></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151089"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-742"></span><span>    </span><span class="annot"><a href="#local-6989586621681151090"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681151088"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681151088"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621681151086"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151086"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621681151085"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151085"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintM (LintedType, UsageEnv) -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintLambda"><span class="hs-identifier hs-var">lintLambda</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151086"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="#local-6989586621681151090"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681151088"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151085"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-743"></span><span>    </span><span class="annot"><a href="#local-6989586621681151090"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681151084"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681151084"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681151083"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151083"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681151082"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151082"><span class="hs-identifier hs-var">bndr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe Var
</span><a href="#local-6989586621681151092"><span class="hs-identifier hs-var">enforce</span></a></span><span> </span><span class="hs-comment">-- Join point with too few RHS lambdas</span><span>
</span><span id="line-744"></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; JoinArity -&gt; JoinArity -&gt; CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadJoinArityMsg"><span class="hs-identifier hs-var">mkBadJoinArityMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151082"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681151093"><span class="hs-identifier hs-var">join_arity</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681151084"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151091"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-745"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-comment">-- Future join point, not yet eta-expanded</span><span>
</span><span id="line-746"></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#markAllJoinsBad"><span class="hs-identifier hs-var">markAllJoinsBad</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151083"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-747"></span><span>                </span><span class="hs-comment">-- Body of lambda is not a tail position</span><span>
</span><span id="line-748"></span><span>
</span><span id="line-749"></span><span class="annot"><a href="GHC.Core.Lint.html#lintIdUnfolding"><span class="hs-identifier hs-type">lintIdUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-750"></span><span id="lintIdUnfolding"><span class="annot"><span class="annottext">lintIdUnfolding :: Var -&gt; LintedType -&gt; Unfolding -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintIdUnfolding"><span class="hs-identifier hs-var hs-var">lintIdUnfolding</span></a></span></span><span> </span><span id="local-6989586621681151078"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151078"><span class="hs-identifier hs-var">bndr</span></a></span></span><span> </span><span id="local-6989586621681151077"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151077"><span class="hs-identifier hs-var">bndr_ty</span></a></span></span><span> </span><span id="local-6989586621681151076"><span class="annot"><span class="annottext">Unfolding
</span><a href="#local-6989586621681151076"><span class="hs-identifier hs-var">uf</span></a></span></span><span>
</span><span id="line-751"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isStableUnfolding"><span class="hs-identifier hs-var">isStableUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="#local-6989586621681151076"><span class="hs-identifier hs-var">uf</span></a></span><span>
</span><span id="line-752"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681151075"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151075"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Unfolding -&gt; Maybe CoreExpr
</span><a href="GHC.Core.html#maybeUnfoldingTemplate"><span class="hs-identifier hs-var">maybeUnfoldingTemplate</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="#local-6989586621681151076"><span class="hs-identifier hs-var">uf</span></a></span><span>
</span><span id="line-753"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681151073"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151073"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isCompulsoryUnfolding"><span class="hs-identifier hs-var">isCompulsoryUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="#local-6989586621681151076"><span class="hs-identifier hs-var">uf</span></a></span><span>
</span><span id="line-754"></span><span>                        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a. LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#noLPChecks"><span class="hs-identifier hs-var">noLPChecks</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintRhs"><span class="hs-identifier hs-var">lintRhs</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151078"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151075"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-755"></span><span>                              </span><span class="hs-comment">-- See Note [Checking for levity polymorphism]</span><span>
</span><span id="line-756"></span><span>                        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Var -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintRhs"><span class="hs-identifier hs-var">lintRhs</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151078"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151075"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-757"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151077"><span class="hs-identifier hs-var">bndr_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151073"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; SDoc -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkRhsMsg"><span class="hs-identifier hs-var">mkRhsMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151078"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unfolding&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151073"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-758"></span><span class="annot"><a href="GHC.Core.Lint.html#lintIdUnfolding"><span class="hs-identifier hs-var">lintIdUnfolding</span></a></span><span>  </span><span class="annot"><span class="annottext">Var
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-759"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>       </span><span class="hs-comment">-- Do not Lint unstable unfoldings, because that leads</span><span>
</span><span id="line-760"></span><span>                    </span><span class="hs-comment">-- to exponential behaviour; c.f. GHC.Core.FVs.idUnfoldingVars</span><span>
</span><span id="line-761"></span><span>
</span><span id="line-762"></span><span class="hs-comment">{-
Note [Checking for INLINE loop breakers]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
It's very suspicious if a strong loop breaker is marked INLINE.

However, the desugarer generates instance methods with INLINE pragmas
that form a mutually recursive group.  Only after a round of
simplification are they unravelled.  So we suppress the test for
the desugarer.

Note [Checking for levity polymorphism]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We ordinarily want to check for bad levity polymorphism. See
Note [Levity polymorphism invariants] in GHC.Core. However, we do *not*
want to do this in a compulsory unfolding. Compulsory unfoldings arise
only internally, for things like newtype wrappers, dictionaries, and
(notably) unsafeCoerce#. These might legitimately be levity-polymorphic;
indeed levity-polyorphic unfoldings are a primary reason for the
very existence of compulsory unfoldings (we can't compile code for
the original, levity-poly, binding).

It is vitally important that we do levity-polymorphism checks *after*
performing the unfolding, but not beforehand. This is all safe because
we will check any unfolding after it has been unfolded; checking the
unfolding beforehand is merely an optimization, and one that actively
hurts us here.

Note [Linting of runRW#]
~~~~~~~~~~~~~~~~~~~~~~~~
runRW# has some very special behavior (see Note [runRW magic] in
GHC.CoreToStg.Prep) which CoreLint must accommodate, by allowing
join points in its argument.  For example, this is fine:

    join j x = ...
    in runRW#  (\s. case v of
                       A -&gt; j 3
                       B -&gt; j 4)

Usually those calls to the join point 'j' would not be valid tail calls,
because they occur in a function argument.  But in the case of runRW#
they are fine, because runRW# (\s.e) behaves operationally just like e.
(runRW# is ultimately inlined in GHC.CoreToStg.Prep.)

In the case that the continuation is /not/ a lambda we simply disable this
special behaviour.  For example, this is /not/ fine:

    join j = ...
    in runRW# @r @ty (jump j)



************************************************************************
*                                                                      *
\subsection[lintCoreExpr]{lintCoreExpr}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-819"></span><span>
</span><span id="line-820"></span><span class="hs-comment">-- Linted things: substitution applied, and type is linted</span><span>
</span><span id="line-821"></span><span class="hs-keyword">type</span><span> </span><span id="LintedType"><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-var">LintedType</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-822"></span><span class="hs-keyword">type</span><span> </span><span id="LintedKind"><span class="annot"><a href="GHC.Core.Lint.html#LintedKind"><span class="hs-identifier hs-var">LintedKind</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span>
</span><span id="line-823"></span><span class="hs-keyword">type</span><span> </span><span id="LintedCoercion"><span class="annot"><a href="GHC.Core.Lint.html#LintedCoercion"><span class="hs-identifier hs-var">LintedCoercion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-824"></span><span class="hs-keyword">type</span><span> </span><span id="LintedTyCoVar"><span class="annot"><a href="GHC.Core.Lint.html#LintedTyCoVar"><span class="hs-identifier hs-var">LintedTyCoVar</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span>
</span><span id="line-825"></span><span class="hs-keyword">type</span><span> </span><span id="LintedId"><span class="annot"><a href="GHC.Core.Lint.html#LintedId"><span class="hs-identifier hs-var">LintedId</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-826"></span><span>
</span><span id="line-827"></span><span class="hs-comment">-- | Lint an expression cast through the given coercion, returning the type</span><span>
</span><span id="line-828"></span><span class="hs-comment">-- resulting from the cast.</span><span>
</span><span id="line-829"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCastExpr"><span class="hs-identifier hs-type">lintCastExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span>
</span><span id="line-830"></span><span id="lintCastExpr"><span class="annot"><span class="annottext">lintCastExpr :: CoreExpr -&gt; LintedType -&gt; Coercion -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintCastExpr"><span class="hs-identifier hs-var hs-var">lintCastExpr</span></a></span></span><span> </span><span id="local-6989586621681151064"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151064"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681151063"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151063"><span class="hs-identifier hs-var">expr_ty</span></a></span></span><span> </span><span id="local-6989586621681151062"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681151062"><span class="hs-identifier hs-var">co</span></a></span></span><span>
</span><span id="line-831"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681151061"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681151061"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681151062"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-832"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621681151058"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151058"><span class="hs-identifier hs-var">from_ty</span></a></span></span><span> </span><span id="local-6989586621681151057"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151057"><span class="hs-identifier hs-var">to_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151056"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681151056"><span class="hs-keyword hs-var">role</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; (Pair LintedType, Role)
</span><a href="GHC.Core.Coercion.html#coercionKindRole"><span class="hs-identifier hs-var">coercionKindRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681151061"><span class="hs-identifier hs-var">co'</span></a></span><span>
</span><span id="line-833"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkValueType"><span class="hs-identifier hs-var">checkValueType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151057"><span class="hs-identifier hs-var">to_ty</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-834"></span><span>         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;target of cast&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681151061"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-835"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681151061"><span class="hs-identifier hs-var">co'</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Representational"><span class="hs-identifier hs-var">Representational</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681151056"><span class="hs-keyword hs-var">role</span></a></span><span>
</span><span id="line-836"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151058"><span class="hs-identifier hs-var">from_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151063"><span class="hs-identifier hs-var">expr_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; Coercion -&gt; LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkCastErr"><span class="hs-identifier hs-var">mkCastErr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151064"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681151061"><span class="hs-identifier hs-var">co'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151058"><span class="hs-identifier hs-var">from_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151063"><span class="hs-identifier hs-var">expr_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-837"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151057"><span class="hs-identifier hs-var">to_ty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-838"></span><span>
</span><span id="line-839"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-type">lintCoreExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-840"></span><span class="hs-comment">-- The returned type has the substitution from the monad</span><span>
</span><span id="line-841"></span><span class="hs-comment">-- already applied to it:</span><span>
</span><span id="line-842"></span><span class="hs-comment">--      lintCoreExpr e subst = exprType (subst e)</span><span>
</span><span id="line-843"></span><span class="hs-comment">--</span><span>
</span><span id="line-844"></span><span class="hs-comment">-- The returned &quot;type&quot; can be a kind, if the expression is (Type ty)</span><span>
</span><span id="line-845"></span><span>
</span><span id="line-846"></span><span class="hs-comment">-- If you edit this function, you may need to update the GHC formalism</span><span>
</span><span id="line-847"></span><span class="hs-comment">-- See Note [GHC Formalism]</span><span>
</span><span id="line-848"></span><span>
</span><span id="line-849"></span><span id="lintCoreExpr"><span class="annot"><span class="annottext">lintCoreExpr :: CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var hs-var">lintCoreExpr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681151048"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151048"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-850"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Var -&gt; JoinArity -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintIdOcc"><span class="hs-identifier hs-var">lintIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151048"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">0</span></span><span>
</span><span id="line-851"></span><span>
</span><span id="line-852"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span> </span><span id="local-6989586621681151045"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681151045"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-853"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Literal -&gt; LintedType
</span><a href="GHC.Types.Literal.html#literalType"><span class="hs-identifier hs-var">literalType</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681151045"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="GHC.Core.UsageEnv.html#zeroUE"><span class="hs-identifier hs-var">zeroUE</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-854"></span><span>
</span><span id="line-855"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-type">Cast</span></a></span><span> </span><span id="local-6989586621681151041"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151041"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681151040"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681151040"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-856"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681151039"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151039"><span class="hs-identifier hs-var">expr_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151038"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681151038"><span class="hs-identifier hs-var">ue</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#markAllJoinsBad"><span class="hs-identifier hs-var">markAllJoinsBad</span></a></span><span>   </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151041"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-857"></span><span>       </span><span id="local-6989586621681151037"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151037"><span class="hs-identifier hs-var">to_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintedType -&gt; Coercion -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintCastExpr"><span class="hs-identifier hs-var">lintCastExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151041"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151039"><span class="hs-identifier hs-var">expr_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681151040"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-858"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151037"><span class="hs-identifier hs-var">to_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681151038"><span class="hs-identifier hs-var">ue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-859"></span><span>
</span><span id="line-860"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-type">Tick</span></a></span><span> </span><span id="local-6989586621681151035"><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621681151035"><span class="hs-identifier hs-var">tickish</span></a></span></span><span> </span><span id="local-6989586621681151034"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151034"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-861"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621681151035"><span class="hs-identifier hs-var">tickish</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-862"></span><span>         </span><span class="annot"><a href="GHC.Types.Tickish.html#Breakpoint"><span class="hs-identifier hs-type">Breakpoint</span></a></span><span> </span><span class="annot"><span class="annottext">XBreakpoint 'TickishPassCore
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681151032"><span class="annot"><span class="annottext">[XTickishId 'TickishPassCore]
</span><a href="#local-6989586621681151032"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">[XTickishId 'TickishPassCore]
</span><a href="#local-6989586621681151032"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681151031"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151031"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-863"></span><span>                                 </span><span class="annot"><span class="annottext">Var -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkDeadIdOcc"><span class="hs-identifier hs-var">checkDeadIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151031"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-864"></span><span>                                 </span><span class="annot"><span class="annottext">Var -&gt; LintM (Var, LintedType)
</span><a href="GHC.Core.Lint.html#lookupIdInScope"><span class="hs-identifier hs-var">lookupIdInScope</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151031"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-865"></span><span>         </span><span class="annot"><span class="annottext">CoreTickish
</span><span class="hs-identifier">_</span></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-866"></span><span>       </span><span class="annot"><span class="annottext">forall a. Bool -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#markAllJoinsBadIf"><span class="hs-identifier hs-var">markAllJoinsBadIf</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681151027"><span class="hs-identifier hs-var">block_joins</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151034"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-867"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-868"></span><span>    </span><span id="local-6989586621681151027"><span class="annot"><span class="annottext">block_joins :: Bool
</span><a href="#local-6989586621681151027"><span class="hs-identifier hs-var hs-var">block_joins</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621681151035"><span class="hs-identifier hs-var">tickish</span></a></span><span> </span><span class="annot"><span class="annottext">forall (pass :: TickishPass).
GenTickish pass -&gt; TickishScoping -&gt; Bool
</span><a href="GHC.Types.Tickish.html#tickishScopesLike"><span class="hs-operator hs-var">`tickishScopesLike`</span></a></span><span> </span><span class="annot"><span class="annottext">TickishScoping
</span><a href="GHC.Types.Tickish.html#SoftScope"><span class="hs-identifier hs-var">SoftScope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-869"></span><span>      </span><span class="hs-comment">-- TODO Consider whether this is the correct rule. It is consistent with</span><span>
</span><span id="line-870"></span><span>      </span><span class="hs-comment">-- the simplifier's behaviour - cost-centre-scoped ticks become part of</span><span>
</span><span id="line-871"></span><span>      </span><span class="hs-comment">-- the continuation, and thus they behave like part of an evaluation</span><span>
</span><span id="line-872"></span><span>      </span><span class="hs-comment">-- context, but soft-scoped and non-scoped ticks simply wrap the result</span><span>
</span><span id="line-873"></span><span>      </span><span class="hs-comment">-- (see Simplify.simplTick).</span><span>
</span><span id="line-874"></span><span>
</span><span id="line-875"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Let"><span class="hs-identifier hs-type">Let</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-type">NonRec</span></a></span><span> </span><span id="local-6989586621681151022"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151022"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span id="local-6989586621681151021"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151021"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681151020"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151020"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-876"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151022"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-877"></span><span>  </span><span class="hs-glyph">=</span><span>     </span><span class="hs-comment">-- See Note [Linting type lets]</span><span>
</span><span id="line-878"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681151018"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151018"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151021"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-879"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. Var -&gt; (Var -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintTyBndr"><span class="hs-identifier hs-var">lintTyBndr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151022"><span class="hs-identifier hs-var">tv</span></a></span><span>              </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681151015"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151015"><span class="hs-identifier hs-var">tv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-880"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#RhsOf"><span class="hs-identifier hs-var">RhsOf</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151022"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintTyKind"><span class="hs-identifier hs-var">lintTyKind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151015"><span class="hs-identifier hs-var">tv'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151018"><span class="hs-identifier hs-var">ty'</span></a></span><span>
</span><span id="line-881"></span><span>                </span><span class="hs-comment">-- Now extend the substitution so we</span><span>
</span><span id="line-882"></span><span>                </span><span class="hs-comment">-- take advantage of it in the body</span><span>
</span><span id="line-883"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. Var -&gt; LintedType -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#extendTvSubstL"><span class="hs-identifier hs-var">extendTvSubstL</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151022"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151018"><span class="hs-identifier hs-var">ty'</span></a></span><span>        </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-884"></span><span>          </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var] -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#BodyOfLetRec"><span class="hs-identifier hs-var">BodyOfLetRec</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151022"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-885"></span><span>          </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151020"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-886"></span><span>
</span><span id="line-887"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Let"><span class="hs-identifier hs-type">Let</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-type">NonRec</span></a></span><span> </span><span id="local-6989586621681151012"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151012"><span class="hs-identifier hs-var">bndr</span></a></span></span><span> </span><span id="local-6989586621681151011"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151011"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681151010"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151010"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-888"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151012"><span class="hs-identifier hs-var">bndr</span></a></span><span>
</span><span id="line-889"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- First Lint the RHS, before bringing the binder into scope</span><span>
</span><span id="line-890"></span><span>         </span><span class="hs-special">(</span><span id="local-6989586621681151008"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151008"><span class="hs-identifier hs-var">rhs_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681151007"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681151007"><span class="hs-identifier hs-var">let_ue</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Var -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintRhs"><span class="hs-identifier hs-var">lintRhs</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151012"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151011"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-891"></span><span>
</span><span id="line-892"></span><span>          </span><span class="hs-comment">-- See Note [Multiplicity of let binders] in Var</span><span>
</span><span id="line-893"></span><span>         </span><span class="hs-comment">-- Now lint the binder</span><span>
</span><span id="line-894"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. BindingSite -&gt; Var -&gt; (Var -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintBinder"><span class="hs-identifier hs-var">lintBinder</span></a></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="GHC.Utils.Outputable.html#LetBind"><span class="hs-identifier hs-var">LetBind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151012"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681151004"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151004"><span class="hs-identifier hs-var">bndr'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-895"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
-&gt; RecFlag -&gt; Var -&gt; CoreExpr -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintLetBind"><span class="hs-identifier hs-var">lintLetBind</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="GHC.Types.Basic.html#NotTopLevel"><span class="hs-identifier hs-var">NotTopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">RecFlag
</span><a href="GHC.Types.Basic.html#NonRecursive"><span class="hs-identifier hs-var">NonRecursive</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151004"><span class="hs-identifier hs-var">bndr'</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151011"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681151008"><span class="hs-identifier hs-var">rhs_ty</span></a></span><span>
</span><span id="line-896"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. Var -&gt; UsageEnv -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addAliasUE"><span class="hs-identifier hs-var">addAliasUE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151012"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681151007"><span class="hs-identifier hs-var">let_ue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var] -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintLetBody"><span class="hs-identifier hs-var">lintLetBody</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151004"><span class="hs-identifier hs-var">bndr'</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151010"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-897"></span><span>
</span><span id="line-898"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-899"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkLetErr"><span class="hs-identifier hs-var">mkLetErr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681151012"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151011"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>       </span><span class="hs-comment">-- Not quite accurate</span><span>
</span><span id="line-900"></span><span>
</span><span id="line-901"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span id="local-6989586621681151000"><span class="annot"><span class="annottext">e :: CoreExpr
</span><a href="#local-6989586621681151000"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Let"><span class="hs-identifier hs-type">Let</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span id="local-6989586621681150998"><span class="annot"><span class="annottext">[(Var, CoreExpr)]
</span><a href="#local-6989586621681150998"><span class="hs-identifier hs-var">pairs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681150997"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150997"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-902"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- Check that the list of pairs is non-empty</span><span>
</span><span id="line-903"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, CoreExpr)]
</span><a href="#local-6989586621681150998"><span class="hs-identifier hs-var">pairs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#emptyRec"><span class="hs-identifier hs-var">emptyRec</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681151000"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-904"></span><span>
</span><span id="line-905"></span><span>          </span><span class="hs-comment">-- Check that there are no duplicated binders</span><span>
</span><span id="line-906"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150995"><span class="annot"><span class="annottext">[NonEmpty Var]
</span><a href="#local-6989586621681150995"><span class="hs-identifier hs-var">dups</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; ([a], [NonEmpty a])
</span><a href="GHC.Data.List.SetOps.html#removeDups"><span class="hs-identifier hs-var">removeDups</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150994"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-907"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[NonEmpty Var]
</span><a href="#local-6989586621681150995"><span class="hs-identifier hs-var">dups</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NonEmpty Var] -&gt; SDoc
</span><a href="GHC.Core.Lint.html#dupVars"><span class="hs-identifier hs-var">dupVars</span></a></span><span> </span><span class="annot"><span class="annottext">[NonEmpty Var]
</span><a href="#local-6989586621681150995"><span class="hs-identifier hs-var">dups</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-908"></span><span>
</span><span id="line-909"></span><span>          </span><span class="hs-comment">-- Check that either all the binders are joins, or none</span><span>
</span><span id="line-910"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Id.html#isJoinId"><span class="hs-identifier hs-var">isJoinId</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150994"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Id.html#isJoinId"><span class="hs-identifier hs-var">isJoinId</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150994"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-911"></span><span>          </span><span class="annot"><span class="annottext">[Var] -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkInconsistentRecMsg"><span class="hs-identifier hs-var">mkInconsistentRecMsg</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150994"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-912"></span><span>
</span><span id="line-913"></span><span>          </span><span class="hs-comment">-- See Note [Multiplicity of let binders] in Var</span><span>
</span><span id="line-914"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681150990"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150990"><span class="hs-identifier hs-var">body_type</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150989"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150989"><span class="hs-identifier hs-var">body_ue</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150988"><span class="annot"><span class="annottext">[UsageEnv]
</span><a href="#local-6989586621681150988"><span class="hs-identifier hs-var">ues</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-915"></span><span>            </span><span class="annot"><span class="annottext">forall a.
TopLevelFlag
-&gt; [(Var, CoreExpr)] -&gt; ([Var] -&gt; LintM a) -&gt; LintM (a, [UsageEnv])
</span><a href="GHC.Core.Lint.html#lintRecBindings"><span class="hs-identifier hs-var">lintRecBindings</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="GHC.Types.Basic.html#NotTopLevel"><span class="hs-identifier hs-var">NotTopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, CoreExpr)]
</span><a href="#local-6989586621681150998"><span class="hs-identifier hs-var">pairs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681150987"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150987"><span class="hs-identifier hs-var">bndrs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-916"></span><span>            </span><span class="annot"><span class="annottext">[Var] -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintLetBody"><span class="hs-identifier hs-var">lintLetBody</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150987"><span class="hs-identifier hs-var">bndrs'</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150997"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-917"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150990"><span class="hs-identifier hs-var">body_type</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150989"><span class="hs-identifier hs-var">body_ue</span></a></span><span>  </span><span class="annot"><span class="annottext">UsageEnv -&gt; UsageEnv -&gt; UsageEnv
</span><a href="GHC.Core.UsageEnv.html#addUE"><span class="hs-operator hs-var">`addUE`</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; UsageEnv -&gt; UsageEnv
</span><a href="GHC.Core.UsageEnv.html#scaleUE"><span class="hs-identifier hs-var">scaleUE</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="GHC.Core.Type.html#Many"><span class="hs-identifier hs-var">Many</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; a -&gt; a) -&gt; t a -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#foldr1"><span class="hs-identifier hs-var">foldr1</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv -&gt; UsageEnv -&gt; UsageEnv
</span><a href="GHC.Core.UsageEnv.html#addUE"><span class="hs-identifier hs-var">addUE</span></a></span><span> </span><span class="annot"><span class="annottext">[UsageEnv]
</span><a href="#local-6989586621681150988"><span class="hs-identifier hs-var">ues</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-918"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-919"></span><span>    </span><span id="local-6989586621681150994"><span class="annot"><span class="annottext">bndrs :: [Var]
</span><a href="#local-6989586621681150994"><span class="hs-identifier hs-var hs-var">bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, CoreExpr)]
</span><a href="#local-6989586621681150998"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-920"></span><span>
</span><span id="line-921"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span id="local-6989586621681150982"><span class="annot"><span class="annottext">e :: CoreExpr
</span><a href="#local-6989586621681150982"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-922"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681150980"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150980"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150979"><span class="hs-identifier hs-var">fun</span></a></span><span>
</span><span id="line-923"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150980"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Uniquable a =&gt; a -&gt; Unique -&gt; Bool
</span><a href="GHC.Types.Unique.html#hasKey"><span class="hs-operator hs-var">`hasKey`</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="GHC.Builtin.Names.html#runRWKey"><span class="hs-identifier hs-var">runRWKey</span></a></span><span>
</span><span id="line-924"></span><span>    </span><span class="hs-comment">-- N.B. we may have an over-saturated application of the form:</span><span>
</span><span id="line-925"></span><span>    </span><span class="hs-comment">--   runRW (\s -&gt; \x -&gt; ...) y</span><span>
</span><span id="line-926"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150976"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150976"><span class="hs-identifier hs-var">arg_ty1</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681150975"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150975"><span class="hs-identifier hs-var">arg_ty2</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681150974"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150974"><span class="hs-identifier hs-var">arg3</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681150973"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681150973"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681150972"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-927"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150971"><span class="annot"><span class="annottext">(LintedType, UsageEnv)
</span><a href="#local-6989586621681150971"><span class="hs-identifier hs-var">fun_pair1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LintedType, UsageEnv) -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreArg"><span class="hs-identifier hs-var">lintCoreArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150980"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="GHC.Core.UsageEnv.html#zeroUE"><span class="hs-identifier hs-var">zeroUE</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150976"><span class="hs-identifier hs-var">arg_ty1</span></a></span><span>
</span><span id="line-928"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150969"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150969"><span class="hs-identifier hs-var">fun_ty2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150968"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150968"><span class="hs-identifier hs-var">ue2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LintedType, UsageEnv) -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreArg"><span class="hs-identifier hs-var">lintCoreArg</span></a></span><span> </span><span class="annot"><span class="annottext">(LintedType, UsageEnv)
</span><a href="#local-6989586621681150971"><span class="hs-identifier hs-var">fun_pair1</span></a></span><span>      </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150975"><span class="hs-identifier hs-var">arg_ty2</span></a></span><span>
</span><span id="line-929"></span><span>         </span><span class="hs-comment">-- See Note [Linting of runRW#]</span><span>
</span><span id="line-930"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621681150967"><span class="hs-identifier hs-type">lintRunRWCont</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreArg"><span class="hs-identifier hs-type">CoreArg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-931"></span><span>             </span><span id="local-6989586621681150967"><span class="annot"><span class="annottext">lintRunRWCont :: CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="#local-6989586621681150967"><span class="hs-identifier hs-var hs-var">lintRunRWCont</span></a></span></span><span> </span><span id="local-6989586621681150965"><span class="annot"><span class="annottext">expr :: CoreExpr
</span><a href="#local-6989586621681150965"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-932"></span><span>                </span><span class="annot"><span class="annottext">JoinArity -&gt; Maybe Var -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintJoinLams"><span class="hs-identifier hs-var">lintJoinLams</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150980"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150965"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-933"></span><span>             </span><span class="annot"><a href="#local-6989586621681150967"><span class="hs-identifier hs-var">lintRunRWCont</span></a></span><span> </span><span id="local-6989586621681150964"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150964"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#markAllJoinsBad"><span class="hs-identifier hs-var">markAllJoinsBad</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150964"><span class="hs-identifier hs-var">other</span></a></span><span>
</span><span id="line-934"></span><span>             </span><span class="hs-comment">-- TODO: Look through ticks?</span><span>
</span><span id="line-935"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150963"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150963"><span class="hs-identifier hs-var">arg3_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150962"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150962"><span class="hs-identifier hs-var">ue3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="#local-6989586621681150967"><span class="hs-identifier hs-var">lintRunRWCont</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150974"><span class="hs-identifier hs-var">arg3</span></a></span><span>
</span><span id="line-936"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150961"><span class="annot"><span class="annottext">(LintedType, UsageEnv)
</span><a href="#local-6989586621681150961"><span class="hs-identifier hs-var">app_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoreExpr
-&gt; LintedType
-&gt; LintedType
-&gt; UsageEnv
-&gt; UsageEnv
-&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintValApp"><span class="hs-identifier hs-var">lintValApp</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150974"><span class="hs-identifier hs-var">arg3</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150969"><span class="hs-identifier hs-var">fun_ty2</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150963"><span class="hs-identifier hs-var">arg3_ty</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150968"><span class="hs-identifier hs-var">ue2</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150962"><span class="hs-identifier hs-var">ue3</span></a></span><span>
</span><span id="line-937"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(LintedType, UsageEnv)
-&gt; [CoreExpr] -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreArgs"><span class="hs-identifier hs-var">lintCoreArgs</span></a></span><span> </span><span class="annot"><span class="annottext">(LintedType, UsageEnv)
</span><a href="#local-6989586621681150961"><span class="hs-identifier hs-var">app_ty</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681150973"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-938"></span><span>
</span><span id="line-939"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-940"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150959"><span class="annot"><span class="annottext">(LintedType, UsageEnv)
</span><a href="#local-6989586621681150959"><span class="hs-identifier hs-var">pair</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; JoinArity -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreFun"><span class="hs-identifier hs-var">lintCoreFun</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150979"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; JoinArity
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681150972"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-941"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(LintedType, UsageEnv)
-&gt; [CoreExpr] -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreArgs"><span class="hs-identifier hs-var">lintCoreArgs</span></a></span><span> </span><span class="annot"><span class="annottext">(LintedType, UsageEnv)
</span><a href="#local-6989586621681150959"><span class="hs-identifier hs-var">pair</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681150972"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-942"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-943"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681150979"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150979"><span class="hs-identifier hs-var">fun</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150972"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681150972"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. Expr b -&gt; (Expr b, [Expr b])
</span><a href="GHC.Core.html#collectArgs"><span class="hs-identifier hs-var">collectArgs</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150982"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-944"></span><span>
</span><span id="line-945"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621681150956"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150956"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621681150955"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150955"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-946"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#markAllJoinsBad"><span class="hs-identifier hs-var">markAllJoinsBad</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-947"></span><span>    </span><span class="annot"><span class="annottext">Var -&gt; LintM (LintedType, UsageEnv) -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintLambda"><span class="hs-identifier hs-var">lintLambda</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150956"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150955"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-948"></span><span>
</span><span id="line-949"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Case"><span class="hs-identifier hs-type">Case</span></a></span><span> </span><span id="local-6989586621681150953"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150953"><span class="hs-identifier hs-var">scrut</span></a></span></span><span> </span><span id="local-6989586621681150952"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150952"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621681150951"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150951"><span class="hs-identifier hs-var">alt_ty</span></a></span></span><span> </span><span id="local-6989586621681150950"><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621681150950"><span class="hs-identifier hs-var">alts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-950"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr
-&gt; Var -&gt; LintedType -&gt; [Alt Var] -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCaseExpr"><span class="hs-identifier hs-var">lintCaseExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150953"><span class="hs-identifier hs-var">scrut</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150952"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150951"><span class="hs-identifier hs-var">alt_ty</span></a></span><span> </span><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621681150950"><span class="hs-identifier hs-var">alts</span></a></span><span>
</span><span id="line-951"></span><span>
</span><span id="line-952"></span><span class="hs-comment">-- This case can't happen; linting types in expressions gets routed through</span><span>
</span><span id="line-953"></span><span class="hs-comment">-- lintCoreArgs</span><span>
</span><span id="line-954"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span id="local-6989586621681150948"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150948"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-955"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type found as expression&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150948"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-956"></span><span>
</span><span id="line-957"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span id="local-6989586621681150946"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150946"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-958"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150945"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150945"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#InCo"><span class="hs-identifier hs-var">InCo</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150946"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-959"></span><span>                </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150946"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-960"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; LintedType
</span><a href="GHC.Core.Coercion.html#coercionType"><span class="hs-identifier hs-var">coercionType</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150945"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="GHC.Core.UsageEnv.html#zeroUE"><span class="hs-identifier hs-var">zeroUE</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-961"></span><span>
</span><span id="line-962"></span><span class="hs-comment">----------------------</span><span>
</span><span id="line-963"></span><span class="annot"><a href="GHC.Core.Lint.html#lintIdOcc"><span class="hs-identifier hs-type">lintIdOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-comment">-- Number of arguments (type or value) being passed</span><span>
</span><span id="line-964"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- returns type of the *variable*</span><span>
</span><span id="line-965"></span><span id="lintIdOcc"><span class="annot"><span class="annottext">lintIdOcc :: Var -&gt; JoinArity -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintIdOcc"><span class="hs-identifier hs-var hs-var">lintIdOcc</span></a></span></span><span> </span><span id="local-6989586621681150942"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150942"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621681150941"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150941"><span class="hs-identifier hs-var">nargs</span></a></span></span><span>
</span><span id="line-966"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#OccOf"><span class="hs-identifier hs-var">OccOf</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150942"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-967"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isNonCoVarId"><span class="hs-identifier hs-var">isNonCoVarId</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150942"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-968"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Non term variable&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150942"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-969"></span><span>                 </span><span class="hs-comment">-- See GHC.Core Note [Variable occurrences in Core]</span><span>
</span><span id="line-970"></span><span>
</span><span id="line-971"></span><span>        </span><span class="hs-comment">-- Check that the type of the occurrence is the same</span><span>
</span><span id="line-972"></span><span>        </span><span class="hs-comment">-- as the type of the binding site.  The inScopeIds are</span><span>
</span><span id="line-973"></span><span>        </span><span class="hs-comment">-- /un-substituted/, so this checks that the occurrence type</span><span>
</span><span id="line-974"></span><span>        </span><span class="hs-comment">-- is identical to the binder type.</span><span>
</span><span id="line-975"></span><span>        </span><span class="hs-comment">-- This makes things much easier for things like:</span><span>
</span><span id="line-976"></span><span>        </span><span class="hs-comment">--    /\a. \(x::Maybe a). /\a. ...(x::Maybe a)...</span><span>
</span><span id="line-977"></span><span>        </span><span class="hs-comment">-- The &quot;::Maybe a&quot; on the occurrence is referring to the /outer/ a.</span><span>
</span><span id="line-978"></span><span>        </span><span class="hs-comment">-- If we compared /substituted/ types we'd risk comparing</span><span>
</span><span id="line-979"></span><span>        </span><span class="hs-comment">-- (Maybe a) from the binding site with bogus (Maybe a1) from</span><span>
</span><span id="line-980"></span><span>        </span><span class="hs-comment">-- the occurrence site.  Comparing un-substituted types finesses</span><span>
</span><span id="line-981"></span><span>        </span><span class="hs-comment">-- this altogether</span><span>
</span><span id="line-982"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150938"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150938"><span class="hs-identifier hs-var">bndr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150937"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150937"><span class="hs-identifier hs-var">linted_bndr_ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintM (Var, LintedType)
</span><a href="GHC.Core.Lint.html#lookupIdInScope"><span class="hs-identifier hs-var">lookupIdInScope</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150942"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-983"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150936"><span class="annot"><span class="annottext">occ_ty :: LintedType
</span><a href="#local-6989586621681150936"><span class="hs-identifier hs-var hs-var">occ_ty</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150942"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-984"></span><span>              </span><span id="local-6989586621681150935"><span class="annot"><span class="annottext">bndr_ty :: LintedType
</span><a href="#local-6989586621681150935"><span class="hs-identifier hs-var hs-var">bndr_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150938"><span class="hs-identifier hs-var">bndr</span></a></span><span>
</span><span id="line-985"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150936"><span class="hs-identifier hs-var">occ_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150935"><span class="hs-identifier hs-var">bndr_ty</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-986"></span><span>          </span><span class="annot"><span class="annottext">Var -&gt; Var -&gt; LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBndrOccTypeMismatchMsg"><span class="hs-identifier hs-var">mkBndrOccTypeMismatchMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150938"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150942"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150935"><span class="hs-identifier hs-var">bndr_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150936"><span class="hs-identifier hs-var">occ_ty</span></a></span><span>
</span><span id="line-987"></span><span>
</span><span id="line-988"></span><span>          </span><span class="hs-comment">-- Check for a nested occurrence of the StaticPtr constructor.</span><span>
</span><span id="line-989"></span><span>          </span><span class="hs-comment">-- See Note [Checking StaticPtrs].</span><span>
</span><span id="line-990"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150933"><span class="annot"><span class="annottext">LintFlags
</span><a href="#local-6989586621681150933"><span class="hs-identifier hs-var">lf</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM LintFlags
</span><a href="GHC.Core.Lint.html#getLintFlags"><span class="hs-identifier hs-var">getLintFlags</span></a></span><span>
</span><span id="line-991"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150941"><span class="hs-identifier hs-var">nargs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LintFlags -&gt; StaticPtrCheck
</span><a href="GHC.Core.Lint.html#lf_check_static_ptrs"><span class="hs-identifier hs-var">lf_check_static_ptrs</span></a></span><span> </span><span class="annot"><span class="annottext">LintFlags
</span><a href="#local-6989586621681150933"><span class="hs-identifier hs-var">lf</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">StaticPtrCheck
</span><a href="GHC.Core.Lint.html#AllowAnywhere"><span class="hs-identifier hs-var">AllowAnywhere</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-992"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Name
</span><a href="GHC.Types.Id.html#idName"><span class="hs-identifier hs-var">idName</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150942"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#makeStaticName"><span class="hs-identifier hs-var">makeStaticName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-993"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Found makeStatic nested in an expression&quot;</span></span><span>
</span><span id="line-994"></span><span>
</span><span id="line-995"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkDeadIdOcc"><span class="hs-identifier hs-var">checkDeadIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150942"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-996"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; JoinArity -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkJoinOcc"><span class="hs-identifier hs-var">checkJoinOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150942"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150941"><span class="hs-identifier hs-var">nargs</span></a></span><span>
</span><span id="line-997"></span><span>
</span><span id="line-998"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150928"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150928"><span class="hs-identifier hs-var">usage</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#varCallSiteUsage"><span class="hs-identifier hs-var">varCallSiteUsage</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150942"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-999"></span><span>
</span><span id="line-1000"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150937"><span class="hs-identifier hs-var">linted_bndr_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150928"><span class="hs-identifier hs-var">usage</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1001"></span><span>
</span><span id="line-1002"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreFun"><span class="hs-identifier hs-type">lintCoreFun</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>
</span><span id="line-1003"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>                          </span><span class="hs-comment">-- Number of arguments (type or val) being passed</span><span>
</span><span id="line-1004"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Returns type of the *function*</span><span>
</span><span id="line-1005"></span><span id="lintCoreFun"><span class="annot"><span class="annottext">lintCoreFun :: CoreExpr -&gt; JoinArity -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreFun"><span class="hs-identifier hs-var hs-var">lintCoreFun</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681150926"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150926"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681150925"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150925"><span class="hs-identifier hs-var">nargs</span></a></span></span><span>
</span><span id="line-1006"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Var -&gt; JoinArity -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintIdOcc"><span class="hs-identifier hs-var">lintIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150926"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150925"><span class="hs-identifier hs-var">nargs</span></a></span><span>
</span><span id="line-1007"></span><span>
</span><span id="line-1008"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreFun"><span class="hs-identifier hs-var">lintCoreFun</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621681150924"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150924"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621681150923"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150923"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681150922"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150922"><span class="hs-identifier hs-var">nargs</span></a></span></span><span>
</span><span id="line-1009"></span><span>  </span><span class="hs-comment">-- Act like lintCoreExpr of Lam, but *don't* call markAllJoinsBad; see</span><span>
</span><span id="line-1010"></span><span>  </span><span class="hs-comment">-- Note [Beta redexes]</span><span>
</span><span id="line-1011"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150922"><span class="hs-identifier hs-var">nargs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1012"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintM (LintedType, UsageEnv) -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintLambda"><span class="hs-identifier hs-var">lintLambda</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150924"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; JoinArity -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreFun"><span class="hs-identifier hs-var">lintCoreFun</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150923"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150922"><span class="hs-identifier hs-var">nargs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1013"></span><span>
</span><span id="line-1014"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreFun"><span class="hs-identifier hs-var">lintCoreFun</span></a></span><span> </span><span id="local-6989586621681150921"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150921"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681150920"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150920"><span class="hs-identifier hs-var">nargs</span></a></span></span><span>
</span><span id="line-1015"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Bool -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#markAllJoinsBadIf"><span class="hs-identifier hs-var">markAllJoinsBadIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150920"><span class="hs-identifier hs-var">nargs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1016"></span><span>      </span><span class="hs-comment">-- See Note [Join points are less general than the paper]</span><span>
</span><span id="line-1017"></span><span>    </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150921"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1018"></span><span class="hs-comment">------------------</span><span>
</span><span id="line-1019"></span><span class="annot"><a href="GHC.Core.Lint.html#lintLambda"><span class="hs-identifier hs-type">lintLambda</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1020"></span><span id="lintLambda"><span class="annot"><span class="annottext">lintLambda :: Var -&gt; LintM (LintedType, UsageEnv) -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintLambda"><span class="hs-identifier hs-var hs-var">lintLambda</span></a></span></span><span> </span><span id="local-6989586621681150919"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150919"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621681150918"><span class="annot"><span class="annottext">LintM (LintedType, UsageEnv)
</span><a href="#local-6989586621681150918"><span class="hs-identifier hs-var">lintBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1021"></span><span>    </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#LambdaBodyOf"><span class="hs-identifier hs-var">LambdaBodyOf</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150919"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1022"></span><span>    </span><span class="annot"><span class="annottext">forall a. BindingSite -&gt; Var -&gt; (Var -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintBinder"><span class="hs-identifier hs-var">lintBinder</span></a></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="GHC.Utils.Outputable.html#LambdaBind"><span class="hs-identifier hs-var">LambdaBind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150919"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681150915"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150915"><span class="hs-identifier hs-var">var'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1023"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150914"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150914"><span class="hs-identifier hs-var">body_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150913"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150913"><span class="hs-identifier hs-var">ue</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM (LintedType, UsageEnv)
</span><a href="#local-6989586621681150918"><span class="hs-identifier hs-var">lintBody</span></a></span><span>
</span><span id="line-1024"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150912"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150912"><span class="hs-identifier hs-var">ue'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UsageEnv -&gt; Var -&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#checkLinearity"><span class="hs-identifier hs-var">checkLinearity</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150913"><span class="hs-identifier hs-var">ue</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150915"><span class="hs-identifier hs-var">var'</span></a></span><span>
</span><span id="line-1025"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Utils.html#mkLamType"><span class="hs-identifier hs-var">mkLamType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150915"><span class="hs-identifier hs-var">var'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150914"><span class="hs-identifier hs-var">body_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150912"><span class="hs-identifier hs-var">ue'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1026"></span><span class="hs-comment">------------------</span><span>
</span><span id="line-1027"></span><span class="annot"><a href="GHC.Core.Lint.html#checkDeadIdOcc"><span class="hs-identifier hs-type">checkDeadIdOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1028"></span><span class="hs-comment">-- Occurrences of an Id should never be dead....</span><span>
</span><span id="line-1029"></span><span class="hs-comment">-- except when we are checking a case pattern</span><span>
</span><span id="line-1030"></span><span id="checkDeadIdOcc"><span class="annot"><span class="annottext">checkDeadIdOcc :: Var -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkDeadIdOcc"><span class="hs-identifier hs-var hs-var">checkDeadIdOcc</span></a></span></span><span> </span><span id="local-6989586621681150909"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150909"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-1031"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">OccInfo -&gt; Bool
</span><a href="GHC.Types.Basic.html#isDeadOcc"><span class="hs-identifier hs-var">isDeadOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; OccInfo
</span><a href="GHC.Types.Id.html#idOccInfo"><span class="hs-identifier hs-var">idOccInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150909"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1032"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150907"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150907"><span class="hs-identifier hs-var">in_case</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM Bool
</span><a href="GHC.Core.Lint.html#inCasePat"><span class="hs-identifier hs-var">inCasePat</span></a></span><span>
</span><span id="line-1033"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150907"><span class="hs-identifier hs-var">in_case</span></a></span><span>
</span><span id="line-1034"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Occurrence of a dead Id&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150909"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1035"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1036"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1037"></span><span>
</span><span id="line-1038"></span><span class="hs-comment">------------------</span><span>
</span><span id="line-1039"></span><span class="annot"><a href="GHC.Core.Lint.html#lintJoinBndrType"><span class="hs-identifier hs-type">lintJoinBndrType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-comment">-- Type of the body</span><span>
</span><span id="line-1040"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedId"><span class="hs-identifier hs-type">LintedId</span></a></span><span>   </span><span class="hs-comment">-- Possibly a join Id</span><span>
</span><span id="line-1041"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1042"></span><span class="hs-comment">-- Checks that the return type of a join Id matches the body</span><span>
</span><span id="line-1043"></span><span class="hs-comment">-- E.g. join j x = rhs in body</span><span>
</span><span id="line-1044"></span><span class="hs-comment">--      The type of 'rhs' must be the same as the type of 'body'</span><span>
</span><span id="line-1045"></span><span id="lintJoinBndrType"><span class="annot"><span class="annottext">lintJoinBndrType :: LintedType -&gt; Var -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintJoinBndrType"><span class="hs-identifier hs-var hs-var">lintJoinBndrType</span></a></span></span><span> </span><span id="local-6989586621681150905"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150905"><span class="hs-identifier hs-var">body_ty</span></a></span></span><span> </span><span id="local-6989586621681150904"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150904"><span class="hs-identifier hs-var">bndr</span></a></span></span><span>
</span><span id="line-1046"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681150903"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150903"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Maybe JoinArity
</span><a href="GHC.Types.Id.html#isJoinId_maybe"><span class="hs-identifier hs-var">isJoinId_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150904"><span class="hs-identifier hs-var">bndr</span></a></span><span>
</span><span id="line-1047"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150902"><span class="annot"><span class="annottext">bndr_ty :: LintedType
</span><a href="#local-6989586621681150902"><span class="hs-identifier hs-var hs-var">bndr_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150904"><span class="hs-identifier hs-var">bndr</span></a></span><span>
</span><span id="line-1048"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150901"><span class="annot"><span class="annottext">[TyCoBinder]
</span><a href="#local-6989586621681150901"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150900"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150900"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; ([TyCoBinder], LintedType)
</span><a href="GHC.Core.Type.html#splitPiTys"><span class="hs-identifier hs-var">splitPiTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150902"><span class="hs-identifier hs-var">bndr_ty</span></a></span><span>
</span><span id="line-1049"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; JoinArity
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[TyCoBinder]
</span><a href="#local-6989586621681150901"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150903"><span class="hs-identifier hs-var">arity</span></a></span><span>
</span><span id="line-1050"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150905"><span class="hs-identifier hs-var">body_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">[TyCoBinder] -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.TyCo.Rep.html#mkPiTys"><span class="hs-identifier hs-var">mkPiTys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. JoinArity -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#drop"><span class="hs-identifier hs-var">drop</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150903"><span class="hs-identifier hs-var">arity</span></a></span><span> </span><span class="annot"><span class="annottext">[TyCoBinder]
</span><a href="#local-6989586621681150901"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150900"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1051"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Join point returns different type than body&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1052"></span><span>       </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Join bndr:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150904"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150904"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1053"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Join arity:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150903"><span class="hs-identifier hs-var">arity</span></a></span><span>
</span><span id="line-1054"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Body type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150905"><span class="hs-identifier hs-var">body_ty</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1055"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1056"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1057"></span><span>
</span><span id="line-1058"></span><span class="annot"><a href="GHC.Core.Lint.html#checkJoinOcc"><span class="hs-identifier hs-type">checkJoinOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#JoinArity"><span class="hs-identifier hs-type">JoinArity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1059"></span><span class="hs-comment">-- Check that if the occurrence is a JoinId, then so is the</span><span>
</span><span id="line-1060"></span><span class="hs-comment">-- binding site, and it's a valid join Id</span><span>
</span><span id="line-1061"></span><span id="checkJoinOcc"><span class="annot"><span class="annottext">checkJoinOcc :: Var -&gt; JoinArity -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkJoinOcc"><span class="hs-identifier hs-var hs-var">checkJoinOcc</span></a></span></span><span> </span><span id="local-6989586621681150894"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150894"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621681150893"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150893"><span class="hs-identifier hs-var">n_args</span></a></span></span><span>
</span><span id="line-1062"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681150892"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150892"><span class="hs-identifier hs-var">join_arity_occ</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Maybe JoinArity
</span><a href="GHC.Types.Id.html#isJoinId_maybe"><span class="hs-identifier hs-var">isJoinId_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150894"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-1063"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150891"><span class="annot"><span class="annottext">Maybe JoinArity
</span><a href="#local-6989586621681150891"><span class="hs-identifier hs-var">mb_join_arity_bndr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintM (Maybe JoinArity)
</span><a href="GHC.Core.Lint.html#lookupJoinId"><span class="hs-identifier hs-var">lookupJoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150894"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-1064"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe JoinArity
</span><a href="#local-6989586621681150891"><span class="hs-identifier hs-var">mb_join_arity_bndr</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1065"></span><span>           </span><span class="annot"><span class="annottext">Maybe JoinArity
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- Binder is not a join point</span><span>
</span><span id="line-1066"></span><span>                      </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150889"><span class="annot"><span class="annottext">IdSet
</span><a href="#local-6989586621681150889"><span class="hs-identifier hs-var">join_set</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM IdSet
</span><a href="GHC.Core.Lint.html#getValidJoins"><span class="hs-identifier hs-var">getValidJoins</span></a></span><span>
</span><span id="line-1067"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var">addErrL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;join set &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">IdSet
</span><a href="#local-6989586621681150889"><span class="hs-identifier hs-var">join_set</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1068"></span><span>                                    </span><span class="annot"><span class="annottext">Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#invalidJoinOcc"><span class="hs-identifier hs-var">invalidJoinOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150894"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-1069"></span><span>
</span><span id="line-1070"></span><span>           </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681150885"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150885"><span class="hs-identifier hs-var">join_arity_bndr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1071"></span><span>
</span><span id="line-1072"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150885"><span class="hs-identifier hs-var">join_arity_bndr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150892"><span class="hs-identifier hs-var">join_arity_occ</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1073"></span><span>           </span><span class="hs-comment">-- Arity differs at binding site and occurrence</span><span>
</span><span id="line-1074"></span><span>         </span><span class="annot"><span class="annottext">Var -&gt; JoinArity -&gt; JoinArity -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkJoinBndrOccMismatchMsg"><span class="hs-identifier hs-var">mkJoinBndrOccMismatchMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150894"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150885"><span class="hs-identifier hs-var">join_arity_bndr</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150892"><span class="hs-identifier hs-var">join_arity_occ</span></a></span><span>
</span><span id="line-1075"></span><span>
</span><span id="line-1076"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150893"><span class="hs-identifier hs-var">n_args</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150892"><span class="hs-identifier hs-var">join_arity_occ</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1077"></span><span>           </span><span class="hs-comment">-- Arity doesn't match #args</span><span>
</span><span id="line-1078"></span><span>         </span><span class="annot"><span class="annottext">Var -&gt; JoinArity -&gt; JoinArity -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadJumpMsg"><span class="hs-identifier hs-var">mkBadJumpMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150894"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150892"><span class="hs-identifier hs-var">join_arity_occ</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150893"><span class="hs-identifier hs-var">n_args</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1079"></span><span>
</span><span id="line-1080"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1081"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1082"></span><span>
</span><span id="line-1083"></span><span class="hs-comment">-- Check that the usage of var is consistent with var itself, and pop the var</span><span>
</span><span id="line-1084"></span><span class="hs-comment">-- from the usage environment (this is important because of shadowing).</span><span>
</span><span id="line-1085"></span><span class="annot"><a href="GHC.Core.Lint.html#checkLinearity"><span class="hs-identifier hs-type">checkLinearity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span>
</span><span id="line-1086"></span><span id="checkLinearity"><span class="annot"><span class="annottext">checkLinearity :: UsageEnv -&gt; Var -&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#checkLinearity"><span class="hs-identifier hs-var hs-var">checkLinearity</span></a></span></span><span> </span><span id="local-6989586621681150882"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150882"><span class="hs-identifier hs-var">body_ue</span></a></span></span><span> </span><span id="local-6989586621681150881"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150881"><span class="hs-identifier hs-var">lam_var</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1087"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Maybe LintedType
</span><a href="GHC.Types.Var.html#varMultMaybe"><span class="hs-identifier hs-var">varMultMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150881"><span class="hs-identifier hs-var">lam_var</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1088"></span><span>    </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681150879"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150879"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Usage -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureSubUsage"><span class="hs-identifier hs-var">ensureSubUsage</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681150877"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150879"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; SDoc
</span><a href="#local-6989586621681150876"><span class="hs-identifier hs-var">err_msg</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150879"><span class="hs-identifier hs-var">mult</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1089"></span><span>                    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall n. NamedThing n =&gt; UsageEnv -&gt; n -&gt; UsageEnv
</span><a href="GHC.Core.UsageEnv.html#deleteUE"><span class="hs-identifier hs-var">deleteUE</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150882"><span class="hs-identifier hs-var">body_ue</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150881"><span class="hs-identifier hs-var">lam_var</span></a></span><span>
</span><span id="line-1090"></span><span>    </span><span class="annot"><span class="annottext">Maybe LintedType
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150882"><span class="hs-identifier hs-var">body_ue</span></a></span><span> </span><span class="hs-comment">-- A type variable</span><span>
</span><span id="line-1091"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1092"></span><span>    </span><span id="local-6989586621681150877"><span class="annot"><span class="annottext">lhs :: Usage
</span><a href="#local-6989586621681150877"><span class="hs-identifier hs-var hs-var">lhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall n. NamedThing n =&gt; UsageEnv -&gt; n -&gt; Usage
</span><a href="GHC.Core.UsageEnv.html#lookupUE"><span class="hs-identifier hs-var">lookupUE</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150882"><span class="hs-identifier hs-var">body_ue</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150881"><span class="hs-identifier hs-var">lam_var</span></a></span><span>
</span><span id="line-1093"></span><span>    </span><span id="local-6989586621681150876"><span class="annot"><span class="annottext">err_msg :: LintedType -&gt; SDoc
</span><a href="#local-6989586621681150876"><span class="hs-identifier hs-var hs-var">err_msg</span></a></span></span><span> </span><span id="local-6989586621681150873"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150873"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Linearity failure in lambda:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150881"><span class="hs-identifier hs-var">lam_var</span></a></span><span>
</span><span id="line-1094"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681150877"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#8840;&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150873"><span class="hs-identifier hs-var">mult</span></a></span><span>
</span><span id="line-1095"></span><span>
</span><span id="line-1096"></span><span class="hs-comment">{-
Note [No alternatives lint check]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Case expressions with no alternatives are odd beasts, and it would seem
like they would worth be looking at in the linter (cf #10180). We
used to check two things:

* exprIsHNF is false: it would *seem* to be terribly wrong if
  the scrutinee was already in head normal form.

* exprIsDeadEnd is true: we should be able to see why GHC believes the
  scrutinee is diverging for sure.

It was already known that the second test was not entirely reliable.
Unfortunately (#13990), the first test turned out not to be reliable
either. Getting the checks right turns out to be somewhat complicated.

For example, suppose we have (comment 8)

  data T a where
    TInt :: T Int

  absurdTBool :: T Bool -&gt; a
  absurdTBool v = case v of

  data Foo = Foo !(T Bool)

  absurdFoo :: Foo -&gt; a
  absurdFoo (Foo x) = absurdTBool x

GHC initially accepts the empty case because of the GADT conditions. But then
we inline absurdTBool, getting

  absurdFoo (Foo x) = case x of

x is in normal form (because the Foo constructor is strict) but the
case is empty. To avoid this problem, GHC would have to recognize
that matching on Foo x is already absurd, which is not so easy.

More generally, we don't really know all the ways that GHC can
lose track of why an expression is bottom, so we shouldn't make too
much fuss when that happens.


Note [Beta redexes]
~~~~~~~~~~~~~~~~~~~
Consider:

  join j @x y z = ... in
  (\@x y z -&gt; jump j @x y z) @t e1 e2

This is clearly ill-typed, since the jump is inside both an application and a
lambda, either of which is enough to disqualify it as a tail call (see Note
[Invariants on join points] in GHC.Core). However, strictly from a
lambda-calculus perspective, the term doesn't go wrong---after the two beta
reductions, the jump *is* a tail call and everything is fine.

Why would we want to allow this when we have let? One reason is that a compound
beta redex (that is, one with more than one argument) has different scoping
rules: naively reducing the above example using lets will capture any free
occurrence of y in e2. More fundamentally, type lets are tricky; many passes,
such as Float Out, tacitly assume that the incoming program's type lets have
all been dealt with by the simplifier. Thus we don't want to let-bind any types
in, say, GHC.Core.Subst.simpleOptPgm, which in some circumstances can run immediately
before Float Out.

All that said, currently GHC.Core.Subst.simpleOptPgm is the only thing using this
loophole, doing so to avoid re-traversing large functions (beta-reducing a type
lambda without introducing a type let requires a substitution). TODO: Improve
simpleOptPgm so that we can forget all this ever happened.

************************************************************************
*                                                                      *
\subsection[lintCoreArgs]{lintCoreArgs}
*                                                                      *
************************************************************************

The basic version of these functions checks that the argument is a
subtype of the required type, as one would expect.
-}</span><span>
</span><span id="line-1176"></span><span>
</span><span id="line-1177"></span><span>
</span><span id="line-1178"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreArgs"><span class="hs-identifier hs-type">lintCoreArgs</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreArg"><span class="hs-identifier hs-type">CoreArg</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1179"></span><span id="lintCoreArgs"><span class="annot"><span class="annottext">lintCoreArgs :: (LintedType, UsageEnv)
-&gt; [CoreExpr] -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreArgs"><span class="hs-identifier hs-var hs-var">lintCoreArgs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150872"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150872"><span class="hs-identifier hs-var">fun_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150871"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150871"><span class="hs-identifier hs-var">fun_ue</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681150870"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681150870"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#foldM"><span class="hs-identifier hs-var">foldM</span></a></span><span> </span><span class="annot"><span class="annottext">(LintedType, UsageEnv) -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreArg"><span class="hs-identifier hs-var">lintCoreArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150872"><span class="hs-identifier hs-var">fun_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150871"><span class="hs-identifier hs-var">fun_ue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681150870"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1180"></span><span>
</span><span id="line-1181"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreArg"><span class="hs-identifier hs-type">lintCoreArg</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreArg"><span class="hs-identifier hs-type">CoreArg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1182"></span><span id="lintCoreArg"><span class="annot"><span class="annottext">lintCoreArg :: (LintedType, UsageEnv) -&gt; CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreArg"><span class="hs-identifier hs-var hs-var">lintCoreArg</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150868"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150868"><span class="hs-identifier hs-var">fun_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150867"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150867"><span class="hs-identifier hs-var">ue</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span id="local-6989586621681150866"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150866"><span class="hs-identifier hs-var">arg_ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1183"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isCoercionTy"><span class="hs-identifier hs-var">isCoercionTy</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150866"><span class="hs-identifier hs-var">arg_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1184"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unnecessary coercion-to-type injection:&quot;</span></span><span>
</span><span id="line-1185"></span><span>                  </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150866"><span class="hs-identifier hs-var">arg_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1186"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150864"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150864"><span class="hs-identifier hs-var">arg_ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150866"><span class="hs-identifier hs-var">arg_ty</span></a></span><span>
</span><span id="line-1187"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150863"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150863"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintTyApp"><span class="hs-identifier hs-var">lintTyApp</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150868"><span class="hs-identifier hs-var">fun_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150864"><span class="hs-identifier hs-var">arg_ty'</span></a></span><span>
</span><span id="line-1188"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150863"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150867"><span class="hs-identifier hs-var">ue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1189"></span><span>
</span><span id="line-1190"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreArg"><span class="hs-identifier hs-var">lintCoreArg</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150861"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150861"><span class="hs-identifier hs-var">fun_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150860"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150860"><span class="hs-identifier hs-var">fun_ue</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681150859"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150859"><span class="hs-identifier hs-var">arg</span></a></span></span><span>
</span><span id="line-1191"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150858"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150858"><span class="hs-identifier hs-var">arg_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150857"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150857"><span class="hs-identifier hs-var">arg_ue</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#markAllJoinsBad"><span class="hs-identifier hs-var">markAllJoinsBad</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150859"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1192"></span><span>           </span><span class="hs-comment">-- See Note [Levity polymorphism invariants] in GHC.Core</span><span>
</span><span id="line-1193"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150856"><span class="annot"><span class="annottext">LintFlags
</span><a href="#local-6989586621681150856"><span class="hs-identifier hs-var">flags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM LintFlags
</span><a href="GHC.Core.Lint.html#getLintFlags"><span class="hs-identifier hs-var">getLintFlags</span></a></span><span>
</span><span id="line-1194"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintFlags -&gt; Bool
</span><a href="GHC.Core.Lint.html#lf_check_levity_poly"><span class="hs-identifier hs-var">lf_check_levity_poly</span></a></span><span> </span><span class="annot"><span class="annottext">LintFlags
</span><a href="#local-6989586621681150856"><span class="hs-identifier hs-var">flags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isTypeLevPoly"><span class="hs-identifier hs-var">isTypeLevPoly</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150858"><span class="hs-identifier hs-var">arg_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1195"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Levity-polymorphic argument:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1196"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150859"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150858"><span class="hs-identifier hs-var">arg_ty</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150858"><span class="hs-identifier hs-var">arg_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1197"></span><span>          </span><span class="hs-comment">-- check for levity polymorphism first, because otherwise isUnliftedType panics</span><span>
</span><span id="line-1198"></span><span>
</span><span id="line-1199"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isUnliftedType"><span class="hs-identifier hs-var">isUnliftedType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150858"><span class="hs-identifier hs-var">arg_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Bool
</span><a href="GHC.Core.Utils.html#exprOkForSpeculation"><span class="hs-identifier hs-var">exprOkForSpeculation</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150859"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1200"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkLetAppMsg"><span class="hs-identifier hs-var">mkLetAppMsg</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150859"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1201"></span><span>
</span><span id="line-1202"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">CoreExpr
-&gt; LintedType
-&gt; LintedType
-&gt; UsageEnv
-&gt; UsageEnv
-&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintValApp"><span class="hs-identifier hs-var">lintValApp</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150859"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150861"><span class="hs-identifier hs-var">fun_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150858"><span class="hs-identifier hs-var">arg_ty</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150860"><span class="hs-identifier hs-var">fun_ue</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150857"><span class="hs-identifier hs-var">arg_ue</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1203"></span><span>
</span><span id="line-1204"></span><span class="hs-comment">-----------------</span><span>
</span><span id="line-1205"></span><span class="annot"><a href="GHC.Core.Lint.html#lintAltBinders"><span class="hs-identifier hs-type">lintAltBinders</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span>
</span><span id="line-1206"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span>         </span><span class="hs-comment">-- Case binder</span><span>
</span><span id="line-1207"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span>     </span><span class="hs-comment">-- Scrutinee type</span><span>
</span><span id="line-1208"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span>     </span><span class="hs-comment">-- Constructor type</span><span>
</span><span id="line-1209"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#OutVar"><span class="hs-identifier hs-type">OutVar</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>    </span><span class="hs-comment">-- Binders</span><span>
</span><span id="line-1210"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span>
</span><span id="line-1211"></span><span class="hs-comment">-- If you edit this function, you may need to update the GHC formalism</span><span>
</span><span id="line-1212"></span><span class="hs-comment">-- See Note [GHC Formalism]</span><span>
</span><span id="line-1213"></span><span id="lintAltBinders"><span class="annot"><span class="annottext">lintAltBinders :: UsageEnv
-&gt; Var
-&gt; LintedType
-&gt; LintedType
-&gt; [(LintedType, Var)]
-&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#lintAltBinders"><span class="hs-identifier hs-var hs-var">lintAltBinders</span></a></span></span><span> </span><span id="local-6989586621681150846"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150846"><span class="hs-identifier hs-var">rhs_ue</span></a></span></span><span> </span><span id="local-6989586621681150845"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150845"><span class="hs-identifier hs-var">_case_bndr</span></a></span></span><span> </span><span id="local-6989586621681150844"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150844"><span class="hs-identifier hs-var">scrut_ty</span></a></span></span><span> </span><span id="local-6989586621681150843"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150843"><span class="hs-identifier hs-var">con_ty</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1214"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150843"><span class="hs-identifier hs-var">con_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150844"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadPatMsg"><span class="hs-identifier hs-var">mkBadPatMsg</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150843"><span class="hs-identifier hs-var">con_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150844"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1215"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150846"><span class="hs-identifier hs-var">rhs_ue</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1216"></span><span class="annot"><a href="GHC.Core.Lint.html#lintAltBinders"><span class="hs-identifier hs-var">lintAltBinders</span></a></span><span> </span><span id="local-6989586621681150841"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150841"><span class="hs-identifier hs-var">rhs_ue</span></a></span></span><span> </span><span id="local-6989586621681150840"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150840"><span class="hs-identifier hs-var">case_bndr</span></a></span></span><span> </span><span id="local-6989586621681150839"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150839"><span class="hs-identifier hs-var">scrut_ty</span></a></span></span><span> </span><span id="local-6989586621681150838"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150838"><span class="hs-identifier hs-var">con_ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681150837"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150837"><span class="hs-identifier hs-var">var_w</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150836"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150836"><span class="hs-identifier hs-var">bndr</span></a></span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681150835"><span class="annot"><span class="annottext">[(LintedType, Var)]
</span><a href="#local-6989586621681150835"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1217"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150836"><span class="hs-identifier hs-var">bndr</span></a></span><span>
</span><span id="line-1218"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150834"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150834"><span class="hs-identifier hs-var">con_ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintTyApp"><span class="hs-identifier hs-var">lintTyApp</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150838"><span class="hs-identifier hs-var">con_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150836"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1219"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">UsageEnv
-&gt; Var
-&gt; LintedType
-&gt; LintedType
-&gt; [(LintedType, Var)]
-&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#lintAltBinders"><span class="hs-identifier hs-var">lintAltBinders</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150841"><span class="hs-identifier hs-var">rhs_ue</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150840"><span class="hs-identifier hs-var">case_bndr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150839"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150834"><span class="hs-identifier hs-var">con_ty'</span></a></span><span>  </span><span class="annot"><span class="annottext">[(LintedType, Var)]
</span><a href="#local-6989586621681150835"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1220"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1221"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150832"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150832"><span class="hs-identifier hs-var">con_ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoreExpr
-&gt; LintedType
-&gt; LintedType
-&gt; UsageEnv
-&gt; UsageEnv
-&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintValApp"><span class="hs-identifier hs-var">lintValApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. Var -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150836"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150838"><span class="hs-identifier hs-var">con_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150836"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="GHC.Core.UsageEnv.html#zeroUE"><span class="hs-identifier hs-var">zeroUE</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="GHC.Core.UsageEnv.html#zeroUE"><span class="hs-identifier hs-var">zeroUE</span></a></span><span>
</span><span id="line-1222"></span><span>         </span><span class="hs-comment">-- We can pass zeroUE to lintValApp because we ignore its usage</span><span>
</span><span id="line-1223"></span><span>         </span><span class="hs-comment">-- calculation and compute it in the call for checkCaseLinearity below.</span><span>
</span><span id="line-1224"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150831"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150831"><span class="hs-identifier hs-var">rhs_ue'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UsageEnv -&gt; Var -&gt; LintedType -&gt; Var -&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#checkCaseLinearity"><span class="hs-identifier hs-var">checkCaseLinearity</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150841"><span class="hs-identifier hs-var">rhs_ue</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150840"><span class="hs-identifier hs-var">case_bndr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150837"><span class="hs-identifier hs-var">var_w</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150836"><span class="hs-identifier hs-var">bndr</span></a></span><span>
</span><span id="line-1225"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">UsageEnv
-&gt; Var
-&gt; LintedType
-&gt; LintedType
-&gt; [(LintedType, Var)]
-&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#lintAltBinders"><span class="hs-identifier hs-var">lintAltBinders</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150831"><span class="hs-identifier hs-var">rhs_ue'</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150840"><span class="hs-identifier hs-var">case_bndr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150839"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150832"><span class="hs-identifier hs-var">con_ty'</span></a></span><span> </span><span class="annot"><span class="annottext">[(LintedType, Var)]
</span><a href="#local-6989586621681150835"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1226"></span><span>
</span><span id="line-1227"></span><span class="hs-comment">-- | Implements the case rules for linearity</span><span>
</span><span id="line-1228"></span><span class="annot"><a href="GHC.Core.Lint.html#checkCaseLinearity"><span class="hs-identifier hs-type">checkCaseLinearity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span>
</span><span id="line-1229"></span><span id="checkCaseLinearity"><span class="annot"><span class="annottext">checkCaseLinearity :: UsageEnv -&gt; Var -&gt; LintedType -&gt; Var -&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#checkCaseLinearity"><span class="hs-identifier hs-var hs-var">checkCaseLinearity</span></a></span></span><span> </span><span id="local-6989586621681150829"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150829"><span class="hs-identifier hs-var">ue</span></a></span></span><span> </span><span id="local-6989586621681150828"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150828"><span class="hs-identifier hs-var">case_bndr</span></a></span></span><span> </span><span id="local-6989586621681150827"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150827"><span class="hs-identifier hs-var">var_w</span></a></span></span><span> </span><span id="local-6989586621681150826"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150826"><span class="hs-identifier hs-var">bndr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1230"></span><span>  </span><span class="annot"><span class="annottext">Usage -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureSubUsage"><span class="hs-identifier hs-var">ensureSubUsage</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681150825"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150824"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150823"><span class="hs-identifier hs-var">err_msg</span></a></span><span>
</span><span id="line-1231"></span><span>  </span><span class="annot"><span class="annottext">SDoc -&gt; LintedType -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintLinearBinder"><span class="hs-identifier hs-var">lintLinearBinder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150826"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150821"><span class="hs-identifier hs-var">case_bndr_w</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Multiplicity.html#mkMultMul"><span class="hs-operator hs-var">`mkMultMul`</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150827"><span class="hs-identifier hs-var">var_w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#varMult"><span class="hs-identifier hs-var">varMult</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150826"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1232"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall n. NamedThing n =&gt; UsageEnv -&gt; n -&gt; UsageEnv
</span><a href="GHC.Core.UsageEnv.html#deleteUE"><span class="hs-identifier hs-var">deleteUE</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150829"><span class="hs-identifier hs-var">ue</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150826"><span class="hs-identifier hs-var">bndr</span></a></span><span>
</span><span id="line-1233"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1234"></span><span>    </span><span id="local-6989586621681150825"><span class="annot"><span class="annottext">lhs :: Usage
</span><a href="#local-6989586621681150825"><span class="hs-identifier hs-var hs-var">lhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681150818"><span class="hs-identifier hs-var">bndr_usage</span></a></span><span> </span><span class="annot"><span class="annottext">Usage -&gt; Usage -&gt; Usage
</span><a href="GHC.Core.UsageEnv.html#addUsage"><span class="hs-operator hs-var">`addUsage`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150827"><span class="hs-identifier hs-var">var_w</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Usage -&gt; Usage
</span><a href="GHC.Core.UsageEnv.html#scaleUsage"><span class="hs-operator hs-var">`scaleUsage`</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681150815"><span class="hs-identifier hs-var">case_bndr_usage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1235"></span><span>    </span><span id="local-6989586621681150824"><span class="annot"><span class="annottext">rhs :: LintedType
</span><a href="#local-6989586621681150824"><span class="hs-identifier hs-var hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150821"><span class="hs-identifier hs-var">case_bndr_w</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Multiplicity.html#mkMultMul"><span class="hs-operator hs-var">`mkMultMul`</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150827"><span class="hs-identifier hs-var">var_w</span></a></span><span>
</span><span id="line-1236"></span><span>    </span><span id="local-6989586621681150823"><span class="annot"><span class="annottext">err_msg :: SDoc
</span><a href="#local-6989586621681150823"><span class="hs-identifier hs-var hs-var">err_msg</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Linearity failure in variable:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150826"><span class="hs-identifier hs-var">bndr</span></a></span><span>
</span><span id="line-1237"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681150825"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#8840;&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150824"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1238"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Computed by:&quot;</span></span><span>
</span><span id="line-1239"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;LHS:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150814"><span class="hs-identifier hs-var">lhs_formula</span></a></span><span>
</span><span id="line-1240"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RHS:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150813"><span class="hs-identifier hs-var">rhs_formula</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1241"></span><span>    </span><span id="local-6989586621681150814"><span class="annot"><span class="annottext">lhs_formula :: SDoc
</span><a href="#local-6989586621681150814"><span class="hs-identifier hs-var hs-var">lhs_formula</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681150818"><span class="hs-identifier hs-var">bndr_usage</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;+&quot;</span></span><span>
</span><span id="line-1242"></span><span>                                 </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681150815"><span class="hs-identifier hs-var">case_bndr_usage</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;*&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150827"><span class="hs-identifier hs-var">var_w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1243"></span><span>    </span><span id="local-6989586621681150813"><span class="annot"><span class="annottext">rhs_formula :: SDoc
</span><a href="#local-6989586621681150813"><span class="hs-identifier hs-var hs-var">rhs_formula</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150821"><span class="hs-identifier hs-var">case_bndr_w</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;*&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150827"><span class="hs-identifier hs-var">var_w</span></a></span><span>
</span><span id="line-1244"></span><span>    </span><span id="local-6989586621681150821"><span class="annot"><span class="annottext">case_bndr_w :: LintedType
</span><a href="#local-6989586621681150821"><span class="hs-identifier hs-var hs-var">case_bndr_w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#varMult"><span class="hs-identifier hs-var">varMult</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150828"><span class="hs-identifier hs-var">case_bndr</span></a></span><span>
</span><span id="line-1245"></span><span>    </span><span id="local-6989586621681150815"><span class="annot"><span class="annottext">case_bndr_usage :: Usage
</span><a href="#local-6989586621681150815"><span class="hs-identifier hs-var hs-var">case_bndr_usage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall n. NamedThing n =&gt; UsageEnv -&gt; n -&gt; Usage
</span><a href="GHC.Core.UsageEnv.html#lookupUE"><span class="hs-identifier hs-var">lookupUE</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150829"><span class="hs-identifier hs-var">ue</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150828"><span class="hs-identifier hs-var">case_bndr</span></a></span><span>
</span><span id="line-1246"></span><span>    </span><span id="local-6989586621681150818"><span class="annot"><span class="annottext">bndr_usage :: Usage
</span><a href="#local-6989586621681150818"><span class="hs-identifier hs-var hs-var">bndr_usage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall n. NamedThing n =&gt; UsageEnv -&gt; n -&gt; Usage
</span><a href="GHC.Core.UsageEnv.html#lookupUE"><span class="hs-identifier hs-var">lookupUE</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150829"><span class="hs-identifier hs-var">ue</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150826"><span class="hs-identifier hs-var">bndr</span></a></span><span>
</span><span id="line-1247"></span><span>
</span><span id="line-1248"></span><span>
</span><span id="line-1249"></span><span>
</span><span id="line-1250"></span><span class="hs-comment">-----------------</span><span>
</span><span id="line-1251"></span><span class="annot"><a href="GHC.Core.Lint.html#lintTyApp"><span class="hs-identifier hs-type">lintTyApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span>
</span><span id="line-1252"></span><span id="lintTyApp"><span class="annot"><span class="annottext">lintTyApp :: LintedType -&gt; LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintTyApp"><span class="hs-identifier hs-var hs-var">lintTyApp</span></a></span></span><span> </span><span id="local-6989586621681150812"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150812"><span class="hs-identifier hs-var">fun_ty</span></a></span></span><span> </span><span id="local-6989586621681150811"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150811"><span class="hs-identifier hs-var">arg_ty</span></a></span></span><span>
</span><span id="line-1253"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150810"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150810"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681150809"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150809"><span class="hs-identifier hs-var">body_ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Maybe (Var, LintedType)
</span><a href="GHC.Core.Type.html#splitForAllTyCoVar_maybe"><span class="hs-identifier hs-var">splitForAllTyCoVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150812"><span class="hs-identifier hs-var">fun_ty</span></a></span><span>
</span><span id="line-1254"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintTyKind"><span class="hs-identifier hs-var">lintTyKind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150810"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150811"><span class="hs-identifier hs-var">arg_ty</span></a></span><span>
</span><span id="line-1255"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150807"><span class="annot"><span class="annottext">InScopeSet
</span><a href="#local-6989586621681150807"><span class="hs-identifier hs-var">in_scope</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM InScopeSet
</span><a href="GHC.Core.Lint.html#getInScope"><span class="hs-identifier hs-var">getInScope</span></a></span><span>
</span><span id="line-1256"></span><span>        </span><span class="hs-comment">-- substTy needs the set of tyvars in scope to avoid generating</span><span>
</span><span id="line-1257"></span><span>        </span><span class="hs-comment">-- uniques that are already in scope.</span><span>
</span><span id="line-1258"></span><span>        </span><span class="hs-comment">-- See Note [The substitution invariant] in GHC.Core.TyCo.Subst</span><span>
</span><span id="line-1259"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InScopeSet -&gt; [Var] -&gt; [LintedType] -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.TyCo.Subst.html#substTyWithInScope"><span class="hs-identifier hs-var">substTyWithInScope</span></a></span><span> </span><span class="annot"><span class="annottext">InScopeSet
</span><a href="#local-6989586621681150807"><span class="hs-identifier hs-var">in_scope</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150810"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150811"><span class="hs-identifier hs-var">arg_ty</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150809"><span class="hs-identifier hs-var">body_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1260"></span><span>
</span><span id="line-1261"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1262"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkTyAppMsg"><span class="hs-identifier hs-var">mkTyAppMsg</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150812"><span class="hs-identifier hs-var">fun_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150811"><span class="hs-identifier hs-var">arg_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1263"></span><span>
</span><span id="line-1264"></span><span class="hs-comment">-----------------</span><span>
</span><span id="line-1265"></span><span>
</span><span id="line-1266"></span><span class="hs-comment">-- | @lintValApp arg fun_ty arg_ty@ lints an application of @fun arg@</span><span>
</span><span id="line-1267"></span><span class="hs-comment">-- where @fun :: fun_ty@ and @arg :: arg_ty@, returning the type of the</span><span>
</span><span id="line-1268"></span><span class="hs-comment">-- application.</span><span>
</span><span id="line-1269"></span><span class="annot"><a href="GHC.Core.Lint.html#lintValApp"><span class="hs-identifier hs-type">lintValApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1270"></span><span id="lintValApp"><span class="annot"><span class="annottext">lintValApp :: CoreExpr
-&gt; LintedType
-&gt; LintedType
-&gt; UsageEnv
-&gt; UsageEnv
-&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintValApp"><span class="hs-identifier hs-var hs-var">lintValApp</span></a></span></span><span> </span><span id="local-6989586621681150803"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150803"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621681150802"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150802"><span class="hs-identifier hs-var">fun_ty</span></a></span></span><span> </span><span id="local-6989586621681150801"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150801"><span class="hs-identifier hs-var">arg_ty</span></a></span></span><span> </span><span id="local-6989586621681150800"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150800"><span class="hs-identifier hs-var">fun_ue</span></a></span></span><span> </span><span id="local-6989586621681150799"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150799"><span class="hs-identifier hs-var">arg_ue</span></a></span></span><span>
</span><span id="line-1271"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150798"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150798"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150797"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150797"><span class="hs-identifier hs-var">arg_ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150796"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150796"><span class="hs-identifier hs-var">res_ty'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Maybe (LintedType, LintedType, LintedType)
</span><a href="GHC.Core.Type.html#splitFunTy_maybe"><span class="hs-identifier hs-var">splitFunTy_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150802"><span class="hs-identifier hs-var">fun_ty</span></a></span><span>
</span><span id="line-1272"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150797"><span class="hs-identifier hs-var">arg_ty'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150801"><span class="hs-identifier hs-var">arg_ty</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150794"><span class="hs-identifier hs-var">err1</span></a></span><span>
</span><span id="line-1273"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150793"><span class="annot"><span class="annottext">app_ue :: UsageEnv
</span><a href="#local-6989586621681150793"><span class="hs-identifier hs-var hs-var">app_ue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">UsageEnv -&gt; UsageEnv -&gt; UsageEnv
</span><a href="GHC.Core.UsageEnv.html#addUE"><span class="hs-identifier hs-var">addUE</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150800"><span class="hs-identifier hs-var">fun_ue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; UsageEnv -&gt; UsageEnv
</span><a href="GHC.Core.UsageEnv.html#scaleUE"><span class="hs-identifier hs-var">scaleUE</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150798"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150799"><span class="hs-identifier hs-var">arg_ue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1274"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150796"><span class="hs-identifier hs-var">res_ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150793"><span class="hs-identifier hs-var">app_ue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1275"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1276"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150792"><span class="hs-identifier hs-var">err2</span></a></span><span>
</span><span id="line-1277"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1278"></span><span>    </span><span id="local-6989586621681150794"><span class="annot"><span class="annottext">err1 :: SDoc
</span><a href="#local-6989586621681150794"><span class="hs-identifier hs-var hs-var">err1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkAppMsg"><span class="hs-identifier hs-var">mkAppMsg</span></a></span><span>       </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150802"><span class="hs-identifier hs-var">fun_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150801"><span class="hs-identifier hs-var">arg_ty</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150803"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1279"></span><span>    </span><span id="local-6989586621681150792"><span class="annot"><span class="annottext">err2 :: SDoc
</span><a href="#local-6989586621681150792"><span class="hs-identifier hs-var hs-var">err2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkNonFunAppMsg"><span class="hs-identifier hs-var">mkNonFunAppMsg</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150802"><span class="hs-identifier hs-var">fun_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150801"><span class="hs-identifier hs-var">arg_ty</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150803"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1280"></span><span>
</span><span id="line-1281"></span><span class="annot"><a href="GHC.Core.Lint.html#lintTyKind"><span class="hs-identifier hs-type">lintTyKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#OutTyVar"><span class="hs-identifier hs-type">OutTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1282"></span><span class="hs-comment">-- Both args have had substitution applied</span><span>
</span><span id="line-1283"></span><span>
</span><span id="line-1284"></span><span class="hs-comment">-- If you edit this function, you may need to update the GHC formalism</span><span>
</span><span id="line-1285"></span><span class="hs-comment">-- See Note [GHC Formalism]</span><span>
</span><span id="line-1286"></span><span id="lintTyKind"><span class="annot"><span class="annottext">lintTyKind :: Var -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintTyKind"><span class="hs-identifier hs-var hs-var">lintTyKind</span></a></span></span><span> </span><span id="local-6989586621681150788"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150788"><span class="hs-identifier hs-var">tyvar</span></a></span></span><span> </span><span id="local-6989586621681150787"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150787"><span class="hs-identifier hs-var">arg_ty</span></a></span></span><span>
</span><span id="line-1287"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150785"><span class="hs-identifier hs-var">arg_kind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150784"><span class="hs-identifier hs-var">tyvar_kind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1288"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var">addErrL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkKindErrMsg"><span class="hs-identifier hs-var">mkKindErrMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150788"><span class="hs-identifier hs-var">tyvar</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150787"><span class="hs-identifier hs-var">arg_ty</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Linted Arg kind:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150785"><span class="hs-identifier hs-var">arg_kind</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1289"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1290"></span><span>    </span><span id="local-6989586621681150784"><span class="annot"><span class="annottext">tyvar_kind :: LintedType
</span><a href="#local-6989586621681150784"><span class="hs-identifier hs-var hs-var">tyvar_kind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150788"><span class="hs-identifier hs-var">tyvar</span></a></span><span>
</span><span id="line-1291"></span><span>    </span><span id="local-6989586621681150785"><span class="annot"><span class="annottext">arg_kind :: LintedType
</span><a href="#local-6989586621681150785"><span class="hs-identifier hs-var hs-var">arg_kind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150787"><span class="hs-identifier hs-var">arg_ty</span></a></span><span>
</span><span id="line-1292"></span><span>
</span><span id="line-1293"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[lintCoreAlts]{lintCoreAlts}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1300"></span><span>
</span><span id="line-1301"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCaseExpr"><span class="hs-identifier hs-type">lintCaseExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1302"></span><span id="lintCaseExpr"><span class="annot"><span class="annottext">lintCaseExpr :: CoreExpr
-&gt; Var -&gt; LintedType -&gt; [Alt Var] -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCaseExpr"><span class="hs-identifier hs-var hs-var">lintCaseExpr</span></a></span></span><span> </span><span id="local-6989586621681150780"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150780"><span class="hs-identifier hs-var">scrut</span></a></span></span><span> </span><span id="local-6989586621681150779"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150779"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621681150778"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150778"><span class="hs-identifier hs-var">alt_ty</span></a></span></span><span> </span><span id="local-6989586621681150777"><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621681150777"><span class="hs-identifier hs-var">alts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1303"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150776"><span class="annot"><span class="annottext">e :: CoreExpr
</span><a href="#local-6989586621681150776"><span class="hs-identifier hs-var hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. Expr b -&gt; b -&gt; LintedType -&gt; [Alt b] -&gt; Expr b
</span><a href="GHC.Core.html#Case"><span class="hs-identifier hs-var">Case</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150780"><span class="hs-identifier hs-var">scrut</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150779"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150778"><span class="hs-identifier hs-var">alt_ty</span></a></span><span> </span><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621681150777"><span class="hs-identifier hs-var">alts</span></a></span><span>   </span><span class="hs-comment">-- Just for error messages</span><span>
</span><span id="line-1304"></span><span>
</span><span id="line-1305"></span><span>     </span><span class="hs-comment">-- Check the scrutinee</span><span>
</span><span id="line-1306"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150775"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150775"><span class="hs-identifier hs-var">scrut_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150774"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150774"><span class="hs-identifier hs-var">scrut_ue</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#markAllJoinsBad"><span class="hs-identifier hs-var">markAllJoinsBad</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150780"><span class="hs-identifier hs-var">scrut</span></a></span><span>
</span><span id="line-1307"></span><span>          </span><span class="hs-comment">-- See Note [Join points are less general than the paper]</span><span>
</span><span id="line-1308"></span><span>          </span><span class="hs-comment">-- in GHC.Core</span><span>
</span><span id="line-1309"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150773"><span class="annot"><span class="annottext">scrut_mult :: LintedType
</span><a href="#local-6989586621681150773"><span class="hs-identifier hs-var hs-var">scrut_mult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#varMult"><span class="hs-identifier hs-var">varMult</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150779"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-1310"></span><span>
</span><span id="line-1311"></span><span>     </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150772"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150772"><span class="hs-identifier hs-var">alt_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#CaseTy"><span class="hs-identifier hs-var">CaseTy</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150780"><span class="hs-identifier hs-var">scrut</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1312"></span><span>                 </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintValueType"><span class="hs-identifier hs-var">lintValueType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150778"><span class="hs-identifier hs-var">alt_ty</span></a></span><span>
</span><span id="line-1313"></span><span>     </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150769"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150769"><span class="hs-identifier hs-var">var_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#IdTy"><span class="hs-identifier hs-var">IdTy</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150779"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1314"></span><span>                 </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintValueType"><span class="hs-identifier hs-var">lintValueType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150779"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1315"></span><span>
</span><span id="line-1316"></span><span>     </span><span class="hs-comment">-- We used to try to check whether a case expression with no</span><span>
</span><span id="line-1317"></span><span>     </span><span class="hs-comment">-- alternatives was legitimate, but this didn't work.</span><span>
</span><span id="line-1318"></span><span>     </span><span class="hs-comment">-- See Note [No alternatives lint check] for details.</span><span>
</span><span id="line-1319"></span><span>
</span><span id="line-1320"></span><span>     </span><span class="hs-comment">-- Check that the scrutinee is not a floating-point type</span><span>
</span><span id="line-1321"></span><span>     </span><span class="hs-comment">-- if there are any literal alternatives</span><span>
</span><span id="line-1322"></span><span>     </span><span class="hs-comment">-- See GHC.Core Note [Case expression invariants] item (5)</span><span>
</span><span id="line-1323"></span><span>     </span><span class="hs-comment">-- See Note [Rules for floating-point comparisons] in GHC.Core.Opt.ConstantFold</span><span>
</span><span id="line-1324"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150767"><span class="annot"><span class="annottext">isLitPat :: Alt b -&gt; Bool
</span><a href="#local-6989586621681150767"><span class="hs-identifier hs-var hs-var">isLitPat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#LitAlt"><span class="hs-identifier hs-type">LitAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[b]
</span><span class="hs-identifier">_</span></span><span>  </span><span class="annot"><span class="annottext">Expr b
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1325"></span><span>           </span><span class="annot"><a href="#local-6989586621681150767"><span class="hs-identifier hs-var">isLitPat</span></a></span><span> </span><span class="annot"><span class="annottext">Alt b
</span><span class="hs-identifier">_</span></span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1326"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isFloatingTy"><span class="hs-identifier hs-var">isFloatingTy</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150775"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">forall {b}. Alt b -&gt; Bool
</span><a href="#local-6989586621681150767"><span class="hs-identifier hs-var">isLitPat</span></a></span><span> </span><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621681150777"><span class="hs-identifier hs-var">alts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1327"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PtrString -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ptext"><span class="hs-identifier hs-var">ptext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; PtrString
</span><a href="GHC.Data.FastString.html#sLit"><span class="hs-identifier hs-var">sLit</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Lint warning: Scrutinising floating-point &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-1328"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expression with literal pattern in case &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-1329"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;analysis (see #9238).&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1330"></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;scrut&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150780"><span class="hs-identifier hs-var">scrut</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1331"></span><span>
</span><span id="line-1332"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Maybe TyCon
</span><a href="GHC.Core.Type.html#tyConAppTyCon_maybe"><span class="hs-identifier hs-var">tyConAppTyCon_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150779"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1333"></span><span>         </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681150760"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150760"><span class="hs-identifier hs-var">tycon</span></a></span></span><span>
</span><span id="line-1334"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="GHC.Utils.Misc.html#debugIsOn"><span class="hs-identifier hs-var">debugIsOn</span></a></span><span>
</span><span id="line-1335"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isAlgTyCon"><span class="hs-identifier hs-var">isAlgTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150760"><span class="hs-identifier hs-var">tycon</span></a></span><span>
</span><span id="line-1336"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isAbstractTyCon"><span class="hs-identifier hs-var">isAbstractTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150760"><span class="hs-identifier hs-var">tycon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1337"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [DataCon]
</span><a href="GHC.Core.TyCon.html#tyConDataCons"><span class="hs-identifier hs-var">tyConDataCons</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150760"><span class="hs-identifier hs-var">tycon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1338"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; Bool
</span><a href="GHC.Core.Utils.html#exprIsDeadEnd"><span class="hs-identifier hs-var">exprIsDeadEnd</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150780"><span class="hs-identifier hs-var">scrut</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1339"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Driver.Ppr.html#pprTrace"><span class="hs-identifier hs-var">pprTrace</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Lint warning: case binder's type has no constructors&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150779"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150779"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1340"></span><span>                        </span><span class="hs-comment">-- This can legitimately happen for type families</span><span>
</span><span id="line-1341"></span><span>                      </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1342"></span><span>         </span><span id="local-6989586621681150753"><span class="annot"><span class="annottext">Maybe TyCon
</span><a href="#local-6989586621681150753"><span class="hs-identifier hs-var">_otherwise</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1343"></span><span>
</span><span id="line-1344"></span><span>        </span><span class="hs-comment">-- Don't use lintIdBndr on var, because unboxed tuple is legitimate</span><span>
</span><span id="line-1345"></span><span>
</span><span id="line-1346"></span><span>     </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150752"><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150752"><span class="hs-identifier hs-var">subst</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM TCvSubst
</span><a href="GHC.Core.Lint.html#getTCvSubst"><span class="hs-identifier hs-var">getTCvSubst</span></a></span><span>
</span><span id="line-1347"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150769"><span class="hs-identifier hs-var">var_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150775"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType -&gt; LintedType -&gt; TCvSubst -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkScrutMsg"><span class="hs-identifier hs-var">mkScrutMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150779"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150769"><span class="hs-identifier hs-var">var_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150775"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150752"><span class="hs-identifier hs-var">subst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1348"></span><span>       </span><span class="hs-comment">-- See GHC.Core Note [Case expression invariants] item (7)</span><span>
</span><span id="line-1349"></span><span>
</span><span id="line-1350"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. BindingSite -&gt; Var -&gt; (Var -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintBinder"><span class="hs-identifier hs-var">lintBinder</span></a></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="GHC.Utils.Outputable.html#CaseBind"><span class="hs-identifier hs-var">CaseBind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150779"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Var
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1351"></span><span>       </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- Check the alternatives</span><span>
</span><span id="line-1352"></span><span>          </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150748"><span class="annot"><span class="annottext">[UsageEnv]
</span><a href="#local-6989586621681150748"><span class="hs-identifier hs-var">alt_ues</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
-&gt; LintedType
-&gt; LintedType
-&gt; LintedType
-&gt; Alt Var
-&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#lintCoreAlt"><span class="hs-identifier hs-var">lintCoreAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150779"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150775"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150773"><span class="hs-identifier hs-var">scrut_mult</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150772"><span class="hs-identifier hs-var">alt_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621681150777"><span class="hs-identifier hs-var">alts</span></a></span><span>
</span><span id="line-1353"></span><span>          </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150745"><span class="annot"><span class="annottext">case_ue :: UsageEnv
</span><a href="#local-6989586621681150745"><span class="hs-identifier hs-var hs-var">case_ue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; UsageEnv -&gt; UsageEnv
</span><a href="GHC.Core.UsageEnv.html#scaleUE"><span class="hs-identifier hs-var">scaleUE</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150773"><span class="hs-identifier hs-var">scrut_mult</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150774"><span class="hs-identifier hs-var">scrut_ue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UsageEnv -&gt; UsageEnv -&gt; UsageEnv
</span><a href="GHC.Core.UsageEnv.html#addUE"><span class="hs-operator hs-var">`addUE`</span></a></span><span> </span><span class="annot"><span class="annottext">[UsageEnv] -&gt; UsageEnv
</span><a href="GHC.Core.UsageEnv.html#supUEs"><span class="hs-identifier hs-var">supUEs</span></a></span><span> </span><span class="annot"><span class="annottext">[UsageEnv]
</span><a href="#local-6989586621681150748"><span class="hs-identifier hs-var">alt_ues</span></a></span><span>
</span><span id="line-1354"></span><span>          </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintedType -&gt; [Alt Var] -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkCaseAlts"><span class="hs-identifier hs-var">checkCaseAlts</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150776"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150775"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span> </span><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621681150777"><span class="hs-identifier hs-var">alts</span></a></span><span>
</span><span id="line-1355"></span><span>          </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150772"><span class="hs-identifier hs-var">alt_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150745"><span class="hs-identifier hs-var">case_ue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1356"></span><span>
</span><span id="line-1357"></span><span class="annot"><a href="GHC.Core.Lint.html#checkCaseAlts"><span class="hs-identifier hs-type">checkCaseAlts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1358"></span><span class="hs-comment">-- a) Check that the alts are non-empty</span><span>
</span><span id="line-1359"></span><span class="hs-comment">-- b1) Check that the DEFAULT comes first, if it exists</span><span>
</span><span id="line-1360"></span><span class="hs-comment">-- b2) Check that the others are in increasing order</span><span>
</span><span id="line-1361"></span><span class="hs-comment">-- c) Check that there's a default for infinite types</span><span>
</span><span id="line-1362"></span><span class="hs-comment">-- NB: Algebraic cases are not necessarily exhaustive, because</span><span>
</span><span id="line-1363"></span><span class="hs-comment">--     the simplifier correctly eliminates case that can't</span><span>
</span><span id="line-1364"></span><span class="hs-comment">--     possibly match.</span><span>
</span><span id="line-1365"></span><span>
</span><span id="line-1366"></span><span id="checkCaseAlts"><span class="annot"><span class="annottext">checkCaseAlts :: CoreExpr -&gt; LintedType -&gt; [Alt Var] -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkCaseAlts"><span class="hs-identifier hs-var hs-var">checkCaseAlts</span></a></span></span><span> </span><span id="local-6989586621681150742"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150742"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681150741"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150741"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681150740"><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621681150740"><span class="hs-identifier hs-var">alts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1367"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="annot"><span class="annottext">forall {b}. Alt b -&gt; Bool
</span><a href="#local-6989586621681150739"><span class="hs-identifier hs-var">non_deflt</span></a></span><span> </span><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621681150738"><span class="hs-identifier hs-var">con_alts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkNonDefltMsg"><span class="hs-identifier hs-var">mkNonDefltMsg</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150742"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1368"></span><span>         </span><span class="hs-comment">-- See GHC.Core Note [Case expression invariants] item (2)</span><span>
</span><span id="line-1369"></span><span>
</span><span id="line-1370"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {a}. [Alt a] -&gt; Bool
</span><a href="#local-6989586621681150736"><span class="hs-identifier hs-var">increasing_tag</span></a></span><span> </span><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621681150738"><span class="hs-identifier hs-var">con_alts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkNonIncreasingAltsMsg"><span class="hs-identifier hs-var">mkNonIncreasingAltsMsg</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150742"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1371"></span><span>         </span><span class="hs-comment">-- See GHC.Core Note [Case expression invariants] item (3)</span><span>
</span><span id="line-1372"></span><span>
</span><span id="line-1373"></span><span>          </span><span class="hs-comment">-- For types Int#, Word# with an infinite (well, large!) number of</span><span>
</span><span id="line-1374"></span><span>          </span><span class="hs-comment">-- possible values, there should usually be a DEFAULT case</span><span>
</span><span id="line-1375"></span><span>          </span><span class="hs-comment">-- But (see Note [Empty case alternatives] in GHC.Core) it's ok to</span><span>
</span><span id="line-1376"></span><span>          </span><span class="hs-comment">-- have *no* case alternatives.</span><span>
</span><span id="line-1377"></span><span>          </span><span class="hs-comment">-- In effect, this is a kind of partial test. I suppose it's possible</span><span>
</span><span id="line-1378"></span><span>          </span><span class="hs-comment">-- that we might *know* that 'x' was 1 or 2, in which case</span><span>
</span><span id="line-1379"></span><span>          </span><span class="hs-comment">--   case x of { 1 -&gt; e1; 2 -&gt; e2 }</span><span>
</span><span id="line-1380"></span><span>          </span><span class="hs-comment">-- would be fine.</span><span>
</span><span id="line-1381"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#isJust"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe CoreExpr
</span><a href="#local-6989586621681150733"><span class="hs-identifier hs-var">maybe_deflt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150732"><span class="hs-identifier hs-var">is_infinite_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621681150740"><span class="hs-identifier hs-var">alts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1382"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#nonExhaustiveAltsMsg"><span class="hs-identifier hs-var">nonExhaustiveAltsMsg</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150742"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1383"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1384"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681150738"><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621681150738"><span class="hs-identifier hs-var">con_alts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150733"><span class="annot"><span class="annottext">Maybe CoreExpr
</span><a href="#local-6989586621681150733"><span class="hs-identifier hs-var">maybe_deflt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. [Alt b] -&gt; ([Alt b], Maybe (Expr b))
</span><a href="GHC.Core.Utils.html#findDefault"><span class="hs-identifier hs-var">findDefault</span></a></span><span> </span><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621681150740"><span class="hs-identifier hs-var">alts</span></a></span><span>
</span><span id="line-1385"></span><span>
</span><span id="line-1386"></span><span>        </span><span class="hs-comment">-- Check that successive alternatives have strictly increasing tags</span><span>
</span><span id="line-1387"></span><span>    </span><span id="local-6989586621681150736"><span class="annot"><span class="annottext">increasing_tag :: [Alt a] -&gt; Bool
</span><a href="#local-6989586621681150736"><span class="hs-identifier hs-var hs-var">increasing_tag</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150729"><span class="annot"><span class="annottext">Alt a
</span><a href="#local-6989586621681150729"><span class="hs-identifier hs-var">alt1</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681150728"><span class="annot"><span class="annottext">rest :: [Alt a]
</span><a href="#local-6989586621681150728"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span> </span><span id="local-6989586621681150727"><span class="annot"><span class="annottext">Alt a
</span><a href="#local-6989586621681150727"><span class="hs-identifier hs-var">alt2</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[Alt a]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Alt a
</span><a href="#local-6989586621681150729"><span class="hs-identifier hs-var">alt1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Alt a -&gt; Alt a -&gt; Bool
</span><a href="GHC.Core.html#ltAlt"><span class="hs-operator hs-var">`ltAlt`</span></a></span><span> </span><span class="annot"><span class="annottext">Alt a
</span><a href="#local-6989586621681150727"><span class="hs-identifier hs-var">alt2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Alt a] -&gt; Bool
</span><a href="#local-6989586621681150736"><span class="hs-identifier hs-var">increasing_tag</span></a></span><span> </span><span class="annot"><span class="annottext">[Alt a]
</span><a href="#local-6989586621681150728"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1388"></span><span>    </span><span class="annot"><a href="#local-6989586621681150736"><span class="hs-identifier hs-var">increasing_tag</span></a></span><span> </span><span class="annot"><span class="annottext">[Alt a]
</span><span class="hs-identifier">_</span></span><span>                         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1389"></span><span>
</span><span id="line-1390"></span><span>    </span><span id="local-6989586621681150739"><span class="annot"><span class="annottext">non_deflt :: Alt b -&gt; Bool
</span><a href="#local-6989586621681150739"><span class="hs-identifier hs-var hs-var">non_deflt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="GHC.Core.html#DEFAULT"><span class="hs-identifier hs-var">DEFAULT</span></a></span><span> </span><span class="annot"><span class="annottext">[b]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1391"></span><span>    </span><span class="annot"><a href="#local-6989586621681150739"><span class="hs-identifier hs-var">non_deflt</span></a></span><span> </span><span class="annot"><span class="annottext">Alt b
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1392"></span><span>
</span><span id="line-1393"></span><span>    </span><span id="local-6989586621681150732"><span class="annot"><span class="annottext">is_infinite_ty :: Bool
</span><a href="#local-6989586621681150732"><span class="hs-identifier hs-var hs-var">is_infinite_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Maybe TyCon
</span><a href="GHC.Core.Type.html#tyConAppTyCon_maybe"><span class="hs-identifier hs-var">tyConAppTyCon_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150741"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1394"></span><span>                        </span><span class="annot"><span class="annottext">Maybe TyCon
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1395"></span><span>                        </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681150724"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150724"><span class="hs-identifier hs-var">tycon</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isPrimTyCon"><span class="hs-identifier hs-var">isPrimTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150724"><span class="hs-identifier hs-var">tycon</span></a></span><span>
</span><span id="line-1396"></span><span>
</span><span id="line-1397"></span><span class="annot"><a href="GHC.Core.Lint.html#lintAltExpr"><span class="hs-identifier hs-type">lintAltExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span>
</span><span id="line-1398"></span><span id="lintAltExpr"><span class="annot"><span class="annottext">lintAltExpr :: CoreExpr -&gt; LintedType -&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#lintAltExpr"><span class="hs-identifier hs-var hs-var">lintAltExpr</span></a></span></span><span> </span><span id="local-6989586621681150721"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150721"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681150720"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150720"><span class="hs-identifier hs-var">ann_ty</span></a></span></span><span>
</span><span id="line-1399"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150719"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150719"><span class="hs-identifier hs-var">actual_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150718"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150718"><span class="hs-identifier hs-var">ue</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150721"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1400"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150719"><span class="hs-identifier hs-var">actual_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150720"><span class="hs-identifier hs-var">ann_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkCaseAltMsg"><span class="hs-identifier hs-var">mkCaseAltMsg</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150721"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150719"><span class="hs-identifier hs-var">actual_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150720"><span class="hs-identifier hs-var">ann_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1401"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150718"><span class="hs-identifier hs-var">ue</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1402"></span><span>         </span><span class="hs-comment">-- See GHC.Core Note [Case expression invariants] item (6)</span><span>
</span><span id="line-1403"></span><span>
</span><span id="line-1404"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreAlt"><span class="hs-identifier hs-type">lintCoreAlt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span>              </span><span class="hs-comment">-- Case binder</span><span>
</span><span id="line-1405"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span>       </span><span class="hs-comment">-- Type of scrutinee</span><span>
</span><span id="line-1406"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span>             </span><span class="hs-comment">-- Multiplicity of scrutinee</span><span>
</span><span id="line-1407"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span>       </span><span class="hs-comment">-- Type of the alternative</span><span>
</span><span id="line-1408"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span>
</span><span id="line-1409"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span>
</span><span id="line-1410"></span><span class="hs-comment">-- If you edit this function, you may need to update the GHC formalism</span><span>
</span><span id="line-1411"></span><span class="hs-comment">-- See Note [GHC Formalism]</span><span>
</span><span id="line-1412"></span><span id="lintCoreAlt"><span class="annot"><span class="annottext">lintCoreAlt :: Var
-&gt; LintedType
-&gt; LintedType
-&gt; LintedType
-&gt; Alt Var
-&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#lintCoreAlt"><span class="hs-identifier hs-var hs-var">lintCoreAlt</span></a></span></span><span> </span><span class="annot"><span class="annottext">Var
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681150716"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150716"><span class="hs-identifier hs-var">alt_ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="GHC.Core.html#DEFAULT"><span class="hs-identifier hs-var">DEFAULT</span></a></span><span> </span><span id="local-6989586621681150715"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150715"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621681150714"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150714"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1413"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150715"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var] -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkDefaultArgsMsg"><span class="hs-identifier hs-var">mkDefaultArgsMsg</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150715"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1414"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintedType -&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#lintAltExpr"><span class="hs-identifier hs-var">lintAltExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150714"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150716"><span class="hs-identifier hs-var">alt_ty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1415"></span><span>
</span><span id="line-1416"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreAlt"><span class="hs-identifier hs-var">lintCoreAlt</span></a></span><span> </span><span id="local-6989586621681150712"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150712"><span class="hs-identifier hs-var">_case_bndr</span></a></span></span><span> </span><span id="local-6989586621681150711"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150711"><span class="hs-identifier hs-var">scrut_ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681150710"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150710"><span class="hs-identifier hs-var">alt_ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#LitAlt"><span class="hs-identifier hs-type">LitAlt</span></a></span><span> </span><span id="local-6989586621681150709"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681150709"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681150708"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150708"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621681150707"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150707"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1417"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Bool
</span><a href="GHC.Types.Literal.html#litIsLifted"><span class="hs-identifier hs-var">litIsLifted</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681150709"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-1418"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Core.Lint.html#integerScrutinisedMsg"><span class="hs-identifier hs-var">integerScrutinisedMsg</span></a></span><span>
</span><span id="line-1419"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1420"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150708"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var] -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkDefaultArgsMsg"><span class="hs-identifier hs-var">mkDefaultArgsMsg</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150708"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1421"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150704"><span class="hs-identifier hs-var">lit_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150711"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadPatMsg"><span class="hs-identifier hs-var">mkBadPatMsg</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150704"><span class="hs-identifier hs-var">lit_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150711"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1422"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintedType -&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#lintAltExpr"><span class="hs-identifier hs-var">lintAltExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150707"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150710"><span class="hs-identifier hs-var">alt_ty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1423"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1424"></span><span>    </span><span id="local-6989586621681150704"><span class="annot"><span class="annottext">lit_ty :: LintedType
</span><a href="#local-6989586621681150704"><span class="hs-identifier hs-var hs-var">lit_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; LintedType
</span><a href="GHC.Types.Literal.html#literalType"><span class="hs-identifier hs-var">literalType</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681150709"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-1425"></span><span>
</span><span id="line-1426"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreAlt"><span class="hs-identifier hs-var">lintCoreAlt</span></a></span><span> </span><span id="local-6989586621681150703"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150703"><span class="hs-identifier hs-var">case_bndr</span></a></span></span><span> </span><span id="local-6989586621681150702"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150702"><span class="hs-identifier hs-var">scrut_ty</span></a></span></span><span> </span><span id="local-6989586621681150701"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150701"><span class="hs-identifier hs-var">_scrut_mult</span></a></span></span><span> </span><span id="local-6989586621681150700"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150700"><span class="hs-identifier hs-var">alt_ty</span></a></span></span><span> </span><span id="local-6989586621681150699"><span class="annot"><span class="annottext">alt :: Alt Var
</span><a href="#local-6989586621681150699"><span class="hs-identifier hs-var">alt</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DataAlt"><span class="hs-identifier hs-type">DataAlt</span></a></span><span> </span><span id="local-6989586621681150697"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681150697"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681150696"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150696"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621681150695"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150695"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1427"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isNewTyCon"><span class="hs-identifier hs-var">isNewTyCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier hs-var">dataConTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681150697"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1428"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="GHC.Core.UsageEnv.html#zeroUE"><span class="hs-identifier hs-var">zeroUE</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%24"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var">addErrL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Alt Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkNewTyDataConAltMsg"><span class="hs-identifier hs-var">mkNewTyDataConAltMsg</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150702"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Alt Var
</span><a href="#local-6989586621681150699"><span class="hs-identifier hs-var">alt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1429"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150690"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150690"><span class="hs-identifier hs-var">tycon</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150689"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150689"><span class="hs-identifier hs-var">tycon_arg_tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; Maybe (TyCon, [LintedType])
</span><a href="GHC.Core.Type.html#splitTyConApp_maybe"><span class="hs-identifier hs-var">splitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150702"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span>
</span><span id="line-1430"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Alt Var -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#CaseAlt"><span class="hs-identifier hs-var">CaseAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Alt Var
</span><a href="#local-6989586621681150699"><span class="hs-identifier hs-var">alt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>  </span><span class="hs-keyword">do</span><span>
</span><span id="line-1431"></span><span>    </span><span class="hs-special">{</span><span>   </span><span class="hs-comment">-- First instantiate the universally quantified</span><span>
</span><span id="line-1432"></span><span>        </span><span class="hs-comment">-- type variables of the data constructor</span><span>
</span><span id="line-1433"></span><span>        </span><span class="hs-comment">-- We've already check</span><span>
</span><span id="line-1434"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150690"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier hs-var">dataConTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681150697"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; DataCon -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadConMsg"><span class="hs-identifier hs-var">mkBadConMsg</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150690"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681150697"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1435"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150685"><span class="annot"><span class="annottext">con_payload_ty :: LintedType
</span><a href="#local-6989586621681150685"><span class="hs-identifier hs-var hs-var">con_payload_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; [LintedType] -&gt; LintedType
</span><a href="GHC.Core.Type.html#piResultTys"><span class="hs-identifier hs-var">piResultTys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; LintedType
</span><a href="GHC.Core.DataCon.html#dataConRepType"><span class="hs-identifier hs-var">dataConRepType</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681150697"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150689"><span class="hs-identifier hs-var">tycon_arg_tys</span></a></span><span>
</span><span id="line-1436"></span><span>          </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150682"><span class="annot"><span class="annottext">binderMult :: TyCoBinder -&gt; LintedType
</span><a href="#local-6989586621681150682"><span class="hs-identifier hs-var hs-var">binderMult</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Named"><span class="hs-identifier hs-type">Named</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarBinder
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="GHC.Core.Type.html#Many"><span class="hs-identifier hs-var">Many</span></a></span><span>
</span><span id="line-1437"></span><span>          </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="#local-6989586621681150682"><span class="hs-identifier hs-var">binderMult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Anon"><span class="hs-identifier hs-type">Anon</span></a></span><span> </span><span class="annot"><span class="annottext">AnonArgFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681150679"><span class="annot"><span class="annottext">Scaled LintedType
</span><a href="#local-6989586621681150679"><span class="hs-identifier hs-var">st</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Scaled a -&gt; LintedType
</span><a href="GHC.Core.TyCo.Rep.html#scaledMult"><span class="hs-identifier hs-var">scaledMult</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled LintedType
</span><a href="#local-6989586621681150679"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-1438"></span><span>          </span><span class="hs-comment">-- See Note [Validating multiplicities in a case]</span><span>
</span><span id="line-1439"></span><span>          </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150677"><span class="annot"><span class="annottext">multiplicities :: [LintedType]
</span><a href="#local-6989586621681150677"><span class="hs-identifier hs-var hs-var">multiplicities</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoBinder -&gt; LintedType
</span><a href="#local-6989586621681150682"><span class="hs-identifier hs-var">binderMult</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; ([TyCoBinder], LintedType)
</span><a href="GHC.Core.Type.html#splitPiTys"><span class="hs-identifier hs-var">splitPiTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150685"><span class="hs-identifier hs-var">con_payload_ty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1440"></span><span>
</span><span id="line-1441"></span><span>        </span><span class="hs-comment">-- And now bring the new binders into scope</span><span>
</span><span id="line-1442"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. BindingSite -&gt; [Var] -&gt; ([Var] -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintBinders"><span class="hs-identifier hs-var">lintBinders</span></a></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="GHC.Utils.Outputable.html#CasePatBind"><span class="hs-identifier hs-var">CasePatBind</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150696"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681150674"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150674"><span class="hs-identifier hs-var">args'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1443"></span><span>      </span><span class="hs-special">{</span><span>
</span><span id="line-1444"></span><span>        </span><span id="local-6989586621681150673"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150673"><span class="hs-identifier hs-var">rhs_ue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintedType -&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#lintAltExpr"><span class="hs-identifier hs-var">lintAltExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150695"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150700"><span class="hs-identifier hs-var">alt_ty</span></a></span><span>
</span><span id="line-1445"></span><span>      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150672"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150672"><span class="hs-identifier hs-var">rhs_ue'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Alt Var -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#CasePat"><span class="hs-identifier hs-var">CasePat</span></a></span><span> </span><span class="annot"><span class="annottext">Alt Var
</span><a href="#local-6989586621681150699"><span class="hs-identifier hs-var">alt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UsageEnv
-&gt; Var
-&gt; LintedType
-&gt; LintedType
-&gt; [(LintedType, Var)]
-&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#lintAltBinders"><span class="hs-identifier hs-var">lintAltBinders</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150673"><span class="hs-identifier hs-var">rhs_ue</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150703"><span class="hs-identifier hs-var">case_bndr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150702"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150685"><span class="hs-identifier hs-var">con_payload_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. String -&gt; [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="GHC.Utils.Misc.html#zipEqual"><span class="hs-identifier hs-var">zipEqual</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lintCoreAlt&quot;</span></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150677"><span class="hs-identifier hs-var">multiplicities</span></a></span><span>  </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150674"><span class="hs-identifier hs-var">args'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1446"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall n. NamedThing n =&gt; UsageEnv -&gt; n -&gt; UsageEnv
</span><a href="GHC.Core.UsageEnv.html#deleteUE"><span class="hs-identifier hs-var">deleteUE</span></a></span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681150672"><span class="hs-identifier hs-var">rhs_ue'</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150703"><span class="hs-identifier hs-var">case_bndr</span></a></span><span>
</span><span id="line-1447"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1448"></span><span>   </span><span class="hs-special">}</span><span>
</span><span id="line-1449"></span><span>
</span><span id="line-1450"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>   </span><span class="hs-comment">-- Scrut-ty is wrong shape</span><span>
</span><span id="line-1451"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="GHC.Core.UsageEnv.html#zeroUE"><span class="hs-identifier hs-var">zeroUE</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%24"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var">addErrL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Alt Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadAltMsg"><span class="hs-identifier hs-var">mkBadAltMsg</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150702"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Alt Var
</span><a href="#local-6989586621681150699"><span class="hs-identifier hs-var">alt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1452"></span><span>
</span><span id="line-1453"></span><span class="hs-comment">{-
Note [Validating multiplicities in a case]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Suppose 'MkT :: a %m -&gt; T m a'.
If we are validating 'case (x :: T Many a) of MkT y -&gt; ...',
we have to substitute m := Many in the type of MkT - in particular,
y can be used Many times and that expression would still be linear in x.
We do this by looking at con_payload_ty, which is the type of the datacon
applied to the surrounding arguments.
Testcase: linear/should_compile/MultConstructor

Data constructors containing existential tyvars will then have
Named binders, which are always multiplicity Many.
Testcase: indexed-types/should_compile/GADT1
-}</span><span>
</span><span id="line-1468"></span><span>
</span><span id="line-1469"></span><span class="annot"><a href="GHC.Core.Lint.html#lintLinearBinder"><span class="hs-identifier hs-type">lintLinearBinder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1470"></span><span id="lintLinearBinder"><span class="annot"><span class="annottext">lintLinearBinder :: SDoc -&gt; LintedType -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintLinearBinder"><span class="hs-identifier hs-var hs-var">lintLinearBinder</span></a></span></span><span> </span><span id="local-6989586621681150668"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150668"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681150667"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150667"><span class="hs-identifier hs-var">actual_usage</span></a></span></span><span> </span><span id="local-6989586621681150666"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150666"><span class="hs-identifier hs-var">described_usage</span></a></span></span><span>
</span><span id="line-1471"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureSubMult"><span class="hs-identifier hs-var">ensureSubMult</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150667"><span class="hs-identifier hs-var">actual_usage</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150666"><span class="hs-identifier hs-var">described_usage</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150664"><span class="hs-identifier hs-var">err_msg</span></a></span><span>
</span><span id="line-1472"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1473"></span><span>      </span><span id="local-6989586621681150664"><span class="annot"><span class="annottext">err_msg :: SDoc
</span><a href="#local-6989586621681150664"><span class="hs-identifier hs-var hs-var">err_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Multiplicity of variable does not agree with its context&quot;</span></span><span>
</span><span id="line-1474"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150668"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-1475"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150667"><span class="hs-identifier hs-var">actual_usage</span></a></span><span>
</span><span id="line-1476"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Annotation:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150666"><span class="hs-identifier hs-var">described_usage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1477"></span><span>
</span><span id="line-1478"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[lint-types]{Types}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1485"></span><span>
</span><span id="line-1486"></span><span class="hs-comment">-- When we lint binders, we (one at a time and in order):</span><span>
</span><span id="line-1487"></span><span class="hs-comment">--  1. Lint var types or kinds (possibly substituting)</span><span>
</span><span id="line-1488"></span><span class="hs-comment">--  2. Add the binder to the in scope set, and if its a coercion var,</span><span>
</span><span id="line-1489"></span><span class="hs-comment">--     we may extend the substitution to reflect its (possibly) new kind</span><span>
</span><span id="line-1490"></span><span id="local-6989586621681152512"><span class="annot"><a href="GHC.Core.Lint.html#lintBinders"><span class="hs-identifier hs-type">lintBinders</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#BindingSite"><span class="hs-identifier hs-type">BindingSite</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152512"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152512"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1491"></span><span id="lintBinders"><span class="annot"><span class="annottext">lintBinders :: forall a. BindingSite -&gt; [Var] -&gt; ([Var] -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintBinders"><span class="hs-identifier hs-var hs-var">lintBinders</span></a></span></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span id="local-6989586621681150663"><span class="annot"><span class="annottext">[Var] -&gt; LintM a
</span><a href="#local-6989586621681150663"><span class="hs-identifier hs-var">linterF</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Var] -&gt; LintM a
</span><a href="#local-6989586621681150663"><span class="hs-identifier hs-var">linterF</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1492"></span><span class="annot"><a href="GHC.Core.Lint.html#lintBinders"><span class="hs-identifier hs-var">lintBinders</span></a></span><span> </span><span id="local-6989586621681150662"><span class="annot"><span class="annottext">BindingSite
</span><a href="#local-6989586621681150662"><span class="hs-identifier hs-var">site</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150661"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150661"><span class="hs-identifier hs-var">var</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681150660"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150660"><span class="hs-identifier hs-var">vars</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681150659"><span class="annot"><span class="annottext">[Var] -&gt; LintM a
</span><a href="#local-6989586621681150659"><span class="hs-identifier hs-var">linterF</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. BindingSite -&gt; Var -&gt; (Var -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintBinder"><span class="hs-identifier hs-var">lintBinder</span></a></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="#local-6989586621681150662"><span class="hs-identifier hs-var">site</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150661"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681150658"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150658"><span class="hs-identifier hs-var">var'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1493"></span><span>                                      </span><span class="annot"><span class="annottext">forall a. BindingSite -&gt; [Var] -&gt; ([Var] -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintBinders"><span class="hs-identifier hs-var">lintBinders</span></a></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="#local-6989586621681150662"><span class="hs-identifier hs-var">site</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150660"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681150657"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150657"><span class="hs-identifier hs-var">vars'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1494"></span><span>                                      </span><span class="annot"><span class="annottext">[Var] -&gt; LintM a
</span><a href="#local-6989586621681150659"><span class="hs-identifier hs-var">linterF</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150658"><span class="hs-identifier hs-var">var'</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150657"><span class="hs-identifier hs-var">vars'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1495"></span><span>
</span><span id="line-1496"></span><span class="hs-comment">-- If you edit this function, you may need to update the GHC formalism</span><span>
</span><span id="line-1497"></span><span class="hs-comment">-- See Note [GHC Formalism]</span><span>
</span><span id="line-1498"></span><span id="local-6989586621681152552"><span class="annot"><a href="GHC.Core.Lint.html#lintBinder"><span class="hs-identifier hs-type">lintBinder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#BindingSite"><span class="hs-identifier hs-type">BindingSite</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152552"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152552"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1499"></span><span id="lintBinder"><span class="annot"><span class="annottext">lintBinder :: forall a. BindingSite -&gt; Var -&gt; (Var -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintBinder"><span class="hs-identifier hs-var hs-var">lintBinder</span></a></span></span><span> </span><span id="local-6989586621681150656"><span class="annot"><span class="annottext">BindingSite
</span><a href="#local-6989586621681150656"><span class="hs-identifier hs-var">site</span></a></span></span><span> </span><span id="local-6989586621681150655"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150655"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621681150654"><span class="annot"><span class="annottext">Var -&gt; LintM a
</span><a href="#local-6989586621681150654"><span class="hs-identifier hs-var">linterF</span></a></span></span><span>
</span><span id="line-1500"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyCoVar"><span class="hs-identifier hs-var">isTyCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150655"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Var -&gt; (Var -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintTyCoBndr"><span class="hs-identifier hs-var">lintTyCoBndr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150655"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintM a
</span><a href="#local-6989586621681150654"><span class="hs-identifier hs-var">linterF</span></a></span><span>
</span><span id="line-1501"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
TopLevelFlag -&gt; BindingSite -&gt; Var -&gt; (Var -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintIdBndr"><span class="hs-identifier hs-var">lintIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="GHC.Types.Basic.html#NotTopLevel"><span class="hs-identifier hs-var">NotTopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="#local-6989586621681150656"><span class="hs-identifier hs-var">site</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150655"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintM a
</span><a href="#local-6989586621681150654"><span class="hs-identifier hs-var">linterF</span></a></span><span>
</span><span id="line-1502"></span><span>
</span><span id="line-1503"></span><span id="local-6989586621681152555"><span class="annot"><a href="GHC.Core.Lint.html#lintTyBndr"><span class="hs-identifier hs-type">lintTyBndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LintedTyCoVar"><span class="hs-identifier hs-type">LintedTyCoVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152555"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152555"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1504"></span><span id="lintTyBndr"><span class="annot"><span class="annottext">lintTyBndr :: forall a. Var -&gt; (Var -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintTyBndr"><span class="hs-identifier hs-var hs-var">lintTyBndr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Var -&gt; (Var -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintTyCoBndr"><span class="hs-identifier hs-var">lintTyCoBndr</span></a></span><span>  </span><span class="hs-comment">-- We could specialise it, I guess</span><span>
</span><span id="line-1505"></span><span>
</span><span id="line-1506"></span><span class="hs-comment">-- lintCoBndr :: CoVar -&gt; (LintedTyCoVar -&gt; LintM a) -&gt; LintM a</span><span>
</span><span id="line-1507"></span><span class="hs-comment">-- lintCoBndr = lintTyCoBndr  -- We could specialise it, I guess</span><span>
</span><span id="line-1508"></span><span>
</span><span id="line-1509"></span><span id="local-6989586621681150649"><span class="annot"><a href="GHC.Core.Lint.html#lintTyCoBndr"><span class="hs-identifier hs-type">lintTyCoBndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LintedTyCoVar"><span class="hs-identifier hs-type">LintedTyCoVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681150649"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681150649"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1510"></span><span id="lintTyCoBndr"><span class="annot"><span class="annottext">lintTyCoBndr :: forall a. Var -&gt; (Var -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintTyCoBndr"><span class="hs-identifier hs-var hs-var">lintTyCoBndr</span></a></span></span><span> </span><span id="local-6989586621681150644"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150644"><span class="hs-identifier hs-var">tcv</span></a></span></span><span> </span><span id="local-6989586621681150643"><span class="annot"><span class="annottext">Var -&gt; LintM a
</span><a href="#local-6989586621681150643"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1511"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150642"><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150642"><span class="hs-identifier hs-var">subst</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM TCvSubst
</span><a href="GHC.Core.Lint.html#getTCvSubst"><span class="hs-identifier hs-var">getTCvSubst</span></a></span><span>
</span><span id="line-1512"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150641"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150641"><span class="hs-identifier hs-var">kind'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150644"><span class="hs-identifier hs-var">tcv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1513"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150639"><span class="annot"><span class="annottext">tcv' :: Var
</span><a href="#local-6989586621681150639"><span class="hs-identifier hs-var hs-var">tcv'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InScopeSet -&gt; Var -&gt; Var
</span><a href="GHC.Types.Var.Env.html#uniqAway"><span class="hs-identifier hs-var">uniqAway</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCvSubst -&gt; InScopeSet
</span><a href="GHC.Core.TyCo.Subst.html#getTCvInScope"><span class="hs-identifier hs-var">getTCvInScope</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150642"><span class="hs-identifier hs-var">subst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1514"></span><span>                    </span><span class="annot"><span class="annottext">Var -&gt; LintedType -&gt; Var
</span><a href="GHC.Types.Var.html#setVarType"><span class="hs-identifier hs-var">setVarType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150644"><span class="hs-identifier hs-var">tcv</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150641"><span class="hs-identifier hs-var">kind'</span></a></span><span>
</span><span id="line-1515"></span><span>             </span><span id="local-6989586621681150635"><span class="annot"><span class="annottext">subst' :: TCvSubst
</span><a href="#local-6989586621681150635"><span class="hs-identifier hs-var hs-var">subst'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCvSubst -&gt; Var -&gt; Var -&gt; TCvSubst
</span><a href="GHC.Core.TyCo.Subst.html#extendTCvSubstWithClone"><span class="hs-identifier hs-var">extendTCvSubstWithClone</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150642"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150644"><span class="hs-identifier hs-var">tcv</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150639"><span class="hs-identifier hs-var">tcv'</span></a></span><span>
</span><span id="line-1516"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isCoVar"><span class="hs-identifier hs-var">isCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150644"><span class="hs-identifier hs-var">tcv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1517"></span><span>         </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isCoVarType"><span class="hs-identifier hs-var">isCoVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150641"><span class="hs-identifier hs-var">kind'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1518"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CoVar with non-coercion type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150644"><span class="hs-identifier hs-var">tcv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1519"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. TCvSubst -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#updateTCvSubst"><span class="hs-identifier hs-var">updateTCvSubst</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150635"><span class="hs-identifier hs-var">subst'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintM a
</span><a href="#local-6989586621681150643"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150639"><span class="hs-identifier hs-var">tcv'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1520"></span><span>
</span><span id="line-1521"></span><span class="annot"><a href="GHC.Core.Lint.html#lintIdBndrs"><span class="hs-identifier hs-type">lintIdBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681152602"><span class="annot"><a href="#local-6989586621681152602"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TopLevelFlag"><span class="hs-identifier hs-type">TopLevelFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Lint.html#LintedId"><span class="hs-identifier hs-type">LintedId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152602"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152602"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1522"></span><span id="lintIdBndrs"><span class="annot"><span class="annottext">lintIdBndrs :: forall a. TopLevelFlag -&gt; [Var] -&gt; ([Var] -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintIdBndrs"><span class="hs-identifier hs-var hs-var">lintIdBndrs</span></a></span></span><span> </span><span id="local-6989586621681150631"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681150631"><span class="hs-identifier hs-var">top_lvl</span></a></span></span><span> </span><span id="local-6989586621681150630"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150630"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span id="local-6989586621681150629"><span class="annot"><span class="annottext">[Var] -&gt; LintM a
</span><a href="#local-6989586621681150629"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1523"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Var] -&gt; ([Var] -&gt; LintM a) -&gt; LintM a
</span><a href="#local-6989586621681150628"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150630"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="annot"><span class="annottext">[Var] -&gt; LintM a
</span><a href="#local-6989586621681150629"><span class="hs-identifier hs-var">thing_inside</span></a></span><span>
</span><span id="line-1524"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1525"></span><span>    </span><span class="annot"><a href="#local-6989586621681150628"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152602"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152602"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1526"></span><span>    </span><span id="local-6989586621681150628"><span class="annot"><span class="annottext">go :: [Var] -&gt; ([Var] -&gt; LintM a) -&gt; LintM a
</span><a href="#local-6989586621681150628"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><span id="local-6989586621681150627"><span class="annot"><span class="annottext">[Var] -&gt; LintM a
</span><a href="#local-6989586621681150627"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Var] -&gt; LintM a
</span><a href="#local-6989586621681150627"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1527"></span><span>    </span><span class="annot"><a href="#local-6989586621681150628"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150626"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150626"><span class="hs-identifier hs-var">id</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681150625"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150625"><span class="hs-identifier hs-var">ids</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681150624"><span class="annot"><span class="annottext">[Var] -&gt; LintM a
</span><a href="#local-6989586621681150624"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
TopLevelFlag -&gt; BindingSite -&gt; Var -&gt; (Var -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintIdBndr"><span class="hs-identifier hs-var">lintIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681150631"><span class="hs-identifier hs-var">top_lvl</span></a></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="GHC.Utils.Outputable.html#LetBind"><span class="hs-identifier hs-var">LetBind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150626"><span class="hs-identifier hs-var">id</span></a></span><span>  </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681150623"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150623"><span class="hs-identifier hs-var">id'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1528"></span><span>                               </span><span class="annot"><span class="annottext">[Var] -&gt; ([Var] -&gt; LintM a) -&gt; LintM a
</span><a href="#local-6989586621681150628"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150625"><span class="hs-identifier hs-var">ids</span></a></span><span>                         </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681150622"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150622"><span class="hs-identifier hs-var">ids'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1529"></span><span>                               </span><span class="annot"><span class="annottext">[Var] -&gt; LintM a
</span><a href="#local-6989586621681150624"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150623"><span class="hs-identifier hs-var">id'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150622"><span class="hs-identifier hs-var">ids'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1530"></span><span>
</span><span id="line-1531"></span><span id="local-6989586621681152507"><span class="annot"><a href="GHC.Core.Lint.html#lintIdBndr"><span class="hs-identifier hs-type">lintIdBndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TopLevelFlag"><span class="hs-identifier hs-type">TopLevelFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#BindingSite"><span class="hs-identifier hs-type">BindingSite</span></a></span><span>
</span><span id="line-1532"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#InVar"><span class="hs-identifier hs-type">InVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#OutVar"><span class="hs-identifier hs-type">OutVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152507"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152507"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1533"></span><span class="hs-comment">-- Do substitution on the type of a binder and add the var with this</span><span>
</span><span id="line-1534"></span><span class="hs-comment">-- new type to the in-scope set of the second argument</span><span>
</span><span id="line-1535"></span><span class="hs-comment">-- ToDo: lint its rules</span><span>
</span><span id="line-1536"></span><span id="lintIdBndr"><span class="annot"><span class="annottext">lintIdBndr :: forall a.
TopLevelFlag -&gt; BindingSite -&gt; Var -&gt; (Var -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintIdBndr"><span class="hs-identifier hs-var hs-var">lintIdBndr</span></a></span></span><span> </span><span id="local-6989586621681150601"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681150601"><span class="hs-identifier hs-var">top_lvl</span></a></span></span><span> </span><span id="local-6989586621681150600"><span class="annot"><span class="annottext">BindingSite
</span><a href="#local-6989586621681150600"><span class="hs-identifier hs-var">bind_site</span></a></span></span><span> </span><span id="local-6989586621681150599"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621681150598"><span class="annot"><span class="annottext">Var -&gt; LintM a
</span><a href="#local-6989586621681150598"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1537"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isId</span><span> </span><span class="hs-identifier">id</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">id</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1538"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150596"><span class="annot"><span class="annottext">LintFlags
</span><a href="#local-6989586621681150596"><span class="hs-identifier hs-var">flags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM LintFlags
</span><a href="GHC.Core.Lint.html#getLintFlags"><span class="hs-identifier hs-var">getLintFlags</span></a></span><span>
</span><span id="line-1539"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintFlags -&gt; Bool
</span><a href="GHC.Core.Lint.html#lf_check_global_ids"><span class="hs-identifier hs-var">lf_check_global_ids</span></a></span><span> </span><span class="annot"><span class="annottext">LintFlags
</span><a href="#local-6989586621681150596"><span class="hs-identifier hs-var">flags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isLocalId"><span class="hs-identifier hs-var">isLocalId</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1540"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Non-local Id binder&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1541"></span><span>                </span><span class="hs-comment">-- See Note [Checking for global Ids]</span><span>
</span><span id="line-1542"></span><span>
</span><span id="line-1543"></span><span>       </span><span class="hs-comment">-- Check that if the binder is nested, it is not marked as exported</span><span>
</span><span id="line-1544"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isExportedId"><span class="hs-identifier hs-var">isExportedId</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150593"><span class="hs-identifier hs-var">is_top_lvl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1545"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkNonTopExportedMsg"><span class="hs-identifier hs-var">mkNonTopExportedMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1546"></span><span>
</span><span id="line-1547"></span><span>       </span><span class="hs-comment">-- Check that if the binder is nested, it does not have an external name</span><span>
</span><span id="line-1548"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isExternalName"><span class="hs-identifier hs-var">isExternalName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Name
</span><a href="GHC.Types.Var.html#varName"><span class="hs-identifier hs-var">Var.varName</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150593"><span class="hs-identifier hs-var">is_top_lvl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1549"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkNonTopExternalNameMsg"><span class="hs-identifier hs-var">mkNonTopExternalNameMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1550"></span><span>
</span><span id="line-1551"></span><span>          </span><span class="hs-comment">-- See Note [Levity polymorphism invariants] in GHC.Core</span><span>
</span><span id="line-1552"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Id.html#isJoinId"><span class="hs-identifier hs-var">isJoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintFlags -&gt; Bool
</span><a href="GHC.Core.Lint.html#lf_check_levity_poly"><span class="hs-identifier hs-var">lf_check_levity_poly</span></a></span><span> </span><span class="annot"><span class="annottext">LintFlags
</span><a href="#local-6989586621681150596"><span class="hs-identifier hs-var">flags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1553"></span><span>                </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isTypeLevPoly"><span class="hs-identifier hs-var">isTypeLevPoly</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150589"><span class="hs-identifier hs-var">id_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1554"></span><span>         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Levity-polymorphic binder:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1555"></span><span>            </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150589"><span class="hs-identifier hs-var">id_ty</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150589"><span class="hs-identifier hs-var">id_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1556"></span><span>
</span><span id="line-1557"></span><span>       </span><span class="hs-comment">-- Check that a join-id is a not-top-level let-binding</span><span>
</span><span id="line-1558"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Id.html#isJoinId"><span class="hs-identifier hs-var">isJoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1559"></span><span>         </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150593"><span class="hs-identifier hs-var">is_top_lvl</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150588"><span class="hs-identifier hs-var">is_let_bind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1560"></span><span>         </span><span class="annot"><span class="annottext">Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadJoinBindMsg"><span class="hs-identifier hs-var">mkBadJoinBindMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1561"></span><span>
</span><span id="line-1562"></span><span>       </span><span class="hs-comment">-- Check that the Id does not have type (t1 ~# t2) or (t1 ~R# t2);</span><span>
</span><span id="line-1563"></span><span>       </span><span class="hs-comment">-- if so, it should be a CoVar, and checked by lintCoVarBndr</span><span>
</span><span id="line-1564"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isCoVarType"><span class="hs-identifier hs-var">isCoVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150589"><span class="hs-identifier hs-var">id_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1565"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Non-CoVar has coercion type&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150589"><span class="hs-identifier hs-var">id_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1566"></span><span>
</span><span id="line-1567"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150586"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150586"><span class="hs-identifier hs-var">linted_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#IdTy"><span class="hs-identifier hs-var">IdTy</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintValueType"><span class="hs-identifier hs-var">lintValueType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150589"><span class="hs-identifier hs-var">id_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1568"></span><span>
</span><span id="line-1569"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. Var -&gt; LintedType -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addInScopeId"><span class="hs-identifier hs-var">addInScopeId</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150586"><span class="hs-identifier hs-var">linted_ty</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1570"></span><span>         </span><span class="annot"><span class="annottext">Var -&gt; LintM a
</span><a href="#local-6989586621681150598"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType -&gt; Var
</span><a href="GHC.Types.Id.html#setIdType"><span class="hs-identifier hs-var">setIdType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150586"><span class="hs-identifier hs-var">linted_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1571"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1572"></span><span>    </span><span id="local-6989586621681150589"><span class="annot"><span class="annottext">id_ty :: LintedType
</span><a href="#local-6989586621681150589"><span class="hs-identifier hs-var hs-var">id_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150599"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1573"></span><span>
</span><span id="line-1574"></span><span>    </span><span id="local-6989586621681150593"><span class="annot"><span class="annottext">is_top_lvl :: Bool
</span><a href="#local-6989586621681150593"><span class="hs-identifier hs-var hs-var">is_top_lvl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TopLevelFlag -&gt; Bool
</span><a href="GHC.Types.Basic.html#isTopLevel"><span class="hs-identifier hs-var">isTopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681150601"><span class="hs-identifier hs-var">top_lvl</span></a></span><span>
</span><span id="line-1575"></span><span>    </span><span id="local-6989586621681150588"><span class="annot"><span class="annottext">is_let_bind :: Bool
</span><a href="#local-6989586621681150588"><span class="hs-identifier hs-var hs-var">is_let_bind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="#local-6989586621681150600"><span class="hs-identifier hs-var">bind_site</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1576"></span><span>                    </span><span class="annot"><span class="annottext">BindingSite
</span><a href="GHC.Utils.Outputable.html#LetBind"><span class="hs-identifier hs-var">LetBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1577"></span><span>                    </span><span class="annot"><span class="annottext">BindingSite
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1578"></span><span>
</span><span id="line-1579"></span><span class="hs-comment">{-
%************************************************************************
%*                                                                      *
             Types
%*                                                                      *
%************************************************************************
-}</span><span>
</span><span id="line-1586"></span><span>
</span><span id="line-1587"></span><span class="annot"><a href="GHC.Core.Lint.html#lintValueType"><span class="hs-identifier hs-type">lintValueType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span>
</span><span id="line-1588"></span><span class="hs-comment">-- Types only, not kinds</span><span>
</span><span id="line-1589"></span><span class="hs-comment">-- Check the type, and apply the substitution to it</span><span>
</span><span id="line-1590"></span><span class="hs-comment">-- See Note [Linting type lets]</span><span>
</span><span id="line-1591"></span><span id="lintValueType"><span class="annot"><span class="annottext">lintValueType :: LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintValueType"><span class="hs-identifier hs-var hs-var">lintValueType</span></a></span></span><span> </span><span id="local-6989586621681150583"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150583"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-1592"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#InType"><span class="hs-identifier hs-var">InType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150583"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1593"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150581"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150581"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150583"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1594"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150580"><span class="annot"><span class="annottext">sk :: LintedType
</span><a href="#local-6989586621681150580"><span class="hs-identifier hs-var hs-var">sk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150581"><span class="hs-identifier hs-var">ty'</span></a></span><span>
</span><span id="line-1595"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#classifiesTypeWithValues"><span class="hs-identifier hs-var">classifiesTypeWithValues</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150580"><span class="hs-identifier hs-var">sk</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1596"></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Ill-kinded type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150583"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1597"></span><span>             </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;has kind:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150580"><span class="hs-identifier hs-var">sk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1598"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150581"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1599"></span><span>
</span><span id="line-1600"></span><span class="annot"><a href="GHC.Core.Lint.html#checkTyCon"><span class="hs-identifier hs-type">checkTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1601"></span><span id="checkTyCon"><span class="annot"><span class="annottext">checkTyCon :: TyCon -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkTyCon"><span class="hs-identifier hs-var hs-var">checkTyCon</span></a></span></span><span> </span><span id="local-6989586621681150577"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150577"><span class="hs-identifier hs-var">tc</span></a></span></span><span>
</span><span id="line-1602"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isTcTyCon"><span class="hs-identifier hs-var">isTcTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150577"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Found TcTyCon:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150577"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1603"></span><span>
</span><span id="line-1604"></span><span class="hs-comment">-------------------</span><span>
</span><span id="line-1605"></span><span class="annot"><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-type">lintType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span>
</span><span id="line-1606"></span><span>
</span><span id="line-1607"></span><span class="hs-comment">-- If you edit this function, you may need to update the GHC formalism</span><span>
</span><span id="line-1608"></span><span class="hs-comment">-- See Note [GHC Formalism]</span><span>
</span><span id="line-1609"></span><span id="lintType"><span class="annot"><span class="annottext">lintType :: LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var hs-var">lintType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-type">TyVarTy</span></a></span><span> </span><span id="local-6989586621681150574"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150574"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1610"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150574"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1611"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadTyVarMsg"><span class="hs-identifier hs-var">mkBadTyVarMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150574"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1612"></span><span>
</span><span id="line-1613"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1614"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150572"><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150572"><span class="hs-identifier hs-var">subst</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM TCvSubst
</span><a href="GHC.Core.Lint.html#getTCvSubst"><span class="hs-identifier hs-var">getTCvSubst</span></a></span><span>
</span><span id="line-1615"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TCvSubst -&gt; Var -&gt; Maybe LintedType
</span><a href="GHC.Core.TyCo.Subst.html#lookupTyVar"><span class="hs-identifier hs-var">lookupTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150572"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150574"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1616"></span><span>           </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681150570"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150570"><span class="hs-identifier hs-var">linted_ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150570"><span class="hs-identifier hs-var">linted_ty</span></a></span><span>
</span><span id="line-1617"></span><span>
</span><span id="line-1618"></span><span>           </span><span class="hs-comment">-- In GHCi we may lint an expression with a free</span><span>
</span><span id="line-1619"></span><span>           </span><span class="hs-comment">-- type variable.  Then it won't be in the</span><span>
</span><span id="line-1620"></span><span>           </span><span class="hs-comment">-- substitution, but it should be in scope</span><span>
</span><span id="line-1621"></span><span>           </span><span class="annot"><span class="annottext">Maybe LintedType
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150574"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; TCvSubst -&gt; Bool
</span><a href="GHC.Core.TyCo.Subst.html#isInScope"><span class="hs-operator hs-var">`isInScope`</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150572"><span class="hs-identifier hs-var">subst</span></a></span><span>
</span><span id="line-1622"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-var">TyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150574"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1623"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1624"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1625"></span><span>                      </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The type variable&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. OutputableBndr a =&gt; BindingSite -&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprBndr"><span class="hs-identifier hs-var">pprBndr</span></a></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="GHC.Utils.Outputable.html#LetBind"><span class="hs-identifier hs-var">LetBind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150574"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1626"></span><span>                         </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is out of scope&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1627"></span><span>     </span><span class="hs-special">}</span><span>
</span><span id="line-1628"></span><span>
</span><span id="line-1629"></span><span class="annot"><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span id="local-6989586621681150567"><span class="annot"><span class="annottext">ty :: LintedType
</span><a href="#local-6989586621681150567"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621681150565"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150565"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681150564"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150564"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1630"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150565"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1631"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TyConApp to the left of AppTy:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150567"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1632"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1633"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150562"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150562"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150565"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1634"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150561"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150561"><span class="hs-identifier hs-var">t2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150564"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1635"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; [LintedType] -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_ty_app"><span class="hs-identifier hs-var">lint_ty_app</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150567"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150562"><span class="hs-identifier hs-var">t1'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150561"><span class="hs-identifier hs-var">t2'</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1636"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-var">AppTy</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150562"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150561"><span class="hs-identifier hs-var">t2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1637"></span><span>
</span><span id="line-1638"></span><span class="annot"><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span id="local-6989586621681150559"><span class="annot"><span class="annottext">ty :: LintedType
</span><a href="#local-6989586621681150559"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621681150558"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150558"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span id="local-6989586621681150557"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150557"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1639"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isTypeSynonymTyCon"><span class="hs-identifier hs-var">isTypeSynonymTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150558"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isTypeFamilyTyCon"><span class="hs-identifier hs-var">isTypeFamilyTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150558"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-1640"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150554"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150554"><span class="hs-identifier hs-var">report_unsat</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintFlags -&gt; Bool
</span><a href="GHC.Core.Lint.html#lf_report_unsat_syns"><span class="hs-identifier hs-var">lf_report_unsat_syns</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LintM LintFlags
</span><a href="GHC.Core.Lint.html#getLintFlags"><span class="hs-identifier hs-var">getLintFlags</span></a></span><span>
</span><span id="line-1641"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; LintedType -&gt; TyCon -&gt; [LintedType] -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintTySynFamApp"><span class="hs-identifier hs-var">lintTySynFamApp</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150554"><span class="hs-identifier hs-var">report_unsat</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150559"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150558"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150557"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1642"></span><span>
</span><span id="line-1643"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isFunTyCon"><span class="hs-identifier hs-var">isFunTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150558"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-1644"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150557"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; JoinArity -&gt; Bool
</span><a href="GHC.Utils.Misc.html#lengthIs"><span class="hs-operator hs-var">`lengthIs`</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">5</span></span><span>
</span><span id="line-1645"></span><span>    </span><span class="hs-comment">-- We should never see a saturated application of funTyCon; such</span><span>
</span><span id="line-1646"></span><span>    </span><span class="hs-comment">-- applications should be represented with the FunTy constructor.</span><span>
</span><span id="line-1647"></span><span>    </span><span class="hs-comment">-- See Note [Linting function types] and</span><span>
</span><span id="line-1648"></span><span>    </span><span class="hs-comment">-- Note [Representation of function types].</span><span>
</span><span id="line-1649"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Saturated application of (-&gt;)&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150559"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1650"></span><span>
</span><span id="line-1651"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>  </span><span class="hs-comment">-- Data types, data families, primitive types</span><span>
</span><span id="line-1652"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkTyCon"><span class="hs-identifier hs-var">checkTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150558"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-1653"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150549"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150549"><span class="hs-identifier hs-var">tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150557"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1654"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; [LintedType] -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_ty_app"><span class="hs-identifier hs-var">lint_ty_app</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150559"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; LintedType
</span><a href="GHC.Core.TyCon.html#tyConKind"><span class="hs-identifier hs-var">tyConKind</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150558"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150549"><span class="hs-identifier hs-var">tys'</span></a></span><span>
</span><span id="line-1655"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [LintedType] -&gt; LintedType
</span><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-var">TyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150558"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150549"><span class="hs-identifier hs-var">tys'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1656"></span><span>
</span><span id="line-1657"></span><span class="hs-comment">-- arrows can related *unlifted* kinds, so this has to be separate from</span><span>
</span><span id="line-1658"></span><span class="hs-comment">-- a dependent forall.</span><span>
</span><span id="line-1659"></span><span class="annot"><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span id="local-6989586621681150547"><span class="annot"><span class="annottext">ty :: LintedType
</span><a href="#local-6989586621681150547"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span id="local-6989586621681150545"><span class="annot"><span class="annottext">AnonArgFlag
</span><a href="#local-6989586621681150545"><span class="hs-identifier hs-var">af</span></a></span></span><span> </span><span id="local-6989586621681150544"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150544"><span class="hs-identifier hs-var">tw</span></a></span></span><span> </span><span id="local-6989586621681150543"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150543"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681150542"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150542"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1660"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150541"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150541"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150543"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1661"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150540"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150540"><span class="hs-identifier hs-var">t2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150542"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1662"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150539"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150539"><span class="hs-identifier hs-var">tw'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150544"><span class="hs-identifier hs-var">tw</span></a></span><span>
</span><span id="line-1663"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintedType -&gt; LintedType -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintArrow"><span class="hs-identifier hs-var">lintArrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type or kind&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150547"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150541"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150540"><span class="hs-identifier hs-var">t2'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150539"><span class="hs-identifier hs-var">tw'</span></a></span><span>
</span><span id="line-1664"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnonArgFlag -&gt; LintedType -&gt; LintedType -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-var">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">AnonArgFlag
</span><a href="#local-6989586621681150545"><span class="hs-identifier hs-var">af</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150539"><span class="hs-identifier hs-var">tw'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150541"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150540"><span class="hs-identifier hs-var">t2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1665"></span><span>
</span><span id="line-1666"></span><span class="annot"><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span id="local-6989586621681150537"><span class="annot"><span class="annottext">ty :: LintedType
</span><a href="#local-6989586621681150537"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621681150534"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150534"><span class="hs-identifier hs-var">tcv</span></a></span></span><span> </span><span id="local-6989586621681150533"><span class="annot"><span class="annottext">ArgFlag
</span><a href="#local-6989586621681150533"><span class="hs-identifier hs-var">vis</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681150532"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150532"><span class="hs-identifier hs-var">body_ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1667"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyCoVar"><span class="hs-identifier hs-var">isTyCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150534"><span class="hs-identifier hs-var">tcv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1668"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Non-Tyvar or Non-Covar bound in type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150537"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1669"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1670"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Var -&gt; (Var -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintTyCoBndr"><span class="hs-identifier hs-var">lintTyCoBndr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150534"><span class="hs-identifier hs-var">tcv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681150531"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150531"><span class="hs-identifier hs-var">tcv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1671"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150530"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150530"><span class="hs-identifier hs-var">body_ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150532"><span class="hs-identifier hs-var">body_ty</span></a></span><span>
</span><span id="line-1672"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintForAllBody"><span class="hs-identifier hs-var">lintForAllBody</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150531"><span class="hs-identifier hs-var">tcv'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150530"><span class="hs-identifier hs-var">body_ty'</span></a></span><span>
</span><span id="line-1673"></span><span>
</span><span id="line-1674"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isCoVar"><span class="hs-identifier hs-var">isCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150534"><span class="hs-identifier hs-var">tcv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1675"></span><span>         </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150534"><span class="hs-identifier hs-var">tcv</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; IdSet -&gt; Bool
</span><a href="GHC.Types.Var.Set.html#elemVarSet"><span class="hs-operator hs-var">`elemVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; IdSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfType"><span class="hs-identifier hs-var">tyCoVarsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150532"><span class="hs-identifier hs-var">body_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1676"></span><span>         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Covar does not occur in the body:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150534"><span class="hs-identifier hs-var">tcv</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150532"><span class="hs-identifier hs-var">body_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1677"></span><span>         </span><span class="hs-comment">-- See GHC.Core.TyCo.Rep Note [Unused coercion variable in ForAllTy]</span><span>
</span><span id="line-1678"></span><span>         </span><span class="hs-comment">-- and cf GHC.Core.Coercion Note [Unused coercion variable in ForAllCo]</span><span>
</span><span id="line-1679"></span><span>
</span><span id="line-1680"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCoVarBinder -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-var">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall var argf. var -&gt; argf -&gt; VarBndr var argf
</span><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-var">Bndr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150531"><span class="hs-identifier hs-var">tcv'</span></a></span><span> </span><span class="annot"><span class="annottext">ArgFlag
</span><a href="#local-6989586621681150533"><span class="hs-identifier hs-var">vis</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150530"><span class="hs-identifier hs-var">body_ty'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1681"></span><span>
</span><span id="line-1682"></span><span class="annot"><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span id="local-6989586621681150526"><span class="annot"><span class="annottext">ty :: LintedType
</span><a href="#local-6989586621681150526"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-type">LitTy</span></a></span><span> </span><span id="local-6989586621681150524"><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621681150524"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1683"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">TyLit -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintTyLit"><span class="hs-identifier hs-var">lintTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621681150524"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150526"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1684"></span><span>
</span><span id="line-1685"></span><span class="annot"><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621681150521"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150521"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681150520"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150520"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1686"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150519"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150519"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150521"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1687"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150518"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150518"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintStarCoercion"><span class="hs-identifier hs-var">lintStarCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150520"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1688"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150516"><span class="annot"><span class="annottext">tyk :: LintedType
</span><a href="#local-6989586621681150516"><span class="hs-identifier hs-var hs-var">tyk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150519"><span class="hs-identifier hs-var">ty'</span></a></span><span>
</span><span id="line-1689"></span><span>             </span><span id="local-6989586621681150515"><span class="annot"><span class="annottext">cok :: LintedType
</span><a href="#local-6989586621681150515"><span class="hs-identifier hs-var hs-var">cok</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintedType
</span><a href="GHC.Core.Coercion.html#coercionLKind"><span class="hs-identifier hs-var">coercionLKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150518"><span class="hs-identifier hs-var">co'</span></a></span><span>
</span><span id="line-1690"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150516"><span class="hs-identifier hs-var">tyk</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150515"><span class="hs-identifier hs-var">cok</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Coercion -&gt; LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkCastTyErr"><span class="hs-identifier hs-var">mkCastTyErr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150521"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150520"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150516"><span class="hs-identifier hs-var">tyk</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150515"><span class="hs-identifier hs-var">cok</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1691"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Coercion -&gt; LintedType
</span><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-var">CastTy</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150519"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150518"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1692"></span><span>
</span><span id="line-1693"></span><span class="annot"><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span id="local-6989586621681150511"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150511"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1694"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150510"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150510"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150511"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1695"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; LintedType
</span><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-var">CoercionTy</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150510"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1696"></span><span>
</span><span id="line-1697"></span><span class="hs-comment">-----------------</span><span>
</span><span id="line-1698"></span><span class="annot"><a href="GHC.Core.Lint.html#lintForAllBody"><span class="hs-identifier hs-type">lintForAllBody</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedTyCoVar"><span class="hs-identifier hs-type">LintedTyCoVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1699"></span><span class="hs-comment">-- Do the checks for the body of a forall-type</span><span>
</span><span id="line-1700"></span><span id="lintForAllBody"><span class="annot"><span class="annottext">lintForAllBody :: Var -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintForAllBody"><span class="hs-identifier hs-var hs-var">lintForAllBody</span></a></span></span><span> </span><span id="local-6989586621681150509"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150509"><span class="hs-identifier hs-var">tcv</span></a></span></span><span> </span><span id="local-6989586621681150508"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150508"><span class="hs-identifier hs-var">body_ty</span></a></span></span><span>
</span><span id="line-1701"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkValueType"><span class="hs-identifier hs-var">checkValueType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150508"><span class="hs-identifier hs-var">body_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;the body of forall:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150508"><span class="hs-identifier hs-var">body_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1702"></span><span>
</span><span id="line-1703"></span><span>         </span><span class="hs-comment">-- For type variables, check for skolem escape</span><span>
</span><span id="line-1704"></span><span>         </span><span class="hs-comment">-- See Note [Phantom type variables in kinds] in GHC.Core.Type</span><span>
</span><span id="line-1705"></span><span>         </span><span class="hs-comment">-- The kind of (forall cv. th) is liftedTypeKind, so no</span><span>
</span><span id="line-1706"></span><span>         </span><span class="hs-comment">-- need to check for skolem-escape in the CoVar case</span><span>
</span><span id="line-1707"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150507"><span class="annot"><span class="annottext">body_kind :: LintedType
</span><a href="#local-6989586621681150507"><span class="hs-identifier hs-var hs-var">body_kind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150508"><span class="hs-identifier hs-var">body_ty</span></a></span><span>
</span><span id="line-1708"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150509"><span class="hs-identifier hs-var">tcv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1709"></span><span>         </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Var] -&gt; LintedType -&gt; Maybe LintedType
</span><a href="GHC.Core.Type.html#occCheckExpand"><span class="hs-identifier hs-var">occCheckExpand</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150509"><span class="hs-identifier hs-var">tcv</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150507"><span class="hs-identifier hs-var">body_kind</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1710"></span><span>           </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1711"></span><span>           </span><span class="annot"><span class="annottext">Maybe LintedType
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1712"></span><span>                      </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Variable escape in forall:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1713"></span><span>                         </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tyvar:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150509"><span class="hs-identifier hs-var">tcv</span></a></span><span>
</span><span id="line-1714"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150508"><span class="hs-identifier hs-var">body_ty</span></a></span><span>
</span><span id="line-1715"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;kind:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150507"><span class="hs-identifier hs-var">body_kind</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1716"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1717"></span><span>
</span><span id="line-1718"></span><span class="hs-comment">-----------------</span><span>
</span><span id="line-1719"></span><span class="annot"><a href="GHC.Core.Lint.html#lintTySynFamApp"><span class="hs-identifier hs-type">lintTySynFamApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#InType"><span class="hs-identifier hs-type">InType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#InType"><span class="hs-identifier hs-type">InType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span>
</span><span id="line-1720"></span><span class="hs-comment">-- The TyCon is a type synonym or a type family (not a data family)</span><span>
</span><span id="line-1721"></span><span class="hs-comment">-- See Note [Linting type synonym applications]</span><span>
</span><span id="line-1722"></span><span class="hs-comment">-- c.f. GHC.Tc.Validity.check_syn_tc_app</span><span>
</span><span id="line-1723"></span><span id="lintTySynFamApp"><span class="annot"><span class="annottext">lintTySynFamApp :: Bool -&gt; LintedType -&gt; TyCon -&gt; [LintedType] -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintTySynFamApp"><span class="hs-identifier hs-var hs-var">lintTySynFamApp</span></a></span></span><span> </span><span id="local-6989586621681150504"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150504"><span class="hs-identifier hs-var">report_unsat</span></a></span></span><span> </span><span id="local-6989586621681150503"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150503"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681150502"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150502"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span id="local-6989586621681150501"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150501"><span class="hs-identifier hs-var">tys</span></a></span></span><span>
</span><span id="line-1724"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150504"><span class="hs-identifier hs-var">report_unsat</span></a></span><span>   </span><span class="hs-comment">-- Report unsaturated only if report_unsat is on</span><span>
</span><span id="line-1725"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150501"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; JoinArity -&gt; Bool
</span><a href="GHC.Utils.Misc.html#lengthLessThan"><span class="hs-operator hs-var">`lengthLessThan`</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; JoinArity
</span><a href="GHC.Core.TyCon.html#tyConArity"><span class="hs-identifier hs-var">tyConArity</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150502"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-1726"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Un-saturated type application&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150503"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1727"></span><span>
</span><span id="line-1728"></span><span>  </span><span class="hs-comment">-- Deal with type synonyms</span><span>
</span><span id="line-1729"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150498"><span class="annot"><span class="annottext">[(Var, LintedType)]
</span><a href="#local-6989586621681150498"><span class="hs-identifier hs-var">tenv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150497"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150497"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150496"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150496"><span class="hs-identifier hs-var">tys'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall tyco.
TyCon -&gt; [tyco] -&gt; Maybe ([(Var, tyco)], LintedType, [tyco])
</span><a href="GHC.Core.TyCon.html#expandSynTyCon_maybe"><span class="hs-identifier hs-var">expandSynTyCon_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150502"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150501"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1730"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150494"><span class="annot"><span class="annottext">expanded_ty :: LintedType
</span><a href="#local-6989586621681150494"><span class="hs-identifier hs-var hs-var">expanded_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; [LintedType] -&gt; LintedType
</span><a href="GHC.Core.Type.html#mkAppTys"><span class="hs-identifier hs-var">mkAppTys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; TCvSubst -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.TyCo.Subst.html#substTy"><span class="hs-identifier hs-var">substTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Var, LintedType)] -&gt; TCvSubst
</span><a href="GHC.Core.TyCo.Subst.html#mkTvSubstPrs"><span class="hs-identifier hs-var">mkTvSubstPrs</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, LintedType)]
</span><a href="#local-6989586621681150498"><span class="hs-identifier hs-var">tenv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150497"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150496"><span class="hs-identifier hs-var">tys'</span></a></span><span>
</span><span id="line-1731"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- Kind-check the argument types, but without reporting</span><span>
</span><span id="line-1732"></span><span>         </span><span class="hs-comment">-- un-saturated type families/synonyms</span><span>
</span><span id="line-1733"></span><span>         </span><span id="local-6989586621681150490"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150490"><span class="hs-identifier hs-var">tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Bool -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#setReportUnsat"><span class="hs-identifier hs-var">setReportUnsat</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150501"><span class="hs-identifier hs-var">tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1734"></span><span>
</span><span id="line-1735"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150504"><span class="hs-identifier hs-var">report_unsat</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1736"></span><span>         </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150494"><span class="hs-identifier hs-var">expanded_ty</span></a></span><span>
</span><span id="line-1737"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1738"></span><span>
</span><span id="line-1739"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; [LintedType] -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_ty_app"><span class="hs-identifier hs-var">lint_ty_app</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150503"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; LintedType
</span><a href="GHC.Core.TyCon.html#tyConKind"><span class="hs-identifier hs-var">tyConKind</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150502"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150490"><span class="hs-identifier hs-var">tys'</span></a></span><span>
</span><span id="line-1740"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [LintedType] -&gt; LintedType
</span><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-var">TyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150502"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150490"><span class="hs-identifier hs-var">tys'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1741"></span><span>
</span><span id="line-1742"></span><span>  </span><span class="hs-comment">-- Otherwise this must be a type family</span><span>
</span><span id="line-1743"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1744"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150488"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150488"><span class="hs-identifier hs-var">tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150501"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1745"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; [LintedType] -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_ty_app"><span class="hs-identifier hs-var">lint_ty_app</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150503"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; LintedType
</span><a href="GHC.Core.TyCon.html#tyConKind"><span class="hs-identifier hs-var">tyConKind</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150502"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150488"><span class="hs-identifier hs-var">tys'</span></a></span><span>
</span><span id="line-1746"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [LintedType] -&gt; LintedType
</span><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-var">TyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150502"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150488"><span class="hs-identifier hs-var">tys'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1747"></span><span>
</span><span id="line-1748"></span><span class="hs-comment">-----------------</span><span>
</span><span id="line-1749"></span><span class="hs-comment">-- Confirms that a type is really *, #, Constraint etc</span><span>
</span><span id="line-1750"></span><span class="annot"><a href="GHC.Core.Lint.html#checkValueType"><span class="hs-identifier hs-type">checkValueType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1751"></span><span id="checkValueType"><span class="annot"><span class="annottext">checkValueType :: LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkValueType"><span class="hs-identifier hs-var hs-var">checkValueType</span></a></span></span><span> </span><span id="local-6989586621681150487"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150487"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681150486"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150486"><span class="hs-identifier hs-var">doc</span></a></span></span><span>
</span><span id="line-1752"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#classifiesTypeWithValues"><span class="hs-identifier hs-var">classifiesTypeWithValues</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150485"><span class="hs-identifier hs-var">kind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1753"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Non-*-like kind when *-like expected:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150485"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1754"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;when checking&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150486"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1755"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1756"></span><span>    </span><span id="local-6989586621681150485"><span class="annot"><span class="annottext">kind :: LintedType
</span><a href="#local-6989586621681150485"><span class="hs-identifier hs-var hs-var">kind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150487"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1757"></span><span>
</span><span id="line-1758"></span><span class="hs-comment">-----------------</span><span>
</span><span id="line-1759"></span><span class="annot"><a href="GHC.Core.Lint.html#lintArrow"><span class="hs-identifier hs-type">lintArrow</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1760"></span><span class="hs-comment">-- If you edit this function, you may need to update the GHC formalism</span><span>
</span><span id="line-1761"></span><span class="hs-comment">-- See Note [GHC Formalism]</span><span>
</span><span id="line-1762"></span><span id="lintArrow"><span class="annot"><span class="annottext">lintArrow :: SDoc -&gt; LintedType -&gt; LintedType -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintArrow"><span class="hs-identifier hs-var hs-var">lintArrow</span></a></span></span><span> </span><span id="local-6989586621681150484"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150484"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span id="local-6989586621681150483"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150483"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681150482"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150482"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span id="local-6989586621681150481"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150481"><span class="hs-identifier hs-var">tw</span></a></span></span><span>  </span><span class="hs-comment">-- Eg lintArrow &quot;type or kind `blah'&quot; k1 k2 kw</span><span>
</span><span id="line-1763"></span><span>                         </span><span class="hs-comment">-- or lintArrow &quot;coercion `blah'&quot; k1 k2 kw</span><span>
</span><span id="line-1764"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#classifiesTypeWithValues"><span class="hs-identifier hs-var">classifiesTypeWithValues</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150480"><span class="hs-identifier hs-var">k1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var">addErrL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; LintedType -&gt; SDoc
</span><a href="#local-6989586621681150479"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;argument&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150480"><span class="hs-identifier hs-var">k1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1765"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#classifiesTypeWithValues"><span class="hs-identifier hs-var">classifiesTypeWithValues</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150478"><span class="hs-identifier hs-var">k2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var">addErrL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; LintedType -&gt; SDoc
</span><a href="#local-6989586621681150479"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;result&quot;</span></span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150478"><span class="hs-identifier hs-var">k2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1766"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isMultiplicityTy"><span class="hs-identifier hs-var">isMultiplicityTy</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150476"><span class="hs-identifier hs-var">kw</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var">addErrL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; LintedType -&gt; SDoc
</span><a href="#local-6989586621681150479"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;multiplicity&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150476"><span class="hs-identifier hs-var">kw</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1767"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1768"></span><span>    </span><span id="local-6989586621681150480"><span class="annot"><span class="annottext">k1 :: LintedType
</span><a href="#local-6989586621681150480"><span class="hs-identifier hs-var hs-var">k1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150483"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1769"></span><span>    </span><span id="local-6989586621681150478"><span class="annot"><span class="annottext">k2 :: LintedType
</span><a href="#local-6989586621681150478"><span class="hs-identifier hs-var hs-var">k2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150482"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1770"></span><span>    </span><span id="local-6989586621681150476"><span class="annot"><span class="annottext">kw :: LintedType
</span><a href="#local-6989586621681150476"><span class="hs-identifier hs-var hs-var">kw</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150481"><span class="hs-identifier hs-var">tw</span></a></span><span>
</span><span id="line-1771"></span><span>    </span><span id="local-6989586621681150479"><span class="annot"><span class="annottext">msg :: SDoc -&gt; LintedType -&gt; SDoc
</span><a href="#local-6989586621681150479"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621681150475"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150475"><span class="hs-identifier hs-var">ar</span></a></span></span><span> </span><span id="local-6989586621681150474"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150474"><span class="hs-identifier hs-var">k</span></a></span></span><span>
</span><span id="line-1772"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Ill-kinded&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150475"><span class="hs-identifier hs-var">ar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1773"></span><span>                  </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;in&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150484"><span class="hs-identifier hs-var">what</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1774"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150484"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;kind:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150474"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1775"></span><span>
</span><span id="line-1776"></span><span class="hs-comment">-----------------</span><span>
</span><span id="line-1777"></span><span class="annot"><a href="GHC.Core.Lint.html#lint_ty_app"><span class="hs-identifier hs-type">lint_ty_app</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedKind"><span class="hs-identifier hs-type">LintedKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1778"></span><span id="lint_ty_app"><span class="annot"><span class="annottext">lint_ty_app :: LintedType -&gt; LintedType -&gt; [LintedType] -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_ty_app"><span class="hs-identifier hs-var hs-var">lint_ty_app</span></a></span></span><span> </span><span id="local-6989586621681150473"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150473"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681150472"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150472"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681150471"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150471"><span class="hs-identifier hs-var">tys</span></a></span></span><span>
</span><span id="line-1779"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintedType -&gt; [LintedType] -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_app"><span class="hs-identifier hs-var">lint_app</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150473"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150472"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150471"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1780"></span><span>
</span><span id="line-1781"></span><span class="hs-comment">----------------</span><span>
</span><span id="line-1782"></span><span class="annot"><a href="GHC.Core.Lint.html#lint_co_app"><span class="hs-identifier hs-type">lint_co_app</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedKind"><span class="hs-identifier hs-type">LintedKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1783"></span><span id="lint_co_app"><span class="annot"><span class="annottext">lint_co_app :: Coercion -&gt; LintedType -&gt; [LintedType] -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_co_app"><span class="hs-identifier hs-var hs-var">lint_co_app</span></a></span></span><span> </span><span id="local-6989586621681150468"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150468"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681150467"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150467"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681150466"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150466"><span class="hs-identifier hs-var">tys</span></a></span></span><span>
</span><span id="line-1784"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintedType -&gt; [LintedType] -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_app"><span class="hs-identifier hs-var">lint_app</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;coercion&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150468"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150467"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150466"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1785"></span><span>
</span><span id="line-1786"></span><span class="hs-comment">----------------</span><span>
</span><span id="line-1787"></span><span class="annot"><a href="GHC.Core.Lint.html#lintTyLit"><span class="hs-identifier hs-type">lintTyLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyLit"><span class="hs-identifier hs-type">TyLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1788"></span><span id="lintTyLit"><span class="annot"><span class="annottext">lintTyLit :: TyLit -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintTyLit"><span class="hs-identifier hs-var hs-var">lintTyLit</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#NumTyLit"><span class="hs-identifier hs-type">NumTyLit</span></a></span><span> </span><span id="local-6989586621681150464"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681150464"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1789"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681150464"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1790"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150463"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1791"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681150463"><span class="annot"><span class="annottext">msg :: SDoc
</span><a href="#local-6989586621681150463"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Negative type literal:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#integer"><span class="hs-identifier hs-var">integer</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681150464"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1792"></span><span class="annot"><a href="GHC.Core.Lint.html#lintTyLit"><span class="hs-identifier hs-var">lintTyLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#StrTyLit"><span class="hs-identifier hs-type">StrTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1793"></span><span class="annot"><a href="GHC.Core.Lint.html#lintTyLit"><span class="hs-identifier hs-var">lintTyLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CharTyLit"><span class="hs-identifier hs-type">CharTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1794"></span><span>
</span><span id="line-1795"></span><span class="annot"><a href="GHC.Core.Lint.html#lint_app"><span class="hs-identifier hs-type">lint_app</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedKind"><span class="hs-identifier hs-type">LintedKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1796"></span><span class="hs-comment">-- (lint_app d fun_kind arg_tys)</span><span>
</span><span id="line-1797"></span><span class="hs-comment">--    We have an application (f arg_ty1 .. arg_tyn),</span><span>
</span><span id="line-1798"></span><span class="hs-comment">--    where f :: fun_kind</span><span>
</span><span id="line-1799"></span><span>
</span><span id="line-1800"></span><span class="hs-comment">-- If you edit this function, you may need to update the GHC formalism</span><span>
</span><span id="line-1801"></span><span class="hs-comment">-- See Note [GHC Formalism]</span><span>
</span><span id="line-1802"></span><span id="lint_app"><span class="annot"><span class="annottext">lint_app :: SDoc -&gt; LintedType -&gt; [LintedType] -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_app"><span class="hs-identifier hs-var hs-var">lint_app</span></a></span></span><span> </span><span id="local-6989586621681150459"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150459"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681150458"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150458"><span class="hs-identifier hs-var">kfn</span></a></span></span><span> </span><span id="local-6989586621681150457"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150457"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span>
</span><span id="line-1803"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150456"><span class="annot"><span class="annottext">InScopeSet
</span><a href="#local-6989586621681150456"><span class="hs-identifier hs-var">in_scope</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM InScopeSet
</span><a href="GHC.Core.Lint.html#getInScope"><span class="hs-identifier hs-var">getInScope</span></a></span><span>
</span><span id="line-1804"></span><span>         </span><span class="hs-comment">-- We need the in_scope set to satisfy the invariant in</span><span>
</span><span id="line-1805"></span><span>         </span><span class="hs-comment">-- Note [The substitution invariant] in GHC.Core.TyCo.Subst</span><span>
</span><span id="line-1806"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#foldlM"><span class="hs-identifier hs-var">foldlM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InScopeSet -&gt; LintedType -&gt; LintedType -&gt; LintM LintedType
</span><a href="#local-6989586621681150454"><span class="hs-identifier hs-var">go_app</span></a></span><span> </span><span class="annot"><span class="annottext">InScopeSet
</span><a href="#local-6989586621681150456"><span class="hs-identifier hs-var">in_scope</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150458"><span class="hs-identifier hs-var">kfn</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150457"><span class="hs-identifier hs-var">arg_tys</span></a></span><span>
</span><span id="line-1807"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1808"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1809"></span><span>    </span><span id="local-6989586621681150453"><span class="annot"><span class="annottext">fail_msg :: SDoc -&gt; SDoc
</span><a href="#local-6989586621681150453"><span class="hs-identifier hs-var hs-var">fail_msg</span></a></span></span><span> </span><span id="local-6989586621681150452"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150452"><span class="hs-identifier hs-var">extra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Kind application error in&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150459"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-1810"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Function kind =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150458"><span class="hs-identifier hs-var">kfn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1811"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Arg types =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150457"><span class="hs-identifier hs-var">arg_tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1812"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150452"><span class="hs-identifier hs-var">extra</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1813"></span><span>
</span><span id="line-1814"></span><span>    </span><span id="local-6989586621681150454"><span class="annot"><span class="annottext">go_app :: InScopeSet -&gt; LintedType -&gt; LintedType -&gt; LintM LintedType
</span><a href="#local-6989586621681150454"><span class="hs-identifier hs-var hs-var">go_app</span></a></span></span><span> </span><span id="local-6989586621681150451"><span class="annot"><span class="annottext">InScopeSet
</span><a href="#local-6989586621681150451"><span class="hs-identifier hs-var">in_scope</span></a></span></span><span> </span><span id="local-6989586621681150450"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150450"><span class="hs-identifier hs-var">kfn</span></a></span></span><span> </span><span id="local-6989586621681150449"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150449"><span class="hs-identifier hs-var">ta</span></a></span></span><span>
</span><span id="line-1815"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681150448"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150448"><span class="hs-identifier hs-var">kfn'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Maybe LintedType
</span><a href="GHC.Core.Type.html#coreView"><span class="hs-identifier hs-var">coreView</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150450"><span class="hs-identifier hs-var">kfn</span></a></span><span>
</span><span id="line-1816"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InScopeSet -&gt; LintedType -&gt; LintedType -&gt; LintM LintedType
</span><a href="#local-6989586621681150454"><span class="hs-identifier hs-var">go_app</span></a></span><span> </span><span class="annot"><span class="annottext">InScopeSet
</span><a href="#local-6989586621681150451"><span class="hs-identifier hs-var">in_scope</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150448"><span class="hs-identifier hs-var">kfn'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150449"><span class="hs-identifier hs-var">ta</span></a></span><span>
</span><span id="line-1817"></span><span>
</span><span id="line-1818"></span><span>    </span><span class="annot"><a href="#local-6989586621681150454"><span class="hs-identifier hs-var">go_app</span></a></span><span> </span><span class="annot"><span class="annottext">InScopeSet
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681150446"><span class="annot"><span class="annottext">fun_kind :: LintedType
</span><a href="#local-6989586621681150446"><span class="hs-identifier hs-var">fun_kind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">AnonArgFlag
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681150445"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150445"><span class="hs-identifier hs-var">kfa</span></a></span></span><span> </span><span id="local-6989586621681150444"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150444"><span class="hs-identifier hs-var">kfb</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681150443"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150443"><span class="hs-identifier hs-var">ta</span></a></span></span><span>
</span><span id="line-1819"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150442"><span class="annot"><span class="annottext">ka :: LintedType
</span><a href="#local-6989586621681150442"><span class="hs-identifier hs-var hs-var">ka</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150443"><span class="hs-identifier hs-var">ta</span></a></span><span>
</span><span id="line-1820"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150442"><span class="hs-identifier hs-var">ka</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150445"><span class="hs-identifier hs-var">kfa</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1821"></span><span>             </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var">addErrL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="#local-6989586621681150453"><span class="hs-identifier hs-var">fail_msg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Fun:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150446"><span class="hs-identifier hs-var">fun_kind</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150443"><span class="hs-identifier hs-var">ta</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150442"><span class="hs-identifier hs-var">ka</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1822"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150444"><span class="hs-identifier hs-var">kfb</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1823"></span><span>
</span><span id="line-1824"></span><span>    </span><span class="annot"><a href="#local-6989586621681150454"><span class="hs-identifier hs-var">go_app</span></a></span><span> </span><span id="local-6989586621681150441"><span class="annot"><span class="annottext">InScopeSet
</span><a href="#local-6989586621681150441"><span class="hs-identifier hs-var">in_scope</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621681150440"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150440"><span class="hs-identifier hs-var">kv</span></a></span></span><span> </span><span id="local-6989586621681150439"><span class="annot"><span class="annottext">ArgFlag
</span><a href="#local-6989586621681150439"><span class="hs-identifier hs-var">_vis</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681150438"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150438"><span class="hs-identifier hs-var">kfn</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681150437"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150437"><span class="hs-identifier hs-var">ta</span></a></span></span><span>
</span><span id="line-1825"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150436"><span class="annot"><span class="annottext">kv_kind :: LintedType
</span><a href="#local-6989586621681150436"><span class="hs-identifier hs-var hs-var">kv_kind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150440"><span class="hs-identifier hs-var">kv</span></a></span><span>
</span><span id="line-1826"></span><span>                 </span><span id="local-6989586621681150435"><span class="annot"><span class="annottext">ka :: LintedType
</span><a href="#local-6989586621681150435"><span class="hs-identifier hs-var hs-var">ka</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150437"><span class="hs-identifier hs-var">ta</span></a></span><span>
</span><span id="line-1827"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150435"><span class="hs-identifier hs-var">ka</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150436"><span class="hs-identifier hs-var">kv_kind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1828"></span><span>             </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var">addErrL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="#local-6989586621681150453"><span class="hs-identifier hs-var">fail_msg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Forall:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150440"><span class="hs-identifier hs-var">kv</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150436"><span class="hs-identifier hs-var">kv_kind</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1829"></span><span>                                                    </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150437"><span class="hs-identifier hs-var">ta</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150435"><span class="hs-identifier hs-var">ka</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1830"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TCvSubst -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.TyCo.Subst.html#substTy"><span class="hs-identifier hs-var">substTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCvSubst -&gt; Var -&gt; LintedType -&gt; TCvSubst
</span><a href="GHC.Core.TyCo.Subst.html#extendTCvSubst"><span class="hs-identifier hs-var">extendTCvSubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InScopeSet -&gt; TCvSubst
</span><a href="GHC.Core.TyCo.Subst.html#mkEmptyTCvSubst"><span class="hs-identifier hs-var">mkEmptyTCvSubst</span></a></span><span> </span><span class="annot"><span class="annottext">InScopeSet
</span><a href="#local-6989586621681150441"><span class="hs-identifier hs-var">in_scope</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150440"><span class="hs-identifier hs-var">kv</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150437"><span class="hs-identifier hs-var">ta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150438"><span class="hs-identifier hs-var">kfn</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1831"></span><span>
</span><span id="line-1832"></span><span>    </span><span class="annot"><a href="#local-6989586621681150454"><span class="hs-identifier hs-var">go_app</span></a></span><span> </span><span class="annot"><span class="annottext">InScopeSet
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681150432"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150432"><span class="hs-identifier hs-var">kfn</span></a></span></span><span> </span><span id="local-6989586621681150431"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150431"><span class="hs-identifier hs-var">ta</span></a></span></span><span>
</span><span id="line-1833"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="#local-6989586621681150453"><span class="hs-identifier hs-var">fail_msg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Not a fun:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150432"><span class="hs-identifier hs-var">kfn</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150431"><span class="hs-identifier hs-var">ta</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1834"></span><span>
</span><span id="line-1835"></span><span class="hs-comment">{- *********************************************************************
*                                                                      *
        Linting rules
*                                                                      *
********************************************************************* -}</span><span>
</span><span id="line-1840"></span><span>
</span><span id="line-1841"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreRule"><span class="hs-identifier hs-type">lintCoreRule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#OutVar"><span class="hs-identifier hs-type">OutVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1842"></span><span id="lintCoreRule"><span class="annot"><span class="annottext">lintCoreRule :: Var -&gt; LintedType -&gt; CoreRule -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintCoreRule"><span class="hs-identifier hs-var hs-var">lintCoreRule</span></a></span></span><span> </span><span class="annot"><span class="annottext">Var
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#BuiltinRule"><span class="hs-identifier hs-type">BuiltinRule</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1843"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- Don't bother</span><span>
</span><span id="line-1844"></span><span>
</span><span id="line-1845"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoreRule"><span class="hs-identifier hs-var">lintCoreRule</span></a></span><span> </span><span id="local-6989586621681150429"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150429"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621681150428"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150428"><span class="hs-identifier hs-var">fun_ty</span></a></span></span><span> </span><span id="local-6989586621681150427"><span class="annot"><span class="annottext">rule :: CoreRule
</span><a href="#local-6989586621681150427"><span class="hs-identifier hs-var">rule</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Rule"><span class="hs-identifier hs-type">Rule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ru_name :: CoreRule -&gt; FastString
</span><a href="GHC.Core.html#ru_name"><span class="hs-identifier hs-var">ru_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150424"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681150424"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ru_bndrs :: CoreRule -&gt; [Var]
</span><a href="GHC.Core.html#ru_bndrs"><span class="hs-identifier hs-var">ru_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150422"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150422"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span>
</span><span id="line-1846"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ru_args :: CoreRule -&gt; [CoreExpr]
</span><a href="GHC.Core.html#ru_args"><span class="hs-identifier hs-var">ru_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150420"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681150420"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ru_rhs :: CoreRule -&gt; CoreExpr
</span><a href="GHC.Core.html#ru_rhs"><span class="hs-identifier hs-var">ru_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150418"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150418"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1847"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. BindingSite -&gt; [Var] -&gt; ([Var] -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintBinders"><span class="hs-identifier hs-var">lintBinders</span></a></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="GHC.Utils.Outputable.html#LambdaBind"><span class="hs-identifier hs-var">LambdaBind</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150422"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">[Var]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1848"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150417"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150417"><span class="hs-identifier hs-var">lhs_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LintedType, UsageEnv)
-&gt; [CoreExpr] -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreArgs"><span class="hs-identifier hs-var">lintCoreArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150428"><span class="hs-identifier hs-var">fun_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="GHC.Core.UsageEnv.html#zeroUE"><span class="hs-identifier hs-var">zeroUE</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681150420"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1849"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150416"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150416"><span class="hs-identifier hs-var">rhs_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Maybe JoinArity
</span><a href="GHC.Types.Id.html#isJoinId_maybe"><span class="hs-identifier hs-var">isJoinId_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150429"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1850"></span><span>                     </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681150415"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150415"><span class="hs-identifier hs-var">join_arity</span></a></span></span><span>
</span><span id="line-1851"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681150420"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; JoinArity -&gt; Bool
</span><a href="GHC.Utils.Misc.html#lengthIs"><span class="hs-operator hs-var">`lengthIs`</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150415"><span class="hs-identifier hs-var">join_arity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1852"></span><span>                                </span><span class="annot"><span class="annottext">Var -&gt; JoinArity -&gt; CoreRule -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadJoinPointRuleMsg"><span class="hs-identifier hs-var">mkBadJoinPointRuleMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150429"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150415"><span class="hs-identifier hs-var">join_arity</span></a></span><span> </span><span class="annot"><span class="annottext">CoreRule
</span><a href="#local-6989586621681150427"><span class="hs-identifier hs-var">rule</span></a></span><span>
</span><span id="line-1853"></span><span>                               </span><span class="hs-comment">-- See Note [Rules for join points]</span><span>
</span><span id="line-1854"></span><span>                             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150418"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1855"></span><span>                     </span><span class="annot"><span class="annottext">Maybe JoinArity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#markAllJoinsBad"><span class="hs-identifier hs-var">markAllJoinsBad</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; LintM (LintedType, UsageEnv)
</span><a href="GHC.Core.Lint.html#lintCoreExpr"><span class="hs-identifier hs-var">lintCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150418"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1856"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150417"><span class="hs-identifier hs-var">lhs_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150416"><span class="hs-identifier hs-var">rhs_ty</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1857"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150413"><span class="hs-identifier hs-var">rule_doc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lhs type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150417"><span class="hs-identifier hs-var">lhs_ty</span></a></span><span>
</span><span id="line-1858"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rhs type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150416"><span class="hs-identifier hs-var">rhs_ty</span></a></span><span>
</span><span id="line-1859"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fun_ty:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150428"><span class="hs-identifier hs-var">fun_ty</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1860"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150412"><span class="annot"><span class="annottext">bad_bndrs :: [Var]
</span><a href="#local-6989586621681150412"><span class="hs-identifier hs-var hs-var">bad_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="#local-6989586621681150411"><span class="hs-identifier hs-var">is_bad_bndr</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150422"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-1861"></span><span>
</span><span id="line-1862"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150412"><span class="hs-identifier hs-var">bad_bndrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1863"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150413"><span class="hs-identifier hs-var">rule_doc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unbound&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150412"><span class="hs-identifier hs-var">bad_bndrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1864"></span><span>            </span><span class="hs-comment">-- See Note [Linting rules]</span><span>
</span><span id="line-1865"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1866"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1867"></span><span>    </span><span id="local-6989586621681150413"><span class="annot"><span class="annottext">rule_doc :: SDoc
</span><a href="#local-6989586621681150413"><span class="hs-identifier hs-var hs-var">rule_doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Rule&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#doubleQuotes"><span class="hs-identifier hs-var">doubleQuotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ftext"><span class="hs-identifier hs-var">ftext</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681150424"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span>
</span><span id="line-1868"></span><span>
</span><span id="line-1869"></span><span>    </span><span id="local-6989586621681150408"><span class="annot"><span class="annottext">lhs_fvs :: IdSet
</span><a href="#local-6989586621681150408"><span class="hs-identifier hs-var hs-var">lhs_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoreExpr] -&gt; IdSet
</span><a href="GHC.Core.FVs.html#exprsFreeVars"><span class="hs-identifier hs-var">exprsFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681150420"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1870"></span><span>    </span><span id="local-6989586621681150406"><span class="annot"><span class="annottext">rhs_fvs :: IdSet
</span><a href="#local-6989586621681150406"><span class="hs-identifier hs-var hs-var">rhs_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; IdSet
</span><a href="GHC.Core.FVs.html#exprFreeVars"><span class="hs-identifier hs-var">exprFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681150418"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1871"></span><span>
</span><span id="line-1872"></span><span>    </span><span class="annot"><a href="#local-6989586621681150411"><span class="hs-identifier hs-type">is_bad_bndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1873"></span><span>    </span><span class="hs-comment">-- See Note [Unbound RULE binders] in GHC.Core.Rules</span><span>
</span><span id="line-1874"></span><span>    </span><span id="local-6989586621681150411"><span class="annot"><span class="annottext">is_bad_bndr :: Var -&gt; Bool
</span><a href="#local-6989586621681150411"><span class="hs-identifier hs-var hs-var">is_bad_bndr</span></a></span></span><span> </span><span id="local-6989586621681150404"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150404"><span class="hs-identifier hs-var">bndr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150404"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; IdSet -&gt; Bool
</span><a href="GHC.Types.Var.Set.html#elemVarSet"><span class="hs-operator hs-var">`elemVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">IdSet
</span><a href="#local-6989586621681150408"><span class="hs-identifier hs-var">lhs_fvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1875"></span><span>                    </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150404"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; IdSet -&gt; Bool
</span><a href="GHC.Types.Var.Set.html#elemVarSet"><span class="hs-operator hs-var">`elemVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">IdSet
</span><a href="#local-6989586621681150406"><span class="hs-identifier hs-var">rhs_fvs</span></a></span><span>
</span><span id="line-1876"></span><span>                    </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#isNothing"><span class="hs-identifier hs-var">isNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Maybe Coercion
</span><a href="GHC.Core.Coercion.html#isReflCoVar_maybe"><span class="hs-identifier hs-var">isReflCoVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150404"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1877"></span><span>
</span><span id="line-1878"></span><span>
</span><span id="line-1879"></span><span class="hs-comment">{- Note [Linting rules]
~~~~~~~~~~~~~~~~~~~~~~~
It's very bad if simplifying a rule means that one of the template
variables (ru_bndrs) that /is/ mentioned on the RHS becomes
not-mentioned in the LHS (ru_args).  How can that happen?  Well, in #10602,
SpecConstr stupidly constructed a rule like

  forall x,c1,c2.
     f (x |&gt; c1 |&gt; c2) = ....

But simplExpr collapses those coercions into one.  (Indeed in #10602,
it collapsed to the identity and was removed altogether.)

We don't have a great story for what to do here, but at least
this check will nail it.

NB (#11643): it's possible that a variable listed in the
binders becomes not-mentioned on both LHS and RHS.  Here's a silly
example:
   RULE forall x y. f (g x y) = g (x+1) (y-1)
And suppose worker/wrapper decides that 'x' is Absent.  Then
we'll end up with
   RULE forall x y. f ($gw y) = $gw (x+1)
This seems sufficiently obscure that there isn't enough payoff to
try to trim the forall'd binder list.

Note [Rules for join points]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

A join point cannot be partially applied. However, the left-hand side of a rule
for a join point is effectively a *pattern*, not a piece of code, so there's an
argument to be made for allowing a situation like this:

  join $sj :: Int -&gt; Int -&gt; String
       $sj n m = ...
       j :: forall a. Eq a =&gt; a -&gt; a -&gt; String
       {-# RULES &quot;SPEC j&quot; jump j @ Int $dEq = jump $sj #-}
       j @a $dEq x y = ...

Applying this rule can't turn a well-typed program into an ill-typed one, so
conceivably we could allow it. But we can always eta-expand such an
&quot;undersaturated&quot; rule (see 'GHC.Core.Opt.Arity.etaExpandToJoinPointRule'), and in fact
the simplifier would have to in order to deal with the RHS. So we take a
conservative view and don't allow undersaturated rules for join points. See
Note [Rules and join points] in &quot;GHC.Core.Opt.OccurAnal&quot; for further discussion.
-}</span><span>
</span><span id="line-1925"></span><span>
</span><span id="line-1926"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
         Linting coercions
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1933"></span><span>
</span><span id="line-1934"></span><span class="hs-comment">{- Note [Asymptotic efficiency]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When linting coercions (and types actually) we return a linted
(substituted) coercion.  Then we often have to take the coercionKind of
that returned coercion. If we get long chains, that can be asymptotically
inefficient, notably in
* TransCo
* InstCo
* NthCo (cf #9233)
* LRCo

But the code is simple.  And this is only Lint.  Let's wait to see if
the bad perf bites us in practice.

A solution would be to return the kind and role of the coercion,
as well as the linted coercion.  Or perhaps even *only* the kind and role,
which is what used to happen.   But that proved tricky and error prone
(#17923), so now we return the coercion.
-}</span><span>
</span><span id="line-1953"></span><span>
</span><span id="line-1954"></span><span>
</span><span id="line-1955"></span><span class="hs-comment">-- lints a coercion, confirming that its lh kind and its rh kind are both *</span><span>
</span><span id="line-1956"></span><span class="hs-comment">-- also ensures that the role is Nominal</span><span>
</span><span id="line-1957"></span><span class="annot"><a href="GHC.Core.Lint.html#lintStarCoercion"><span class="hs-identifier hs-type">lintStarCoercion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#InCoercion"><span class="hs-identifier hs-type">InCoercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedCoercion"><span class="hs-identifier hs-type">LintedCoercion</span></a></span><span>
</span><span id="line-1958"></span><span id="lintStarCoercion"><span class="annot"><span class="annottext">lintStarCoercion :: Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintStarCoercion"><span class="hs-identifier hs-var hs-var">lintStarCoercion</span></a></span></span><span> </span><span id="local-6989586621681150400"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150400"><span class="hs-identifier hs-var">g</span></a></span></span><span>
</span><span id="line-1959"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150399"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150399"><span class="hs-identifier hs-var">g'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150400"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-1960"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="GHC.Data.Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621681150398"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150398"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681150397"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150397"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Pair LintedType
</span><a href="GHC.Core.Coercion.html#coercionKind"><span class="hs-identifier hs-var">coercionKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150399"><span class="hs-identifier hs-var">g'</span></a></span><span>
</span><span id="line-1961"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkValueType"><span class="hs-identifier hs-var">checkValueType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150398"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;the kind of the left type in&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150400"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1962"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkValueType"><span class="hs-identifier hs-var">checkValueType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150397"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;the kind of the right type in&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150400"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1963"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150400"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150400"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1964"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150399"><span class="hs-identifier hs-var">g'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1965"></span><span>
</span><span id="line-1966"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-type">lintCoercion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#InCoercion"><span class="hs-identifier hs-type">InCoercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedCoercion"><span class="hs-identifier hs-type">LintedCoercion</span></a></span><span>
</span><span id="line-1967"></span><span class="hs-comment">-- If you edit this function, you may need to update the GHC formalism</span><span>
</span><span id="line-1968"></span><span class="hs-comment">-- See Note [GHC Formalism]</span><span>
</span><span id="line-1969"></span><span>
</span><span id="line-1970"></span><span id="lintCoercion"><span class="annot"><span class="annottext">lintCoercion :: Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var hs-var">lintCoercion</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoVarCo"><span class="hs-identifier hs-type">CoVarCo</span></a></span><span> </span><span id="local-6989586621681150392"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150392"><span class="hs-identifier hs-var">cv</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1971"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isCoVar"><span class="hs-identifier hs-var">isCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150392"><span class="hs-identifier hs-var">cv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1972"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Bad CoVarCo:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150392"><span class="hs-identifier hs-var">cv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1973"></span><span>                  </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;With offending type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150392"><span class="hs-identifier hs-var">cv</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1974"></span><span>
</span><span id="line-1975"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1976"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150391"><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150391"><span class="hs-identifier hs-var">subst</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM TCvSubst
</span><a href="GHC.Core.Lint.html#getTCvSubst"><span class="hs-identifier hs-var">getTCvSubst</span></a></span><span>
</span><span id="line-1977"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TCvSubst -&gt; Var -&gt; Maybe Coercion
</span><a href="GHC.Core.TyCo.Subst.html#lookupCoVar"><span class="hs-identifier hs-var">lookupCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150391"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150392"><span class="hs-identifier hs-var">cv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1978"></span><span>           </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681150389"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150389"><span class="hs-identifier hs-var">linted_co</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150389"><span class="hs-identifier hs-var">linted_co</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-1979"></span><span>           </span><span class="annot"><span class="annottext">Maybe Coercion
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1980"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150392"><span class="hs-identifier hs-var">cv</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; TCvSubst -&gt; Bool
</span><a href="GHC.Core.TyCo.Subst.html#isInScope"><span class="hs-operator hs-var">`isInScope`</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150391"><span class="hs-identifier hs-var">subst</span></a></span><span>
</span><span id="line-1981"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#CoVarCo"><span class="hs-identifier hs-var">CoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150392"><span class="hs-identifier hs-var">cv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1982"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1983"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1984"></span><span>                      </span><span class="hs-comment">-- lintCoBndr always extends the substitition</span><span>
</span><span id="line-1985"></span><span>                      </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1986"></span><span>                      </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The coercion variable&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. OutputableBndr a =&gt; BindingSite -&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprBndr"><span class="hs-identifier hs-var">pprBndr</span></a></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="GHC.Utils.Outputable.html#LetBind"><span class="hs-identifier hs-var">LetBind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150392"><span class="hs-identifier hs-var">cv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1987"></span><span>                         </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is out of scope&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1988"></span><span>     </span><span class="hs-special">}</span><span>
</span><span id="line-1989"></span><span>
</span><span id="line-1990"></span><span>
</span><span id="line-1991"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Refl"><span class="hs-identifier hs-type">Refl</span></a></span><span> </span><span id="local-6989586621681150387"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150387"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1992"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150386"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150386"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150387"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1993"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150386"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1994"></span><span>
</span><span id="line-1995"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#GRefl"><span class="hs-identifier hs-type">GRefl</span></a></span><span> </span><span id="local-6989586621681150384"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150384"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681150383"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150383"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">MCoercion
</span><a href="GHC.Core.TyCo.Rep.html#MRefl"><span class="hs-identifier hs-var">MRefl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1996"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150381"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150381"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150383"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1997"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role -&gt; LintedType -&gt; MCoercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#GRefl"><span class="hs-identifier hs-var">GRefl</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150384"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150381"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">MCoercion
</span><a href="GHC.Core.TyCo.Rep.html#MRefl"><span class="hs-identifier hs-var">MRefl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1998"></span><span>
</span><span id="line-1999"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#GRefl"><span class="hs-identifier hs-type">GRefl</span></a></span><span> </span><span id="local-6989586621681150380"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150380"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681150379"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150379"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCo"><span class="hs-identifier hs-type">MCo</span></a></span><span> </span><span id="local-6989586621681150377"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150377"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2000"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150376"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150376"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150379"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-2001"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150375"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150375"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150377"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-2002"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150374"><span class="annot"><span class="annottext">tk :: LintedType
</span><a href="#local-6989586621681150374"><span class="hs-identifier hs-var hs-var">tk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150376"><span class="hs-identifier hs-var">ty'</span></a></span><span>
</span><span id="line-2003"></span><span>             </span><span id="local-6989586621681150373"><span class="annot"><span class="annottext">tl :: LintedType
</span><a href="#local-6989586621681150373"><span class="hs-identifier hs-var hs-var">tl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintedType
</span><a href="GHC.Core.Coercion.html#coercionLKind"><span class="hs-identifier hs-var">coercionLKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150375"><span class="hs-identifier hs-var">co'</span></a></span><span>
</span><span id="line-2004"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150374"><span class="hs-identifier hs-var">tk</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150373"><span class="hs-identifier hs-var">tl</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2005"></span><span>         </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GRefl coercion kind mis-match:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150377"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2006"></span><span>            </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150376"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150374"><span class="hs-identifier hs-var">tk</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150373"><span class="hs-identifier hs-var">tl</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2007"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150375"><span class="hs-identifier hs-var">co'</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150375"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2008"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role -&gt; LintedType -&gt; MCoercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#GRefl"><span class="hs-identifier hs-var">GRefl</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150380"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150376"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; MCoercion
</span><a href="GHC.Core.TyCo.Rep.html#MCo"><span class="hs-identifier hs-var">MCo</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150375"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2009"></span><span>
</span><span id="line-2010"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span id="local-6989586621681150372"><span class="annot"><span class="annottext">co :: Coercion
</span><a href="#local-6989586621681150372"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConAppCo"><span class="hs-identifier hs-type">TyConAppCo</span></a></span><span> </span><span id="local-6989586621681150370"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150370"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681150369"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150369"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span id="local-6989586621681150368"><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150368"><span class="hs-identifier hs-var">cos</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2011"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150369"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Uniquable a =&gt; a -&gt; Unique -&gt; Bool
</span><a href="GHC.Types.Unique.html#hasKey"><span class="hs-operator hs-var">`hasKey`</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="GHC.Builtin.Names.html#funTyConKey"><span class="hs-identifier hs-var">funTyConKey</span></a></span><span>
</span><span id="line-2012"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681150366"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150366"><span class="hs-identifier hs-var">_w</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150365"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150365"><span class="hs-identifier hs-var">_rep1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681150364"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150364"><span class="hs-identifier hs-var">_rep2</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681150363"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150363"><span class="hs-identifier hs-var">_co1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681150362"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150362"><span class="hs-identifier hs-var">_co2</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150368"><span class="hs-identifier hs-var">cos</span></a></span><span>
</span><span id="line-2013"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Saturated TyConAppCo (-&gt;):&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150372"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2014"></span><span>    </span><span class="hs-comment">-- All saturated TyConAppCos should be FunCos</span><span>
</span><span id="line-2015"></span><span>
</span><span id="line-2016"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Maybe ([Var], LintedType)
</span><a href="GHC.Core.TyCon.html#synTyConDefn_maybe"><span class="hs-identifier hs-var">synTyConDefn_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150369"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-2017"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Synonym in TyConAppCo:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150372"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2018"></span><span>
</span><span id="line-2019"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2020"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkTyCon"><span class="hs-identifier hs-var">checkTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150369"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-2021"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150360"><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150360"><span class="hs-identifier hs-var">cos'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150368"><span class="hs-identifier hs-var">cos</span></a></span><span>
</span><span id="line-2022"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150359"><span class="annot"><span class="annottext">[Pair LintedType]
</span><a href="#local-6989586621681150359"><span class="hs-identifier hs-var">co_kinds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150358"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150358"><span class="hs-identifier hs-var">co_roles</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. [(a, b)] -&gt; ([a], [b])
</span><a href="../../base-4.16.3.0/src/GHC-List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; (Pair LintedType, Role)
</span><a href="GHC.Core.Coercion.html#coercionKindRole"><span class="hs-identifier hs-var">coercionKindRole</span></a></span><span> </span><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150360"><span class="hs-identifier hs-var">cos'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2023"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintedType -&gt; [LintedType] -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_co_app"><span class="hs-identifier hs-var">lint_co_app</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150372"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; LintedType
</span><a href="GHC.Core.TyCon.html#tyConKind"><span class="hs-identifier hs-var">tyConKind</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150369"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pair a -&gt; a
</span><a href="GHC.Data.Pair.html#pFst"><span class="hs-identifier hs-var">pFst</span></a></span><span> </span><span class="annot"><span class="annottext">[Pair LintedType]
</span><a href="#local-6989586621681150359"><span class="hs-identifier hs-var">co_kinds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2024"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintedType -&gt; [LintedType] -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_co_app"><span class="hs-identifier hs-var">lint_co_app</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150372"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; LintedType
</span><a href="GHC.Core.TyCon.html#tyConKind"><span class="hs-identifier hs-var">tyConKind</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150369"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Pair a -&gt; a
</span><a href="GHC.Data.Pair.html#pSnd"><span class="hs-identifier hs-var">pSnd</span></a></span><span> </span><span class="annot"><span class="annottext">[Pair LintedType]
</span><a href="#local-6989586621681150359"><span class="hs-identifier hs-var">co_kinds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2025"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; m c) -&gt; [a] -&gt; [b] -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#zipWithM_"><span class="hs-identifier hs-var">zipWithM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150372"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role -&gt; TyCon -&gt; [Role]
</span><a href="GHC.Core.Coercion.html#tyConRolesX"><span class="hs-identifier hs-var">tyConRolesX</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150370"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150369"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150358"><span class="hs-identifier hs-var">co_roles</span></a></span><span>
</span><span id="line-2026"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role -&gt; TyCon -&gt; [Coercion] -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#TyConAppCo"><span class="hs-identifier hs-var">TyConAppCo</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150370"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150369"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150360"><span class="hs-identifier hs-var">cos'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2027"></span><span>
</span><span id="line-2028"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span id="local-6989586621681150353"><span class="annot"><span class="annottext">co :: Coercion
</span><a href="#local-6989586621681150353"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppCo"><span class="hs-identifier hs-type">AppCo</span></a></span><span> </span><span id="local-6989586621681150351"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150351"><span class="hs-identifier hs-var">co1</span></a></span></span><span> </span><span id="local-6989586621681150350"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150350"><span class="hs-identifier hs-var">co2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2029"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConAppCo"><span class="hs-identifier hs-type">TyConAppCo</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150351"><span class="hs-identifier hs-var">co1</span></a></span><span>
</span><span id="line-2030"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TyConAppCo to the left of AppCo:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150353"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2031"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Role
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Maybe (LintedType, Role)
</span><a href="GHC.Core.Coercion.html#isReflCo_maybe"><span class="hs-identifier hs-var">isReflCo_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150351"><span class="hs-identifier hs-var">co1</span></a></span><span>
</span><span id="line-2032"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Refl (TyConApp ...) to the left of AppCo:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150353"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2033"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2034"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150348"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150348"><span class="hs-identifier hs-var">co1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150351"><span class="hs-identifier hs-var">co1</span></a></span><span>
</span><span id="line-2035"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150347"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150347"><span class="hs-identifier hs-var">co2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150350"><span class="hs-identifier hs-var">co2</span></a></span><span>
</span><span id="line-2036"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621681150346"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150346"><span class="hs-identifier hs-var">lk1</span></a></span></span><span> </span><span id="local-6989586621681150345"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150345"><span class="hs-identifier hs-var">rk1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150344"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150344"><span class="hs-identifier hs-var">r1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; (Pair LintedType, Role)
</span><a href="GHC.Core.Coercion.html#coercionKindRole"><span class="hs-identifier hs-var">coercionKindRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150348"><span class="hs-identifier hs-var">co1'</span></a></span><span>
</span><span id="line-2037"></span><span>             </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621681150343"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150343"><span class="hs-identifier hs-var">lk2</span></a></span></span><span> </span><span id="local-6989586621681150342"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150342"><span class="hs-identifier hs-var">rk2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150341"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150341"><span class="hs-identifier hs-var">r2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; (Pair LintedType, Role)
</span><a href="GHC.Core.Coercion.html#coercionKindRole"><span class="hs-identifier hs-var">coercionKindRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150347"><span class="hs-identifier hs-var">co2'</span></a></span><span>
</span><span id="line-2038"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintedType -&gt; [LintedType] -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_co_app"><span class="hs-identifier hs-var">lint_co_app</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150353"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150346"><span class="hs-identifier hs-var">lk1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150343"><span class="hs-identifier hs-var">lk2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2039"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintedType -&gt; [LintedType] -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_co_app"><span class="hs-identifier hs-var">lint_co_app</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150353"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150345"><span class="hs-identifier hs-var">rk1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150342"><span class="hs-identifier hs-var">rk2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2040"></span><span>
</span><span id="line-2041"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150344"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Phantom"><span class="hs-identifier hs-var">Phantom</span></a></span><span>
</span><span id="line-2042"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150341"><span class="hs-identifier hs-var">r2</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Phantom"><span class="hs-identifier hs-var">Phantom</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150341"><span class="hs-identifier hs-var">r2</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2043"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Second argument in AppCo cannot be R:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-2044"></span><span>                      </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150353"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2045"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150353"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150341"><span class="hs-identifier hs-var">r2</span></a></span><span>
</span><span id="line-2046"></span><span>
</span><span id="line-2047"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#AppCo"><span class="hs-identifier hs-var">AppCo</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150348"><span class="hs-identifier hs-var">co1'</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150347"><span class="hs-identifier hs-var">co2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2048"></span><span>
</span><span id="line-2049"></span><span class="hs-comment">----------</span><span>
</span><span id="line-2050"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span id="local-6989586621681150339"><span class="annot"><span class="annottext">co :: Coercion
</span><a href="#local-6989586621681150339"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllCo"><span class="hs-identifier hs-type">ForAllCo</span></a></span><span> </span><span id="local-6989586621681150337"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150337"><span class="hs-identifier hs-var">tcv</span></a></span></span><span> </span><span id="local-6989586621681150336"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150336"><span class="hs-identifier hs-var">kind_co</span></a></span></span><span> </span><span id="local-6989586621681150335"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150335"><span class="hs-identifier hs-var">body_co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2051"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyCoVar"><span class="hs-identifier hs-var">isTyCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150337"><span class="hs-identifier hs-var">tcv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2052"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Non tyco binder in ForAllCo:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150339"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2053"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2054"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150334"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150334"><span class="hs-identifier hs-var">kind_co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintStarCoercion"><span class="hs-identifier hs-var">lintStarCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150336"><span class="hs-identifier hs-var">kind_co</span></a></span><span>
</span><span id="line-2055"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. Var -&gt; (Var -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintTyCoBndr"><span class="hs-identifier hs-var">lintTyCoBndr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150337"><span class="hs-identifier hs-var">tcv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681150333"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150333"><span class="hs-identifier hs-var">tcv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2056"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150332"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150332"><span class="hs-identifier hs-var">body_co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150335"><span class="hs-identifier hs-var">body_co</span></a></span><span>
</span><span id="line-2057"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150333"><span class="hs-identifier hs-var">tcv'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; LintedType
</span><a href="GHC.Core.Coercion.html#coercionLKind"><span class="hs-identifier hs-var">coercionLKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150334"><span class="hs-identifier hs-var">kind_co'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2058"></span><span>         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Kind mis-match in ForallCo&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150339"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-2059"></span><span>
</span><span id="line-2060"></span><span>       </span><span class="hs-comment">-- Assuming kind_co :: k1 ~ k2</span><span>
</span><span id="line-2061"></span><span>       </span><span class="hs-comment">-- Need to check that</span><span>
</span><span id="line-2062"></span><span>       </span><span class="hs-comment">--    (forall (tcv:k1). lty) and</span><span>
</span><span id="line-2063"></span><span>       </span><span class="hs-comment">--    (forall (tcv:k2). rty[(tcv:k2) |&gt; sym kind_co/tcv])</span><span>
</span><span id="line-2064"></span><span>       </span><span class="hs-comment">-- are both well formed.  Easiest way is to call lintForAllBody</span><span>
</span><span id="line-2065"></span><span>       </span><span class="hs-comment">-- for each; there is actually no need to do the funky substitution</span><span>
</span><span id="line-2066"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="GHC.Data.Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621681150331"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150331"><span class="hs-identifier hs-var">lty</span></a></span></span><span> </span><span id="local-6989586621681150330"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150330"><span class="hs-identifier hs-var">rty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Pair LintedType
</span><a href="GHC.Core.Coercion.html#coercionKind"><span class="hs-identifier hs-var">coercionKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150332"><span class="hs-identifier hs-var">body_co'</span></a></span><span>
</span><span id="line-2067"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintForAllBody"><span class="hs-identifier hs-var">lintForAllBody</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150333"><span class="hs-identifier hs-var">tcv'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150331"><span class="hs-identifier hs-var">lty</span></a></span><span>
</span><span id="line-2068"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintForAllBody"><span class="hs-identifier hs-var">lintForAllBody</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150333"><span class="hs-identifier hs-var">tcv'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150330"><span class="hs-identifier hs-var">rty</span></a></span><span>
</span><span id="line-2069"></span><span>
</span><span id="line-2070"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isCoVar"><span class="hs-identifier hs-var">isCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150337"><span class="hs-identifier hs-var">tcv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2071"></span><span>         </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Coercion -&gt; Bool
</span><a href="GHC.Core.TyCo.FVs.html#almostDevoidCoVarOfCo"><span class="hs-identifier hs-var">almostDevoidCoVarOfCo</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150337"><span class="hs-identifier hs-var">tcv</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150335"><span class="hs-identifier hs-var">body_co</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2072"></span><span>         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Covar can only appear in Refl and GRefl: &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150339"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-2073"></span><span>         </span><span class="hs-comment">-- See &quot;last wrinkle&quot; in GHC.Core.Coercion</span><span>
</span><span id="line-2074"></span><span>         </span><span class="hs-comment">-- Note [Unused coercion variable in ForAllCo]</span><span>
</span><span id="line-2075"></span><span>         </span><span class="hs-comment">-- and c.f. GHC.Core.TyCo.Rep Note [Unused coercion variable in ForAllTy]</span><span>
</span><span id="line-2076"></span><span>
</span><span id="line-2077"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Coercion -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#ForAllCo"><span class="hs-identifier hs-var">ForAllCo</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150333"><span class="hs-identifier hs-var">tcv'</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150334"><span class="hs-identifier hs-var">kind_co'</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150332"><span class="hs-identifier hs-var">body_co'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2078"></span><span>
</span><span id="line-2079"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span id="local-6989586621681150328"><span class="annot"><span class="annottext">co :: Coercion
</span><a href="#local-6989586621681150328"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunCo"><span class="hs-identifier hs-type">FunCo</span></a></span><span> </span><span id="local-6989586621681150326"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150326"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681150325"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150325"><span class="hs-identifier hs-var">cow</span></a></span></span><span> </span><span id="local-6989586621681150324"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150324"><span class="hs-identifier hs-var">co1</span></a></span></span><span> </span><span id="local-6989586621681150323"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150323"><span class="hs-identifier hs-var">co2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2080"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150322"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150322"><span class="hs-identifier hs-var">co1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150324"><span class="hs-identifier hs-var">co1</span></a></span><span>
</span><span id="line-2081"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150321"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150321"><span class="hs-identifier hs-var">co2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150323"><span class="hs-identifier hs-var">co2</span></a></span><span>
</span><span id="line-2082"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150320"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150320"><span class="hs-identifier hs-var">cow'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150325"><span class="hs-identifier hs-var">cow</span></a></span><span>
</span><span id="line-2083"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="GHC.Data.Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621681150319"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150319"><span class="hs-identifier hs-var">lt1</span></a></span></span><span> </span><span id="local-6989586621681150318"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150318"><span class="hs-identifier hs-var">rt1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Pair LintedType
</span><a href="GHC.Core.Coercion.html#coercionKind"><span class="hs-identifier hs-var">coercionKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150324"><span class="hs-identifier hs-var">co1</span></a></span><span>
</span><span id="line-2084"></span><span>             </span><span class="annot"><a href="GHC.Data.Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621681150317"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150317"><span class="hs-identifier hs-var">lt2</span></a></span></span><span> </span><span id="local-6989586621681150316"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150316"><span class="hs-identifier hs-var">rt2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Pair LintedType
</span><a href="GHC.Core.Coercion.html#coercionKind"><span class="hs-identifier hs-var">coercionKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150323"><span class="hs-identifier hs-var">co2</span></a></span><span>
</span><span id="line-2085"></span><span>             </span><span class="annot"><a href="GHC.Data.Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621681150315"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150315"><span class="hs-identifier hs-var">ltw</span></a></span></span><span> </span><span id="local-6989586621681150314"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150314"><span class="hs-identifier hs-var">rtw</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Pair LintedType
</span><a href="GHC.Core.Coercion.html#coercionKind"><span class="hs-identifier hs-var">coercionKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150325"><span class="hs-identifier hs-var">cow</span></a></span><span>
</span><span id="line-2086"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintedType -&gt; LintedType -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintArrow"><span class="hs-identifier hs-var">lintArrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;coercion&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150328"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150319"><span class="hs-identifier hs-var">lt1</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150317"><span class="hs-identifier hs-var">lt2</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150315"><span class="hs-identifier hs-var">ltw</span></a></span><span>
</span><span id="line-2087"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintedType -&gt; LintedType -&gt; LintedType -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintArrow"><span class="hs-identifier hs-var">lintArrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;coercion&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150328"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150318"><span class="hs-identifier hs-var">rt1</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150316"><span class="hs-identifier hs-var">rt2</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150314"><span class="hs-identifier hs-var">rtw</span></a></span><span>
</span><span id="line-2088"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150324"><span class="hs-identifier hs-var">co1</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150326"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150324"><span class="hs-identifier hs-var">co1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2089"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150323"><span class="hs-identifier hs-var">co2</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150326"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150323"><span class="hs-identifier hs-var">co2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2090"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150315"><span class="hs-identifier hs-var">ltw</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="GHC.Builtin.Types.html#multiplicityTy"><span class="hs-identifier hs-var">multiplicityTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;coercion&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150328"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2091"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150314"><span class="hs-identifier hs-var">rtw</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="GHC.Builtin.Types.html#multiplicityTy"><span class="hs-identifier hs-var">multiplicityTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;coercion&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150328"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2092"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150313"><span class="annot"><span class="annottext">expected_mult_role :: Role
</span><a href="#local-6989586621681150313"><span class="hs-identifier hs-var hs-var">expected_mult_role</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150326"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2093"></span><span>                                    </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Phantom"><span class="hs-identifier hs-var">Phantom</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Phantom"><span class="hs-identifier hs-var">Phantom</span></a></span><span>
</span><span id="line-2094"></span><span>                                    </span><span class="annot"><span class="annottext">Role
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span>
</span><span id="line-2095"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150325"><span class="hs-identifier hs-var">cow</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150313"><span class="hs-identifier hs-var">expected_mult_role</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150325"><span class="hs-identifier hs-var">cow</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2096"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role -&gt; Coercion -&gt; Coercion -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#FunCo"><span class="hs-identifier hs-var">FunCo</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150326"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150320"><span class="hs-identifier hs-var">cow'</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150322"><span class="hs-identifier hs-var">co1'</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150321"><span class="hs-identifier hs-var">co2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2097"></span><span>
</span><span id="line-2098"></span><span class="hs-comment">-- See Note [Bad unsafe coercion]</span><span>
</span><span id="line-2099"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span id="local-6989586621681150312"><span class="annot"><span class="annottext">co :: Coercion
</span><a href="#local-6989586621681150312"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#UnivCo"><span class="hs-identifier hs-type">UnivCo</span></a></span><span> </span><span id="local-6989586621681150310"><span class="annot"><span class="annottext">UnivCoProvenance
</span><a href="#local-6989586621681150310"><span class="hs-identifier hs-var">prov</span></a></span></span><span> </span><span id="local-6989586621681150309"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150309"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681150308"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150308"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681150307"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150307"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2100"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150306"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150306"><span class="hs-identifier hs-var">ty1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150308"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-2101"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150305"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150305"><span class="hs-identifier hs-var">ty2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150307"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-2102"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150304"><span class="annot"><span class="annottext">k1 :: LintedType
</span><a href="#local-6989586621681150304"><span class="hs-identifier hs-var hs-var">k1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150306"><span class="hs-identifier hs-var">ty1'</span></a></span><span>
</span><span id="line-2103"></span><span>             </span><span id="local-6989586621681150303"><span class="annot"><span class="annottext">k2 :: LintedType
</span><a href="#local-6989586621681150303"><span class="hs-identifier hs-var hs-var">k2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150305"><span class="hs-identifier hs-var">ty2'</span></a></span><span>
</span><span id="line-2104"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150302"><span class="annot"><span class="annottext">UnivCoProvenance
</span><a href="#local-6989586621681150302"><span class="hs-identifier hs-var">prov'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType
-&gt; LintedType -&gt; UnivCoProvenance -&gt; LintM UnivCoProvenance
</span><a href="#local-6989586621681150301"><span class="hs-identifier hs-var">lint_prov</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150304"><span class="hs-identifier hs-var">k1</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150303"><span class="hs-identifier hs-var">k2</span></a></span><span> </span><span class="annot"><span class="annottext">UnivCoProvenance
</span><a href="#local-6989586621681150310"><span class="hs-identifier hs-var">prov</span></a></span><span>
</span><span id="line-2105"></span><span>
</span><span id="line-2106"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150309"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Phantom"><span class="hs-identifier hs-var">Phantom</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#classifiesTypeWithValues"><span class="hs-identifier hs-var">classifiesTypeWithValues</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150304"><span class="hs-identifier hs-var">k1</span></a></span><span>
</span><span id="line-2107"></span><span>                            </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#classifiesTypeWithValues"><span class="hs-identifier hs-var">classifiesTypeWithValues</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150303"><span class="hs-identifier hs-var">k2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2108"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; LintM ()
</span><a href="#local-6989586621681150300"><span class="hs-identifier hs-var">checkTypes</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150308"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150307"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2109"></span><span>
</span><span id="line-2110"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnivCoProvenance -&gt; Role -&gt; LintedType -&gt; LintedType -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#UnivCo"><span class="hs-identifier hs-var">UnivCo</span></a></span><span> </span><span class="annot"><span class="annottext">UnivCoProvenance
</span><a href="#local-6989586621681150302"><span class="hs-identifier hs-var">prov'</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150309"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150306"><span class="hs-identifier hs-var">ty1'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150305"><span class="hs-identifier hs-var">ty2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2111"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-2112"></span><span>     </span><span id="local-6989586621681150299"><span class="annot"><span class="annottext">report :: String -&gt; SDoc
</span><a href="#local-6989586621681150299"><span class="hs-identifier hs-var hs-var">report</span></a></span></span><span> </span><span id="local-6989586621681150298"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681150298"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unsafe coercion: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681150298"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2113"></span><span>                     </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;From:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150308"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-2114"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;  To:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150307"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2115"></span><span>     </span><span class="annot"><a href="#local-6989586621681150297"><span class="hs-identifier hs-type">isUnBoxed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#PrimRep"><span class="hs-identifier hs-type">PrimRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2116"></span><span>     </span><span id="local-6989586621681150297"><span class="annot"><span class="annottext">isUnBoxed :: PrimRep -&gt; Bool
</span><a href="#local-6989586621681150297"><span class="hs-identifier hs-var hs-var">isUnBoxed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isGcPtrRep"><span class="hs-identifier hs-var">isGcPtrRep</span></a></span><span>
</span><span id="line-2117"></span><span>
</span><span id="line-2118"></span><span>       </span><span class="hs-comment">-- see #9122 for discussion of these checks</span><span>
</span><span id="line-2119"></span><span>     </span><span id="local-6989586621681150300"><span class="annot"><span class="annottext">checkTypes :: LintedType -&gt; LintedType -&gt; LintM ()
</span><a href="#local-6989586621681150300"><span class="hs-identifier hs-var hs-var">checkTypes</span></a></span></span><span> </span><span id="local-6989586621681150295"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150295"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681150294"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150294"><span class="hs-identifier hs-var">t2</span></a></span></span><span>
</span><span id="line-2120"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">UnivCoProvenance -&gt; Bool
</span><a href="#local-6989586621681150293"><span class="hs-identifier hs-var">allow_ill_kinded_univ_co</span></a></span><span> </span><span class="annot"><span class="annottext">UnivCoProvenance
</span><a href="#local-6989586621681150310"><span class="hs-identifier hs-var">prov</span></a></span><span>
</span><span id="line-2121"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- Skip kind checks</span><span>
</span><span id="line-2122"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2123"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkWarnL"><span class="hs-identifier hs-var">checkWarnL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150291"><span class="hs-identifier hs-var">lev_poly1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2124"></span><span>                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="#local-6989586621681150299"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;left-hand type is levity-polymorphic&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2125"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkWarnL"><span class="hs-identifier hs-var">checkWarnL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150290"><span class="hs-identifier hs-var">lev_poly2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2126"></span><span>                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="#local-6989586621681150299"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;right-hand type is levity-polymorphic&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2127"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150291"><span class="hs-identifier hs-var">lev_poly1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150290"><span class="hs-identifier hs-var">lev_poly2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2128"></span><span>              </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkWarnL"><span class="hs-identifier hs-var">checkWarnL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[PrimRep]
</span><a href="#local-6989586621681150289"><span class="hs-identifier hs-var">reps1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#equalLength"><span class="hs-operator hs-var">`equalLength`</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimRep]
</span><a href="#local-6989586621681150287"><span class="hs-identifier hs-var">reps2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2129"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="#local-6989586621681150299"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;between values with different # of reps&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2130"></span><span>                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; m c) -&gt; [a] -&gt; [b] -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#zipWithM_"><span class="hs-identifier hs-var">zipWithM_</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep -&gt; PrimRep -&gt; LintM ()
</span><a href="#local-6989586621681150286"><span class="hs-identifier hs-var">validateCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimRep]
</span><a href="#local-6989586621681150289"><span class="hs-identifier hs-var">reps1</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimRep]
</span><a href="#local-6989586621681150287"><span class="hs-identifier hs-var">reps2</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-2131"></span><span>       </span><span class="hs-keyword">where</span><span>
</span><span id="line-2132"></span><span>         </span><span id="local-6989586621681150291"><span class="annot"><span class="annottext">lev_poly1 :: Bool
</span><a href="#local-6989586621681150291"><span class="hs-identifier hs-var hs-var">lev_poly1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isTypeLevPoly"><span class="hs-identifier hs-var">isTypeLevPoly</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150295"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-2133"></span><span>         </span><span id="local-6989586621681150290"><span class="annot"><span class="annottext">lev_poly2 :: Bool
</span><a href="#local-6989586621681150290"><span class="hs-identifier hs-var hs-var">lev_poly2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isTypeLevPoly"><span class="hs-identifier hs-var">isTypeLevPoly</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150294"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-2134"></span><span>
</span><span id="line-2135"></span><span>         </span><span class="hs-comment">-- don't look at these unless lev_poly1/2 are False</span><span>
</span><span id="line-2136"></span><span>         </span><span class="hs-comment">-- Otherwise, we get #13458</span><span>
</span><span id="line-2137"></span><span>         </span><span id="local-6989586621681150289"><span class="annot"><span class="annottext">reps1 :: [PrimRep]
</span><a href="#local-6989586621681150289"><span class="hs-identifier hs-var hs-var">reps1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; [PrimRep]
</span><a href="GHC.Types.RepType.html#typePrimRep"><span class="hs-identifier hs-var">typePrimRep</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150295"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-2138"></span><span>         </span><span id="local-6989586621681150287"><span class="annot"><span class="annottext">reps2 :: [PrimRep]
</span><a href="#local-6989586621681150287"><span class="hs-identifier hs-var hs-var">reps2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; [PrimRep]
</span><a href="GHC.Types.RepType.html#typePrimRep"><span class="hs-identifier hs-var">typePrimRep</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150294"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-2139"></span><span>
</span><span id="line-2140"></span><span>     </span><span class="hs-comment">-- CorePrep deliberately makes ill-kinded casts</span><span>
</span><span id="line-2141"></span><span>     </span><span class="hs-comment">--  e.g (case error @Int &quot;blah&quot; of {}) :: Int#</span><span>
</span><span id="line-2142"></span><span>     </span><span class="hs-comment">--     ==&gt; (error @Int &quot;blah&quot;) |&gt; Unsafe Int Int#</span><span>
</span><span id="line-2143"></span><span>     </span><span class="hs-comment">-- See Note [Unsafe coercions] in GHC.Core.CoreToStg.Prep</span><span>
</span><span id="line-2144"></span><span>     </span><span id="local-6989586621681150293"><span class="annot"><span class="annottext">allow_ill_kinded_univ_co :: UnivCoProvenance -&gt; Bool
</span><a href="#local-6989586621681150293"><span class="hs-identifier hs-var hs-var">allow_ill_kinded_univ_co</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CorePrepProv"><span class="hs-identifier hs-type">CorePrepProv</span></a></span><span> </span><span id="local-6989586621681150283"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150283"><span class="hs-identifier hs-var">homo_kind</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681150283"><span class="hs-identifier hs-var">homo_kind</span></a></span><span>
</span><span id="line-2145"></span><span>     </span><span class="annot"><a href="#local-6989586621681150293"><span class="hs-identifier hs-var">allow_ill_kinded_univ_co</span></a></span><span> </span><span class="annot"><span class="annottext">UnivCoProvenance
</span><span class="hs-identifier">_</span></span><span>                        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2146"></span><span>
</span><span id="line-2147"></span><span>     </span><span class="annot"><a href="#local-6989586621681150286"><span class="hs-identifier hs-type">validateCoercion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#PrimRep"><span class="hs-identifier hs-type">PrimRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#PrimRep"><span class="hs-identifier hs-type">PrimRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2148"></span><span>     </span><span id="local-6989586621681150286"><span class="annot"><span class="annottext">validateCoercion :: PrimRep -&gt; PrimRep -&gt; LintM ()
</span><a href="#local-6989586621681150286"><span class="hs-identifier hs-var hs-var">validateCoercion</span></a></span></span><span> </span><span id="local-6989586621681150282"><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621681150282"><span class="hs-identifier hs-var">rep1</span></a></span></span><span> </span><span id="local-6989586621681150281"><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621681150281"><span class="hs-identifier hs-var">rep2</span></a></span></span><span>
</span><span id="line-2149"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150280"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681150280"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Platform
</span><a href="GHC.Driver.Session.html#targetPlatform"><span class="hs-identifier hs-var">targetPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-2150"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkWarnL"><span class="hs-identifier hs-var">checkWarnL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimRep -&gt; Bool
</span><a href="#local-6989586621681150297"><span class="hs-identifier hs-var">isUnBoxed</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621681150282"><span class="hs-identifier hs-var">rep1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PrimRep -&gt; Bool
</span><a href="#local-6989586621681150297"><span class="hs-identifier hs-var">isUnBoxed</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621681150281"><span class="hs-identifier hs-var">rep2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2151"></span><span>                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="#local-6989586621681150299"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;between unboxed and boxed value&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2152"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkWarnL"><span class="hs-identifier hs-var">checkWarnL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; PrimRep -&gt; JoinArity
</span><a href="GHC.Core.TyCon.html#primRepSizeB"><span class="hs-identifier hs-var">TyCon.primRepSizeB</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681150280"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621681150282"><span class="hs-identifier hs-var">rep1</span></a></span><span>
</span><span id="line-2153"></span><span>                           </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; PrimRep -&gt; JoinArity
</span><a href="GHC.Core.TyCon.html#primRepSizeB"><span class="hs-identifier hs-var">TyCon.primRepSizeB</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681150280"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621681150281"><span class="hs-identifier hs-var">rep2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2154"></span><span>                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="#local-6989586621681150299"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;between unboxed values of different size&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2155"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150276"><span class="annot"><span class="annottext">fl :: Maybe Bool
</span><a href="#local-6989586621681150276"><span class="hs-identifier hs-var hs-var">fl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a1 a2 r.
Monad m =&gt;
(a1 -&gt; a2 -&gt; r) -&gt; m a1 -&gt; m a2 -&gt; m r
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#liftM2"><span class="hs-identifier hs-var">liftM2</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(==)</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimRep -&gt; Maybe Bool
</span><a href="GHC.Core.TyCon.html#primRepIsFloat"><span class="hs-identifier hs-var">TyCon.primRepIsFloat</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621681150282"><span class="hs-identifier hs-var">rep1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2156"></span><span>                                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimRep -&gt; Maybe Bool
</span><a href="GHC.Core.TyCon.html#primRepIsFloat"><span class="hs-identifier hs-var">TyCon.primRepIsFloat</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621681150281"><span class="hs-identifier hs-var">rep2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2157"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681150276"><span class="hs-identifier hs-var">fl</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2158"></span><span>                </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addWarnL"><span class="hs-identifier hs-var">addWarnL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="#local-6989586621681150299"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;between vector types&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2159"></span><span>                </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addWarnL"><span class="hs-identifier hs-var">addWarnL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="#local-6989586621681150299"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;between float and integral values&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2160"></span><span>                </span><span class="annot"><span class="annottext">Maybe Bool
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2161"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-2162"></span><span>
</span><span id="line-2163"></span><span>     </span><span id="local-6989586621681150301"><span class="annot"><span class="annottext">lint_prov :: LintedType
-&gt; LintedType -&gt; UnivCoProvenance -&gt; LintM UnivCoProvenance
</span><a href="#local-6989586621681150301"><span class="hs-identifier hs-var hs-var">lint_prov</span></a></span></span><span> </span><span id="local-6989586621681150273"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150273"><span class="hs-identifier hs-var">k1</span></a></span></span><span> </span><span id="local-6989586621681150272"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150272"><span class="hs-identifier hs-var">k2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PhantomProv"><span class="hs-identifier hs-type">PhantomProv</span></a></span><span> </span><span id="local-6989586621681150270"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150270"><span class="hs-identifier hs-var">kco</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2164"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150269"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150269"><span class="hs-identifier hs-var">kco'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintStarCoercion"><span class="hs-identifier hs-var">lintStarCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150270"><span class="hs-identifier hs-var">kco</span></a></span><span>
</span><span id="line-2165"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150312"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Phantom"><span class="hs-identifier hs-var">Phantom</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150309"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-2166"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintedType -&gt; LintedType -&gt; LintM ()
</span><a href="#local-6989586621681150268"><span class="hs-identifier hs-var">check_kinds</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150269"><span class="hs-identifier hs-var">kco'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150273"><span class="hs-identifier hs-var">k1</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150272"><span class="hs-identifier hs-var">k2</span></a></span><span>
</span><span id="line-2167"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; UnivCoProvenance
</span><a href="GHC.Core.TyCo.Rep.html#PhantomProv"><span class="hs-identifier hs-var">PhantomProv</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150269"><span class="hs-identifier hs-var">kco'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2168"></span><span>
</span><span id="line-2169"></span><span>     </span><span class="annot"><a href="#local-6989586621681150301"><span class="hs-identifier hs-var">lint_prov</span></a></span><span> </span><span id="local-6989586621681150267"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150267"><span class="hs-identifier hs-var">k1</span></a></span></span><span> </span><span id="local-6989586621681150266"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150266"><span class="hs-identifier hs-var">k2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ProofIrrelProv"><span class="hs-identifier hs-type">ProofIrrelProv</span></a></span><span> </span><span id="local-6989586621681150264"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150264"><span class="hs-identifier hs-var">kco</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2170"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isCoercionTy"><span class="hs-identifier hs-var">isCoercionTy</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150308"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Coercion -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadProofIrrelMsg"><span class="hs-identifier hs-var">mkBadProofIrrelMsg</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150308"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150312"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2171"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isCoercionTy"><span class="hs-identifier hs-var">isCoercionTy</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150307"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Coercion -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadProofIrrelMsg"><span class="hs-identifier hs-var">mkBadProofIrrelMsg</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150307"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150312"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2172"></span><span>            </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150262"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150262"><span class="hs-identifier hs-var">kco'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintStarCoercion"><span class="hs-identifier hs-var">lintStarCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150264"><span class="hs-identifier hs-var">kco</span></a></span><span>
</span><span id="line-2173"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintedType -&gt; LintedType -&gt; LintM ()
</span><a href="#local-6989586621681150268"><span class="hs-identifier hs-var">check_kinds</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150264"><span class="hs-identifier hs-var">kco</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150267"><span class="hs-identifier hs-var">k1</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150266"><span class="hs-identifier hs-var">k2</span></a></span><span>
</span><span id="line-2174"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; UnivCoProvenance
</span><a href="GHC.Core.TyCo.Rep.html#ProofIrrelProv"><span class="hs-identifier hs-var">ProofIrrelProv</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150262"><span class="hs-identifier hs-var">kco'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2175"></span><span>
</span><span id="line-2176"></span><span>     </span><span class="annot"><a href="#local-6989586621681150301"><span class="hs-identifier hs-var">lint_prov</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681150261"><span class="annot"><span class="annottext">prov :: UnivCoProvenance
</span><a href="#local-6989586621681150261"><span class="hs-identifier hs-var">prov</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PluginProv"><span class="hs-identifier hs-type">PluginProv</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">UnivCoProvenance
</span><a href="#local-6989586621681150261"><span class="hs-identifier hs-var">prov</span></a></span><span>
</span><span id="line-2177"></span><span>     </span><span class="annot"><a href="#local-6989586621681150301"><span class="hs-identifier hs-var">lint_prov</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681150259"><span class="annot"><span class="annottext">prov :: UnivCoProvenance
</span><a href="#local-6989586621681150259"><span class="hs-identifier hs-var">prov</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CorePrepProv"><span class="hs-identifier hs-type">CorePrepProv</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">UnivCoProvenance
</span><a href="#local-6989586621681150259"><span class="hs-identifier hs-var">prov</span></a></span><span>
</span><span id="line-2178"></span><span>
</span><span id="line-2179"></span><span>     </span><span id="local-6989586621681150268"><span class="annot"><span class="annottext">check_kinds :: Coercion -&gt; LintedType -&gt; LintedType -&gt; LintM ()
</span><a href="#local-6989586621681150268"><span class="hs-identifier hs-var hs-var">check_kinds</span></a></span></span><span> </span><span id="local-6989586621681150258"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150258"><span class="hs-identifier hs-var">kco</span></a></span></span><span> </span><span id="local-6989586621681150257"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150257"><span class="hs-identifier hs-var">k1</span></a></span></span><span> </span><span id="local-6989586621681150256"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150256"><span class="hs-identifier hs-var">k2</span></a></span></span><span>
</span><span id="line-2180"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="GHC.Data.Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621681150255"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150255"><span class="hs-identifier hs-var">k1'</span></a></span></span><span> </span><span id="local-6989586621681150254"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150254"><span class="hs-identifier hs-var">k2'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Pair LintedType
</span><a href="GHC.Core.Coercion.html#coercionKind"><span class="hs-identifier hs-var">coercionKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150258"><span class="hs-identifier hs-var">kco</span></a></span><span>
</span><span id="line-2181"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150257"><span class="hs-identifier hs-var">k1</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150255"><span class="hs-identifier hs-var">k1'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LeftOrRight -&gt; Coercion -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadUnivCoMsg"><span class="hs-identifier hs-var">mkBadUnivCoMsg</span></a></span><span> </span><span class="annot"><span class="annottext">LeftOrRight
</span><a href="GHC.Types.Basic.html#CLeft"><span class="hs-identifier hs-var">CLeft</span></a></span><span>  </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150312"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2182"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150256"><span class="hs-identifier hs-var">k2</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150254"><span class="hs-identifier hs-var">k2'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LeftOrRight -&gt; Coercion -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadUnivCoMsg"><span class="hs-identifier hs-var">mkBadUnivCoMsg</span></a></span><span> </span><span class="annot"><span class="annottext">LeftOrRight
</span><a href="GHC.Types.Basic.html#CRight"><span class="hs-identifier hs-var">CRight</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150312"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2183"></span><span>
</span><span id="line-2184"></span><span>
</span><span id="line-2185"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SymCo"><span class="hs-identifier hs-type">SymCo</span></a></span><span> </span><span id="local-6989586621681150249"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150249"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2186"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150248"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150248"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150249"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-2187"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#SymCo"><span class="hs-identifier hs-var">SymCo</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150248"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2188"></span><span>
</span><span id="line-2189"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span id="local-6989586621681150247"><span class="annot"><span class="annottext">co :: Coercion
</span><a href="#local-6989586621681150247"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TransCo"><span class="hs-identifier hs-type">TransCo</span></a></span><span> </span><span id="local-6989586621681150245"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150245"><span class="hs-identifier hs-var">co1</span></a></span></span><span> </span><span id="local-6989586621681150244"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150244"><span class="hs-identifier hs-var">co2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2190"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150243"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150243"><span class="hs-identifier hs-var">co1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150245"><span class="hs-identifier hs-var">co1</span></a></span><span>
</span><span id="line-2191"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150242"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150242"><span class="hs-identifier hs-var">co2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150244"><span class="hs-identifier hs-var">co2</span></a></span><span>
</span><span id="line-2192"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150241"><span class="annot"><span class="annottext">ty1b :: LintedType
</span><a href="#local-6989586621681150241"><span class="hs-identifier hs-var hs-var">ty1b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintedType
</span><a href="GHC.Core.Coercion.html#coercionRKind"><span class="hs-identifier hs-var">coercionRKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150243"><span class="hs-identifier hs-var">co1'</span></a></span><span>
</span><span id="line-2193"></span><span>             </span><span id="local-6989586621681150239"><span class="annot"><span class="annottext">ty2a :: LintedType
</span><a href="#local-6989586621681150239"><span class="hs-identifier hs-var hs-var">ty2a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintedType
</span><a href="GHC.Core.Coercion.html#coercionLKind"><span class="hs-identifier hs-var">coercionLKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150242"><span class="hs-identifier hs-var">co2'</span></a></span><span>
</span><span id="line-2194"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var">ensureEqTys</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150241"><span class="hs-identifier hs-var">ty1b</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150239"><span class="hs-identifier hs-var">ty2a</span></a></span><span>
</span><span id="line-2195"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Trans coercion mis-match:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150247"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2196"></span><span>                   </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Pair LintedType
</span><a href="GHC.Core.Coercion.html#coercionKind"><span class="hs-identifier hs-var">coercionKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150243"><span class="hs-identifier hs-var">co1'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Pair LintedType
</span><a href="GHC.Core.Coercion.html#coercionKind"><span class="hs-identifier hs-var">coercionKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150242"><span class="hs-identifier hs-var">co2'</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2197"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150247"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150245"><span class="hs-identifier hs-var">co1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150244"><span class="hs-identifier hs-var">co2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2198"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#TransCo"><span class="hs-identifier hs-var">TransCo</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150243"><span class="hs-identifier hs-var">co1'</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150242"><span class="hs-identifier hs-var">co2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2199"></span><span>
</span><span id="line-2200"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span id="local-6989586621681150238"><span class="annot"><span class="annottext">the_co :: Coercion
</span><a href="#local-6989586621681150238"><span class="hs-identifier hs-var">the_co</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#NthCo"><span class="hs-identifier hs-type">NthCo</span></a></span><span> </span><span id="local-6989586621681150236"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150236"><span class="hs-identifier hs-var">r0</span></a></span></span><span> </span><span id="local-6989586621681150235"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150235"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681150234"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150234"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2201"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150233"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150233"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150234"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-2202"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621681150232"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150232"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681150231"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150231"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150230"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150230"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; (Pair LintedType, Role)
</span><a href="GHC.Core.Coercion.html#coercionKindRole"><span class="hs-identifier hs-var">coercionKindRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150233"><span class="hs-identifier hs-var">co'</span></a></span><span>
</span><span id="line-2203"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Maybe (Var, LintedType)
</span><a href="GHC.Core.Type.html#splitForAllTyCoVar_maybe"><span class="hs-identifier hs-var">splitForAllTyCoVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150232"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Maybe (Var, LintedType)
</span><a href="GHC.Core.Type.html#splitForAllTyCoVar_maybe"><span class="hs-identifier hs-var">splitForAllTyCoVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150231"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2204"></span><span>         </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(Var, LintedType)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(Var, LintedType)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-2205"></span><span>             </span><span class="hs-comment">-- works for both tyvar and covar</span><span>
</span><span id="line-2206"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150235"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">0</span></span><span>
</span><span id="line-2207"></span><span>             </span><span class="hs-special">,</span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isForAllTy_ty"><span class="hs-identifier hs-var">isForAllTy_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150232"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isForAllTy_ty"><span class="hs-identifier hs-var">isForAllTy_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150231"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2208"></span><span>             </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isForAllTy_co"><span class="hs-identifier hs-var">isForAllTy_co</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150232"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#isForAllTy_co"><span class="hs-identifier hs-var">isForAllTy_co</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150231"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2209"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150238"><span class="hs-identifier hs-var">the_co</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150236"><span class="hs-identifier hs-var">r0</span></a></span><span>
</span><span id="line-2210"></span><span>                   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role -&gt; JoinArity -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#NthCo"><span class="hs-identifier hs-var">NthCo</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150236"><span class="hs-identifier hs-var">r0</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150235"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150233"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2211"></span><span>
</span><span id="line-2212"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(Maybe (Var, LintedType), Maybe (Var, LintedType))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; Maybe (TyCon, [LintedType])
</span><a href="GHC.Core.Type.html#splitTyConApp_maybe"><span class="hs-identifier hs-var">splitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150232"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; Maybe (TyCon, [LintedType])
</span><a href="GHC.Core.Type.html#splitTyConApp_maybe"><span class="hs-identifier hs-var">splitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150231"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2213"></span><span>         </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150227"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150227"><span class="hs-identifier hs-var">tc_s</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150226"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150226"><span class="hs-identifier hs-var">tys_s</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150225"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150225"><span class="hs-identifier hs-var">tc_t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150224"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150224"><span class="hs-identifier hs-var">tys_t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2214"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150227"><span class="hs-identifier hs-var">tc_s</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150225"><span class="hs-identifier hs-var">tc_t</span></a></span><span>
</span><span id="line-2215"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Role -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isInjectiveTyCon"><span class="hs-identifier hs-var">isInjectiveTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150227"><span class="hs-identifier hs-var">tc_s</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150230"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-2216"></span><span>                 </span><span class="hs-comment">-- see Note [NthCo and newtypes] in GHC.Core.TyCo.Rep</span><span>
</span><span id="line-2217"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150226"><span class="hs-identifier hs-var">tys_s</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#equalLength"><span class="hs-operator hs-var">`equalLength`</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150224"><span class="hs-identifier hs-var">tys_t</span></a></span><span>
</span><span id="line-2218"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150226"><span class="hs-identifier hs-var">tys_s</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; JoinArity -&gt; Bool
</span><a href="GHC.Utils.Misc.html#lengthExceeds"><span class="hs-operator hs-var">`lengthExceeds`</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150235"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-2219"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150238"><span class="hs-identifier hs-var">the_co</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150221"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150236"><span class="hs-identifier hs-var">r0</span></a></span><span>
</span><span id="line-2220"></span><span>                   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role -&gt; JoinArity -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#NthCo"><span class="hs-identifier hs-var">NthCo</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150236"><span class="hs-identifier hs-var">r0</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150235"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150233"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2221"></span><span>                </span><span class="hs-keyword">where</span><span>
</span><span id="line-2222"></span><span>                  </span><span id="local-6989586621681150221"><span class="annot"><span class="annottext">tr :: Role
</span><a href="#local-6989586621681150221"><span class="hs-identifier hs-var hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Role -&gt; TyCon -&gt; JoinArity -&gt; Role
</span><a href="GHC.Core.Coercion.html#nthRole"><span class="hs-identifier hs-var">nthRole</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150230"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150227"><span class="hs-identifier hs-var">tc_s</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150235"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-2223"></span><span>
</span><span id="line-2224"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(Maybe (TyCon, [LintedType]), Maybe (TyCon, [LintedType]))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Bad getNth:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2225"></span><span>                              </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150238"><span class="hs-identifier hs-var">the_co</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150232"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150231"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-2226"></span><span>
</span><span id="line-2227"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span id="local-6989586621681150219"><span class="annot"><span class="annottext">the_co :: Coercion
</span><a href="#local-6989586621681150219"><span class="hs-identifier hs-var">the_co</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LRCo"><span class="hs-identifier hs-type">LRCo</span></a></span><span> </span><span id="local-6989586621681150217"><span class="annot"><span class="annottext">LeftOrRight
</span><a href="#local-6989586621681150217"><span class="hs-identifier hs-var">lr</span></a></span></span><span> </span><span id="local-6989586621681150216"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150216"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2228"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150215"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150215"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150216"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-2229"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="GHC.Data.Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621681150214"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150214"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681150213"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150213"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Pair LintedType
</span><a href="GHC.Core.Coercion.html#coercionKind"><span class="hs-identifier hs-var">coercionKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150215"><span class="hs-identifier hs-var">co'</span></a></span><span>
</span><span id="line-2230"></span><span>             </span><span id="local-6989586621681150212"><span class="annot"><span class="annottext">r :: Role
</span><a href="#local-6989586621681150212"><span class="hs-identifier hs-var hs-var">r</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150215"><span class="hs-identifier hs-var">co'</span></a></span><span>
</span><span id="line-2231"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150216"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150212"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-2232"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Maybe (LintedType, LintedType)
</span><a href="GHC.Core.Type.html#splitAppTy_maybe"><span class="hs-identifier hs-var">splitAppTy_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150214"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Maybe (LintedType, LintedType)
</span><a href="GHC.Core.Type.html#splitAppTy_maybe"><span class="hs-identifier hs-var">splitAppTy_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150213"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2233"></span><span>           </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(LintedType, LintedType)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(LintedType, LintedType)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LeftOrRight -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#LRCo"><span class="hs-identifier hs-var">LRCo</span></a></span><span> </span><span class="annot"><span class="annottext">LeftOrRight
</span><a href="#local-6989586621681150217"><span class="hs-identifier hs-var">lr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150215"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2234"></span><span>           </span><span class="annot"><span class="annottext">(Maybe (LintedType, LintedType), Maybe (LintedType, LintedType))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Bad LRCo:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2235"></span><span>                              </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150219"><span class="hs-identifier hs-var">the_co</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150214"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150213"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2236"></span><span>
</span><span id="line-2237"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#InstCo"><span class="hs-identifier hs-type">InstCo</span></a></span><span> </span><span id="local-6989586621681150209"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150209"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span id="local-6989586621681150208"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150208"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2238"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150207"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150207"><span class="hs-identifier hs-var">co'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150209"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-2239"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150206"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150206"><span class="hs-identifier hs-var">arg'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150208"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-2240"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="GHC.Data.Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621681150205"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150205"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681150204"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150204"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Pair LintedType
</span><a href="GHC.Core.Coercion.html#coercionKind"><span class="hs-identifier hs-var">coercionKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150207"><span class="hs-identifier hs-var">co'</span></a></span><span>
</span><span id="line-2241"></span><span>             </span><span class="annot"><a href="GHC.Data.Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621681150203"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150203"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span id="local-6989586621681150202"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150202"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Pair LintedType
</span><a href="GHC.Core.Coercion.html#coercionKind"><span class="hs-identifier hs-var">coercionKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150206"><span class="hs-identifier hs-var">arg'</span></a></span><span>
</span><span id="line-2242"></span><span>
</span><span id="line-2243"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150208"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150206"><span class="hs-identifier hs-var">arg'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2244"></span><span>
</span><span id="line-2245"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Maybe (Var, LintedType)
</span><a href="GHC.Core.Type.html#splitForAllTyVar_maybe"><span class="hs-identifier hs-var">splitForAllTyVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150205"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Maybe (Var, LintedType)
</span><a href="GHC.Core.Type.html#splitForAllTyVar_maybe"><span class="hs-identifier hs-var">splitForAllTyVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150204"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2246"></span><span>         </span><span class="hs-comment">-- forall over tvar</span><span>
</span><span id="line-2247"></span><span>         </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150200"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150200"><span class="hs-identifier hs-var">tv1</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150199"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150199"><span class="hs-identifier hs-var">tv2</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2248"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150203"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150200"><span class="hs-identifier hs-var">tv1</span></a></span><span>
</span><span id="line-2249"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150202"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150199"><span class="hs-identifier hs-var">tv2</span></a></span><span>
</span><span id="line-2250"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#InstCo"><span class="hs-identifier hs-var">InstCo</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150207"><span class="hs-identifier hs-var">co'</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150206"><span class="hs-identifier hs-var">arg'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2251"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2252"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Kind mis-match in inst coercion1&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150209"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2253"></span><span>
</span><span id="line-2254"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(Maybe (Var, LintedType), Maybe (Var, LintedType))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; Maybe (Var, LintedType)
</span><a href="GHC.Core.Type.html#splitForAllCoVar_maybe"><span class="hs-identifier hs-var">splitForAllCoVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150205"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Maybe (Var, LintedType)
</span><a href="GHC.Core.Type.html#splitForAllCoVar_maybe"><span class="hs-identifier hs-var">splitForAllCoVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150204"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2255"></span><span>         </span><span class="hs-comment">-- forall over covar</span><span>
</span><span id="line-2256"></span><span>         </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150197"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150197"><span class="hs-identifier hs-var">cv1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150196"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150196"><span class="hs-identifier hs-var">cv2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2257"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150203"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150197"><span class="hs-identifier hs-var">cv1</span></a></span><span>
</span><span id="line-2258"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150202"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150196"><span class="hs-identifier hs-var">cv2</span></a></span><span>
</span><span id="line-2259"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150203"><span class="hs-identifier hs-var">s1</span></a></span><span>
</span><span id="line-2260"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150202"><span class="hs-identifier hs-var">s2</span></a></span><span>
</span><span id="line-2261"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#InstCo"><span class="hs-identifier hs-var">InstCo</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150207"><span class="hs-identifier hs-var">co'</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150206"><span class="hs-identifier hs-var">arg'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2262"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2263"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Kind mis-match in inst coercion2&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150209"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2264"></span><span>
</span><span id="line-2265"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(Maybe (Var, LintedType), Maybe (Var, LintedType))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Bad argument of inst&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-2266"></span><span>
</span><span id="line-2267"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span id="local-6989586621681150195"><span class="annot"><span class="annottext">co :: Coercion
</span><a href="#local-6989586621681150195"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AxiomInstCo"><span class="hs-identifier hs-type">AxiomInstCo</span></a></span><span> </span><span id="local-6989586621681150193"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150193"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621681150192"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150192"><span class="hs-identifier hs-var">ind</span></a></span></span><span> </span><span id="local-6989586621681150191"><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150191"><span class="hs-identifier hs-var">cos</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2268"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150192"><span class="hs-identifier hs-var">ind</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150192"><span class="hs-identifier hs-var">ind</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">forall (br :: BranchFlag). Branches br -&gt; JoinArity
</span><a href="GHC.Core.Coercion.Axiom.html#numBranches"><span class="hs-identifier hs-var">numBranches</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomBranches"><span class="hs-identifier hs-var">coAxiomBranches</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150193"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2269"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="#local-6989586621681150186"><span class="hs-identifier hs-var">bad_ax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;index out of range&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2270"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cab_tvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_tvs"><span class="hs-identifier hs-var">cab_tvs</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150183"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150183"><span class="hs-identifier hs-var">ktvs</span></a></span></span><span>
</span><span id="line-2271"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_cvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_cvs"><span class="hs-identifier hs-var">cab_cvs</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150181"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150181"><span class="hs-identifier hs-var">cvs</span></a></span></span><span>
</span><span id="line-2272"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_roles :: CoAxBranch -&gt; [Role]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_roles"><span class="hs-identifier hs-var">cab_roles</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150179"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150179"><span class="hs-identifier hs-var">roles</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; JoinArity -&gt; CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomNthBranch"><span class="hs-identifier hs-var">coAxiomNthBranch</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150193"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150192"><span class="hs-identifier hs-var">ind</span></a></span><span>
</span><span id="line-2273"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150191"><span class="hs-identifier hs-var">cos</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#equalLength"><span class="hs-operator hs-var">`equalLength`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150183"><span class="hs-identifier hs-var">ktvs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150181"><span class="hs-identifier hs-var">cvs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2274"></span><span>           </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="#local-6989586621681150186"><span class="hs-identifier hs-var">bad_ax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lengths&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2275"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150177"><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150177"><span class="hs-identifier hs-var">cos'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150191"><span class="hs-identifier hs-var">cos</span></a></span><span>
</span><span id="line-2276"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150176"><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150176"><span class="hs-identifier hs-var">subst</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM TCvSubst
</span><a href="GHC.Core.Lint.html#getTCvSubst"><span class="hs-identifier hs-var">getTCvSubst</span></a></span><span>
</span><span id="line-2277"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150175"><span class="annot"><span class="annottext">empty_subst :: TCvSubst
</span><a href="#local-6989586621681150175"><span class="hs-identifier hs-var hs-var">empty_subst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCvSubst -&gt; TCvSubst
</span><a href="GHC.Core.TyCo.Subst.html#zapTCvSubst"><span class="hs-identifier hs-var">zapTCvSubst</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150176"><span class="hs-identifier hs-var">subst</span></a></span><span>
</span><span id="line-2278"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(TCvSubst, TCvSubst)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#foldlM"><span class="hs-identifier hs-var">foldlM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCvSubst, TCvSubst)
-&gt; (Var, Role, Coercion) -&gt; LintM (TCvSubst, TCvSubst)
</span><a href="#local-6989586621681150173"><span class="hs-identifier hs-var">check_ki</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150175"><span class="hs-identifier hs-var">empty_subst</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150175"><span class="hs-identifier hs-var">empty_subst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2279"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. [a] -&gt; [b] -&gt; [c] -&gt; [(a, b, c)]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#zip3"><span class="hs-identifier hs-var">zip3</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150183"><span class="hs-identifier hs-var">ktvs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150181"><span class="hs-identifier hs-var">cvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150179"><span class="hs-identifier hs-var">roles</span></a></span><span> </span><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150177"><span class="hs-identifier hs-var">cos'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2280"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150171"><span class="annot"><span class="annottext">fam_tc :: TyCon
</span><a href="#local-6989586621681150171"><span class="hs-identifier hs-var hs-var">fam_tc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; TyCon
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomTyCon"><span class="hs-identifier hs-var">coAxiomTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150193"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-2281"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Maybe CoAxBranch
</span><a href="GHC.Core.Coercion.Opt.html#checkAxInstCo"><span class="hs-identifier hs-var">checkAxInstCo</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150195"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2282"></span><span>           </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681150169"><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621681150169"><span class="hs-identifier hs-var">bad_branch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="#local-6989586621681150186"><span class="hs-identifier hs-var">bad_ax</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;inconsistent with&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-2283"></span><span>                                       </span><span class="annot"><span class="annottext">TyCon -&gt; CoAxBranch -&gt; SDoc
</span><a href="GHC.Core.Coercion.html#pprCoAxBranch"><span class="hs-identifier hs-var">pprCoAxBranch</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150171"><span class="hs-identifier hs-var">fam_tc</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621681150169"><span class="hs-identifier hs-var">bad_branch</span></a></span><span>
</span><span id="line-2284"></span><span>           </span><span class="annot"><span class="annottext">Maybe CoAxBranch
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2285"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; JoinArity -&gt; [Coercion] -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#AxiomInstCo"><span class="hs-identifier hs-var">AxiomInstCo</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150193"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150192"><span class="hs-identifier hs-var">ind</span></a></span><span> </span><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150177"><span class="hs-identifier hs-var">cos'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2286"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2287"></span><span>    </span><span id="local-6989586621681150186"><span class="annot"><span class="annottext">bad_ax :: SDoc -&gt; LintM ()
</span><a href="#local-6989586621681150186"><span class="hs-identifier hs-var hs-var">bad_ax</span></a></span></span><span> </span><span id="local-6989586621681150167"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150167"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var">addErrL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span>  </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Bad axiom application&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150167"><span class="hs-identifier hs-var">what</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2288"></span><span>                        </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150195"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2289"></span><span>
</span><span id="line-2290"></span><span>    </span><span id="local-6989586621681150173"><span class="annot"><span class="annottext">check_ki :: (TCvSubst, TCvSubst)
-&gt; (Var, Role, Coercion) -&gt; LintM (TCvSubst, TCvSubst)
</span><a href="#local-6989586621681150173"><span class="hs-identifier hs-var hs-var">check_ki</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150166"><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150166"><span class="hs-identifier hs-var">subst_l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150165"><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150165"><span class="hs-identifier hs-var">subst_r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150164"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150164"><span class="hs-identifier hs-var">ktv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150163"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150163"><span class="hs-keyword hs-var">role</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150162"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150162"><span class="hs-identifier hs-var">arg'</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2291"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="GHC.Data.Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621681150161"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150161"><span class="hs-identifier hs-var">s'</span></a></span></span><span> </span><span id="local-6989586621681150160"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150160"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Pair LintedType
</span><a href="GHC.Core.Coercion.html#coercionKind"><span class="hs-identifier hs-var">coercionKind</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150162"><span class="hs-identifier hs-var">arg'</span></a></span><span>
</span><span id="line-2292"></span><span>                 </span><span id="local-6989586621681150159"><span class="annot"><span class="annottext">sk' :: LintedType
</span><a href="#local-6989586621681150159"><span class="hs-identifier hs-var hs-var">sk'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150161"><span class="hs-identifier hs-var">s'</span></a></span><span>
</span><span id="line-2293"></span><span>                 </span><span id="local-6989586621681150158"><span class="annot"><span class="annottext">tk' :: LintedType
</span><a href="#local-6989586621681150158"><span class="hs-identifier hs-var hs-var">tk'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150160"><span class="hs-identifier hs-var">t'</span></a></span><span>
</span><span id="line-2294"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150162"><span class="hs-identifier hs-var">arg'</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150163"><span class="hs-keyword hs-var">role</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150162"><span class="hs-identifier hs-var">arg'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2295"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150157"><span class="annot"><span class="annottext">ktv_kind_l :: LintedType
</span><a href="#local-6989586621681150157"><span class="hs-identifier hs-var hs-var">ktv_kind_l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TCvSubst -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.TyCo.Subst.html#substTy"><span class="hs-identifier hs-var">substTy</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150166"><span class="hs-identifier hs-var">subst_l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150164"><span class="hs-identifier hs-var">ktv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2296"></span><span>                 </span><span id="local-6989586621681150156"><span class="annot"><span class="annottext">ktv_kind_r :: LintedType
</span><a href="#local-6989586621681150156"><span class="hs-identifier hs-var hs-var">ktv_kind_r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TCvSubst -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.TyCo.Subst.html#substTy"><span class="hs-identifier hs-var">substTy</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150165"><span class="hs-identifier hs-var">subst_r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150164"><span class="hs-identifier hs-var">ktv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2297"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150159"><span class="hs-identifier hs-var">sk'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150157"><span class="hs-identifier hs-var">ktv_kind_l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2298"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="#local-6989586621681150186"><span class="hs-identifier hs-var">bad_ax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;check_ki1&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150195"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150159"><span class="hs-identifier hs-var">sk'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150164"><span class="hs-identifier hs-var">ktv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150157"><span class="hs-identifier hs-var">ktv_kind_l</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2299"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150158"><span class="hs-identifier hs-var">tk'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150156"><span class="hs-identifier hs-var">ktv_kind_r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2300"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="#local-6989586621681150186"><span class="hs-identifier hs-var">bad_ax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;check_ki2&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150195"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150158"><span class="hs-identifier hs-var">tk'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150164"><span class="hs-identifier hs-var">ktv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150156"><span class="hs-identifier hs-var">ktv_kind_r</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2301"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCvSubst -&gt; Var -&gt; LintedType -&gt; TCvSubst
</span><a href="GHC.Core.TyCo.Subst.html#extendTCvSubst"><span class="hs-identifier hs-var">extendTCvSubst</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150166"><span class="hs-identifier hs-var">subst_l</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150164"><span class="hs-identifier hs-var">ktv</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150161"><span class="hs-identifier hs-var">s'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2302"></span><span>                     </span><span class="annot"><span class="annottext">TCvSubst -&gt; Var -&gt; LintedType -&gt; TCvSubst
</span><a href="GHC.Core.TyCo.Subst.html#extendTCvSubst"><span class="hs-identifier hs-var">extendTCvSubst</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150165"><span class="hs-identifier hs-var">subst_r</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681150164"><span class="hs-identifier hs-var">ktv</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150160"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2303"></span><span>
</span><span id="line-2304"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KindCo"><span class="hs-identifier hs-type">KindCo</span></a></span><span> </span><span id="local-6989586621681150154"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150154"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2305"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150153"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150153"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150154"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-2306"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#KindCo"><span class="hs-identifier hs-var">KindCo</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150153"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2307"></span><span>
</span><span id="line-2308"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SubCo"><span class="hs-identifier hs-type">SubCo</span></a></span><span> </span><span id="local-6989586621681150151"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150151"><span class="hs-identifier hs-var">co'</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2309"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150150"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150150"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150151"><span class="hs-identifier hs-var">co'</span></a></span><span>
</span><span id="line-2310"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var">lintRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150150"><span class="hs-identifier hs-var">co'</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150150"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2311"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#SubCo"><span class="hs-identifier hs-var">SubCo</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150150"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2312"></span><span>
</span><span id="line-2313"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span id="local-6989586621681150149"><span class="annot"><span class="annottext">this :: Coercion
</span><a href="#local-6989586621681150149"><span class="hs-identifier hs-var">this</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AxiomRuleCo"><span class="hs-identifier hs-type">AxiomRuleCo</span></a></span><span> </span><span id="local-6989586621681150147"><span class="annot"><span class="annottext">CoAxiomRule
</span><a href="#local-6989586621681150147"><span class="hs-identifier hs-var">ax</span></a></span></span><span> </span><span id="local-6989586621681150146"><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150146"><span class="hs-identifier hs-var">cos</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2314"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681150145"><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150145"><span class="hs-identifier hs-var">cos'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150146"><span class="hs-identifier hs-var">cos</span></a></span><span>
</span><span id="line-2315"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; [Role] -&gt; [Coercion] -&gt; LintM ()
</span><a href="#local-6989586621681150144"><span class="hs-identifier hs-var">lint_roles</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiomRule -&gt; [Role]
</span><a href="GHC.Core.Coercion.Axiom.html#coaxrAsmpRoles"><span class="hs-identifier hs-var">coaxrAsmpRoles</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiomRule
</span><a href="#local-6989586621681150147"><span class="hs-identifier hs-var">ax</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150145"><span class="hs-identifier hs-var">cos'</span></a></span><span>
</span><span id="line-2316"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CoAxiomRule -&gt; [Pair LintedType] -&gt; Maybe (Pair LintedType)
</span><a href="GHC.Core.Coercion.Axiom.html#coaxrProves"><span class="hs-identifier hs-var">coaxrProves</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiomRule
</span><a href="#local-6989586621681150147"><span class="hs-identifier hs-var">ax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Pair LintedType
</span><a href="GHC.Core.Coercion.html#coercionKind"><span class="hs-identifier hs-var">coercionKind</span></a></span><span> </span><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150145"><span class="hs-identifier hs-var">cos'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2317"></span><span>           </span><span class="annot"><span class="annottext">Maybe (Pair LintedType)
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; [SDoc] -&gt; LintM a
</span><a href="#local-6989586621681150141"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Malformed use of AxiomRuleCo&quot;</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150149"><span class="hs-identifier hs-var">this</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2318"></span><span>           </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Pair LintedType
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiomRule -&gt; [Coercion] -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#AxiomRuleCo"><span class="hs-identifier hs-var">AxiomRuleCo</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiomRule
</span><a href="#local-6989586621681150147"><span class="hs-identifier hs-var">ax</span></a></span><span> </span><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150145"><span class="hs-identifier hs-var">cos'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2319"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2320"></span><span>  </span><span class="annot"><a href="#local-6989586621681150141"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681152466"><span class="annot"><a href="#local-6989586621681152466"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152466"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-2321"></span><span>  </span><span id="local-6989586621681150141"><span class="annot"><span class="annottext">err :: forall a. String -&gt; [SDoc] -&gt; LintM a
</span><a href="#local-6989586621681150141"><span class="hs-identifier hs-var hs-var">err</span></a></span></span><span> </span><span id="local-6989586621681150138"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681150138"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681150137"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681150137"><span class="hs-identifier hs-var">xs</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2322"></span><span>              </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681150138"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Rule:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiomRule -&gt; FastString
</span><a href="GHC.Core.Coercion.Axiom.html#coaxrName"><span class="hs-identifier hs-var">coaxrName</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiomRule
</span><a href="#local-6989586621681150147"><span class="hs-identifier hs-var">ax</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681150137"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2323"></span><span>
</span><span id="line-2324"></span><span>  </span><span id="local-6989586621681150144"><span class="annot"><span class="annottext">lint_roles :: JoinArity -&gt; [Role] -&gt; [Coercion] -&gt; LintM ()
</span><a href="#local-6989586621681150144"><span class="hs-identifier hs-var hs-var">lint_roles</span></a></span></span><span> </span><span id="local-6989586621681150123"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150123"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150122"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150122"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681150121"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150121"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150120"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150120"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681150119"><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150119"><span class="hs-identifier hs-var">cos</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2325"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150122"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150120"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; [Role] -&gt; [Coercion] -&gt; LintM ()
</span><a href="#local-6989586621681150144"><span class="hs-identifier hs-var">lint_roles</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150123"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150121"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150119"><span class="hs-identifier hs-var">cos</span></a></span><span>
</span><span id="line-2326"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; [SDoc] -&gt; LintM a
</span><a href="#local-6989586621681150141"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Argument roles mismatch&quot;</span></span><span>
</span><span id="line-2327"></span><span>                      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In argument:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150123"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-2328"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150122"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2329"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Found:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681150120"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2330"></span><span>  </span><span class="annot"><a href="#local-6989586621681150144"><span class="hs-identifier hs-var">lint_roles</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2331"></span><span>  </span><span class="annot"><a href="#local-6989586621681150144"><span class="hs-identifier hs-var">lint_roles</span></a></span><span> </span><span id="local-6989586621681150116"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150116"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681150115"><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150115"><span class="hs-identifier hs-var">rs</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; [SDoc] -&gt; LintM a
</span><a href="#local-6989586621681150141"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Too many coercion arguments&quot;</span></span><span>
</span><span id="line-2332"></span><span>                          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150116"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-2333"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Provided:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150116"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; JoinArity
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Coercion]
</span><a href="#local-6989586621681150115"><span class="hs-identifier hs-var">rs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2334"></span><span>
</span><span id="line-2335"></span><span>  </span><span class="annot"><a href="#local-6989586621681150144"><span class="hs-identifier hs-var">lint_roles</span></a></span><span> </span><span id="local-6989586621681150114"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150114"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681150113"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150113"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; [SDoc] -&gt; LintM a
</span><a href="#local-6989586621681150141"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Not enough coercion arguments&quot;</span></span><span>
</span><span id="line-2336"></span><span>                          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150114"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; JoinArity
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150113"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2337"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Provided:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681150114"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2338"></span><span>
</span><span id="line-2339"></span><span class="annot"><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#HoleCo"><span class="hs-identifier hs-type">HoleCo</span></a></span><span> </span><span id="local-6989586621681150111"><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621681150111"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2340"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var">addErrL</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unfilled coercion hole:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621681150111"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-2341"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; LintM Coercion
</span><a href="GHC.Core.Lint.html#lintCoercion"><span class="hs-identifier hs-var">lintCoercion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#CoVarCo"><span class="hs-identifier hs-var">CoVarCo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoercionHole -&gt; Var
</span><a href="GHC.Core.TyCo.Rep.html#coHoleCoVar"><span class="hs-identifier hs-var">coHoleCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621681150111"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2342"></span><span>
</span><span id="line-2343"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
              Axioms
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-2350"></span><span>
</span><span id="line-2351"></span><span class="annot"><a href="GHC.Core.Lint.html#lintAxioms"><span class="hs-identifier hs-type">lintAxioms</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span>
</span><span id="line-2352"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>
</span><span id="line-2353"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-comment">-- ^ The source of the linted axioms</span><span>
</span><span id="line-2354"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2355"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2356"></span><span id="lintAxioms"><span class="annot"><span class="annottext">lintAxioms :: Logger -&gt; DynFlags -&gt; SDoc -&gt; [CoAxiom Branched] -&gt; IO ()
</span><a href="GHC.Core.Lint.html#lintAxioms"><span class="hs-identifier hs-var hs-var">lintAxioms</span></a></span></span><span> </span><span id="local-6989586621681150109"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681150109"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681150108"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681150108"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681150107"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150107"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span id="local-6989586621681150106"><span class="annot"><span class="annottext">[CoAxiom Branched]
</span><a href="#local-6989586621681150106"><span class="hs-identifier hs-var">axioms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2357"></span><span>  </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; Bool -&gt; SDoc -&gt; SDoc -&gt; WarnsAndErrs -&gt; IO ()
</span><a href="GHC.Core.Lint.html#displayLintResults"><span class="hs-identifier hs-var">displayLintResults</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681150109"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681150108"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681150107"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; SDoc
</span><a href="GHC.Core.Coercion.html#pprCoAxiom"><span class="hs-identifier hs-var">pprCoAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">[CoAxiom Branched]
</span><a href="#local-6989586621681150106"><span class="hs-identifier hs-var">axioms</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2358"></span><span>  </span><span class="annot"><span class="annottext">forall a. DynFlags -&gt; LintFlags -&gt; [Var] -&gt; LintM a -&gt; WarnsAndErrs
</span><a href="GHC.Core.Lint.html#initL"><span class="hs-identifier hs-var">initL</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681150108"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; LintFlags
</span><a href="GHC.Core.Lint.html#defaultLintFlags"><span class="hs-identifier hs-var">defaultLintFlags</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681150108"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2359"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_axiom"><span class="hs-identifier hs-var">lint_axiom</span></a></span><span> </span><span class="annot"><span class="annottext">[CoAxiom Branched]
</span><a href="#local-6989586621681150106"><span class="hs-identifier hs-var">axioms</span></a></span><span>
</span><span id="line-2360"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150103"><span class="annot"><span class="annottext">axiom_groups :: [NonEmpty (CoAxiom Branched)]
</span><a href="#local-6989586621681150103"><span class="hs-identifier hs-var hs-var">axiom_groups</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) b a.
(Foldable f, Eq b) =&gt;
(a -&gt; b) -&gt; f a -&gt; [NonEmpty a]
</span><a href="../../base-4.16.3.0/src/Data-List-NonEmpty.html#groupWith"><span class="hs-identifier hs-var">groupWith</span></a></span><span> </span><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; TyCon
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomTyCon"><span class="hs-identifier hs-var">coAxiomTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">[CoAxiom Branched]
</span><a href="#local-6989586621681150106"><span class="hs-identifier hs-var">axioms</span></a></span><span>
</span><span id="line-2361"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (CoAxiom Branched) -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_axiom_group"><span class="hs-identifier hs-var">lint_axiom_group</span></a></span><span> </span><span class="annot"><span class="annottext">[NonEmpty (CoAxiom Branched)]
</span><a href="#local-6989586621681150103"><span class="hs-identifier hs-var">axiom_groups</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2362"></span><span>
</span><span id="line-2363"></span><span class="annot"><a href="GHC.Core.Lint.html#lint_axiom"><span class="hs-identifier hs-type">lint_axiom</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2364"></span><span id="lint_axiom"><span class="annot"><span class="annottext">lint_axiom :: CoAxiom Branched -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_axiom"><span class="hs-identifier hs-var hs-var">lint_axiom</span></a></span></span><span> </span><span id="local-6989586621681150101"><span class="annot"><span class="annottext">ax :: CoAxiom Branched
</span><a href="#local-6989586621681150101"><span class="hs-identifier hs-var">ax</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">co_ax_tc :: forall (br :: BranchFlag). CoAxiom br -&gt; TyCon
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_tc"><span class="hs-identifier hs-var">co_ax_tc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150098"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150098"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">co_ax_branches :: forall (br :: BranchFlag). CoAxiom br -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_branches"><span class="hs-identifier hs-var">co_ax_branches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150096"><span class="annot"><span class="annottext">Branches Branched
</span><a href="#local-6989586621681150096"><span class="hs-identifier hs-var">branches</span></a></span></span><span>
</span><span id="line-2365"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">co_ax_role :: forall (br :: BranchFlag). CoAxiom br -&gt; Role
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_role"><span class="hs-identifier hs-var">co_ax_role</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150094"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150094"><span class="hs-identifier hs-var">ax_role</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2366"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var">addLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; LintLocInfo
</span><a href="GHC.Core.Lint.html#InAxiom"><span class="hs-identifier hs-var">InAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150101"><span class="hs-identifier hs-var">ax</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2367"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; CoAxBranch -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_branch"><span class="hs-identifier hs-var">lint_branch</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150098"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621681150091"><span class="hs-identifier hs-var">branch_list</span></a></span><span>
</span><span id="line-2368"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LintM ()
</span><a href="#local-6989586621681150090"><span class="hs-identifier hs-var">extra_checks</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2369"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2370"></span><span>    </span><span id="local-6989586621681150091"><span class="annot"><span class="annottext">branch_list :: [CoAxBranch]
</span><a href="#local-6989586621681150091"><span class="hs-identifier hs-var hs-var">branch_list</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (br :: BranchFlag). Branches br -&gt; [CoAxBranch]
</span><a href="GHC.Core.Coercion.Axiom.html#fromBranches"><span class="hs-identifier hs-var">fromBranches</span></a></span><span> </span><span class="annot"><span class="annottext">Branches Branched
</span><a href="#local-6989586621681150096"><span class="hs-identifier hs-var">branches</span></a></span><span>
</span><span id="line-2371"></span><span>
</span><span id="line-2372"></span><span>    </span><span id="local-6989586621681150090"><span class="annot"><span class="annottext">extra_checks :: LintM ()
</span><a href="#local-6989586621681150090"><span class="hs-identifier hs-var hs-var">extra_checks</span></a></span></span><span>
</span><span id="line-2373"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isNewTyCon"><span class="hs-identifier hs-var">isNewTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150098"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-2374"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cab_tvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_tvs"><span class="hs-identifier hs-var">cab_tvs</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150088"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150088"><span class="hs-identifier hs-var">tvs</span></a></span></span><span>
</span><span id="line-2375"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_eta_tvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_eta_tvs"><span class="hs-identifier hs-var">cab_eta_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150086"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150086"><span class="hs-identifier hs-var">eta_tvs</span></a></span></span><span>
</span><span id="line-2376"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_cvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_cvs"><span class="hs-identifier hs-var">cab_cvs</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150085"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150085"><span class="hs-identifier hs-var">cvs</span></a></span></span><span>
</span><span id="line-2377"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_roles :: CoAxBranch -&gt; [Role]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_roles"><span class="hs-identifier hs-var">cab_roles</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150084"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150084"><span class="hs-identifier hs-var">roles</span></a></span></span><span>
</span><span id="line-2378"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_lhs :: CoAxBranch -&gt; [LintedType]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_lhs"><span class="hs-identifier hs-var">cab_lhs</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150082"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150082"><span class="hs-identifier hs-var">lhs_tys</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2379"></span><span>              </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621681150091"><span class="hs-identifier hs-var">branch_list</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2380"></span><span>               </span><span class="hs-special">[</span><span id="local-6989586621681150081"><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621681150081"><span class="hs-identifier hs-var">branch</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621681150081"><span class="hs-identifier hs-var">branch</span></a></span><span>
</span><span id="line-2381"></span><span>               </span><span class="annot"><span class="annottext">[CoAxBranch]
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;multi-branch axiom with newtype&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2382"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150080"><span class="annot"><span class="annottext">ax_lhs :: LintedType
</span><a href="#local-6989586621681150080"><span class="hs-identifier hs-var hs-var">ax_lhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Var] -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#mkInfForAllTys"><span class="hs-identifier hs-var">mkInfForAllTys</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150088"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2383"></span><span>                          </span><span class="annot"><span class="annottext">TyCon -&gt; [LintedType] -&gt; LintedType
</span><a href="GHC.Core.Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150098"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150082"><span class="hs-identifier hs-var">lhs_tys</span></a></span><span>
</span><span id="line-2384"></span><span>                 </span><span id="local-6989586621681150077"><span class="annot"><span class="annottext">nt_tvs :: [Var]
</span><a href="#local-6989586621681150077"><span class="hs-identifier hs-var hs-var">nt_tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. [b] -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#takeList"><span class="hs-identifier hs-var">takeList</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150088"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [Var]
</span><a href="GHC.Core.TyCon.html#tyConTyVars"><span class="hs-identifier hs-var">tyConTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150098"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2385"></span><span>                    </span><span class="hs-comment">-- axiom may be eta-reduced: Note [Newtype eta] in GHC.Core.TyCon</span><span>
</span><span id="line-2386"></span><span>                 </span><span id="local-6989586621681150074"><span class="annot"><span class="annottext">nt_lhs :: LintedType
</span><a href="#local-6989586621681150074"><span class="hs-identifier hs-var hs-var">nt_lhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Var] -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#mkInfForAllTys"><span class="hs-identifier hs-var">mkInfForAllTys</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150077"><span class="hs-identifier hs-var">nt_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2387"></span><span>                          </span><span class="annot"><span class="annottext">TyCon -&gt; [LintedType] -&gt; LintedType
</span><a href="GHC.Core.Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150098"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var] -&gt; [LintedType]
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTys"><span class="hs-identifier hs-var">mkTyVarTys</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150077"><span class="hs-identifier hs-var">nt_tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2388"></span><span>                 </span><span class="hs-comment">-- See Note [Newtype eta] in GHC.Core.TyCon</span><span>
</span><span id="line-2389"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150080"><span class="hs-identifier hs-var">ax_lhs</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150074"><span class="hs-identifier hs-var">nt_lhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2390"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Newtype axiom LHS does not match newtype definition&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2391"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150085"><span class="hs-identifier hs-var">cvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2392"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Newtype axiom binds coercion variables&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2393"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150086"><span class="hs-identifier hs-var">eta_tvs</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- See Note [Eta reduction for data families]</span><span>
</span><span id="line-2394"></span><span>                                   </span><span class="hs-comment">-- which is not about newtype axioms</span><span>
</span><span id="line-2395"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Newtype axiom has eta-tvs&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2396"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150094"><span class="hs-identifier hs-var">ax_role</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Representational"><span class="hs-identifier hs-var">Representational</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2397"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Newtype axiom role not representational&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2398"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150084"><span class="hs-identifier hs-var">roles</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#equalLength"><span class="hs-operator hs-var">`equalLength`</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150088"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2399"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Newtype axiom roles list is the wrong length.&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-2400"></span><span>                    </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;roles:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150084"><span class="hs-identifier hs-var">roles</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2401"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150084"><span class="hs-identifier hs-var">roles</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">forall b a. [b] -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#takeList"><span class="hs-identifier hs-var">takeList</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150084"><span class="hs-identifier hs-var">roles</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [Role]
</span><a href="GHC.Core.TyCon.html#tyConRoles"><span class="hs-identifier hs-var">tyConRoles</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150098"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2402"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Newtype axiom roles do not match newtype tycon's.&quot;</span></span><span>
</span><span id="line-2403"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;axiom roles:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150084"><span class="hs-identifier hs-var">roles</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2404"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tycon roles:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [Role]
</span><a href="GHC.Core.TyCon.html#tyConRoles"><span class="hs-identifier hs-var">tyConRoles</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150098"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2405"></span><span>           </span><span class="hs-special">}</span><span>
</span><span id="line-2406"></span><span>
</span><span id="line-2407"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isFamilyTyCon"><span class="hs-identifier hs-var">isFamilyTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150098"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-2408"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isTypeFamilyTyCon"><span class="hs-identifier hs-var">isTypeFamilyTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150098"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-2409"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150094"><span class="hs-identifier hs-var">ax_role</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2410"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type family axiom is not nominal&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2411"></span><span>
</span><span id="line-2412"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isDataFamilyTyCon"><span class="hs-identifier hs-var">isDataFamilyTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150098"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-2413"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681150094"><span class="hs-identifier hs-var">ax_role</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Representational"><span class="hs-identifier hs-var">Representational</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2414"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;data family axiom is not representational&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2415"></span><span>
</span><span id="line-2416"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2417"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var">addErrL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;A family TyCon is neither a type family nor a data family:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150098"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2418"></span><span>
</span><span id="line-2419"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; CoAxBranch -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_family_branch"><span class="hs-identifier hs-var">lint_family_branch</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150098"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621681150091"><span class="hs-identifier hs-var">branch_list</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2420"></span><span>
</span><span id="line-2421"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2422"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var">addErrL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Axiom tycon is neither a newtype nor a family.&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2423"></span><span>
</span><span id="line-2424"></span><span class="annot"><a href="GHC.Core.Lint.html#lint_branch"><span class="hs-identifier hs-type">lint_branch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2425"></span><span id="lint_branch"><span class="annot"><span class="annottext">lint_branch :: TyCon -&gt; CoAxBranch -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_branch"><span class="hs-identifier hs-var hs-var">lint_branch</span></a></span></span><span> </span><span id="local-6989586621681150068"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150068"><span class="hs-identifier hs-var">ax_tc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cab_tvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_tvs"><span class="hs-identifier hs-var">cab_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150067"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150067"><span class="hs-identifier hs-var">tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_cvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_cvs"><span class="hs-identifier hs-var">cab_cvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150066"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150066"><span class="hs-identifier hs-var">cvs</span></a></span></span><span>
</span><span id="line-2426"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_lhs :: CoAxBranch -&gt; [LintedType]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_lhs"><span class="hs-identifier hs-var">cab_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150065"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150065"><span class="hs-identifier hs-var">lhs_args</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_rhs :: CoAxBranch -&gt; LintedType
</span><a href="GHC.Core.Coercion.Axiom.html#cab_rhs"><span class="hs-identifier hs-var">cab_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150063"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150063"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2427"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. BindingSite -&gt; [Var] -&gt; ([Var] -&gt; LintM a) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#lintBinders"><span class="hs-identifier hs-var">lintBinders</span></a></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="GHC.Utils.Outputable.html#LambdaBind"><span class="hs-identifier hs-var">LambdaBind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150067"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150066"><span class="hs-identifier hs-var">cvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[Var]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2428"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150062"><span class="annot"><span class="annottext">lhs :: LintedType
</span><a href="#local-6989586621681150062"><span class="hs-identifier hs-var hs-var">lhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [LintedType] -&gt; LintedType
</span><a href="GHC.Core.Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150068"><span class="hs-identifier hs-var">ax_tc</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150065"><span class="hs-identifier hs-var">lhs_args</span></a></span><span>
</span><span id="line-2429"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150061"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150061"><span class="hs-identifier hs-var">lhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150062"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-2430"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681150060"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150060"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintM LintedType
</span><a href="GHC.Core.Lint.html#lintType"><span class="hs-identifier hs-var">lintType</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150063"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-2431"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150059"><span class="annot"><span class="annottext">lhs_kind :: LintedType
</span><a href="#local-6989586621681150059"><span class="hs-identifier hs-var hs-var">lhs_kind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150061"><span class="hs-identifier hs-var">lhs'</span></a></span><span>
</span><span id="line-2432"></span><span>             </span><span id="local-6989586621681150058"><span class="annot"><span class="annottext">rhs_kind :: LintedType
</span><a href="#local-6989586621681150058"><span class="hs-identifier hs-var hs-var">rhs_kind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150060"><span class="hs-identifier hs-var">rhs'</span></a></span><span>
</span><span id="line-2433"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150059"><span class="hs-identifier hs-var">lhs_kind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150058"><span class="hs-identifier hs-var">rhs_kind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2434"></span><span>         </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Inhomogeneous axiom&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2435"></span><span>            </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lhs:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150062"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150059"><span class="hs-identifier hs-var">lhs_kind</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-2436"></span><span>               </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rhs:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150063"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150058"><span class="hs-identifier hs-var">rhs_kind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2437"></span><span>
</span><span id="line-2438"></span><span class="hs-comment">-- these checks do not apply to newtype axioms</span><span>
</span><span id="line-2439"></span><span class="annot"><a href="GHC.Core.Lint.html#lint_family_branch"><span class="hs-identifier hs-type">lint_family_branch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2440"></span><span id="lint_family_branch"><span class="annot"><span class="annottext">lint_family_branch :: TyCon -&gt; CoAxBranch -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_family_branch"><span class="hs-identifier hs-var hs-var">lint_family_branch</span></a></span></span><span> </span><span id="local-6989586621681150057"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150057"><span class="hs-identifier hs-var">fam_tc</span></a></span></span><span> </span><span id="local-6989586621681150056"><span class="annot"><span class="annottext">br :: CoAxBranch
</span><a href="#local-6989586621681150056"><span class="hs-identifier hs-var">br</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cab_tvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_tvs"><span class="hs-identifier hs-var">cab_tvs</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150055"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150055"><span class="hs-identifier hs-var">tvs</span></a></span></span><span>
</span><span id="line-2441"></span><span>                                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_eta_tvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_eta_tvs"><span class="hs-identifier hs-var">cab_eta_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150054"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150054"><span class="hs-identifier hs-var">eta_tvs</span></a></span></span><span>
</span><span id="line-2442"></span><span>                                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_cvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_cvs"><span class="hs-identifier hs-var">cab_cvs</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150053"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150053"><span class="hs-identifier hs-var">cvs</span></a></span></span><span>
</span><span id="line-2443"></span><span>                                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_roles :: CoAxBranch -&gt; [Role]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_roles"><span class="hs-identifier hs-var">cab_roles</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150052"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150052"><span class="hs-identifier hs-var">roles</span></a></span></span><span>
</span><span id="line-2444"></span><span>                                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_lhs :: CoAxBranch -&gt; [LintedType]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_lhs"><span class="hs-identifier hs-var">cab_lhs</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150051"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150051"><span class="hs-identifier hs-var">lhs</span></a></span></span><span>
</span><span id="line-2445"></span><span>                                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_incomps :: CoAxBranch -&gt; [CoAxBranch]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_incomps"><span class="hs-identifier hs-var">cab_incomps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150049"><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621681150049"><span class="hs-identifier hs-var">incomps</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2446"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isDataFamilyTyCon"><span class="hs-identifier hs-var">isDataFamilyTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150057"><span class="hs-identifier hs-var">fam_tc</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150054"><span class="hs-identifier hs-var">eta_tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2447"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type family axiom has eta-tvs&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2448"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; IdSet -&gt; Bool
</span><a href="GHC.Types.Var.Set.html#elemVarSet"><span class="hs-operator hs-var">`elemVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType] -&gt; IdSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypes"><span class="hs-identifier hs-var">tyCoVarsOfTypes</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150051"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150055"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2449"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Quantified variable in family axiom unused in LHS&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2450"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isTyFamFree"><span class="hs-identifier hs-var">isTyFamFree</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150051"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2451"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type family application on LHS of family axiom&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2452"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150052"><span class="hs-identifier hs-var">roles</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2453"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Non-nominal role in family axiom&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-2454"></span><span>                </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;roles:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681150052"><span class="hs-identifier hs-var">roles</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2455"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150053"><span class="hs-identifier hs-var">cvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2456"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Coercion variables bound in family axiom&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2457"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621681150049"><span class="hs-identifier hs-var">incomps</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681150047"><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621681150047"><span class="hs-identifier hs-var">br'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2458"></span><span>           </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxBranch -&gt; CoAxBranch -&gt; Bool
</span><a href="GHC.Core.Lint.html#compatible_branches"><span class="hs-identifier hs-var">compatible_branches</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621681150056"><span class="hs-identifier hs-var">br</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621681150047"><span class="hs-identifier hs-var">br'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2459"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Incorrect incompatible branch:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621681150047"><span class="hs-identifier hs-var">br'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2460"></span><span>
</span><span id="line-2461"></span><span class="annot"><a href="GHC.Core.Lint.html#lint_axiom_group"><span class="hs-identifier hs-type">lint_axiom_group</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#NonEmpty"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2462"></span><span id="lint_axiom_group"><span class="annot"><span class="annottext">lint_axiom_group :: NonEmpty (CoAxiom Branched) -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_axiom_group"><span class="hs-identifier hs-var hs-var">lint_axiom_group</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiom Branched
</span><span class="hs-identifier">_</span></span><span>  </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#%3A%7C"><span class="hs-operator hs-type">:|</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2463"></span><span class="annot"><a href="GHC.Core.Lint.html#lint_axiom_group"><span class="hs-identifier hs-var">lint_axiom_group</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150045"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150045"><span class="hs-identifier hs-var">ax</span></a></span></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#%3A%7C"><span class="hs-operator hs-type">:|</span></a></span><span> </span><span id="local-6989586621681150044"><span class="annot"><span class="annottext">[CoAxiom Branched]
</span><a href="#local-6989586621681150044"><span class="hs-identifier hs-var">axs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2464"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isOpenFamilyTyCon"><span class="hs-identifier hs-var">isOpenFamilyTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150042"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2465"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Non-open-family with multiple axioms&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2466"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150041"><span class="annot"><span class="annottext">all_pairs :: [(CoAxiom Branched, CoAxiom Branched)]
</span><a href="#local-6989586621681150041"><span class="hs-identifier hs-var hs-var">all_pairs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150040"><span class="hs-identifier hs-var">ax1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150039"><span class="hs-identifier hs-var">ax2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681150040"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150040"><span class="hs-identifier hs-var">ax1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[CoAxiom Branched]
</span><a href="#local-6989586621681150038"><span class="hs-identifier hs-var">all_axs</span></a></span><span>
</span><span id="line-2467"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150039"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150039"><span class="hs-identifier hs-var">ax2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[CoAxiom Branched]
</span><a href="#local-6989586621681150038"><span class="hs-identifier hs-var">all_axs</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2468"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; (CoAxiom Branched, CoAxiom Branched) -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_axiom_pair"><span class="hs-identifier hs-var">lint_axiom_pair</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150042"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(CoAxiom Branched, CoAxiom Branched)]
</span><a href="#local-6989586621681150041"><span class="hs-identifier hs-var">all_pairs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2469"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2470"></span><span>    </span><span id="local-6989586621681150038"><span class="annot"><span class="annottext">all_axs :: [CoAxiom Branched]
</span><a href="#local-6989586621681150038"><span class="hs-identifier hs-var hs-var">all_axs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150045"><span class="hs-identifier hs-var">ax</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[CoAxiom Branched]
</span><a href="#local-6989586621681150044"><span class="hs-identifier hs-var">axs</span></a></span><span>
</span><span id="line-2471"></span><span>    </span><span id="local-6989586621681150042"><span class="annot"><span class="annottext">tc :: TyCon
</span><a href="#local-6989586621681150042"><span class="hs-identifier hs-var hs-var">tc</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; TyCon
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomTyCon"><span class="hs-identifier hs-var">coAxiomTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150045"><span class="hs-identifier hs-var">ax</span></a></span><span>
</span><span id="line-2472"></span><span>
</span><span id="line-2473"></span><span class="annot"><a href="GHC.Core.Lint.html#lint_axiom_pair"><span class="hs-identifier hs-type">lint_axiom_pair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2474"></span><span id="lint_axiom_pair"><span class="annot"><span class="annottext">lint_axiom_pair :: TyCon -&gt; (CoAxiom Branched, CoAxiom Branched) -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lint_axiom_pair"><span class="hs-identifier hs-var hs-var">lint_axiom_pair</span></a></span></span><span> </span><span id="local-6989586621681150036"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150036"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681150035"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150035"><span class="hs-identifier hs-var">ax1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681150034"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150034"><span class="hs-identifier hs-var">ax2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2475"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681150033"><span class="annot"><span class="annottext">br1 :: CoAxBranch
</span><a href="#local-6989586621681150033"><span class="hs-identifier hs-var">br1</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cab_tvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_tvs"><span class="hs-identifier hs-var">cab_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150032"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150032"><span class="hs-identifier hs-var">tvs1</span></a></span></span><span>
</span><span id="line-2476"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_lhs :: CoAxBranch -&gt; [LintedType]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_lhs"><span class="hs-identifier hs-var">cab_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150031"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150031"><span class="hs-identifier hs-var">lhs1</span></a></span></span><span>
</span><span id="line-2477"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_rhs :: CoAxBranch -&gt; LintedType
</span><a href="GHC.Core.Coercion.Axiom.html#cab_rhs"><span class="hs-identifier hs-var">cab_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150030"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150030"><span class="hs-identifier hs-var">rhs1</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; Maybe CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomSingleBranch_maybe"><span class="hs-identifier hs-var">coAxiomSingleBranch_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150035"><span class="hs-identifier hs-var">ax1</span></a></span><span>
</span><span id="line-2478"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681150028"><span class="annot"><span class="annottext">br2 :: CoAxBranch
</span><a href="#local-6989586621681150028"><span class="hs-identifier hs-var">br2</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cab_tvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_tvs"><span class="hs-identifier hs-var">cab_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150027"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150027"><span class="hs-identifier hs-var">tvs2</span></a></span></span><span>
</span><span id="line-2479"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_lhs :: CoAxBranch -&gt; [LintedType]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_lhs"><span class="hs-identifier hs-var">cab_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150026"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150026"><span class="hs-identifier hs-var">lhs2</span></a></span></span><span>
</span><span id="line-2480"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_rhs :: CoAxBranch -&gt; LintedType
</span><a href="GHC.Core.Coercion.Axiom.html#cab_rhs"><span class="hs-identifier hs-var">cab_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150025"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150025"><span class="hs-identifier hs-var">rhs2</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; Maybe CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomSingleBranch_maybe"><span class="hs-identifier hs-var">coAxiomSingleBranch_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150034"><span class="hs-identifier hs-var">ax2</span></a></span><span>
</span><span id="line-2481"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxBranch -&gt; CoAxBranch -&gt; Bool
</span><a href="GHC.Core.Lint.html#compatible_branches"><span class="hs-identifier hs-var">compatible_branches</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621681150033"><span class="hs-identifier hs-var">br1</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621681150028"><span class="hs-identifier hs-var">br2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2482"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Axioms&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150035"><span class="hs-identifier hs-var">ax1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;and&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150034"><span class="hs-identifier hs-var">ax2</span></a></span><span>
</span><span id="line-2483"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;are incompatible&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2484"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tvs1 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Var] -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVars"><span class="hs-identifier hs-var">pprTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150032"><span class="hs-identifier hs-var">tvs1</span></a></span><span>
</span><span id="line-2485"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lhs1 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [LintedType] -&gt; LintedType
</span><a href="GHC.Core.Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150036"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150031"><span class="hs-identifier hs-var">lhs1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2486"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rhs1 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150030"><span class="hs-identifier hs-var">rhs1</span></a></span><span>
</span><span id="line-2487"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tvs2 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Var] -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVars"><span class="hs-identifier hs-var">pprTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150027"><span class="hs-identifier hs-var">tvs2</span></a></span><span>
</span><span id="line-2488"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lhs2 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [LintedType] -&gt; LintedType
</span><a href="GHC.Core.Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681150036"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150026"><span class="hs-identifier hs-var">lhs2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2489"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rhs2 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150025"><span class="hs-identifier hs-var">rhs2</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2490"></span><span>
</span><span id="line-2491"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2492"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var">addErrL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Open type family axiom has more than one branch: either&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-2493"></span><span>             </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150035"><span class="hs-identifier hs-var">ax1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;or&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681150034"><span class="hs-identifier hs-var">ax2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2494"></span><span>
</span><span id="line-2495"></span><span class="annot"><a href="GHC.Core.Lint.html#compatible_branches"><span class="hs-identifier hs-type">compatible_branches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2496"></span><span class="hs-comment">-- True &lt;=&gt; branches are compatible. See Note [Compatibility] in GHC.Core.FamInstEnv.</span><span>
</span><span id="line-2497"></span><span id="compatible_branches"><span class="annot"><span class="annottext">compatible_branches :: CoAxBranch -&gt; CoAxBranch -&gt; Bool
</span><a href="GHC.Core.Lint.html#compatible_branches"><span class="hs-identifier hs-var hs-var">compatible_branches</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cab_tvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_tvs"><span class="hs-identifier hs-var">cab_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150023"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150023"><span class="hs-identifier hs-var">tvs1</span></a></span></span><span>
</span><span id="line-2498"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_lhs :: CoAxBranch -&gt; [LintedType]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_lhs"><span class="hs-identifier hs-var">cab_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150022"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150022"><span class="hs-identifier hs-var">lhs1</span></a></span></span><span>
</span><span id="line-2499"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_rhs :: CoAxBranch -&gt; LintedType
</span><a href="GHC.Core.Coercion.Axiom.html#cab_rhs"><span class="hs-identifier hs-var">cab_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150021"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150021"><span class="hs-identifier hs-var">rhs1</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2500"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cab_tvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_tvs"><span class="hs-identifier hs-var">cab_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150020"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150020"><span class="hs-identifier hs-var">tvs2</span></a></span></span><span>
</span><span id="line-2501"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_lhs :: CoAxBranch -&gt; [LintedType]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_lhs"><span class="hs-identifier hs-var">cab_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150019"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150019"><span class="hs-identifier hs-var">lhs2</span></a></span></span><span>
</span><span id="line-2502"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_rhs :: CoAxBranch -&gt; LintedType
</span><a href="GHC.Core.Coercion.Axiom.html#cab_rhs"><span class="hs-identifier hs-var">cab_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681150018"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150018"><span class="hs-identifier hs-var">rhs2</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2503"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- we need to freshen ax2 w.r.t. ax1</span><span>
</span><span id="line-2504"></span><span>    </span><span class="hs-comment">-- do this by pretending tvs1 are in scope when processing tvs2</span><span>
</span><span id="line-2505"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681150017"><span class="annot"><span class="annottext">in_scope :: InScopeSet
</span><a href="#local-6989586621681150017"><span class="hs-identifier hs-var hs-var">in_scope</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdSet -&gt; InScopeSet
</span><a href="GHC.Types.Var.Env.html#mkInScopeSet"><span class="hs-identifier hs-var">mkInScopeSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var] -&gt; IdSet
</span><a href="GHC.Types.Var.Set.html#mkVarSet"><span class="hs-identifier hs-var">mkVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150023"><span class="hs-identifier hs-var">tvs1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2506"></span><span>        </span><span id="local-6989586621681150014"><span class="annot"><span class="annottext">subst0 :: TCvSubst
</span><a href="#local-6989586621681150014"><span class="hs-identifier hs-var hs-var">subst0</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InScopeSet -&gt; TCvSubst
</span><a href="GHC.Core.TyCo.Subst.html#mkEmptyTCvSubst"><span class="hs-identifier hs-var">mkEmptyTCvSubst</span></a></span><span> </span><span class="annot"><span class="annottext">InScopeSet
</span><a href="#local-6989586621681150017"><span class="hs-identifier hs-var">in_scope</span></a></span><span>
</span><span id="line-2507"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681150013"><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150013"><span class="hs-identifier hs-var">subst</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Var]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TCvSubst -&gt; [Var] -&gt; (TCvSubst, [Var])
</span><a href="GHC.Core.TyCo.Subst.html#substTyVarBndrs"><span class="hs-identifier hs-var">substTyVarBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150014"><span class="hs-identifier hs-var">subst0</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681150020"><span class="hs-identifier hs-var">tvs2</span></a></span><span>
</span><span id="line-2508"></span><span>        </span><span id="local-6989586621681150011"><span class="annot"><span class="annottext">lhs2' :: [LintedType]
</span><a href="#local-6989586621681150011"><span class="hs-identifier hs-var hs-var">lhs2'</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TCvSubst -&gt; [LintedType] -&gt; [LintedType]
</span><a href="GHC.Core.TyCo.Subst.html#substTys"><span class="hs-identifier hs-var">substTys</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150013"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150019"><span class="hs-identifier hs-var">lhs2</span></a></span><span>
</span><span id="line-2509"></span><span>        </span><span id="local-6989586621681150009"><span class="annot"><span class="annottext">rhs2' :: LintedType
</span><a href="#local-6989586621681150009"><span class="hs-identifier hs-var hs-var">rhs2'</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TCvSubst -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.TyCo.Subst.html#substTy"><span class="hs-identifier hs-var">substTy</span></a></span><span>  </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150013"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150018"><span class="hs-identifier hs-var">rhs2</span></a></span><span>
</span><span id="line-2510"></span><span>    </span><span class="hs-keyword">in</span><span>
</span><span id="line-2511"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">BindFun -&gt; [LintedType] -&gt; [LintedType] -&gt; Maybe TCvSubst
</span><a href="GHC.Core.Unify.html#tcUnifyTys"><span class="hs-identifier hs-var">tcUnifyTys</span></a></span><span> </span><span class="annot"><span class="annottext">BindFun
</span><a href="GHC.Core.Unify.html#alwaysBindFun"><span class="hs-identifier hs-var">alwaysBindFun</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150022"><span class="hs-identifier hs-var">lhs1</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681150011"><span class="hs-identifier hs-var">lhs2'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2512"></span><span>      </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681150006"><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150006"><span class="hs-identifier hs-var">unifying_subst</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TCvSubst -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.TyCo.Subst.html#substTy"><span class="hs-identifier hs-var">substTy</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150006"><span class="hs-identifier hs-var">unifying_subst</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150021"><span class="hs-identifier hs-var">rhs1</span></a></span><span>  </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span>
</span><span id="line-2513"></span><span>                             </span><span class="annot"><span class="annottext">HasCallStack =&gt; TCvSubst -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.TyCo.Subst.html#substTy"><span class="hs-identifier hs-var">substTy</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681150006"><span class="hs-identifier hs-var">unifying_subst</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681150009"><span class="hs-identifier hs-var">rhs2'</span></a></span><span>
</span><span id="line-2514"></span><span>      </span><span class="annot"><span class="annottext">Maybe TCvSubst
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2515"></span><span>
</span><span id="line-2516"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[lint-monad]{The Lint monad}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-2523"></span><span>
</span><span id="line-2524"></span><span class="hs-comment">-- If you edit this type, you may need to update the GHC formalism</span><span>
</span><span id="line-2525"></span><span class="hs-comment">-- See Note [GHC Formalism]</span><span>
</span><span id="line-2526"></span><span class="hs-keyword">data</span><span> </span><span id="LintEnv"><span class="annot"><a href="GHC.Core.Lint.html#LintEnv"><span class="hs-identifier hs-var">LintEnv</span></a></span></span><span>
</span><span id="line-2527"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="LE"><span class="annot"><a href="GHC.Core.Lint.html#LE"><span class="hs-identifier hs-var">LE</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="le_flags"><span class="annot"><span class="annottext">LintEnv -&gt; LintFlags
</span><a href="GHC.Core.Lint.html#le_flags"><span class="hs-identifier hs-var hs-var">le_flags</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintFlags"><span class="hs-identifier hs-type">LintFlags</span></a></span><span>       </span><span class="hs-comment">-- Linting the result of this pass</span><span>
</span><span id="line-2528"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="le_loc"><span class="annot"><span class="annottext">LintEnv -&gt; [LintLocInfo]
</span><a href="GHC.Core.Lint.html#le_loc"><span class="hs-identifier hs-var hs-var">le_loc</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Lint.html#LintLocInfo"><span class="hs-identifier hs-type">LintLocInfo</span></a></span><span class="hs-special">]</span><span>   </span><span class="hs-comment">-- Locations</span><span>
</span><span id="line-2529"></span><span>
</span><span id="line-2530"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="le_subst"><span class="annot"><span class="annottext">LintEnv -&gt; TCvSubst
</span><a href="GHC.Core.Lint.html#le_subst"><span class="hs-identifier hs-var hs-var">le_subst</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Subst.html#TCvSubst"><span class="hs-identifier hs-type">TCvSubst</span></a></span><span>  </span><span class="hs-comment">-- Current TyCo substitution</span><span>
</span><span id="line-2531"></span><span>                               </span><span class="hs-comment">--    See Note [Linting type lets]</span><span>
</span><span id="line-2532"></span><span>            </span><span class="hs-comment">-- /Only/ substitutes for type variables;</span><span>
</span><span id="line-2533"></span><span>            </span><span class="hs-comment">--        but might clone CoVars</span><span>
</span><span id="line-2534"></span><span>            </span><span class="hs-comment">-- We also use le_subst to keep track of</span><span>
</span><span id="line-2535"></span><span>            </span><span class="hs-comment">-- in-scope TyVars and CoVars (but not Ids)</span><span>
</span><span id="line-2536"></span><span>            </span><span class="hs-comment">-- Range of the TCvSubst is LintedType/LintedCo</span><span>
</span><span id="line-2537"></span><span>
</span><span id="line-2538"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="le_ids"><span class="annot"><span class="annottext">LintEnv -&gt; VarEnv (Var, LintedType)
</span><a href="GHC.Core.Lint.html#le_ids"><span class="hs-identifier hs-var hs-var">le_ids</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#VarEnv"><span class="hs-identifier hs-type">VarEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">)</span><span>    </span><span class="hs-comment">-- In-scope Ids</span><span>
</span><span id="line-2539"></span><span>            </span><span class="hs-comment">-- Used to check that occurrences have an enclosing binder.</span><span>
</span><span id="line-2540"></span><span>            </span><span class="hs-comment">-- The Id is /pre-substitution/, used to check that</span><span>
</span><span id="line-2541"></span><span>            </span><span class="hs-comment">-- the occurrence has an identical type to the binder</span><span>
</span><span id="line-2542"></span><span>            </span><span class="hs-comment">-- The LintedType is used to return the type of the occurrence,</span><span>
</span><span id="line-2543"></span><span>            </span><span class="hs-comment">-- without having to lint it again.</span><span>
</span><span id="line-2544"></span><span>
</span><span id="line-2545"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="le_joins"><span class="annot"><span class="annottext">LintEnv -&gt; IdSet
</span><a href="GHC.Core.Lint.html#le_joins"><span class="hs-identifier hs-var hs-var">le_joins</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#IdSet"><span class="hs-identifier hs-type">IdSet</span></a></span><span>     </span><span class="hs-comment">-- Join points in scope that are valid</span><span>
</span><span id="line-2546"></span><span>                               </span><span class="hs-comment">-- A subset of the InScopeSet in le_subst</span><span>
</span><span id="line-2547"></span><span>                               </span><span class="hs-comment">-- See Note [Join points]</span><span>
</span><span id="line-2548"></span><span>
</span><span id="line-2549"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="le_dynflags"><span class="annot"><span class="annottext">LintEnv -&gt; DynFlags
</span><a href="GHC.Core.Lint.html#le_dynflags"><span class="hs-identifier hs-var hs-var">le_dynflags</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>     </span><span class="hs-comment">-- DynamicFlags</span><span>
</span><span id="line-2550"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="le_ue_aliases"><span class="annot"><span class="annottext">LintEnv -&gt; NameEnv UsageEnv
</span><a href="GHC.Core.Lint.html#le_ue_aliases"><span class="hs-identifier hs-var hs-var">le_ue_aliases</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html#NameEnv"><span class="hs-identifier hs-type">NameEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span> </span><span class="hs-comment">-- Assigns usage environments to the</span><span>
</span><span id="line-2551"></span><span>                                           </span><span class="hs-comment">-- alias-like binders, as found in</span><span>
</span><span id="line-2552"></span><span>                                           </span><span class="hs-comment">-- non-recursive lets.</span><span>
</span><span id="line-2553"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-2554"></span><span>
</span><span id="line-2555"></span><span class="hs-keyword">data</span><span> </span><span id="LintFlags"><span class="annot"><a href="GHC.Core.Lint.html#LintFlags"><span class="hs-identifier hs-var">LintFlags</span></a></span></span><span>
</span><span id="line-2556"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="LF"><span class="annot"><a href="GHC.Core.Lint.html#LF"><span class="hs-identifier hs-var">LF</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="lf_check_global_ids"><span class="annot"><span class="annottext">LintFlags -&gt; Bool
</span><a href="GHC.Core.Lint.html#lf_check_global_ids"><span class="hs-identifier hs-var hs-var">lf_check_global_ids</span></a></span></span><span>           </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- See Note [Checking for global Ids]</span><span>
</span><span id="line-2557"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="lf_check_inline_loop_breakers"><span class="annot"><span class="annottext">LintFlags -&gt; Bool
</span><a href="GHC.Core.Lint.html#lf_check_inline_loop_breakers"><span class="hs-identifier hs-var hs-var">lf_check_inline_loop_breakers</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- See Note [Checking for INLINE loop breakers]</span><span>
</span><span id="line-2558"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="lf_check_static_ptrs"><span class="annot"><span class="annottext">LintFlags -&gt; StaticPtrCheck
</span><a href="GHC.Core.Lint.html#lf_check_static_ptrs"><span class="hs-identifier hs-var hs-var">lf_check_static_ptrs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#StaticPtrCheck"><span class="hs-identifier hs-type">StaticPtrCheck</span></a></span><span> </span><span class="hs-comment">-- ^ See Note [Checking StaticPtrs]</span><span>
</span><span id="line-2559"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="lf_report_unsat_syns"><span class="annot"><span class="annottext">LintFlags -&gt; Bool
</span><a href="GHC.Core.Lint.html#lf_report_unsat_syns"><span class="hs-identifier hs-var hs-var">lf_report_unsat_syns</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- ^ See Note [Linting type synonym applications]</span><span>
</span><span id="line-2560"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="lf_check_linearity"><span class="annot"><span class="annottext">LintFlags -&gt; Bool
</span><a href="GHC.Core.Lint.html#lf_check_linearity"><span class="hs-identifier hs-var hs-var">lf_check_linearity</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- ^ See Note [Linting linearity]</span><span>
</span><span id="line-2561"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="lf_check_levity_poly"><span class="annot"><span class="annottext">LintFlags -&gt; Bool
</span><a href="GHC.Core.Lint.html#lf_check_levity_poly"><span class="hs-identifier hs-var hs-var">lf_check_levity_poly</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- See Note [Checking for levity polymorphism]</span><span>
</span><span id="line-2562"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-2563"></span><span>
</span><span id="line-2564"></span><span class="hs-comment">-- See Note [Checking StaticPtrs]</span><span>
</span><span id="line-2565"></span><span class="hs-keyword">data</span><span> </span><span id="StaticPtrCheck"><span class="annot"><a href="GHC.Core.Lint.html#StaticPtrCheck"><span class="hs-identifier hs-var">StaticPtrCheck</span></a></span></span><span>
</span><span id="line-2566"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="AllowAnywhere"><span class="annot"><a href="GHC.Core.Lint.html#AllowAnywhere"><span class="hs-identifier hs-var">AllowAnywhere</span></a></span></span><span>
</span><span id="line-2567"></span><span>        </span><span class="hs-comment">-- ^ Allow 'makeStatic' to occur anywhere.</span><span>
</span><span id="line-2568"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="AllowAtTopLevel"><span class="annot"><a href="GHC.Core.Lint.html#AllowAtTopLevel"><span class="hs-identifier hs-var">AllowAtTopLevel</span></a></span></span><span>
</span><span id="line-2569"></span><span>        </span><span class="hs-comment">-- ^ Allow 'makeStatic' calls at the top-level only.</span><span>
</span><span id="line-2570"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="RejectEverywhere"><span class="annot"><a href="GHC.Core.Lint.html#RejectEverywhere"><span class="hs-identifier hs-var">RejectEverywhere</span></a></span></span><span>
</span><span id="line-2571"></span><span>        </span><span class="hs-comment">-- ^ Reject any 'makeStatic' occurrence.</span><span>
</span><span id="line-2572"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681149993"><span id="local-6989586621681149995"><span class="annot"><span class="annottext">StaticPtrCheck -&gt; StaticPtrCheck -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: StaticPtrCheck -&gt; StaticPtrCheck -&gt; Bool
$c/= :: StaticPtrCheck -&gt; StaticPtrCheck -&gt; Bool
== :: StaticPtrCheck -&gt; StaticPtrCheck -&gt; Bool
$c== :: StaticPtrCheck -&gt; StaticPtrCheck -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span>
</span><span id="line-2573"></span><span>
</span><span id="line-2574"></span><span class="annot"><a href="GHC.Core.Lint.html#defaultLintFlags"><span class="hs-identifier hs-type">defaultLintFlags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintFlags"><span class="hs-identifier hs-type">LintFlags</span></a></span><span>
</span><span id="line-2575"></span><span id="defaultLintFlags"><span class="annot"><span class="annottext">defaultLintFlags :: DynFlags -&gt; LintFlags
</span><a href="GHC.Core.Lint.html#defaultLintFlags"><span class="hs-identifier hs-var hs-var">defaultLintFlags</span></a></span></span><span> </span><span id="local-6989586621681149991"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681149991"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LF"><span class="hs-identifier hs-type">LF</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lf_check_global_ids :: Bool
</span><a href="GHC.Core.Lint.html#lf_check_global_ids"><span class="hs-identifier hs-var">lf_check_global_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2576"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lf_check_inline_loop_breakers :: Bool
</span><a href="GHC.Core.Lint.html#lf_check_inline_loop_breakers"><span class="hs-identifier hs-var">lf_check_inline_loop_breakers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2577"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lf_check_static_ptrs :: StaticPtrCheck
</span><a href="GHC.Core.Lint.html#lf_check_static_ptrs"><span class="hs-identifier hs-var">lf_check_static_ptrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StaticPtrCheck
</span><a href="GHC.Core.Lint.html#AllowAnywhere"><span class="hs-identifier hs-var">AllowAnywhere</span></a></span><span>
</span><span id="line-2578"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lf_check_linearity :: Bool
</span><a href="GHC.Core.Lint.html#lf_check_linearity"><span class="hs-identifier hs-var">lf_check_linearity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GeneralFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#gopt"><span class="hs-identifier hs-var">gopt</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_DoLinearCoreLinting"><span class="hs-identifier hs-var">Opt_DoLinearCoreLinting</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681149991"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-2579"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lf_report_unsat_syns :: Bool
</span><a href="GHC.Core.Lint.html#lf_report_unsat_syns"><span class="hs-identifier hs-var">lf_report_unsat_syns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2580"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lf_check_levity_poly :: Bool
</span><a href="GHC.Core.Lint.html#lf_check_levity_poly"><span class="hs-identifier hs-var">lf_check_levity_poly</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2581"></span><span>                             </span><span class="hs-special">}</span><span>
</span><span id="line-2582"></span><span>
</span><span id="line-2583"></span><span class="hs-keyword">newtype</span><span> </span><span id="LintM"><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span></span><span> </span><span id="local-6989586621681152451"><span class="annot"><a href="#local-6989586621681152451"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2584"></span><span>   </span><span id="LintM"><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unLintM"><span class="annot"><span class="annottext">forall a.
LintM a -&gt; LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)
</span><a href="GHC.Core.Lint.html#unLintM"><span class="hs-identifier hs-var hs-var">unLintM</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-2585"></span><span>            </span><span class="annot"><a href="GHC.Core.Lint.html#LintEnv"><span class="hs-identifier hs-type">LintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2586"></span><span>            </span><span class="annot"><a href="GHC.Core.Lint.html#WarnsAndErrs"><span class="hs-identifier hs-type">WarnsAndErrs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>           </span><span class="hs-comment">-- Warning and error messages so far</span><span>
</span><span id="line-2587"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152451"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#WarnsAndErrs"><span class="hs-identifier hs-type">WarnsAndErrs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-comment">-- Result and messages (if any)</span><span>
</span><span id="line-2588"></span><span>   </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681149983"><span id="local-6989586621681149987"><span class="annot"><span class="annottext">forall a b. a -&gt; LintM b -&gt; LintM a
forall a b. (a -&gt; b) -&gt; LintM a -&gt; LintM b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: forall a b. a -&gt; LintM b -&gt; LintM a
$c&lt;$ :: forall a b. a -&gt; LintM b -&gt; LintM a
fmap :: forall a b. (a -&gt; b) -&gt; LintM a -&gt; LintM b
$cfmap :: forall a b. (a -&gt; b) -&gt; LintM a -&gt; LintM b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#Functor"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-2589"></span><span>
</span><span id="line-2590"></span><span class="hs-keyword">type</span><span> </span><span id="WarnsAndErrs"><span class="annot"><a href="GHC.Core.Lint.html#WarnsAndErrs"><span class="hs-identifier hs-var">WarnsAndErrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2591"></span><span>
</span><span id="line-2592"></span><span class="hs-comment">{- Note [Checking for global Ids]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Before CoreTidy, all locally-bound Ids must be LocalIds, even
top-level ones. See Note [Exported LocalIds] and #9857.

Note [Checking StaticPtrs]
~~~~~~~~~~~~~~~~~~~~~~~~~~
See Note [Grand plan for static forms] in GHC.Iface.Tidy.StaticPtrTable for an overview.

Every occurrence of the function 'makeStatic' should be moved to the
top level by the FloatOut pass.  It's vital that we don't have nested
'makeStatic' occurrences after CorePrep, because we populate the Static
Pointer Table from the top-level bindings. See SimplCore Note [Grand
plan for static forms].

The linter checks that no occurrence is left behind, nested within an
expression. The check is enabled only after the FloatOut, CorePrep,
and CoreTidy passes and only if the module uses the StaticPointers
language extension. Checking more often doesn't help since the condition
doesn't hold until after the first FloatOut pass.

Note [Type substitution]
~~~~~~~~~~~~~~~~~~~~~~~~
Why do we need a type substitution?  Consider
        /\(a:*). \(x:a). /\(a:*). id a x
This is ill typed, because (renaming variables) it is really
        /\(a:*). \(x:a). /\(b:*). id b x
Hence, when checking an application, we can't naively compare x's type
(at its binding site) with its expected type (at a use site).  So we
rename type binders as we go, maintaining a substitution.

The same substitution also supports let-type, current expressed as
        (/\(a:*). body) ty
Here we substitute 'ty' for 'a' in 'body', on the fly.

Note [Linting type synonym applications]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When linting a type-synonym, or type-family, application
  S ty1 .. tyn
we behave as follows (#15057, #T15664):

* If lf_report_unsat_syns = True, and S has arity &lt; n,
  complain about an unsaturated type synonym or type family

* Switch off lf_report_unsat_syns, and lint ty1 .. tyn.

  Reason: catch out of scope variables or other ill-kinded gubbins,
  even if S discards that argument entirely. E.g. (#15012):
     type FakeOut a = Int
     type family TF a
     type instance TF Int = FakeOut a
  Here 'a' is out of scope; but if we expand FakeOut, we conceal
  that out-of-scope error.

  Reason for switching off lf_report_unsat_syns: with
  LiberalTypeSynonyms, GHC allows unsaturated synonyms provided they
  are saturated when the type is expanded. Example
     type T f = f Int
     type S a = a -&gt; a
     type Z = T S
  In Z's RHS, S appears unsaturated, but it is saturated when T is expanded.

* If lf_report_unsat_syns is on, expand the synonym application and
  lint the result.  Reason: want to check that synonyms are saturated
  when the type is expanded.

Note [Linting linearity]
~~~~~~~~~~~~~~~~~~~~~~~~
There are two known optimisations that have not yet been updated
to work with Linear Lint:

* Lambda-bound variables with unfoldings
  (see Note [Case binders and join points] and ticket #17530)
* Optimisations can create a letrec which uses a variable linearly, e.g.
    letrec f True = f False
           f False = x
    in f True
  uses 'x' linearly, but this is not seen by the linter.
  Plan: make let-bound variables remember the usage environment.
  See ticket #18694.

We plan to fix both of the issues in the very near future.
For now, -dcore-lint enables only linting output of the desugarer,
and full Linear Lint has to be enabled separately with -dlinear-core-lint.
Ticket #19165 concerns enabling Linear Lint with -dcore-lint.
-}</span><span>
</span><span id="line-2678"></span><span>
</span><span id="line-2679"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681149971"><span id="local-6989586621681149973"><span id="local-6989586621681149975"><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#Applicative"><span class="hs-identifier hs-type">Applicative</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2680"></span><span>      </span><span id="local-6989586621681149969"><span class="annot"><span class="annottext">pure :: forall a. a -&gt; LintM a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></a></span></span><span> </span><span id="local-6989586621681149968"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681149968"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681149967"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149967"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681149968"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149967"><span class="hs-identifier hs-var">errs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2681"></span><span>      </span><span id="local-6989586621681149965"><span class="annot"><span class="annottext">&lt;*&gt; :: forall a b. LintM (a -&gt; b) -&gt; LintM a -&gt; LintM b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;*&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m (a -&gt; b) -&gt; m a -&gt; m b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#ap"><span class="hs-identifier hs-var">ap</span></a></span><span>
</span><span id="line-2682"></span><span>
</span><span id="line-2683"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681149957"><span id="local-6989586621681149959"><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2684"></span><span>  </span><span id="local-6989586621681149955"><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149955"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681149954"><span class="annot"><span class="annottext">&gt;&gt;= :: forall a b. LintM a -&gt; (a -&gt; LintM b) -&gt; LintM b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3E%3E%3D"><span class="hs-operator hs-var hs-var hs-var hs-var">&gt;&gt;=</span></a></span></span><span> </span><span id="local-6989586621681149953"><span class="annot"><span class="annottext">a -&gt; LintM b
</span><a href="#local-6989586621681149953"><span class="hs-identifier hs-var">k</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149952"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149952"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149951"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149951"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2685"></span><span>                       </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681149950"><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621681149950"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681149949"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149949"><span class="hs-identifier hs-var">errs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
LintM a -&gt; LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)
</span><a href="GHC.Core.Lint.html#unLintM"><span class="hs-identifier hs-var">unLintM</span></a></span><span> </span><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149955"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149952"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149951"><span class="hs-identifier hs-var">errs</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-2686"></span><span>                         </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621681149950"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2687"></span><span>                           </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681149948"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681149948"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a.
LintM a -&gt; LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)
</span><a href="GHC.Core.Lint.html#unLintM"><span class="hs-identifier hs-var">unLintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; LintM b
</span><a href="#local-6989586621681149953"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681149948"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149952"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149949"><span class="hs-identifier hs-var">errs'</span></a></span><span>
</span><span id="line-2688"></span><span>                           </span><span class="annot"><span class="annottext">Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149949"><span class="hs-identifier hs-var">errs'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2689"></span><span>
</span><span id="line-2690"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Control-Monad-Fail.html#MonadFail"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2691"></span><span>    </span><span id="local-6989586621681149942"><span class="annot"><span class="annottext">fail :: forall a. String -&gt; LintM a
</span><a href="../../base-4.16.3.0/src/Control-Monad-Fail.html#fail"><span class="hs-identifier hs-var hs-var hs-var hs-var">fail</span></a></span></span><span> </span><span id="local-6989586621681149941"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681149941"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681149941"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2692"></span><span>
</span><span id="line-2693"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#HasDynFlags"><span class="hs-identifier hs-type">HasDynFlags</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2694"></span><span>  </span><span id="local-6989586621681149938"><span class="annot"><span class="annottext">getDynFlags :: LintM DynFlags
</span><a href="#local-6989586621681149938"><span class="hs-identifier hs-var hs-var hs-var hs-var">getDynFlags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149937"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149937"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681149936"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149936"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv -&gt; DynFlags
</span><a href="GHC.Core.Lint.html#le_dynflags"><span class="hs-identifier hs-var">le_dynflags</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149937"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149936"><span class="hs-identifier hs-var">errs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2695"></span><span>
</span><span id="line-2696"></span><span class="hs-keyword">data</span><span> </span><span id="LintLocInfo"><span class="annot"><a href="GHC.Core.Lint.html#LintLocInfo"><span class="hs-identifier hs-var">LintLocInfo</span></a></span></span><span>
</span><span id="line-2697"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="RhsOf"><span class="annot"><a href="GHC.Core.Lint.html#RhsOf"><span class="hs-identifier hs-var">RhsOf</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>            </span><span class="hs-comment">-- The variable bound</span><span>
</span><span id="line-2698"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="OccOf"><span class="annot"><a href="GHC.Core.Lint.html#OccOf"><span class="hs-identifier hs-var">OccOf</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>            </span><span class="hs-comment">-- Occurrence of id</span><span>
</span><span id="line-2699"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LambdaBodyOf"><span class="annot"><a href="GHC.Core.Lint.html#LambdaBodyOf"><span class="hs-identifier hs-var">LambdaBodyOf</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>     </span><span class="hs-comment">-- The lambda-binder</span><span>
</span><span id="line-2700"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RuleOf"><span class="annot"><a href="GHC.Core.Lint.html#RuleOf"><span class="hs-identifier hs-var">RuleOf</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>           </span><span class="hs-comment">-- Rules attached to a binder</span><span>
</span><span id="line-2701"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UnfoldingOf"><span class="annot"><a href="GHC.Core.Lint.html#UnfoldingOf"><span class="hs-identifier hs-var">UnfoldingOf</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>      </span><span class="hs-comment">-- Unfolding of a binder</span><span>
</span><span id="line-2702"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="BodyOfLetRec"><span class="annot"><a href="GHC.Core.Lint.html#BodyOfLetRec"><span class="hs-identifier hs-var">BodyOfLetRec</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>   </span><span class="hs-comment">-- One of the binders</span><span>
</span><span id="line-2703"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CaseAlt"><span class="annot"><a href="GHC.Core.Lint.html#CaseAlt"><span class="hs-identifier hs-var">CaseAlt</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span>     </span><span class="hs-comment">-- Case alternative</span><span>
</span><span id="line-2704"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CasePat"><span class="annot"><a href="GHC.Core.Lint.html#CasePat"><span class="hs-identifier hs-var">CasePat</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span>     </span><span class="hs-comment">-- The *pattern* of the case alternative</span><span>
</span><span id="line-2705"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CaseTy"><span class="annot"><a href="GHC.Core.Lint.html#CaseTy"><span class="hs-identifier hs-var">CaseTy</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>     </span><span class="hs-comment">-- The type field of a case expression</span><span>
</span><span id="line-2706"></span><span>                        </span><span class="hs-comment">-- with this scrutinee</span><span>
</span><span id="line-2707"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="IdTy"><span class="annot"><a href="GHC.Core.Lint.html#IdTy"><span class="hs-identifier hs-var">IdTy</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>             </span><span class="hs-comment">-- The type field of an Id binder</span><span>
</span><span id="line-2708"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AnExpr"><span class="annot"><a href="GHC.Core.Lint.html#AnExpr"><span class="hs-identifier hs-var">AnExpr</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>     </span><span class="hs-comment">-- Some expression</span><span>
</span><span id="line-2709"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ImportedUnfolding"><span class="annot"><a href="GHC.Core.Lint.html#ImportedUnfolding"><span class="hs-identifier hs-var">ImportedUnfolding</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcLoc"><span class="hs-identifier hs-type">SrcLoc</span></a></span><span> </span><span class="hs-comment">-- Some imported unfolding (ToDo: say which)</span><span>
</span><span id="line-2710"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TopLevelBindings"><span class="annot"><a href="GHC.Core.Lint.html#TopLevelBindings"><span class="hs-identifier hs-var">TopLevelBindings</span></a></span></span><span>
</span><span id="line-2711"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="InType"><span class="annot"><a href="GHC.Core.Lint.html#InType"><span class="hs-identifier hs-var">InType</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>         </span><span class="hs-comment">-- Inside a type</span><span>
</span><span id="line-2712"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="InCo"><span class="annot"><a href="GHC.Core.Lint.html#InCo"><span class="hs-identifier hs-var">InCo</span></a></span></span><span>   </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>     </span><span class="hs-comment">-- Inside a coercion</span><span>
</span><span id="line-2713"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="InAxiom"><span class="annot"><a href="GHC.Core.Lint.html#InAxiom"><span class="hs-identifier hs-var">InAxiom</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- Inside a CoAxiom</span><span>
</span><span id="line-2714"></span><span>
</span><span id="line-2715"></span><span id="local-6989586621681152629"><span class="annot"><a href="GHC.Core.Lint.html#initL"><span class="hs-identifier hs-type">initL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintFlags"><span class="hs-identifier hs-type">LintFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2716"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152629"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#WarnsAndErrs"><span class="hs-identifier hs-type">WarnsAndErrs</span></a></span></span><span>    </span><span class="hs-comment">-- Warnings and errors</span><span>
</span><span id="line-2717"></span><span id="initL"><span class="annot"><span class="annottext">initL :: forall a. DynFlags -&gt; LintFlags -&gt; [Var] -&gt; LintM a -&gt; WarnsAndErrs
</span><a href="GHC.Core.Lint.html#initL"><span class="hs-identifier hs-var hs-var">initL</span></a></span></span><span> </span><span id="local-6989586621681149932"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681149932"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681149931"><span class="annot"><span class="annottext">LintFlags
</span><a href="#local-6989586621681149931"><span class="hs-identifier hs-var">flags</span></a></span></span><span> </span><span id="local-6989586621681149930"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149930"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621681149929"><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149929"><span class="hs-identifier hs-var">m</span></a></span></span><span>
</span><span id="line-2718"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a.
LintM a -&gt; LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)
</span><a href="GHC.Core.Lint.html#unLintM"><span class="hs-identifier hs-var">unLintM</span></a></span><span> </span><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149929"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149928"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2719"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681149927"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149927"><span class="hs-identifier hs-var">errs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149927"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-2720"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681149926"><span class="annot"><span class="annottext">errs :: WarnsAndErrs
</span><a href="#local-6989586621681149926"><span class="hs-identifier hs-var">errs</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag SDoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681149925"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149925"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149925"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149926"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-2721"></span><span>                             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Bug in Lint: a failure occurred &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-2722"></span><span>                                                      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;without reporting an error message&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2723"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2724"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681149922"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149922"><span class="hs-identifier hs-var">tcvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681149921"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149921"><span class="hs-identifier hs-var">ids</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyCoVar"><span class="hs-identifier hs-var">isTyCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149930"><span class="hs-identifier hs-var">vars</span></a></span><span>
</span><span id="line-2725"></span><span>    </span><span id="local-6989586621681149928"><span class="annot"><span class="annottext">env :: LintEnv
</span><a href="#local-6989586621681149928"><span class="hs-identifier hs-var hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LE"><span class="hs-identifier hs-type">LE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">le_flags :: LintFlags
</span><a href="GHC.Core.Lint.html#le_flags"><span class="hs-identifier hs-var">le_flags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintFlags
</span><a href="#local-6989586621681149931"><span class="hs-identifier hs-var">flags</span></a></span><span>
</span><span id="line-2726"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">le_subst :: TCvSubst
</span><a href="GHC.Core.Lint.html#le_subst"><span class="hs-identifier hs-var">le_subst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InScopeSet -&gt; TCvSubst
</span><a href="GHC.Core.TyCo.Subst.html#mkEmptyTCvSubst"><span class="hs-identifier hs-var">mkEmptyTCvSubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdSet -&gt; InScopeSet
</span><a href="GHC.Types.Var.Env.html#mkInScopeSet"><span class="hs-identifier hs-var">mkInScopeSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var] -&gt; IdSet
</span><a href="GHC.Types.Var.Set.html#mkVarSet"><span class="hs-identifier hs-var">mkVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149922"><span class="hs-identifier hs-var">tcvs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2727"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">le_ids :: VarEnv (Var, LintedType)
</span><a href="GHC.Core.Lint.html#le_ids"><span class="hs-identifier hs-var">le_ids</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [(Var, a)] -&gt; VarEnv a
</span><a href="GHC.Types.Var.Env.html#mkVarEnv"><span class="hs-identifier hs-var">mkVarEnv</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149919"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149919"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149919"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681149919"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149919"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149921"><span class="hs-identifier hs-var">ids</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2728"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">le_joins :: IdSet
</span><a href="GHC.Core.Lint.html#le_joins"><span class="hs-identifier hs-var">le_joins</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdSet
</span><a href="GHC.Types.Var.Set.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a></span><span>
</span><span id="line-2729"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">le_loc :: [LintLocInfo]
</span><a href="GHC.Core.Lint.html#le_loc"><span class="hs-identifier hs-var">le_loc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2730"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">le_dynflags :: DynFlags
</span><a href="GHC.Core.Lint.html#le_dynflags"><span class="hs-identifier hs-var">le_dynflags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681149932"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-2731"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">le_ue_aliases :: NameEnv UsageEnv
</span><a href="GHC.Core.Lint.html#le_ue_aliases"><span class="hs-identifier hs-var">le_ue_aliases</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. NameEnv a
</span><a href="GHC.Types.Name.Env.html#emptyNameEnv"><span class="hs-identifier hs-var">emptyNameEnv</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2732"></span><span>
</span><span id="line-2733"></span><span id="local-6989586621681149916"><span class="annot"><a href="GHC.Core.Lint.html#setReportUnsat"><span class="hs-identifier hs-type">setReportUnsat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681149916"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681149916"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2734"></span><span class="hs-comment">-- Switch off lf_report_unsat_syns</span><span>
</span><span id="line-2735"></span><span id="setReportUnsat"><span class="annot"><span class="annottext">setReportUnsat :: forall a. Bool -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#setReportUnsat"><span class="hs-identifier hs-var hs-var">setReportUnsat</span></a></span></span><span> </span><span id="local-6989586621681149915"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681149915"><span class="hs-identifier hs-var">ru</span></a></span></span><span> </span><span id="local-6989586621681149914"><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149914"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-2736"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149913"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149913"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149912"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149912"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2737"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681149911"><span class="annot"><span class="annottext">env' :: LintEnv
</span><a href="#local-6989586621681149911"><span class="hs-identifier hs-var hs-var">env'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149913"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">le_flags :: LintFlags
</span><a href="GHC.Core.Lint.html#le_flags"><span class="hs-identifier hs-var">le_flags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv -&gt; LintFlags
</span><a href="GHC.Core.Lint.html#le_flags"><span class="hs-identifier hs-var">le_flags</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149913"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lf_report_unsat_syns :: Bool
</span><a href="GHC.Core.Lint.html#lf_report_unsat_syns"><span class="hs-identifier hs-var">lf_report_unsat_syns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681149915"><span class="hs-identifier hs-var">ru</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2738"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall a.
LintM a -&gt; LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)
</span><a href="GHC.Core.Lint.html#unLintM"><span class="hs-identifier hs-var">unLintM</span></a></span><span> </span><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149914"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149911"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149912"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-2739"></span><span>
</span><span id="line-2740"></span><span class="hs-comment">-- See Note [Checking for levity polymorphism]</span><span>
</span><span id="line-2741"></span><span id="local-6989586621681152604"><span class="annot"><a href="GHC.Core.Lint.html#noLPChecks"><span class="hs-identifier hs-type">noLPChecks</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152604"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152604"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2742"></span><span id="noLPChecks"><span class="annot"><span class="annottext">noLPChecks :: forall a. LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#noLPChecks"><span class="hs-identifier hs-var hs-var">noLPChecks</span></a></span></span><span> </span><span id="local-6989586621681149910"><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149910"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-2743"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681149909"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149909"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149908"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149908"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2744"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681149907"><span class="annot"><span class="annottext">env' :: LintEnv
</span><a href="#local-6989586621681149907"><span class="hs-identifier hs-var hs-var">env'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149909"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">le_flags :: LintFlags
</span><a href="GHC.Core.Lint.html#le_flags"><span class="hs-identifier hs-var">le_flags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv -&gt; LintFlags
</span><a href="GHC.Core.Lint.html#le_flags"><span class="hs-identifier hs-var">le_flags</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149909"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lf_check_levity_poly :: Bool
</span><a href="GHC.Core.Lint.html#lf_check_levity_poly"><span class="hs-identifier hs-var">lf_check_levity_poly</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2745"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall a.
LintM a -&gt; LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)
</span><a href="GHC.Core.Lint.html#unLintM"><span class="hs-identifier hs-var">unLintM</span></a></span><span> </span><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149910"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149907"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149908"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-2746"></span><span>
</span><span id="line-2747"></span><span class="annot"><a href="GHC.Core.Lint.html#getLintFlags"><span class="hs-identifier hs-type">getLintFlags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintFlags"><span class="hs-identifier hs-type">LintFlags</span></a></span><span>
</span><span id="line-2748"></span><span id="getLintFlags"><span class="annot"><span class="annottext">getLintFlags :: LintM LintFlags
</span><a href="GHC.Core.Lint.html#getLintFlags"><span class="hs-identifier hs-var hs-var">getLintFlags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149906"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149906"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149905"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149905"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv -&gt; LintFlags
</span><a href="GHC.Core.Lint.html#le_flags"><span class="hs-identifier hs-var">le_flags</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149906"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149905"><span class="hs-identifier hs-var">errs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2749"></span><span>
</span><span id="line-2750"></span><span class="annot"><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-type">checkL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2751"></span><span id="checkL"><span class="annot"><span class="annottext">checkL :: Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var hs-var">checkL</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="annot"><span class="annottext">SDoc
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2752"></span><span class="annot"><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span id="local-6989586621681149904"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149904"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var">failWithL</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149904"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-2753"></span><span>
</span><span id="line-2754"></span><span class="hs-comment">-- like checkL, but relevant to type checking</span><span>
</span><span id="line-2755"></span><span class="annot"><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-type">lintL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2756"></span><span id="lintL"><span class="annot"><span class="annottext">lintL :: Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var hs-var">lintL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span>
</span><span id="line-2757"></span><span>
</span><span id="line-2758"></span><span class="annot"><a href="GHC.Core.Lint.html#checkWarnL"><span class="hs-identifier hs-type">checkWarnL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2759"></span><span id="checkWarnL"><span class="annot"><span class="annottext">checkWarnL :: Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkWarnL"><span class="hs-identifier hs-var hs-var">checkWarnL</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>   </span><span class="annot"><span class="annottext">SDoc
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2760"></span><span class="annot"><a href="GHC.Core.Lint.html#checkWarnL"><span class="hs-identifier hs-var">checkWarnL</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span id="local-6989586621681149903"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149903"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addWarnL"><span class="hs-identifier hs-var">addWarnL</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149903"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-2761"></span><span>
</span><span id="line-2762"></span><span id="local-6989586621681152570"><span class="annot"><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-type">failWithL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152570"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2763"></span><span id="failWithL"><span class="annot"><span class="annottext">failWithL :: forall a. SDoc -&gt; LintM a
</span><a href="GHC.Core.Lint.html#failWithL"><span class="hs-identifier hs-var hs-var">failWithL</span></a></span></span><span> </span><span id="local-6989586621681149902"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149902"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149901"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149901"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681149900"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149900"><span class="hs-identifier hs-var">warns</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681149899"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149899"><span class="hs-identifier hs-var">errs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2764"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149900"><span class="hs-identifier hs-var">warns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; LintEnv -&gt; Bag SDoc -&gt; SDoc -&gt; Bag SDoc
</span><a href="GHC.Core.Lint.html#addMsg"><span class="hs-identifier hs-var">addMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149901"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149899"><span class="hs-identifier hs-var">errs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149902"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2765"></span><span>
</span><span id="line-2766"></span><span class="annot"><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-type">addErrL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2767"></span><span id="addErrL"><span class="annot"><span class="annottext">addErrL :: SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var hs-var">addErrL</span></a></span></span><span> </span><span id="local-6989586621681149897"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149897"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149896"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149896"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681149895"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149895"><span class="hs-identifier hs-var">warns</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681149894"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149894"><span class="hs-identifier hs-var">errs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2768"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149895"><span class="hs-identifier hs-var">warns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; LintEnv -&gt; Bag SDoc -&gt; SDoc -&gt; Bag SDoc
</span><a href="GHC.Core.Lint.html#addMsg"><span class="hs-identifier hs-var">addMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149896"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149894"><span class="hs-identifier hs-var">errs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149897"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2769"></span><span>
</span><span id="line-2770"></span><span class="annot"><a href="GHC.Core.Lint.html#addWarnL"><span class="hs-identifier hs-type">addWarnL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2771"></span><span id="addWarnL"><span class="annot"><span class="annottext">addWarnL :: SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addWarnL"><span class="hs-identifier hs-var hs-var">addWarnL</span></a></span></span><span> </span><span id="local-6989586621681149893"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149893"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149892"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149892"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681149891"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149891"><span class="hs-identifier hs-var">warns</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681149890"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149890"><span class="hs-identifier hs-var">errs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2772"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; LintEnv -&gt; Bag SDoc -&gt; SDoc -&gt; Bag SDoc
</span><a href="GHC.Core.Lint.html#addMsg"><span class="hs-identifier hs-var">addMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149892"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149891"><span class="hs-identifier hs-var">warns</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149893"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149890"><span class="hs-identifier hs-var">errs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2773"></span><span>
</span><span id="line-2774"></span><span class="annot"><a href="GHC.Core.Lint.html#addMsg"><span class="hs-identifier hs-type">addMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintEnv"><span class="hs-identifier hs-type">LintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2775"></span><span id="addMsg"><span class="annot"><span class="annottext">addMsg :: Bool -&gt; LintEnv -&gt; Bag SDoc -&gt; SDoc -&gt; Bag SDoc
</span><a href="GHC.Core.Lint.html#addMsg"><span class="hs-identifier hs-var hs-var">addMsg</span></a></span></span><span> </span><span id="local-6989586621681149889"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681149889"><span class="hs-identifier hs-var">is_error</span></a></span></span><span> </span><span id="local-6989586621681149888"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149888"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149887"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149887"><span class="hs-identifier hs-var">msgs</span></a></span></span><span> </span><span id="local-6989586621681149886"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149886"><span class="hs-identifier hs-var">msg</span></a></span></span><span>
</span><span id="line-2776"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">notNull</span><span> </span><span class="hs-identifier">loc_msgs</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">msg</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-2777"></span><span>    </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681149887"><span class="hs-identifier hs-var">msgs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Bag a -&gt; a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#snocBag"><span class="hs-operator hs-var">`snocBag`</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="#local-6989586621681149882"><span class="hs-identifier hs-var">mk_msg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149886"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-2778"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2779"></span><span>   </span><span class="annot"><a href="#local-6989586621681149884"><span class="hs-identifier hs-type">loc_msgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcLoc"><span class="hs-identifier hs-type">SrcLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- Innermost first</span><span>
</span><span id="line-2780"></span><span>   </span><span id="local-6989586621681149884"><span class="annot"><span class="annottext">loc_msgs :: [(SrcLoc, SDoc)]
</span><a href="#local-6989586621681149884"><span class="hs-identifier hs-var hs-var">loc_msgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LintLocInfo -&gt; (SrcLoc, SDoc)
</span><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv -&gt; [LintLocInfo]
</span><a href="GHC.Core.Lint.html#le_loc"><span class="hs-identifier hs-var">le_loc</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149888"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2781"></span><span>
</span><span id="line-2782"></span><span>   </span><span id="local-6989586621681149880"><span class="annot"><span class="annottext">cxt_doc :: SDoc
</span><a href="#local-6989586621681149880"><span class="hs-identifier hs-var hs-var">cxt_doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">[(SrcLoc, SDoc)]
</span><a href="#local-6989586621681149884"><span class="hs-identifier hs-var">loc_msgs</span></a></span><span>
</span><span id="line-2783"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Substitution:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv -&gt; TCvSubst
</span><a href="GHC.Core.Lint.html#le_subst"><span class="hs-identifier hs-var">le_subst</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149888"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2784"></span><span>   </span><span id="local-6989586621681149878"><span class="annot"><span class="annottext">context :: SDoc
</span><a href="#local-6989586621681149878"><span class="hs-identifier hs-var hs-var">context</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681149889"><span class="hs-identifier hs-var">is_error</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149880"><span class="hs-identifier hs-var">cxt_doc</span></a></span><span>
</span><span id="line-2785"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#whenPprDebug"><span class="hs-identifier hs-var">whenPprDebug</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149880"><span class="hs-identifier hs-var">cxt_doc</span></a></span><span>
</span><span id="line-2786"></span><span>     </span><span class="hs-comment">-- Print voluminous info for Lint errors</span><span>
</span><span id="line-2787"></span><span>     </span><span class="hs-comment">-- but not for warnings</span><span>
</span><span id="line-2788"></span><span>
</span><span id="line-2789"></span><span>   </span><span id="local-6989586621681149876"><span class="annot"><span class="annottext">msg_span :: SrcSpan
</span><a href="#local-6989586621681149876"><span class="hs-identifier hs-var hs-var">msg_span</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681149875"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681149874"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621681149874"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">SDoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(SrcLoc, SDoc)]
</span><a href="#local-6989586621681149884"><span class="hs-identifier hs-var">loc_msgs</span></a></span><span>
</span><span id="line-2790"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681149875"><span class="annot"><span class="annottext">span :: SrcSpan
</span><a href="#local-6989586621681149875"><span class="hs-identifier hs-var hs-var">span</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#srcLocSpan"><span class="hs-identifier hs-var">srcLocSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621681149874"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-2791"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; Bool
</span><a href="GHC.Types.SrcLoc.html#isGoodSrcSpan"><span class="hs-identifier hs-var">isGoodSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681149875"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2792"></span><span>               </span><span class="hs-special">[</span><span class="hs-special">]</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span>
</span><span id="line-2793"></span><span>               </span><span class="hs-special">(</span><span id="local-6989586621681149871"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681149871"><span class="hs-identifier hs-var">s</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[SrcSpan]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681149871"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-2794"></span><span>   </span><span id="local-6989586621681149882"><span class="annot"><span class="annottext">mk_msg :: SDoc -&gt; SDoc
</span><a href="#local-6989586621681149882"><span class="hs-identifier hs-var hs-var">mk_msg</span></a></span></span><span> </span><span id="local-6989586621681149870"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149870"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; SrcSpan -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Types.Error.html#mkLocMessage"><span class="hs-identifier hs-var">mkLocMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevWarning"><span class="hs-identifier hs-var">SevWarning</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681149876"><span class="hs-identifier hs-var">msg_span</span></a></span><span>
</span><span id="line-2795"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149870"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149878"><span class="hs-identifier hs-var">context</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2796"></span><span>
</span><span id="line-2797"></span><span id="local-6989586621681152626"><span class="annot"><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-type">addLoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintLocInfo"><span class="hs-identifier hs-type">LintLocInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152626"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152626"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2798"></span><span id="addLoc"><span class="annot"><span class="annottext">addLoc :: forall a. LintLocInfo -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addLoc"><span class="hs-identifier hs-var hs-var">addLoc</span></a></span></span><span> </span><span id="local-6989586621681149867"><span class="annot"><span class="annottext">LintLocInfo
</span><a href="#local-6989586621681149867"><span class="hs-identifier hs-var">extra_loc</span></a></span></span><span> </span><span id="local-6989586621681149866"><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149866"><span class="hs-identifier hs-var">m</span></a></span></span><span>
</span><span id="line-2799"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149865"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149865"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149864"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149864"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2800"></span><span>    </span><span class="annot"><span class="annottext">forall a.
LintM a -&gt; LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)
</span><a href="GHC.Core.Lint.html#unLintM"><span class="hs-identifier hs-var">unLintM</span></a></span><span> </span><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149866"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149865"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">le_loc :: [LintLocInfo]
</span><a href="GHC.Core.Lint.html#le_loc"><span class="hs-identifier hs-var">le_loc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintLocInfo
</span><a href="#local-6989586621681149867"><span class="hs-identifier hs-var">extra_loc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">LintEnv -&gt; [LintLocInfo]
</span><a href="GHC.Core.Lint.html#le_loc"><span class="hs-identifier hs-var">le_loc</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149865"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149864"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-2801"></span><span>
</span><span id="line-2802"></span><span class="annot"><a href="GHC.Core.Lint.html#inCasePat"><span class="hs-identifier hs-type">inCasePat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>         </span><span class="hs-comment">-- A slight hack; see the unique call site</span><span>
</span><span id="line-2803"></span><span id="inCasePat"><span class="annot"><span class="annottext">inCasePat :: LintM Bool
</span><a href="GHC.Core.Lint.html#inCasePat"><span class="hs-identifier hs-var hs-var">inCasePat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149863"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149863"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149862"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149862"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv -&gt; Bool
</span><a href="#local-6989586621681149861"><span class="hs-identifier hs-var">is_case_pat</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149863"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149862"><span class="hs-identifier hs-var">errs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2804"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2805"></span><span>    </span><span id="local-6989586621681149861"><span class="annot"><span class="annottext">is_case_pat :: LintEnv -&gt; Bool
</span><a href="#local-6989586621681149861"><span class="hs-identifier hs-var hs-var">is_case_pat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LE"><span class="hs-identifier hs-type">LE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">le_loc :: LintEnv -&gt; [LintLocInfo]
</span><a href="GHC.Core.Lint.html#le_loc"><span class="hs-identifier hs-var">le_loc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#CasePat"><span class="hs-identifier hs-type">CasePat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[LintLocInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2806"></span><span>    </span><span class="annot"><a href="#local-6989586621681149861"><span class="hs-identifier hs-var">is_case_pat</span></a></span><span> </span><span id="local-6989586621681149860"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149860"><span class="hs-identifier hs-var">_other</span></a></span></span><span>                           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2807"></span><span>
</span><span id="line-2808"></span><span id="local-6989586621681149859"><span class="annot"><a href="GHC.Core.Lint.html#addInScopeId"><span class="hs-identifier hs-type">addInScopeId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681149859"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681149859"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2809"></span><span id="addInScopeId"><span class="annot"><span class="annottext">addInScopeId :: forall a. Var -&gt; LintedType -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addInScopeId"><span class="hs-identifier hs-var hs-var">addInScopeId</span></a></span></span><span> </span><span id="local-6989586621681149858"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149858"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621681149857"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149857"><span class="hs-identifier hs-var">linted_ty</span></a></span></span><span> </span><span id="local-6989586621681149856"><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149856"><span class="hs-identifier hs-var">m</span></a></span></span><span>
</span><span id="line-2810"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149855"><span class="annot"><span class="annottext">env :: LintEnv
</span><a href="#local-6989586621681149855"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LE"><span class="hs-identifier hs-type">LE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">le_ids :: LintEnv -&gt; VarEnv (Var, LintedType)
</span><a href="GHC.Core.Lint.html#le_ids"><span class="hs-identifier hs-var">le_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681149854"><span class="annot"><span class="annottext">VarEnv (Var, LintedType)
</span><a href="#local-6989586621681149854"><span class="hs-identifier hs-var">id_set</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">le_joins :: LintEnv -&gt; IdSet
</span><a href="GHC.Core.Lint.html#le_joins"><span class="hs-identifier hs-var">le_joins</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681149853"><span class="annot"><span class="annottext">IdSet
</span><a href="#local-6989586621681149853"><span class="hs-identifier hs-var">join_set</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681149852"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149852"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2811"></span><span>    </span><span class="annot"><span class="annottext">forall a.
LintM a -&gt; LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)
</span><a href="GHC.Core.Lint.html#unLintM"><span class="hs-identifier hs-var">unLintM</span></a></span><span> </span><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149856"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149855"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">le_ids :: VarEnv (Var, LintedType)
</span><a href="GHC.Core.Lint.html#le_ids"><span class="hs-identifier hs-var">le_ids</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a -&gt; Var -&gt; a -&gt; VarEnv a
</span><a href="GHC.Types.Var.Env.html#extendVarEnv"><span class="hs-identifier hs-var">extendVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">VarEnv (Var, LintedType)
</span><a href="#local-6989586621681149854"><span class="hs-identifier hs-var">id_set</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149858"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149858"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149857"><span class="hs-identifier hs-var">linted_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2812"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">le_joins :: IdSet
</span><a href="GHC.Core.Lint.html#le_joins"><span class="hs-identifier hs-var">le_joins</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdSet -&gt; IdSet
</span><a href="#local-6989586621681149850"><span class="hs-identifier hs-var">add_joins</span></a></span><span> </span><span class="annot"><span class="annottext">IdSet
</span><a href="#local-6989586621681149853"><span class="hs-identifier hs-var">join_set</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149852"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-2813"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2814"></span><span>    </span><span id="local-6989586621681149850"><span class="annot"><span class="annottext">add_joins :: IdSet -&gt; IdSet
</span><a href="#local-6989586621681149850"><span class="hs-identifier hs-var hs-var">add_joins</span></a></span></span><span> </span><span id="local-6989586621681149849"><span class="annot"><span class="annottext">IdSet
</span><a href="#local-6989586621681149849"><span class="hs-identifier hs-var">join_set</span></a></span></span><span>
</span><span id="line-2815"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Id.html#isJoinId"><span class="hs-identifier hs-var">isJoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149858"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdSet -&gt; Var -&gt; IdSet
</span><a href="GHC.Types.Var.Set.html#extendVarSet"><span class="hs-identifier hs-var">extendVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">IdSet
</span><a href="#local-6989586621681149849"><span class="hs-identifier hs-var">join_set</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149858"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-comment">-- Overwrite with new arity</span><span>
</span><span id="line-2816"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdSet -&gt; Var -&gt; IdSet
</span><a href="GHC.Types.Var.Set.html#delVarSet"><span class="hs-identifier hs-var">delVarSet</span></a></span><span>    </span><span class="annot"><span class="annottext">IdSet
</span><a href="#local-6989586621681149849"><span class="hs-identifier hs-var">join_set</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149858"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-comment">-- Remove any existing binding</span><span>
</span><span id="line-2817"></span><span>
</span><span id="line-2818"></span><span class="annot"><a href="GHC.Core.Lint.html#getInScopeIds"><span class="hs-identifier hs-type">getInScopeIds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.Env.html#VarEnv"><span class="hs-identifier hs-type">VarEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">,</span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2819"></span><span id="getInScopeIds"><span class="annot"><span class="annottext">getInScopeIds :: LintM (VarEnv (Var, LintedType))
</span><a href="GHC.Core.Lint.html#getInScopeIds"><span class="hs-identifier hs-var hs-var">getInScopeIds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681149845"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149845"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149844"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149844"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv -&gt; VarEnv (Var, LintedType)
</span><a href="GHC.Core.Lint.html#le_ids"><span class="hs-identifier hs-var">le_ids</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149845"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149844"><span class="hs-identifier hs-var">errs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2820"></span><span>
</span><span id="line-2821"></span><span id="local-6989586621681152554"><span class="annot"><a href="GHC.Core.Lint.html#extendTvSubstL"><span class="hs-identifier hs-type">extendTvSubstL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152554"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152554"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2822"></span><span id="extendTvSubstL"><span class="annot"><span class="annottext">extendTvSubstL :: forall a. Var -&gt; LintedType -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#extendTvSubstL"><span class="hs-identifier hs-var hs-var">extendTvSubstL</span></a></span></span><span> </span><span id="local-6989586621681149843"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149843"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681149842"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149842"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681149841"><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149841"><span class="hs-identifier hs-var">m</span></a></span></span><span>
</span><span id="line-2823"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149840"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149840"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149839"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149839"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2824"></span><span>    </span><span class="annot"><span class="annottext">forall a.
LintM a -&gt; LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)
</span><a href="GHC.Core.Lint.html#unLintM"><span class="hs-identifier hs-var">unLintM</span></a></span><span> </span><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149841"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149840"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">le_subst :: TCvSubst
</span><a href="GHC.Core.Lint.html#le_subst"><span class="hs-identifier hs-var">le_subst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCvSubst -&gt; Var -&gt; LintedType -&gt; TCvSubst
</span><a href="GHC.Core.TyCo.Subst.html#extendTvSubst"><span class="hs-identifier hs-var">Type.extendTvSubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv -&gt; TCvSubst
</span><a href="GHC.Core.Lint.html#le_subst"><span class="hs-identifier hs-var">le_subst</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149840"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149843"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149842"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149839"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-2825"></span><span>
</span><span id="line-2826"></span><span id="local-6989586621681152505"><span class="annot"><a href="GHC.Core.Lint.html#updateTCvSubst"><span class="hs-identifier hs-type">updateTCvSubst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Subst.html#TCvSubst"><span class="hs-identifier hs-type">TCvSubst</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152505"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152505"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2827"></span><span id="updateTCvSubst"><span class="annot"><span class="annottext">updateTCvSubst :: forall a. TCvSubst -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#updateTCvSubst"><span class="hs-identifier hs-var hs-var">updateTCvSubst</span></a></span></span><span> </span><span id="local-6989586621681149837"><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681149837"><span class="hs-identifier hs-var">subst'</span></a></span></span><span> </span><span id="local-6989586621681149836"><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149836"><span class="hs-identifier hs-var">m</span></a></span></span><span>
</span><span id="line-2828"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149835"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149835"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149834"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149834"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a.
LintM a -&gt; LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)
</span><a href="GHC.Core.Lint.html#unLintM"><span class="hs-identifier hs-var">unLintM</span></a></span><span> </span><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149836"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149835"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">le_subst :: TCvSubst
</span><a href="GHC.Core.Lint.html#le_subst"><span class="hs-identifier hs-var">le_subst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681149837"><span class="hs-identifier hs-var">subst'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149834"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-2829"></span><span>
</span><span id="line-2830"></span><span id="local-6989586621681149833"><span class="annot"><a href="GHC.Core.Lint.html#markAllJoinsBad"><span class="hs-identifier hs-type">markAllJoinsBad</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681149833"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681149833"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2831"></span><span id="markAllJoinsBad"><span class="annot"><span class="annottext">markAllJoinsBad :: forall a. LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#markAllJoinsBad"><span class="hs-identifier hs-var hs-var">markAllJoinsBad</span></a></span></span><span> </span><span id="local-6989586621681149832"><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149832"><span class="hs-identifier hs-var">m</span></a></span></span><span>
</span><span id="line-2832"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149831"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149831"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149830"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149830"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a.
LintM a -&gt; LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)
</span><a href="GHC.Core.Lint.html#unLintM"><span class="hs-identifier hs-var">unLintM</span></a></span><span> </span><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149832"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149831"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">le_joins :: IdSet
</span><a href="GHC.Core.Lint.html#le_joins"><span class="hs-identifier hs-var">le_joins</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdSet
</span><a href="GHC.Types.Var.Set.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149830"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-2833"></span><span>
</span><span id="line-2834"></span><span id="local-6989586621681152560"><span class="annot"><a href="GHC.Core.Lint.html#markAllJoinsBadIf"><span class="hs-identifier hs-type">markAllJoinsBadIf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152560"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152560"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2835"></span><span id="markAllJoinsBadIf"><span class="annot"><span class="annottext">markAllJoinsBadIf :: forall a. Bool -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#markAllJoinsBadIf"><span class="hs-identifier hs-var hs-var">markAllJoinsBadIf</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span id="local-6989586621681149829"><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149829"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#markAllJoinsBad"><span class="hs-identifier hs-var">markAllJoinsBad</span></a></span><span> </span><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149829"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-2836"></span><span class="annot"><a href="GHC.Core.Lint.html#markAllJoinsBadIf"><span class="hs-identifier hs-var">markAllJoinsBadIf</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span id="local-6989586621681149828"><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149828"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149828"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-2837"></span><span>
</span><span id="line-2838"></span><span class="annot"><a href="GHC.Core.Lint.html#getValidJoins"><span class="hs-identifier hs-type">getValidJoins</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#IdSet"><span class="hs-identifier hs-type">IdSet</span></a></span><span>
</span><span id="line-2839"></span><span id="getValidJoins"><span class="annot"><span class="annottext">getValidJoins :: LintM IdSet
</span><a href="GHC.Core.Lint.html#getValidJoins"><span class="hs-identifier hs-var hs-var">getValidJoins</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149827"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149827"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149826"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149826"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv -&gt; IdSet
</span><a href="GHC.Core.Lint.html#le_joins"><span class="hs-identifier hs-var">le_joins</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149827"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149826"><span class="hs-identifier hs-var">errs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2840"></span><span>
</span><span id="line-2841"></span><span class="annot"><a href="GHC.Core.Lint.html#getTCvSubst"><span class="hs-identifier hs-type">getTCvSubst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Subst.html#TCvSubst"><span class="hs-identifier hs-type">TCvSubst</span></a></span><span>
</span><span id="line-2842"></span><span id="getTCvSubst"><span class="annot"><span class="annottext">getTCvSubst :: LintM TCvSubst
</span><a href="GHC.Core.Lint.html#getTCvSubst"><span class="hs-identifier hs-var hs-var">getTCvSubst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149825"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149825"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149824"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149824"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv -&gt; TCvSubst
</span><a href="GHC.Core.Lint.html#le_subst"><span class="hs-identifier hs-var">le_subst</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149825"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149824"><span class="hs-identifier hs-var">errs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2843"></span><span>
</span><span id="line-2844"></span><span class="annot"><a href="GHC.Core.Lint.html#getUEAliases"><span class="hs-identifier hs-type">getUEAliases</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Env.html#NameEnv"><span class="hs-identifier hs-type">NameEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2845"></span><span id="getUEAliases"><span class="annot"><span class="annottext">getUEAliases :: LintM (NameEnv UsageEnv)
</span><a href="GHC.Core.Lint.html#getUEAliases"><span class="hs-identifier hs-var hs-var">getUEAliases</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149822"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149822"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149821"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149821"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv -&gt; NameEnv UsageEnv
</span><a href="GHC.Core.Lint.html#le_ue_aliases"><span class="hs-identifier hs-var">le_ue_aliases</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149822"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149821"><span class="hs-identifier hs-var">errs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2846"></span><span>
</span><span id="line-2847"></span><span class="annot"><a href="GHC.Core.Lint.html#getInScope"><span class="hs-identifier hs-type">getInScope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#InScopeSet"><span class="hs-identifier hs-type">InScopeSet</span></a></span><span>
</span><span id="line-2848"></span><span id="getInScope"><span class="annot"><span class="annottext">getInScope :: LintM InScopeSet
</span><a href="GHC.Core.Lint.html#getInScope"><span class="hs-identifier hs-var hs-var">getInScope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149820"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149820"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149819"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149819"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCvSubst -&gt; InScopeSet
</span><a href="GHC.Core.TyCo.Subst.html#getTCvInScope"><span class="hs-identifier hs-var">getTCvInScope</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv -&gt; TCvSubst
</span><a href="GHC.Core.Lint.html#le_subst"><span class="hs-identifier hs-var">le_subst</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149820"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149819"><span class="hs-identifier hs-var">errs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2849"></span><span>
</span><span id="line-2850"></span><span class="annot"><a href="GHC.Core.Lint.html#lookupIdInScope"><span class="hs-identifier hs-type">lookupIdInScope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2851"></span><span id="lookupIdInScope"><span class="annot"><span class="annottext">lookupIdInScope :: Var -&gt; LintM (Var, LintedType)
</span><a href="GHC.Core.Lint.html#lookupIdInScope"><span class="hs-identifier hs-var hs-var">lookupIdInScope</span></a></span></span><span> </span><span id="local-6989586621681149818"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149818"><span class="hs-identifier hs-var">id_occ</span></a></span></span><span>
</span><span id="line-2852"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681149817"><span class="annot"><span class="annottext">VarEnv (Var, LintedType)
</span><a href="#local-6989586621681149817"><span class="hs-identifier hs-var">in_scope_ids</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM (VarEnv (Var, LintedType))
</span><a href="GHC.Core.Lint.html#getInScopeIds"><span class="hs-identifier hs-var">getInScopeIds</span></a></span><span>
</span><span id="line-2853"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a -&gt; Var -&gt; Maybe a
</span><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-var">lookupVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">VarEnv (Var, LintedType)
</span><a href="#local-6989586621681149817"><span class="hs-identifier hs-var">in_scope_ids</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149818"><span class="hs-identifier hs-var">id_occ</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2854"></span><span>           </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681149815"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149815"><span class="hs-identifier hs-var">id_bndr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681149814"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149814"><span class="hs-identifier hs-var">linted_ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2855"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="#local-6989586621681149813"><span class="hs-identifier hs-var">bad_global</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149815"><span class="hs-identifier hs-var">id_bndr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149812"><span class="hs-identifier hs-var">global_in_scope</span></a></span><span>
</span><span id="line-2856"></span><span>                   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149815"><span class="hs-identifier hs-var">id_bndr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149814"><span class="hs-identifier hs-var">linted_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2857"></span><span>           </span><span class="annot"><span class="annottext">Maybe (Var, LintedType)
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#checkL"><span class="hs-identifier hs-var">checkL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681149811"><span class="hs-identifier hs-var">is_local</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149810"><span class="hs-identifier hs-var">local_out_of_scope</span></a></span><span>
</span><span id="line-2858"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149818"><span class="hs-identifier hs-var">id_occ</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149818"><span class="hs-identifier hs-var">id_occ</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2859"></span><span>                      </span><span class="hs-comment">-- We don't bother to lint the type</span><span>
</span><span id="line-2860"></span><span>                      </span><span class="hs-comment">-- of global (i.e. imported) Ids</span><span>
</span><span id="line-2861"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2862"></span><span>    </span><span id="local-6989586621681149811"><span class="annot"><span class="annottext">is_local :: Bool
</span><a href="#local-6989586621681149811"><span class="hs-identifier hs-var hs-var">is_local</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#mustHaveLocalBinding"><span class="hs-identifier hs-var">mustHaveLocalBinding</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149818"><span class="hs-identifier hs-var">id_occ</span></a></span><span>
</span><span id="line-2863"></span><span>    </span><span id="local-6989586621681149810"><span class="annot"><span class="annottext">local_out_of_scope :: SDoc
</span><a href="#local-6989586621681149810"><span class="hs-identifier hs-var hs-var">local_out_of_scope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Out of scope:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. OutputableBndr a =&gt; BindingSite -&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprBndr"><span class="hs-identifier hs-var">pprBndr</span></a></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="GHC.Utils.Outputable.html#LetBind"><span class="hs-identifier hs-var">LetBind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149818"><span class="hs-identifier hs-var">id_occ</span></a></span><span>
</span><span id="line-2864"></span><span>    </span><span id="local-6989586621681149812"><span class="annot"><span class="annottext">global_in_scope :: SDoc
</span><a href="#local-6989586621681149812"><span class="hs-identifier hs-var hs-var">global_in_scope</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Occurrence is GlobalId, but binding is LocalId&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2865"></span><span>                            </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. OutputableBndr a =&gt; BindingSite -&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprBndr"><span class="hs-identifier hs-var">pprBndr</span></a></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="GHC.Utils.Outputable.html#LetBind"><span class="hs-identifier hs-var">LetBind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149818"><span class="hs-identifier hs-var">id_occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2866"></span><span>    </span><span id="local-6989586621681149813"><span class="annot"><span class="annottext">bad_global :: Var -&gt; Bool
</span><a href="#local-6989586621681149813"><span class="hs-identifier hs-var hs-var">bad_global</span></a></span></span><span> </span><span id="local-6989586621681149808"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149808"><span class="hs-identifier hs-var">id_bnd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isGlobalId"><span class="hs-identifier hs-var">isGlobalId</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149818"><span class="hs-identifier hs-var">id_occ</span></a></span><span>
</span><span id="line-2867"></span><span>                     </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isLocalId"><span class="hs-identifier hs-var">isLocalId</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149808"><span class="hs-identifier hs-var">id_bnd</span></a></span><span>
</span><span id="line-2868"></span><span>                     </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall thing. NamedThing thing =&gt; thing -&gt; Bool
</span><a href="GHC.Types.Name.html#isWiredIn"><span class="hs-identifier hs-var">isWiredIn</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149818"><span class="hs-identifier hs-var">id_occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2869"></span><span>       </span><span class="hs-comment">-- 'bad_global' checks for the case where an /occurrence/ is</span><span>
</span><span id="line-2870"></span><span>       </span><span class="hs-comment">-- a GlobalId, but there is an enclosing binding fora a LocalId.</span><span>
</span><span id="line-2871"></span><span>       </span><span class="hs-comment">-- NB: the in-scope variables are mostly LocalIds, checked by lintIdBndr,</span><span>
</span><span id="line-2872"></span><span>       </span><span class="hs-comment">--     but GHCi adds GlobalIds from the interactive context.  These</span><span>
</span><span id="line-2873"></span><span>       </span><span class="hs-comment">--     are fine; hence the test (isLocalId id == isLocalId v)</span><span>
</span><span id="line-2874"></span><span>       </span><span class="hs-comment">-- NB: when compiling Control.Exception.Base, things like absentError</span><span>
</span><span id="line-2875"></span><span>       </span><span class="hs-comment">--     are defined locally, but appear in expressions as (global)</span><span>
</span><span id="line-2876"></span><span>       </span><span class="hs-comment">--     wired-in Ids after worker/wrapper</span><span>
</span><span id="line-2877"></span><span>       </span><span class="hs-comment">--     So we simply disable the test in this case</span><span>
</span><span id="line-2878"></span><span>
</span><span id="line-2879"></span><span class="annot"><a href="GHC.Core.Lint.html#lookupJoinId"><span class="hs-identifier hs-type">lookupJoinId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#JoinArity"><span class="hs-identifier hs-type">JoinArity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2880"></span><span class="hs-comment">-- Look up an Id which should be a join point, valid here</span><span>
</span><span id="line-2881"></span><span class="hs-comment">-- If so, return its arity, if not return Nothing</span><span>
</span><span id="line-2882"></span><span id="lookupJoinId"><span class="annot"><span class="annottext">lookupJoinId :: Var -&gt; LintM (Maybe JoinArity)
</span><a href="GHC.Core.Lint.html#lookupJoinId"><span class="hs-identifier hs-var hs-var">lookupJoinId</span></a></span></span><span> </span><span id="local-6989586621681149805"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149805"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-2883"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681149804"><span class="annot"><span class="annottext">IdSet
</span><a href="#local-6989586621681149804"><span class="hs-identifier hs-var">join_set</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM IdSet
</span><a href="GHC.Core.Lint.html#getValidJoins"><span class="hs-identifier hs-var">getValidJoins</span></a></span><span>
</span><span id="line-2884"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IdSet -&gt; Var -&gt; Maybe Var
</span><a href="GHC.Types.Var.Set.html#lookupVarSet"><span class="hs-identifier hs-var">lookupVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">IdSet
</span><a href="#local-6989586621681149804"><span class="hs-identifier hs-var">join_set</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149805"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2885"></span><span>            </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681149802"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149802"><span class="hs-identifier hs-var">id'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Maybe JoinArity
</span><a href="GHC.Types.Id.html#isJoinId_maybe"><span class="hs-identifier hs-var">isJoinId_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149802"><span class="hs-identifier hs-var">id'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2886"></span><span>            </span><span class="annot"><span class="annottext">Maybe Var
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2887"></span><span>
</span><span id="line-2888"></span><span id="local-6989586621681152551"><span class="annot"><a href="GHC.Core.Lint.html#addAliasUE"><span class="hs-identifier hs-type">addAliasUE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152551"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152551"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2889"></span><span id="addAliasUE"><span class="annot"><span class="annottext">addAliasUE :: forall a. Var -&gt; UsageEnv -&gt; LintM a -&gt; LintM a
</span><a href="GHC.Core.Lint.html#addAliasUE"><span class="hs-identifier hs-var hs-var">addAliasUE</span></a></span></span><span> </span><span id="local-6989586621681149800"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149800"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621681149799"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681149799"><span class="hs-identifier hs-var">ue</span></a></span></span><span> </span><span id="local-6989586621681149798"><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149798"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)) -&gt; LintM a
</span><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-var">LintM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681149797"><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149797"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681149796"><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149796"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2890"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681149795"><span class="annot"><span class="annottext">new_ue_aliases :: NameEnv UsageEnv
</span><a href="#local-6989586621681149795"><span class="hs-identifier hs-var hs-var">new_ue_aliases</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2891"></span><span>        </span><span class="annot"><span class="annottext">forall a. NameEnv a -&gt; Name -&gt; a -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#extendNameEnv"><span class="hs-identifier hs-var">extendNameEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv -&gt; NameEnv UsageEnv
</span><a href="GHC.Core.Lint.html#le_ue_aliases"><span class="hs-identifier hs-var">le_ue_aliases</span></a></span><span> </span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149797"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149800"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681149799"><span class="hs-identifier hs-var">ue</span></a></span><span>
</span><span id="line-2892"></span><span>  </span><span class="hs-keyword">in</span><span>
</span><span id="line-2893"></span><span>    </span><span class="annot"><span class="annottext">forall a.
LintM a -&gt; LintEnv -&gt; WarnsAndErrs -&gt; (Maybe a, WarnsAndErrs)
</span><a href="GHC.Core.Lint.html#unLintM"><span class="hs-identifier hs-var">unLintM</span></a></span><span> </span><span class="annot"><span class="annottext">LintM a
</span><a href="#local-6989586621681149798"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintEnv
</span><a href="#local-6989586621681149797"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">le_ue_aliases :: NameEnv UsageEnv
</span><a href="GHC.Core.Lint.html#le_ue_aliases"><span class="hs-identifier hs-var">le_ue_aliases</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameEnv UsageEnv
</span><a href="#local-6989586621681149795"><span class="hs-identifier hs-var">new_ue_aliases</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WarnsAndErrs
</span><a href="#local-6989586621681149796"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-2894"></span><span>
</span><span id="line-2895"></span><span class="annot"><a href="GHC.Core.Lint.html#varCallSiteUsage"><span class="hs-identifier hs-type">varCallSiteUsage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#UsageEnv"><span class="hs-identifier hs-type">UsageEnv</span></a></span><span>
</span><span id="line-2896"></span><span id="varCallSiteUsage"><span class="annot"><span class="annottext">varCallSiteUsage :: Var -&gt; LintM UsageEnv
</span><a href="GHC.Core.Lint.html#varCallSiteUsage"><span class="hs-identifier hs-var hs-var">varCallSiteUsage</span></a></span></span><span> </span><span id="local-6989586621681149792"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149792"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2897"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681149791"><span class="annot"><span class="annottext">NameEnv UsageEnv
</span><a href="#local-6989586621681149791"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM (NameEnv UsageEnv)
</span><a href="GHC.Core.Lint.html#getUEAliases"><span class="hs-identifier hs-var">getUEAliases</span></a></span><span>
</span><span id="line-2898"></span><span>     </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. NameEnv a -&gt; Name -&gt; Maybe a
</span><a href="GHC.Types.Name.Env.html#lookupNameEnv"><span class="hs-identifier hs-var">lookupNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">NameEnv UsageEnv
</span><a href="#local-6989586621681149791"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149792"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2899"></span><span>         </span><span class="annot"><span class="annottext">Maybe UsageEnv
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall n. NamedThing n =&gt; n -&gt; LintedType -&gt; UsageEnv
</span><a href="GHC.Core.UsageEnv.html#unitUE"><span class="hs-identifier hs-var">unitUE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149792"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="GHC.Core.Type.html#One"><span class="hs-identifier hs-var">One</span></a></span><span>
</span><span id="line-2900"></span><span>         </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681149787"><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681149787"><span class="hs-identifier hs-var">id_ue</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UsageEnv
</span><a href="#local-6989586621681149787"><span class="hs-identifier hs-var">id_ue</span></a></span><span>
</span><span id="line-2901"></span><span>
</span><span id="line-2902"></span><span class="annot"><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-type">ensureEqTys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2903"></span><span class="hs-comment">-- check ty2 is subtype of ty1 (ie, has same structure but usage</span><span>
</span><span id="line-2904"></span><span class="hs-comment">-- annotations need only be consistent, not equal)</span><span>
</span><span id="line-2905"></span><span class="hs-comment">-- Assumes ty1,ty2 are have already had the substitution applied</span><span>
</span><span id="line-2906"></span><span id="ensureEqTys"><span class="annot"><span class="annottext">ensureEqTys :: LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureEqTys"><span class="hs-identifier hs-var hs-var">ensureEqTys</span></a></span></span><span> </span><span id="local-6989586621681149786"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149786"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681149785"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149785"><span class="hs-identifier hs-var">ty2</span></a></span></span><span> </span><span id="local-6989586621681149784"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149784"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149786"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149785"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149784"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-2907"></span><span>
</span><span id="line-2908"></span><span class="annot"><a href="GHC.Core.Lint.html#ensureSubUsage"><span class="hs-identifier hs-type">ensureSubUsage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.UsageEnv.html#Usage"><span class="hs-identifier hs-type">Usage</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2909"></span><span id="ensureSubUsage"><span class="annot"><span class="annottext">ensureSubUsage :: Usage -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureSubUsage"><span class="hs-identifier hs-var hs-var">ensureSubUsage</span></a></span></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="GHC.Core.UsageEnv.html#Bottom"><span class="hs-identifier hs-var">Bottom</span></a></span><span>     </span><span class="annot"><span class="annottext">LintedType
</span><span class="hs-identifier">_</span></span><span>              </span><span class="annot"><span class="annottext">SDoc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2910"></span><span class="annot"><a href="GHC.Core.Lint.html#ensureSubUsage"><span class="hs-identifier hs-var">ensureSubUsage</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="GHC.Core.UsageEnv.html#Zero"><span class="hs-identifier hs-var">Zero</span></a></span><span>       </span><span id="local-6989586621681149781"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149781"><span class="hs-identifier hs-var">described_mult</span></a></span></span><span> </span><span id="local-6989586621681149780"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149780"><span class="hs-identifier hs-var">err_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureSubMult"><span class="hs-identifier hs-var">ensureSubMult</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="GHC.Core.Type.html#Many"><span class="hs-identifier hs-var">Many</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149781"><span class="hs-identifier hs-var">described_mult</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149780"><span class="hs-identifier hs-var">err_msg</span></a></span><span>
</span><span id="line-2911"></span><span class="annot"><a href="GHC.Core.Lint.html#ensureSubUsage"><span class="hs-identifier hs-var">ensureSubUsage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.UsageEnv.html#MUsage"><span class="hs-identifier hs-type">MUsage</span></a></span><span> </span><span id="local-6989586621681149778"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149778"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681149777"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149777"><span class="hs-identifier hs-var">described_mult</span></a></span></span><span> </span><span id="local-6989586621681149776"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149776"><span class="hs-identifier hs-var">err_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureSubMult"><span class="hs-identifier hs-var">ensureSubMult</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149778"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149777"><span class="hs-identifier hs-var">described_mult</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149776"><span class="hs-identifier hs-var">err_msg</span></a></span><span>
</span><span id="line-2912"></span><span>
</span><span id="line-2913"></span><span class="annot"><a href="GHC.Core.Lint.html#ensureSubMult"><span class="hs-identifier hs-type">ensureSubMult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2914"></span><span id="ensureSubMult"><span class="annot"><span class="annottext">ensureSubMult :: LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureSubMult"><span class="hs-identifier hs-var hs-var">ensureSubMult</span></a></span></span><span> </span><span id="local-6989586621681149775"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149775"><span class="hs-identifier hs-var">actual_usage</span></a></span></span><span> </span><span id="local-6989586621681149774"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149774"><span class="hs-identifier hs-var">described_usage</span></a></span></span><span> </span><span id="local-6989586621681149773"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149773"><span class="hs-identifier hs-var">err_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2915"></span><span>    </span><span id="local-6989586621681149772"><span class="annot"><span class="annottext">LintFlags
</span><a href="#local-6989586621681149772"><span class="hs-identifier hs-var">flags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LintM LintFlags
</span><a href="GHC.Core.Lint.html#getLintFlags"><span class="hs-identifier hs-var">getLintFlags</span></a></span><span>
</span><span id="line-2916"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintFlags -&gt; Bool
</span><a href="GHC.Core.Lint.html#lf_check_linearity"><span class="hs-identifier hs-var">lf_check_linearity</span></a></span><span> </span><span class="annot"><span class="annottext">LintFlags
</span><a href="#local-6989586621681149772"><span class="hs-identifier hs-var">flags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149771"><span class="hs-identifier hs-var">actual_usage'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; IsSubmult
</span><a href="GHC.Core.Multiplicity.html#submult"><span class="hs-operator hs-var">`submult`</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149769"><span class="hs-identifier hs-var">described_usage'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2917"></span><span>      </span><span class="annot"><span class="annottext">IsSubmult
</span><a href="GHC.Core.Multiplicity.html#Submult"><span class="hs-identifier hs-var">Submult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2918"></span><span>      </span><span class="annot"><span class="annottext">IsSubmult
</span><a href="GHC.Core.Multiplicity.html#Unknown"><span class="hs-identifier hs-var">Unknown</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Maybe (LintedType, LintedType)
</span><a href="GHC.Core.Multiplicity.html#isMultMul"><span class="hs-identifier hs-var">isMultMul</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149771"><span class="hs-identifier hs-var">actual_usage'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2919"></span><span>                     </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681149765"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149765"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681149764"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149764"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureSubMult"><span class="hs-identifier hs-var">ensureSubMult</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149765"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149769"><span class="hs-identifier hs-var">described_usage'</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149773"><span class="hs-identifier hs-var">err_msg</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3E%3E"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span>
</span><span id="line-2920"></span><span>                                      </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#ensureSubMult"><span class="hs-identifier hs-var">ensureSubMult</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149764"><span class="hs-identifier hs-var">m2</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149769"><span class="hs-identifier hs-var">described_usage'</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149773"><span class="hs-identifier hs-var">err_msg</span></a></span><span>
</span><span id="line-2921"></span><span>                     </span><span class="annot"><span class="annottext">Maybe (LintedType, LintedType)
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149771"><span class="hs-identifier hs-var">actual_usage'</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149769"><span class="hs-identifier hs-var">described_usage'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#addErrL"><span class="hs-identifier hs-var">addErrL</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149773"><span class="hs-identifier hs-var">err_msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2922"></span><span>
</span><span id="line-2923"></span><span>   </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681149771"><span class="annot"><span class="annottext">actual_usage' :: LintedType
</span><a href="#local-6989586621681149771"><span class="hs-identifier hs-var hs-var">actual_usage'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType
</span><a href="#local-6989586621681149763"><span class="hs-identifier hs-var">normalize</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149775"><span class="hs-identifier hs-var">actual_usage</span></a></span><span>
</span><span id="line-2924"></span><span>         </span><span id="local-6989586621681149769"><span class="annot"><span class="annottext">described_usage' :: LintedType
</span><a href="#local-6989586621681149769"><span class="hs-identifier hs-var hs-var">described_usage'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType
</span><a href="#local-6989586621681149763"><span class="hs-identifier hs-var">normalize</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149774"><span class="hs-identifier hs-var">described_usage</span></a></span><span>
</span><span id="line-2925"></span><span>
</span><span id="line-2926"></span><span>         </span><span class="annot"><a href="#local-6989586621681149763"><span class="hs-identifier hs-type">normalize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span>
</span><span id="line-2927"></span><span>         </span><span id="local-6989586621681149763"><span class="annot"><span class="annottext">normalize :: LintedType -&gt; LintedType
</span><a href="#local-6989586621681149763"><span class="hs-identifier hs-var hs-var">normalize</span></a></span></span><span> </span><span id="local-6989586621681149762"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149762"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; Maybe (LintedType, LintedType)
</span><a href="GHC.Core.Multiplicity.html#isMultMul"><span class="hs-identifier hs-var">isMultMul</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149762"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2928"></span><span>                         </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681149761"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149761"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681149760"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149760"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LintedType -&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Multiplicity.html#mkMultMul"><span class="hs-identifier hs-var">mkMultMul</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; LintedType
</span><a href="#local-6989586621681149763"><span class="hs-identifier hs-var">normalize</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149761"><span class="hs-identifier hs-var">m1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LintedType -&gt; LintedType
</span><a href="#local-6989586621681149763"><span class="hs-identifier hs-var">normalize</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149760"><span class="hs-identifier hs-var">m2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2929"></span><span>                         </span><span class="annot"><span class="annottext">Maybe (LintedType, LintedType)
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149762"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-2930"></span><span>
</span><span id="line-2931"></span><span id="local-6989586621681152566"><span class="annot"><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-type">lintRole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681152566"><span class="hs-identifier hs-type">thing</span></a></span><span>
</span><span id="line-2932"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681152566"><span class="hs-identifier hs-type">thing</span></a></span><span>     </span><span class="hs-comment">-- where the role appeared</span><span>
</span><span id="line-2933"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span>      </span><span class="hs-comment">-- expected</span><span>
</span><span id="line-2934"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span>      </span><span class="hs-comment">-- actual</span><span>
</span><span id="line-2935"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintM"><span class="hs-identifier hs-type">LintM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-2936"></span><span id="lintRole"><span class="annot"><span class="annottext">lintRole :: forall thing. Outputable thing =&gt; thing -&gt; Role -&gt; Role -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintRole"><span class="hs-identifier hs-var hs-var">lintRole</span></a></span></span><span> </span><span id="local-6989586621681149754"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681149754"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span id="local-6989586621681149753"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681149753"><span class="hs-identifier hs-var">r1</span></a></span></span><span> </span><span id="local-6989586621681149752"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681149752"><span class="hs-identifier hs-var">r2</span></a></span></span><span>
</span><span id="line-2937"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; LintM ()
</span><a href="GHC.Core.Lint.html#lintL"><span class="hs-identifier hs-var">lintL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681149753"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681149752"><span class="hs-identifier hs-var">r2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2938"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Role incompatibility: expected&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681149753"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-2939"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;got&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681149752"><span class="hs-identifier hs-var">r2</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-2940"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;in&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681149754"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2941"></span><span>
</span><span id="line-2942"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Error messages}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-2949"></span><span>
</span><span id="line-2950"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-type">dumpLoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintLocInfo"><span class="hs-identifier hs-type">LintLocInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcLoc"><span class="hs-identifier hs-type">SrcLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2951"></span><span>
</span><span id="line-2952"></span><span id="dumpLoc"><span class="annot"><span class="annottext">dumpLoc :: LintLocInfo -&gt; (SrcLoc, SDoc)
</span><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var hs-var">dumpLoc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#RhsOf"><span class="hs-identifier hs-type">RhsOf</span></a></span><span> </span><span id="local-6989586621681149750"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149750"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2953"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; SrcLoc
</span><a href="GHC.Types.Name.html#getSrcLoc"><span class="hs-identifier hs-var">getSrcLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149750"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the RHS of&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Var] -&gt; SDoc
</span><a href="GHC.Core.Lint.html#pp_binders"><span class="hs-identifier hs-var">pp_binders</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149750"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2954"></span><span>
</span><span id="line-2955"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#OccOf"><span class="hs-identifier hs-type">OccOf</span></a></span><span> </span><span id="local-6989586621681149747"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149747"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2956"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; SrcLoc
</span><a href="GHC.Types.Name.html#getSrcLoc"><span class="hs-identifier hs-var">getSrcLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149747"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In an occurrence of&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#pp_binder"><span class="hs-identifier hs-var">pp_binder</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149747"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2957"></span><span>
</span><span id="line-2958"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#LambdaBodyOf"><span class="hs-identifier hs-type">LambdaBodyOf</span></a></span><span> </span><span id="local-6989586621681149745"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149745"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2959"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; SrcLoc
</span><a href="GHC.Types.Name.html#getSrcLoc"><span class="hs-identifier hs-var">getSrcLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149745"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the body of lambda with binder&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#pp_binder"><span class="hs-identifier hs-var">pp_binder</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149745"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2960"></span><span>
</span><span id="line-2961"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#RuleOf"><span class="hs-identifier hs-type">RuleOf</span></a></span><span> </span><span id="local-6989586621681149744"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149744"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2962"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; SrcLoc
</span><a href="GHC.Types.Name.html#getSrcLoc"><span class="hs-identifier hs-var">getSrcLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149744"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In a rule attached to&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#pp_binder"><span class="hs-identifier hs-var">pp_binder</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149744"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2963"></span><span>
</span><span id="line-2964"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#UnfoldingOf"><span class="hs-identifier hs-type">UnfoldingOf</span></a></span><span> </span><span id="local-6989586621681149743"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149743"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2965"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; SrcLoc
</span><a href="GHC.Types.Name.html#getSrcLoc"><span class="hs-identifier hs-var">getSrcLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149743"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the unfolding of&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#pp_binder"><span class="hs-identifier hs-var">pp_binder</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149743"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2966"></span><span>
</span><span id="line-2967"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#BodyOfLetRec"><span class="hs-identifier hs-type">BodyOfLetRec</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2968"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc
</span><a href="GHC.Types.SrcLoc.html#noSrcLoc"><span class="hs-identifier hs-var">noSrcLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In body of a letrec with no binders&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2969"></span><span>
</span><span id="line-2970"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#BodyOfLetRec"><span class="hs-identifier hs-type">BodyOfLetRec</span></a></span><span> </span><span id="local-6989586621681149741"><span class="annot"><span class="annottext">bs :: [Var]
</span><a href="#local-6989586621681149741"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Var]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2971"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; SrcLoc
</span><a href="GHC.Types.Name.html#getSrcLoc"><span class="hs-identifier hs-var">getSrcLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-List.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149741"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the body of letrec with binders&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Var] -&gt; SDoc
</span><a href="GHC.Core.Lint.html#pp_binders"><span class="hs-identifier hs-var">pp_binders</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149741"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2972"></span><span>
</span><span id="line-2973"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#AnExpr"><span class="hs-identifier hs-type">AnExpr</span></a></span><span> </span><span id="local-6989586621681149739"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149739"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2974"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc
</span><a href="GHC.Types.SrcLoc.html#noSrcLoc"><span class="hs-identifier hs-var">noSrcLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the expression:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149739"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2975"></span><span>
</span><span id="line-2976"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#CaseAlt"><span class="hs-identifier hs-type">CaseAlt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span id="local-6989586621681149738"><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621681149738"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621681149737"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149737"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2977"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc
</span><a href="GHC.Types.SrcLoc.html#noSrcLoc"><span class="hs-identifier hs-var">noSrcLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In a case alternative:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621681149738"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Var] -&gt; SDoc
</span><a href="GHC.Core.Lint.html#pp_binders"><span class="hs-identifier hs-var">pp_binders</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149737"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2978"></span><span>
</span><span id="line-2979"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#CasePat"><span class="hs-identifier hs-type">CasePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span id="local-6989586621681149736"><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621681149736"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621681149735"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149735"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2980"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc
</span><a href="GHC.Types.SrcLoc.html#noSrcLoc"><span class="hs-identifier hs-var">noSrcLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the pattern of a case alternative:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621681149736"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Var] -&gt; SDoc
</span><a href="GHC.Core.Lint.html#pp_binders"><span class="hs-identifier hs-var">pp_binders</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149735"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2981"></span><span>
</span><span id="line-2982"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#CaseTy"><span class="hs-identifier hs-type">CaseTy</span></a></span><span> </span><span id="local-6989586621681149734"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149734"><span class="hs-identifier hs-var">scrut</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2983"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc
</span><a href="GHC.Types.SrcLoc.html#noSrcLoc"><span class="hs-identifier hs-var">noSrcLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the result-type of a case with scrutinee:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2984"></span><span>                  </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149734"><span class="hs-identifier hs-var">scrut</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2985"></span><span>
</span><span id="line-2986"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#IdTy"><span class="hs-identifier hs-type">IdTy</span></a></span><span> </span><span id="local-6989586621681149733"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149733"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2987"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; SrcLoc
</span><a href="GHC.Types.Name.html#getSrcLoc"><span class="hs-identifier hs-var">getSrcLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149733"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the type of a binder:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149733"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2988"></span><span>
</span><span id="line-2989"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#ImportedUnfolding"><span class="hs-identifier hs-type">ImportedUnfolding</span></a></span><span> </span><span id="local-6989586621681149732"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621681149732"><span class="hs-identifier hs-var">locn</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2990"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621681149732"><span class="hs-identifier hs-var">locn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In an imported unfolding&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2991"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LintLocInfo
</span><a href="GHC.Core.Lint.html#TopLevelBindings"><span class="hs-identifier hs-var">TopLevelBindings</span></a></span><span>
</span><span id="line-2992"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc
</span><a href="GHC.Types.SrcLoc.html#noSrcLoc"><span class="hs-identifier hs-var">noSrcLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2993"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#InType"><span class="hs-identifier hs-type">InType</span></a></span><span> </span><span id="local-6989586621681149731"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149731"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2994"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc
</span><a href="GHC.Types.SrcLoc.html#noSrcLoc"><span class="hs-identifier hs-var">noSrcLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the type&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149731"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2995"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#InCo"><span class="hs-identifier hs-type">InCo</span></a></span><span> </span><span id="local-6989586621681149730"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681149730"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2996"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc
</span><a href="GHC.Types.SrcLoc.html#noSrcLoc"><span class="hs-identifier hs-var">noSrcLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the coercion&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681149730"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2997"></span><span class="annot"><a href="GHC.Core.Lint.html#dumpLoc"><span class="hs-identifier hs-var">dumpLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Lint.html#InAxiom"><span class="hs-identifier hs-type">InAxiom</span></a></span><span> </span><span id="local-6989586621681149729"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681149729"><span class="hs-identifier hs-var">ax</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2998"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; SrcLoc
</span><a href="GHC.Types.Name.html#getSrcLoc"><span class="hs-identifier hs-var">getSrcLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681149728"><span class="hs-identifier hs-var">ax_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the coercion axiom&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681149728"><span class="hs-identifier hs-var">ax_name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149727"><span class="hs-identifier hs-var">pp_ax</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2999"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3000"></span><span>    </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">co_ax_name :: forall (br :: BranchFlag). CoAxiom br -&gt; Name
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_name"><span class="hs-identifier hs-var">co_ax_name</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681149728"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681149728"><span class="hs-identifier hs-var">ax_name</span></a></span></span><span>
</span><span id="line-3001"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">co_ax_tc :: forall (br :: BranchFlag). CoAxiom br -&gt; TyCon
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_tc"><span class="hs-identifier hs-var">co_ax_tc</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681149725"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681149725"><span class="hs-identifier hs-var">tc</span></a></span></span><span>
</span><span id="line-3002"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">co_ax_role :: forall (br :: BranchFlag). CoAxiom br -&gt; Role
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_role"><span class="hs-identifier hs-var">co_ax_role</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681149724"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681149724"><span class="hs-identifier hs-var">ax_role</span></a></span></span><span>
</span><span id="line-3003"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">co_ax_branches :: forall (br :: BranchFlag). CoAxiom br -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_branches"><span class="hs-identifier hs-var">co_ax_branches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681149723"><span class="annot"><span class="annottext">Branches Branched
</span><a href="#local-6989586621681149723"><span class="hs-identifier hs-var">branches</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681149729"><span class="hs-identifier hs-var">ax</span></a></span><span>
</span><span id="line-3004"></span><span>    </span><span id="local-6989586621681149722"><span class="annot"><span class="annottext">branch_list :: [CoAxBranch]
</span><a href="#local-6989586621681149722"><span class="hs-identifier hs-var hs-var">branch_list</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (br :: BranchFlag). Branches br -&gt; [CoAxBranch]
</span><a href="GHC.Core.Coercion.Axiom.html#fromBranches"><span class="hs-identifier hs-var">fromBranches</span></a></span><span> </span><span class="annot"><span class="annottext">Branches Branched
</span><a href="#local-6989586621681149723"><span class="hs-identifier hs-var">branches</span></a></span><span>
</span><span id="line-3005"></span><span>
</span><span id="line-3006"></span><span>    </span><span id="local-6989586621681149727"><span class="annot"><span class="annottext">pp_ax :: SDoc
</span><a href="#local-6989586621681149727"><span class="hs-identifier hs-var hs-var">pp_ax</span></a></span></span><span>
</span><span id="line-3007"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681149721"><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621681149721"><span class="hs-identifier hs-var">branch</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621681149722"><span class="hs-identifier hs-var">branch_list</span></a></span><span>
</span><span id="line-3008"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxBranch -&gt; SDoc
</span><a href="#local-6989586621681149720"><span class="hs-identifier hs-var">pp_branch</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621681149721"><span class="hs-identifier hs-var">branch</span></a></span><span>
</span><span id="line-3009"></span><span>
</span><span id="line-3010"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-3011"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxBranch -&gt; SDoc
</span><a href="#local-6989586621681149720"><span class="hs-identifier hs-var">pp_branch</span></a></span><span> </span><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621681149722"><span class="hs-identifier hs-var">branch_list</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3012"></span><span>
</span><span id="line-3013"></span><span>    </span><span id="local-6989586621681149720"><span class="annot"><span class="annottext">pp_branch :: CoAxBranch -&gt; SDoc
</span><a href="#local-6989586621681149720"><span class="hs-identifier hs-var hs-var">pp_branch</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cab_tvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_tvs"><span class="hs-identifier hs-var">cab_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681149718"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149718"><span class="hs-identifier hs-var">tvs</span></a></span></span><span>
</span><span id="line-3014"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_cvs :: CoAxBranch -&gt; [Var]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_cvs"><span class="hs-identifier hs-var">cab_cvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681149717"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149717"><span class="hs-identifier hs-var">cvs</span></a></span></span><span>
</span><span id="line-3015"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_lhs :: CoAxBranch -&gt; [LintedType]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_lhs"><span class="hs-identifier hs-var">cab_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681149716"><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681149716"><span class="hs-identifier hs-var">lhs_tys</span></a></span></span><span>
</span><span id="line-3016"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_rhs :: CoAxBranch -&gt; LintedType
</span><a href="GHC.Core.Coercion.Axiom.html#cab_rhs"><span class="hs-identifier hs-var">cab_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681149715"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149715"><span class="hs-identifier hs-var">rhs_ty</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-3017"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; SDoc) -&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprWithCommas"><span class="hs-identifier hs-var">pprWithCommas</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149718"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149717"><span class="hs-identifier hs-var">cvs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dot"><span class="hs-identifier hs-var">dot</span></a></span><span>
</span><span id="line-3018"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [LintedType] -&gt; LintedType
</span><a href="GHC.Core.Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681149725"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">[LintedType]
</span><a href="#local-6989586621681149716"><span class="hs-identifier hs-var">lhs_tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3019"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;~_&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Role -&gt; SDoc
</span><a href="#local-6989586621681149711"><span class="hs-identifier hs-var">pp_role</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681149724"><span class="hs-identifier hs-var">ax_role</span></a></span><span>
</span><span id="line-3020"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149715"><span class="hs-identifier hs-var">rhs_ty</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3021"></span><span>
</span><span id="line-3022"></span><span>    </span><span id="local-6989586621681149711"><span class="annot"><span class="annottext">pp_role :: Role -&gt; SDoc
</span><a href="#local-6989586621681149711"><span class="hs-identifier hs-var hs-var">pp_role</span></a></span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;N&quot;</span></span><span>
</span><span id="line-3023"></span><span>    </span><span class="annot"><a href="#local-6989586621681149711"><span class="hs-identifier hs-var">pp_role</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Representational"><span class="hs-identifier hs-var">Representational</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;R&quot;</span></span><span>
</span><span id="line-3024"></span><span>    </span><span class="annot"><a href="#local-6989586621681149711"><span class="hs-identifier hs-var">pp_role</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Phantom"><span class="hs-identifier hs-var">Phantom</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;P&quot;</span></span><span>
</span><span id="line-3025"></span><span>
</span><span id="line-3026"></span><span class="annot"><a href="GHC.Core.Lint.html#pp_binders"><span class="hs-identifier hs-type">pp_binders</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3027"></span><span id="pp_binders"><span class="annot"><span class="annottext">pp_binders :: [Var] -&gt; SDoc
</span><a href="GHC.Core.Lint.html#pp_binders"><span class="hs-identifier hs-var hs-var">pp_binders</span></a></span></span><span> </span><span id="local-6989586621681149710"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149710"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; [SDoc] -&gt; [SDoc]
</span><a href="GHC.Utils.Outputable.html#punctuate"><span class="hs-identifier hs-var">punctuate</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#pp_binder"><span class="hs-identifier hs-var">pp_binder</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149710"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3028"></span><span>
</span><span id="line-3029"></span><span class="annot"><a href="GHC.Core.Lint.html#pp_binder"><span class="hs-identifier hs-type">pp_binder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3030"></span><span id="pp_binder"><span class="annot"><span class="annottext">pp_binder :: Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#pp_binder"><span class="hs-identifier hs-var hs-var">pp_binder</span></a></span></span><span> </span><span id="local-6989586621681149708"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149708"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149708"><span class="hs-identifier hs-var">b</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149708"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149708"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-3031"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149708"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149708"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-3032"></span><span>
</span><span id="line-3033"></span><span class="hs-comment">------------------------------------------------------</span><span>
</span><span id="line-3034"></span><span class="hs-comment">--      Messages for case expressions</span><span>
</span><span id="line-3035"></span><span>
</span><span id="line-3036"></span><span class="annot"><a href="GHC.Core.Lint.html#mkDefaultArgsMsg"><span class="hs-identifier hs-type">mkDefaultArgsMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3037"></span><span id="mkDefaultArgsMsg"><span class="annot"><span class="annottext">mkDefaultArgsMsg :: [Var] -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkDefaultArgsMsg"><span class="hs-identifier hs-var hs-var">mkDefaultArgsMsg</span></a></span></span><span> </span><span id="local-6989586621681149707"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149707"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-3038"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DEFAULT case with binders&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3039"></span><span>         </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149707"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3040"></span><span>
</span><span id="line-3041"></span><span class="annot"><a href="GHC.Core.Lint.html#mkCaseAltMsg"><span class="hs-identifier hs-type">mkCaseAltMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3042"></span><span id="mkCaseAltMsg"><span class="annot"><span class="annottext">mkCaseAltMsg :: CoreExpr -&gt; LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkCaseAltMsg"><span class="hs-identifier hs-var hs-var">mkCaseAltMsg</span></a></span></span><span> </span><span id="local-6989586621681149706"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149706"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681149705"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149705"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681149704"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149704"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-3043"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type of case alternatives not the same as the annotation on case:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3044"></span><span>         </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Actual type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149705"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3045"></span><span>                   </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Annotation on case:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149704"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3046"></span><span>                   </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Alt Rhs:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149706"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-3047"></span><span>
</span><span id="line-3048"></span><span class="annot"><a href="GHC.Core.Lint.html#mkScrutMsg"><span class="hs-identifier hs-type">mkScrutMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Subst.html#TCvSubst"><span class="hs-identifier hs-type">TCvSubst</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3049"></span><span id="mkScrutMsg"><span class="annot"><span class="annottext">mkScrutMsg :: Var -&gt; LintedType -&gt; LintedType -&gt; TCvSubst -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkScrutMsg"><span class="hs-identifier hs-var hs-var">mkScrutMsg</span></a></span></span><span> </span><span id="local-6989586621681149703"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149703"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621681149702"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149702"><span class="hs-identifier hs-var">var_ty</span></a></span></span><span> </span><span id="local-6989586621681149701"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149701"><span class="hs-identifier hs-var">scrut_ty</span></a></span></span><span> </span><span id="local-6989586621681149700"><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681149700"><span class="hs-identifier hs-var">subst</span></a></span></span><span>
</span><span id="line-3050"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Result binder in case doesn't match scrutinee:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149703"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3051"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Result binder type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149702"><span class="hs-identifier hs-var">var_ty</span></a></span><span class="hs-special">,</span><span class="hs-comment">--(idType var),</span><span>
</span><span id="line-3052"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Scrutinee type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149701"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3053"></span><span>     </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Current TCv subst&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621681149700"><span class="hs-identifier hs-var">subst</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-3054"></span><span>
</span><span id="line-3055"></span><span class="annot"><a href="GHC.Core.Lint.html#mkNonDefltMsg"><span class="hs-identifier hs-type">mkNonDefltMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#mkNonIncreasingAltsMsg"><span class="hs-identifier hs-type">mkNonIncreasingAltsMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3056"></span><span id="mkNonDefltMsg"><span class="annot"><span class="annottext">mkNonDefltMsg :: CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkNonDefltMsg"><span class="hs-identifier hs-var hs-var">mkNonDefltMsg</span></a></span></span><span> </span><span id="local-6989586621681149699"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149699"><span class="hs-identifier hs-var">e</span></a></span></span><span>
</span><span id="line-3057"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Case expression with DEFAULT not at the beginning&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149699"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3058"></span><span id="mkNonIncreasingAltsMsg"><span class="annot"><span class="annottext">mkNonIncreasingAltsMsg :: CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkNonIncreasingAltsMsg"><span class="hs-identifier hs-var hs-var">mkNonIncreasingAltsMsg</span></a></span></span><span> </span><span id="local-6989586621681149698"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149698"><span class="hs-identifier hs-var">e</span></a></span></span><span>
</span><span id="line-3059"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Case expression with badly-ordered alternatives&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149698"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3060"></span><span>
</span><span id="line-3061"></span><span class="annot"><a href="GHC.Core.Lint.html#nonExhaustiveAltsMsg"><span class="hs-identifier hs-type">nonExhaustiveAltsMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3062"></span><span id="nonExhaustiveAltsMsg"><span class="annot"><span class="annottext">nonExhaustiveAltsMsg :: CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#nonExhaustiveAltsMsg"><span class="hs-identifier hs-var hs-var">nonExhaustiveAltsMsg</span></a></span></span><span> </span><span id="local-6989586621681149697"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149697"><span class="hs-identifier hs-var">e</span></a></span></span><span>
</span><span id="line-3063"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Case expression with non-exhaustive alternatives&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149697"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3064"></span><span>
</span><span id="line-3065"></span><span class="annot"><a href="GHC.Core.Lint.html#mkBadConMsg"><span class="hs-identifier hs-type">mkBadConMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3066"></span><span id="mkBadConMsg"><span class="annot"><span class="annottext">mkBadConMsg :: TyCon -&gt; DataCon -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadConMsg"><span class="hs-identifier hs-var hs-var">mkBadConMsg</span></a></span></span><span> </span><span id="local-6989586621681149696"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681149696"><span class="hs-identifier hs-var">tycon</span></a></span></span><span> </span><span id="local-6989586621681149695"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681149695"><span class="hs-identifier hs-var">datacon</span></a></span></span><span>
</span><span id="line-3067"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-3068"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In a case alternative, data constructor isn't in scrutinee type:&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-3069"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Scrutinee type constructor:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681149696"><span class="hs-identifier hs-var">tycon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3070"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Data con:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681149695"><span class="hs-identifier hs-var">datacon</span></a></span><span>
</span><span id="line-3071"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-3072"></span><span>
</span><span id="line-3073"></span><span class="annot"><a href="GHC.Core.Lint.html#mkBadPatMsg"><span class="hs-identifier hs-type">mkBadPatMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3074"></span><span id="mkBadPatMsg"><span class="annot"><span class="annottext">mkBadPatMsg :: LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadPatMsg"><span class="hs-identifier hs-var hs-var">mkBadPatMsg</span></a></span></span><span> </span><span id="local-6989586621681149694"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149694"><span class="hs-identifier hs-var">con_result_ty</span></a></span></span><span> </span><span id="local-6989586621681149693"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149693"><span class="hs-identifier hs-var">scrut_ty</span></a></span></span><span>
</span><span id="line-3075"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-3076"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In a case alternative, pattern result type doesn't match scrutinee type:&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-3077"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Pattern result type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149694"><span class="hs-identifier hs-var">con_result_ty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3078"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Scrutinee type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149693"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span>
</span><span id="line-3079"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-3080"></span><span>
</span><span id="line-3081"></span><span class="annot"><a href="GHC.Core.Lint.html#integerScrutinisedMsg"><span class="hs-identifier hs-type">integerScrutinisedMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3082"></span><span id="integerScrutinisedMsg"><span class="annot"><span class="annottext">integerScrutinisedMsg :: SDoc
</span><a href="GHC.Core.Lint.html#integerScrutinisedMsg"><span class="hs-identifier hs-var hs-var">integerScrutinisedMsg</span></a></span></span><span>
</span><span id="line-3083"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In a LitAlt, the literal is lifted (probably Integer)&quot;</span></span><span>
</span><span id="line-3084"></span><span>
</span><span id="line-3085"></span><span class="annot"><a href="GHC.Core.Lint.html#mkBadAltMsg"><span class="hs-identifier hs-type">mkBadAltMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3086"></span><span id="mkBadAltMsg"><span class="annot"><span class="annottext">mkBadAltMsg :: LintedType -&gt; Alt Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadAltMsg"><span class="hs-identifier hs-var hs-var">mkBadAltMsg</span></a></span></span><span> </span><span id="local-6989586621681149692"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149692"><span class="hs-identifier hs-var">scrut_ty</span></a></span></span><span> </span><span id="local-6989586621681149691"><span class="annot"><span class="annottext">Alt Var
</span><a href="#local-6989586621681149691"><span class="hs-identifier hs-var">alt</span></a></span></span><span>
</span><span id="line-3087"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Data alternative when scrutinee is not a tycon application&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-3088"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Scrutinee type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149692"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3089"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Alternative:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. OutputableBndr a =&gt; Alt a -&gt; SDoc
</span><a href="GHC.Core.Ppr.html#pprCoreAlt"><span class="hs-identifier hs-var">pprCoreAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Alt Var
</span><a href="#local-6989586621681149691"><span class="hs-identifier hs-var">alt</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3090"></span><span>
</span><span id="line-3091"></span><span class="annot"><a href="GHC.Core.Lint.html#mkNewTyDataConAltMsg"><span class="hs-identifier hs-type">mkNewTyDataConAltMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3092"></span><span id="mkNewTyDataConAltMsg"><span class="annot"><span class="annottext">mkNewTyDataConAltMsg :: LintedType -&gt; Alt Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkNewTyDataConAltMsg"><span class="hs-identifier hs-var hs-var">mkNewTyDataConAltMsg</span></a></span></span><span> </span><span id="local-6989586621681149689"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149689"><span class="hs-identifier hs-var">scrut_ty</span></a></span></span><span> </span><span id="local-6989586621681149688"><span class="annot"><span class="annottext">Alt Var
</span><a href="#local-6989586621681149688"><span class="hs-identifier hs-var">alt</span></a></span></span><span>
</span><span id="line-3093"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Data alternative for newtype datacon&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-3094"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Scrutinee type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149689"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3095"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Alternative:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. OutputableBndr a =&gt; Alt a -&gt; SDoc
</span><a href="GHC.Core.Ppr.html#pprCoreAlt"><span class="hs-identifier hs-var">pprCoreAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Alt Var
</span><a href="#local-6989586621681149688"><span class="hs-identifier hs-var">alt</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3096"></span><span>
</span><span id="line-3097"></span><span>
</span><span id="line-3098"></span><span class="hs-comment">------------------------------------------------------</span><span>
</span><span id="line-3099"></span><span class="hs-comment">--      Other error messages</span><span>
</span><span id="line-3100"></span><span>
</span><span id="line-3101"></span><span class="annot"><a href="GHC.Core.Lint.html#mkAppMsg"><span class="hs-identifier hs-type">mkAppMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3102"></span><span id="mkAppMsg"><span class="annot"><span class="annottext">mkAppMsg :: LintedType -&gt; LintedType -&gt; CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkAppMsg"><span class="hs-identifier hs-var hs-var">mkAppMsg</span></a></span></span><span> </span><span id="local-6989586621681149687"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149687"><span class="hs-identifier hs-var">fun_ty</span></a></span></span><span> </span><span id="local-6989586621681149686"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149686"><span class="hs-identifier hs-var">arg_ty</span></a></span></span><span> </span><span id="local-6989586621681149685"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149685"><span class="hs-identifier hs-var">arg</span></a></span></span><span>
</span><span id="line-3103"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Argument value doesn't match argument type:&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-3104"></span><span>              </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Fun type:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149687"><span class="hs-identifier hs-var">fun_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-3105"></span><span>              </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Arg type:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149686"><span class="hs-identifier hs-var">arg_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-3106"></span><span>              </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Arg:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149685"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-3107"></span><span>
</span><span id="line-3108"></span><span class="annot"><a href="GHC.Core.Lint.html#mkNonFunAppMsg"><span class="hs-identifier hs-type">mkNonFunAppMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3109"></span><span id="mkNonFunAppMsg"><span class="annot"><span class="annottext">mkNonFunAppMsg :: LintedType -&gt; LintedType -&gt; CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkNonFunAppMsg"><span class="hs-identifier hs-var hs-var">mkNonFunAppMsg</span></a></span></span><span> </span><span id="local-6989586621681149684"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149684"><span class="hs-identifier hs-var">fun_ty</span></a></span></span><span> </span><span id="local-6989586621681149683"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149683"><span class="hs-identifier hs-var">arg_ty</span></a></span></span><span> </span><span id="local-6989586621681149682"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149682"><span class="hs-identifier hs-var">arg</span></a></span></span><span>
</span><span id="line-3110"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Non-function type in function position&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-3111"></span><span>              </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Fun type:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149684"><span class="hs-identifier hs-var">fun_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-3112"></span><span>              </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Arg type:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149683"><span class="hs-identifier hs-var">arg_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-3113"></span><span>              </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Arg:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149682"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-3114"></span><span>
</span><span id="line-3115"></span><span class="annot"><a href="GHC.Core.Lint.html#mkLetErr"><span class="hs-identifier hs-type">mkLetErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3116"></span><span id="mkLetErr"><span class="annot"><span class="annottext">mkLetErr :: Var -&gt; CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkLetErr"><span class="hs-identifier hs-var hs-var">mkLetErr</span></a></span></span><span> </span><span id="local-6989586621681149681"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149681"><span class="hs-identifier hs-var">bndr</span></a></span></span><span> </span><span id="local-6989586621681149680"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149680"><span class="hs-identifier hs-var">rhs</span></a></span></span><span>
</span><span id="line-3117"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Bad `let' binding:&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-3118"></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Variable:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3119"></span><span>                 </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149681"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149681"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-3120"></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Rhs:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3121"></span><span>                 </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149680"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-3122"></span><span>
</span><span id="line-3123"></span><span class="annot"><a href="GHC.Core.Lint.html#mkTyAppMsg"><span class="hs-identifier hs-type">mkTyAppMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3124"></span><span id="mkTyAppMsg"><span class="annot"><span class="annottext">mkTyAppMsg :: LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkTyAppMsg"><span class="hs-identifier hs-var hs-var">mkTyAppMsg</span></a></span></span><span> </span><span id="local-6989586621681149679"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149679"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681149678"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149678"><span class="hs-identifier hs-var">arg_ty</span></a></span></span><span>
</span><span id="line-3125"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Illegal type application:&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-3126"></span><span>              </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Exp type:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3127"></span><span>                 </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149679"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149679"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-3128"></span><span>              </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Arg type:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3129"></span><span>                 </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149678"><span class="hs-identifier hs-var">arg_ty</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149678"><span class="hs-identifier hs-var">arg_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-3130"></span><span>
</span><span id="line-3131"></span><span class="annot"><a href="GHC.Core.Lint.html#emptyRec"><span class="hs-identifier hs-type">emptyRec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3132"></span><span id="emptyRec"><span class="annot"><span class="annottext">emptyRec :: CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#emptyRec"><span class="hs-identifier hs-var hs-var">emptyRec</span></a></span></span><span> </span><span id="local-6989586621681149677"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149677"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Empty Rec binding:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149677"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3133"></span><span>
</span><span id="line-3134"></span><span class="annot"><a href="GHC.Core.Lint.html#mkRhsMsg"><span class="hs-identifier hs-type">mkRhsMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3135"></span><span id="mkRhsMsg"><span class="annot"><span class="annottext">mkRhsMsg :: Var -&gt; SDoc -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkRhsMsg"><span class="hs-identifier hs-var hs-var">mkRhsMsg</span></a></span></span><span> </span><span id="local-6989586621681149676"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149676"><span class="hs-identifier hs-var">binder</span></a></span></span><span> </span><span id="local-6989586621681149675"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149675"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span id="local-6989586621681149674"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149674"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-3136"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-3137"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The type of this binder doesn't match the type of its&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149675"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3138"></span><span>            </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149676"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-3139"></span><span>     </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Binder's type:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149676"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-3140"></span><span>     </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Rhs type:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149674"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-3141"></span><span>
</span><span id="line-3142"></span><span class="annot"><a href="GHC.Core.Lint.html#mkLetAppMsg"><span class="hs-identifier hs-type">mkLetAppMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3143"></span><span id="mkLetAppMsg"><span class="annot"><span class="annottext">mkLetAppMsg :: CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkLetAppMsg"><span class="hs-identifier hs-var hs-var">mkLetAppMsg</span></a></span></span><span> </span><span id="local-6989586621681149673"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149673"><span class="hs-identifier hs-var">e</span></a></span></span><span>
</span><span id="line-3144"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;This argument does not satisfy the let/app invariant:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3145"></span><span>       </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149673"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3146"></span><span>
</span><span id="line-3147"></span><span class="annot"><a href="GHC.Core.Lint.html#badBndrTyMsg"><span class="hs-identifier hs-type">badBndrTyMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3148"></span><span id="badBndrTyMsg"><span class="annot"><span class="annottext">badBndrTyMsg :: Var -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Core.Lint.html#badBndrTyMsg"><span class="hs-identifier hs-var hs-var">badBndrTyMsg</span></a></span></span><span> </span><span id="local-6989586621681149672"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149672"><span class="hs-identifier hs-var">binder</span></a></span></span><span> </span><span id="local-6989586621681149671"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149671"><span class="hs-identifier hs-var">what</span></a></span></span><span>
</span><span id="line-3149"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The type of this binder is&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149671"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149672"><span class="hs-identifier hs-var">binder</span></a></span><span>
</span><span id="line-3150"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Binder's type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149672"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3151"></span><span>
</span><span id="line-3152"></span><span class="annot"><a href="GHC.Core.Lint.html#mkNonTopExportedMsg"><span class="hs-identifier hs-type">mkNonTopExportedMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3153"></span><span id="mkNonTopExportedMsg"><span class="annot"><span class="annottext">mkNonTopExportedMsg :: Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkNonTopExportedMsg"><span class="hs-identifier hs-var hs-var">mkNonTopExportedMsg</span></a></span></span><span> </span><span id="local-6989586621681149670"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149670"><span class="hs-identifier hs-var">binder</span></a></span></span><span>
</span><span id="line-3154"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Non-top-level binder is marked as exported:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149670"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-3155"></span><span>
</span><span id="line-3156"></span><span class="annot"><a href="GHC.Core.Lint.html#mkNonTopExternalNameMsg"><span class="hs-identifier hs-type">mkNonTopExternalNameMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3157"></span><span id="mkNonTopExternalNameMsg"><span class="annot"><span class="annottext">mkNonTopExternalNameMsg :: Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkNonTopExternalNameMsg"><span class="hs-identifier hs-var hs-var">mkNonTopExternalNameMsg</span></a></span></span><span> </span><span id="local-6989586621681149669"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149669"><span class="hs-identifier hs-var">binder</span></a></span></span><span>
</span><span id="line-3158"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Non-top-level binder has an external name:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149669"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-3159"></span><span>
</span><span id="line-3160"></span><span class="annot"><a href="GHC.Core.Lint.html#mkTopNonLitStrMsg"><span class="hs-identifier hs-type">mkTopNonLitStrMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3161"></span><span id="mkTopNonLitStrMsg"><span class="annot"><span class="annottext">mkTopNonLitStrMsg :: Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkTopNonLitStrMsg"><span class="hs-identifier hs-var hs-var">mkTopNonLitStrMsg</span></a></span></span><span> </span><span id="local-6989586621681149668"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149668"><span class="hs-identifier hs-var">binder</span></a></span></span><span>
</span><span id="line-3162"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Top-level Addr# binder has a non-literal rhs:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149668"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-3163"></span><span>
</span><span id="line-3164"></span><span class="annot"><a href="GHC.Core.Lint.html#mkKindErrMsg"><span class="hs-identifier hs-type">mkKindErrMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3165"></span><span id="mkKindErrMsg"><span class="annot"><span class="annottext">mkKindErrMsg :: Var -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkKindErrMsg"><span class="hs-identifier hs-var hs-var">mkKindErrMsg</span></a></span></span><span> </span><span id="local-6989586621681149667"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149667"><span class="hs-identifier hs-var">tyvar</span></a></span></span><span> </span><span id="local-6989586621681149666"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149666"><span class="hs-identifier hs-var">arg_ty</span></a></span></span><span>
</span><span id="line-3166"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Kinds don't match in type application:&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-3167"></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type variable:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3168"></span><span>                 </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149667"><span class="hs-identifier hs-var">tyvar</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149667"><span class="hs-identifier hs-var">tyvar</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-3169"></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Arg type:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3170"></span><span>                 </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149666"><span class="hs-identifier hs-var">arg_ty</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; LintedType -&gt; LintedType
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149666"><span class="hs-identifier hs-var">arg_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-3171"></span><span>
</span><span id="line-3172"></span><span class="annot"><a href="GHC.Core.Lint.html#mkCastErr"><span class="hs-identifier hs-type">mkCastErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3173"></span><span id="mkCastErr"><span class="annot"><span class="annottext">mkCastErr :: CoreExpr -&gt; Coercion -&gt; LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkCastErr"><span class="hs-identifier hs-var hs-var">mkCastErr</span></a></span></span><span> </span><span id="local-6989586621681149665"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149665"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; String -&gt; SDoc -&gt; Coercion -&gt; LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mk_cast_err"><span class="hs-identifier hs-var">mk_cast_err</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expression&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149665"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3174"></span><span>
</span><span id="line-3175"></span><span class="annot"><a href="GHC.Core.Lint.html#mkCastTyErr"><span class="hs-identifier hs-type">mkCastTyErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3176"></span><span id="mkCastTyErr"><span class="annot"><span class="annottext">mkCastTyErr :: LintedType -&gt; Coercion -&gt; LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkCastTyErr"><span class="hs-identifier hs-var hs-var">mkCastTyErr</span></a></span></span><span> </span><span id="local-6989586621681149663"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149663"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; String -&gt; SDoc -&gt; Coercion -&gt; LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mk_cast_err"><span class="hs-identifier hs-var">mk_cast_err</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;kind&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149663"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3177"></span><span>
</span><span id="line-3178"></span><span class="annot"><a href="GHC.Core.Lint.html#mk_cast_err"><span class="hs-identifier hs-type">mk_cast_err</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-comment">-- ^ What sort of casted thing this is</span><span>
</span><span id="line-3179"></span><span>                      </span><span class="hs-comment">--   (\&quot;expression\&quot; or \&quot;type\&quot;).</span><span>
</span><span id="line-3180"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-comment">-- ^ What sort of coercion is being used</span><span>
</span><span id="line-3181"></span><span>                      </span><span class="hs-comment">--   (\&quot;type\&quot; or \&quot;kind\&quot;).</span><span>
</span><span id="line-3182"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>   </span><span class="hs-comment">-- ^ The thing being casted.</span><span>
</span><span id="line-3183"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3184"></span><span id="mk_cast_err"><span class="annot"><span class="annottext">mk_cast_err :: String
-&gt; String -&gt; SDoc -&gt; Coercion -&gt; LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mk_cast_err"><span class="hs-identifier hs-var hs-var">mk_cast_err</span></a></span></span><span> </span><span id="local-6989586621681149662"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681149662"><span class="hs-identifier hs-var">thing_str</span></a></span></span><span> </span><span id="local-6989586621681149661"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681149661"><span class="hs-identifier hs-var">co_str</span></a></span></span><span> </span><span id="local-6989586621681149660"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149660"><span class="hs-identifier hs-var">pp_thing</span></a></span></span><span> </span><span id="local-6989586621681149659"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681149659"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span id="local-6989586621681149658"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149658"><span class="hs-identifier hs-var">from_ty</span></a></span></span><span> </span><span id="local-6989586621681149657"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149657"><span class="hs-identifier hs-var">thing_ty</span></a></span></span><span>
</span><span id="line-3185"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149656"><span class="hs-identifier hs-var">from_msg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;of Cast differs from&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149655"><span class="hs-identifier hs-var">co_msg</span></a></span><span>
</span><span id="line-3186"></span><span>            </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;of&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149654"><span class="hs-identifier hs-var">enclosed_msg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3187"></span><span>          </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149656"><span class="hs-identifier hs-var">from_msg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149658"><span class="hs-identifier hs-var">from_ty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3188"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="GHC.Utils.Misc.html#capitalise"><span class="hs-identifier hs-var">capitalise</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681149661"><span class="hs-identifier hs-var">co_str</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;of&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149654"><span class="hs-identifier hs-var">enclosed_msg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span>
</span><span id="line-3189"></span><span>            </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149657"><span class="hs-identifier hs-var">thing_ty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3190"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Actual&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149654"><span class="hs-identifier hs-var">enclosed_msg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149660"><span class="hs-identifier hs-var">pp_thing</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3191"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Coercion used in cast:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681149659"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-3192"></span><span>         </span><span class="hs-special">]</span><span>
</span><span id="line-3193"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3194"></span><span>    </span><span class="annot"><a href="#local-6989586621681149655"><span class="hs-identifier hs-type">co_msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681149656"><span class="hs-identifier hs-type">from_msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681149654"><span class="hs-identifier hs-type">enclosed_msg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3195"></span><span>    </span><span id="local-6989586621681149655"><span class="annot"><span class="annottext">co_msg :: SDoc
</span><a href="#local-6989586621681149655"><span class="hs-identifier hs-var hs-var">co_msg</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681149661"><span class="hs-identifier hs-var">co_str</span></a></span><span>
</span><span id="line-3196"></span><span>    </span><span id="local-6989586621681149656"><span class="annot"><span class="annottext">from_msg :: SDoc
</span><a href="#local-6989586621681149656"><span class="hs-identifier hs-var hs-var">from_msg</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;From-&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149655"><span class="hs-identifier hs-var">co_msg</span></a></span><span>
</span><span id="line-3197"></span><span>    </span><span id="local-6989586621681149654"><span class="annot"><span class="annottext">enclosed_msg :: SDoc
</span><a href="#local-6989586621681149654"><span class="hs-identifier hs-var hs-var">enclosed_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;enclosed&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681149662"><span class="hs-identifier hs-var">thing_str</span></a></span><span>
</span><span id="line-3198"></span><span>
</span><span id="line-3199"></span><span class="annot"><a href="GHC.Core.Lint.html#mkBadUnivCoMsg"><span class="hs-identifier hs-type">mkBadUnivCoMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#LeftOrRight"><span class="hs-identifier hs-type">LeftOrRight</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3200"></span><span id="mkBadUnivCoMsg"><span class="annot"><span class="annottext">mkBadUnivCoMsg :: LeftOrRight -&gt; Coercion -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadUnivCoMsg"><span class="hs-identifier hs-var hs-var">mkBadUnivCoMsg</span></a></span></span><span> </span><span id="local-6989586621681149652"><span class="annot"><span class="annottext">LeftOrRight
</span><a href="#local-6989586621681149652"><span class="hs-identifier hs-var">lr</span></a></span></span><span> </span><span id="local-6989586621681149651"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681149651"><span class="hs-identifier hs-var">co</span></a></span></span><span>
</span><span id="line-3201"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Kind mismatch on the&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LeftOrRight -&gt; SDoc
</span><a href="GHC.Core.Lint.html#pprLeftOrRight"><span class="hs-identifier hs-var">pprLeftOrRight</span></a></span><span> </span><span class="annot"><span class="annottext">LeftOrRight
</span><a href="#local-6989586621681149652"><span class="hs-identifier hs-var">lr</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-3202"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;side of a UnivCo:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681149651"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-3203"></span><span>
</span><span id="line-3204"></span><span class="annot"><a href="GHC.Core.Lint.html#mkBadProofIrrelMsg"><span class="hs-identifier hs-type">mkBadProofIrrelMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3205"></span><span id="mkBadProofIrrelMsg"><span class="annot"><span class="annottext">mkBadProofIrrelMsg :: LintedType -&gt; Coercion -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadProofIrrelMsg"><span class="hs-identifier hs-var hs-var">mkBadProofIrrelMsg</span></a></span></span><span> </span><span id="local-6989586621681149649"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149649"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681149648"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681149648"><span class="hs-identifier hs-var">co</span></a></span></span><span>
</span><span id="line-3206"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Found a non-coercion in a proof-irrelevance UnivCo:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3207"></span><span>       </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149649"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-3208"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;co:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681149648"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-3209"></span><span>
</span><span id="line-3210"></span><span class="annot"><a href="GHC.Core.Lint.html#mkBadTyVarMsg"><span class="hs-identifier hs-type">mkBadTyVarMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3211"></span><span id="mkBadTyVarMsg"><span class="annot"><span class="annottext">mkBadTyVarMsg :: Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadTyVarMsg"><span class="hs-identifier hs-var hs-var">mkBadTyVarMsg</span></a></span></span><span> </span><span id="local-6989586621681149647"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149647"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-3212"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Non-tyvar used in TyVarTy:&quot;</span></span><span>
</span><span id="line-3213"></span><span>      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149647"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149647"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3214"></span><span>
</span><span id="line-3215"></span><span class="annot"><a href="GHC.Core.Lint.html#mkBadJoinBindMsg"><span class="hs-identifier hs-type">mkBadJoinBindMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3216"></span><span id="mkBadJoinBindMsg"><span class="annot"><span class="annottext">mkBadJoinBindMsg :: Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadJoinBindMsg"><span class="hs-identifier hs-var hs-var">mkBadJoinBindMsg</span></a></span></span><span> </span><span id="local-6989586621681149646"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149646"><span class="hs-identifier hs-var">var</span></a></span></span><span>
</span><span id="line-3217"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Bad join point binding:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149646"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-3218"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Join points can be bound only by a non-top-level let&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3219"></span><span>
</span><span id="line-3220"></span><span class="annot"><a href="GHC.Core.Lint.html#mkInvalidJoinPointMsg"><span class="hs-identifier hs-type">mkInvalidJoinPointMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3221"></span><span id="mkInvalidJoinPointMsg"><span class="annot"><span class="annottext">mkInvalidJoinPointMsg :: Var -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkInvalidJoinPointMsg"><span class="hs-identifier hs-var hs-var">mkInvalidJoinPointMsg</span></a></span></span><span> </span><span id="local-6989586621681149645"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149645"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621681149644"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149644"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-3222"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Join point has invalid type:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3223"></span><span>        </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149645"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149644"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3224"></span><span>
</span><span id="line-3225"></span><span class="annot"><a href="GHC.Core.Lint.html#mkBadJoinArityMsg"><span class="hs-identifier hs-type">mkBadJoinArityMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3226"></span><span id="mkBadJoinArityMsg"><span class="annot"><span class="annottext">mkBadJoinArityMsg :: Var -&gt; JoinArity -&gt; JoinArity -&gt; CoreExpr -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadJoinArityMsg"><span class="hs-identifier hs-var hs-var">mkBadJoinArityMsg</span></a></span></span><span> </span><span id="local-6989586621681149643"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149643"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621681149642"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681149642"><span class="hs-identifier hs-var">ar</span></a></span></span><span> </span><span id="local-6989586621681149641"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681149641"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681149640"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149640"><span class="hs-identifier hs-var">rhs</span></a></span></span><span>
</span><span id="line-3227"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Join point has too few lambdas&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-3228"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Join var:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149643"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3229"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Join arity:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681149642"><span class="hs-identifier hs-var">ar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3230"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Number of lambdas:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681149642"><span class="hs-identifier hs-var">ar</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681149641"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-3231"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Rhs = &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149640"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-3232"></span><span>           </span><span class="hs-special">]</span><span>
</span><span id="line-3233"></span><span>
</span><span id="line-3234"></span><span class="annot"><a href="GHC.Core.Lint.html#invalidJoinOcc"><span class="hs-identifier hs-type">invalidJoinOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3235"></span><span id="invalidJoinOcc"><span class="annot"><span class="annottext">invalidJoinOcc :: Var -&gt; SDoc
</span><a href="GHC.Core.Lint.html#invalidJoinOcc"><span class="hs-identifier hs-var hs-var">invalidJoinOcc</span></a></span></span><span> </span><span id="local-6989586621681149639"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149639"><span class="hs-identifier hs-var">var</span></a></span></span><span>
</span><span id="line-3236"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Invalid occurrence of a join variable:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149639"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-3237"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The binder is either not a join point, or not valid here&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3238"></span><span>
</span><span id="line-3239"></span><span class="annot"><a href="GHC.Core.Lint.html#mkBadJumpMsg"><span class="hs-identifier hs-type">mkBadJumpMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3240"></span><span id="mkBadJumpMsg"><span class="annot"><span class="annottext">mkBadJumpMsg :: Var -&gt; JoinArity -&gt; JoinArity -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadJumpMsg"><span class="hs-identifier hs-var hs-var">mkBadJumpMsg</span></a></span></span><span> </span><span id="local-6989586621681149638"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149638"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621681149637"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681149637"><span class="hs-identifier hs-var">ar</span></a></span></span><span> </span><span id="local-6989586621681149636"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681149636"><span class="hs-identifier hs-var">nargs</span></a></span></span><span>
</span><span id="line-3241"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Join point invoked with wrong number of arguments&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-3242"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Join var:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149638"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3243"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Join arity:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681149637"><span class="hs-identifier hs-var">ar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3244"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Number of arguments:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681149636"><span class="hs-identifier hs-var">nargs</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3245"></span><span>
</span><span id="line-3246"></span><span class="annot"><a href="GHC.Core.Lint.html#mkInconsistentRecMsg"><span class="hs-identifier hs-type">mkInconsistentRecMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3247"></span><span id="mkInconsistentRecMsg"><span class="annot"><span class="annottext">mkInconsistentRecMsg :: [Var] -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkInconsistentRecMsg"><span class="hs-identifier hs-var hs-var">mkInconsistentRecMsg</span></a></span></span><span> </span><span id="local-6989586621681149635"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149635"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span>
</span><span id="line-3248"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Recursive let binders mix values and join points&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-3249"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Binders:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; SDoc
</span><a href="#local-6989586621681149634"><span class="hs-identifier hs-var">ppr_with_details</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681149635"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3250"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3251"></span><span>    </span><span id="local-6989586621681149634"><span class="annot"><span class="annottext">ppr_with_details :: Var -&gt; SDoc
</span><a href="#local-6989586621681149634"><span class="hs-identifier hs-var hs-var">ppr_with_details</span></a></span></span><span> </span><span id="local-6989586621681149630"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149630"><span class="hs-identifier hs-var">bndr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149630"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149630"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3252"></span><span>
</span><span id="line-3253"></span><span class="annot"><a href="GHC.Core.Lint.html#mkJoinBndrOccMismatchMsg"><span class="hs-identifier hs-type">mkJoinBndrOccMismatchMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#JoinArity"><span class="hs-identifier hs-type">JoinArity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#JoinArity"><span class="hs-identifier hs-type">JoinArity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3254"></span><span id="mkJoinBndrOccMismatchMsg"><span class="annot"><span class="annottext">mkJoinBndrOccMismatchMsg :: Var -&gt; JoinArity -&gt; JoinArity -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkJoinBndrOccMismatchMsg"><span class="hs-identifier hs-var hs-var">mkJoinBndrOccMismatchMsg</span></a></span></span><span> </span><span id="local-6989586621681149628"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149628"><span class="hs-identifier hs-var">bndr</span></a></span></span><span> </span><span id="local-6989586621681149627"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681149627"><span class="hs-identifier hs-var">join_arity_bndr</span></a></span></span><span> </span><span id="local-6989586621681149626"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681149626"><span class="hs-identifier hs-var">join_arity_occ</span></a></span></span><span>
</span><span id="line-3255"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Mismatch in join point arity between binder and occurrence&quot;</span></span><span>
</span><span id="line-3256"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Var:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149628"><span class="hs-identifier hs-var">bndr</span></a></span><span>
</span><span id="line-3257"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Arity at binding site:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681149627"><span class="hs-identifier hs-var">join_arity_bndr</span></a></span><span>
</span><span id="line-3258"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Arity at occurrence:  &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681149626"><span class="hs-identifier hs-var">join_arity_occ</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3259"></span><span>
</span><span id="line-3260"></span><span class="annot"><a href="GHC.Core.Lint.html#mkBndrOccTypeMismatchMsg"><span class="hs-identifier hs-type">mkBndrOccTypeMismatchMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html#LintedType"><span class="hs-identifier hs-type">LintedType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3261"></span><span id="mkBndrOccTypeMismatchMsg"><span class="annot"><span class="annottext">mkBndrOccTypeMismatchMsg :: Var -&gt; Var -&gt; LintedType -&gt; LintedType -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBndrOccTypeMismatchMsg"><span class="hs-identifier hs-var hs-var">mkBndrOccTypeMismatchMsg</span></a></span></span><span> </span><span id="local-6989586621681149625"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149625"><span class="hs-identifier hs-var">bndr</span></a></span></span><span> </span><span id="local-6989586621681149624"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149624"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621681149623"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149623"><span class="hs-identifier hs-var">bndr_ty</span></a></span></span><span> </span><span id="local-6989586621681149622"><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149622"><span class="hs-identifier hs-var">var_ty</span></a></span></span><span>
</span><span id="line-3262"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Mismatch in type between binder and occurrence&quot;</span></span><span>
</span><span id="line-3263"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Binder:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149625"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149623"><span class="hs-identifier hs-var">bndr_ty</span></a></span><span>
</span><span id="line-3264"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Occurrence:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149624"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LintedType
</span><a href="#local-6989586621681149622"><span class="hs-identifier hs-var">var_ty</span></a></span><span>
</span><span id="line-3265"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;  Before subst:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; LintedType
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149624"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3266"></span><span>
</span><span id="line-3267"></span><span class="annot"><a href="GHC.Core.Lint.html#mkBadJoinPointRuleMsg"><span class="hs-identifier hs-type">mkBadJoinPointRuleMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#JoinId"><span class="hs-identifier hs-type">JoinId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#JoinArity"><span class="hs-identifier hs-type">JoinArity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3268"></span><span id="mkBadJoinPointRuleMsg"><span class="annot"><span class="annottext">mkBadJoinPointRuleMsg :: Var -&gt; JoinArity -&gt; CoreRule -&gt; SDoc
</span><a href="GHC.Core.Lint.html#mkBadJoinPointRuleMsg"><span class="hs-identifier hs-var hs-var">mkBadJoinPointRuleMsg</span></a></span></span><span> </span><span id="local-6989586621681149620"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149620"><span class="hs-identifier hs-var">bndr</span></a></span></span><span> </span><span id="local-6989586621681149619"><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681149619"><span class="hs-identifier hs-var">join_arity</span></a></span></span><span> </span><span id="local-6989586621681149618"><span class="annot"><span class="annottext">CoreRule
</span><a href="#local-6989586621681149618"><span class="hs-identifier hs-var">rule</span></a></span></span><span>
</span><span id="line-3269"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Join point has rule with wrong number of arguments&quot;</span></span><span>
</span><span id="line-3270"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Var:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149620"><span class="hs-identifier hs-var">bndr</span></a></span><span>
</span><span id="line-3271"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Join arity:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><a href="#local-6989586621681149619"><span class="hs-identifier hs-var">join_arity</span></a></span><span>
</span><span id="line-3272"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Rule:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreRule
</span><a href="#local-6989586621681149618"><span class="hs-identifier hs-var">rule</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3273"></span><span>
</span><span id="line-3274"></span><span class="annot"><a href="GHC.Core.Lint.html#pprLeftOrRight"><span class="hs-identifier hs-type">pprLeftOrRight</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#LeftOrRight"><span class="hs-identifier hs-type">LeftOrRight</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3275"></span><span id="pprLeftOrRight"><span class="annot"><span class="annottext">pprLeftOrRight :: LeftOrRight -&gt; SDoc
</span><a href="GHC.Core.Lint.html#pprLeftOrRight"><span class="hs-identifier hs-var hs-var">pprLeftOrRight</span></a></span></span><span> </span><span class="annot"><span class="annottext">LeftOrRight
</span><a href="GHC.Types.Basic.html#CLeft"><span class="hs-identifier hs-var">CLeft</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;left&quot;</span></span><span>
</span><span id="line-3276"></span><span class="annot"><a href="GHC.Core.Lint.html#pprLeftOrRight"><span class="hs-identifier hs-var">pprLeftOrRight</span></a></span><span> </span><span class="annot"><span class="annottext">LeftOrRight
</span><a href="GHC.Types.Basic.html#CRight"><span class="hs-identifier hs-var">CRight</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;right&quot;</span></span><span>
</span><span id="line-3277"></span><span>
</span><span id="line-3278"></span><span class="annot"><a href="GHC.Core.Lint.html#dupVars"><span class="hs-identifier hs-type">dupVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#NonEmpty"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3279"></span><span id="dupVars"><span class="annot"><span class="annottext">dupVars :: [NonEmpty Var] -&gt; SDoc
</span><a href="GHC.Core.Lint.html#dupVars"><span class="hs-identifier hs-var hs-var">dupVars</span></a></span></span><span> </span><span id="local-6989586621681149617"><span class="annot"><span class="annottext">[NonEmpty Var]
</span><a href="#local-6989586621681149617"><span class="hs-identifier hs-var">vars</span></a></span></span><span>
</span><span id="line-3280"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Duplicate variables brought into scope&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3281"></span><span>       </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#toList"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">[NonEmpty Var]
</span><a href="#local-6989586621681149617"><span class="hs-identifier hs-var">vars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3282"></span><span>
</span><span id="line-3283"></span><span class="annot"><a href="GHC.Core.Lint.html#dupExtVars"><span class="hs-identifier hs-type">dupExtVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#NonEmpty"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3284"></span><span id="dupExtVars"><span class="annot"><span class="annottext">dupExtVars :: [NonEmpty Name] -&gt; SDoc
</span><a href="GHC.Core.Lint.html#dupExtVars"><span class="hs-identifier hs-var hs-var">dupExtVars</span></a></span></span><span> </span><span id="local-6989586621681149616"><span class="annot"><span class="annottext">[NonEmpty Name]
</span><a href="#local-6989586621681149616"><span class="hs-identifier hs-var">vars</span></a></span></span><span>
</span><span id="line-3285"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Duplicate top-level variables with the same qualified name&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3286"></span><span>       </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#toList"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">[NonEmpty Name]
</span><a href="#local-6989586621681149616"><span class="hs-identifier hs-var">vars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3287"></span><span>
</span><span id="line-3288"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Annotation Linting}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-3295"></span><span>
</span><span id="line-3296"></span><span class="hs-comment">-- | This checks whether a pass correctly looks through debug</span><span>
</span><span id="line-3297"></span><span class="hs-comment">-- annotations (@SourceNote@). This works a bit different from other</span><span>
</span><span id="line-3298"></span><span class="hs-comment">-- consistency checks: We check this by running the given task twice,</span><span>
</span><span id="line-3299"></span><span class="hs-comment">-- noting all differences between the results.</span><span>
</span><span id="line-3300"></span><span class="annot"><a href="GHC.Core.Lint.html#lintAnnots"><span class="hs-identifier hs-type">lintAnnots</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.ModGuts.html#ModGuts"><span class="hs-identifier hs-type">ModGuts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreM"><span class="hs-identifier hs-type">CoreM</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModGuts.html#ModGuts"><span class="hs-identifier hs-type">ModGuts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModGuts.html#ModGuts"><span class="hs-identifier hs-type">ModGuts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreM"><span class="hs-identifier hs-type">CoreM</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModGuts.html#ModGuts"><span class="hs-identifier hs-type">ModGuts</span></a></span><span>
</span><span id="line-3301"></span><span id="lintAnnots"><span class="annot"><span class="annottext">lintAnnots :: SDoc -&gt; (ModGuts -&gt; CoreM ModGuts) -&gt; ModGuts -&gt; CoreM ModGuts
</span><a href="GHC.Core.Lint.html#lintAnnots"><span class="hs-identifier hs-var hs-var">lintAnnots</span></a></span></span><span> </span><span id="local-6989586621681149615"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149615"><span class="hs-identifier hs-var">pname</span></a></span></span><span> </span><span id="local-6989586621681149614"><span class="annot"><span class="annottext">ModGuts -&gt; CoreM ModGuts
</span><a href="#local-6989586621681149614"><span class="hs-identifier hs-var">pass</span></a></span></span><span> </span><span id="local-6989586621681149613"><span class="annot"><span class="annottext">ModGuts
</span><a href="#local-6989586621681149613"><span class="hs-identifier hs-var">guts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3302"></span><span>  </span><span class="hs-comment">-- Run the pass as we normally would</span><span>
</span><span id="line-3303"></span><span>  </span><span id="local-6989586621681149612"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681149612"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-3304"></span><span>  </span><span id="local-6989586621681149611"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681149611"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasLogger m =&gt; m Logger
</span><a href="GHC.Utils.Logger.html#getLogger"><span class="hs-identifier hs-var">getLogger</span></a></span><span>
</span><span id="line-3305"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GeneralFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#gopt"><span class="hs-identifier hs-var">gopt</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_DoAnnotationLinting"><span class="hs-identifier hs-var">Opt_DoAnnotationLinting</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681149612"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-3306"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.3.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; String -&gt; IO ()
</span><a href="GHC.Utils.Error.html#showPass"><span class="hs-identifier hs-var">Err.showPass</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681149611"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681149612"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Annotation linting - first run&quot;</span></span><span>
</span><span id="line-3307"></span><span>  </span><span id="local-6989586621681149609"><span class="annot"><span class="annottext">ModGuts
</span><a href="#local-6989586621681149609"><span class="hs-identifier hs-var">nguts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ModGuts -&gt; CoreM ModGuts
</span><a href="#local-6989586621681149614"><span class="hs-identifier hs-var">pass</span></a></span><span> </span><span class="annot"><span class="annottext">ModGuts
</span><a href="#local-6989586621681149613"><span class="hs-identifier hs-var">guts</span></a></span><span>
</span><span id="line-3308"></span><span>  </span><span class="hs-comment">-- If appropriate re-run it without debug annotations to make sure</span><span>
</span><span id="line-3309"></span><span>  </span><span class="hs-comment">-- that they made no difference.</span><span>
</span><span id="line-3310"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GeneralFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#gopt"><span class="hs-identifier hs-var">gopt</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_DoAnnotationLinting"><span class="hs-identifier hs-var">Opt_DoAnnotationLinting</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681149612"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3311"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.3.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; String -&gt; IO ()
</span><a href="GHC.Utils.Error.html#showPass"><span class="hs-identifier hs-var">Err.showPass</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681149611"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681149612"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Annotation linting - second run&quot;</span></span><span>
</span><span id="line-3312"></span><span>    </span><span id="local-6989586621681149608"><span class="annot"><span class="annottext">ModGuts
</span><a href="#local-6989586621681149608"><span class="hs-identifier hs-var">nguts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ModGuts -&gt; CoreM ModGuts) -&gt; ModGuts -&gt; CoreM ModGuts
</span><a href="GHC.Core.Lint.html#withoutAnnots"><span class="hs-identifier hs-var">withoutAnnots</span></a></span><span> </span><span class="annot"><span class="annottext">ModGuts -&gt; CoreM ModGuts
</span><a href="#local-6989586621681149614"><span class="hs-identifier hs-var">pass</span></a></span><span> </span><span class="annot"><span class="annottext">ModGuts
</span><a href="#local-6989586621681149613"><span class="hs-identifier hs-var">guts</span></a></span><span>
</span><span id="line-3313"></span><span>    </span><span class="hs-comment">-- Finally compare the resulting bindings</span><span>
</span><span id="line-3314"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.3.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; String -&gt; IO ()
</span><a href="GHC.Utils.Error.html#showPass"><span class="hs-identifier hs-var">Err.showPass</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681149611"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681149612"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Annotation linting - comparison&quot;</span></span><span>
</span><span id="line-3315"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681149606"><span class="annot"><span class="annottext">binds :: [(Var, CoreExpr)]
</span><a href="#local-6989586621681149606"><span class="hs-identifier hs-var hs-var">binds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. [Bind b] -&gt; [(b, Expr b)]
</span><a href="GHC.Core.html#flattenBinds"><span class="hs-identifier hs-var">flattenBinds</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ModGuts -&gt; CoreProgram
</span><a href="GHC.Unit.Module.ModGuts.html#mg_binds"><span class="hs-identifier hs-var">mg_binds</span></a></span><span> </span><span class="annot"><span class="annottext">ModGuts
</span><a href="#local-6989586621681149609"><span class="hs-identifier hs-var">nguts</span></a></span><span>
</span><span id="line-3316"></span><span>        </span><span id="local-6989586621681149604"><span class="annot"><span class="annottext">binds' :: [(Var, CoreExpr)]
</span><a href="#local-6989586621681149604"><span class="hs-identifier hs-var hs-var">binds'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. [Bind b] -&gt; [(b, Expr b)]
</span><a href="GHC.Core.html#flattenBinds"><span class="hs-identifier hs-var">flattenBinds</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ModGuts -&gt; CoreProgram
</span><a href="GHC.Unit.Module.ModGuts.html#mg_binds"><span class="hs-identifier hs-var">mg_binds</span></a></span><span> </span><span class="annot"><span class="annottext">ModGuts
</span><a href="#local-6989586621681149608"><span class="hs-identifier hs-var">nguts'</span></a></span><span>
</span><span id="line-3317"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681149603"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681149603"><span class="hs-identifier hs-var">diffs</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; RnEnv2
-&gt; [(Var, CoreExpr)]
-&gt; [(Var, CoreExpr)]
-&gt; ([SDoc], RnEnv2)
</span><a href="GHC.Core.Utils.html#diffBinds"><span class="hs-identifier hs-var">diffBinds</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InScopeSet -&gt; RnEnv2
</span><a href="GHC.Types.Var.Env.html#mkRnEnv2"><span class="hs-identifier hs-var">mkRnEnv2</span></a></span><span> </span><span class="annot"><span class="annottext">InScopeSet
</span><a href="GHC.Types.Var.Env.html#emptyInScopeSet"><span class="hs-identifier hs-var">emptyInScopeSet</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Var, CoreExpr)]
</span><a href="#local-6989586621681149606"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, CoreExpr)]
</span><a href="#local-6989586621681149604"><span class="hs-identifier hs-var">binds'</span></a></span><span>
</span><span id="line-3318"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681149603"><span class="hs-identifier hs-var">diffs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; CoreM ()
</span><a href="GHC.Core.Opt.Monad.html#putMsg"><span class="hs-identifier hs-var">GHC.Core.Opt.Monad.putMsg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-3319"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Core.Lint.html#lint_banner"><span class="hs-identifier hs-var">lint_banner</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;warning&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681149615"><span class="hs-identifier hs-var">pname</span></a></span><span>
</span><span id="line-3320"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Core changes with annotations:&quot;</span></span><span>
</span><span id="line-3321"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultDumpStyle"><span class="hs-identifier hs-var">defaultDumpStyle</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681149603"><span class="hs-identifier hs-var">diffs</span></a></span><span>
</span><span id="line-3322"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-3323"></span><span>  </span><span class="hs-comment">-- Return actual new guts</span><span>
</span><span id="line-3324"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">ModGuts
</span><a href="#local-6989586621681149609"><span class="hs-identifier hs-var">nguts</span></a></span><span>
</span><span id="line-3325"></span><span>
</span><span id="line-3326"></span><span class="hs-comment">-- | Run the given pass without annotations. This means that we both</span><span>
</span><span id="line-3327"></span><span class="hs-comment">-- set the debugLevel setting to 0 in the environment as well as all</span><span>
</span><span id="line-3328"></span><span class="hs-comment">-- annotations from incoming modules.</span><span>
</span><span id="line-3329"></span><span class="annot"><a href="GHC.Core.Lint.html#withoutAnnots"><span class="hs-identifier hs-type">withoutAnnots</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.ModGuts.html#ModGuts"><span class="hs-identifier hs-type">ModGuts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreM"><span class="hs-identifier hs-type">CoreM</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModGuts.html#ModGuts"><span class="hs-identifier hs-type">ModGuts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModGuts.html#ModGuts"><span class="hs-identifier hs-type">ModGuts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Opt.Monad.html#CoreM"><span class="hs-identifier hs-type">CoreM</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModGuts.html#ModGuts"><span class="hs-identifier hs-type">ModGuts</span></a></span><span>
</span><span id="line-3330"></span><span id="withoutAnnots"><span class="annot"><span class="annottext">withoutAnnots :: (ModGuts -&gt; CoreM ModGuts) -&gt; ModGuts -&gt; CoreM ModGuts
</span><a href="GHC.Core.Lint.html#withoutAnnots"><span class="hs-identifier hs-var hs-var">withoutAnnots</span></a></span></span><span> </span><span id="local-6989586621681149598"><span class="annot"><span class="annottext">ModGuts -&gt; CoreM ModGuts
</span><a href="#local-6989586621681149598"><span class="hs-identifier hs-var">pass</span></a></span></span><span> </span><span id="local-6989586621681149597"><span class="annot"><span class="annottext">ModGuts
</span><a href="#local-6989586621681149597"><span class="hs-identifier hs-var">guts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3331"></span><span>  </span><span class="hs-comment">-- Remove debug flag from environment.</span><span>
</span><span id="line-3332"></span><span>  </span><span id="local-6989586621681149596"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681149596"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-3333"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681149595"><span class="annot"><span class="annottext">removeFlag :: HscEnv -&gt; HscEnv
</span><a href="#local-6989586621681149595"><span class="hs-identifier hs-var hs-var">removeFlag</span></a></span></span><span> </span><span id="local-6989586621681149594"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681149594"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681149594"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsc_dflags :: DynFlags
</span><a href="GHC.Driver.Env.Types.html#hsc_dflags"><span class="hs-identifier hs-var">hsc_dflags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681149596"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">debugLevel :: JoinArity
</span><a href="GHC.Driver.Session.html#debugLevel"><span class="hs-identifier hs-var">debugLevel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JoinArity
</span><span class="hs-number">0</span></span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3334"></span><span>      </span><span id="local-6989586621681149592"><span class="annot"><span class="annottext">withoutFlag :: CoreM ModGuts -&gt; CoreM (ModGuts, SimplCount)
</span><a href="#local-6989586621681149592"><span class="hs-identifier hs-var hs-var">withoutFlag</span></a></span></span><span> </span><span id="local-6989586621681149591"><span class="annot"><span class="annottext">CoreM ModGuts
</span><a href="#local-6989586621681149591"><span class="hs-identifier hs-var">corem</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3335"></span><span>          </span><span class="hs-comment">-- TODO: supply tag here as well ?</span><span>
</span><span id="line-3336"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.3.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a.
HscEnv
-&gt; RuleBase
-&gt; Char
-&gt; Module
-&gt; ModuleSet
-&gt; PrintUnqualified
-&gt; SrcSpan
-&gt; CoreM a
-&gt; IO (a, SimplCount)
</span><a href="GHC.Core.Opt.Monad.html#runCoreM"><span class="hs-identifier hs-var">runCoreM</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; HscEnv
</span><a href="#local-6989586621681149595"><span class="hs-identifier hs-var">removeFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CoreM HscEnv
</span><a href="GHC.Core.Opt.Monad.html#getHscEnv"><span class="hs-identifier hs-var">getHscEnv</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CoreM RuleBase
</span><a href="GHC.Core.Opt.Monad.html#getRuleBase"><span class="hs-identifier hs-var">getRuleBase</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span>
</span><span id="line-3337"></span><span>                                </span><span class="annot"><span class="annottext">CoreM Char
</span><a href="GHC.Core.Opt.Monad.html#getUniqMask"><span class="hs-identifier hs-var">getUniqMask</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasModule m =&gt; m Module
</span><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier hs-var">getModule</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span>
</span><span id="line-3338"></span><span>                                </span><span class="annot"><span class="annottext">CoreM ModuleSet
</span><a href="GHC.Core.Opt.Monad.html#getVisibleOrphanMods"><span class="hs-identifier hs-var">getVisibleOrphanMods</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span>
</span><span id="line-3339"></span><span>                                </span><span class="annot"><span class="annottext">CoreM PrintUnqualified
</span><a href="GHC.Core.Opt.Monad.html#getPrintUnqualified"><span class="hs-identifier hs-var">getPrintUnqualified</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CoreM SrcSpan
</span><a href="GHC.Core.Opt.Monad.html#getSrcSpanM"><span class="hs-identifier hs-var">getSrcSpanM</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span>
</span><span id="line-3340"></span><span>                                </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">CoreM ModGuts
</span><a href="#local-6989586621681149591"><span class="hs-identifier hs-var">corem</span></a></span><span>
</span><span id="line-3341"></span><span>  </span><span class="hs-comment">-- Nuke existing ticks in module.</span><span>
</span><span id="line-3342"></span><span>  </span><span class="hs-comment">-- TODO: Ticks in unfoldings. Maybe change unfolding so it removes</span><span>
</span><span id="line-3343"></span><span>  </span><span class="hs-comment">-- them in absence of debugLevel &gt; 0.</span><span>
</span><span id="line-3344"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681149583"><span class="annot"><span class="annottext">nukeTicks :: Expr b -&gt; Expr b
</span><a href="#local-6989586621681149583"><span class="hs-identifier hs-var hs-var">nukeTicks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. (CoreTickish -&gt; Bool) -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.Utils.html#stripTicksE"><span class="hs-identifier hs-var">stripTicksE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#tickishIsCode"><span class="hs-identifier hs-var">tickishIsCode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3345"></span><span>      </span><span class="annot"><a href="#local-6989586621681149580"><span class="hs-identifier hs-type">nukeAnnotsBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span>
</span><span id="line-3346"></span><span>      </span><span id="local-6989586621681149580"><span class="annot"><span class="annottext">nukeAnnotsBind :: Bind Var -&gt; Bind Var
</span><a href="#local-6989586621681149580"><span class="hs-identifier hs-var hs-var">nukeAnnotsBind</span></a></span></span><span> </span><span id="local-6989586621681149578"><span class="annot"><span class="annottext">Bind Var
</span><a href="#local-6989586621681149578"><span class="hs-identifier hs-var">bind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Bind Var
</span><a href="#local-6989586621681149578"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3347"></span><span>        </span><span class="annot"><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span id="local-6989586621681149577"><span class="annot"><span class="annottext">[(Var, CoreExpr)]
</span><a href="#local-6989586621681149577"><span class="hs-identifier hs-var">bs</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall b. [(b, Expr b)] -&gt; Bind b
</span><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681149576"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149576"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681149575"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149575"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149576"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall {b}. Expr b -&gt; Expr b
</span><a href="#local-6989586621681149583"><span class="hs-identifier hs-var">nukeTicks</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149575"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Var, CoreExpr)]
</span><a href="#local-6989586621681149577"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-3348"></span><span>        </span><span class="annot"><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-type">NonRec</span></a></span><span> </span><span id="local-6989586621681149574"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149574"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621681149573"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149573"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall b. b -&gt; Expr b -&gt; Bind b
</span><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-var">NonRec</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681149574"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall {b}. Expr b -&gt; Expr b
</span><a href="#local-6989586621681149583"><span class="hs-identifier hs-var">nukeTicks</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681149573"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-3349"></span><span>      </span><span id="local-6989586621681149572"><span class="annot"><span class="annottext">nukeAnnotsMod :: ModGuts -&gt; ModGuts
</span><a href="#local-6989586621681149572"><span class="hs-identifier hs-var hs-var">nukeAnnotsMod</span></a></span></span><span> </span><span id="local-6989586621681149571"><span class="annot"><span class="annottext">mg :: ModGuts
</span><a href="#local-6989586621681149571"><span class="hs-identifier hs-var">mg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Unit.Module.ModGuts.html#ModGuts"><span class="hs-identifier hs-type">ModGuts</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">mg_binds :: ModGuts -&gt; CoreProgram
</span><a href="GHC.Unit.Module.ModGuts.html#mg_binds"><span class="hs-identifier hs-var">mg_binds</span></a></span><span class="hs-glyph">=</span><span id="local-6989586621681149569"><span class="annot"><span class="annottext">CoreProgram
</span><a href="#local-6989586621681149569"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">}</span><span>
</span><span id="line-3350"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModGuts
</span><a href="#local-6989586621681149571"><span class="hs-identifier hs-var">mg</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">mg_binds :: CoreProgram
</span><a href="GHC.Unit.Module.ModGuts.html#mg_binds"><span class="hs-identifier hs-var">mg_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Bind Var -&gt; Bind Var
</span><a href="#local-6989586621681149580"><span class="hs-identifier hs-var">nukeAnnotsBind</span></a></span><span> </span><span class="annot"><span class="annottext">CoreProgram
</span><a href="#local-6989586621681149569"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-3351"></span><span>  </span><span class="hs-comment">-- Perform pass with all changes applied</span><span>
</span><span id="line-3352"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CoreM ModGuts -&gt; CoreM (ModGuts, SimplCount)
</span><a href="#local-6989586621681149592"><span class="hs-identifier hs-var">withoutFlag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ModGuts -&gt; CoreM ModGuts
</span><a href="#local-6989586621681149598"><span class="hs-identifier hs-var">pass</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModGuts -&gt; ModGuts
</span><a href="#local-6989586621681149572"><span class="hs-identifier hs-var">nukeAnnotsMod</span></a></span><span> </span><span class="annot"><span class="annottext">ModGuts
</span><a href="#local-6989586621681149597"><span class="hs-identifier hs-var">guts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3353"></span></pre></body></html>
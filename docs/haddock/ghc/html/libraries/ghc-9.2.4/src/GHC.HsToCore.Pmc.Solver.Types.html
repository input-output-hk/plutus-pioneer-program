<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ApplicativeDo       #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE CPP                 #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-comment">-- | Domain types used in &quot;GHC.HsToCore.Pmc.Solver&quot;.</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- The ultimate goal is to define 'Nabla', which models normalised refinement</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- types from the paper</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- [Lower Your Guards: A Compositional Pattern-Match Coverage Checker&quot;](https://dl.acm.org/doi/abs/10.1145/3408989).</span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.HsToCore.Pmc.Solver.Types</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Normalised refinement types</span></span><span>
</span><span id="line-12"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#BotInfo"><span class="hs-identifier">BotInfo</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConApp"><span class="hs-identifier">PmAltConApp</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#VarInfo"><span class="hs-identifier">VarInfo</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#TmState"><span class="hs-identifier">TmState</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#TyState"><span class="hs-identifier">TyState</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nabla"><span class="hs-identifier">Nabla</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier">Nablas</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#initNablas"><span class="hs-identifier">initNablas</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Caching residual COMPLETE sets</span></span><span>
</span><span id="line-16"></span><span>        </span><span class="annot"><a href="GHC.Types.CompleteMatch.html#CompleteMatch"><span class="hs-identifier">CompleteMatch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#ResidualCompleteMatches"><span class="hs-identifier">ResidualCompleteMatches</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#getRcm"><span class="hs-identifier">getRcm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#isRcmInitialised"><span class="hs-identifier">isRcmInitialised</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Representations for Literals and AltCons</span></span><span>
</span><span id="line-19"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier">PmLit</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitValue"><span class="hs-identifier">PmLitValue</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltCon"><span class="hs-identifier">PmAltCon</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmLitType"><span class="hs-identifier">pmLitType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmAltConType"><span class="hs-identifier">pmAltConType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#isPmAltConMatchStrict"><span class="hs-identifier">isPmAltConMatchStrict</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmAltConImplBangs"><span class="hs-identifier">pmAltConImplBangs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><span class="hs-comment">-- *** PmAltConSet</span></span><span>
</span><span id="line-23"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConSet"><span class="hs-identifier">PmAltConSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#emptyPmAltConSet"><span class="hs-identifier">emptyPmAltConSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#isEmptyPmAltConSet"><span class="hs-identifier">isEmptyPmAltConSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#elemPmAltConSet"><span class="hs-identifier">elemPmAltConSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#extendPmAltConSet"><span class="hs-identifier">extendPmAltConSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmAltConSetElems"><span class="hs-identifier">pmAltConSetElems</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>        </span><span class="annot"><span class="hs-comment">-- *** Equality on 'PmAltCon's</span></span><span>
</span><span id="line-27"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmEquality"><span class="hs-identifier">PmEquality</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#eqPmAltCon"><span class="hs-identifier">eqPmAltCon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>        </span><span class="annot"><span class="hs-comment">-- *** Operations on 'PmLit'</span></span><span>
</span><span id="line-30"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#literalToPmLit"><span class="hs-identifier">literalToPmLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#negatePmLit"><span class="hs-identifier">negatePmLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#overloadPmLit"><span class="hs-identifier">overloadPmLit</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmLitAsStringLit"><span class="hs-identifier">pmLitAsStringLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#coreExprAsPmLit"><span class="hs-identifier">coreExprAsPmLit</span></a></span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">

#include &quot;HsVersions.h&quot;
</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.html"><span class="hs-identifier">GHC.Types.Id</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html"><span class="hs-identifier">GHC.Types.Var.Set</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.DSet.html"><span class="hs-identifier">GHC.Types.Unique.DSet</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.SDFM.html"><span class="hs-identifier">GHC.Types.Unique.SDFM</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html"><span class="hs-identifier">GHC.Core.DataCon</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html"><span class="hs-identifier">GHC.Core.ConLike</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html"><span class="hs-identifier">GHC.Data.List.SetOps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.List.SetOps.html#unionLists"><span class="hs-identifier">unionLists</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Literal.html"><span class="hs-identifier">GHC.Types.Literal</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.html"><span class="hs-identifier">GHC.Core</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Map.Expr.html"><span class="hs-identifier">GHC.Core.Map.Expr</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Utils.html"><span class="hs-identifier">GHC.Core.Utils</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Utils.html#exprType"><span class="hs-identifier">exprType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html"><span class="hs-identifier">GHC.Builtin.Types</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.Prim.html"><span class="hs-identifier">GHC.Builtin.Types.Prim</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Solver.Monad.html"><span class="hs-identifier">GHC.Tc.Solver.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Solver.Monad.html#InertSet"><span class="hs-identifier">InertSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Solver.Monad.html#emptyInert"><span class="hs-identifier">emptyInert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html"><span class="hs-identifier">GHC.Tc.Utils.TcType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#isStringTy"><span class="hs-identifier">isStringTy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.CompleteMatch.html"><span class="hs-identifier">GHC.Types.CompleteMatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.CompleteMatch.html#CompleteMatch"><span class="hs-identifier">CompleteMatch</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html"><span class="hs-identifier">GHC.Types.SourceText</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SourceText.html#SourceText"><span class="hs-identifier">SourceText</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#mkFractionalLit"><span class="hs-identifier">mkFractionalLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#FractionalLit"><span class="hs-identifier">FractionalLit</span></a></span><span>
</span><span id="line-66"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#fractionalLitFromRational"><span class="hs-identifier">fractionalLitFromRational</span></a></span><span>
</span><span id="line-67"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#FractionalExponentBase"><span class="hs-identifier">FractionalExponentBase</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Numeric.html#"><span class="hs-identifier">Numeric</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Float.html#fromRat"><span class="hs-identifier">fromRat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Foldable.html#"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Foldable.html#find"><span class="hs-identifier">find</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Ratio.html#"><span class="hs-identifier">Data.Ratio</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Real.html#"><span class="hs-identifier">GHC.Real</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Real.html#Ratio"><span class="hs-identifier">Ratio</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Semigroup.html#"><span class="hs-identifier">Data.Semigroup</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Semi</span></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-comment">-- import GHC.Driver.Ppr</span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="hs-comment">--</span><span>
</span><span id="line-77"></span><span class="hs-comment">-- * Normalised refinement types</span><span>
</span><span id="line-78"></span><span class="hs-comment">--</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-comment">-- | A normalised refinement type &#8711; (\&quot;nabla\&quot;), comprised of an inert set of</span><span>
</span><span id="line-81"></span><span class="hs-comment">-- canonical (i.e. mutually compatible) term and type constraints that form the</span><span>
</span><span id="line-82"></span><span class="hs-comment">-- refinement type's predicate.</span><span>
</span><span id="line-83"></span><span class="hs-keyword">data</span><span> </span><span id="Nabla"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nabla"><span class="hs-identifier hs-var">Nabla</span></a></span></span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="MkNabla"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#MkNabla"><span class="hs-identifier hs-var">MkNabla</span></a></span></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="nabla_ty_st"><span class="annot"><span class="annottext">Nabla -&gt; TyState
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#nabla_ty_st"><span class="hs-identifier hs-var hs-var">nabla_ty_st</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#TyState"><span class="hs-identifier hs-type">TyState</span></a></span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-comment">-- ^ Type oracle; things like a~Int</span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="nabla_tm_st"><span class="annot"><span class="annottext">Nabla -&gt; TmState
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#nabla_tm_st"><span class="hs-identifier hs-var hs-var">nabla_tm_st</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#TmState"><span class="hs-identifier hs-type">TmState</span></a></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-comment">-- ^ Term oracle; things like x~Nothing</span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="hs-comment">-- | An initial nabla that is always satisfiable</span><span>
</span><span id="line-92"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#initNabla"><span class="hs-identifier hs-type">initNabla</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nabla"><span class="hs-identifier hs-type">Nabla</span></a></span><span>
</span><span id="line-93"></span><span id="initNabla"><span class="annot"><span class="annottext">initNabla :: Nabla
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#initNabla"><span class="hs-identifier hs-var hs-var">initNabla</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyState -&gt; TmState -&gt; Nabla
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#MkNabla"><span class="hs-identifier hs-var">MkNabla</span></a></span><span> </span><span class="annot"><span class="annottext">TyState
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#initTyState"><span class="hs-identifier hs-var">initTyState</span></a></span><span> </span><span class="annot"><span class="annottext">TmState
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#initTmState"><span class="hs-identifier hs-var">initTmState</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nabla"><span class="hs-identifier hs-type">Nabla</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-96"></span><span>  </span><span id="local-6989586621681365905"><span class="annot"><span class="annottext">ppr :: Nabla -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621681365903"><span class="annot"><span class="annottext">Nabla
</span><a href="#local-6989586621681365903"><span class="hs-identifier hs-var">nabla</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Nabla&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-97"></span><span>      </span><span class="hs-comment">-- intentionally formatted this way enable the dev to comment in only</span><span>
</span><span id="line-98"></span><span>      </span><span class="hs-comment">-- the info they need</span><span>
</span><span id="line-99"></span><span>      </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nabla -&gt; TmState
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#nabla_tm_st"><span class="hs-identifier hs-var">nabla_tm_st</span></a></span><span> </span><span class="annot"><span class="annottext">Nabla
</span><a href="#local-6989586621681365903"><span class="hs-identifier hs-var">nabla</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-100"></span><span>      </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nabla -&gt; TyState
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#nabla_ty_st"><span class="hs-identifier hs-var">nabla_ty_st</span></a></span><span> </span><span class="annot"><span class="annottext">Nabla
</span><a href="#local-6989586621681365903"><span class="hs-identifier hs-var">nabla</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-comment">-- | A disjunctive bag of 'Nabla's, representing a refinement type.</span><span>
</span><span id="line-104"></span><span class="hs-keyword">newtype</span><span> </span><span id="Nablas"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-var">Nablas</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MkNablas"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#MkNablas"><span class="hs-identifier hs-var">MkNablas</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nabla"><span class="hs-identifier hs-type">Nabla</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#initNablas"><span class="hs-identifier hs-type">initNablas</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span><span>
</span><span id="line-107"></span><span id="initNablas"><span class="annot"><span class="annottext">initNablas :: Nablas
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#initNablas"><span class="hs-identifier hs-var hs-var">initNablas</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag Nabla -&gt; Nablas
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#MkNablas"><span class="hs-identifier hs-var">MkNablas</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unitBag"><span class="hs-identifier hs-var">unitBag</span></a></span><span> </span><span class="annot"><span class="annottext">Nabla
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#initNabla"><span class="hs-identifier hs-var">initNabla</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-110"></span><span>  </span><span id="local-6989586621681365892"><span class="annot"><span class="annottext">ppr :: Nablas -&gt; SDoc
</span><a href="#local-6989586621681365892"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#MkNablas"><span class="hs-identifier hs-type">MkNablas</span></a></span><span> </span><span id="local-6989586621681365891"><span class="annot"><span class="annottext">Bag Nabla
</span><a href="#local-6989586621681365891"><span class="hs-identifier hs-var">nablas</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Bag Nabla
</span><a href="#local-6989586621681365891"><span class="hs-identifier hs-var">nablas</span></a></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681365886"><span id="local-6989586621681365888"><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#Semigroup"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-113"></span><span>  </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#MkNablas"><span class="hs-identifier hs-type">MkNablas</span></a></span><span> </span><span id="local-6989586621681365884"><span class="annot"><span class="annottext">Bag Nabla
</span><a href="#local-6989586621681365884"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681365883"><span class="annot"><span class="annottext">&lt;&gt; :: Nablas -&gt; Nablas -&gt; Nablas
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%3E"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#MkNablas"><span class="hs-identifier hs-type">MkNablas</span></a></span><span> </span><span id="local-6989586621681365882"><span class="annot"><span class="annottext">Bag Nabla
</span><a href="#local-6989586621681365882"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag Nabla -&gt; Nablas
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#MkNablas"><span class="hs-identifier hs-var">MkNablas</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag Nabla
</span><a href="#local-6989586621681365884"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Bag a -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-var">`unionBags`</span></a></span><span> </span><span class="annot"><span class="annottext">Bag Nabla
</span><a href="#local-6989586621681365882"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681365874"><span id="local-6989586621681365876"><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-116"></span><span>  </span><span id="local-6989586621681365872"><span class="annot"><span class="annottext">mempty :: Nablas
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag Nabla -&gt; Nablas
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#MkNablas"><span class="hs-identifier hs-var">MkNablas</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-comment">-- | The type oracle state. An 'GHC.Tc.Solver.Monad.InertSet' that we</span><span>
</span><span id="line-119"></span><span class="hs-comment">-- incrementally add local type constraints to, together with a sequence</span><span>
</span><span id="line-120"></span><span class="hs-comment">-- number that counts the number of times we extended it with new facts.</span><span>
</span><span id="line-121"></span><span class="hs-keyword">data</span><span> </span><span id="TyState"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#TyState"><span class="hs-identifier hs-var">TyState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TySt"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#TySt"><span class="hs-identifier hs-var">TySt</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="ty_st_n"><span class="annot"><span class="annottext">TyState -&gt; Int
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#ty_st_n"><span class="hs-identifier hs-var hs-var">ty_st_n</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span id="ty_st_inert"><span class="annot"><span class="annottext">TyState -&gt; InertSet
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#ty_st_inert"><span class="hs-identifier hs-var hs-var">ty_st_inert</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Tc.Solver.Monad.html#InertSet"><span class="hs-identifier hs-type">InertSet</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="hs-comment">-- | Not user-facing.</span><span>
</span><span id="line-124"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#TyState"><span class="hs-identifier hs-type">TyState</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-125"></span><span>  </span><span id="local-6989586621681365862"><span class="annot"><span class="annottext">ppr :: TyState -&gt; SDoc
</span><a href="#local-6989586621681365862"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#TySt"><span class="hs-identifier hs-type">TySt</span></a></span><span> </span><span id="local-6989586621681365861"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365861"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681365860"><span class="annot"><span class="annottext">InertSet
</span><a href="#local-6989586621681365860"><span class="hs-identifier hs-var">inert</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365861"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">InertSet
</span><a href="#local-6989586621681365860"><span class="hs-identifier hs-var">inert</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#initTyState"><span class="hs-identifier hs-type">initTyState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#TyState"><span class="hs-identifier hs-type">TyState</span></a></span><span>
</span><span id="line-128"></span><span id="initTyState"><span class="annot"><span class="annottext">initTyState :: TyState
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#initTyState"><span class="hs-identifier hs-var hs-var">initTyState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; InertSet -&gt; TyState
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#TySt"><span class="hs-identifier hs-var">TySt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">InertSet
</span><a href="GHC.Tc.Solver.Monad.html#emptyInert"><span class="hs-identifier hs-var">emptyInert</span></a></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="hs-comment">-- | The term oracle state. Stores 'VarInfo' for encountered 'Id's. These</span><span>
</span><span id="line-131"></span><span class="hs-comment">-- entries are possibly shared when we figure out that two variables must be</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- equal, thus represent the same set of values.</span><span>
</span><span id="line-133"></span><span class="hs-comment">--</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- See Note [TmState invariants] in &quot;GHC.HsToCore.Pmc.Solver&quot;.</span><span>
</span><span id="line-135"></span><span class="hs-keyword">data</span><span> </span><span id="TmState"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#TmState"><span class="hs-identifier hs-var">TmState</span></a></span></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TmSt"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#TmSt"><span class="hs-identifier hs-var">TmSt</span></a></span></span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="ts_facts"><span class="annot"><span class="annottext">TmState -&gt; UniqSDFM Id VarInfo
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#ts_facts"><span class="hs-identifier hs-var hs-var">ts_facts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Unique.SDFM.html#UniqSDFM"><span class="hs-identifier hs-type">UniqSDFM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#VarInfo"><span class="hs-identifier hs-type">VarInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-comment">-- ^ Facts about term variables. Deterministic env, so that we generate</span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-comment">-- deterministic error messages.</span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ts_reps"><span class="annot"><span class="annottext">TmState -&gt; CoreMap Id
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#ts_reps"><span class="hs-identifier hs-var hs-var">ts_reps</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Map.Expr.html#CoreMap"><span class="hs-identifier hs-type">CoreMap</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-comment">-- ^ An environment for looking up whether we already encountered semantically</span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-comment">-- equivalent expressions that we want to represent by the same 'Id'</span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-comment">-- representative.</span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ts_dirty"><span class="annot"><span class="annottext">TmState -&gt; DIdSet
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#ts_dirty"><span class="hs-identifier hs-var hs-var">ts_dirty</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Var.Set.html#DIdSet"><span class="hs-identifier hs-type">DIdSet</span></a></span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-comment">-- ^ Which 'VarInfo' needs to be checked for inhabitants because of new</span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-comment">-- negative constraints (e.g. @x &#8769; &#8869;@ or @x &#8769; K@).</span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-comment">-- | Information about an 'Id'. Stores positive ('vi_pos') facts, like @x ~ Just 42@,</span><span>
</span><span id="line-150"></span><span class="hs-comment">-- and negative ('vi_neg') facts, like &quot;x is not (:)&quot;.</span><span>
</span><span id="line-151"></span><span class="hs-comment">-- Also caches the type ('vi_ty'), the 'ResidualCompleteMatches' of a COMPLETE set</span><span>
</span><span id="line-152"></span><span class="hs-comment">-- ('vi_rcm').</span><span>
</span><span id="line-153"></span><span class="hs-comment">--</span><span>
</span><span id="line-154"></span><span class="hs-comment">-- Subject to Note [The Pos/Neg invariant] in &quot;GHC.HsToCore.Pmc.Solver&quot;.</span><span>
</span><span id="line-155"></span><span class="hs-keyword">data</span><span> </span><span id="VarInfo"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#VarInfo"><span class="hs-identifier hs-var">VarInfo</span></a></span></span><span>
</span><span id="line-156"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="VI"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#VI"><span class="hs-identifier hs-var">VI</span></a></span></span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="vi_id"><span class="annot"><span class="annottext">VarInfo -&gt; Id
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#vi_id"><span class="hs-identifier hs-var hs-var">vi_id</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-comment">-- ^ The 'Id' in question. Important for adding new constraints relative to</span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-comment">-- this 'VarInfo' when we don't easily have the 'Id' available.</span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="vi_pos"><span class="annot"><span class="annottext">VarInfo -&gt; [PmAltConApp]
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#vi_pos"><span class="hs-identifier hs-var hs-var">vi_pos</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConApp"><span class="hs-identifier hs-type">PmAltConApp</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-comment">-- ^ Positive info: 'PmAltCon' apps it is (i.e. @x ~ [Just y, PatSyn z]@), all</span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-comment">-- at the same time (i.e. conjunctive).  We need a list because of nested</span><span>
</span><span id="line-164"></span><span>  </span><span class="hs-comment">-- pattern matches involving pattern synonym</span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-comment">--    case x of { Just y -&gt; case x of PatSyn z -&gt; ... }</span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-comment">-- However, no more than one RealDataCon in the list, otherwise contradiction</span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-comment">-- because of generativity.</span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="vi_neg"><span class="annot"><span class="annottext">VarInfo -&gt; PmAltConSet
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#vi_neg"><span class="hs-identifier hs-var hs-var">vi_neg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConSet"><span class="hs-identifier hs-type">PmAltConSet</span></a></span><span>
</span><span id="line-170"></span><span>  </span><span class="hs-comment">-- ^ Negative info: A list of 'PmAltCon's that it cannot match.</span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-comment">-- Example, assuming</span><span>
</span><span id="line-172"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-173"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-comment">--     data T = Leaf Int | Branch T T | Node Int T</span><span>
</span><span id="line-175"></span><span>  </span><span class="hs-comment">-- @</span><span>
</span><span id="line-176"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-177"></span><span>  </span><span class="hs-comment">-- then @x &#8769; [Leaf, Node]@ means that @x@ cannot match a @Leaf@ or @Node@,</span><span>
</span><span id="line-178"></span><span>  </span><span class="hs-comment">-- and hence can only match @Branch@. Is orthogonal to anything from 'vi_pos',</span><span>
</span><span id="line-179"></span><span>  </span><span class="hs-comment">-- in the sense that 'eqPmAltCon' returns @PossiblyOverlap@ for any pairing</span><span>
</span><span id="line-180"></span><span>  </span><span class="hs-comment">-- between 'vi_pos' and 'vi_neg'.</span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-comment">-- See Note [Why record both positive and negative info?]</span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-comment">-- It's worth having an actual set rather than a simple association list,</span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-comment">-- because files like Cabal's `LicenseId` define relatively huge enums</span><span>
</span><span id="line-185"></span><span>  </span><span class="hs-comment">-- that lead to quadratic or worse behavior.</span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="vi_bot"><span class="annot"><span class="annottext">VarInfo -&gt; BotInfo
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#vi_bot"><span class="hs-identifier hs-var hs-var">vi_bot</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#BotInfo"><span class="hs-identifier hs-type">BotInfo</span></a></span><span>
</span><span id="line-188"></span><span>  </span><span class="hs-comment">-- ^ Can this variable be &#8869;? Models (mutually contradicting) @x ~ &#8869;@ and</span><span>
</span><span id="line-189"></span><span>  </span><span class="hs-comment">--   @x &#8769; &#8869;@ constraints. E.g.</span><span>
</span><span id="line-190"></span><span>  </span><span class="hs-comment">--    * 'MaybeBot': Don't know; Neither @x ~ &#8869;@ nor @x &#8769; &#8869;@.</span><span>
</span><span id="line-191"></span><span>  </span><span class="hs-comment">--    * 'IsBot': @x ~ &#8869;@</span><span>
</span><span id="line-192"></span><span>  </span><span class="hs-comment">--    * 'IsNotBot': @x &#8769; &#8869;@</span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="vi_rcm"><span class="annot"><span class="annottext">VarInfo -&gt; ResidualCompleteMatches
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#vi_rcm"><span class="hs-identifier hs-var hs-var">vi_rcm</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#ResidualCompleteMatches"><span class="hs-identifier hs-type">ResidualCompleteMatches</span></a></span><span>
</span><span id="line-195"></span><span>  </span><span class="hs-comment">-- ^ A cache of the associated COMPLETE sets. At any time a superset of</span><span>
</span><span id="line-196"></span><span>  </span><span class="hs-comment">-- possible constructors of each COMPLETE set. So, if it's not in here, we</span><span>
</span><span id="line-197"></span><span>  </span><span class="hs-comment">-- can't possibly match on it. Complementary to 'vi_neg'. We still need it</span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-comment">-- to recognise completion of a COMPLETE set efficiently for large enums.</span><span>
</span><span id="line-199"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="hs-keyword">data</span><span> </span><span id="PmAltConApp"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConApp"><span class="hs-identifier hs-var">PmAltConApp</span></a></span></span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="PACA"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PACA"><span class="hs-identifier hs-var">PACA</span></a></span></span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="paca_con"><span class="annot"><span class="annottext">PmAltConApp -&gt; PmAltCon
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#paca_con"><span class="hs-identifier hs-var hs-var">paca_con</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltCon"><span class="hs-identifier hs-type">PmAltCon</span></a></span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="paca_tvs"><span class="annot"><span class="annottext">PmAltConApp -&gt; [Id]
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#paca_tvs"><span class="hs-identifier hs-var hs-var">paca_tvs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="paca_ids"><span class="annot"><span class="annottext">PmAltConApp -&gt; [Id]
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#paca_ids"><span class="hs-identifier hs-var hs-var">paca_ids</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-comment">-- | See 'vi_bot'.</span><span>
</span><span id="line-209"></span><span class="hs-keyword">data</span><span> </span><span id="BotInfo"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#BotInfo"><span class="hs-identifier hs-var">BotInfo</span></a></span></span><span>
</span><span id="line-210"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="IsBot"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#IsBot"><span class="hs-identifier hs-var">IsBot</span></a></span></span><span>
</span><span id="line-211"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="IsNotBot"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#IsNotBot"><span class="hs-identifier hs-var">IsNotBot</span></a></span></span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MaybeBot"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#MaybeBot"><span class="hs-identifier hs-var">MaybeBot</span></a></span></span><span>
</span><span id="line-213"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681365837"><span id="local-6989586621681365839"><span class="annot"><span class="annottext">BotInfo -&gt; BotInfo -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: BotInfo -&gt; BotInfo -&gt; Bool
$c/= :: BotInfo -&gt; BotInfo -&gt; Bool
== :: BotInfo -&gt; BotInfo -&gt; Bool
$c== :: BotInfo -&gt; BotInfo -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConApp"><span class="hs-identifier hs-type">PmAltConApp</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-216"></span><span>  </span><span id="local-6989586621681365828"><span class="annot"><span class="annottext">ppr :: PmAltConApp -&gt; SDoc
</span><a href="#local-6989586621681365828"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PACA"><span class="hs-identifier hs-type">PACA</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">paca_con :: PmAltConApp -&gt; PmAltCon
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#paca_con"><span class="hs-identifier hs-var">paca_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365827"><span class="annot"><span class="annottext">PmAltCon
</span><a href="#local-6989586621681365827"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">paca_tvs :: PmAltConApp -&gt; [Id]
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#paca_tvs"><span class="hs-identifier hs-var">paca_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365826"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681365826"><span class="hs-identifier hs-var">tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">paca_ids :: PmAltConApp -&gt; [Id]
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#paca_ids"><span class="hs-identifier hs-var">paca_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365825"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681365825"><span class="hs-identifier hs-var">ids</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-217"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">PmAltCon
</span><a href="#local-6989586621681365827"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'@'</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681365826"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681365825"><span class="hs-identifier hs-var">ids</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#BotInfo"><span class="hs-identifier hs-type">BotInfo</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-220"></span><span>  </span><span id="local-6989586621681365818"><span class="annot"><span class="annottext">ppr :: BotInfo -&gt; SDoc
</span><a href="#local-6989586621681365818"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">BotInfo
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#MaybeBot"><span class="hs-identifier hs-var">MaybeBot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#underscore"><span class="hs-identifier hs-var">underscore</span></a></span><span>
</span><span id="line-221"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">BotInfo
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#IsBot"><span class="hs-identifier hs-var">IsBot</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;~&#8869;&quot;</span></span><span>
</span><span id="line-222"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">BotInfo
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#IsNotBot"><span class="hs-identifier hs-var">IsNotBot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#8769;&#8869;&quot;</span></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="hs-comment">-- | Not user-facing.</span><span>
</span><span id="line-225"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#TmState"><span class="hs-identifier hs-type">TmState</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-226"></span><span>  </span><span id="local-6989586621681365806"><span class="annot"><span class="annottext">ppr :: TmState -&gt; SDoc
</span><a href="#local-6989586621681365806"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#TmSt"><span class="hs-identifier hs-type">TmSt</span></a></span><span> </span><span id="local-6989586621681365805"><span class="annot"><span class="annottext">UniqSDFM Id VarInfo
</span><a href="#local-6989586621681365805"><span class="hs-identifier hs-var">state</span></a></span></span><span> </span><span id="local-6989586621681365804"><span class="annot"><span class="annottext">CoreMap Id
</span><a href="#local-6989586621681365804"><span class="hs-identifier hs-var">reps</span></a></span></span><span> </span><span id="local-6989586621681365803"><span class="annot"><span class="annottext">DIdSet
</span><a href="#local-6989586621681365803"><span class="hs-identifier hs-var">dirty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSDFM Id VarInfo
</span><a href="#local-6989586621681365805"><span class="hs-identifier hs-var">state</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreMap Id
</span><a href="#local-6989586621681365804"><span class="hs-identifier hs-var">reps</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DIdSet
</span><a href="#local-6989586621681365803"><span class="hs-identifier hs-var">dirty</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-comment">-- | Not user-facing.</span><span>
</span><span id="line-229"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#VarInfo"><span class="hs-identifier hs-type">VarInfo</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-230"></span><span>  </span><span id="local-6989586621681365789"><span class="annot"><span class="annottext">ppr :: VarInfo -&gt; SDoc
</span><a href="#local-6989586621681365789"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#VI"><span class="hs-identifier hs-type">VI</span></a></span><span> </span><span id="local-6989586621681365788"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365788"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681365787"><span class="annot"><span class="annottext">[PmAltConApp]
</span><a href="#local-6989586621681365787"><span class="hs-identifier hs-var">pos</span></a></span></span><span> </span><span id="local-6989586621681365786"><span class="annot"><span class="annottext">PmAltConSet
</span><a href="#local-6989586621681365786"><span class="hs-identifier hs-var">neg</span></a></span></span><span> </span><span id="local-6989586621681365785"><span class="annot"><span class="annottext">BotInfo
</span><a href="#local-6989586621681365785"><span class="hs-identifier hs-var">bot</span></a></span></span><span> </span><span id="local-6989586621681365784"><span class="annot"><span class="annottext">ResidualCompleteMatches
</span><a href="#local-6989586621681365784"><span class="hs-identifier hs-var">cache</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hcat"><span class="hs-identifier hs-var">hcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; [SDoc] -&gt; [SDoc]
</span><a href="GHC.Utils.Outputable.html#punctuate"><span class="hs-identifier hs-var">punctuate</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365779"><span class="hs-identifier hs-var">pp_x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365778"><span class="hs-identifier hs-var">pp_pos</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365777"><span class="hs-identifier hs-var">pp_neg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">BotInfo
</span><a href="#local-6989586621681365785"><span class="hs-identifier hs-var">bot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365776"><span class="hs-identifier hs-var">pp_cache</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-233"></span><span>      </span><span id="local-6989586621681365779"><span class="annot"><span class="annottext">pp_x :: SDoc
</span><a href="#local-6989586621681365779"><span class="hs-identifier hs-var hs-var">pp_x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365788"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365788"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-234"></span><span>      </span><span id="local-6989586621681365778"><span class="annot"><span class="annottext">pp_pos :: SDoc
</span><a href="#local-6989586621681365778"><span class="hs-identifier hs-var hs-var">pp_pos</span></a></span></span><span>
</span><span id="line-235"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[PmAltConApp]
</span><a href="#local-6989586621681365787"><span class="hs-identifier hs-var">pos</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#underscore"><span class="hs-identifier hs-var">underscore</span></a></span><span>
</span><span id="line-236"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681365773"><span class="annot"><span class="annottext">PmAltConApp
</span><a href="#local-6989586621681365773"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[PmAltConApp]
</span><a href="#local-6989586621681365787"><span class="hs-identifier hs-var">pos</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'~'</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">PmAltConApp
</span><a href="#local-6989586621681365773"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-comment">-- suppress outer [_] if singleton</span><span>
</span><span id="line-237"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'~'</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[PmAltConApp]
</span><a href="#local-6989586621681365787"><span class="hs-identifier hs-var">pos</span></a></span><span>
</span><span id="line-238"></span><span>      </span><span id="local-6989586621681365777"><span class="annot"><span class="annottext">pp_neg :: SDoc
</span><a href="#local-6989586621681365777"><span class="hs-identifier hs-var hs-var">pp_neg</span></a></span></span><span>
</span><span id="line-239"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PmAltConSet -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#isEmptyPmAltConSet"><span class="hs-identifier hs-var">isEmptyPmAltConSet</span></a></span><span> </span><span class="annot"><span class="annottext">PmAltConSet
</span><a href="#local-6989586621681365786"><span class="hs-identifier hs-var">neg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#underscore"><span class="hs-identifier hs-var">underscore</span></a></span><span>
</span><span id="line-240"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&#8769;'</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">PmAltConSet
</span><a href="#local-6989586621681365786"><span class="hs-identifier hs-var">neg</span></a></span><span>
</span><span id="line-241"></span><span>      </span><span id="local-6989586621681365776"><span class="annot"><span class="annottext">pp_cache :: SDoc
</span><a href="#local-6989586621681365776"><span class="hs-identifier hs-var hs-var">pp_cache</span></a></span></span><span>
</span><span id="line-242"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#RCM"><span class="hs-identifier hs-type">RCM</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe CompleteMatch
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [CompleteMatch]
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ResidualCompleteMatches
</span><a href="#local-6989586621681365784"><span class="hs-identifier hs-var">cache</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#underscore"><span class="hs-identifier hs-var">underscore</span></a></span><span>
</span><span id="line-243"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ResidualCompleteMatches
</span><a href="#local-6989586621681365784"><span class="hs-identifier hs-var">cache</span></a></span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span class="hs-comment">-- | Initial state of the term oracle.</span><span>
</span><span id="line-246"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#initTmState"><span class="hs-identifier hs-type">initTmState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#TmState"><span class="hs-identifier hs-type">TmState</span></a></span><span>
</span><span id="line-247"></span><span id="initTmState"><span class="annot"><span class="annottext">initTmState :: TmState
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#initTmState"><span class="hs-identifier hs-var hs-var">initTmState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UniqSDFM Id VarInfo -&gt; CoreMap Id -&gt; DIdSet -&gt; TmState
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#TmSt"><span class="hs-identifier hs-var">TmSt</span></a></span><span> </span><span class="annot"><span class="annottext">forall key ele. UniqSDFM key ele
</span><a href="GHC.Types.Unique.SDFM.html#emptyUSDFM"><span class="hs-identifier hs-var">emptyUSDFM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. CoreMap a
</span><a href="GHC.Core.Map.Expr.html#emptyCoreMap"><span class="hs-identifier hs-var">emptyCoreMap</span></a></span><span> </span><span class="annot"><span class="annottext">DIdSet
</span><a href="GHC.Types.Var.Set.html#emptyDVarSet"><span class="hs-identifier hs-var">emptyDVarSet</span></a></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="hs-comment">-- | A data type that caches for the 'VarInfo' of @x@ the results of querying</span><span>
</span><span id="line-250"></span><span class="hs-comment">-- 'dsGetCompleteMatches' and then striking out all occurrences of @K@ for</span><span>
</span><span id="line-251"></span><span class="hs-comment">-- which we already know @x &#8769; K@ from these sets.</span><span>
</span><span id="line-252"></span><span class="hs-comment">--</span><span>
</span><span id="line-253"></span><span class="hs-comment">-- For motivation, see Section 5.3 in Lower Your Guards.</span><span>
</span><span id="line-254"></span><span class="hs-comment">-- See also Note [Implementation of COMPLETE pragmas]</span><span>
</span><span id="line-255"></span><span class="hs-keyword">data</span><span> </span><span id="ResidualCompleteMatches"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#ResidualCompleteMatches"><span class="hs-identifier hs-var">ResidualCompleteMatches</span></a></span></span><span>
</span><span id="line-256"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="RCM"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#RCM"><span class="hs-identifier hs-var">RCM</span></a></span></span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="rcm_vanilla"><span class="annot"><span class="annottext">ResidualCompleteMatches -&gt; Maybe CompleteMatch
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#rcm_vanilla"><span class="hs-identifier hs-var hs-var">rcm_vanilla</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.CompleteMatch.html#CompleteMatch"><span class="hs-identifier hs-type">CompleteMatch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-comment">-- ^ The residual set for the vanilla COMPLETE set from the data defn.</span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-comment">-- Tracked separately from 'rcm_pragmas', because it might only be</span><span>
</span><span id="line-260"></span><span>  </span><span class="hs-comment">-- known much later (when we have enough type information to see the 'TyCon'</span><span>
</span><span id="line-261"></span><span>  </span><span class="hs-comment">-- of the match), or not at all even. Until that happens, it is 'Nothing'.</span><span>
</span><span id="line-262"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="rcm_pragmas"><span class="annot"><span class="annottext">ResidualCompleteMatches -&gt; Maybe [CompleteMatch]
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#rcm_pragmas"><span class="hs-identifier hs-var hs-var">rcm_pragmas</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.CompleteMatch.html#CompleteMatch"><span class="hs-identifier hs-type">CompleteMatch</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-comment">-- ^ The residual sets for /all/ COMPLETE sets from pragmas that are</span><span>
</span><span id="line-264"></span><span>  </span><span class="hs-comment">-- visible when compiling this module. Querying that set with</span><span>
</span><span id="line-265"></span><span>  </span><span class="hs-comment">-- 'dsGetCompleteMatches' requires 'DsM', so we initialise it with 'Nothing'</span><span>
</span><span id="line-266"></span><span>  </span><span class="hs-comment">-- until first needed in a 'DsM' context.</span><span>
</span><span id="line-267"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#getRcm"><span class="hs-identifier hs-type">getRcm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#ResidualCompleteMatches"><span class="hs-identifier hs-type">ResidualCompleteMatches</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.CompleteMatch.html#CompleteMatch"><span class="hs-identifier hs-type">CompleteMatch</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-270"></span><span id="getRcm"><span class="annot"><span class="annottext">getRcm :: ResidualCompleteMatches -&gt; [CompleteMatch]
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#getRcm"><span class="hs-identifier hs-var hs-var">getRcm</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#RCM"><span class="hs-identifier hs-type">RCM</span></a></span><span> </span><span id="local-6989586621681365766"><span class="annot"><span class="annottext">Maybe CompleteMatch
</span><a href="#local-6989586621681365766"><span class="hs-identifier hs-var">vanilla</span></a></span></span><span> </span><span id="local-6989586621681365765"><span class="annot"><span class="annottext">Maybe [CompleteMatch]
</span><a href="#local-6989586621681365765"><span class="hs-identifier hs-var">pragmas</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; [a]
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#maybeToList"><span class="hs-identifier hs-var">maybeToList</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe CompleteMatch
</span><a href="#local-6989586621681365766"><span class="hs-identifier hs-var">vanilla</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Maybe [CompleteMatch]
</span><a href="#local-6989586621681365765"><span class="hs-identifier hs-var">pragmas</span></a></span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#isRcmInitialised"><span class="hs-identifier hs-type">isRcmInitialised</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#ResidualCompleteMatches"><span class="hs-identifier hs-type">ResidualCompleteMatches</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-273"></span><span id="isRcmInitialised"><span class="annot"><span class="annottext">isRcmInitialised :: ResidualCompleteMatches -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#isRcmInitialised"><span class="hs-identifier hs-var hs-var">isRcmInitialised</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#RCM"><span class="hs-identifier hs-type">RCM</span></a></span><span> </span><span id="local-6989586621681365762"><span class="annot"><span class="annottext">Maybe CompleteMatch
</span><a href="#local-6989586621681365762"><span class="hs-identifier hs-var">vanilla</span></a></span></span><span> </span><span id="local-6989586621681365761"><span class="annot"><span class="annottext">Maybe [CompleteMatch]
</span><a href="#local-6989586621681365761"><span class="hs-identifier hs-var">pragmas</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#isJust"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe CompleteMatch
</span><a href="#local-6989586621681365762"><span class="hs-identifier hs-var">vanilla</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#isJust"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [CompleteMatch]
</span><a href="#local-6989586621681365761"><span class="hs-identifier hs-var">pragmas</span></a></span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#ResidualCompleteMatches"><span class="hs-identifier hs-type">ResidualCompleteMatches</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-276"></span><span>  </span><span class="hs-comment">-- formats as &quot;[{Nothing,Just},{P,Q}]&quot;</span><span>
</span><span id="line-277"></span><span>  </span><span id="local-6989586621681365754"><span class="annot"><span class="annottext">ppr :: ResidualCompleteMatches -&gt; SDoc
</span><a href="#local-6989586621681365754"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621681365753"><span class="annot"><span class="annottext">ResidualCompleteMatches
</span><a href="#local-6989586621681365753"><span class="hs-identifier hs-var">rcm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ResidualCompleteMatches -&gt; [CompleteMatch]
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#getRcm"><span class="hs-identifier hs-var">getRcm</span></a></span><span> </span><span class="annot"><span class="annottext">ResidualCompleteMatches
</span><a href="#local-6989586621681365753"><span class="hs-identifier hs-var">rcm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-280"></span><span class="hs-comment">-- The rest is just providing an IR for (overloaded!) literals and AltCons that</span><span>
</span><span id="line-281"></span><span class="hs-comment">-- sits between Hs and Core. We need a reliable way to detect and determine</span><span>
</span><span id="line-282"></span><span class="hs-comment">-- equality between them, which is impossible with Hs (too expressive) and with</span><span>
</span><span id="line-283"></span><span class="hs-comment">-- Core (no notion of overloaded literals, and even plain 'Int' literals are</span><span>
</span><span id="line-284"></span><span class="hs-comment">-- actually constructor apps). Also String literals are troublesome.</span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span class="hs-comment">-- | Literals (simple and overloaded ones) for pattern match checking.</span><span>
</span><span id="line-287"></span><span class="hs-comment">--</span><span>
</span><span id="line-288"></span><span class="hs-comment">-- See Note [Undecidable Equality for PmAltCons]</span><span>
</span><span id="line-289"></span><span class="hs-keyword">data</span><span> </span><span id="PmLit"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-var">PmLit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PmLit"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-var">PmLit</span></a></span></span><span>
</span><span id="line-290"></span><span>           </span><span class="hs-special">{</span><span> </span><span id="pm_lit_ty"><span class="annot"><span class="annottext">PmLit -&gt; Kind
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#pm_lit_ty"><span class="hs-identifier hs-var hs-var">pm_lit_ty</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-291"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="pm_lit_val"><span class="annot"><span class="annottext">PmLit -&gt; PmLitValue
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#pm_lit_val"><span class="hs-identifier hs-var hs-var">pm_lit_val</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitValue"><span class="hs-identifier hs-type">PmLitValue</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span class="hs-keyword">data</span><span> </span><span id="PmLitValue"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitValue"><span class="hs-identifier hs-var">PmLitValue</span></a></span></span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="PmLitInt"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitInt"><span class="hs-identifier hs-var">PmLitInt</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span>
</span><span id="line-295"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PmLitRat"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitRat"><span class="hs-identifier hs-var">PmLitRat</span></a></span></span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Real.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PmLitChar"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitChar"><span class="hs-identifier hs-var">PmLitChar</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span>
</span><span id="line-297"></span><span>  </span><span class="hs-comment">-- We won't actually see PmLitString in the oracle since we desugar strings to</span><span>
</span><span id="line-298"></span><span>  </span><span class="hs-comment">-- lists</span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PmLitString"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitString"><span class="hs-identifier hs-var">PmLitString</span></a></span></span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span>
</span><span id="line-300"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PmLitOverInt"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverInt"><span class="hs-identifier hs-var">PmLitOverInt</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-comment">{- How often Negated? -}</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span>
</span><span id="line-301"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PmLitOverRat"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverRat"><span class="hs-identifier hs-var">PmLitOverRat</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-comment">{- How often Negated? -}</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#FractionalLit"><span class="hs-identifier hs-type">FractionalLit</span></a></span><span>
</span><span id="line-302"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PmLitOverString"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverString"><span class="hs-identifier hs-var">PmLitOverString</span></a></span></span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span class="hs-comment">-- | Undecidable semantic equality result.</span><span>
</span><span id="line-305"></span><span class="hs-comment">-- See Note [Undecidable Equality for PmAltCons]</span><span>
</span><span id="line-306"></span><span class="hs-keyword">data</span><span> </span><span id="PmEquality"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmEquality"><span class="hs-identifier hs-var">PmEquality</span></a></span></span><span>
</span><span id="line-307"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Equal"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Equal"><span class="hs-identifier hs-var">Equal</span></a></span></span><span>
</span><span id="line-308"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Disjoint"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Disjoint"><span class="hs-identifier hs-var">Disjoint</span></a></span></span><span>
</span><span id="line-309"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PossiblyOverlap"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PossiblyOverlap"><span class="hs-identifier hs-var">PossiblyOverlap</span></a></span></span><span>
</span><span id="line-310"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365735"><span id="local-6989586621681365737"><span class="annot"><span class="annottext">PmEquality -&gt; PmEquality -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: PmEquality -&gt; PmEquality -&gt; Bool
$c/= :: PmEquality -&gt; PmEquality -&gt; Bool
== :: PmEquality -&gt; PmEquality -&gt; Bool
$c== :: PmEquality -&gt; PmEquality -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365729"><span id="local-6989586621681365731"><span id="local-6989586621681365733"><span class="annot"><span class="annottext">Int -&gt; PmEquality -&gt; ShowS
[PmEquality] -&gt; ShowS
PmEquality -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PmEquality] -&gt; ShowS
$cshowList :: [PmEquality] -&gt; ShowS
show :: PmEquality -&gt; String
$cshow :: PmEquality -&gt; String
showsPrec :: Int -&gt; PmEquality -&gt; ShowS
$cshowsPrec :: Int -&gt; PmEquality -&gt; ShowS
</span><a href="../../base-4.16.3.0/src/GHC-Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="hs-comment">-- | When 'PmEquality' can be decided. @True &lt;=&gt; Equal@, @False &lt;=&gt; Disjoint@.</span><span>
</span><span id="line-313"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#decEquality"><span class="hs-identifier hs-type">decEquality</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmEquality"><span class="hs-identifier hs-type">PmEquality</span></a></span><span>
</span><span id="line-314"></span><span id="decEquality"><span class="annot"><span class="annottext">decEquality :: Bool -&gt; PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#decEquality"><span class="hs-identifier hs-var hs-var">decEquality</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#Equal"><span class="hs-identifier hs-var">Equal</span></a></span><span>
</span><span id="line-315"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#decEquality"><span class="hs-identifier hs-var">decEquality</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#Disjoint"><span class="hs-identifier hs-var">Disjoint</span></a></span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span class="hs-comment">-- | Undecidable equality for values represented by 'PmLit's.</span><span>
</span><span id="line-318"></span><span class="hs-comment">-- See Note [Undecidable Equality for PmAltCons]</span><span>
</span><span id="line-319"></span><span class="hs-comment">--</span><span>
</span><span id="line-320"></span><span class="hs-comment">-- * @Just True@ ==&gt; Surely equal</span><span>
</span><span id="line-321"></span><span class="hs-comment">-- * @Just False@ ==&gt; Surely different (non-overlapping, even!)</span><span>
</span><span id="line-322"></span><span class="hs-comment">-- * @Nothing@ ==&gt; Equality relation undecidable</span><span>
</span><span id="line-323"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#eqPmLit"><span class="hs-identifier hs-type">eqPmLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmEquality"><span class="hs-identifier hs-type">PmEquality</span></a></span><span>
</span><span id="line-324"></span><span id="eqPmLit"><span class="annot"><span class="annottext">eqPmLit :: PmLit -&gt; PmLit -&gt; PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#eqPmLit"><span class="hs-identifier hs-var hs-var">eqPmLit</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span> </span><span id="local-6989586621681365725"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365725"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681365724"><span class="annot"><span class="annottext">PmLitValue
</span><a href="#local-6989586621681365724"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span> </span><span id="local-6989586621681365723"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365723"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span id="local-6989586621681365722"><span class="annot"><span class="annottext">PmLitValue
</span><a href="#local-6989586621681365722"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-325"></span><span>  </span><span class="hs-comment">-- no haddock | pprTrace &quot;eqPmLit&quot; (ppr t1 &lt;+&gt; ppr v1 $$ ppr t2 &lt;+&gt; ppr v2) False = undefined</span><span>
</span><span id="line-326"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365725"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365723"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#Disjoint"><span class="hs-identifier hs-var">Disjoint</span></a></span><span>
</span><span id="line-327"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmLitValue -&gt; PmLitValue -&gt; PmEquality
</span><a href="#local-6989586621681365719"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">PmLitValue
</span><a href="#local-6989586621681365724"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">PmLitValue
</span><a href="#local-6989586621681365722"><span class="hs-identifier hs-var">v2</span></a></span><span>
</span><span id="line-328"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-329"></span><span>    </span><span id="local-6989586621681365719"><span class="annot"><span class="annottext">go :: PmLitValue -&gt; PmLitValue -&gt; PmEquality
</span><a href="#local-6989586621681365719"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitInt"><span class="hs-identifier hs-type">PmLitInt</span></a></span><span> </span><span id="local-6989586621681365704"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365704"><span class="hs-identifier hs-var">i1</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitInt"><span class="hs-identifier hs-type">PmLitInt</span></a></span><span> </span><span id="local-6989586621681365703"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365703"><span class="hs-identifier hs-var">i2</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#decEquality"><span class="hs-identifier hs-var">decEquality</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365704"><span class="hs-identifier hs-var">i1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365703"><span class="hs-identifier hs-var">i2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span>    </span><span class="annot"><a href="#local-6989586621681365719"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitRat"><span class="hs-identifier hs-type">PmLitRat</span></a></span><span> </span><span id="local-6989586621681365702"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681365702"><span class="hs-identifier hs-var">r1</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitRat"><span class="hs-identifier hs-type">PmLitRat</span></a></span><span> </span><span id="local-6989586621681365701"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681365701"><span class="hs-identifier hs-var">r2</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#decEquality"><span class="hs-identifier hs-var">decEquality</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681365702"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681365701"><span class="hs-identifier hs-var">r2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>    </span><span class="annot"><a href="#local-6989586621681365719"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitChar"><span class="hs-identifier hs-type">PmLitChar</span></a></span><span> </span><span id="local-6989586621681365700"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681365700"><span class="hs-identifier hs-var">c1</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitChar"><span class="hs-identifier hs-type">PmLitChar</span></a></span><span> </span><span id="local-6989586621681365699"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681365699"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#decEquality"><span class="hs-identifier hs-var">decEquality</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681365700"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681365699"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>    </span><span class="annot"><a href="#local-6989586621681365719"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitString"><span class="hs-identifier hs-type">PmLitString</span></a></span><span> </span><span id="local-6989586621681365698"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365698"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitString"><span class="hs-identifier hs-type">PmLitString</span></a></span><span> </span><span id="local-6989586621681365697"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365697"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#decEquality"><span class="hs-identifier hs-var">decEquality</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365698"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365697"><span class="hs-identifier hs-var">s2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-333"></span><span>    </span><span class="annot"><a href="#local-6989586621681365719"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverInt"><span class="hs-identifier hs-type">PmLitOverInt</span></a></span><span> </span><span id="local-6989586621681365696"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365696"><span class="hs-identifier hs-var">n1</span></a></span></span><span> </span><span id="local-6989586621681365695"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365695"><span class="hs-identifier hs-var">i1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverInt"><span class="hs-identifier hs-type">PmLitOverInt</span></a></span><span> </span><span id="local-6989586621681365694"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365694"><span class="hs-identifier hs-var">n2</span></a></span></span><span> </span><span id="local-6989586621681365693"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365693"><span class="hs-identifier hs-var">i2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365696"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365694"><span class="hs-identifier hs-var">n2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365695"><span class="hs-identifier hs-var">i1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365693"><span class="hs-identifier hs-var">i2</span></a></span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#Equal"><span class="hs-identifier hs-var">Equal</span></a></span><span>
</span><span id="line-335"></span><span>    </span><span class="annot"><a href="#local-6989586621681365719"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverRat"><span class="hs-identifier hs-type">PmLitOverRat</span></a></span><span> </span><span id="local-6989586621681365692"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365692"><span class="hs-identifier hs-var">n1</span></a></span></span><span> </span><span id="local-6989586621681365691"><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681365691"><span class="hs-identifier hs-var">r1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverRat"><span class="hs-identifier hs-type">PmLitOverRat</span></a></span><span> </span><span id="local-6989586621681365690"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365690"><span class="hs-identifier hs-var">n2</span></a></span></span><span> </span><span id="local-6989586621681365689"><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681365689"><span class="hs-identifier hs-var">r2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365692"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365690"><span class="hs-identifier hs-var">n2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681365691"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681365689"><span class="hs-identifier hs-var">r2</span></a></span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#Equal"><span class="hs-identifier hs-var">Equal</span></a></span><span>
</span><span id="line-337"></span><span>    </span><span class="annot"><a href="#local-6989586621681365719"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverString"><span class="hs-identifier hs-type">PmLitOverString</span></a></span><span> </span><span id="local-6989586621681365688"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365688"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverString"><span class="hs-identifier hs-type">PmLitOverString</span></a></span><span> </span><span id="local-6989586621681365687"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365687"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365688"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365687"><span class="hs-identifier hs-var">s2</span></a></span><span>                                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#Equal"><span class="hs-identifier hs-var">Equal</span></a></span><span>
</span><span id="line-339"></span><span>    </span><span class="annot"><a href="#local-6989586621681365719"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">PmLitValue
</span><span class="hs-identifier">_</span></span><span>                    </span><span class="annot"><span class="annottext">PmLitValue
</span><span class="hs-identifier">_</span></span><span>                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PossiblyOverlap"><span class="hs-identifier hs-var">PossiblyOverlap</span></a></span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span class="hs-comment">-- | Syntactic equality.</span><span>
</span><span id="line-342"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681365684"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-343"></span><span>  </span><span id="local-6989586621681365682"><span class="annot"><span class="annottext">PmLit
</span><a href="#local-6989586621681365682"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681365681"><span class="annot"><span class="annottext">== :: PmLit -&gt; PmLit -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span id="local-6989586621681365680"><span class="annot"><span class="annottext">PmLit
</span><a href="#local-6989586621681365680"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmLit -&gt; PmLit -&gt; PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#eqPmLit"><span class="hs-identifier hs-var">eqPmLit</span></a></span><span> </span><span class="annot"><span class="annottext">PmLit
</span><a href="#local-6989586621681365682"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">PmLit
</span><a href="#local-6989586621681365680"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#Equal"><span class="hs-identifier hs-var">Equal</span></a></span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span class="hs-comment">-- | Type of a 'PmLit'</span><span>
</span><span id="line-346"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmLitType"><span class="hs-identifier hs-type">pmLitType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-347"></span><span id="pmLitType"><span class="annot"><span class="annottext">pmLitType :: PmLit -&gt; Kind
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmLitType"><span class="hs-identifier hs-var hs-var">pmLitType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span> </span><span id="local-6989586621681365679"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365679"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">PmLitValue
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365679"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span class="hs-comment">-- | Undecidable equality for values represented by 'ConLike's.</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- See Note [Undecidable Equality for PmAltCons].</span><span>
</span><span id="line-351"></span><span class="hs-comment">-- 'PatSynCon's aren't enforced to be generative, so two syntactically different</span><span>
</span><span id="line-352"></span><span class="hs-comment">-- 'PatSynCon's might match the exact same values. Without looking into and</span><span>
</span><span id="line-353"></span><span class="hs-comment">-- reasoning about the pattern synonym's definition, we can't decide if their</span><span>
</span><span id="line-354"></span><span class="hs-comment">-- sets of matched values is different.</span><span>
</span><span id="line-355"></span><span class="hs-comment">--</span><span>
</span><span id="line-356"></span><span class="hs-comment">-- * @Just True@ ==&gt; Surely equal</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- * @Just False@ ==&gt; Surely different (non-overlapping, even!)</span><span>
</span><span id="line-358"></span><span class="hs-comment">-- * @Nothing@ ==&gt; Equality relation undecidable</span><span>
</span><span id="line-359"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#eqConLike"><span class="hs-identifier hs-type">eqConLike</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html#ConLike"><span class="hs-identifier hs-type">ConLike</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html#ConLike"><span class="hs-identifier hs-type">ConLike</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmEquality"><span class="hs-identifier hs-type">PmEquality</span></a></span><span>
</span><span id="line-360"></span><span id="eqConLike"><span class="annot"><span class="annottext">eqConLike :: ConLike -&gt; ConLike -&gt; PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#eqConLike"><span class="hs-identifier hs-var hs-var">eqConLike</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-type">RealDataCon</span></a></span><span> </span><span id="local-6989586621681365676"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681365676"><span class="hs-identifier hs-var">dc1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-type">RealDataCon</span></a></span><span> </span><span id="local-6989586621681365675"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681365675"><span class="hs-identifier hs-var">dc2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#decEquality"><span class="hs-identifier hs-var">decEquality</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681365676"><span class="hs-identifier hs-var">dc1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681365675"><span class="hs-identifier hs-var">dc2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-361"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#eqConLike"><span class="hs-identifier hs-var">eqConLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-type">PatSynCon</span></a></span><span> </span><span id="local-6989586621681365673"><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621681365673"><span class="hs-identifier hs-var">psc1</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-type">PatSynCon</span></a></span><span> </span><span id="local-6989586621681365672"><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621681365672"><span class="hs-identifier hs-var">psc2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621681365673"><span class="hs-identifier hs-var">psc1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621681365672"><span class="hs-identifier hs-var">psc2</span></a></span><span>
</span><span id="line-363"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#Equal"><span class="hs-identifier hs-var">Equal</span></a></span><span>
</span><span id="line-364"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#eqConLike"><span class="hs-identifier hs-var">eqConLike</span></a></span><span> </span><span class="annot"><span class="annottext">ConLike
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="annot"><span class="annottext">ConLike
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PossiblyOverlap"><span class="hs-identifier hs-var">PossiblyOverlap</span></a></span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span class="hs-comment">-- | Represents the head of a match against a 'ConLike' or literal.</span><span>
</span><span id="line-367"></span><span class="hs-comment">-- Really similar to 'GHC.Core.AltCon'.</span><span>
</span><span id="line-368"></span><span class="hs-keyword">data</span><span> </span><span id="PmAltCon"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltCon"><span class="hs-identifier hs-var">PmAltCon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PmAltConLike"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConLike"><span class="hs-identifier hs-var">PmAltConLike</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html#ConLike"><span class="hs-identifier hs-type">ConLike</span></a></span><span>
</span><span id="line-369"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span id="PmAltLit"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltLit"><span class="hs-identifier hs-var">PmAltLit</span></a></span></span><span>     </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span class="hs-keyword">data</span><span> </span><span id="PmAltConSet"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConSet"><span class="hs-identifier hs-var">PmAltConSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PACS"><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PACS"><span class="hs-identifier hs-var">PACS</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Unique.DSet.html#UniqDSet"><span class="hs-identifier hs-type">UniqDSet</span></a></span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html#ConLike"><span class="hs-identifier hs-type">ConLike</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#emptyPmAltConSet"><span class="hs-identifier hs-type">emptyPmAltConSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConSet"><span class="hs-identifier hs-type">PmAltConSet</span></a></span><span>
</span><span id="line-374"></span><span id="emptyPmAltConSet"><span class="annot"><span class="annottext">emptyPmAltConSet :: PmAltConSet
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#emptyPmAltConSet"><span class="hs-identifier hs-var hs-var">emptyPmAltConSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UniqDSet ConLike -&gt; [PmLit] -&gt; PmAltConSet
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PACS"><span class="hs-identifier hs-var">PACS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. UniqDSet a
</span><a href="GHC.Types.Unique.DSet.html#emptyUniqDSet"><span class="hs-identifier hs-var">emptyUniqDSet</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#isEmptyPmAltConSet"><span class="hs-identifier hs-type">isEmptyPmAltConSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConSet"><span class="hs-identifier hs-type">PmAltConSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-377"></span><span id="isEmptyPmAltConSet"><span class="annot"><span class="annottext">isEmptyPmAltConSet :: PmAltConSet -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#isEmptyPmAltConSet"><span class="hs-identifier hs-var hs-var">isEmptyPmAltConSet</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PACS"><span class="hs-identifier hs-type">PACS</span></a></span><span> </span><span id="local-6989586621681365667"><span class="annot"><span class="annottext">UniqDSet ConLike
</span><a href="#local-6989586621681365667"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span id="local-6989586621681365666"><span class="annot"><span class="annottext">[PmLit]
</span><a href="#local-6989586621681365666"><span class="hs-identifier hs-var">lits</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. UniqDSet a -&gt; Bool
</span><a href="GHC.Types.Unique.DSet.html#isEmptyUniqDSet"><span class="hs-identifier hs-var">isEmptyUniqDSet</span></a></span><span> </span><span class="annot"><span class="annottext">UniqDSet ConLike
</span><a href="#local-6989586621681365667"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[PmLit]
</span><a href="#local-6989586621681365666"><span class="hs-identifier hs-var">lits</span></a></span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span class="hs-comment">-- | Whether there is a 'PmAltCon' in the 'PmAltConSet' that compares 'Equal' to</span><span>
</span><span id="line-380"></span><span class="hs-comment">-- the given 'PmAltCon' according to 'eqPmAltCon'.</span><span>
</span><span id="line-381"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#elemPmAltConSet"><span class="hs-identifier hs-type">elemPmAltConSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltCon"><span class="hs-identifier hs-type">PmAltCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConSet"><span class="hs-identifier hs-type">PmAltConSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-382"></span><span id="elemPmAltConSet"><span class="annot"><span class="annottext">elemPmAltConSet :: PmAltCon -&gt; PmAltConSet -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#elemPmAltConSet"><span class="hs-identifier hs-var hs-var">elemPmAltConSet</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConLike"><span class="hs-identifier hs-type">PmAltConLike</span></a></span><span> </span><span id="local-6989586621681365663"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681365663"><span class="hs-identifier hs-var">cl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PACS"><span class="hs-identifier hs-type">PACS</span></a></span><span> </span><span id="local-6989586621681365662"><span class="annot"><span class="annottext">UniqDSet ConLike
</span><a href="#local-6989586621681365662"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span class="annot"><span class="annottext">[PmLit]
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Uniquable a =&gt; a -&gt; UniqDSet a -&gt; Bool
</span><a href="GHC.Types.Unique.DSet.html#elementOfUniqDSet"><span class="hs-identifier hs-var">elementOfUniqDSet</span></a></span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681365663"><span class="hs-identifier hs-var">cl</span></a></span><span> </span><span class="annot"><span class="annottext">UniqDSet ConLike
</span><a href="#local-6989586621681365662"><span class="hs-identifier hs-var">cls</span></a></span><span>
</span><span id="line-383"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#elemPmAltConSet"><span class="hs-identifier hs-var">elemPmAltConSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltLit"><span class="hs-identifier hs-type">PmAltLit</span></a></span><span> </span><span id="local-6989586621681365660"><span class="annot"><span class="annottext">PmLit
</span><a href="#local-6989586621681365660"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PACS"><span class="hs-identifier hs-type">PACS</span></a></span><span> </span><span class="annot"><span class="annottext">UniqDSet ConLike
</span><span class="hs-identifier">_</span></span><span>   </span><span id="local-6989586621681365659"><span class="annot"><span class="annottext">[PmLit]
</span><a href="#local-6989586621681365659"><span class="hs-identifier hs-var">lits</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#elem"><span class="hs-identifier hs-var">elem</span></a></span><span> </span><span class="annot"><span class="annottext">PmLit
</span><a href="#local-6989586621681365660"><span class="hs-identifier hs-var">lit</span></a></span><span> </span><span class="annot"><span class="annottext">[PmLit]
</span><a href="#local-6989586621681365659"><span class="hs-identifier hs-var">lits</span></a></span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#extendPmAltConSet"><span class="hs-identifier hs-type">extendPmAltConSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConSet"><span class="hs-identifier hs-type">PmAltConSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltCon"><span class="hs-identifier hs-type">PmAltCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConSet"><span class="hs-identifier hs-type">PmAltConSet</span></a></span><span>
</span><span id="line-386"></span><span id="extendPmAltConSet"><span class="annot"><span class="annottext">extendPmAltConSet :: PmAltConSet -&gt; PmAltCon -&gt; PmAltConSet
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#extendPmAltConSet"><span class="hs-identifier hs-var hs-var">extendPmAltConSet</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PACS"><span class="hs-identifier hs-type">PACS</span></a></span><span> </span><span id="local-6989586621681365657"><span class="annot"><span class="annottext">UniqDSet ConLike
</span><a href="#local-6989586621681365657"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span id="local-6989586621681365656"><span class="annot"><span class="annottext">[PmLit]
</span><a href="#local-6989586621681365656"><span class="hs-identifier hs-var">lits</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConLike"><span class="hs-identifier hs-type">PmAltConLike</span></a></span><span> </span><span id="local-6989586621681365655"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681365655"><span class="hs-identifier hs-var">cl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UniqDSet ConLike -&gt; [PmLit] -&gt; PmAltConSet
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PACS"><span class="hs-identifier hs-var">PACS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Uniquable a =&gt; UniqDSet a -&gt; a -&gt; UniqDSet a
</span><a href="GHC.Types.Unique.DSet.html#addOneToUniqDSet"><span class="hs-identifier hs-var">addOneToUniqDSet</span></a></span><span> </span><span class="annot"><span class="annottext">UniqDSet ConLike
</span><a href="#local-6989586621681365657"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681365655"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PmLit]
</span><a href="#local-6989586621681365656"><span class="hs-identifier hs-var">lits</span></a></span><span>
</span><span id="line-388"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#extendPmAltConSet"><span class="hs-identifier hs-var">extendPmAltConSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PACS"><span class="hs-identifier hs-type">PACS</span></a></span><span> </span><span id="local-6989586621681365653"><span class="annot"><span class="annottext">UniqDSet ConLike
</span><a href="#local-6989586621681365653"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span id="local-6989586621681365652"><span class="annot"><span class="annottext">[PmLit]
</span><a href="#local-6989586621681365652"><span class="hs-identifier hs-var">lits</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltLit"><span class="hs-identifier hs-type">PmAltLit</span></a></span><span> </span><span id="local-6989586621681365651"><span class="annot"><span class="annottext">PmLit
</span><a href="#local-6989586621681365651"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-389"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UniqDSet ConLike -&gt; [PmLit] -&gt; PmAltConSet
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PACS"><span class="hs-identifier hs-var">PACS</span></a></span><span> </span><span class="annot"><span class="annottext">UniqDSet ConLike
</span><a href="#local-6989586621681365653"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a.
(HasDebugCallStack, Outputable a, Eq a) =&gt;
[a] -&gt; [a] -&gt; [a]
</span><a href="GHC.Data.List.SetOps.html#unionLists"><span class="hs-identifier hs-var">unionLists</span></a></span><span> </span><span class="annot"><span class="annottext">[PmLit]
</span><a href="#local-6989586621681365652"><span class="hs-identifier hs-var">lits</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PmLit
</span><a href="#local-6989586621681365651"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmAltConSetElems"><span class="hs-identifier hs-type">pmAltConSetElems</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConSet"><span class="hs-identifier hs-type">PmAltConSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltCon"><span class="hs-identifier hs-type">PmAltCon</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-392"></span><span id="pmAltConSetElems"><span class="annot"><span class="annottext">pmAltConSetElems :: PmAltConSet -&gt; [PmAltCon]
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmAltConSetElems"><span class="hs-identifier hs-var hs-var">pmAltConSetElems</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PACS"><span class="hs-identifier hs-type">PACS</span></a></span><span> </span><span id="local-6989586621681365650"><span class="annot"><span class="annottext">UniqDSet ConLike
</span><a href="#local-6989586621681365650"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span id="local-6989586621681365649"><span class="annot"><span class="annottext">[PmLit]
</span><a href="#local-6989586621681365649"><span class="hs-identifier hs-var">lits</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-393"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">ConLike -&gt; PmAltCon
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConLike"><span class="hs-identifier hs-var">PmAltConLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. UniqDSet a -&gt; [a]
</span><a href="GHC.Types.Unique.DSet.html#uniqDSetToList"><span class="hs-identifier hs-var">uniqDSetToList</span></a></span><span> </span><span class="annot"><span class="annottext">UniqDSet ConLike
</span><a href="#local-6989586621681365650"><span class="hs-identifier hs-var">cls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">PmLit -&gt; PmAltCon
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltLit"><span class="hs-identifier hs-var">PmAltLit</span></a></span><span> </span><span class="annot"><span class="annottext">[PmLit]
</span><a href="#local-6989586621681365649"><span class="hs-identifier hs-var">lits</span></a></span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConSet"><span class="hs-identifier hs-type">PmAltConSet</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-396"></span><span>  </span><span id="local-6989586621681365644"><span class="annot"><span class="annottext">ppr :: PmAltConSet -&gt; SDoc
</span><a href="#local-6989586621681365644"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PmAltConSet -&gt; [PmAltCon]
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmAltConSetElems"><span class="hs-identifier hs-var">pmAltConSetElems</span></a></span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span class="hs-comment">-- | We can't in general decide whether two 'PmAltCon's match the same set of</span><span>
</span><span id="line-399"></span><span class="hs-comment">-- values. In addition to the reasons in 'eqPmLit' and 'eqConLike', a</span><span>
</span><span id="line-400"></span><span class="hs-comment">-- 'PmAltConLike' might or might not represent the same value as a 'PmAltLit'.</span><span>
</span><span id="line-401"></span><span class="hs-comment">-- See Note [Undecidable Equality for PmAltCons].</span><span>
</span><span id="line-402"></span><span class="hs-comment">--</span><span>
</span><span id="line-403"></span><span class="hs-comment">-- * @Just True@ ==&gt; Surely equal</span><span>
</span><span id="line-404"></span><span class="hs-comment">-- * @Just False@ ==&gt; Surely different (non-overlapping, even!)</span><span>
</span><span id="line-405"></span><span class="hs-comment">-- * @Nothing@ ==&gt; Equality relation undecidable</span><span>
</span><span id="line-406"></span><span class="hs-comment">--</span><span>
</span><span id="line-407"></span><span class="hs-comment">-- Examples (omitting some constructor wrapping):</span><span>
</span><span id="line-408"></span><span class="hs-comment">--</span><span>
</span><span id="line-409"></span><span class="hs-comment">-- * @eqPmAltCon (LitInt 42) (LitInt 1) == Just False@: Lit equality is</span><span>
</span><span id="line-410"></span><span class="hs-comment">--   decidable</span><span>
</span><span id="line-411"></span><span class="hs-comment">-- * @eqPmAltCon (DataCon A) (DataCon B) == Just False@: DataCon equality is</span><span>
</span><span id="line-412"></span><span class="hs-comment">--   decidable</span><span>
</span><span id="line-413"></span><span class="hs-comment">-- * @eqPmAltCon (LitOverInt 42) (LitOverInt 1) == Nothing@: OverLit equality</span><span>
</span><span id="line-414"></span><span class="hs-comment">--   is undecidable</span><span>
</span><span id="line-415"></span><span class="hs-comment">-- * @eqPmAltCon (PatSyn PA) (PatSyn PB) == Nothing@: PatSyn equality is</span><span>
</span><span id="line-416"></span><span class="hs-comment">--   undecidable</span><span>
</span><span id="line-417"></span><span class="hs-comment">-- * @eqPmAltCon (DataCon I#) (LitInt 1) == Nothing@: DataCon to Lit</span><span>
</span><span id="line-418"></span><span class="hs-comment">--   comparisons are undecidable without reasoning about the wrapped @Int#@</span><span>
</span><span id="line-419"></span><span class="hs-comment">-- * @eqPmAltCon (LitOverInt 1) (LitOverInt 1) == Just True@: We assume</span><span>
</span><span id="line-420"></span><span class="hs-comment">--   reflexivity for overloaded literals</span><span>
</span><span id="line-421"></span><span class="hs-comment">-- * @eqPmAltCon (PatSyn PA) (PatSyn PA) == Just True@: We assume reflexivity</span><span>
</span><span id="line-422"></span><span class="hs-comment">--   for Pattern Synonyms</span><span>
</span><span id="line-423"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#eqPmAltCon"><span class="hs-identifier hs-type">eqPmAltCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltCon"><span class="hs-identifier hs-type">PmAltCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltCon"><span class="hs-identifier hs-type">PmAltCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmEquality"><span class="hs-identifier hs-type">PmEquality</span></a></span><span>
</span><span id="line-424"></span><span id="eqPmAltCon"><span class="annot"><span class="annottext">eqPmAltCon :: PmAltCon -&gt; PmAltCon -&gt; PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#eqPmAltCon"><span class="hs-identifier hs-var hs-var">eqPmAltCon</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConLike"><span class="hs-identifier hs-type">PmAltConLike</span></a></span><span> </span><span id="local-6989586621681365643"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681365643"><span class="hs-identifier hs-var">cl1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConLike"><span class="hs-identifier hs-type">PmAltConLike</span></a></span><span> </span><span id="local-6989586621681365642"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681365642"><span class="hs-identifier hs-var">cl2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConLike -&gt; ConLike -&gt; PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#eqConLike"><span class="hs-identifier hs-var">eqConLike</span></a></span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681365643"><span class="hs-identifier hs-var">cl1</span></a></span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681365642"><span class="hs-identifier hs-var">cl2</span></a></span><span>
</span><span id="line-425"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#eqPmAltCon"><span class="hs-identifier hs-var">eqPmAltCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltLit"><span class="hs-identifier hs-type">PmAltLit</span></a></span><span>     </span><span id="local-6989586621681365641"><span class="annot"><span class="annottext">PmLit
</span><a href="#local-6989586621681365641"><span class="hs-identifier hs-var">l1</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltLit"><span class="hs-identifier hs-type">PmAltLit</span></a></span><span>     </span><span id="local-6989586621681365640"><span class="annot"><span class="annottext">PmLit
</span><a href="#local-6989586621681365640"><span class="hs-identifier hs-var">l2</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmLit -&gt; PmLit -&gt; PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#eqPmLit"><span class="hs-identifier hs-var">eqPmLit</span></a></span><span> </span><span class="annot"><span class="annottext">PmLit
</span><a href="#local-6989586621681365641"><span class="hs-identifier hs-var">l1</span></a></span><span> </span><span class="annot"><span class="annottext">PmLit
</span><a href="#local-6989586621681365640"><span class="hs-identifier hs-var">l2</span></a></span><span>
</span><span id="line-426"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#eqPmAltCon"><span class="hs-identifier hs-var">eqPmAltCon</span></a></span><span> </span><span class="annot"><span class="annottext">PmAltCon
</span><span class="hs-identifier">_</span></span><span>                  </span><span class="annot"><span class="annottext">PmAltCon
</span><span class="hs-identifier">_</span></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PossiblyOverlap"><span class="hs-identifier hs-var">PossiblyOverlap</span></a></span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span class="hs-comment">-- | Syntactic equality.</span><span>
</span><span id="line-429"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681365637"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltCon"><span class="hs-identifier hs-type">PmAltCon</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-430"></span><span>  </span><span id="local-6989586621681365635"><span class="annot"><span class="annottext">PmAltCon
</span><a href="#local-6989586621681365635"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681365634"><span class="annot"><span class="annottext">== :: PmAltCon -&gt; PmAltCon -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span id="local-6989586621681365633"><span class="annot"><span class="annottext">PmAltCon
</span><a href="#local-6989586621681365633"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmAltCon -&gt; PmAltCon -&gt; PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#eqPmAltCon"><span class="hs-identifier hs-var">eqPmAltCon</span></a></span><span> </span><span class="annot"><span class="annottext">PmAltCon
</span><a href="#local-6989586621681365635"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">PmAltCon
</span><a href="#local-6989586621681365633"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PmEquality
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#Equal"><span class="hs-identifier hs-var">Equal</span></a></span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span class="hs-comment">-- | Type of a 'PmAltCon'</span><span>
</span><span id="line-433"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmAltConType"><span class="hs-identifier hs-type">pmAltConType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltCon"><span class="hs-identifier hs-type">PmAltCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-434"></span><span id="pmAltConType"><span class="annot"><span class="annottext">pmAltConType :: PmAltCon -&gt; [Kind] -&gt; Kind
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmAltConType"><span class="hs-identifier hs-var hs-var">pmAltConType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltLit"><span class="hs-identifier hs-type">PmAltLit</span></a></span><span> </span><span id="local-6989586621681365632"><span class="annot"><span class="annottext">PmLit
</span><a href="#local-6989586621681365632"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>     </span><span id="local-6989586621681365631"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681365631"><span class="hs-identifier hs-var">_arg_tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">null</span><span> </span><span class="hs-identifier">_arg_tys</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-identifier">pmLitType</span><span> </span><span class="hs-identifier">lit</span><span>
</span><span id="line-435"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmAltConType"><span class="hs-identifier hs-var">pmAltConType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConLike"><span class="hs-identifier hs-type">PmAltConLike</span></a></span><span> </span><span id="local-6989586621681365628"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681365628"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681365627"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681365627"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConLike -&gt; [Kind] -&gt; Kind
</span><a href="GHC.Core.ConLike.html#conLikeResTy"><span class="hs-identifier hs-var">conLikeResTy</span></a></span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681365628"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681365627"><span class="hs-identifier hs-var">arg_tys</span></a></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="hs-comment">-- | Is a match on this constructor forcing the match variable?</span><span>
</span><span id="line-438"></span><span class="hs-comment">-- True of data constructors, literals and pattern synonyms (#17357), but not of</span><span>
</span><span id="line-439"></span><span class="hs-comment">-- newtypes.</span><span>
</span><span id="line-440"></span><span class="hs-comment">-- See Note [Coverage checking Newtype matches] in &quot;GHC.HsToCore.Pmc.Solver&quot;.</span><span>
</span><span id="line-441"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#isPmAltConMatchStrict"><span class="hs-identifier hs-type">isPmAltConMatchStrict</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltCon"><span class="hs-identifier hs-type">PmAltCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-442"></span><span id="isPmAltConMatchStrict"><span class="annot"><span class="annottext">isPmAltConMatchStrict :: PmAltCon -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#isPmAltConMatchStrict"><span class="hs-identifier hs-var hs-var">isPmAltConMatchStrict</span></a></span></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltLit"><span class="hs-identifier hs-type">PmAltLit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>                      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-443"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#isPmAltConMatchStrict"><span class="hs-identifier hs-var">isPmAltConMatchStrict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConLike"><span class="hs-identifier hs-type">PmAltConLike</span></a></span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-type">PatSynCon</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-comment">-- #17357</span><span>
</span><span id="line-444"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#isPmAltConMatchStrict"><span class="hs-identifier hs-var">isPmAltConMatchStrict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConLike"><span class="hs-identifier hs-type">PmAltConLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-type">RealDataCon</span></a></span><span> </span><span id="local-6989586621681365625"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681365625"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isNewDataCon"><span class="hs-identifier hs-var">isNewDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681365625"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmAltConImplBangs"><span class="hs-identifier hs-type">pmAltConImplBangs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltCon"><span class="hs-identifier hs-type">PmAltCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.DataCon.html#HsImplBang"><span class="hs-identifier hs-type">HsImplBang</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-447"></span><span id="pmAltConImplBangs"><span class="annot"><span class="annottext">pmAltConImplBangs :: PmAltCon -&gt; [HsImplBang]
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmAltConImplBangs"><span class="hs-identifier hs-var hs-var">pmAltConImplBangs</span></a></span></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltLit"><span class="hs-identifier hs-type">PmAltLit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-448"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmAltConImplBangs"><span class="hs-identifier hs-var">pmAltConImplBangs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConLike"><span class="hs-identifier hs-type">PmAltConLike</span></a></span><span> </span><span id="local-6989586621681365623"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681365623"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConLike -&gt; [HsImplBang]
</span><a href="GHC.Core.ConLike.html#conLikeImplBangs"><span class="hs-identifier hs-var">conLikeImplBangs</span></a></span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681365623"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span class="hs-comment">{- Note [Undecidable Equality for PmAltCons]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Equality on overloaded literals is undecidable in the general case. Consider
the following example:

  instance Num Bool where
    ...
    fromInteger 0 = False -- C-like representation of booleans
    fromInteger _ = True

    f :: Bool -&gt; ()
    f 1 = ()        -- Clause A
    f 2 = ()        -- Clause B

Clause B is redundant but to detect this, we must decide the constraint:
@fromInteger 2 ~ fromInteger 1@ which means that we
have to look through function @fromInteger@, whose implementation could
be anything. This poses difficulties for:

1. The expressive power of the check.
   We cannot expect a reasonable implementation of pattern matching to detect
   that @fromInteger 2 ~ fromInteger 1@ is True, unless we unfold function
   fromInteger. This puts termination at risk and is undecidable in the
   general case.

2. Error messages/Warnings.
   What should our message for @f@ above be? A reasonable approach would be
   to issue:

     Pattern matches are (potentially) redundant:
       f 2 = ...    under the assumption that 1 == 2

   but seems to complex and confusing for the user.

We choose to equate only obviously equal overloaded literals, in all other cases
we signal undecidability by returning Nothing from 'eqPmAltCons'. We do
better for non-overloaded literals, because we know their fromInteger/fromString
implementation is actually injective, allowing us to simplify the constraint
@fromInteger 1 ~ fromInteger 2@ to @1 ~ 2@, which is trivially unsatisfiable.

The impact of this treatment of overloaded literals is the following:

  * Redundancy checking is rather conservative, since it cannot see that clause
    B above is redundant.

  * We have instant equality check for overloaded literals (we do not rely on
    the term oracle which is rather expensive, both in terms of performance and
    memory). This significantly improves the performance of functions `covered`
    `uncovered` and `divergent` in &quot;GHC.HsToCore.Pmc&quot; and effectively addresses
    #11161.

  * The warnings issued are simpler.

Similar reasoning applies to pattern synonyms: In contrast to data constructors,
which are generative, constraints like F a ~ G b for two different pattern
synonyms F and G aren't immediately unsatisfiable. We assume F a ~ F a, though.
-}</span><span>
</span><span id="line-507"></span><span>
</span><span id="line-508"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#literalToPmLit"><span class="hs-identifier hs-type">literalToPmLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Literal.html#Literal"><span class="hs-identifier hs-type">Literal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span>
</span><span id="line-509"></span><span id="literalToPmLit"><span class="annot"><span class="annottext">literalToPmLit :: Kind -&gt; Literal -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#literalToPmLit"><span class="hs-identifier hs-var hs-var">literalToPmLit</span></a></span></span><span> </span><span id="local-6989586621681365621"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365621"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681365620"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365620"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; PmLitValue -&gt; PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-var">PmLit</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365621"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Maybe PmLitValue
</span><a href="#local-6989586621681365618"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365620"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-510"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-511"></span><span>    </span><span id="local-6989586621681365618"><span class="annot"><span class="annottext">go :: Literal -&gt; Maybe PmLitValue
</span><a href="#local-6989586621681365618"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Literal.html#LitChar"><span class="hs-identifier hs-type">LitChar</span></a></span><span> </span><span id="local-6989586621681365616"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681365616"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; PmLitValue
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitChar"><span class="hs-identifier hs-var">PmLitChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681365616"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-512"></span><span>    </span><span class="annot"><a href="#local-6989586621681365618"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Literal.html#LitFloat"><span class="hs-identifier hs-type">LitFloat</span></a></span><span> </span><span id="local-6989586621681365614"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681365614"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; PmLitValue
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitRat"><span class="hs-identifier hs-var">PmLitRat</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681365614"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-513"></span><span>    </span><span class="annot"><a href="#local-6989586621681365618"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Literal.html#LitDouble"><span class="hs-identifier hs-type">LitDouble</span></a></span><span> </span><span id="local-6989586621681365612"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681365612"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; PmLitValue
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitRat"><span class="hs-identifier hs-var">PmLitRat</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681365612"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-514"></span><span>    </span><span class="annot"><a href="#local-6989586621681365618"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Literal.html#LitString"><span class="hs-identifier hs-type">LitString</span></a></span><span> </span><span id="local-6989586621681365610"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621681365610"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; PmLitValue
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitString"><span class="hs-identifier hs-var">PmLitString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; FastString
</span><a href="GHC.Data.FastString.html#mkFastStringByteString"><span class="hs-identifier hs-var">mkFastStringByteString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621681365610"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-515"></span><span>    </span><span class="annot"><a href="#local-6989586621681365618"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Literal.html#LitNumber"><span class="hs-identifier hs-type">LitNumber</span></a></span><span> </span><span class="annot"><span class="annottext">LitNumType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365607"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365607"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; PmLitValue
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitInt"><span class="hs-identifier hs-var">PmLitInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365607"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-516"></span><span>    </span><span class="annot"><a href="#local-6989586621681365618"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#negatePmLit"><span class="hs-identifier hs-type">negatePmLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span>
</span><span id="line-519"></span><span id="negatePmLit"><span class="annot"><span class="annottext">negatePmLit :: PmLit -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#negatePmLit"><span class="hs-identifier hs-var hs-var">negatePmLit</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span> </span><span id="local-6989586621681365606"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365606"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681365605"><span class="annot"><span class="annottext">PmLitValue
</span><a href="#local-6989586621681365605"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; PmLitValue -&gt; PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-var">PmLit</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365606"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PmLitValue -&gt; Maybe PmLitValue
</span><a href="#local-6989586621681365604"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">PmLitValue
</span><a href="#local-6989586621681365605"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-520"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-521"></span><span>    </span><span id="local-6989586621681365604"><span class="annot"><span class="annottext">go :: PmLitValue -&gt; Maybe PmLitValue
</span><a href="#local-6989586621681365604"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitInt"><span class="hs-identifier hs-type">PmLitInt</span></a></span><span> </span><span id="local-6989586621681365595"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365595"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; PmLitValue
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitInt"><span class="hs-identifier hs-var">PmLitInt</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365595"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-522"></span><span>    </span><span class="annot"><a href="#local-6989586621681365604"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitRat"><span class="hs-identifier hs-type">PmLitRat</span></a></span><span> </span><span id="local-6989586621681365594"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681365594"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; PmLitValue
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitRat"><span class="hs-identifier hs-var">PmLitRat</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681365594"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-523"></span><span>    </span><span class="annot"><a href="#local-6989586621681365604"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverInt"><span class="hs-identifier hs-type">PmLitOverInt</span></a></span><span> </span><span id="local-6989586621681365593"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365593"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681365592"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365592"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Integer -&gt; PmLitValue
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverInt"><span class="hs-identifier hs-var">PmLitOverInt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365593"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365592"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-524"></span><span>    </span><span class="annot"><a href="#local-6989586621681365604"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverRat"><span class="hs-identifier hs-type">PmLitOverRat</span></a></span><span> </span><span id="local-6989586621681365590"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365590"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681365589"><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681365589"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; FractionalLit -&gt; PmLitValue
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverRat"><span class="hs-identifier hs-var">PmLitOverRat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365590"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681365589"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-525"></span><span>    </span><span class="annot"><a href="#local-6989586621681365604"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">PmLitValue
</span><span class="hs-identifier">_</span></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-526"></span><span>
</span><span id="line-527"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#overloadPmLit"><span class="hs-identifier hs-type">overloadPmLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span>
</span><span id="line-528"></span><span id="overloadPmLit"><span class="annot"><span class="annottext">overloadPmLit :: Kind -&gt; PmLit -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#overloadPmLit"><span class="hs-identifier hs-var hs-var">overloadPmLit</span></a></span></span><span> </span><span id="local-6989586621681365588"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365588"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365587"><span class="annot"><span class="annottext">PmLitValue
</span><a href="#local-6989586621681365587"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; PmLitValue -&gt; PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-var">PmLit</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365588"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PmLitValue -&gt; Maybe PmLitValue
</span><a href="#local-6989586621681365586"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">PmLitValue
</span><a href="#local-6989586621681365587"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-529"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-530"></span><span>    </span><span id="local-6989586621681365586"><span class="annot"><span class="annottext">go :: PmLitValue -&gt; Maybe PmLitValue
</span><a href="#local-6989586621681365586"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitInt"><span class="hs-identifier hs-type">PmLitInt</span></a></span><span> </span><span id="local-6989586621681365585"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365585"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Integer -&gt; PmLitValue
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverInt"><span class="hs-identifier hs-var">PmLitOverInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365585"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-531"></span><span>    </span><span class="annot"><a href="#local-6989586621681365586"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitRat"><span class="hs-identifier hs-type">PmLitRat</span></a></span><span> </span><span id="local-6989586621681365584"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681365584"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24%21"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; FractionalLit -&gt; PmLitValue
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverRat"><span class="hs-identifier hs-var">PmLitOverRat</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24%21"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">Rational -&gt; FractionalLit
</span><a href="GHC.Types.SourceText.html#fractionalLitFromRational"><span class="hs-identifier hs-var">fractionalLitFromRational</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681365584"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-532"></span><span>    </span><span class="annot"><a href="#local-6989586621681365586"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitString"><span class="hs-identifier hs-type">PmLitString</span></a></span><span> </span><span id="local-6989586621681365582"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365582"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-533"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365588"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#stringTy"><span class="hs-identifier hs-var">stringTy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">PmLitValue
</span><a href="#local-6989586621681365587"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-534"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; PmLitValue
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverString"><span class="hs-identifier hs-var">PmLitOverString</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365582"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-535"></span><span>    </span><span class="annot"><a href="#local-6989586621681365586"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681365580"><span class="annot"><span class="annottext">ovRat :: PmLitValue
</span><a href="#local-6989586621681365580"><span class="hs-identifier hs-var">ovRat</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverRat"><span class="hs-identifier hs-type">PmLitOverRat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">PmLitValue
</span><a href="#local-6989586621681365580"><span class="hs-identifier hs-var">ovRat</span></a></span><span>
</span><span id="line-536"></span><span>    </span><span class="annot"><a href="#local-6989586621681365586"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">PmLitValue
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-537"></span><span>
</span><span id="line-538"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmLitAsStringLit"><span class="hs-identifier hs-type">pmLitAsStringLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span>
</span><span id="line-539"></span><span id="pmLitAsStringLit"><span class="annot"><span class="annottext">pmLitAsStringLit :: PmLit -&gt; Maybe FastString
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmLitAsStringLit"><span class="hs-identifier hs-var hs-var">pmLitAsStringLit</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitString"><span class="hs-identifier hs-type">PmLitString</span></a></span><span> </span><span id="local-6989586621681365579"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365579"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365579"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-540"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#pmLitAsStringLit"><span class="hs-identifier hs-var">pmLitAsStringLit</span></a></span><span> </span><span class="annot"><span class="annottext">PmLit
</span><span class="hs-identifier">_</span></span><span>                         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#coreExprAsPmLit"><span class="hs-identifier hs-type">coreExprAsPmLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span>
</span><span id="line-543"></span><span class="hs-comment">-- coreExprAsPmLit e | pprTrace &quot;coreExprAsPmLit&quot; (ppr e) False = undefined</span><span>
</span><span id="line-544"></span><span id="coreExprAsPmLit"><span class="annot"><span class="annottext">coreExprAsPmLit :: CoreExpr -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#coreExprAsPmLit"><span class="hs-identifier hs-var hs-var">coreExprAsPmLit</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-type">Tick</span></a></span><span> </span><span id="local-6989586621681365577"><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621681365577"><span class="hs-identifier hs-var">_t</span></a></span></span><span> </span><span id="local-6989586621681365576"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365576"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#coreExprAsPmLit"><span class="hs-identifier hs-var">coreExprAsPmLit</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365576"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-545"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#coreExprAsPmLit"><span class="hs-identifier hs-var">coreExprAsPmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span> </span><span id="local-6989586621681365574"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365574"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Literal -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#literalToPmLit"><span class="hs-identifier hs-var">literalToPmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Literal -&gt; Kind
</span><a href="GHC.Types.Literal.html#literalType"><span class="hs-identifier hs-var">literalType</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365574"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365574"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-546"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#coreExprAsPmLit"><span class="hs-identifier hs-var">coreExprAsPmLit</span></a></span><span> </span><span id="local-6989586621681365572"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365572"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall b. Expr b -&gt; (Expr b, [Expr b])
</span><a href="GHC.Core.html#collectArgs"><span class="hs-identifier hs-var">collectArgs</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365572"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-547"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681365569"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365569"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span> </span><span id="local-6989586621681365568"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365568"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-548"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681365567"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681365567"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Maybe DataCon
</span><a href="GHC.Types.Id.html#isDataConWorkId_maybe"><span class="hs-identifier hs-var">isDataConWorkId_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365569"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-549"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681365567"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#intDataCon"><span class="hs-identifier hs-var">intDataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#wordDataCon"><span class="hs-identifier hs-var">wordDataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#charDataCon"><span class="hs-identifier hs-var">charDataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#floatDataCon"><span class="hs-identifier hs-var">floatDataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#doubleDataCon"><span class="hs-identifier hs-var">doubleDataCon</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-550"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Literal -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#literalToPmLit"><span class="hs-identifier hs-var">literalToPmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; Kind
</span><a href="GHC.Core.Utils.html#exprType"><span class="hs-identifier hs-var">exprType</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365572"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365568"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-551"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681365560"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365560"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681365559"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365559"><span class="hs-identifier hs-var">_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span> </span><span id="local-6989586621681365558"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365558"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span> </span><span id="local-6989586621681365557"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365557"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-552"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681365556"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681365556"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Maybe DataCon
</span><a href="GHC.Types.Id.html#isDataConWorkId_maybe"><span class="hs-identifier hs-var">isDataConWorkId_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365560"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-553"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Name
</span><a href="GHC.Core.DataCon.html#dataConName"><span class="hs-identifier hs-var">dataConName</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681365556"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#ratioDataConName"><span class="hs-identifier hs-var">ratioDataConName</span></a></span><span>
</span><span id="line-554"></span><span>    </span><span class="hs-comment">-- HACK: just assume we have a literal double. This case only occurs for</span><span>
</span><span id="line-555"></span><span>    </span><span class="hs-comment">--       overloaded lits anyway, so we immediately override type information</span><span>
</span><span id="line-556"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Literal -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#literalToPmLit"><span class="hs-identifier hs-var">literalToPmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; Kind
</span><a href="GHC.Core.Utils.html#exprType"><span class="hs-identifier hs-var">exprType</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365572"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitDouble"><span class="hs-identifier hs-var">mkLitDouble</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Literal -&gt; Integer
</span><a href="GHC.Types.Literal.html#litValue"><span class="hs-identifier hs-var">litValue</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365558"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Integral a =&gt; a -&gt; a -&gt; Ratio a
</span><a href="../../base-4.16.3.0/src/GHC-Real.html#%25"><span class="hs-operator hs-var">%</span></a></span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Integer
</span><a href="GHC.Types.Literal.html#litValue"><span class="hs-identifier hs-var">litValue</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365557"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-557"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681365550"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365550"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365549"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681365549"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-558"></span><span>    </span><span class="hs-comment">-- See Note [Detecting overloaded literals with -XRebindableSyntax]</span><span>
</span><span id="line-559"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Name -&gt; Bool
</span><a href="#local-6989586621681365548"><span class="hs-identifier hs-var">is_rebound_name</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365550"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#fromIntegerName"><span class="hs-identifier hs-var">fromIntegerName</span></a></span><span>
</span><span id="line-560"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span> </span><span id="local-6989586621681365546"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365546"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#dropWhile"><span class="hs-identifier hs-var">dropWhile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall {b}. Expr b -&gt; Bool
</span><a href="#local-6989586621681365544"><span class="hs-identifier hs-var">is_lit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681365549"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-561"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Literal -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#literalToPmLit"><span class="hs-identifier hs-var">literalToPmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Literal -&gt; Kind
</span><a href="GHC.Types.Literal.html#literalType"><span class="hs-identifier hs-var">literalType</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365546"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365546"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; PmLit -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#overloadPmLit"><span class="hs-identifier hs-var">overloadPmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; Kind
</span><a href="GHC.Core.Utils.html#exprType"><span class="hs-identifier hs-var">exprType</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365572"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-562"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681365543"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365543"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365542"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681365542"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-563"></span><span>    </span><span class="hs-comment">-- See Note [Detecting overloaded literals with -XRebindableSyntax]</span><span>
</span><span id="line-564"></span><span>    </span><span class="hs-comment">-- fromRational &lt;expr&gt;</span><span>
</span><span id="line-565"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Name -&gt; Bool
</span><a href="#local-6989586621681365548"><span class="hs-identifier hs-var">is_rebound_name</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365543"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#fromRationalName"><span class="hs-identifier hs-var">fromRationalName</span></a></span><span>
</span><span id="line-566"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681365540"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365540"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#dropWhile"><span class="hs-identifier hs-var">dropWhile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Bool
</span><a href="#local-6989586621681365539"><span class="hs-identifier hs-var">is_ratio</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681365542"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-567"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#coreExprAsPmLit"><span class="hs-identifier hs-var">coreExprAsPmLit</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365540"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; PmLit -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#overloadPmLit"><span class="hs-identifier hs-var">overloadPmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; Kind
</span><a href="GHC.Core.Utils.html#exprType"><span class="hs-identifier hs-var">exprType</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365572"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-568"></span><span>
</span><span id="line-569"></span><span>  </span><span class="hs-comment">--Rationals with large exponents</span><span>
</span><span id="line-570"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681365538"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365538"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365537"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681365537"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-571"></span><span>    </span><span class="hs-comment">-- See Note [Detecting overloaded literals with -XRebindableSyntax]</span><span>
</span><span id="line-572"></span><span>    </span><span class="hs-comment">-- See Note [Dealing with rationals with large exponents]</span><span>
</span><span id="line-573"></span><span>    </span><span class="hs-comment">-- mkRationalBase* &lt;rational&gt; &lt;exponent&gt;</span><span>
</span><span id="line-574"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681365536"><span class="annot"><span class="annottext">FractionalExponentBase
</span><a href="#local-6989586621681365536"><span class="hs-identifier hs-var">exp_base</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Maybe FractionalExponentBase
</span><a href="#local-6989586621681365535"><span class="hs-identifier hs-var">is_larg_exp_ratio</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365538"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-575"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681365534"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365534"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span> </span><span id="local-6989586621681365533"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365533"><span class="hs-identifier hs-var">exp</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#dropWhile"><span class="hs-identifier hs-var">dropWhile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Bool
</span><a href="#local-6989586621681365539"><span class="hs-identifier hs-var">is_ratio</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681365537"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-576"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681365532"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365532"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681365531"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365531"><span class="hs-identifier hs-var">_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span> </span><span id="local-6989586621681365530"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365530"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span> </span><span id="local-6989586621681365529"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365529"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall b. Expr b -&gt; (Expr b, [Expr b])
</span><a href="GHC.Core.html#collectArgs"><span class="hs-identifier hs-var">collectArgs</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365534"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-577"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681365528"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681365528"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Maybe DataCon
</span><a href="GHC.Types.Id.html#isDataConWorkId_maybe"><span class="hs-identifier hs-var">isDataConWorkId_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365532"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-578"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Name
</span><a href="GHC.Core.DataCon.html#dataConName"><span class="hs-identifier hs-var">dataConName</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681365528"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#ratioDataConName"><span class="hs-identifier hs-var">ratioDataConName</span></a></span><span>
</span><span id="line-579"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-580"></span><span>      </span><span id="local-6989586621681365527"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365527"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Maybe Integer
</span><a href="GHC.Types.Literal.html#isLitValue_maybe"><span class="hs-identifier hs-var">isLitValue_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365530"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-581"></span><span>      </span><span id="local-6989586621681365525"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365525"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Maybe Integer
</span><a href="GHC.Types.Literal.html#isLitValue_maybe"><span class="hs-identifier hs-var">isLitValue_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365529"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-582"></span><span>      </span><span id="local-6989586621681365524"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365524"><span class="hs-identifier hs-var">exp'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Maybe Integer
</span><a href="GHC.Types.Literal.html#isLitValue_maybe"><span class="hs-identifier hs-var">isLitValue_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365533"><span class="hs-identifier hs-var">exp</span></a></span><span>
</span><span id="line-583"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365523"><span class="annot"><span class="annottext">rational :: Rational
</span><a href="#local-6989586621681365523"><span class="hs-identifier hs-var hs-var">rational</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Num.html#abs"><span class="hs-identifier hs-var">abs</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365527"><span class="hs-identifier hs-var">n'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a -&gt; Ratio a
</span><a href="../../base-4.16.3.0/src/GHC-Real.html#%3A%25"><span class="hs-operator hs-var">:%</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365525"><span class="hs-identifier hs-var">d'</span></a></span><span>
</span><span id="line-584"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365521"><span class="annot"><span class="annottext">neg :: Int
</span><a href="#local-6989586621681365521"><span class="hs-identifier hs-var hs-var">neg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365527"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-585"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365519"><span class="annot"><span class="annottext">frac :: FractionalLit
</span><a href="#local-6989586621681365519"><span class="hs-identifier hs-var hs-var">frac</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SourceText
-&gt; Bool
-&gt; Rational
-&gt; Integer
-&gt; FractionalExponentBase
-&gt; FractionalLit
</span><a href="GHC.Types.SourceText.html#mkFractionalLit"><span class="hs-identifier hs-var">mkFractionalLit</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="GHC.Types.SourceText.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681365523"><span class="hs-identifier hs-var">rational</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365524"><span class="hs-identifier hs-var">exp'</span></a></span><span> </span><span class="annot"><span class="annottext">FractionalExponentBase
</span><a href="#local-6989586621681365536"><span class="hs-identifier hs-var">exp_base</span></a></span><span>
</span><span id="line-586"></span><span>      </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; PmLitValue -&gt; PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-var">PmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; Kind
</span><a href="GHC.Core.Utils.html#exprType"><span class="hs-identifier hs-var">exprType</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365572"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; FractionalLit -&gt; PmLitValue
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverRat"><span class="hs-identifier hs-var">PmLitOverRat</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365521"><span class="hs-identifier hs-var">neg</span></a></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681365519"><span class="hs-identifier hs-var">frac</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-587"></span><span>
</span><span id="line-588"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681365517"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365517"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365516"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681365516"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-589"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Name -&gt; Bool
</span><a href="#local-6989586621681365548"><span class="hs-identifier hs-var">is_rebound_name</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365517"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#fromStringName"><span class="hs-identifier hs-var">fromStringName</span></a></span><span>
</span><span id="line-590"></span><span>    </span><span class="hs-comment">-- See Note [Detecting overloaded literals with -XRebindableSyntax]</span><span>
</span><span id="line-591"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365514"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365514"><span class="hs-identifier hs-var">s</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[CoreExpr]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isStringTy"><span class="hs-identifier hs-var">isStringTy</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Kind
</span><a href="GHC.Core.Utils.html#exprType"><span class="hs-identifier hs-var">exprType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">forall {b}. Expr b -&gt; Bool
</span><a href="GHC.Core.html#isValArg"><span class="hs-identifier hs-var">isValArg</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681365516"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-592"></span><span>    </span><span class="hs-comment">-- NB: Calls coreExprAsPmLit and then overloadPmLit, so that we return PmLitOverStrings</span><span>
</span><span id="line-593"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#coreExprAsPmLit"><span class="hs-identifier hs-var">coreExprAsPmLit</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365514"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; PmLit -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#overloadPmLit"><span class="hs-identifier hs-var">overloadPmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; Kind
</span><a href="GHC.Core.Utils.html#exprType"><span class="hs-identifier hs-var">exprType</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365572"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-594"></span><span>  </span><span class="hs-comment">-- These last two cases handle proper String literals</span><span>
</span><span id="line-595"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681365512"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365512"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span id="local-6989586621681365510"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365510"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-596"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681365509"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681365509"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Maybe DataCon
</span><a href="GHC.Types.Id.html#isDataConWorkId_maybe"><span class="hs-identifier hs-var">isDataConWorkId_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365512"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-597"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681365509"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#nilDataCon"><span class="hs-identifier hs-var">nilDataCon</span></a></span><span>
</span><span id="line-598"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365510"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#charTy"><span class="hs-identifier hs-var">charTy</span></a></span><span>
</span><span id="line-599"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Literal -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#literalToPmLit"><span class="hs-identifier hs-var">literalToPmLit</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#stringTy"><span class="hs-identifier hs-var">stringTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitString"><span class="hs-identifier hs-var">mkLitString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-600"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681365505"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365505"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span> </span><span id="local-6989586621681365504"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365504"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-601"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Name
</span><a href="GHC.Types.Id.html#idName"><span class="hs-identifier hs-var">idName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365505"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#unpackCStringName"><span class="hs-identifier hs-var">unpackCStringName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#unpackCStringUtf8Name"><span class="hs-identifier hs-var">unpackCStringUtf8Name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-602"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Literal -&gt; Maybe PmLit
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#literalToPmLit"><span class="hs-identifier hs-var">literalToPmLit</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#stringTy"><span class="hs-identifier hs-var">stringTy</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681365504"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-603"></span><span>
</span><span id="line-604"></span><span>  </span><span class="annot"><span class="annottext">(CoreExpr, [CoreExpr])
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-605"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-606"></span><span>    </span><span id="local-6989586621681365544"><span class="annot"><span class="annottext">is_lit :: Expr b -&gt; Bool
</span><a href="#local-6989586621681365544"><span class="hs-identifier hs-var hs-var">is_lit</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-607"></span><span>    </span><span class="annot"><a href="#local-6989586621681365544"><span class="hs-identifier hs-var">is_lit</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-608"></span><span>    </span><span id="local-6989586621681365539"><span class="annot"><span class="annottext">is_ratio :: CoreExpr -&gt; Bool
</span><a href="#local-6989586621681365539"><span class="hs-identifier hs-var hs-var">is_ratio</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-609"></span><span>    </span><span class="annot"><a href="#local-6989586621681365539"><span class="hs-identifier hs-var">is_ratio</span></a></span><span> </span><span id="local-6989586621681365498"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365498"><span class="hs-identifier hs-var">r</span></a></span></span><span>
</span><span id="line-610"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365497"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681365497"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Kind -&gt; Maybe (TyCon, [Kind])
</span><a href="GHC.Core.Type.html#splitTyConApp_maybe"><span class="hs-identifier hs-var">splitTyConApp_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; Kind
</span><a href="GHC.Core.Utils.html#exprType"><span class="hs-identifier hs-var">exprType</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681365498"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-611"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Name
</span><a href="GHC.Core.TyCon.html#tyConName"><span class="hs-identifier hs-var">tyConName</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681365497"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#ratioTyConName"><span class="hs-identifier hs-var">ratioTyConName</span></a></span><span>
</span><span id="line-612"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-613"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-614"></span><span>    </span><span id="local-6989586621681365535"><span class="annot"><span class="annottext">is_larg_exp_ratio :: Id -&gt; Maybe FractionalExponentBase
</span><a href="#local-6989586621681365535"><span class="hs-identifier hs-var hs-var">is_larg_exp_ratio</span></a></span></span><span> </span><span id="local-6989586621681365493"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365493"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-615"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Name -&gt; Bool
</span><a href="#local-6989586621681365548"><span class="hs-identifier hs-var">is_rebound_name</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365493"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#mkRationalBase10Name"><span class="hs-identifier hs-var">mkRationalBase10Name</span></a></span><span>
</span><span id="line-616"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">FractionalExponentBase
</span><a href="GHC.Types.SourceText.html#Base10"><span class="hs-identifier hs-var">Base10</span></a></span><span>
</span><span id="line-617"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Name -&gt; Bool
</span><a href="#local-6989586621681365548"><span class="hs-identifier hs-var">is_rebound_name</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365493"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#mkRationalBase2Name"><span class="hs-identifier hs-var">mkRationalBase2Name</span></a></span><span>
</span><span id="line-618"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">FractionalExponentBase
</span><a href="GHC.Types.SourceText.html#Base2"><span class="hs-identifier hs-var">Base2</span></a></span><span>
</span><span id="line-619"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-620"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-621"></span><span>
</span><span id="line-622"></span><span>
</span><span id="line-623"></span><span>    </span><span class="hs-comment">-- See Note [Detecting overloaded literals with -XRebindableSyntax]</span><span>
</span><span id="line-624"></span><span>    </span><span class="annot"><a href="#local-6989586621681365548"><span class="hs-identifier hs-type">is_rebound_name</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-625"></span><span>    </span><span id="local-6989586621681365548"><span class="annot"><span class="annottext">is_rebound_name :: Id -&gt; Name -&gt; Bool
</span><a href="#local-6989586621681365548"><span class="hs-identifier hs-var hs-var">is_rebound_name</span></a></span></span><span> </span><span id="local-6989586621681365488"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365488"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681365487"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365487"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; FastString
</span><a href="GHC.Types.Name.html#getOccFS"><span class="hs-identifier hs-var">getOccFS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Name
</span><a href="GHC.Types.Id.html#idName"><span class="hs-identifier hs-var">idName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681365488"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; FastString
</span><a href="GHC.Types.Name.html#getOccFS"><span class="hs-identifier hs-var">getOccFS</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365487"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-626"></span><span>
</span><span id="line-627"></span><span class="hs-comment">{- Note [Detecting overloaded literals with -XRebindableSyntax]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Normally, we'd find e.g. overloaded string literals by comparing the
application head of an expression to `fromStringName`. But that doesn't work
with -XRebindableSyntax: The `Name` of a user-provided `fromString` function is
different to `fromStringName`, which lives in a certain module, etc.

There really is no other way than to compare `OccName`s and guess which
argument is the actual literal string (we assume it's the first argument of
type `String`).

The same applies to other overloaded literals, such as overloaded rationals
(`fromRational`)and overloaded integer literals (`fromInteger`).

Note [Dealing with rationals with large exponents]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Rationals with large exponents are *not* desugared to
a simple rational. As that would require us to compute
their value which can be expensive. Rather they desugar
to an expression. For example 1e1000 will desugar to an
expression of the form: `mkRationalWithExponentBase10 (1 :% 1) 1000`

Only overloaded literals desugar to this form however, so we
we can just return a overloaded rational literal.

The most complex case is if we have RebindableSyntax enabled.
By example if we have a pattern like this: `f 3.3 = True`

It will desugar to:
  fromRational
    [TYPE: Rational, mkRationalBase10 (:% @Integer 10 1) (-1)]

The fromRational is properly detected as an overloaded Rational by
coreExprAsPmLit and it's general code for detecting overloaded rationals.
See Note [Detecting overloaded literals with -XRebindableSyntax].

This case then recurses into coreExprAsPmLit passing only the expression
`mkRationalBase10 (:% @Integer 10 1) (-1)`. Which is caught by rationals
with large exponents case. This will return a `PmLitOverRat` literal.

Which is then passed to overloadPmLit which simply returns it as-is since
it's already overloaded.

-}</span><span>
</span><span id="line-671"></span><span>
</span><span id="line-672"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitValue"><span class="hs-identifier hs-type">PmLitValue</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-673"></span><span>  </span><span id="local-6989586621681365474"><span class="annot"><span class="annottext">ppr :: PmLitValue -&gt; SDoc
</span><a href="#local-6989586621681365474"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitInt"><span class="hs-identifier hs-type">PmLitInt</span></a></span><span> </span><span id="local-6989586621681365473"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365473"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365473"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-674"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitRat"><span class="hs-identifier hs-type">PmLitRat</span></a></span><span> </span><span id="local-6989586621681365472"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681365472"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#double"><span class="hs-identifier hs-var">double</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. RealFloat a =&gt; Rational -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Float.html#fromRat"><span class="hs-identifier hs-var">fromRat</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681365472"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- good enough</span><span>
</span><span id="line-675"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitChar"><span class="hs-identifier hs-type">PmLitChar</span></a></span><span> </span><span id="local-6989586621681365470"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681365470"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprHsChar"><span class="hs-identifier hs-var">pprHsChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681365470"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-676"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitString"><span class="hs-identifier hs-type">PmLitString</span></a></span><span> </span><span id="local-6989586621681365468"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365468"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprHsString"><span class="hs-identifier hs-var">pprHsString</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365468"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-677"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverInt"><span class="hs-identifier hs-type">PmLitOverInt</span></a></span><span> </span><span id="local-6989586621681365466"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365466"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681365465"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365465"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#minuses"><span class="hs-identifier hs-var">minuses</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365466"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681365465"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-678"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverRat"><span class="hs-identifier hs-type">PmLitOverRat</span></a></span><span> </span><span id="local-6989586621681365463"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365463"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681365462"><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681365462"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#minuses"><span class="hs-identifier hs-var">minuses</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365463"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681365462"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-679"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLitOverString"><span class="hs-identifier hs-type">PmLitOverString</span></a></span><span> </span><span id="local-6989586621681365461"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365461"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprHsString"><span class="hs-identifier hs-var">pprHsString</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681365461"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-680"></span><span>
</span><span id="line-681"></span><span class="hs-comment">-- Take care of negated literals</span><span>
</span><span id="line-682"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#minuses"><span class="hs-identifier hs-type">minuses</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-683"></span><span id="minuses"><span class="annot"><span class="annottext">minuses :: Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#minuses"><span class="hs-identifier hs-var hs-var">minuses</span></a></span></span><span> </span><span id="local-6989586621681365460"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365460"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681365459"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365459"><span class="hs-identifier hs-var">sdoc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a) -&gt; a -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#iterate"><span class="hs-identifier hs-var">iterate</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681365457"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365457"><span class="hs-identifier hs-var">sdoc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'-'</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365457"><span class="hs-identifier hs-var">sdoc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365459"><span class="hs-identifier hs-var">sdoc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Int -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-List.html#%21%21"><span class="hs-operator hs-var">!!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681365460"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-684"></span><span>
</span><span id="line-685"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-686"></span><span>  </span><span id="local-6989586621681365450"><span class="annot"><span class="annottext">ppr :: PmLit -&gt; SDoc
</span><a href="#local-6989586621681365450"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmLit"><span class="hs-identifier hs-type">PmLit</span></a></span><span> </span><span id="local-6989586621681365449"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365449"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681365448"><span class="annot"><span class="annottext">PmLitValue
</span><a href="#local-6989586621681365448"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">PmLitValue
</span><a href="#local-6989586621681365448"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365447"><span class="hs-identifier hs-var">suffix</span></a></span><span>
</span><span id="line-687"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-688"></span><span>      </span><span class="hs-comment">-- Some ad-hoc hackery for displaying proper lit suffixes based on type</span><span>
</span><span id="line-689"></span><span>      </span><span id="local-6989586621681365446"><span class="annot"><span class="annottext">tbl :: [(Kind, SDoc)]
</span><a href="#local-6989586621681365446"><span class="hs-identifier hs-var hs-var">tbl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#intPrimTy"><span class="hs-identifier hs-var">intPrimTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#primIntSuffix"><span class="hs-identifier hs-var">primIntSuffix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-690"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#int64PrimTy"><span class="hs-identifier hs-var">int64PrimTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#primInt64Suffix"><span class="hs-identifier hs-var">primInt64Suffix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-691"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#wordPrimTy"><span class="hs-identifier hs-var">wordPrimTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#primWordSuffix"><span class="hs-identifier hs-var">primWordSuffix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-692"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#word64PrimTy"><span class="hs-identifier hs-var">word64PrimTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#primWord64Suffix"><span class="hs-identifier hs-var">primWord64Suffix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-693"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#charPrimTy"><span class="hs-identifier hs-var">charPrimTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#primCharSuffix"><span class="hs-identifier hs-var">primCharSuffix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-694"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#floatPrimTy"><span class="hs-identifier hs-var">floatPrimTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#primFloatSuffix"><span class="hs-identifier hs-var">primFloatSuffix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-695"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#doublePrimTy"><span class="hs-identifier hs-var">doublePrimTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#primDoubleSuffix"><span class="hs-identifier hs-var">primDoubleSuffix</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-696"></span><span>      </span><span id="local-6989586621681365447"><span class="annot"><span class="annottext">suffix :: SDoc
</span><a href="#local-6989586621681365447"><span class="hs-identifier hs-var hs-var">suffix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#find"><span class="hs-identifier hs-var">find</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-identifier hs-var">eqType</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681365449"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Kind, SDoc)]
</span><a href="#local-6989586621681365446"><span class="hs-identifier hs-var">tbl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-697"></span><span>
</span><span id="line-698"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltCon"><span class="hs-identifier hs-type">PmAltCon</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-699"></span><span>  </span><span id="local-6989586621681365426"><span class="annot"><span class="annottext">ppr :: PmAltCon -&gt; SDoc
</span><a href="#local-6989586621681365426"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltConLike"><span class="hs-identifier hs-type">PmAltConLike</span></a></span><span> </span><span id="local-6989586621681365425"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681365425"><span class="hs-identifier hs-var">cl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681365425"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-700"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmAltLit"><span class="hs-identifier hs-type">PmAltLit</span></a></span><span> </span><span id="local-6989586621681365424"><span class="annot"><span class="annottext">PmLit
</span><a href="#local-6989586621681365424"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">PmLit
</span><a href="#local-6989586621681365424"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-701"></span><span>
</span><span id="line-702"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#PmEquality"><span class="hs-identifier hs-type">PmEquality</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-703"></span><span>  </span><span id="local-6989586621681365420"><span class="annot"><span class="annottext">ppr :: PmEquality -&gt; SDoc
</span><a href="#local-6989586621681365420"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.16.3.0/src/GHC-Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span>
</span><span id="line-704"></span></pre></body></html>
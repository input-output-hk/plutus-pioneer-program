<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP                 #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-comment">-- | Utility module for the pattern-match coverage checker.</span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.HsToCore.Pmc.Utils</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#tracePm"><span class="hs-identifier">tracePm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#mkPmId"><span class="hs-identifier">mkPmId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#allPmCheckWarnings"><span class="hs-identifier">allPmCheckWarnings</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#overlapping"><span class="hs-identifier">overlapping</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#exhaustive"><span class="hs-identifier">exhaustive</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#redundantBang"><span class="hs-identifier">redundantBang</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier">exhaustiveWarningFlag</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#isMatchContextPmChecked"><span class="hs-identifier">isMatchContextPmChecked</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#needToRunPmCheck"><span class="hs-identifier">needToRunPmCheck</span></a></span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">

#include &quot;HsVersions.h&quot;
</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#Origin"><span class="hs-identifier">Origin</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#isGenerated"><span class="hs-identifier">isGenerated</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html"><span class="hs-identifier">GHC.Driver.Session</span></a></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.html"><span class="hs-identifier">GHC.Hs</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.IOEnv.html"><span class="hs-identifier">GHC.Data.IOEnv</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.html"><span class="hs-identifier">GHC.Types.Id</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Supply.html"><span class="hs-identifier">GHC.Types.Unique.Supply</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html"><span class="hs-identifier">GHC.Utils.Logger</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.HsToCore.Monad.html"><span class="hs-identifier">GHC.HsToCore.Monad</span></a></span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#tracePm"><span class="hs-identifier hs-type">tracePm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span id="tracePm"><span class="annot"><span class="annottext">tracePm :: String -&gt; SDoc -&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.Utils.html#tracePm"><span class="hs-identifier hs-var hs-var">tracePm</span></a></span></span><span> </span><span id="local-6989586621681370829"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681370829"><span class="hs-identifier hs-var">herald</span></a></span></span><span> </span><span id="local-6989586621681370828"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681370828"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-36"></span><span>  </span><span id="local-6989586621681370827"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681370827"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-37"></span><span>  </span><span id="local-6989586621681370825"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681370825"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasLogger m =&gt; m Logger
</span><a href="GHC.Utils.Logger.html#getLogger"><span class="hs-identifier hs-var">getLogger</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span id="local-6989586621681370823"><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="#local-6989586621681370823"><span class="hs-identifier hs-var">printer</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DsM PrintUnqualified
</span><a href="GHC.HsToCore.Monad.html#mkPrintUnqualifiedDs"><span class="hs-identifier hs-var">mkPrintUnqualifiedDs</span></a></span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.3.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PrintUnqualified
-&gt; Logger
-&gt; DynFlags
-&gt; DumpFlag
-&gt; String
-&gt; DumpFormat
-&gt; SDoc
-&gt; IO ()
</span><a href="GHC.Utils.Logger.html#dumpIfSet_dyn_printer"><span class="hs-identifier hs-var">dumpIfSet_dyn_printer</span></a></span><span> </span><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="#local-6989586621681370823"><span class="hs-identifier hs-var">printer</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681370825"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681370827"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-40"></span><span>            </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_ec_trace"><span class="hs-identifier hs-var">Opt_D_dump_ec_trace</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">DumpFormat
</span><a href="GHC.Utils.Logger.html#FormatText"><span class="hs-identifier hs-var">FormatText</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681370829"><span class="hs-identifier hs-var">herald</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681370828"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#tracePm"><span class="hs-pragma hs-type">tracePm</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>  </span><span class="hs-comment">-- see Note [INLINE conditional tracing utilities]</span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-comment">-- | Generate a fresh `Id` of a given type</span><span>
</span><span id="line-44"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#mkPmId"><span class="hs-identifier hs-type">mkPmId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-45"></span><span id="mkPmId"><span class="annot"><span class="annottext">mkPmId :: Type -&gt; DsM Id
</span><a href="GHC.HsToCore.Pmc.Utils.html#mkPmId"><span class="hs-identifier hs-var hs-var">mkPmId</span></a></span></span><span> </span><span id="local-6989586621681370814"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681370814"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). MonadUnique m =&gt; m Unique
</span><a href="GHC.Types.Unique.Supply.html#getUniqueM"><span class="hs-identifier hs-var">getUniqueM</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681370812"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681370812"><span class="hs-identifier hs-var">unique</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681370811"><span class="annot"><span class="annottext">occname :: OccName
</span><a href="#local-6989586621681370811"><span class="hs-identifier hs-var hs-var">occname</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkVarOccFS"><span class="hs-identifier hs-var">mkVarOccFS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pm&quot;</span></span><span>
</span><span id="line-47"></span><span>      </span><span id="local-6989586621681370808"><span class="annot"><span class="annottext">name :: Name
</span><a href="#local-6989586621681370808"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unique -&gt; OccName -&gt; SrcSpan -&gt; Name
</span><a href="GHC.Types.Name.html#mkInternalName"><span class="hs-identifier hs-var">mkInternalName</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681370812"><span class="hs-identifier hs-var">unique</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681370811"><span class="hs-identifier hs-var">occname</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-keyword">in</span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Type -&gt; Type -&gt; Id
</span><a href="GHC.Types.Id.html#mkLocalIdOrCoVar"><span class="hs-identifier hs-var">mkLocalIdOrCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681370808"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="GHC.Core.Type.html#Many"><span class="hs-identifier hs-var">Many</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681370814"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="hs-comment">-- | All warning flags that need to run the pattern match checker.</span><span>
</span><span id="line-51"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#allPmCheckWarnings"><span class="hs-identifier hs-type">allPmCheckWarnings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Flags.html#WarningFlag"><span class="hs-identifier hs-type">WarningFlag</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-52"></span><span id="allPmCheckWarnings"><span class="annot"><span class="annottext">allPmCheckWarnings :: [WarningFlag]
</span><a href="GHC.HsToCore.Pmc.Utils.html#allPmCheckWarnings"><span class="hs-identifier hs-var hs-var">allPmCheckWarnings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnIncompletePatterns"><span class="hs-identifier hs-var">Opt_WarnIncompletePatterns</span></a></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnIncompleteUniPatterns"><span class="hs-identifier hs-var">Opt_WarnIncompleteUniPatterns</span></a></span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnIncompletePatternsRecUpd"><span class="hs-identifier hs-var">Opt_WarnIncompletePatternsRecUpd</span></a></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnOverlappingPatterns"><span class="hs-identifier hs-var">Opt_WarnOverlappingPatterns</span></a></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="hs-comment">-- | Check whether the redundancy checker should run (redundancy only)</span><span>
</span><span id="line-60"></span><span id="local-6989586621681370878"><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#overlapping"><span class="hs-identifier hs-type">overlapping</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsMatchContext"><span class="hs-identifier hs-type">HsMatchContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681370878"><span class="hs-identifier hs-type">id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-61"></span><span class="hs-comment">-- See Note [Inaccessible warnings for record updates]</span><span>
</span><span id="line-62"></span><span id="overlapping"><span class="annot"><span class="annottext">overlapping :: forall id. DynFlags -&gt; HsMatchContext id -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Utils.html#overlapping"><span class="hs-identifier hs-var hs-var">overlapping</span></a></span></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><span class="hs-identifier">_</span></span><span>      </span><span class="annot"><span class="annottext">HsMatchContext id
</span><a href="Language.Haskell.Syntax.Expr.html#RecUpd"><span class="hs-identifier hs-var">RecUpd</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-63"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#overlapping"><span class="hs-identifier hs-var">overlapping</span></a></span><span> </span><span id="local-6989586621681370798"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681370798"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsMatchContext id
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WarningFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#wopt"><span class="hs-identifier hs-var">wopt</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnOverlappingPatterns"><span class="hs-identifier hs-var">Opt_WarnOverlappingPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681370798"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="hs-comment">-- | Check whether the exhaustiveness checker should run (exhaustiveness only)</span><span>
</span><span id="line-66"></span><span id="local-6989586621681370796"><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#exhaustive"><span class="hs-identifier hs-type">exhaustive</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsMatchContext"><span class="hs-identifier hs-type">HsMatchContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681370796"><span class="hs-identifier hs-type">id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-67"></span><span id="exhaustive"><span class="annot"><span class="annottext">exhaustive :: forall id. DynFlags -&gt; HsMatchContext id -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Utils.html#exhaustive"><span class="hs-identifier hs-var hs-var">exhaustive</span></a></span></span><span>  </span><span id="local-6989586621681370795"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681370795"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#wopt"><span class="hs-operator hs-var">`wopt`</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681370795"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall id. HsMatchContext id -&gt; Maybe WarningFlag
</span><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier hs-var">exhaustiveWarningFlag</span></a></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-comment">-- | Check whether unnecessary bangs should be warned about</span><span>
</span><span id="line-70"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#redundantBang"><span class="hs-identifier hs-type">redundantBang</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-71"></span><span id="redundantBang"><span class="annot"><span class="annottext">redundantBang :: DynFlags -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Utils.html#redundantBang"><span class="hs-identifier hs-var hs-var">redundantBang</span></a></span></span><span> </span><span id="local-6989586621681370792"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681370792"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WarningFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#wopt"><span class="hs-identifier hs-var">wopt</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnRedundantBangPatterns"><span class="hs-identifier hs-var">Opt_WarnRedundantBangPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681370792"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-comment">-- | Denotes whether an exhaustiveness check is supported, and if so,</span><span>
</span><span id="line-74"></span><span class="hs-comment">-- via which 'WarningFlag' it's controlled.</span><span>
</span><span id="line-75"></span><span class="hs-comment">-- Returns 'Nothing' if check is not supported.</span><span>
</span><span id="line-76"></span><span id="local-6989586621681370869"><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier hs-type">exhaustiveWarningFlag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsMatchContext"><span class="hs-identifier hs-type">HsMatchContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681370869"><span class="hs-identifier hs-type">id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html#WarningFlag"><span class="hs-identifier hs-type">WarningFlag</span></a></span></span><span>
</span><span id="line-77"></span><span id="exhaustiveWarningFlag"><span class="annot"><span class="annottext">exhaustiveWarningFlag :: forall id. HsMatchContext id -&gt; Maybe WarningFlag
</span><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier hs-var hs-var">exhaustiveWarningFlag</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FunRhs"><span class="hs-identifier hs-type">FunRhs</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnIncompletePatterns"><span class="hs-identifier hs-var">Opt_WarnIncompletePatterns</span></a></span><span>
</span><span id="line-78"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier hs-var">exhaustiveWarningFlag</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext id
</span><a href="Language.Haskell.Syntax.Expr.html#CaseAlt"><span class="hs-identifier hs-var">CaseAlt</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnIncompletePatterns"><span class="hs-identifier hs-var">Opt_WarnIncompletePatterns</span></a></span><span>
</span><span id="line-79"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier hs-var">exhaustiveWarningFlag</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext id
</span><a href="Language.Haskell.Syntax.Expr.html#IfAlt"><span class="hs-identifier hs-var">IfAlt</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnIncompletePatterns"><span class="hs-identifier hs-var">Opt_WarnIncompletePatterns</span></a></span><span>
</span><span id="line-80"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier hs-var">exhaustiveWarningFlag</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext id
</span><a href="Language.Haskell.Syntax.Expr.html#LambdaExpr"><span class="hs-identifier hs-var">LambdaExpr</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnIncompleteUniPatterns"><span class="hs-identifier hs-var">Opt_WarnIncompleteUniPatterns</span></a></span><span>
</span><span id="line-81"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier hs-var">exhaustiveWarningFlag</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext id
</span><a href="Language.Haskell.Syntax.Expr.html#PatBindRhs"><span class="hs-identifier hs-var">PatBindRhs</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnIncompleteUniPatterns"><span class="hs-identifier hs-var">Opt_WarnIncompleteUniPatterns</span></a></span><span>
</span><span id="line-82"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier hs-var">exhaustiveWarningFlag</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext id
</span><a href="Language.Haskell.Syntax.Expr.html#PatBindGuards"><span class="hs-identifier hs-var">PatBindGuards</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnIncompletePatterns"><span class="hs-identifier hs-var">Opt_WarnIncompletePatterns</span></a></span><span>
</span><span id="line-83"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier hs-var">exhaustiveWarningFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ArrowMatchCtxt"><span class="hs-identifier hs-type">ArrowMatchCtxt</span></a></span><span> </span><span id="local-6989586621681370783"><span class="annot"><span class="annottext">HsArrowMatchContext
</span><a href="#local-6989586621681370783"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsArrowMatchContext -&gt; Maybe WarningFlag
</span><a href="GHC.HsToCore.Pmc.Utils.html#arrowMatchContextExhaustiveWarningFlag"><span class="hs-identifier hs-var">arrowMatchContextExhaustiveWarningFlag</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrowMatchContext
</span><a href="#local-6989586621681370783"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-84"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier hs-var">exhaustiveWarningFlag</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext id
</span><a href="Language.Haskell.Syntax.Expr.html#RecUpd"><span class="hs-identifier hs-var">RecUpd</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnIncompletePatternsRecUpd"><span class="hs-identifier hs-var">Opt_WarnIncompletePatternsRecUpd</span></a></span><span>
</span><span id="line-85"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier hs-var">exhaustiveWarningFlag</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext id
</span><a href="Language.Haskell.Syntax.Expr.html#ThPatSplice"><span class="hs-identifier hs-var">ThPatSplice</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-86"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier hs-var">exhaustiveWarningFlag</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext id
</span><a href="Language.Haskell.Syntax.Expr.html#PatSyn"><span class="hs-identifier hs-var">PatSyn</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-87"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier hs-var">exhaustiveWarningFlag</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext id
</span><a href="Language.Haskell.Syntax.Expr.html#ThPatQuote"><span class="hs-identifier hs-var">ThPatQuote</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-88"></span><span class="hs-comment">-- Don't warn about incomplete patterns in list comprehensions, pattern guards</span><span>
</span><span id="line-89"></span><span class="hs-comment">-- etc. They are often *supposed* to be incomplete</span><span>
</span><span id="line-90"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier hs-var">exhaustiveWarningFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#StmtCtxt"><span class="hs-identifier hs-type">StmtCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#arrowMatchContextExhaustiveWarningFlag"><span class="hs-identifier hs-type">arrowMatchContextExhaustiveWarningFlag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsArrowMatchContext"><span class="hs-identifier hs-type">HsArrowMatchContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html#WarningFlag"><span class="hs-identifier hs-type">WarningFlag</span></a></span><span>
</span><span id="line-93"></span><span id="arrowMatchContextExhaustiveWarningFlag"><span class="annot"><span class="annottext">arrowMatchContextExhaustiveWarningFlag :: HsArrowMatchContext -&gt; Maybe WarningFlag
</span><a href="GHC.HsToCore.Pmc.Utils.html#arrowMatchContextExhaustiveWarningFlag"><span class="hs-identifier hs-var hs-var">arrowMatchContextExhaustiveWarningFlag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-glyph">case</span><span>
</span><span id="line-94"></span><span>  </span><span class="annot"><span class="annottext">HsArrowMatchContext
</span><a href="Language.Haskell.Syntax.Expr.html#ProcExpr"><span class="hs-identifier hs-var">ProcExpr</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnIncompleteUniPatterns"><span class="hs-identifier hs-var">Opt_WarnIncompleteUniPatterns</span></a></span><span>
</span><span id="line-95"></span><span>  </span><span class="annot"><span class="annottext">HsArrowMatchContext
</span><a href="Language.Haskell.Syntax.Expr.html#ArrowCaseAlt"><span class="hs-identifier hs-var">ArrowCaseAlt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnIncompletePatterns"><span class="hs-identifier hs-var">Opt_WarnIncompletePatterns</span></a></span><span>
</span><span id="line-96"></span><span>  </span><span class="annot"><span class="annottext">HsArrowMatchContext
</span><a href="Language.Haskell.Syntax.Expr.html#KappaExpr"><span class="hs-identifier hs-var">KappaExpr</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnIncompleteUniPatterns"><span class="hs-identifier hs-var">Opt_WarnIncompleteUniPatterns</span></a></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-comment">-- | Check whether any part of pattern match checking is enabled for this</span><span>
</span><span id="line-99"></span><span class="hs-comment">-- 'HsMatchContext' (does not matter whether it is the redundancy check or the</span><span>
</span><span id="line-100"></span><span class="hs-comment">-- exhaustiveness check).</span><span>
</span><span id="line-101"></span><span id="local-6989586621681370864"><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#isMatchContextPmChecked"><span class="hs-identifier hs-type">isMatchContextPmChecked</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Origin"><span class="hs-identifier hs-type">Origin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsMatchContext"><span class="hs-identifier hs-type">HsMatchContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681370864"><span class="hs-identifier hs-type">id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-102"></span><span id="isMatchContextPmChecked"><span class="annot"><span class="annottext">isMatchContextPmChecked :: forall id. DynFlags -&gt; Origin -&gt; HsMatchContext id -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Utils.html#isMatchContextPmChecked"><span class="hs-identifier hs-var hs-var">isMatchContextPmChecked</span></a></span></span><span> </span><span id="local-6989586621681370774"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681370774"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681370773"><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621681370773"><span class="hs-identifier hs-var">origin</span></a></span></span><span> </span><span id="local-6989586621681370772"><span class="annot"><span class="annottext">HsMatchContext id
</span><a href="#local-6989586621681370772"><span class="hs-identifier hs-var">kind</span></a></span></span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Origin -&gt; Bool
</span><a href="GHC.Types.Basic.html#isGenerated"><span class="hs-identifier hs-var">isGenerated</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621681370773"><span class="hs-identifier hs-var">origin</span></a></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall id. DynFlags -&gt; HsMatchContext id -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Utils.html#overlapping"><span class="hs-identifier hs-var">overlapping</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681370774"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext id
</span><a href="#local-6989586621681370772"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall id. DynFlags -&gt; HsMatchContext id -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Utils.html#exhaustive"><span class="hs-identifier hs-var">exhaustive</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681370774"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext id
</span><a href="#local-6989586621681370772"><span class="hs-identifier hs-var">kind</span></a></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="hs-comment">-- | Return True when any of the pattern match warnings ('allPmCheckWarnings')</span><span>
</span><span id="line-109"></span><span class="hs-comment">-- are enabled, in which case we need to run the pattern match checker.</span><span>
</span><span id="line-110"></span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#needToRunPmCheck"><span class="hs-identifier hs-type">needToRunPmCheck</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Origin"><span class="hs-identifier hs-type">Origin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-111"></span><span id="needToRunPmCheck"><span class="annot"><span class="annottext">needToRunPmCheck :: DynFlags -&gt; Origin -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Utils.html#needToRunPmCheck"><span class="hs-identifier hs-var hs-var">needToRunPmCheck</span></a></span></span><span> </span><span id="local-6989586621681370770"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681370770"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681370769"><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621681370769"><span class="hs-identifier hs-var">origin</span></a></span></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Origin -&gt; Bool
</span><a href="GHC.Types.Basic.html#isGenerated"><span class="hs-identifier hs-var">isGenerated</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621681370769"><span class="hs-identifier hs-var">origin</span></a></span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Foldable f =&gt; f a -&gt; Bool
</span><a href="GHC.Utils.Misc.html#notNull"><span class="hs-identifier hs-var">notNull</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#wopt"><span class="hs-operator hs-var">`wopt`</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681370770"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[WarningFlag]
</span><a href="GHC.HsToCore.Pmc.Utils.html#allPmCheckWarnings"><span class="hs-identifier hs-var">allPmCheckWarnings</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="hs-comment">{- Note [Inaccessible warnings for record updates]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider (#12957)
  data T a where
    T1 :: { x :: Int } -&gt; T Bool
    T2 :: { x :: Int } -&gt; T a
    T3 :: T a

  f :: T Char -&gt; T a
  f r = r { x = 3 }

The desugarer will conservatively generate a case for T1 even though
it's impossible:
  f r = case r of
          T1 x -&gt; T1 3   -- Inaccessible branch
          T2 x -&gt; T2 3
          _    -&gt; error &quot;Missing&quot;

We don't want to warn about the inaccessible branch because the programmer
didn't put it there!  So we filter out the warning here.

The same can happen for long distance term constraints instead of type
constraints (#17783):

  data T = A { x :: Int } | B { x :: Int }
  f r@A{} = r { x = 3 }
  f _     = B 0

Here, the long distance info from the FunRhs match (@r ~ A x@) will make the
clause matching on @B@ of the desugaring to @case@ redundant. It's generated
code that we don't want to warn about.
-}</span><span>
</span><span id="line-149"></span></pre></body></html>
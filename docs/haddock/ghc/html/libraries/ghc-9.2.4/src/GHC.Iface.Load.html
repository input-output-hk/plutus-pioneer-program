<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The GRASP/AQUA Project, Glasgow University, 1992-1998

-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE CPP, BangPatterns, RecordWildCards, NondecreasingIndentation #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-orphans #-}</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-comment">-- | Loading interface files</span><span>
</span><span id="line-15"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Iface.Load</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-16"></span><span>        </span><span class="hs-comment">-- Importing one thing</span><span>
</span><span id="line-17"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#tcLookupImported_maybe"><span class="hs-identifier">tcLookupImported_maybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html#importDecl"><span class="hs-identifier">importDecl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#checkWiredInTyCon"><span class="hs-identifier">checkWiredInTyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html#ifCheckWiredInThing"><span class="hs-identifier">ifCheckWiredInThing</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span>        </span><span class="hs-comment">-- RnM/TcM functions</span><span>
</span><span id="line-21"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#loadModuleInterface"><span class="hs-identifier">loadModuleInterface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html#loadModuleInterfaces"><span class="hs-identifier">loadModuleInterfaces</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#loadSrcInterface"><span class="hs-identifier">loadSrcInterface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html#loadSrcInterface_maybe"><span class="hs-identifier">loadSrcInterface_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#loadInterfaceForName"><span class="hs-identifier">loadInterfaceForName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html#loadInterfaceForNameMaybe"><span class="hs-identifier">loadInterfaceForNameMaybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html#loadInterfaceForModule"><span class="hs-identifier">loadInterfaceForModule</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span>        </span><span class="hs-comment">-- IfM functions</span><span>
</span><span id="line-26"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#loadInterface"><span class="hs-identifier">loadInterface</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#loadSysInterface"><span class="hs-identifier">loadSysInterface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html#loadUserInterface"><span class="hs-identifier">loadUserInterface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html#loadPluginInterface"><span class="hs-identifier">loadPluginInterface</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#findAndReadIface"><span class="hs-identifier">findAndReadIface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html#readIface"><span class="hs-identifier">readIface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html#writeIface"><span class="hs-identifier">writeIface</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#initExternalPackageState"><span class="hs-identifier">initExternalPackageState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#moduleFreeHolesPrecise"><span class="hs-identifier">moduleFreeHolesPrecise</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#needWiredInHomeIface"><span class="hs-identifier">needWiredInHomeIface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html#loadWiredInHomeIface"><span class="hs-identifier">loadWiredInHomeIface</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#pprModIfaceSimple"><span class="hs-identifier">pprModIfaceSimple</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#ifaceStats"><span class="hs-identifier">ifaceStats</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html#pprModIface"><span class="hs-identifier">pprModIface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html#showIface"><span class="hs-identifier">showIface</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#cannotFindModule"><span class="hs-identifier">cannotFindModule</span></a></span><span>
</span><span id="line-37"></span><span>   </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">

#include &quot;HsVersions.h&quot;
</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Platform.Ways.html"><span class="hs-identifier">GHC.Platform.Ways</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Platform.Profile.html"><span class="hs-identifier">GHC.Platform.Profile</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.IfaceToCore.html"><span class="hs-identifier">GHC.IfaceToCore</span></a></span><span>
</span><span id="line-46"></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceDecls"><span class="hs-identifier">tcIfaceDecls</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceRules"><span class="hs-identifier">tcIfaceRules</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceInst"><span class="hs-identifier">tcIfaceInst</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceFamInst"><span class="hs-identifier">tcIfaceFamInst</span></a></span><span>
</span><span id="line-47"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceAnnotations"><span class="hs-identifier">tcIfaceAnnotations</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceCompleteMatches"><span class="hs-identifier">tcIfaceCompleteMatches</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Env.html"><span class="hs-identifier">GHC.Driver.Env</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html"><span class="hs-identifier">GHC.Driver.Session</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Backend.html"><span class="hs-identifier">GHC.Driver.Backend</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Ppr.html"><span class="hs-identifier">GHC.Driver.Ppr</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Hooks.html"><span class="hs-identifier">GHC.Driver.Hooks</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Plugins.html"><span class="hs-identifier">GHC.Driver.Plugins</span></a></span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html"><span class="hs-identifier">GHC.Iface.Syntax</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Iface.Ext.Fields.html"><span class="hs-identifier">GHC.Iface.Ext.Fields</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Iface.Binary.html"><span class="hs-identifier">GHC.Iface.Binary</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Iface.Rename.html"><span class="hs-identifier">GHC.Iface.Rename</span></a></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html"><span class="hs-identifier">GHC.Tc.Utils.Monad</span></a></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html"><span class="hs-identifier">GHC.Utils.Binary</span></a></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#BinData"><span class="hs-identifier">BinData</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html"><span class="hs-identifier">GHC.Utils.Error</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Outputable</span></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html"><span class="hs-identifier">GHC.Utils.Logger</span></a></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Settings.Constants.html"><span class="hs-identifier">GHC.Settings.Constants</span></a></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Utils.html"><span class="hs-identifier">GHC.Builtin.Utils</span></a></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.PrimOps.html"><span class="hs-identifier">GHC.Builtin.PrimOps</span></a></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Builtin.PrimOps.html#allThePrimOps"><span class="hs-identifier">allThePrimOps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.PrimOps.html#primOpFixity"><span class="hs-identifier">primOpFixity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.PrimOps.html#primOpOcc"><span class="hs-identifier">primOpOcc</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Rules.html"><span class="hs-identifier">GHC.Core.Rules</span></a></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html"><span class="hs-identifier">GHC.Core.InstEnv</span></a></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.FamInstEnv.html"><span class="hs-identifier">GHC.Core.FamInstEnv</span></a></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.Make.html"><span class="hs-identifier">GHC.Types.Id.Make</span></a></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Id.Make.html#seqId"><span class="hs-identifier">seqId</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Annotations.html"><span class="hs-identifier">GHC.Types.Annotations</span></a></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html"><span class="hs-identifier">GHC.Types.Name.Env</span></a></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Avail.html"><span class="hs-identifier">GHC.Types.Avail</span></a></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Fixity.html"><span class="hs-identifier">GHC.Types.Fixity</span></a></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Fixity.Env.html"><span class="hs-identifier">GHC.Types.Fixity.Env</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SourceError.html"><span class="hs-identifier">GHC.Types.SourceError</span></a></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html"><span class="hs-identifier">GHC.Types.SourceText</span></a></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SourceFile.html"><span class="hs-identifier">GHC.Types.SourceFile</span></a></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SafeHaskell.html"><span class="hs-identifier">GHC.Types.SafeHaskell</span></a></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.TypeEnv.html"><span class="hs-identifier">GHC.Types.TypeEnv</span></a></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html"><span class="hs-identifier">GHC.Types.Unique.FM</span></a></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.DSet.html"><span class="hs-identifier">GHC.Types.Unique.DSet</span></a></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html"><span class="hs-identifier">GHC.Types.TyThing</span></a></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.External.html"><span class="hs-identifier">GHC.Unit.External</span></a></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html"><span class="hs-identifier">GHC.Unit.Module</span></a></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Warnings.html"><span class="hs-identifier">GHC.Unit.Module.Warnings</span></a></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html"><span class="hs-identifier">GHC.Unit.Module.ModIface</span></a></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html"><span class="hs-identifier">GHC.Unit.Module.Deps</span></a></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.State.html"><span class="hs-identifier">GHC.Unit.State</span></a></span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Home.html"><span class="hs-identifier">GHC.Unit.Home</span></a></span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html"><span class="hs-identifier">GHC.Unit.Home.ModInfo</span></a></span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Finder.html"><span class="hs-identifier">GHC.Unit.Finder</span></a></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html"><span class="hs-identifier">GHC.Unit.Env</span></a></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Control-Monad.html#"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Control-Exception.html#"><span class="hs-identifier">Control.Exception</span></a></span><span>
</span><span id="line-114"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Map.html#"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#toList"><span class="hs-identifier">toList</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../filepath-1.4.2.2/src/System-FilePath.html#"><span class="hs-identifier">System.FilePath</span></a></span><span>
</span><span id="line-116"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../directory-1.3.6.2/src/System-Directory.html#"><span class="hs-identifier">System.Directory</span></a></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
*      tcImportDecl is the key function for &quot;faulting in&quot;              *
*      imported things
*                                                                      *
************************************************************************

The main idea is this.  We are chugging along type-checking source code, and
find a reference to GHC.Base.map.  We call tcLookupGlobal, which doesn't find
it in the EPS type envt.  So it
        1 loads GHC.Base.hi
        2 gets the decl for GHC.Base.map
        3 typechecks it via tcIfaceDecl
        4 and adds it to the type env in the EPS

Note that DURING STEP 4, we may find that map's type mentions a type
constructor that also

Notice that for imported things we read the current version from the EPS
mutable variable.  This is important in situations like
        ...$(e1)...$(e2)...
where the code that e1 expands to might import some defns that
also turn out to be needed by the code that e2 expands to.
-}</span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span class="annot"><a href="GHC.Iface.Load.html#tcLookupImported_maybe"><span class="hs-identifier hs-type">tcLookupImported_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Maybe.html#MaybeErr"><span class="hs-identifier hs-type">MaybeErr</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- Returns (Failed err) if we can't find the interface file for the thing</span><span>
</span><span id="line-146"></span><span id="tcLookupImported_maybe"><span class="annot"><span class="annottext">tcLookupImported_maybe :: Name -&gt; TcM (MaybeErr SDoc TyThing)
</span><a href="GHC.Iface.Load.html#tcLookupImported_maybe"><span class="hs-identifier hs-var hs-var">tcLookupImported_maybe</span></a></span></span><span> </span><span id="local-6989586621681316065"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681316065"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681316064"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681316064"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl HscEnv
</span><a href="GHC.Tc.Utils.Monad.html#getTopEnv"><span class="hs-identifier hs-var">getTopEnv</span></a></span><span>
</span><span id="line-148"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681316062"><span class="annot"><span class="annottext">Maybe TyThing
</span><a href="#local-6989586621681316062"><span class="hs-identifier hs-var">mb_thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.3.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; Name -&gt; IO (Maybe TyThing)
</span><a href="GHC.Driver.Env.html#lookupType"><span class="hs-identifier hs-var">lookupType</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681316064"><span class="hs-identifier hs-var">hsc_env</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681316065"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe TyThing
</span><a href="#local-6989586621681316062"><span class="hs-identifier hs-var">mb_thing</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-150"></span><span>            </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681316059"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681316059"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681316059"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>            </span><span class="annot"><span class="annottext">Maybe TyThing
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcM (MaybeErr SDoc TyThing)
</span><a href="GHC.Iface.Load.html#tcImportDecl_maybe"><span class="hs-identifier hs-var">tcImportDecl_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681316065"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="annot"><a href="GHC.Iface.Load.html#tcImportDecl_maybe"><span class="hs-identifier hs-type">tcImportDecl_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Maybe.html#MaybeErr"><span class="hs-identifier hs-type">MaybeErr</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span class="hs-comment">-- Entry point for *source-code* uses of importDecl</span><span>
</span><span id="line-155"></span><span id="tcImportDecl_maybe"><span class="annot"><span class="annottext">tcImportDecl_maybe :: Name -&gt; TcM (MaybeErr SDoc TyThing)
</span><a href="GHC.Iface.Load.html#tcImportDecl_maybe"><span class="hs-identifier hs-var hs-var">tcImportDecl_maybe</span></a></span></span><span> </span><span id="local-6989586621681316056"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681316056"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-156"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681316055"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681316055"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe TyThing
</span><a href="GHC.Types.Name.html#wiredInNameTyThing_maybe"><span class="hs-identifier hs-var">wiredInNameTyThing_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681316056"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyThing -&gt; Bool
</span><a href="GHC.Iface.Load.html#needWiredInHomeIface"><span class="hs-identifier hs-var">needWiredInHomeIface</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681316055"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. IfG a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#initIfaceTcRn"><span class="hs-identifier hs-var">initIfaceTcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall lcl. Name -&gt; IfM lcl ()
</span><a href="GHC.Iface.Load.html#loadWiredInHomeIface"><span class="hs-identifier hs-var">loadWiredInHomeIface</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681316056"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span>                </span><span class="hs-comment">-- See Note [Loading instances for wired-in things]</span><span>
</span><span id="line-160"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681316055"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. IfG a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#initIfaceTcRn"><span class="hs-identifier hs-var">initIfaceTcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall lcl. Name -&gt; IfM lcl (MaybeErr SDoc TyThing)
</span><a href="GHC.Iface.Load.html#importDecl"><span class="hs-identifier hs-var">importDecl</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681316056"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span id="local-6989586621681316634"><span class="annot"><a href="GHC.Iface.Load.html#importDecl"><span class="hs-identifier hs-type">importDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfM"><span class="hs-identifier hs-type">IfM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316634"><span class="hs-identifier hs-type">lcl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Maybe.html#MaybeErr"><span class="hs-identifier hs-type">MaybeErr</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-165"></span><span class="hs-comment">-- Get the TyThing for this Name from an interface file</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- It's not a wired-in thing -- the caller caught that</span><span>
</span><span id="line-167"></span><span id="importDecl"><span class="annot"><span class="annottext">importDecl :: forall lcl. Name -&gt; IfM lcl (MaybeErr SDoc TyThing)
</span><a href="GHC.Iface.Load.html#importDecl"><span class="hs-identifier hs-var hs-var">importDecl</span></a></span></span><span> </span><span id="local-6989586621681316031"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681316031"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-168"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">isWiredInName</span><span> </span><span class="hs-identifier">name</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681316024"><span class="hs-identifier hs-var">nd_doc</span></a></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span>        </span><span class="hs-comment">-- Load the interface, which should populate the PTE</span><span>
</span><span id="line-172"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681316023"><span class="annot"><span class="annottext">MaybeErr SDoc ModIface
</span><a href="#local-6989586621681316023"><span class="hs-identifier hs-var">mb_iface</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isExternalName</span><span> </span><span class="hs-identifier">name</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">name</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>                      </span><span class="annot"><span class="annottext">forall lcl.
SDoc
-&gt; GenModule Unit -&gt; WhereFrom -&gt; IfM lcl (MaybeErr SDoc ModIface)
</span><a href="GHC.Iface.Load.html#loadInterface"><span class="hs-identifier hs-var">loadInterface</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681316024"><span class="hs-identifier hs-var">nd_doc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; GenModule Unit
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681316031"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WhereFrom
</span><a href="GHC.Tc.Types.html#ImportBySystem"><span class="hs-identifier hs-var">ImportBySystem</span></a></span><span>
</span><span id="line-174"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MaybeErr SDoc ModIface
</span><a href="#local-6989586621681316023"><span class="hs-identifier hs-var">mb_iface</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-175"></span><span>                </span><span class="annot"><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-type">Failed</span></a></span><span> </span><span id="local-6989586621681316016"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681316016"><span class="hs-identifier hs-var">err_msg</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. err -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-var">Failed</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681316016"><span class="hs-identifier hs-var">err_msg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-176"></span><span>                </span><span class="annot"><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-type">Succeeded</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span>        </span><span class="hs-comment">-- Now look it up again; this time we should find it</span><span>
</span><span id="line-179"></span><span>        </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681316015"><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681316015"><span class="hs-identifier hs-var">eps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl ExternalPackageState
</span><a href="GHC.Tc.Utils.Monad.html#getEps"><span class="hs-identifier hs-var">getEps</span></a></span><span>
</span><span id="line-180"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; Name -&gt; Maybe TyThing
</span><a href="GHC.Types.TypeEnv.html#lookupTypeEnv"><span class="hs-identifier hs-var">lookupTypeEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; TypeEnv
</span><a href="GHC.Unit.External.html#eps_PTE"><span class="hs-identifier hs-var">eps_PTE</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681316015"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681316031"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-181"></span><span>            </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681316011"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681316011"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681316011"><span class="hs-identifier hs-var">thing</span></a></span><span>
</span><span id="line-182"></span><span>            </span><span class="annot"><span class="annottext">Maybe TyThing
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681316010"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621681316010"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#whenPprDebug"><span class="hs-identifier hs-var">whenPprDebug</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; SDoc
</span><a href="#local-6989586621681316008"><span class="hs-identifier hs-var">found_things_msg</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681316015"><span class="hs-identifier hs-var">eps</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>                                    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681316005"><span class="hs-identifier hs-var">not_found_msg</span></a></span><span>
</span><span id="line-184"></span><span>                          </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall err val. err -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-var">Failed</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681316010"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-186"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-187"></span><span>    </span><span id="local-6989586621681316024"><span class="annot"><span class="annottext">nd_doc :: SDoc
</span><a href="#local-6989586621681316024"><span class="hs-identifier hs-var hs-var">nd_doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Need decl for&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681316031"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-188"></span><span>    </span><span id="local-6989586621681316005"><span class="annot"><span class="annottext">not_found_msg :: SDoc
</span><a href="#local-6989586621681316005"><span class="hs-identifier hs-var hs-var">not_found_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Can't find interface-file declaration for&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-189"></span><span>                                </span><span class="annot"><span class="annottext">NameSpace -&gt; SDoc
</span><a href="GHC.Types.Name.Occurrence.html#pprNameSpace"><span class="hs-identifier hs-var">pprNameSpace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; NameSpace
</span><a href="GHC.Types.Name.html#nameNameSpace"><span class="hs-identifier hs-var">nameNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681316031"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681316031"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>                       </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Probable cause: bug in .hi-boot file, or inconsistent .hi file&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-191"></span><span>                                </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Use -ddump-if-trace to get an idea of which file caused the error&quot;</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>    </span><span id="local-6989586621681316008"><span class="annot"><span class="annottext">found_things_msg :: ExternalPackageState -&gt; SDoc
</span><a href="#local-6989586621681316008"><span class="hs-identifier hs-var hs-var">found_things_msg</span></a></span></span><span> </span><span id="local-6989586621681315998"><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315998"><span class="hs-identifier hs-var">eps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-193"></span><span>        </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Found the following declarations in&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; GenModule Unit
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681316031"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>           </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; Bool
</span><a href="#local-6989586621681315995"><span class="hs-identifier hs-var">is_interesting</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. NameEnv a -&gt; [a]
</span><a href="GHC.Types.Name.Env.html#nameEnvElts"><span class="hs-identifier hs-var">nameEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState -&gt; TypeEnv
</span><a href="GHC.Unit.External.html#eps_PTE"><span class="hs-identifier hs-var">eps_PTE</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315998"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-196"></span><span>        </span><span id="local-6989586621681315995"><span class="annot"><span class="annottext">is_interesting :: TyThing -&gt; Bool
</span><a href="#local-6989586621681315995"><span class="hs-identifier hs-var hs-var">is_interesting</span></a></span></span><span> </span><span id="local-6989586621681315993"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681315993"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; GenModule Unit
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681316031"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; GenModule Unit
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681315993"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
           Checks for wired-in things
*                                                                      *
************************************************************************

Note [Loading instances for wired-in things]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We need to make sure that we have at least *read* the interface files
for any module with an instance decl or RULE that we might want.

* If the instance decl is an orphan, we have a whole separate mechanism
  (loadOrphanModules)

* If the instance decl is not an orphan, then the act of looking at the
  TyCon or Class will force in the defining module for the
  TyCon/Class, and hence the instance decl

* BUT, if the TyCon is a wired-in TyCon, we don't really need its interface;
  but we must make sure we read its interface in case it has instances or
  rules.  That is what GHC.Iface.Load.loadWiredInHomeIface does.  It's called
  from GHC.IfaceToCore.{tcImportDecl, checkWiredInTyCon, ifCheckWiredInThing}

* HOWEVER, only do this for TyCons.  There are no wired-in Classes.  There
  are some wired-in Ids, but we don't want to load their interfaces. For
  example, Control.Exception.Base.recSelError is wired in, but that module
  is compiled late in the base library, and we don't want to force it to
  load before it's been compiled!

All of this is done by the type checker. The renamer plays no role.
(It used to, but no longer.)
-}</span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="annot"><a href="GHC.Iface.Load.html#checkWiredInTyCon"><span class="hs-identifier hs-type">checkWiredInTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-234"></span><span class="hs-comment">-- Ensure that the home module of the TyCon (and hence its instances)</span><span>
</span><span id="line-235"></span><span class="hs-comment">-- are loaded. See Note [Loading instances for wired-in things]</span><span>
</span><span id="line-236"></span><span class="hs-comment">-- It might not be a wired-in tycon (see the calls in GHC.Tc.Utils.Unify),</span><span>
</span><span id="line-237"></span><span class="hs-comment">-- in which case this is a no-op.</span><span>
</span><span id="line-238"></span><span id="checkWiredInTyCon"><span class="annot"><span class="annottext">checkWiredInTyCon :: TyCon -&gt; TcM ()
</span><a href="GHC.Iface.Load.html#checkWiredInTyCon"><span class="hs-identifier hs-var hs-var">checkWiredInTyCon</span></a></span></span><span> </span><span id="local-6989586621681315991"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681315991"><span class="hs-identifier hs-var">tc</span></a></span></span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isWiredInName"><span class="hs-identifier hs-var">isWiredInName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315990"><span class="hs-identifier hs-var">tc_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-242"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681315989"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315989"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasModule m =&gt; m (GenModule Unit)
</span><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier hs-var">getModule</span></a></span><span>
</span><span id="line-243"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;checkWiredInTyCon&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315990"><span class="hs-identifier hs-var">tc_name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315989"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isExternalName</span><span> </span><span class="hs-identifier">tc_name</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>          </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315989"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; GenModule Unit
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315990"><span class="hs-identifier hs-var">tc_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. IfG a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#initIfaceTcRn"><span class="hs-identifier hs-var">initIfaceTcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall lcl. Name -&gt; IfM lcl ()
</span><a href="GHC.Iface.Load.html#loadWiredInHomeIface"><span class="hs-identifier hs-var">loadWiredInHomeIface</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315990"><span class="hs-identifier hs-var">tc_name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-247"></span><span>                </span><span class="hs-comment">-- Don't look for (non-existent) Float.hi when</span><span>
</span><span id="line-248"></span><span>                </span><span class="hs-comment">-- compiling Float.hs, which mentions Float of course</span><span>
</span><span id="line-249"></span><span>                </span><span class="hs-comment">-- A bit yukky to call initIfaceTcRn here</span><span>
</span><span id="line-250"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-252"></span><span>    </span><span id="local-6989586621681315990"><span class="annot"><span class="annottext">tc_name :: Name
</span><a href="#local-6989586621681315990"><span class="hs-identifier hs-var hs-var">tc_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Name
</span><a href="GHC.Core.TyCon.html#tyConName"><span class="hs-identifier hs-var">tyConName</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681315991"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="annot"><a href="GHC.Iface.Load.html#ifCheckWiredInThing"><span class="hs-identifier hs-type">ifCheckWiredInThing</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-255"></span><span class="hs-comment">-- Even though we are in an interface file, we want to make</span><span>
</span><span id="line-256"></span><span class="hs-comment">-- sure the instances of a wired-in thing are loaded (imagine f :: Double -&gt; Double)</span><span>
</span><span id="line-257"></span><span class="hs-comment">-- Ditto want to ensure that RULES are loaded too</span><span>
</span><span id="line-258"></span><span class="hs-comment">-- See Note [Loading instances for wired-in things]</span><span>
</span><span id="line-259"></span><span id="ifCheckWiredInThing"><span class="annot"><span class="annottext">ifCheckWiredInThing :: TyThing -&gt; IfL ()
</span><a href="GHC.Iface.Load.html#ifCheckWiredInThing"><span class="hs-identifier hs-var hs-var">ifCheckWiredInThing</span></a></span></span><span> </span><span id="local-6989586621681315985"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681315985"><span class="hs-identifier hs-var">thing</span></a></span></span><span>
</span><span id="line-260"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681315984"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315984"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfL (GenModule Unit)
</span><a href="GHC.Tc.Utils.Monad.html#getIfModule"><span class="hs-identifier hs-var">getIfModule</span></a></span><span>
</span><span id="line-261"></span><span>                </span><span class="hs-comment">-- Check whether we are typechecking the interface for this</span><span>
</span><span id="line-262"></span><span>                </span><span class="hs-comment">-- very module.  E.g when compiling the base library in --make mode</span><span>
</span><span id="line-263"></span><span>                </span><span class="hs-comment">-- we may typecheck GHC.Base.hi. At that point, GHC.Base is not in</span><span>
</span><span id="line-264"></span><span>                </span><span class="hs-comment">-- the HPT, so without the test we'll demand-load it into the PIT!</span><span>
</span><span id="line-265"></span><span>                </span><span class="hs-comment">-- C.f. the same test in checkWiredInTyCon above</span><span>
</span><span id="line-266"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315982"><span class="annot"><span class="annottext">name :: Name
</span><a href="#local-6989586621681315982"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681315985"><span class="hs-identifier hs-var">thing</span></a></span><span>
</span><span id="line-267"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isExternalName</span><span> </span><span class="hs-identifier">name</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">name</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>          </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyThing -&gt; Bool
</span><a href="GHC.Iface.Load.html#needWiredInHomeIface"><span class="hs-identifier hs-var">needWiredInHomeIface</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681315985"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315984"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; GenModule Unit
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315982"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall lcl. Name -&gt; IfM lcl ()
</span><a href="GHC.Iface.Load.html#loadWiredInHomeIface"><span class="hs-identifier hs-var">loadWiredInHomeIface</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315982"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span class="annot"><a href="GHC.Iface.Load.html#needWiredInHomeIface"><span class="hs-identifier hs-type">needWiredInHomeIface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-272"></span><span class="hs-comment">-- Only for TyCons; see Note [Loading instances for wired-in things]</span><span>
</span><span id="line-273"></span><span id="needWiredInHomeIface"><span class="annot"><span class="annottext">needWiredInHomeIface :: TyThing -&gt; Bool
</span><a href="GHC.Iface.Load.html#needWiredInHomeIface"><span class="hs-identifier hs-var hs-var">needWiredInHomeIface</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.TyThing.html#ATyCon"><span class="hs-identifier hs-type">ATyCon</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-274"></span><span class="annot"><a href="GHC.Iface.Load.html#needWiredInHomeIface"><span class="hs-identifier hs-var">needWiredInHomeIface</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
        loadSrcInterface, loadOrphanModules, loadInterfaceForName

                These three are called from TcM-land
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span class="hs-comment">-- | Load the interface corresponding to an @import@ directive in</span><span>
</span><span id="line-288"></span><span class="hs-comment">-- source code.  On a failure, fail in the monad with an error message.</span><span>
</span><span id="line-289"></span><span class="annot"><a href="GHC.Iface.Load.html#loadSrcInterface"><span class="hs-identifier hs-type">loadSrcInterface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-290"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-291"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#IsBootInterface"><span class="hs-identifier hs-type">IsBootInterface</span></a></span><span>     </span><span class="hs-comment">-- {-# SOURCE #-} ?</span><span>
</span><span id="line-292"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span>    </span><span class="hs-comment">-- &quot;package&quot;, if any</span><span>
</span><span id="line-293"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span id="loadSrcInterface"><span class="annot"><span class="annottext">loadSrcInterface :: SDoc
-&gt; ModuleName
-&gt; IsBootInterface
-&gt; Maybe FastString
-&gt; RnM ModIface
</span><a href="GHC.Iface.Load.html#loadSrcInterface"><span class="hs-identifier hs-var hs-var">loadSrcInterface</span></a></span></span><span> </span><span id="local-6989586621681315980"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315980"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681315979"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315979"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621681315978"><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315978"><span class="hs-identifier hs-var">want_boot</span></a></span></span><span> </span><span id="local-6989586621681315977"><span class="annot"><span class="annottext">Maybe FastString
</span><a href="#local-6989586621681315977"><span class="hs-identifier hs-var">maybe_pkg</span></a></span></span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681315976"><span class="annot"><span class="annottext">MaybeErr SDoc ModIface
</span><a href="#local-6989586621681315976"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SDoc
-&gt; ModuleName
-&gt; IsBootInterface
-&gt; Maybe FastString
-&gt; RnM (MaybeErr SDoc ModIface)
</span><a href="GHC.Iface.Load.html#loadSrcInterface_maybe"><span class="hs-identifier hs-var">loadSrcInterface_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315980"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315979"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315978"><span class="hs-identifier hs-var">want_boot</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe FastString
</span><a href="#local-6989586621681315977"><span class="hs-identifier hs-var">maybe_pkg</span></a></span><span>
</span><span id="line-297"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MaybeErr SDoc ModIface
</span><a href="#local-6989586621681315976"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-298"></span><span>           </span><span class="annot"><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-type">Failed</span></a></span><span> </span><span id="local-6989586621681315975"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315975"><span class="hs-identifier hs-var">err</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#failWithTc"><span class="hs-identifier hs-var">failWithTc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315975"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-299"></span><span>           </span><span class="annot"><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-type">Succeeded</span></a></span><span> </span><span id="local-6989586621681315973"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315973"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315973"><span class="hs-identifier hs-var">iface</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span class="hs-comment">-- | Like 'loadSrcInterface', but returns a 'MaybeErr'.</span><span>
</span><span id="line-302"></span><span class="annot"><a href="GHC.Iface.Load.html#loadSrcInterface_maybe"><span class="hs-identifier hs-type">loadSrcInterface_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-303"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-304"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#IsBootInterface"><span class="hs-identifier hs-type">IsBootInterface</span></a></span><span>     </span><span class="hs-comment">-- {-# SOURCE #-} ?</span><span>
</span><span id="line-305"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span>    </span><span class="hs-comment">-- &quot;package&quot;, if any</span><span>
</span><span id="line-306"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Maybe.html#MaybeErr"><span class="hs-identifier hs-type">MaybeErr</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span id="loadSrcInterface_maybe"><span class="annot"><span class="annottext">loadSrcInterface_maybe :: SDoc
-&gt; ModuleName
-&gt; IsBootInterface
-&gt; Maybe FastString
-&gt; RnM (MaybeErr SDoc ModIface)
</span><a href="GHC.Iface.Load.html#loadSrcInterface_maybe"><span class="hs-identifier hs-var hs-var">loadSrcInterface_maybe</span></a></span></span><span> </span><span id="local-6989586621681315972"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315972"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681315971"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315971"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621681315970"><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315970"><span class="hs-identifier hs-var">want_boot</span></a></span></span><span> </span><span id="local-6989586621681315969"><span class="annot"><span class="annottext">Maybe FastString
</span><a href="#local-6989586621681315969"><span class="hs-identifier hs-var">maybe_pkg</span></a></span></span><span>
</span><span id="line-309"></span><span>  </span><span class="hs-comment">-- We must first find which Module this import refers to.  This involves</span><span>
</span><span id="line-310"></span><span>  </span><span class="hs-comment">-- calling the Finder, which as a side effect will search the filesystem</span><span>
</span><span id="line-311"></span><span>  </span><span class="hs-comment">-- and create a ModLocation.  If successful, loadIface will read the</span><span>
</span><span id="line-312"></span><span>  </span><span class="hs-comment">-- interface; it will call the Finder again, but the ModLocation will be</span><span>
</span><span id="line-313"></span><span>  </span><span class="hs-comment">-- cached from the first search.</span><span>
</span><span id="line-314"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681315968"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315968"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl HscEnv
</span><a href="GHC.Tc.Utils.Monad.html#getTopEnv"><span class="hs-identifier hs-var">getTopEnv</span></a></span><span>
</span><span id="line-315"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681315967"><span class="annot"><span class="annottext">FindResult
</span><a href="#local-6989586621681315967"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.3.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; ModuleName -&gt; Maybe FastString -&gt; IO FindResult
</span><a href="GHC.Unit.Finder.html#findImportedModule"><span class="hs-identifier hs-var">findImportedModule</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315968"><span class="hs-identifier hs-var">hsc_env</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315971"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe FastString
</span><a href="#local-6989586621681315969"><span class="hs-identifier hs-var">maybe_pkg</span></a></span><span>
</span><span id="line-316"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FindResult
</span><a href="#local-6989586621681315967"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-317"></span><span>           </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#Found"><span class="hs-identifier hs-type">Found</span></a></span><span> </span><span class="annot"><span class="annottext">ModLocation
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681315964"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315964"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. IfG a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#initIfaceTcRn"><span class="hs-identifier hs-var">initIfaceTcRn</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall lcl.
SDoc
-&gt; GenModule Unit -&gt; WhereFrom -&gt; IfM lcl (MaybeErr SDoc ModIface)
</span><a href="GHC.Iface.Load.html#loadInterface"><span class="hs-identifier hs-var">loadInterface</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315972"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315964"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IsBootInterface -&gt; WhereFrom
</span><a href="GHC.Tc.Types.html#ImportByUser"><span class="hs-identifier hs-var">ImportByUser</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315970"><span class="hs-identifier hs-var">want_boot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-318"></span><span>           </span><span class="hs-comment">-- TODO: Make sure this error message is good</span><span>
</span><span id="line-319"></span><span>           </span><span id="local-6989586621681315962"><span class="annot"><span class="annottext">FindResult
</span><a href="#local-6989586621681315962"><span class="hs-identifier hs-var">err</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. err -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-var">Failed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; ModuleName -&gt; FindResult -&gt; SDoc
</span><a href="GHC.Iface.Load.html#cannotFindModule"><span class="hs-identifier hs-var">cannotFindModule</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315968"><span class="hs-identifier hs-var">hsc_env</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315971"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">FindResult
</span><a href="#local-6989586621681315962"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="hs-comment">-- | Load interface directly for a fully qualified 'Module'.  (This is a fairly</span><span>
</span><span id="line-322"></span><span class="hs-comment">-- rare operation, but in particular it is used to load orphan modules</span><span>
</span><span id="line-323"></span><span class="hs-comment">-- in order to pull their instances into the global package table and to</span><span>
</span><span id="line-324"></span><span class="hs-comment">-- handle some operations in GHCi).</span><span>
</span><span id="line-325"></span><span class="annot"><a href="GHC.Iface.Load.html#loadModuleInterface"><span class="hs-identifier hs-type">loadModuleInterface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span>
</span><span id="line-326"></span><span id="loadModuleInterface"><span class="annot"><span class="annottext">loadModuleInterface :: SDoc -&gt; GenModule Unit -&gt; RnM ModIface
</span><a href="GHC.Iface.Load.html#loadModuleInterface"><span class="hs-identifier hs-var hs-var">loadModuleInterface</span></a></span></span><span> </span><span id="local-6989586621681315960"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315960"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681315959"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315959"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. IfG a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#initIfaceTcRn"><span class="hs-identifier hs-var">initIfaceTcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall lcl. SDoc -&gt; GenModule Unit -&gt; IfM lcl ModIface
</span><a href="GHC.Iface.Load.html#loadSysInterface"><span class="hs-identifier hs-var">loadSysInterface</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315960"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315959"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span class="hs-comment">-- | Load interfaces for a collection of modules.</span><span>
</span><span id="line-329"></span><span class="annot"><a href="GHC.Iface.Load.html#loadModuleInterfaces"><span class="hs-identifier hs-type">loadModuleInterfaces</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span id="loadModuleInterfaces"><span class="annot"><span class="annottext">loadModuleInterfaces :: SDoc -&gt; [GenModule Unit] -&gt; TcM ()
</span><a href="GHC.Iface.Load.html#loadModuleInterfaces"><span class="hs-identifier hs-var hs-var">loadModuleInterfaces</span></a></span></span><span> </span><span id="local-6989586621681315958"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315958"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681315957"><span class="annot"><span class="annottext">[GenModule Unit]
</span><a href="#local-6989586621681315957"><span class="hs-identifier hs-var">mods</span></a></span></span><span>
</span><span id="line-331"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[GenModule Unit]
</span><a href="#local-6989586621681315957"><span class="hs-identifier hs-var">mods</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. IfG a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#initIfaceTcRn"><span class="hs-identifier hs-var">initIfaceTcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit -&gt; IfM () ModIface
</span><a href="#local-6989586621681315954"><span class="hs-identifier hs-var">load</span></a></span><span> </span><span class="annot"><span class="annottext">[GenModule Unit]
</span><a href="#local-6989586621681315957"><span class="hs-identifier hs-var">mods</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-333"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-334"></span><span>    </span><span id="local-6989586621681315954"><span class="annot"><span class="annottext">load :: GenModule Unit -&gt; IfM () ModIface
</span><a href="#local-6989586621681315954"><span class="hs-identifier hs-var hs-var">load</span></a></span></span><span> </span><span id="local-6989586621681315953"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315953"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall lcl. SDoc -&gt; GenModule Unit -&gt; IfM lcl ModIface
</span><a href="GHC.Iface.Load.html#loadSysInterface"><span class="hs-identifier hs-var">loadSysInterface</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315958"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315953"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315953"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span class="hs-comment">-- | Loads the interface for a given Name.</span><span>
</span><span id="line-337"></span><span class="hs-comment">-- Should only be called for an imported name;</span><span>
</span><span id="line-338"></span><span class="hs-comment">-- otherwise loadSysInterface may not find the interface</span><span>
</span><span id="line-339"></span><span class="annot"><a href="GHC.Iface.Load.html#loadInterfaceForName"><span class="hs-identifier hs-type">loadInterfaceForName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcRn"><span class="hs-identifier hs-type">TcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span>
</span><span id="line-340"></span><span id="loadInterfaceForName"><span class="annot"><span class="annottext">loadInterfaceForName :: SDoc -&gt; Name -&gt; RnM ModIface
</span><a href="GHC.Iface.Load.html#loadInterfaceForName"><span class="hs-identifier hs-var hs-var">loadInterfaceForName</span></a></span></span><span> </span><span id="local-6989586621681315951"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315951"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681315950"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315950"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-341"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="GHC.Utils.Misc.html#debugIsOn"><span class="hs-identifier hs-var">debugIsOn</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>  </span><span class="hs-comment">-- Check pre-condition</span><span>
</span><span id="line-342"></span><span>         </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681315949"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315949"><span class="hs-identifier hs-var">this_mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasModule m =&gt; m (GenModule Unit)
</span><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier hs-var">getModule</span></a></span><span>
</span><span id="line-343"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="hs-identifier">MASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">nameIsLocalOrFrom</span><span> </span><span class="hs-identifier">this_mod</span><span> </span><span class="hs-identifier">name</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">name</span><span> </span><span class="hs-operator">&lt;+&gt;</span><span> </span><span class="hs-identifier">parens</span><span> </span><span class="hs-identifier">doc</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-344"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isExternalName</span><span> </span><span class="hs-identifier">name</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">name</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-345"></span><span>        </span><span class="annot"><span class="annottext">forall a. IfG a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#initIfaceTcRn"><span class="hs-identifier hs-var">initIfaceTcRn</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall lcl. SDoc -&gt; GenModule Unit -&gt; IfM lcl ModIface
</span><a href="GHC.Iface.Load.html#loadSysInterface"><span class="hs-identifier hs-var">loadSysInterface</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315951"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; GenModule Unit
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315950"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span class="hs-comment">-- | Only loads the interface for external non-local names.</span><span>
</span><span id="line-348"></span><span class="annot"><a href="GHC.Iface.Load.html#loadInterfaceForNameMaybe"><span class="hs-identifier hs-type">loadInterfaceForNameMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcRn"><span class="hs-identifier hs-type">TcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-349"></span><span id="loadInterfaceForNameMaybe"><span class="annot"><span class="annottext">loadInterfaceForNameMaybe :: SDoc -&gt; Name -&gt; TcRn (Maybe ModIface)
</span><a href="GHC.Iface.Load.html#loadInterfaceForNameMaybe"><span class="hs-identifier hs-var hs-var">loadInterfaceForNameMaybe</span></a></span></span><span> </span><span id="local-6989586621681315947"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315947"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681315946"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315946"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-350"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681315945"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315945"><span class="hs-identifier hs-var">this_mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasModule m =&gt; m (GenModule Unit)
</span><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier hs-var">getModule</span></a></span><span>
</span><span id="line-351"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">GenModule Unit -&gt; Name -&gt; Bool
</span><a href="GHC.Types.Name.html#nameIsLocalOrFrom"><span class="hs-identifier hs-var">nameIsLocalOrFrom</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315945"><span class="hs-identifier hs-var">this_mod</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315946"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isExternalName"><span class="hs-identifier hs-var">isExternalName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315946"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-353"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. IfG a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#initIfaceTcRn"><span class="hs-identifier hs-var">initIfaceTcRn</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall lcl. SDoc -&gt; GenModule Unit -&gt; IfM lcl ModIface
</span><a href="GHC.Iface.Load.html#loadSysInterface"><span class="hs-identifier hs-var">loadSysInterface</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315947"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; GenModule Unit
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315946"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-354"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="hs-comment">-- | Loads the interface for a given Module.</span><span>
</span><span id="line-357"></span><span class="annot"><a href="GHC.Iface.Load.html#loadInterfaceForModule"><span class="hs-identifier hs-type">loadInterfaceForModule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcRn"><span class="hs-identifier hs-type">TcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span>
</span><span id="line-358"></span><span id="loadInterfaceForModule"><span class="annot"><span class="annottext">loadInterfaceForModule :: SDoc -&gt; GenModule Unit -&gt; RnM ModIface
</span><a href="GHC.Iface.Load.html#loadInterfaceForModule"><span class="hs-identifier hs-var hs-var">loadInterfaceForModule</span></a></span></span><span> </span><span id="local-6989586621681315942"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315942"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681315941"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315941"><span class="hs-identifier hs-var">m</span></a></span></span><span>
</span><span id="line-359"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-360"></span><span>    </span><span class="hs-comment">-- Should not be called with this module</span><span>
</span><span id="line-361"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="GHC.Utils.Misc.html#debugIsOn"><span class="hs-identifier hs-var">debugIsOn</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-362"></span><span>      </span><span id="local-6989586621681315940"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315940"><span class="hs-identifier hs-var">this_mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasModule m =&gt; m (GenModule Unit)
</span><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier hs-var">getModule</span></a></span><span>
</span><span id="line-363"></span><span>      </span><span class="hs-identifier">MASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">this_mod</span><span> </span><span class="hs-operator">/=</span><span> </span><span class="hs-identifier">m</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-operator">&lt;+&gt;</span><span> </span><span class="hs-identifier">parens</span><span> </span><span class="hs-identifier">doc</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span>    </span><span class="annot"><span class="annottext">forall a. IfG a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#initIfaceTcRn"><span class="hs-identifier hs-var">initIfaceTcRn</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall lcl. SDoc -&gt; GenModule Unit -&gt; IfM lcl ModIface
</span><a href="GHC.Iface.Load.html#loadSysInterface"><span class="hs-identifier hs-var">loadSysInterface</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315942"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315941"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span class="hs-comment">{-
*********************************************************
*                                                      *
                loadInterface

        The main function to load an interface
        for an imported module, and put it in
        the External Package State
*                                                      *
*********************************************************
-}</span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span class="hs-comment">-- | An 'IfM' function to load the home interface for a wired-in thing,</span><span>
</span><span id="line-379"></span><span class="hs-comment">-- so that we're sure that we see its instance declarations and rules</span><span>
</span><span id="line-380"></span><span class="hs-comment">-- See Note [Loading instances for wired-in things]</span><span>
</span><span id="line-381"></span><span id="local-6989586621681316636"><span class="annot"><a href="GHC.Iface.Load.html#loadWiredInHomeIface"><span class="hs-identifier hs-type">loadWiredInHomeIface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfM"><span class="hs-identifier hs-type">IfM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316636"><span class="hs-identifier hs-type">lcl</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-382"></span><span id="loadWiredInHomeIface"><span class="annot"><span class="annottext">loadWiredInHomeIface :: forall lcl. Name -&gt; IfM lcl ()
</span><a href="GHC.Iface.Load.html#loadWiredInHomeIface"><span class="hs-identifier hs-var hs-var">loadWiredInHomeIface</span></a></span></span><span> </span><span id="local-6989586621681315935"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315935"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-383"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isWiredInName</span><span> </span><span class="hs-identifier">name</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-384"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">ModIface
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall lcl. SDoc -&gt; GenModule Unit -&gt; IfM lcl ModIface
</span><a href="GHC.Iface.Load.html#loadSysInterface"><span class="hs-identifier hs-var">loadSysInterface</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315934"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; GenModule Unit
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315935"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-386"></span><span>    </span><span id="local-6989586621681315934"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621681315934"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Need home interface for wired-in thing&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315935"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-387"></span><span>
</span><span id="line-388"></span><span class="hs-comment">------------------</span><span>
</span><span id="line-389"></span><span class="hs-comment">-- | Loads a system interface and throws an exception if it fails</span><span>
</span><span id="line-390"></span><span id="local-6989586621681316601"><span class="annot"><a href="GHC.Iface.Load.html#loadSysInterface"><span class="hs-identifier hs-type">loadSysInterface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfM"><span class="hs-identifier hs-type">IfM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316601"><span class="hs-identifier hs-type">lcl</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span></span><span>
</span><span id="line-391"></span><span id="loadSysInterface"><span class="annot"><span class="annottext">loadSysInterface :: forall lcl. SDoc -&gt; GenModule Unit -&gt; IfM lcl ModIface
</span><a href="GHC.Iface.Load.html#loadSysInterface"><span class="hs-identifier hs-var hs-var">loadSysInterface</span></a></span></span><span> </span><span id="local-6989586621681315933"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315933"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681315932"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315932"><span class="hs-identifier hs-var">mod_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall lcl. SDoc -&gt; GenModule Unit -&gt; WhereFrom -&gt; IfM lcl ModIface
</span><a href="GHC.Iface.Load.html#loadInterfaceWithException"><span class="hs-identifier hs-var">loadInterfaceWithException</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315933"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315932"><span class="hs-identifier hs-var">mod_name</span></a></span><span> </span><span class="annot"><span class="annottext">WhereFrom
</span><a href="GHC.Tc.Types.html#ImportBySystem"><span class="hs-identifier hs-var">ImportBySystem</span></a></span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span class="hs-comment">------------------</span><span>
</span><span id="line-394"></span><span class="hs-comment">-- | Loads a user interface and throws an exception if it fails. The first parameter indicates</span><span>
</span><span id="line-395"></span><span class="hs-comment">-- whether we should import the boot variant of the module</span><span>
</span><span id="line-396"></span><span id="local-6989586621681316588"><span class="annot"><a href="GHC.Iface.Load.html#loadUserInterface"><span class="hs-identifier hs-type">loadUserInterface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#IsBootInterface"><span class="hs-identifier hs-type">IsBootInterface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfM"><span class="hs-identifier hs-type">IfM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316588"><span class="hs-identifier hs-type">lcl</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span></span><span>
</span><span id="line-397"></span><span id="loadUserInterface"><span class="annot"><span class="annottext">loadUserInterface :: forall lcl.
IsBootInterface -&gt; SDoc -&gt; GenModule Unit -&gt; IfM lcl ModIface
</span><a href="GHC.Iface.Load.html#loadUserInterface"><span class="hs-identifier hs-var hs-var">loadUserInterface</span></a></span></span><span> </span><span id="local-6989586621681315930"><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315930"><span class="hs-identifier hs-var">is_boot</span></a></span></span><span> </span><span id="local-6989586621681315929"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315929"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681315928"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315928"><span class="hs-identifier hs-var">mod_name</span></a></span></span><span>
</span><span id="line-398"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall lcl. SDoc -&gt; GenModule Unit -&gt; WhereFrom -&gt; IfM lcl ModIface
</span><a href="GHC.Iface.Load.html#loadInterfaceWithException"><span class="hs-identifier hs-var">loadInterfaceWithException</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315929"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315928"><span class="hs-identifier hs-var">mod_name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IsBootInterface -&gt; WhereFrom
</span><a href="GHC.Tc.Types.html#ImportByUser"><span class="hs-identifier hs-var">ImportByUser</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315930"><span class="hs-identifier hs-var">is_boot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span id="local-6989586621681315927"><span class="annot"><a href="GHC.Iface.Load.html#loadPluginInterface"><span class="hs-identifier hs-type">loadPluginInterface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfM"><span class="hs-identifier hs-type">IfM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681315927"><span class="hs-identifier hs-type">lcl</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span></span><span>
</span><span id="line-401"></span><span id="loadPluginInterface"><span class="annot"><span class="annottext">loadPluginInterface :: forall lcl. SDoc -&gt; GenModule Unit -&gt; IfM lcl ModIface
</span><a href="GHC.Iface.Load.html#loadPluginInterface"><span class="hs-identifier hs-var hs-var">loadPluginInterface</span></a></span></span><span> </span><span id="local-6989586621681315926"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315926"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681315925"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315925"><span class="hs-identifier hs-var">mod_name</span></a></span></span><span>
</span><span id="line-402"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall lcl. SDoc -&gt; GenModule Unit -&gt; WhereFrom -&gt; IfM lcl ModIface
</span><a href="GHC.Iface.Load.html#loadInterfaceWithException"><span class="hs-identifier hs-var">loadInterfaceWithException</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315926"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315925"><span class="hs-identifier hs-var">mod_name</span></a></span><span> </span><span class="annot"><span class="annottext">WhereFrom
</span><a href="GHC.Tc.Types.html#ImportByPlugin"><span class="hs-identifier hs-var">ImportByPlugin</span></a></span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span class="hs-comment">------------------</span><span>
</span><span id="line-405"></span><span class="hs-comment">-- | A wrapper for 'loadInterface' that throws an exception if it fails</span><span>
</span><span id="line-406"></span><span id="local-6989586621681316589"><span class="annot"><a href="GHC.Iface.Load.html#loadInterfaceWithException"><span class="hs-identifier hs-type">loadInterfaceWithException</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#WhereFrom"><span class="hs-identifier hs-type">WhereFrom</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfM"><span class="hs-identifier hs-type">IfM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316589"><span class="hs-identifier hs-type">lcl</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span></span><span>
</span><span id="line-407"></span><span id="loadInterfaceWithException"><span class="annot"><span class="annottext">loadInterfaceWithException :: forall lcl. SDoc -&gt; GenModule Unit -&gt; WhereFrom -&gt; IfM lcl ModIface
</span><a href="GHC.Iface.Load.html#loadInterfaceWithException"><span class="hs-identifier hs-var hs-var">loadInterfaceWithException</span></a></span></span><span> </span><span id="local-6989586621681315923"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315923"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681315922"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315922"><span class="hs-identifier hs-var">mod_name</span></a></span></span><span> </span><span id="local-6989586621681315921"><span class="annot"><span class="annottext">WhereFrom
</span><a href="#local-6989586621681315921"><span class="hs-identifier hs-var">where_from</span></a></span></span><span>
</span><span id="line-408"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl a.
TcRnIf gbl lcl (MaybeErr SDoc a) -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#withException"><span class="hs-identifier hs-var">withException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall lcl.
SDoc
-&gt; GenModule Unit -&gt; WhereFrom -&gt; IfM lcl (MaybeErr SDoc ModIface)
</span><a href="GHC.Iface.Load.html#loadInterface"><span class="hs-identifier hs-var">loadInterface</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315923"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315922"><span class="hs-identifier hs-var">mod_name</span></a></span><span> </span><span class="annot"><span class="annottext">WhereFrom
</span><a href="#local-6989586621681315921"><span class="hs-identifier hs-var">where_from</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-409"></span><span>
</span><span id="line-410"></span><span class="hs-comment">------------------</span><span>
</span><span id="line-411"></span><span id="local-6989586621681316625"><span class="annot"><a href="GHC.Iface.Load.html#loadInterface"><span class="hs-identifier hs-type">loadInterface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#WhereFrom"><span class="hs-identifier hs-type">WhereFrom</span></a></span><span>
</span><span id="line-412"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfM"><span class="hs-identifier hs-type">IfM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316625"><span class="hs-identifier hs-type">lcl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Maybe.html#MaybeErr"><span class="hs-identifier hs-type">MaybeErr</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-413"></span><span>
</span><span id="line-414"></span><span class="hs-comment">-- loadInterface looks in both the HPT and PIT for the required interface</span><span>
</span><span id="line-415"></span><span class="hs-comment">-- If not found, it loads it, and puts it in the PIT (always).</span><span>
</span><span id="line-416"></span><span>
</span><span id="line-417"></span><span class="hs-comment">-- If it can't find a suitable interface file, we</span><span>
</span><span id="line-418"></span><span class="hs-comment">--      a) modify the PackageIfaceTable to have an empty entry</span><span>
</span><span id="line-419"></span><span class="hs-comment">--              (to avoid repeated complaints)</span><span>
</span><span id="line-420"></span><span class="hs-comment">--      b) return (Left message)</span><span>
</span><span id="line-421"></span><span class="hs-comment">--</span><span>
</span><span id="line-422"></span><span class="hs-comment">-- It's not necessarily an error for there not to be an interface</span><span>
</span><span id="line-423"></span><span class="hs-comment">-- file -- perhaps the module has changed, and that interface</span><span>
</span><span id="line-424"></span><span class="hs-comment">-- is no longer used</span><span>
</span><span id="line-425"></span><span>
</span><span id="line-426"></span><span id="loadInterface"><span class="annot"><span class="annottext">loadInterface :: forall lcl.
SDoc
-&gt; GenModule Unit -&gt; WhereFrom -&gt; IfM lcl (MaybeErr SDoc ModIface)
</span><a href="GHC.Iface.Load.html#loadInterface"><span class="hs-identifier hs-var hs-var">loadInterface</span></a></span></span><span> </span><span id="local-6989586621681315866"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315866"><span class="hs-identifier hs-var">doc_str</span></a></span></span><span> </span><span id="local-6989586621681315865"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315865"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621681315864"><span class="annot"><span class="annottext">WhereFrom
</span><a href="#local-6989586621681315864"><span class="hs-identifier hs-var">from</span></a></span></span><span>
</span><span id="line-427"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall u. GenModule (GenUnit u) -&gt; Bool
</span><a href="GHC.Unit.Module.html#isHoleModule"><span class="hs-identifier hs-var">isHoleModule</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315865"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-428"></span><span>  </span><span class="hs-comment">-- Hole modules get special treatment</span><span>
</span><span id="line-429"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681315862"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315862"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl HscEnv
</span><a href="GHC.Tc.Utils.Monad.html#getTopEnv"><span class="hs-identifier hs-var">getTopEnv</span></a></span><span>
</span><span id="line-430"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315861"><span class="annot"><span class="annottext">home_unit :: HomeUnit
</span><a href="#local-6989586621681315861"><span class="hs-identifier hs-var hs-var">home_unit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; HomeUnit
</span><a href="GHC.Driver.Env.html#hsc_home_unit"><span class="hs-identifier hs-var">hsc_home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315862"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-431"></span><span>       </span><span class="hs-comment">-- Redo search for our local hole module</span><span>
</span><span id="line-432"></span><span>       </span><span class="annot"><span class="annottext">forall lcl.
SDoc
-&gt; GenModule Unit -&gt; WhereFrom -&gt; IfM lcl (MaybeErr SDoc ModIface)
</span><a href="GHC.Iface.Load.html#loadInterface"><span class="hs-identifier hs-var">loadInterface</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315866"><span class="hs-identifier hs-var">doc_str</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeUnit -&gt; ModuleName -&gt; GenModule Unit
</span><a href="GHC.Unit.Home.html#mkHomeModule"><span class="hs-identifier hs-var">mkHomeModule</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621681315861"><span class="hs-identifier hs-var">home_unit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315865"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WhereFrom
</span><a href="#local-6989586621681315864"><span class="hs-identifier hs-var">from</span></a></span><span>
</span><span id="line-433"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-434"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-435"></span><span>    </span><span id="local-6989586621681315857"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681315857"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasLogger m =&gt; m Logger
</span><a href="GHC.Utils.Logger.html#getLogger"><span class="hs-identifier hs-var">getLogger</span></a></span><span>
</span><span id="line-436"></span><span>    </span><span id="local-6989586621681315855"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315855"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-437"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Logger -&gt; DynFlags -&gt; SDoc -&gt; (a -&gt; ()) -&gt; m a -&gt; m a
</span><a href="GHC.Utils.Error.html#withTimingSilent"><span class="hs-identifier hs-var">withTimingSilent</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681315857"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315855"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;loading interface&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-438"></span><span>        </span><span class="hs-special">{</span><span>       </span><span class="hs-comment">-- Read the state</span><span>
</span><span id="line-439"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681315852"><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315852"><span class="hs-identifier hs-var">eps</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681315851"><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621681315851"><span class="hs-identifier hs-var">hpt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl.
TcRnIf gbl lcl (ExternalPackageState, HomePackageTable)
</span><a href="GHC.Tc.Utils.Monad.html#getEpsAndHpt"><span class="hs-identifier hs-var">getEpsAndHpt</span></a></span><span>
</span><span id="line-440"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681315849"><span class="annot"><span class="annottext">IfGblEnv
</span><a href="#local-6989586621681315849"><span class="hs-identifier hs-var">gbl_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl gbl
</span><a href="GHC.Tc.Utils.Monad.html#getGblEnv"><span class="hs-identifier hs-var">getGblEnv</span></a></span><span>
</span><span id="line-441"></span><span>
</span><span id="line-442"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Considering whether to load&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315865"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">WhereFrom
</span><a href="#local-6989586621681315864"><span class="hs-identifier hs-var">from</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-443"></span><span>
</span><span id="line-444"></span><span>                </span><span class="hs-comment">-- Check whether we have the interface already</span><span>
</span><span id="line-445"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681315847"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315847"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl HscEnv
</span><a href="GHC.Tc.Utils.Monad.html#getTopEnv"><span class="hs-identifier hs-var">getTopEnv</span></a></span><span>
</span><span id="line-446"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315846"><span class="annot"><span class="annottext">home_unit :: HomeUnit
</span><a href="#local-6989586621681315846"><span class="hs-identifier hs-var hs-var">home_unit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; HomeUnit
</span><a href="GHC.Driver.Env.html#hsc_home_unit"><span class="hs-identifier hs-var">hsc_home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315847"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-447"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HomePackageTable
-&gt; PackageIfaceTable -&gt; GenModule Unit -&gt; Maybe ModIface
</span><a href="GHC.Driver.Env.html#lookupIfaceByModule"><span class="hs-identifier hs-var">lookupIfaceByModule</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621681315851"><span class="hs-identifier hs-var">hpt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageIfaceTable
</span><a href="GHC.Unit.External.html#eps_PIT"><span class="hs-identifier hs-var">eps_PIT</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315852"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315865"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-448"></span><span>            </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681315843"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315843"><span class="hs-identifier hs-var">iface</span></a></span></span><span>
</span><span id="line-449"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315843"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">;</span><span>   </span><span class="hs-comment">-- Already loaded</span><span>
</span><span id="line-450"></span><span>                        </span><span class="hs-comment">-- The (src_imp == mi_boot iface) test checks that the already-loaded</span><span>
</span><span id="line-451"></span><span>                        </span><span class="hs-comment">-- interface isn't a boot iface.  This can conceivably happen,</span><span>
</span><span id="line-452"></span><span>                        </span><span class="hs-comment">-- if an earlier import had a before we got to real imports.   I think.</span><span>
</span><span id="line-453"></span><span>            </span><span class="annot"><span class="annottext">Maybe ModIface
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span>        </span><span class="hs-comment">-- READ THE MODULE IN</span><span>
</span><span id="line-456"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681315842"><span class="annot"><span class="annottext">MaybeErr SDoc (ModIface, String)
</span><a href="#local-6989586621681315842"><span class="hs-identifier hs-var">read_result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeUnit
-&gt; ExternalPackageState
-&gt; GenModule Unit
-&gt; WhereFrom
-&gt; MaybeErr SDoc IsBootInterface
</span><a href="GHC.Iface.Load.html#wantHiBootFile"><span class="hs-identifier hs-var">wantHiBootFile</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621681315846"><span class="hs-identifier hs-var">home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315852"><span class="hs-identifier hs-var">eps</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315865"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">WhereFrom
</span><a href="#local-6989586621681315864"><span class="hs-identifier hs-var">from</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-457"></span><span>                           </span><span class="annot"><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-type">Failed</span></a></span><span> </span><span id="local-6989586621681315840"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315840"><span class="hs-identifier hs-var">err</span></a></span></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. err -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-var">Failed</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315840"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span>                           </span><span class="annot"><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-type">Succeeded</span></a></span><span> </span><span id="local-6989586621681315839"><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315839"><span class="hs-identifier hs-var">hi_boot_file</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl.
SDoc
-&gt; IsBootInterface
-&gt; GenModule Unit
-&gt; TcRnIf gbl lcl (MaybeErr SDoc (ModIface, String))
</span><a href="GHC.Iface.Load.html#computeInterface"><span class="hs-identifier hs-var">computeInterface</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315866"><span class="hs-identifier hs-var">doc_str</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315839"><span class="hs-identifier hs-var">hi_boot_file</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315865"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-459"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MaybeErr SDoc (ModIface, String)
</span><a href="#local-6989586621681315842"><span class="hs-identifier hs-var">read_result</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-460"></span><span>            </span><span class="annot"><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-type">Failed</span></a></span><span> </span><span id="local-6989586621681315837"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315837"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-461"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315836"><span class="annot"><span class="annottext">fake_iface :: ModIface
</span><a href="#local-6989586621681315836"><span class="hs-identifier hs-var hs-var">fake_iface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenModule Unit -&gt; ModIface
</span><a href="GHC.Unit.Module.ModIface.html#emptyFullModIface"><span class="hs-identifier hs-var">emptyFullModIface</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315865"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-462"></span><span>
</span><span id="line-463"></span><span>                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl.
(ExternalPackageState -&gt; ExternalPackageState) -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#updateEps_"><span class="hs-identifier hs-var">updateEps_</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681315833"><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315833"><span class="hs-identifier hs-var">eps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-464"></span><span>                        </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315833"><span class="hs-identifier hs-var">eps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eps_PIT :: PackageIfaceTable
</span><a href="GHC.Unit.External.html#eps_PIT"><span class="hs-identifier hs-var">eps_PIT</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. ModuleEnv a -&gt; GenModule Unit -&gt; a -&gt; ModuleEnv a
</span><a href="GHC.Unit.Module.Env.html#extendModuleEnv"><span class="hs-identifier hs-var">extendModuleEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageIfaceTable
</span><a href="GHC.Unit.External.html#eps_PIT"><span class="hs-identifier hs-var">eps_PIT</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315833"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; GenModule Unit
</span><a href="GHC.Unit.Module.ModIface.html#mi_module"><span class="hs-identifier hs-var">mi_module</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315836"><span class="hs-identifier hs-var">fake_iface</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315836"><span class="hs-identifier hs-var">fake_iface</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-465"></span><span>                        </span><span class="hs-comment">-- Not found, so add an empty iface to</span><span>
</span><span id="line-466"></span><span>                        </span><span class="hs-comment">-- the EPS map so that we don't look again</span><span>
</span><span id="line-467"></span><span>
</span><span id="line-468"></span><span>                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. err -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-var">Failed</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315837"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-469"></span><span>
</span><span id="line-470"></span><span>        </span><span class="hs-comment">-- Found and parsed!</span><span>
</span><span id="line-471"></span><span>        </span><span class="hs-comment">-- We used to have a sanity check here that looked for:</span><span>
</span><span id="line-472"></span><span>        </span><span class="hs-comment">--  * System importing ..</span><span>
</span><span id="line-473"></span><span>        </span><span class="hs-comment">--  * a home package module ..</span><span>
</span><span id="line-474"></span><span>        </span><span class="hs-comment">--  * that we know nothing about (mb_dep == Nothing)!</span><span>
</span><span id="line-475"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-476"></span><span>        </span><span class="hs-comment">-- But this is no longer valid because thNameToGhcName allows users to</span><span>
</span><span id="line-477"></span><span>        </span><span class="hs-comment">-- cause the system to load arbitrary interfaces (by supplying an appropriate</span><span>
</span><span id="line-478"></span><span>        </span><span class="hs-comment">-- Template Haskell original-name).</span><span>
</span><span id="line-479"></span><span>            </span><span class="annot"><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-type">Succeeded</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315830"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315830"><span class="hs-identifier hs-var">iface</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681315829"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315829"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-480"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-481"></span><span>            </span><span id="local-6989586621681315828"><span class="annot"><span class="annottext">loc_doc :: SDoc
</span><a href="#local-6989586621681315828"><span class="hs-identifier hs-var hs-var">loc_doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315829"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-482"></span><span>        </span><span class="hs-keyword">in</span><span>
</span><span id="line-483"></span><span>        </span><span class="annot"><span class="annottext">forall a lcl.
GenModule Unit -&gt; SDoc -&gt; IsBootInterface -&gt; IfL a -&gt; IfM lcl a
</span><a href="GHC.Tc.Utils.Monad.html#initIfaceLcl"><span class="hs-identifier hs-var">initIfaceLcl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; GenModule Unit
</span><a href="GHC.Unit.Module.ModIface.html#mi_semantic_module"><span class="hs-identifier hs-var">mi_semantic_module</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315830"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315828"><span class="hs-identifier hs-var">loc_doc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface -&gt; IsBootInterface
</span><a href="GHC.Unit.Module.ModIface.html#mi_boot"><span class="hs-identifier hs-var">mi_boot</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315830"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-484"></span><span>
</span><span id="line-485"></span><span>        </span><span class="annot"><span class="annottext">forall a. IfL a -&gt; IfL a
</span><a href="GHC.Iface.Load.html#dontLeakTheHPT"><span class="hs-identifier hs-var">dontLeakTheHPT</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-486"></span><span>
</span><span id="line-487"></span><span>        </span><span class="hs-comment">--      Load the new ModIface into the External Package State</span><span>
</span><span id="line-488"></span><span>        </span><span class="hs-comment">-- Even home-package interfaces loaded by loadInterface</span><span>
</span><span id="line-489"></span><span>        </span><span class="hs-comment">--      (which only happens in OneShot mode; in Batch/Interactive</span><span>
</span><span id="line-490"></span><span>        </span><span class="hs-comment">--      mode, home-package modules are loaded one by one into the HPT)</span><span>
</span><span id="line-491"></span><span>        </span><span class="hs-comment">-- are put in the EPS.</span><span>
</span><span id="line-492"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-493"></span><span>        </span><span class="hs-comment">-- The main thing is to add the ModIface to the PIT, but</span><span>
</span><span id="line-494"></span><span>        </span><span class="hs-comment">-- we also take the</span><span>
</span><span id="line-495"></span><span>        </span><span class="hs-comment">--      IfaceDecls, IfaceClsInst, IfaceFamInst, IfaceRules,</span><span>
</span><span id="line-496"></span><span>        </span><span class="hs-comment">-- out of the ModIface and put them into the big EPS pools</span><span>
</span><span id="line-497"></span><span>
</span><span id="line-498"></span><span>        </span><span class="hs-comment">-- NB: *first* we do tcIfaceDecls, so that the provenance of all the locally-defined</span><span>
</span><span id="line-499"></span><span>        </span><span class="hs-comment">---    names is done correctly (notably, whether this is an .hi file or .hi-boot file).</span><span>
</span><span id="line-500"></span><span>        </span><span class="hs-comment">--     If we do loadExport first the wrong info gets into the cache (unless we</span><span>
</span><span id="line-501"></span><span>        </span><span class="hs-comment">--      explicitly tag each export which seems a bit of a bore)</span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681315823"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681315823"><span class="hs-identifier hs-var">ignore_prags</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. GeneralFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#goptM"><span class="hs-identifier hs-var">goptM</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_IgnoreInterfacePragmas"><span class="hs-identifier hs-var">Opt_IgnoreInterfacePragmas</span></a></span><span>
</span><span id="line-504"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681315820"><span class="annot"><span class="annottext">[(Name, TyThing)]
</span><a href="#local-6989586621681315820"><span class="hs-identifier hs-var">new_eps_decls</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [(Fingerprint, IfaceDecl)] -&gt; IfL [(Name, TyThing)]
</span><a href="GHC.IfaceToCore.html#tcIfaceDecls"><span class="hs-identifier hs-var">tcIfaceDecls</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681315823"><span class="hs-identifier hs-var">ignore_prags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceDeclExts phase]
</span><a href="GHC.Unit.Module.ModIface.html#mi_decls"><span class="hs-identifier hs-var">mi_decls</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315830"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-505"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681315818"><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681315818"><span class="hs-identifier hs-var">new_eps_insts</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceClsInst -&gt; IfL ClsInst
</span><a href="GHC.IfaceToCore.html#tcIfaceInst"><span class="hs-identifier hs-var">tcIfaceInst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceClsInst]
</span><a href="GHC.Unit.Module.ModIface.html#mi_insts"><span class="hs-identifier hs-var">mi_insts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315830"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-506"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681315815"><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621681315815"><span class="hs-identifier hs-var">new_eps_fam_insts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceFamInst -&gt; IfL FamInst
</span><a href="GHC.IfaceToCore.html#tcIfaceFamInst"><span class="hs-identifier hs-var">tcIfaceFamInst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceFamInst]
</span><a href="GHC.Unit.Module.ModIface.html#mi_fam_insts"><span class="hs-identifier hs-var">mi_fam_insts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315830"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-507"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681315813"><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681315813"><span class="hs-identifier hs-var">new_eps_rules</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [IfaceRule] -&gt; IfL [CoreRule]
</span><a href="GHC.IfaceToCore.html#tcIfaceRules"><span class="hs-identifier hs-var">tcIfaceRules</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681315823"><span class="hs-identifier hs-var">ignore_prags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceRule]
</span><a href="GHC.Unit.Module.ModIface.html#mi_rules"><span class="hs-identifier hs-var">mi_rules</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315830"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-508"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681315811"><span class="annot"><span class="annottext">[Annotation]
</span><a href="#local-6989586621681315811"><span class="hs-identifier hs-var">new_eps_anns</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IfaceAnnotation] -&gt; IfL [Annotation]
</span><a href="GHC.IfaceToCore.html#tcIfaceAnnotations"><span class="hs-identifier hs-var">tcIfaceAnnotations</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceAnnotation]
</span><a href="GHC.Unit.Module.ModIface.html#mi_anns"><span class="hs-identifier hs-var">mi_anns</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315830"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-509"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681315809"><span class="annot"><span class="annottext">[CompleteMatch]
</span><a href="#local-6989586621681315809"><span class="hs-identifier hs-var">new_eps_complete_matches</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IfaceCompleteMatch] -&gt; IfL [CompleteMatch]
</span><a href="GHC.IfaceToCore.html#tcIfaceCompleteMatches"><span class="hs-identifier hs-var">tcIfaceCompleteMatches</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceCompleteMatch]
</span><a href="GHC.Unit.Module.ModIface.html#mi_complete_matches"><span class="hs-identifier hs-var">mi_complete_matches</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315830"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681315807"><span class="annot"><span class="annottext">final_iface :: ModIface
</span><a href="#local-6989586621681315807"><span class="hs-identifier hs-var hs-var">final_iface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315830"><span class="hs-identifier hs-var">iface</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-512"></span><span>                                </span><span class="annot"><span class="annottext">mi_decls :: [IfaceDeclExts 'ModIfaceFinal]
</span><a href="GHC.Unit.Module.ModIface.html#mi_decls"><span class="hs-identifier hs-var">mi_decls</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No mi_decls in PIT&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-513"></span><span>                                </span><span class="annot"><span class="annottext">mi_insts :: [IfaceClsInst]
</span><a href="GHC.Unit.Module.ModIface.html#mi_insts"><span class="hs-identifier hs-var">mi_insts</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No mi_insts in PIT&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-514"></span><span>                                </span><span class="annot"><span class="annottext">mi_fam_insts :: [IfaceFamInst]
</span><a href="GHC.Unit.Module.ModIface.html#mi_fam_insts"><span class="hs-identifier hs-var">mi_fam_insts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No mi_fam_insts in PIT&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-515"></span><span>                                </span><span class="annot"><span class="annottext">mi_rules :: [IfaceRule]
</span><a href="GHC.Unit.Module.ModIface.html#mi_rules"><span class="hs-identifier hs-var">mi_rules</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No mi_rules in PIT&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-516"></span><span>                                </span><span class="annot"><span class="annottext">mi_anns :: [IfaceAnnotation]
</span><a href="GHC.Unit.Module.ModIface.html#mi_anns"><span class="hs-identifier hs-var">mi_anns</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No mi_anns in PIT&quot;</span></span><span>
</span><span id="line-517"></span><span>                              </span><span class="hs-special">}</span><span>
</span><span id="line-518"></span><span>               </span><span class="hs-special">}</span><span>
</span><span id="line-519"></span><span>
</span><span id="line-520"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315805"><span class="annot"><span class="annottext">bad_boot :: Bool
</span><a href="#local-6989586621681315805"><span class="hs-identifier hs-var hs-var">bad_boot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModIface -&gt; IsBootInterface
</span><a href="GHC.Unit.Module.ModIface.html#mi_boot"><span class="hs-identifier hs-var">mi_boot</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315830"><span class="hs-identifier hs-var">iface</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#IsBoot"><span class="hs-identifier hs-var">IsBoot</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfGblEnv -&gt; Maybe (GenModule Unit, IfG TypeEnv)
</span><a href="GHC.Tc.Types.html#if_rec_types"><span class="hs-identifier hs-var">if_rec_types</span></a></span><span> </span><span class="annot"><span class="annottext">IfGblEnv
</span><a href="#local-6989586621681315849"><span class="hs-identifier hs-var">gbl_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315865"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-521"></span><span>                            </span><span class="hs-comment">-- Warn against an EPS-updating import</span><span>
</span><span id="line-522"></span><span>                            </span><span class="hs-comment">-- of one's own boot file! (one-shot only)</span><span>
</span><span id="line-523"></span><span>                            </span><span class="hs-comment">-- See Note [Loading your own hi-boot file]</span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-identifier">WARN</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">bad_boot</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">mod</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-526"></span><span>          </span><span class="annot"><span class="annottext">forall gbl lcl.
(ExternalPackageState -&gt; ExternalPackageState) -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#updateEps_"><span class="hs-identifier hs-var">updateEps_</span></a></span><span>  </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681315801"><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315801"><span class="hs-identifier hs-var">eps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-527"></span><span>           </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall a. GenModule Unit -&gt; ModuleEnv a -&gt; Bool
</span><a href="GHC.Unit.Module.Env.html#elemModuleEnv"><span class="hs-identifier hs-var">elemModuleEnv</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315865"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageIfaceTable
</span><a href="GHC.Unit.External.html#eps_PIT"><span class="hs-identifier hs-var">eps_PIT</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315801"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">HomeUnit -&gt; ModIface -&gt; Bool
</span><a href="GHC.Iface.Load.html#is_external_sig"><span class="hs-identifier hs-var">is_external_sig</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621681315846"><span class="hs-identifier hs-var">home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315830"><span class="hs-identifier hs-var">iface</span></a></span><span>
</span><span id="line-528"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315801"><span class="hs-identifier hs-var">eps</span></a></span><span>
</span><span id="line-529"></span><span>           </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681315805"><span class="hs-identifier hs-var">bad_boot</span></a></span><span>
</span><span id="line-530"></span><span>                </span><span class="hs-comment">-- See Note [Loading your own hi-boot file]</span><span>
</span><span id="line-531"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315801"><span class="hs-identifier hs-var">eps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eps_PTE :: TypeEnv
</span><a href="GHC.Unit.External.html#eps_PTE"><span class="hs-identifier hs-var">eps_PTE</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; [(Name, TyThing)] -&gt; TypeEnv
</span><a href="GHC.Iface.Load.html#addDeclsToPTE"><span class="hs-identifier hs-var">addDeclsToPTE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; TypeEnv
</span><a href="GHC.Unit.External.html#eps_PTE"><span class="hs-identifier hs-var">eps_PTE</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315801"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, TyThing)]
</span><a href="#local-6989586621681315820"><span class="hs-identifier hs-var">new_eps_decls</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-532"></span><span>           </span><span class="hs-keyword">else</span><span>
</span><span id="line-533"></span><span>                </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315801"><span class="hs-identifier hs-var">eps</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-534"></span><span>                  </span><span class="annot"><span class="annottext">eps_PIT :: PackageIfaceTable
</span><a href="GHC.Unit.External.html#eps_PIT"><span class="hs-identifier hs-var">eps_PIT</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. ModuleEnv a -&gt; GenModule Unit -&gt; a -&gt; ModuleEnv a
</span><a href="GHC.Unit.Module.Env.html#extendModuleEnv"><span class="hs-identifier hs-var">extendModuleEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageIfaceTable
</span><a href="GHC.Unit.External.html#eps_PIT"><span class="hs-identifier hs-var">eps_PIT</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315801"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315865"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315807"><span class="hs-identifier hs-var">final_iface</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-535"></span><span>                  </span><span class="annot"><span class="annottext">eps_PTE :: TypeEnv
</span><a href="GHC.Unit.External.html#eps_PTE"><span class="hs-identifier hs-var">eps_PTE</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; [(Name, TyThing)] -&gt; TypeEnv
</span><a href="GHC.Iface.Load.html#addDeclsToPTE"><span class="hs-identifier hs-var">addDeclsToPTE</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; TypeEnv
</span><a href="GHC.Unit.External.html#eps_PTE"><span class="hs-identifier hs-var">eps_PTE</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315801"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, TyThing)]
</span><a href="#local-6989586621681315820"><span class="hs-identifier hs-var">new_eps_decls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-536"></span><span>                  </span><span class="annot"><span class="annottext">eps_rule_base :: PackageRuleBase
</span><a href="GHC.Unit.External.html#eps_rule_base"><span class="hs-identifier hs-var">eps_rule_base</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageRuleBase -&gt; [CoreRule] -&gt; PackageRuleBase
</span><a href="GHC.Core.Rules.html#extendRuleBaseList"><span class="hs-identifier hs-var">extendRuleBaseList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageRuleBase
</span><a href="GHC.Unit.External.html#eps_rule_base"><span class="hs-identifier hs-var">eps_rule_base</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315801"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-537"></span><span>                                                        </span><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681315813"><span class="hs-identifier hs-var">new_eps_rules</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-538"></span><span>                  </span><span class="annot"><span class="annottext">eps_complete_matches :: [CompleteMatch]
</span><a href="GHC.Unit.External.html#eps_complete_matches"><span class="hs-identifier hs-var">eps_complete_matches</span></a></span><span>
</span><span id="line-539"></span><span>                                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExternalPackageState -&gt; [CompleteMatch]
</span><a href="GHC.Unit.External.html#eps_complete_matches"><span class="hs-identifier hs-var">eps_complete_matches</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315801"><span class="hs-identifier hs-var">eps</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[CompleteMatch]
</span><a href="#local-6989586621681315809"><span class="hs-identifier hs-var">new_eps_complete_matches</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-540"></span><span>                  </span><span class="annot"><span class="annottext">eps_inst_env :: PackageInstEnv
</span><a href="GHC.Unit.External.html#eps_inst_env"><span class="hs-identifier hs-var">eps_inst_env</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageInstEnv -&gt; [ClsInst] -&gt; PackageInstEnv
</span><a href="GHC.Core.InstEnv.html#extendInstEnvList"><span class="hs-identifier hs-var">extendInstEnvList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageInstEnv
</span><a href="GHC.Unit.External.html#eps_inst_env"><span class="hs-identifier hs-var">eps_inst_env</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315801"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-541"></span><span>                                                       </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681315818"><span class="hs-identifier hs-var">new_eps_insts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-542"></span><span>                  </span><span class="annot"><span class="annottext">eps_fam_inst_env :: PackageFamInstEnv
</span><a href="GHC.Unit.External.html#eps_fam_inst_env"><span class="hs-identifier hs-var">eps_fam_inst_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageFamInstEnv -&gt; [FamInst] -&gt; PackageFamInstEnv
</span><a href="GHC.Core.FamInstEnv.html#extendFamInstEnvList"><span class="hs-identifier hs-var">extendFamInstEnvList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageFamInstEnv
</span><a href="GHC.Unit.External.html#eps_fam_inst_env"><span class="hs-identifier hs-var">eps_fam_inst_env</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315801"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-543"></span><span>                                                          </span><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621681315815"><span class="hs-identifier hs-var">new_eps_fam_insts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-544"></span><span>                  </span><span class="annot"><span class="annottext">eps_ann_env :: PackageAnnEnv
</span><a href="GHC.Unit.External.html#eps_ann_env"><span class="hs-identifier hs-var">eps_ann_env</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageAnnEnv -&gt; [Annotation] -&gt; PackageAnnEnv
</span><a href="GHC.Types.Annotations.html#extendAnnEnvList"><span class="hs-identifier hs-var">extendAnnEnvList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageAnnEnv
</span><a href="GHC.Unit.External.html#eps_ann_env"><span class="hs-identifier hs-var">eps_ann_env</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315801"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-545"></span><span>                                                      </span><span class="annot"><span class="annottext">[Annotation]
</span><a href="#local-6989586621681315811"><span class="hs-identifier hs-var">new_eps_anns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-546"></span><span>                  </span><span class="annot"><span class="annottext">eps_mod_fam_inst_env :: ModuleEnv PackageFamInstEnv
</span><a href="GHC.Unit.External.html#eps_mod_fam_inst_env"><span class="hs-identifier hs-var">eps_mod_fam_inst_env</span></a></span><span>
</span><span id="line-547"></span><span>                                   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-548"></span><span>                                       </span><span id="local-6989586621681315787"><span class="annot"><span class="annottext">fam_inst_env :: PackageFamInstEnv
</span><a href="#local-6989586621681315787"><span class="hs-identifier hs-var hs-var">fam_inst_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-549"></span><span>                                         </span><span class="annot"><span class="annottext">PackageFamInstEnv -&gt; [FamInst] -&gt; PackageFamInstEnv
</span><a href="GHC.Core.FamInstEnv.html#extendFamInstEnvList"><span class="hs-identifier hs-var">extendFamInstEnvList</span></a></span><span> </span><span class="annot"><span class="annottext">PackageFamInstEnv
</span><a href="GHC.Core.FamInstEnv.html#emptyFamInstEnv"><span class="hs-identifier hs-var">emptyFamInstEnv</span></a></span><span>
</span><span id="line-550"></span><span>                                                              </span><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621681315815"><span class="hs-identifier hs-var">new_eps_fam_insts</span></a></span><span>
</span><span id="line-551"></span><span>                                     </span><span class="hs-keyword">in</span><span>
</span><span id="line-552"></span><span>                                     </span><span class="annot"><span class="annottext">forall a. ModuleEnv a -&gt; GenModule Unit -&gt; a -&gt; ModuleEnv a
</span><a href="GHC.Unit.Module.Env.html#extendModuleEnv"><span class="hs-identifier hs-var">extendModuleEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; ModuleEnv PackageFamInstEnv
</span><a href="GHC.Unit.External.html#eps_mod_fam_inst_env"><span class="hs-identifier hs-var">eps_mod_fam_inst_env</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315801"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-553"></span><span>                                                     </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315865"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-554"></span><span>                                                     </span><span class="annot"><span class="annottext">PackageFamInstEnv
</span><a href="#local-6989586621681315787"><span class="hs-identifier hs-var">fam_inst_env</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-555"></span><span>                  </span><span class="annot"><span class="annottext">eps_stats :: EpsStats
</span><a href="GHC.Unit.External.html#eps_stats"><span class="hs-identifier hs-var">eps_stats</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpsStats -&gt; Int -&gt; Int -&gt; Int -&gt; EpsStats
</span><a href="GHC.Unit.External.html#addEpsInStats"><span class="hs-identifier hs-var">addEpsInStats</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; EpsStats
</span><a href="GHC.Unit.External.html#eps_stats"><span class="hs-identifier hs-var">eps_stats</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315801"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-556"></span><span>                                                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, TyThing)]
</span><a href="#local-6989586621681315820"><span class="hs-identifier hs-var">new_eps_decls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-557"></span><span>                                                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681315818"><span class="hs-identifier hs-var">new_eps_insts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-558"></span><span>                                                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681315813"><span class="hs-identifier hs-var">new_eps_rules</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-559"></span><span>
</span><span id="line-560"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-comment">-- invoke plugins with *full* interface, not final_iface, to ensure</span><span>
</span><span id="line-561"></span><span>          </span><span class="hs-comment">-- that plugins have access to declarations, etc.</span><span>
</span><span id="line-562"></span><span>          </span><span id="local-6989586621681315782"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315782"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a.
Monad m =&gt;
HscEnv -&gt; PluginOperation m a -&gt; a -&gt; m a
</span><a href="GHC.Driver.Plugins.html#withPlugins"><span class="hs-identifier hs-var">withPlugins</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315847"><span class="hs-identifier hs-var">hsc_env</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681315780"><span class="annot"><span class="annottext">Plugin
</span><a href="#local-6989586621681315780"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Plugin -&gt; forall lcl. [String] -&gt; ModIface -&gt; IfM lcl ModIface
</span><a href="GHC.Driver.Plugins.html#interfaceLoadAction"><span class="hs-identifier hs-var">interfaceLoadAction</span></a></span><span> </span><span class="annot"><span class="annottext">Plugin
</span><a href="#local-6989586621681315780"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315830"><span class="hs-identifier hs-var">iface</span></a></span><span>
</span><span id="line-563"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315782"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-564"></span><span>    </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-565"></span><span>
</span><span id="line-566"></span><span class="hs-comment">{- Note [Loading your own hi-boot file]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Generally speaking, when compiling module M, we should not
load M.hi boot into the EPS.  After all, we are very shortly
going to have full information about M.  Moreover, see
Note [Do not update EPS with your own hi-boot] in GHC.Iface.Recomp.

But there is a HORRIBLE HACK here.

* At the end of tcRnImports, we call checkFamInstConsistency to
  check consistency of imported type-family instances
  See Note [The type family instance consistency story] in GHC.Tc.Instance.Family

* Alas, those instances may refer to data types defined in M,
  if there is a M.hs-boot.

* And that means we end up loading M.hi-boot, because those
  data types are not yet in the type environment.

But in this weird case, /all/ we need is the types. We don't need
instances, rules etc.  And if we put the instances in the EPS
we get &quot;duplicate instance&quot; warnings when we compile the &quot;real&quot;
instance in M itself.  Hence the strange business of just updateing
the eps_PTE.

This really happens in practice.  The module &quot;GHC.Hs.Expr&quot; gets
&quot;duplicate instance&quot; errors if this hack is not present.

This is a mess.


Note [HPT space leak] (#15111)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In IfL, we defer some work until it is demanded using forkM, such
as building TyThings from IfaceDecls. These thunks are stored in
the ExternalPackageState, and they might never be poked.  If we're
not careful, these thunks will capture the state of the loaded
program when we read an interface file, and retain all that data
for ever.

Therefore, when loading a package interface file , we use a &quot;clean&quot;
version of the HscEnv with all the data about the currently loaded
program stripped out. Most of the fields can be panics because
we'll never read them, but hsc_HPT needs to be empty because this
interface will cause other interfaces to be loaded recursively, and
when looking up those interfaces we use the HPT in loadInterface.
We know that none of the interfaces below here can refer to
home-package modules however, so it's safe for the HPT to be empty.
-}</span><span>
</span><span id="line-615"></span><span>
</span><span id="line-616"></span><span id="local-6989586621681316543"><span class="annot"><a href="GHC.Iface.Load.html#dontLeakTheHPT"><span class="hs-identifier hs-type">dontLeakTheHPT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316543"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316543"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-617"></span><span id="dontLeakTheHPT"><span class="annot"><span class="annottext">dontLeakTheHPT :: forall a. IfL a -&gt; IfL a
</span><a href="GHC.Iface.Load.html#dontLeakTheHPT"><span class="hs-identifier hs-var hs-var">dontLeakTheHPT</span></a></span></span><span> </span><span id="local-6989586621681315771"><span class="annot"><span class="annottext">IfL a
</span><a href="#local-6989586621681315771"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-618"></span><span>  </span><span id="local-6989586621681315770"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315770"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-619"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-620"></span><span>    </span><span id="local-6989586621681315767"><span class="annot"><span class="annottext">cleanTopEnv :: HscEnv -&gt; HscEnv
</span><a href="#local-6989586621681315767"><span class="hs-identifier hs-var hs-var">cleanTopEnv</span></a></span></span><span> </span><span class="annot"><a href="GHC.Driver.Env.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span class="hs-special">{</span><span id="local-6989586621681315749"><span id="local-6989586621681315750"><span id="local-6989586621681315751"><span id="local-6989586621681315752"><span id="local-6989586621681315753"><span id="local-6989586621681315754"><span id="local-6989586621681315755"><span id="local-6989586621681315756"><span id="local-6989586621681315757"><span id="local-6989586621681315758"><span id="local-6989586621681315759"><span id="local-6989586621681315760"><span id="local-6989586621681315761"><span id="local-6989586621681315762"><span id="local-6989586621681315763"><span id="local-6989586621681315764"><span id="local-6989586621681315765"><span class="annot"><span class="annottext">[LoadedPlugin]
[StaticPlugin]
[Target]
Maybe [UnitDatabase UnitId]
Maybe (GenModule Unit, IORef TypeEnv)
Maybe Interp
IORef FinderCache
IORef NameCache
IORef ExternalPackageState
Hooks
DynFlags
HomePackageTable
Logger
UnitEnv
TmpFs
ModuleGraph
InteractiveContext
hsc_unit_env :: HscEnv -&gt; UnitEnv
hsc_unit_dbs :: HscEnv -&gt; Maybe [UnitDatabase UnitId]
hsc_type_env_var :: HscEnv -&gt; Maybe (GenModule Unit, IORef TypeEnv)
hsc_tmpfs :: HscEnv -&gt; TmpFs
hsc_targets :: HscEnv -&gt; [Target]
hsc_static_plugins :: HscEnv -&gt; [StaticPlugin]
hsc_plugins :: HscEnv -&gt; [LoadedPlugin]
hsc_mod_graph :: HscEnv -&gt; ModuleGraph
hsc_logger :: HscEnv -&gt; Logger
hsc_interp :: HscEnv -&gt; Maybe Interp
hsc_hooks :: HscEnv -&gt; Hooks
hsc_dflags :: HscEnv -&gt; DynFlags
hsc_NC :: HscEnv -&gt; IORef NameCache
hsc_IC :: HscEnv -&gt; InteractiveContext
hsc_HPT :: HscEnv -&gt; HomePackageTable
hsc_FC :: HscEnv -&gt; IORef FinderCache
hsc_EPS :: HscEnv -&gt; IORef ExternalPackageState
hsc_tmpfs :: TmpFs
hsc_hooks :: Hooks
hsc_logger :: Logger
hsc_unit_env :: UnitEnv
hsc_unit_dbs :: Maybe [UnitDatabase UnitId]
hsc_static_plugins :: [StaticPlugin]
hsc_plugins :: [LoadedPlugin]
hsc_interp :: Maybe Interp
hsc_type_env_var :: Maybe (GenModule Unit, IORef TypeEnv)
hsc_FC :: IORef FinderCache
hsc_NC :: IORef NameCache
hsc_EPS :: IORef ExternalPackageState
hsc_HPT :: HomePackageTable
hsc_IC :: InteractiveContext
hsc_mod_graph :: ModuleGraph
hsc_targets :: [Target]
hsc_dflags :: DynFlags
</span><a href="GHC.Driver.Env.Types.html#hsc_unit_env"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-621"></span><span>       </span><span class="hs-keyword">let</span><span>
</span><span id="line-622"></span><span>         </span><span class="hs-comment">-- wrinkle: when we're typechecking in --backpack mode, the</span><span>
</span><span id="line-623"></span><span>         </span><span class="hs-comment">-- instantiation of a signature might reside in the HPT, so</span><span>
</span><span id="line-624"></span><span>         </span><span class="hs-comment">-- this case breaks the assumption that EPS interfaces only</span><span>
</span><span id="line-625"></span><span>         </span><span class="hs-comment">-- refer to other EPS interfaces. We can detect when we're in</span><span>
</span><span id="line-626"></span><span>         </span><span class="hs-comment">-- typechecking-only mode by using backend==NoBackend, and</span><span>
</span><span id="line-627"></span><span>         </span><span class="hs-comment">-- in that case we don't empty the HPT.  (admittedly this is</span><span>
</span><span id="line-628"></span><span>         </span><span class="hs-comment">-- a bit of a hack, better suggestions welcome). A number of</span><span>
</span><span id="line-629"></span><span>         </span><span class="hs-comment">-- tests in testsuite/tests/backpack break without this</span><span>
</span><span id="line-630"></span><span>         </span><span class="hs-comment">-- tweak.</span><span>
</span><span id="line-631"></span><span>         </span><span id="local-6989586621681315731"><span class="annot"><span class="annottext">keepFor20509 :: HomeModInfo -&gt; Bool
</span><a href="#local-6989586621681315731"><span class="hs-identifier hs-var hs-var">keepFor20509</span></a></span></span><span> </span><span id="local-6989586621681315730"><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621681315730"><span class="hs-identifier hs-var">hmi</span></a></span></span><span>
</span><span id="line-632"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall u. GenModule (GenUnit u) -&gt; Bool
</span><a href="GHC.Unit.Module.html#isHoleModule"><span class="hs-identifier hs-var">isHoleModule</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; GenModule Unit
</span><a href="GHC.Unit.Module.ModIface.html#mi_semantic_module"><span class="hs-identifier hs-var">mi_semantic_module</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModIface
</span><a href="GHC.Unit.Home.ModInfo.html#hm_iface"><span class="hs-identifier hs-var">hm_iface</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621681315730"><span class="hs-identifier hs-var">hmi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-633"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-634"></span><span>         </span><span class="hs-glyph">!</span><span id="local-6989586621681315728"><span class="annot"><span class="annottext">hpt :: HomePackageTable
</span><a href="#local-6989586621681315728"><span class="hs-identifier hs-var hs-var">hpt</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Backend
</span><a href="GHC.Driver.Session.html#backend"><span class="hs-identifier hs-var">backend</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315765"><span class="hs-identifier hs-var">hsc_dflags</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Backend
</span><a href="GHC.Driver.Backend.html#NoBackend"><span class="hs-identifier hs-var">NoBackend</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">(HomeModInfo -&gt; Bool) -&gt; HomePackageTable -&gt; Bool
</span><a href="GHC.Unit.Home.ModInfo.html#anyHpt"><span class="hs-identifier hs-var">anyHpt</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo -&gt; Bool
</span><a href="#local-6989586621681315731"><span class="hs-identifier hs-var">keepFor20509</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621681315761"><span class="hs-identifier hs-var">hsc_HPT</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621681315761"><span class="hs-identifier hs-var">hsc_HPT</span></a></span><span>
</span><span id="line-635"></span><span>                                                                     </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="GHC.Unit.Home.ModInfo.html#emptyHomePackageTable"><span class="hs-identifier hs-var">emptyHomePackageTable</span></a></span><span>
</span><span id="line-636"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="GHC.Unit.Home.ModInfo.html#emptyHomePackageTable"><span class="hs-identifier hs-var">emptyHomePackageTable</span></a></span><span>
</span><span id="line-637"></span><span>       </span><span class="hs-keyword">in</span><span>
</span><span id="line-638"></span><span>       </span><span class="annot"><a href="GHC.Driver.Env.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-special">{</span><span>  </span><span class="annot"><span class="annottext">hsc_targets :: [Target]
</span><a href="GHC.Driver.Env.Types.html#hsc_targets"><span class="hs-identifier hs-var">hsc_targets</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cleanTopEnv: hsc_targets&quot;</span></span><span>
</span><span id="line-639"></span><span>              </span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">hsc_mod_graph :: ModuleGraph
</span><a href="GHC.Driver.Env.Types.html#hsc_mod_graph"><span class="hs-identifier hs-var">hsc_mod_graph</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cleanTopEnv: hsc_mod_graph&quot;</span></span><span>
</span><span id="line-640"></span><span>              </span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">hsc_IC :: InteractiveContext
</span><a href="GHC.Driver.Env.Types.html#hsc_IC"><span class="hs-identifier hs-var">hsc_IC</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cleanTopEnv: hsc_IC&quot;</span></span><span>
</span><span id="line-641"></span><span>              </span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">hsc_HPT :: HomePackageTable
</span><a href="GHC.Driver.Env.Types.html#hsc_HPT"><span class="hs-identifier hs-var">hsc_HPT</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621681315728"><span class="hs-identifier hs-var">hpt</span></a></span><span>
</span><span id="line-642"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LoadedPlugin]
[StaticPlugin]
Maybe [UnitDatabase UnitId]
Maybe (GenModule Unit, IORef TypeEnv)
Maybe Interp
IORef FinderCache
IORef NameCache
IORef ExternalPackageState
Hooks
DynFlags
Logger
UnitEnv
TmpFs
hsc_unit_env :: UnitEnv
hsc_unit_dbs :: Maybe [UnitDatabase UnitId]
hsc_type_env_var :: Maybe (GenModule Unit, IORef TypeEnv)
hsc_tmpfs :: TmpFs
hsc_static_plugins :: [StaticPlugin]
hsc_plugins :: [LoadedPlugin]
hsc_logger :: Logger
hsc_interp :: Maybe Interp
hsc_hooks :: Hooks
hsc_dflags :: DynFlags
hsc_NC :: IORef NameCache
hsc_FC :: IORef FinderCache
hsc_EPS :: IORef ExternalPackageState
hsc_tmpfs :: TmpFs
hsc_hooks :: Hooks
hsc_logger :: Logger
hsc_unit_env :: UnitEnv
hsc_unit_dbs :: Maybe [UnitDatabase UnitId]
hsc_static_plugins :: [StaticPlugin]
hsc_plugins :: [LoadedPlugin]
hsc_interp :: Maybe Interp
hsc_type_env_var :: Maybe (GenModule Unit, IORef TypeEnv)
hsc_FC :: IORef FinderCache
hsc_NC :: IORef NameCache
hsc_EPS :: IORef ExternalPackageState
hsc_dflags :: DynFlags
</span><a href="GHC.Driver.Env.Types.html#hsc_unit_env"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-643"></span><span>
</span><span id="line-644"></span><span>    </span><span id="local-6989586621681315723"><span class="annot"><span class="annottext">cleanGblEnv :: IfGblEnv -&gt; IfGblEnv
</span><a href="#local-6989586621681315723"><span class="hs-identifier hs-var hs-var">cleanGblEnv</span></a></span></span><span> </span><span id="local-6989586621681315722"><span class="annot"><span class="annottext">IfGblEnv
</span><a href="#local-6989586621681315722"><span class="hs-identifier hs-var">gbl</span></a></span></span><span>
</span><span id="line-645"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; GhcMode
</span><a href="GHC.Driver.Session.html#ghcMode"><span class="hs-identifier hs-var">ghcMode</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315770"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">GhcMode
</span><a href="GHC.Driver.Session.html#OneShot"><span class="hs-identifier hs-var">OneShot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfGblEnv
</span><a href="#local-6989586621681315722"><span class="hs-identifier hs-var">gbl</span></a></span><span>
</span><span id="line-646"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfGblEnv
</span><a href="#local-6989586621681315722"><span class="hs-identifier hs-var">gbl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">if_rec_types :: Maybe (GenModule Unit, IfG TypeEnv)
</span><a href="GHC.Tc.Types.html#if_rec_types"><span class="hs-identifier hs-var">if_rec_types</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-647"></span><span>
</span><span id="line-648"></span><span>  </span><span class="annot"><span class="annottext">forall gbl lcl a.
(gbl -&gt; gbl) -&gt; TcRnIf gbl lcl a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#updGblEnv"><span class="hs-identifier hs-var">updGblEnv</span></a></span><span> </span><span class="annot"><span class="annottext">IfGblEnv -&gt; IfGblEnv
</span><a href="#local-6989586621681315723"><span class="hs-identifier hs-var">cleanGblEnv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-649"></span><span>    </span><span class="annot"><span class="annottext">forall gbl lcl a.
(HscEnv -&gt; HscEnv) -&gt; TcRnIf gbl lcl a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#updTopEnv"><span class="hs-identifier hs-var">updTopEnv</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; HscEnv
</span><a href="#local-6989586621681315767"><span class="hs-identifier hs-var">cleanTopEnv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-650"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><span class="annottext">HscEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl HscEnv
</span><a href="GHC.Tc.Utils.Monad.html#getTopEnv"><span class="hs-identifier hs-var">getTopEnv</span></a></span><span>        </span><span class="hs-comment">-- force the updTopEnv</span><span>
</span><span id="line-651"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><span class="annottext">IfGblEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl gbl
</span><a href="GHC.Tc.Utils.Monad.html#getGblEnv"><span class="hs-identifier hs-var">getGblEnv</span></a></span><span>
</span><span id="line-652"></span><span>      </span><span class="annot"><span class="annottext">IfL a
</span><a href="#local-6989586621681315771"><span class="hs-identifier hs-var">thing_inside</span></a></span><span>
</span><span id="line-653"></span><span>
</span><span id="line-654"></span><span>
</span><span id="line-655"></span><span class="hs-comment">-- | Returns @True@ if a 'ModIface' comes from an external package.</span><span>
</span><span id="line-656"></span><span class="hs-comment">-- In this case, we should NOT load it into the EPS; the entities</span><span>
</span><span id="line-657"></span><span class="hs-comment">-- should instead come from the local merged signature interface.</span><span>
</span><span id="line-658"></span><span class="annot"><a href="GHC.Iface.Load.html#is_external_sig"><span class="hs-identifier hs-type">is_external_sig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Home.html#HomeUnit"><span class="hs-identifier hs-type">HomeUnit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-659"></span><span id="is_external_sig"><span class="annot"><span class="annottext">is_external_sig :: HomeUnit -&gt; ModIface -&gt; Bool
</span><a href="GHC.Iface.Load.html#is_external_sig"><span class="hs-identifier hs-var hs-var">is_external_sig</span></a></span></span><span> </span><span id="local-6989586621681315717"><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621681315717"><span class="hs-identifier hs-var">home_unit</span></a></span></span><span> </span><span id="local-6989586621681315716"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315716"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-660"></span><span>    </span><span class="hs-comment">-- It's a signature iface...</span><span>
</span><span id="line-661"></span><span>    </span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; GenModule Unit
</span><a href="GHC.Unit.Module.ModIface.html#mi_semantic_module"><span class="hs-identifier hs-var">mi_semantic_module</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315716"><span class="hs-identifier hs-var">iface</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; GenModule Unit
</span><a href="GHC.Unit.Module.ModIface.html#mi_module"><span class="hs-identifier hs-var">mi_module</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315716"><span class="hs-identifier hs-var">iface</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-662"></span><span>    </span><span class="hs-comment">-- and it's not from the local package</span><span>
</span><span id="line-663"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeUnit -&gt; GenModule Unit -&gt; Bool
</span><a href="GHC.Unit.Home.html#isHomeModule"><span class="hs-identifier hs-var">isHomeModule</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621681315717"><span class="hs-identifier hs-var">home_unit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; GenModule Unit
</span><a href="GHC.Unit.Module.ModIface.html#mi_module"><span class="hs-identifier hs-var">mi_module</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315716"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-664"></span><span>
</span><span id="line-665"></span><span class="hs-comment">-- | This is an improved version of 'findAndReadIface' which can also</span><span>
</span><span id="line-666"></span><span class="hs-comment">-- handle the case when a user requests @p[A=&lt;B&gt;]:M@ but we only</span><span>
</span><span id="line-667"></span><span class="hs-comment">-- have an interface for @p[A=&lt;A&gt;]:M@ (the indefinite interface.</span><span>
</span><span id="line-668"></span><span class="hs-comment">-- If we are not trying to build code, we load the interface we have,</span><span>
</span><span id="line-669"></span><span class="hs-comment">-- *instantiating it* according to how the holes are specified.</span><span>
</span><span id="line-670"></span><span class="hs-comment">-- (Of course, if we're actually building code, this is a hard error.)</span><span>
</span><span id="line-671"></span><span class="hs-comment">--</span><span>
</span><span id="line-672"></span><span class="hs-comment">-- In the presence of holes, 'computeInterface' has an important invariant:</span><span>
</span><span id="line-673"></span><span class="hs-comment">-- to load module M, its set of transitively reachable requirements must</span><span>
</span><span id="line-674"></span><span class="hs-comment">-- have an up-to-date local hi file for that requirement.  Note that if</span><span>
</span><span id="line-675"></span><span class="hs-comment">-- we are loading the interface of a requirement, this does not</span><span>
</span><span id="line-676"></span><span class="hs-comment">-- apply to the requirement itself; e.g., @p[A=&lt;A&gt;]:A@ does not require</span><span>
</span><span id="line-677"></span><span class="hs-comment">-- A.hi to be up-to-date (and indeed, we MUST NOT attempt to read A.hi, unless</span><span>
</span><span id="line-678"></span><span class="hs-comment">-- we are actually typechecking p.)</span><span>
</span><span id="line-679"></span><span id="local-6989586621681316553"><span id="local-6989586621681316554"><span class="annot"><a href="GHC.Iface.Load.html#computeInterface"><span class="hs-identifier hs-type">computeInterface</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-680"></span><span>       </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#IsBootInterface"><span class="hs-identifier hs-type">IsBootInterface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span>
</span><span id="line-681"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcRnIf"><span class="hs-identifier hs-type">TcRnIf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316554"><span class="hs-identifier hs-type">gbl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316553"><span class="hs-identifier hs-type">lcl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Maybe.html#MaybeErr"><span class="hs-identifier hs-type">MaybeErr</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-682"></span><span id="computeInterface"><span class="annot"><span class="annottext">computeInterface :: forall gbl lcl.
SDoc
-&gt; IsBootInterface
-&gt; GenModule Unit
-&gt; TcRnIf gbl lcl (MaybeErr SDoc (ModIface, String))
</span><a href="GHC.Iface.Load.html#computeInterface"><span class="hs-identifier hs-var hs-var">computeInterface</span></a></span></span><span> </span><span id="local-6989586621681315701"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315701"><span class="hs-identifier hs-var">doc_str</span></a></span></span><span> </span><span id="local-6989586621681315700"><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315700"><span class="hs-identifier hs-var">hi_boot_file</span></a></span></span><span> </span><span id="local-6989586621681315699"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315699"><span class="hs-identifier hs-var">mod0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-683"></span><span>    </span><span class="hs-identifier">MASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">isHoleModule</span><span> </span><span class="hs-identifier">mod0</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-684"></span><span>    </span><span id="local-6989586621681315698"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315698"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl HscEnv
</span><a href="GHC.Tc.Utils.Monad.html#getTopEnv"><span class="hs-identifier hs-var">getTopEnv</span></a></span><span>
</span><span id="line-685"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315697"><span class="annot"><span class="annottext">home_unit :: HomeUnit
</span><a href="#local-6989586621681315697"><span class="hs-identifier hs-var hs-var">home_unit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; HomeUnit
</span><a href="GHC.Driver.Env.html#hsc_home_unit"><span class="hs-identifier hs-var">hsc_home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315698"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-686"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenModule Unit -&gt; (InstalledModule, Maybe InstantiatedModule)
</span><a href="GHC.Unit.Module.html#getModuleInstantiation"><span class="hs-identifier hs-var">getModuleInstantiation</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315699"><span class="hs-identifier hs-var">mod0</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-687"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681315695"><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315695"><span class="hs-identifier hs-var">imod</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681315694"><span class="annot"><span class="annottext">InstantiatedModule
</span><a href="#local-6989586621681315694"><span class="hs-identifier hs-var">indef</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall u. GenHomeUnit u -&gt; Bool
</span><a href="GHC.Unit.Home.html#isHomeUnitIndefinite"><span class="hs-identifier hs-var">isHomeUnitIndefinite</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621681315697"><span class="hs-identifier hs-var">home_unit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-688"></span><span>            </span><span id="local-6989586621681315692"><span class="annot"><span class="annottext">MaybeErr SDoc (ModIface, String)
</span><a href="#local-6989586621681315692"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl.
SDoc
-&gt; InstalledModule
-&gt; GenModule Unit
-&gt; IsBootInterface
-&gt; TcRnIf gbl lcl (MaybeErr SDoc (ModIface, String))
</span><a href="GHC.Iface.Load.html#findAndReadIface"><span class="hs-identifier hs-var">findAndReadIface</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315701"><span class="hs-identifier hs-var">doc_str</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315695"><span class="hs-identifier hs-var">imod</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315699"><span class="hs-identifier hs-var">mod0</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315700"><span class="hs-identifier hs-var">hi_boot_file</span></a></span><span>
</span><span id="line-689"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MaybeErr SDoc (ModIface, String)
</span><a href="#local-6989586621681315692"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-690"></span><span>                </span><span class="annot"><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-type">Succeeded</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315691"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315691"><span class="hs-identifier hs-var">iface0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681315690"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315690"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-691"></span><span>                    </span><span id="local-6989586621681315689"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315689"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl HscEnv
</span><a href="GHC.Tc.Utils.Monad.html#getTopEnv"><span class="hs-identifier hs-var">getTopEnv</span></a></span><span>
</span><span id="line-692"></span><span>                    </span><span id="local-6989586621681315688"><span class="annot"><span class="annottext">Either ErrorMessages ModIface
</span><a href="#local-6989586621681315688"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.3.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-693"></span><span>                        </span><span class="annot"><span class="annottext">HscEnv
-&gt; [(ModuleName, GenModule Unit)]
-&gt; Maybe NameShape
-&gt; ModIface
-&gt; IO (Either ErrorMessages ModIface)
</span><a href="GHC.Iface.Rename.html#rnModIface"><span class="hs-identifier hs-var">rnModIface</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315689"><span class="hs-identifier hs-var">hsc_env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenInstantiatedUnit unit -&gt; GenInstantiations unit
</span><a href="GHC.Unit.Types.html#instUnitInsts"><span class="hs-identifier hs-var">instUnitInsts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">InstantiatedModule
</span><a href="#local-6989586621681315694"><span class="hs-identifier hs-var">indef</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-694"></span><span>                                   </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315691"><span class="hs-identifier hs-var">iface0</span></a></span><span>
</span><span id="line-695"></span><span>                    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either ErrorMessages ModIface
</span><a href="#local-6989586621681315688"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-696"></span><span>                        </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621681315684"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315684"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315684"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315690"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-697"></span><span>                        </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621681315683"><span class="annot"><span class="annottext">ErrorMessages
</span><a href="#local-6989586621681315683"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.3.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="../../base-4.16.3.0/src/GHC-IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ErrorMessages -&gt; SourceError
</span><a href="GHC.Types.SourceError.html#mkSrcErr"><span class="hs-identifier hs-var">mkSrcErr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ErrorMessages
</span><a href="#local-6989586621681315683"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-698"></span><span>                </span><span class="annot"><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-type">Failed</span></a></span><span> </span><span id="local-6989586621681315679"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315679"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. err -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-var">Failed</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315679"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-699"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681315678"><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315678"><span class="hs-identifier hs-var">mod</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe InstantiatedModule
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-700"></span><span>            </span><span class="annot"><span class="annottext">forall gbl lcl.
SDoc
-&gt; InstalledModule
-&gt; GenModule Unit
-&gt; IsBootInterface
-&gt; TcRnIf gbl lcl (MaybeErr SDoc (ModIface, String))
</span><a href="GHC.Iface.Load.html#findAndReadIface"><span class="hs-identifier hs-var">findAndReadIface</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315701"><span class="hs-identifier hs-var">doc_str</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315678"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315699"><span class="hs-identifier hs-var">mod0</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315700"><span class="hs-identifier hs-var">hi_boot_file</span></a></span><span>
</span><span id="line-701"></span><span>
</span><span id="line-702"></span><span class="hs-comment">-- | Compute the signatures which must be compiled in order to</span><span>
</span><span id="line-703"></span><span class="hs-comment">-- load the interface for a 'Module'.  The output of this function</span><span>
</span><span id="line-704"></span><span class="hs-comment">-- is always a subset of 'moduleFreeHoles'; it is more precise</span><span>
</span><span id="line-705"></span><span class="hs-comment">-- because in signature @p[A=\&lt;A&gt;,B=\&lt;B&gt;]:B@, although the free holes</span><span>
</span><span id="line-706"></span><span class="hs-comment">-- are A and B, B might not depend on A at all!</span><span>
</span><span id="line-707"></span><span class="hs-comment">--</span><span>
</span><span id="line-708"></span><span class="hs-comment">-- If this is invoked on a signature, this does NOT include the</span><span>
</span><span id="line-709"></span><span class="hs-comment">-- signature itself; e.g. precise free module holes of</span><span>
</span><span id="line-710"></span><span class="hs-comment">-- @p[A=\&lt;A&gt;,B=\&lt;B&gt;]:B@ never includes B.</span><span>
</span><span id="line-711"></span><span id="local-6989586621681316458"><span id="local-6989586621681316459"><span class="annot"><a href="GHC.Iface.Load.html#moduleFreeHolesPrecise"><span class="hs-identifier hs-type">moduleFreeHolesPrecise</span></a></span><span>
</span><span id="line-712"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span>
</span><span id="line-713"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcRnIf"><span class="hs-identifier hs-type">TcRnIf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316459"><span class="hs-identifier hs-type">gbl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316458"><span class="hs-identifier hs-type">lcl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Maybe.html#MaybeErr"><span class="hs-identifier hs-type">MaybeErr</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Unique.DSet.html#UniqDSet"><span class="hs-identifier hs-type">UniqDSet</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-714"></span><span id="moduleFreeHolesPrecise"><span class="annot"><span class="annottext">moduleFreeHolesPrecise :: forall gbl lcl.
SDoc
-&gt; GenModule Unit
-&gt; TcRnIf gbl lcl (MaybeErr SDoc (UniqDSet ModuleName))
</span><a href="GHC.Iface.Load.html#moduleFreeHolesPrecise"><span class="hs-identifier hs-var hs-var">moduleFreeHolesPrecise</span></a></span></span><span> </span><span id="local-6989586621681315666"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315666"><span class="hs-identifier hs-var">doc_str</span></a></span></span><span> </span><span id="local-6989586621681315665"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315665"><span class="hs-identifier hs-var">mod</span></a></span></span><span>
</span><span id="line-715"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GenModule Unit -&gt; Bool
</span><a href="GHC.Unit.Module.html#moduleIsDefinite"><span class="hs-identifier hs-var">moduleIsDefinite</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315665"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. UniqDSet a
</span><a href="GHC.Types.Unique.DSet.html#emptyUniqDSet"><span class="hs-identifier hs-var">emptyUniqDSet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-716"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-717"></span><span>   </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenModule Unit -&gt; (InstalledModule, Maybe InstantiatedModule)
</span><a href="GHC.Unit.Module.html#getModuleInstantiation"><span class="hs-identifier hs-var">getModuleInstantiation</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315665"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-718"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681315662"><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315662"><span class="hs-identifier hs-var">imod</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681315661"><span class="annot"><span class="annottext">InstantiatedModule
</span><a href="#local-6989586621681315661"><span class="hs-identifier hs-var">indef</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-719"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315660"><span class="annot"><span class="annottext">insts :: [(ModuleName, GenModule Unit)]
</span><a href="#local-6989586621681315660"><span class="hs-identifier hs-var hs-var">insts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall unit. GenInstantiatedUnit unit -&gt; GenInstantiations unit
</span><a href="GHC.Unit.Types.html#instUnitInsts"><span class="hs-identifier hs-var">instUnitInsts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">InstantiatedModule
</span><a href="#local-6989586621681315661"><span class="hs-identifier hs-var">indef</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-720"></span><span>        </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Considering whether to load&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315665"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-721"></span><span>                 </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;to compute precise free module holes&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-722"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681315659"><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315659"><span class="hs-identifier hs-var">eps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681315658"><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621681315658"><span class="hs-identifier hs-var">hpt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl.
TcRnIf gbl lcl (ExternalPackageState, HomePackageTable)
</span><a href="GHC.Tc.Utils.Monad.html#getEpsAndHpt"><span class="hs-identifier hs-var">getEpsAndHpt</span></a></span><span>
</span><span id="line-723"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
-&gt; HomePackageTable -&gt; Maybe (UniqDSet ModuleName)
</span><a href="#local-6989586621681315657"><span class="hs-identifier hs-var">tryEpsAndHpt</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315659"><span class="hs-identifier hs-var">eps</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621681315658"><span class="hs-identifier hs-var">hpt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Maybe a -&gt; Maybe a
</span><a href="GHC.Data.Maybe.html#firstJust"><span class="hs-operator hs-var">`firstJust`</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
-&gt; InstalledModule
-&gt; [(ModuleName, GenModule Unit)]
-&gt; Maybe (UniqDSet ModuleName)
</span><a href="#local-6989586621681315655"><span class="hs-identifier hs-var">tryDepsCache</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315659"><span class="hs-identifier hs-var">eps</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315662"><span class="hs-identifier hs-var">imod</span></a></span><span> </span><span class="annot"><span class="annottext">[(ModuleName, GenModule Unit)]
</span><a href="#local-6989586621681315660"><span class="hs-identifier hs-var">insts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-724"></span><span>            </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681315654"><span class="annot"><span class="annottext">UniqDSet ModuleName
</span><a href="#local-6989586621681315654"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="annot"><span class="annottext">UniqDSet ModuleName
</span><a href="#local-6989586621681315654"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-725"></span><span>            </span><span class="annot"><span class="annottext">Maybe (UniqDSet ModuleName)
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">InstalledModule
-&gt; [(ModuleName, GenModule Unit)]
-&gt; TcRnIf gbl lcl (MaybeErr SDoc (UniqDSet ModuleName))
</span><a href="#local-6989586621681315653"><span class="hs-identifier hs-var">readAndCache</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315662"><span class="hs-identifier hs-var">imod</span></a></span><span> </span><span class="annot"><span class="annottext">[(ModuleName, GenModule Unit)]
</span><a href="#local-6989586621681315660"><span class="hs-identifier hs-var">insts</span></a></span><span>
</span><span id="line-726"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstalledModule
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe InstantiatedModule
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. UniqDSet a
</span><a href="GHC.Types.Unique.DSet.html#emptyUniqDSet"><span class="hs-identifier hs-var">emptyUniqDSet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-727"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-728"></span><span>    </span><span id="local-6989586621681315657"><span class="annot"><span class="annottext">tryEpsAndHpt :: ExternalPackageState
-&gt; HomePackageTable -&gt; Maybe (UniqDSet ModuleName)
</span><a href="#local-6989586621681315657"><span class="hs-identifier hs-var hs-var">tryEpsAndHpt</span></a></span></span><span> </span><span id="local-6989586621681315652"><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315652"><span class="hs-identifier hs-var">eps</span></a></span></span><span> </span><span id="local-6989586621681315651"><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621681315651"><span class="hs-identifier hs-var">hpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-729"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface -&gt; UniqDSet ModuleName
</span><a href="GHC.Unit.Module.ModIface.html#mi_free_holes"><span class="hs-identifier hs-var">mi_free_holes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomePackageTable
-&gt; PackageIfaceTable -&gt; GenModule Unit -&gt; Maybe ModIface
</span><a href="GHC.Driver.Env.html#lookupIfaceByModule"><span class="hs-identifier hs-var">lookupIfaceByModule</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621681315651"><span class="hs-identifier hs-var">hpt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageIfaceTable
</span><a href="GHC.Unit.External.html#eps_PIT"><span class="hs-identifier hs-var">eps_PIT</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315652"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315665"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-730"></span><span>    </span><span id="local-6989586621681315655"><span class="annot"><span class="annottext">tryDepsCache :: ExternalPackageState
-&gt; InstalledModule
-&gt; [(ModuleName, GenModule Unit)]
-&gt; Maybe (UniqDSet ModuleName)
</span><a href="#local-6989586621681315655"><span class="hs-identifier hs-var hs-var">tryDepsCache</span></a></span></span><span> </span><span id="local-6989586621681315649"><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315649"><span class="hs-identifier hs-var">eps</span></a></span></span><span> </span><span id="local-6989586621681315648"><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315648"><span class="hs-identifier hs-var">imod</span></a></span></span><span> </span><span id="local-6989586621681315647"><span class="annot"><span class="annottext">[(ModuleName, GenModule Unit)]
</span><a href="#local-6989586621681315647"><span class="hs-identifier hs-var">insts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-731"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. InstalledModuleEnv a -&gt; InstalledModule -&gt; Maybe a
</span><a href="GHC.Unit.Module.Env.html#lookupInstalledModuleEnv"><span class="hs-identifier hs-var">lookupInstalledModuleEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; InstalledModuleEnv (UniqDSet ModuleName)
</span><a href="GHC.Unit.External.html#eps_free_holes"><span class="hs-identifier hs-var">eps_free_holes</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315649"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315648"><span class="hs-identifier hs-var">imod</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-732"></span><span>            </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681315644"><span class="annot"><span class="annottext">UniqDSet ModuleName
</span><a href="#local-6989586621681315644"><span class="hs-identifier hs-var">ifhs</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqDSet ModuleName
-&gt; [(ModuleName, GenModule Unit)] -&gt; UniqDSet ModuleName
</span><a href="GHC.Unit.Module.ModIface.html#renameFreeHoles"><span class="hs-identifier hs-var">renameFreeHoles</span></a></span><span> </span><span class="annot"><span class="annottext">UniqDSet ModuleName
</span><a href="#local-6989586621681315644"><span class="hs-identifier hs-var">ifhs</span></a></span><span> </span><span class="annot"><span class="annottext">[(ModuleName, GenModule Unit)]
</span><a href="#local-6989586621681315647"><span class="hs-identifier hs-var">insts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-733"></span><span>            </span><span id="local-6989586621681315642"><span class="annot"><span class="annottext">Maybe (UniqDSet ModuleName)
</span><a href="#local-6989586621681315642"><span class="hs-identifier hs-var">_otherwise</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-734"></span><span>    </span><span id="local-6989586621681315653"><span class="annot"><span class="annottext">readAndCache :: InstalledModule
-&gt; [(ModuleName, GenModule Unit)]
-&gt; TcRnIf gbl lcl (MaybeErr SDoc (UniqDSet ModuleName))
</span><a href="#local-6989586621681315653"><span class="hs-identifier hs-var hs-var">readAndCache</span></a></span></span><span> </span><span id="local-6989586621681315641"><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315641"><span class="hs-identifier hs-var">imod</span></a></span></span><span> </span><span id="local-6989586621681315640"><span class="annot"><span class="annottext">[(ModuleName, GenModule Unit)]
</span><a href="#local-6989586621681315640"><span class="hs-identifier hs-var">insts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-735"></span><span>        </span><span id="local-6989586621681315639"><span class="annot"><span class="annottext">MaybeErr SDoc (ModIface, String)
</span><a href="#local-6989586621681315639"><span class="hs-identifier hs-var">mb_iface</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl.
SDoc
-&gt; InstalledModule
-&gt; GenModule Unit
-&gt; IsBootInterface
-&gt; TcRnIf gbl lcl (MaybeErr SDoc (ModIface, String))
</span><a href="GHC.Iface.Load.html#findAndReadIface"><span class="hs-identifier hs-var">findAndReadIface</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;moduleFreeHolesPrecise&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315666"><span class="hs-identifier hs-var">doc_str</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315641"><span class="hs-identifier hs-var">imod</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315665"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span>
</span><span id="line-736"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MaybeErr SDoc (ModIface, String)
</span><a href="#local-6989586621681315639"><span class="hs-identifier hs-var">mb_iface</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-737"></span><span>            </span><span class="annot"><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-type">Succeeded</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315637"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315637"><span class="hs-identifier hs-var">iface</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-738"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315636"><span class="annot"><span class="annottext">ifhs :: UniqDSet ModuleName
</span><a href="#local-6989586621681315636"><span class="hs-identifier hs-var hs-var">ifhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModIface -&gt; UniqDSet ModuleName
</span><a href="GHC.Unit.Module.ModIface.html#mi_free_holes"><span class="hs-identifier hs-var">mi_free_holes</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315637"><span class="hs-identifier hs-var">iface</span></a></span><span>
</span><span id="line-739"></span><span>                </span><span class="hs-comment">-- Cache it</span><span>
</span><span id="line-740"></span><span>                </span><span class="annot"><span class="annottext">forall gbl lcl.
(ExternalPackageState -&gt; ExternalPackageState) -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#updateEps_"><span class="hs-identifier hs-var">updateEps_</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681315635"><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315635"><span class="hs-identifier hs-var">eps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-741"></span><span>                    </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315635"><span class="hs-identifier hs-var">eps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eps_free_holes :: InstalledModuleEnv (UniqDSet ModuleName)
</span><a href="GHC.Unit.External.html#eps_free_holes"><span class="hs-identifier hs-var">eps_free_holes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
InstalledModuleEnv a
-&gt; InstalledModule -&gt; a -&gt; InstalledModuleEnv a
</span><a href="GHC.Unit.Module.Env.html#extendInstalledModuleEnv"><span class="hs-identifier hs-var">extendInstalledModuleEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; InstalledModuleEnv (UniqDSet ModuleName)
</span><a href="GHC.Unit.External.html#eps_free_holes"><span class="hs-identifier hs-var">eps_free_holes</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315635"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315641"><span class="hs-identifier hs-var">imod</span></a></span><span> </span><span class="annot"><span class="annottext">UniqDSet ModuleName
</span><a href="#local-6989586621681315636"><span class="hs-identifier hs-var">ifhs</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-742"></span><span>                </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqDSet ModuleName
-&gt; [(ModuleName, GenModule Unit)] -&gt; UniqDSet ModuleName
</span><a href="GHC.Unit.Module.ModIface.html#renameFreeHoles"><span class="hs-identifier hs-var">renameFreeHoles</span></a></span><span> </span><span class="annot"><span class="annottext">UniqDSet ModuleName
</span><a href="#local-6989586621681315636"><span class="hs-identifier hs-var">ifhs</span></a></span><span> </span><span class="annot"><span class="annottext">[(ModuleName, GenModule Unit)]
</span><a href="#local-6989586621681315640"><span class="hs-identifier hs-var">insts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-743"></span><span>            </span><span class="annot"><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-type">Failed</span></a></span><span> </span><span id="local-6989586621681315633"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315633"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. err -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-var">Failed</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315633"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span class="annot"><a href="GHC.Iface.Load.html#wantHiBootFile"><span class="hs-identifier hs-type">wantHiBootFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Home.html#HomeUnit"><span class="hs-identifier hs-type">HomeUnit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#ExternalPackageState"><span class="hs-identifier hs-type">ExternalPackageState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#WhereFrom"><span class="hs-identifier hs-type">WhereFrom</span></a></span><span>
</span><span id="line-746"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html#MaybeErr"><span class="hs-identifier hs-type">MaybeErr</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#IsBootInterface"><span class="hs-identifier hs-type">IsBootInterface</span></a></span><span>
</span><span id="line-747"></span><span class="hs-comment">-- Figure out whether we want Foo.hi or Foo.hi-boot</span><span>
</span><span id="line-748"></span><span id="wantHiBootFile"><span class="annot"><span class="annottext">wantHiBootFile :: HomeUnit
-&gt; ExternalPackageState
-&gt; GenModule Unit
-&gt; WhereFrom
-&gt; MaybeErr SDoc IsBootInterface
</span><a href="GHC.Iface.Load.html#wantHiBootFile"><span class="hs-identifier hs-var hs-var">wantHiBootFile</span></a></span></span><span> </span><span id="local-6989586621681315632"><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621681315632"><span class="hs-identifier hs-var">home_unit</span></a></span></span><span> </span><span id="local-6989586621681315631"><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315631"><span class="hs-identifier hs-var">eps</span></a></span></span><span> </span><span id="local-6989586621681315630"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315630"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621681315629"><span class="annot"><span class="annottext">WhereFrom
</span><a href="#local-6989586621681315629"><span class="hs-identifier hs-var">from</span></a></span></span><span>
</span><span id="line-749"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">WhereFrom
</span><a href="#local-6989586621681315629"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-750"></span><span>       </span><span class="annot"><a href="GHC.Tc.Types.html#ImportByUser"><span class="hs-identifier hs-type">ImportByUser</span></a></span><span> </span><span id="local-6989586621681315628"><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315628"><span class="hs-identifier hs-var">usr_boot</span></a></span></span><span>
</span><span id="line-751"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315628"><span class="hs-identifier hs-var">usr_boot</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#IsBoot"><span class="hs-identifier hs-var">IsBoot</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">HomeUnit -&gt; GenModule Unit -&gt; Bool
</span><a href="GHC.Unit.Home.html#notHomeModule"><span class="hs-identifier hs-var">notHomeModule</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621681315632"><span class="hs-identifier hs-var">home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315630"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-752"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall err val. err -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-var">Failed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenModule Unit -&gt; SDoc
</span><a href="GHC.Iface.Load.html#badSourceImport"><span class="hs-identifier hs-var">badSourceImport</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315630"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-753"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315628"><span class="hs-identifier hs-var">usr_boot</span></a></span><span>
</span><span id="line-754"></span><span>
</span><span id="line-755"></span><span>       </span><span class="annot"><span class="annottext">WhereFrom
</span><a href="GHC.Tc.Types.html#ImportByPlugin"><span class="hs-identifier hs-var">ImportByPlugin</span></a></span><span>
</span><span id="line-756"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span>
</span><span id="line-757"></span><span>
</span><span id="line-758"></span><span>       </span><span class="annot"><span class="annottext">WhereFrom
</span><a href="GHC.Tc.Types.html#ImportBySystem"><span class="hs-identifier hs-var">ImportBySystem</span></a></span><span>
</span><span id="line-759"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HomeUnit -&gt; GenModule Unit -&gt; Bool
</span><a href="GHC.Unit.Home.html#notHomeModule"><span class="hs-identifier hs-var">notHomeModule</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621681315632"><span class="hs-identifier hs-var">home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315630"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-760"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span>
</span><span id="line-761"></span><span>             </span><span class="hs-comment">-- If the module to be imported is not from this package</span><span>
</span><span id="line-762"></span><span>             </span><span class="hs-comment">-- don't look it up in eps_is_boot, because that is keyed</span><span>
</span><span id="line-763"></span><span>             </span><span class="hs-comment">-- on the ModuleName of *home-package* modules only.</span><span>
</span><span id="line-764"></span><span>             </span><span class="hs-comment">-- We never import boot modules from other packages!</span><span>
</span><span id="line-765"></span><span>
</span><span id="line-766"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-767"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall key elt. Uniquable key =&gt; UniqFM key elt -&gt; key -&gt; Maybe elt
</span><a href="GHC.Types.Unique.FM.html#lookupUFM"><span class="hs-identifier hs-var">lookupUFM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; ModuleNameEnv ModuleNameWithIsBoot
</span><a href="GHC.Unit.External.html#eps_is_boot"><span class="hs-identifier hs-var">eps_is_boot</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315631"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315630"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-768"></span><span>                </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#GWIB"><span class="hs-identifier hs-type">GWIB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gwib_isBoot :: forall mod. GenWithIsBoot mod -&gt; IsBootInterface
</span><a href="GHC.Unit.Types.html#gwib_isBoot"><span class="hs-identifier hs-var">gwib_isBoot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315621"><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315621"><span class="hs-identifier hs-var">is_boot</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-769"></span><span>                  </span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315621"><span class="hs-identifier hs-var">is_boot</span></a></span><span>
</span><span id="line-770"></span><span>                </span><span class="annot"><span class="annottext">Maybe ModuleNameWithIsBoot
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-771"></span><span>                  </span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span>
</span><span id="line-772"></span><span>                     </span><span class="hs-comment">-- The boot-ness of the requested interface,</span><span>
</span><span id="line-773"></span><span>                     </span><span class="hs-comment">-- based on the dependencies in directly-imported modules</span><span>
</span><span id="line-774"></span><span>
</span><span id="line-775"></span><span class="annot"><a href="GHC.Iface.Load.html#badSourceImport"><span class="hs-identifier hs-type">badSourceImport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-776"></span><span id="badSourceImport"><span class="annot"><span class="annottext">badSourceImport :: GenModule Unit -&gt; SDoc
</span><a href="GHC.Iface.Load.html#badSourceImport"><span class="hs-identifier hs-var hs-var">badSourceImport</span></a></span></span><span> </span><span id="local-6989586621681315620"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315620"><span class="hs-identifier hs-var">mod</span></a></span></span><span>
</span><span id="line-777"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;You cannot {-# SOURCE #-} import a module from another package&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-778"></span><span>       </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;but&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315620"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PtrString -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ptext"><span class="hs-identifier hs-var">ptext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; PtrString
</span><a href="GHC.Data.FastString.html#sLit"><span class="hs-identifier hs-var">sLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is from package&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-779"></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315620"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-780"></span><span>
</span><span id="line-781"></span><span class="hs-comment">-----------------------------------------------------</span><span>
</span><span id="line-782"></span><span class="hs-comment">--      Loading type/class/value decls</span><span>
</span><span id="line-783"></span><span class="hs-comment">-- We pass the full Module name here, replete with</span><span>
</span><span id="line-784"></span><span class="hs-comment">-- its package info, so that we can build a Name for</span><span>
</span><span id="line-785"></span><span class="hs-comment">-- each binder with the right package info in it</span><span>
</span><span id="line-786"></span><span class="hs-comment">-- All subsequent lookups, including crucially lookups during typechecking</span><span>
</span><span id="line-787"></span><span class="hs-comment">-- the declaration itself, will find the fully-glorious Name</span><span>
</span><span id="line-788"></span><span class="hs-comment">--</span><span>
</span><span id="line-789"></span><span class="hs-comment">-- We handle ATs specially.  They are not main declarations, but also not</span><span>
</span><span id="line-790"></span><span class="hs-comment">-- implicit things (in particular, adding them to `implicitTyThings' would mess</span><span>
</span><span id="line-791"></span><span class="hs-comment">-- things up in the renaming/type checking of source programs).</span><span>
</span><span id="line-792"></span><span class="hs-comment">-----------------------------------------------------</span><span>
</span><span id="line-793"></span><span>
</span><span id="line-794"></span><span class="annot"><a href="GHC.Iface.Load.html#addDeclsToPTE"><span class="hs-identifier hs-type">addDeclsToPTE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#PackageTypeEnv"><span class="hs-identifier hs-type">PackageTypeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span class="annot"><a href="GHC.Types.TyThing.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#PackageTypeEnv"><span class="hs-identifier hs-type">PackageTypeEnv</span></a></span><span>
</span><span id="line-795"></span><span id="addDeclsToPTE"><span class="annot"><span class="annottext">addDeclsToPTE :: TypeEnv -&gt; [(Name, TyThing)] -&gt; TypeEnv
</span><a href="GHC.Iface.Load.html#addDeclsToPTE"><span class="hs-identifier hs-var hs-var">addDeclsToPTE</span></a></span></span><span> </span><span id="local-6989586621681315615"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681315615"><span class="hs-identifier hs-var">pte</span></a></span></span><span> </span><span id="local-6989586621681315614"><span class="annot"><span class="annottext">[(Name, TyThing)]
</span><a href="#local-6989586621681315614"><span class="hs-identifier hs-var">things</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. NameEnv a -&gt; [(Name, a)] -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#extendNameEnvList"><span class="hs-identifier hs-var">extendNameEnvList</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681315615"><span class="hs-identifier hs-var">pte</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, TyThing)]
</span><a href="#local-6989586621681315614"><span class="hs-identifier hs-var">things</span></a></span><span>
</span><span id="line-796"></span><span>
</span><span id="line-797"></span><span class="hs-comment">{-
*********************************************************
*                                                      *
\subsection{Reading an interface file}
*                                                      *
*********************************************************

Note [Home module load error]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
If the sought-for interface is in the current package (as determined
by -package-name flag) then it jolly well should already be in the HPT
because we process home-package modules in dependency order.  (Except
in one-shot mode; see notes with hsc_HPT decl in GHC.Driver.Env).

It is possible (though hard) to get this error through user behaviour.
  * Suppose package P (modules P1, P2) depends on package Q (modules Q1,
    Q2, with Q2 importing Q1)
  * We compile both packages.
  * Now we edit package Q so that it somehow depends on P
  * Now recompile Q with --make (without recompiling P).
  * Then Q1 imports, say, P1, which in turn depends on Q2. So Q2
    is a home-package module which is not yet in the HPT!  Disaster.

This actually happened with P=base, Q=ghc-prim, via the AMP warnings.
See #8320.
-}</span><span>
</span><span id="line-823"></span><span>
</span><span id="line-824"></span><span id="local-6989586621681316471"><span id="local-6989586621681316472"><span class="annot"><a href="GHC.Iface.Load.html#findAndReadIface"><span class="hs-identifier hs-type">findAndReadIface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-825"></span><span>                 </span><span class="hs-comment">-- The unique identifier of the on-disk module we're</span><span>
</span><span id="line-826"></span><span>                 </span><span class="hs-comment">-- looking for</span><span>
</span><span id="line-827"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#InstalledModule"><span class="hs-identifier hs-type">InstalledModule</span></a></span><span>
</span><span id="line-828"></span><span>                 </span><span class="hs-comment">-- The *actual* module we're looking for.  We use</span><span>
</span><span id="line-829"></span><span>                 </span><span class="hs-comment">-- this to check the consistency of the requirements</span><span>
</span><span id="line-830"></span><span>                 </span><span class="hs-comment">-- of the module we read out.</span><span>
</span><span id="line-831"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span>
</span><span id="line-832"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#IsBootInterface"><span class="hs-identifier hs-type">IsBootInterface</span></a></span><span>     </span><span class="hs-comment">-- True  &lt;=&gt; Look for a .hi-boot file</span><span>
</span><span id="line-833"></span><span>                                        </span><span class="hs-comment">-- False &lt;=&gt; Look for .hi file</span><span>
</span><span id="line-834"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcRnIf"><span class="hs-identifier hs-type">TcRnIf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316472"><span class="hs-identifier hs-type">gbl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316471"><span class="hs-identifier hs-type">lcl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Maybe.html#MaybeErr"><span class="hs-identifier hs-type">MaybeErr</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-835"></span><span>        </span><span class="hs-comment">-- Nothing &lt;=&gt; file not found, or unreadable, or illegible</span><span>
</span><span id="line-836"></span><span>        </span><span class="hs-comment">-- Just x  &lt;=&gt; successfully found and parsed</span><span>
</span><span id="line-837"></span><span>
</span><span id="line-838"></span><span>        </span><span class="hs-comment">-- It *doesn't* add an error to the monad, because</span><span>
</span><span id="line-839"></span><span>        </span><span class="hs-comment">-- sometimes it's ok to fail... see notes with loadInterface</span><span>
</span><span id="line-840"></span><span id="findAndReadIface"><span class="annot"><span class="annottext">findAndReadIface :: forall gbl lcl.
SDoc
-&gt; InstalledModule
-&gt; GenModule Unit
-&gt; IsBootInterface
-&gt; TcRnIf gbl lcl (MaybeErr SDoc (ModIface, String))
</span><a href="GHC.Iface.Load.html#findAndReadIface"><span class="hs-identifier hs-var hs-var">findAndReadIface</span></a></span></span><span> </span><span id="local-6989586621681315566"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315566"><span class="hs-identifier hs-var">doc_str</span></a></span></span><span> </span><span id="local-6989586621681315565"><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315565"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621681315564"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315564"><span class="hs-identifier hs-var">wanted_mod_with_insts</span></a></span></span><span> </span><span id="local-6989586621681315563"><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315563"><span class="hs-identifier hs-var">hi_boot_file</span></a></span></span><span>
</span><span id="line-841"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Reading&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-842"></span><span>                           </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315563"><span class="hs-identifier hs-var">hi_boot_file</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#IsBoot"><span class="hs-identifier hs-var">IsBoot</span></a></span><span>
</span><span id="line-843"></span><span>                             </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[boot]&quot;</span></span><span>
</span><span id="line-844"></span><span>                             </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-845"></span><span>                           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;interface for&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-846"></span><span>                           </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315565"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#semi"><span class="hs-identifier hs-var">semi</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-847"></span><span>                     </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reason:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315566"><span class="hs-identifier hs-var">doc_str</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-848"></span><span>
</span><span id="line-849"></span><span>       </span><span class="hs-comment">-- Check for GHC.Prim, and return its static interface</span><span>
</span><span id="line-850"></span><span>       </span><span class="hs-comment">-- See Note [GHC.Prim] in primops.txt.pp.</span><span>
</span><span id="line-851"></span><span>       </span><span class="hs-comment">-- TODO: make this check a function</span><span>
</span><span id="line-852"></span><span>       </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315565"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule -&gt; GenModule Unit -&gt; Bool
</span><a href="GHC.Unit.Module.html#installedModuleEq"><span class="hs-operator hs-var">`installedModuleEq`</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="GHC.Builtin.Names.html#gHC_PRIM"><span class="hs-identifier hs-var">gHC_PRIM</span></a></span><span>
</span><span id="line-853"></span><span>           </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-854"></span><span>               </span><span id="local-6989586621681315556"><span class="annot"><span class="annottext">Hooks
</span><a href="#local-6989586621681315556"><span class="hs-identifier hs-var">hooks</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasHooks m =&gt; m Hooks
</span><a href="GHC.Driver.Hooks.html#getHooks"><span class="hs-identifier hs-var">getHooks</span></a></span><span>
</span><span id="line-855"></span><span>               </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315554"><span class="annot"><span class="annottext">iface :: ModIface
</span><a href="#local-6989586621681315554"><span class="hs-identifier hs-var hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Hooks -&gt; Maybe ModIface
</span><a href="GHC.Driver.Hooks.html#ghcPrimIfaceHook"><span class="hs-identifier hs-var">ghcPrimIfaceHook</span></a></span><span> </span><span class="annot"><span class="annottext">Hooks
</span><a href="#local-6989586621681315556"><span class="hs-identifier hs-var">hooks</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-856"></span><span>                            </span><span class="annot"><span class="annottext">Maybe ModIface
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="GHC.Iface.Load.html#ghcPrimIface"><span class="hs-identifier hs-var">ghcPrimIface</span></a></span><span>
</span><span id="line-857"></span><span>                            </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681315551"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315551"><span class="hs-identifier hs-var">h</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315551"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-858"></span><span>               </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315554"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&lt;built in interface for GHC.Prim&gt;&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-859"></span><span>           </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-860"></span><span>               </span><span id="local-6989586621681315550"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315550"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-861"></span><span>               </span><span class="hs-comment">-- Look for the file</span><span>
</span><span id="line-862"></span><span>               </span><span id="local-6989586621681315549"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315549"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl HscEnv
</span><a href="GHC.Tc.Utils.Monad.html#getTopEnv"><span class="hs-identifier hs-var">getTopEnv</span></a></span><span>
</span><span id="line-863"></span><span>               </span><span id="local-6989586621681315548"><span class="annot"><span class="annottext">InstalledFindResult
</span><a href="#local-6989586621681315548"><span class="hs-identifier hs-var">mb_found</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.3.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; InstalledModule -&gt; IO InstalledFindResult
</span><a href="GHC.Unit.Finder.html#findExactModule"><span class="hs-identifier hs-var">findExactModule</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315549"><span class="hs-identifier hs-var">hsc_env</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315565"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-864"></span><span>               </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315546"><span class="annot"><span class="annottext">home_unit :: HomeUnit
</span><a href="#local-6989586621681315546"><span class="hs-identifier hs-var hs-var">home_unit</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; HomeUnit
</span><a href="GHC.Driver.Env.html#hsc_home_unit"><span class="hs-identifier hs-var">hsc_home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315549"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-865"></span><span>               </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">InstalledFindResult
</span><a href="#local-6989586621681315548"><span class="hs-identifier hs-var">mb_found</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-866"></span><span>                   </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#InstalledFound"><span class="hs-identifier hs-type">InstalledFound</span></a></span><span> </span><span id="local-6989586621681315544"><span class="annot"><span class="annottext">ModLocation
</span><a href="#local-6989586621681315544"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681315543"><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315543"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-867"></span><span>                       </span><span class="hs-comment">-- Found file, so read it</span><span>
</span><span id="line-868"></span><span>                       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315542"><span class="annot"><span class="annottext">file_path :: String
</span><a href="#local-6989586621681315542"><span class="hs-identifier hs-var hs-var">file_path</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IsBootInterface -&gt; String -&gt; String
</span><a href="GHC.Unit.Module.Location.html#addBootSuffix_maybe"><span class="hs-identifier hs-var">addBootSuffix_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315563"><span class="hs-identifier hs-var">hi_boot_file</span></a></span><span>
</span><span id="line-869"></span><span>                                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModLocation -&gt; String
</span><a href="GHC.Unit.Module.Location.html#ml_hi_file"><span class="hs-identifier hs-var">ml_hi_file</span></a></span><span> </span><span class="annot"><span class="annottext">ModLocation
</span><a href="#local-6989586621681315544"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-870"></span><span>
</span><span id="line-871"></span><span>                       </span><span class="hs-comment">-- See Note [Home module load error]</span><span>
</span><span id="line-872"></span><span>                       </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall u. GenHomeUnit u -&gt; InstalledModule -&gt; Bool
</span><a href="GHC.Unit.Home.html#isHomeInstalledModule"><span class="hs-identifier hs-var">isHomeInstalledModule</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621681315546"><span class="hs-identifier hs-var">home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315543"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-873"></span><span>                          </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcMode -&gt; Bool
</span><a href="GHC.Driver.Session.html#isOneShot"><span class="hs-identifier hs-var">isOneShot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; GhcMode
</span><a href="GHC.Driver.Session.html#ghcMode"><span class="hs-identifier hs-var">ghcMode</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315550"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-874"></span><span>                           </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. err -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-var">Failed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstalledModule -&gt; ModLocation -&gt; SDoc
</span><a href="GHC.Iface.Load.html#homeModError"><span class="hs-identifier hs-var">homeModError</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315543"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">ModLocation
</span><a href="#local-6989586621681315544"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-875"></span><span>                           </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681315536"><span class="annot"><span class="annottext">MaybeErr SDoc (ModIface, String)
</span><a href="#local-6989586621681315536"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; TcRnIf gbl lcl (MaybeErr SDoc (ModIface, String))
</span><a href="#local-6989586621681315535"><span class="hs-identifier hs-var">read_file</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315542"><span class="hs-identifier hs-var">file_path</span></a></span><span>
</span><span id="line-876"></span><span>                                   </span><span class="annot"><span class="annottext">MaybeErr SDoc (ModIface, String) -&gt; IOEnv (Env gbl lcl) ()
</span><a href="#local-6989586621681315534"><span class="hs-identifier hs-var">checkBuildDynamicToo</span></a></span><span> </span><span class="annot"><span class="annottext">MaybeErr SDoc (ModIface, String)
</span><a href="#local-6989586621681315536"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-877"></span><span>                                   </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">MaybeErr SDoc (ModIface, String)
</span><a href="#local-6989586621681315536"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-878"></span><span>                   </span><span id="local-6989586621681315533"><span class="annot"><span class="annottext">InstalledFindResult
</span><a href="#local-6989586621681315533"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-879"></span><span>                       </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;...not found&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-880"></span><span>                       </span><span id="local-6989586621681315532"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315532"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl HscEnv
</span><a href="GHC.Tc.Utils.Monad.html#getTopEnv"><span class="hs-identifier hs-var">getTopEnv</span></a></span><span>
</span><span id="line-881"></span><span>                       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315531"><span class="annot"><span class="annottext">profile :: Profile
</span><a href="#local-6989586621681315531"><span class="hs-identifier hs-var hs-var">profile</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Ways -&gt; Profile
</span><a href="GHC.Platform.Profile.html#Profile"><span class="hs-identifier hs-var">Profile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; Platform
</span><a href="GHC.Driver.Session.html#targetPlatform"><span class="hs-identifier hs-var">targetPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315550"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; Ways
</span><a href="GHC.Driver.Session.html#ways"><span class="hs-identifier hs-var">ways</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315550"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-882"></span><span>                       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall err val. err -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-var">Failed</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
-&gt; Profile
-&gt; ([String] -&gt; SDoc)
-&gt; ModuleName
-&gt; InstalledFindResult
-&gt; SDoc
</span><a href="GHC.Iface.Load.html#cannotFindInterface"><span class="hs-identifier hs-var">cannotFindInterface</span></a></span><span>
</span><span id="line-883"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; UnitEnv
</span><a href="GHC.Driver.Env.Types.html#hsc_unit_env"><span class="hs-identifier hs-var">hsc_unit_env</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315532"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-884"></span><span>                                           </span><span class="annot"><span class="annottext">Profile
</span><a href="#local-6989586621681315531"><span class="hs-identifier hs-var">profile</span></a></span><span>
</span><span id="line-885"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; [String] -&gt; SDoc
</span><a href="GHC.Iface.Load.html#may_show_locations"><span class="hs-identifier hs-var">may_show_locations</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; DynFlags
</span><a href="GHC.Driver.Env.Types.html#hsc_dflags"><span class="hs-identifier hs-var">hsc_dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315532"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-886"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315565"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-887"></span><span>                                           </span><span class="annot"><span class="annottext">InstalledFindResult
</span><a href="#local-6989586621681315533"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-888"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681315535"><span class="annot"><span class="annottext">read_file :: String -&gt; TcRnIf gbl lcl (MaybeErr SDoc (ModIface, String))
</span><a href="#local-6989586621681315535"><span class="hs-identifier hs-var hs-var">read_file</span></a></span></span><span> </span><span id="local-6989586621681315525"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315525"><span class="hs-identifier hs-var">file_path</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-889"></span><span>              </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;readIFace&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315525"><span class="hs-identifier hs-var">file_path</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-890"></span><span>              </span><span class="hs-comment">-- Figure out what is recorded in mi_module.  If this is</span><span>
</span><span id="line-891"></span><span>              </span><span class="hs-comment">-- a fully definite interface, it'll match exactly, but</span><span>
</span><span id="line-892"></span><span>              </span><span class="hs-comment">-- if it's indefinite, the inside will be uninstantiated!</span><span>
</span><span id="line-893"></span><span>              </span><span id="local-6989586621681315524"><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621681315524"><span class="hs-identifier hs-var">unit_state</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; UnitState
</span><a href="GHC.Driver.Env.html#hsc_units"><span class="hs-identifier hs-var">hsc_units</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl HscEnv
</span><a href="GHC.Tc.Utils.Monad.html#getTopEnv"><span class="hs-identifier hs-var">getTopEnv</span></a></span><span>
</span><span id="line-894"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315522"><span class="annot"><span class="annottext">wanted_mod :: GenModule Unit
</span><a href="#local-6989586621681315522"><span class="hs-identifier hs-var hs-var">wanted_mod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-895"></span><span>                    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenModule Unit -&gt; (InstalledModule, Maybe InstantiatedModule)
</span><a href="GHC.Unit.Module.html#getModuleInstantiation"><span class="hs-identifier hs-var">getModuleInstantiation</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315564"><span class="hs-identifier hs-var">wanted_mod_with_insts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-896"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstalledModule
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe InstantiatedModule
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315564"><span class="hs-identifier hs-var">wanted_mod_with_insts</span></a></span><span>
</span><span id="line-897"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstalledModule
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681315521"><span class="annot"><span class="annottext">InstantiatedModule
</span><a href="#local-6989586621681315521"><span class="hs-identifier hs-var">indef_mod</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-898"></span><span>                          </span><span class="annot"><span class="annottext">UnitState -&gt; InstantiatedModule -&gt; GenModule Unit
</span><a href="GHC.Unit.State.html#instModuleToModule"><span class="hs-identifier hs-var">instModuleToModule</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621681315524"><span class="hs-identifier hs-var">unit_state</span></a></span><span>
</span><span id="line-899"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstantiatedModule -&gt; InstantiatedModule
</span><a href="GHC.Unit.Module.html#uninstantiateInstantiatedModule"><span class="hs-identifier hs-var">uninstantiateInstantiatedModule</span></a></span><span> </span><span class="annot"><span class="annottext">InstantiatedModule
</span><a href="#local-6989586621681315521"><span class="hs-identifier hs-var">indef_mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-900"></span><span>              </span><span id="local-6989586621681315518"><span class="annot"><span class="annottext">MaybeErr SDoc ModIface
</span><a href="#local-6989586621681315518"><span class="hs-identifier hs-var">read_result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl.
GenModule Unit -&gt; String -&gt; TcRnIf gbl lcl (MaybeErr SDoc ModIface)
</span><a href="GHC.Iface.Load.html#readIface"><span class="hs-identifier hs-var">readIface</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315522"><span class="hs-identifier hs-var">wanted_mod</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315525"><span class="hs-identifier hs-var">file_path</span></a></span><span>
</span><span id="line-901"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MaybeErr SDoc ModIface
</span><a href="#local-6989586621681315518"><span class="hs-identifier hs-var">read_result</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-902"></span><span>                </span><span class="annot"><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-type">Failed</span></a></span><span> </span><span id="local-6989586621681315517"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315517"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. err -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-var">Failed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Iface.Load.html#badIfaceFile"><span class="hs-identifier hs-var">badIfaceFile</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315525"><span class="hs-identifier hs-var">file_path</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315517"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-903"></span><span>                </span><span class="annot"><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-type">Succeeded</span></a></span><span> </span><span id="local-6989586621681315515"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315515"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315515"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315525"><span class="hs-identifier hs-var">file_path</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-904"></span><span>                            </span><span class="hs-comment">-- Don't forget to fill in the package name...</span><span>
</span><span id="line-905"></span><span>
</span><span id="line-906"></span><span>          </span><span class="hs-comment">-- Indefinite interfaces are ALWAYS non-dynamic.</span><span>
</span><span id="line-907"></span><span>          </span><span id="local-6989586621681315534"><span class="annot"><span class="annottext">checkBuildDynamicToo :: MaybeErr SDoc (ModIface, String) -&gt; IOEnv (Env gbl lcl) ()
</span><a href="#local-6989586621681315534"><span class="hs-identifier hs-var hs-var">checkBuildDynamicToo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-type">Succeeded</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315514"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315514"><span class="hs-identifier hs-var">iface</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681315513"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315513"><span class="hs-identifier hs-var">_filePath</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-908"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenModule Unit -&gt; Bool
</span><a href="GHC.Unit.Module.html#moduleIsDefinite"><span class="hs-identifier hs-var">moduleIsDefinite</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; GenModule Unit
</span><a href="GHC.Unit.Module.ModIface.html#mi_module"><span class="hs-identifier hs-var">mi_module</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315514"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-909"></span><span>
</span><span id="line-910"></span><span>          </span><span class="annot"><a href="#local-6989586621681315534"><span class="hs-identifier hs-var">checkBuildDynamicToo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-type">Succeeded</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315512"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315512"><span class="hs-identifier hs-var">iface</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681315511"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315511"><span class="hs-identifier hs-var">filePath</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-911"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315510"><span class="annot"><span class="annottext">load_dynamic :: IOEnv (Env gbl lcl) ()
</span><a href="#local-6989586621681315510"><span class="hs-identifier hs-var hs-var">load_dynamic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-912"></span><span>                     </span><span id="local-6989586621681315509"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315509"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-913"></span><span>                     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315508"><span class="annot"><span class="annottext">dynFilePath :: String
</span><a href="#local-6989586621681315508"><span class="hs-identifier hs-var hs-var">dynFilePath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IsBootInterface -&gt; String -&gt; String
</span><a href="GHC.Unit.Module.Location.html#addBootSuffix_maybe"><span class="hs-identifier hs-var">addBootSuffix_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315563"><span class="hs-identifier hs-var">hi_boot_file</span></a></span><span>
</span><span id="line-914"></span><span>                                     </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#replaceExtension"><span class="hs-identifier hs-var">replaceExtension</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315511"><span class="hs-identifier hs-var">filePath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; String
</span><a href="GHC.Driver.Session.html#hiSuf"><span class="hs-identifier hs-var">hiSuf</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315509"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-915"></span><span>                     </span><span id="local-6989586621681315505"><span class="annot"><span class="annottext">MaybeErr SDoc (ModIface, String)
</span><a href="#local-6989586621681315505"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; TcRnIf gbl lcl (MaybeErr SDoc (ModIface, String))
</span><a href="#local-6989586621681315535"><span class="hs-identifier hs-var">read_file</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315508"><span class="hs-identifier hs-var">dynFilePath</span></a></span><span>
</span><span id="line-916"></span><span>                     </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MaybeErr SDoc (ModIface, String)
</span><a href="#local-6989586621681315505"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-917"></span><span>                         </span><span class="annot"><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-type">Succeeded</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315504"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315504"><span class="hs-identifier hs-var">dynIface</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-918"></span><span>                          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Unit.Module.ModIface.html#mi_mod_hash"><span class="hs-identifier hs-var">mi_mod_hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; IfaceBackendExts phase
</span><a href="GHC.Unit.Module.ModIface.html#mi_final_exts"><span class="hs-identifier hs-var">mi_final_exts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315512"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Unit.Module.ModIface.html#mi_mod_hash"><span class="hs-identifier hs-var">mi_mod_hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; IfaceBackendExts phase
</span><a href="GHC.Unit.Module.ModIface.html#mi_final_exts"><span class="hs-identifier hs-var">mi_final_exts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315504"><span class="hs-identifier hs-var">dynIface</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-919"></span><span>                             </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-920"></span><span>                          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-921"></span><span>                             </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Dynamic hash doesn't match&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-922"></span><span>                                </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). MonadIO m =&gt; DynFlags -&gt; m ()
</span><a href="GHC.Driver.Session.html#setDynamicTooFailed"><span class="hs-identifier hs-var">setDynamicTooFailed</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315509"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-923"></span><span>                         </span><span class="annot"><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-type">Failed</span></a></span><span> </span><span id="local-6989586621681315500"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315500"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-924"></span><span>                             </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Failed to load dynamic interface file:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315500"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-925"></span><span>                                </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). MonadIO m =&gt; DynFlags -&gt; m ()
</span><a href="GHC.Driver.Session.html#setDynamicTooFailed"><span class="hs-identifier hs-var">setDynamicTooFailed</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315509"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-926"></span><span>
</span><span id="line-927"></span><span>              </span><span id="local-6989586621681315499"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315499"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-928"></span><span>              </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). MonadIO m =&gt; DynFlags -&gt; m DynamicTooState
</span><a href="GHC.Driver.Session.html#dynamicTooState"><span class="hs-identifier hs-var">dynamicTooState</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315499"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-929"></span><span>                </span><span class="annot"><span class="annottext">DynamicTooState
</span><a href="GHC.Driver.Session.html#DT_Dont"><span class="hs-identifier hs-var">DT_Dont</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-930"></span><span>                </span><span class="annot"><span class="annottext">DynamicTooState
</span><a href="GHC.Driver.Session.html#DT_Failed"><span class="hs-identifier hs-var">DT_Failed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-931"></span><span>                </span><span class="annot"><span class="annottext">DynamicTooState
</span><a href="GHC.Driver.Session.html#DT_Dyn"><span class="hs-identifier hs-var">DT_Dyn</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env gbl lcl) ()
</span><a href="#local-6989586621681315510"><span class="hs-identifier hs-var">load_dynamic</span></a></span><span>
</span><span id="line-932"></span><span>                </span><span class="annot"><span class="annottext">DynamicTooState
</span><a href="GHC.Driver.Session.html#DT_OK"><span class="hs-identifier hs-var">DT_OK</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl a. TcRnIf gbl lcl a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#withDynamicNow"><span class="hs-identifier hs-var">withDynamicNow</span></a></span><span> </span><span class="annot"><span class="annottext">IOEnv (Env gbl lcl) ()
</span><a href="#local-6989586621681315510"><span class="hs-identifier hs-var">load_dynamic</span></a></span><span>
</span><span id="line-933"></span><span>
</span><span id="line-934"></span><span>          </span><span class="annot"><a href="#local-6989586621681315534"><span class="hs-identifier hs-var">checkBuildDynamicToo</span></a></span><span> </span><span class="annot"><span class="annottext">MaybeErr SDoc (ModIface, String)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-935"></span><span>
</span><span id="line-936"></span><span class="hs-comment">-- | Write interface file</span><span>
</span><span id="line-937"></span><span class="annot"><a href="GHC.Iface.Load.html#writeIface"><span class="hs-identifier hs-type">writeIface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-938"></span><span id="writeIface"><span class="annot"><span class="annottext">writeIface :: Logger -&gt; DynFlags -&gt; String -&gt; ModIface -&gt; IO ()
</span><a href="GHC.Iface.Load.html#writeIface"><span class="hs-identifier hs-var hs-var">writeIface</span></a></span></span><span> </span><span id="local-6989586621681315492"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681315492"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681315491"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315491"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681315490"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315490"><span class="hs-identifier hs-var">hi_file_path</span></a></span></span><span> </span><span id="local-6989586621681315489"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315489"><span class="hs-identifier hs-var">new_iface</span></a></span></span><span>
</span><span id="line-939"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; IO ()
</span><a href="../../directory-1.3.6.2/src/System-Directory.html#createDirectoryIfMissing"><span class="hs-identifier hs-var">createDirectoryIfMissing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="../../filepath-1.4.2.2/src/System-FilePath-Posix.html#takeDirectory"><span class="hs-identifier hs-var">takeDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315490"><span class="hs-identifier hs-var">hi_file_path</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-940"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315486"><span class="annot"><span class="annottext">printer :: TraceBinIFace
</span><a href="#local-6989586621681315486"><span class="hs-identifier hs-var hs-var">printer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; IO ()) -&gt; TraceBinIFace
</span><a href="GHC.Iface.Binary.html#TraceBinIFace"><span class="hs-identifier hs-var">TraceBinIFace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; Int -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier hs-var">debugTraceMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681315492"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315491"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span>
</span><span id="line-941"></span><span>             </span><span id="local-6989586621681315483"><span class="annot"><span class="annottext">profile :: Profile
</span><a href="#local-6989586621681315483"><span class="hs-identifier hs-var hs-var">profile</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Profile
</span><a href="GHC.Driver.Session.html#targetProfile"><span class="hs-identifier hs-var">targetProfile</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315491"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-942"></span><span>         </span><span class="annot"><span class="annottext">Profile -&gt; TraceBinIFace -&gt; String -&gt; ModIface -&gt; IO ()
</span><a href="GHC.Iface.Binary.html#writeBinIface"><span class="hs-identifier hs-var">writeBinIface</span></a></span><span> </span><span class="annot"><span class="annottext">Profile
</span><a href="#local-6989586621681315483"><span class="hs-identifier hs-var">profile</span></a></span><span> </span><span class="annot"><span class="annottext">TraceBinIFace
</span><a href="#local-6989586621681315486"><span class="hs-identifier hs-var">printer</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315490"><span class="hs-identifier hs-var">hi_file_path</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315489"><span class="hs-identifier hs-var">new_iface</span></a></span><span>
</span><span id="line-943"></span><span>
</span><span id="line-944"></span><span class="hs-comment">-- @readIface@ tries just the one file.</span><span>
</span><span id="line-945"></span><span id="local-6989586621681316425"><span id="local-6989586621681316426"><span class="annot"><a href="GHC.Iface.Load.html#readIface"><span class="hs-identifier hs-type">readIface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-946"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcRnIf"><span class="hs-identifier hs-type">TcRnIf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316426"><span class="hs-identifier hs-type">gbl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316425"><span class="hs-identifier hs-type">lcl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Maybe.html#MaybeErr"><span class="hs-identifier hs-type">MaybeErr</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-947"></span><span>        </span><span class="hs-comment">-- Failed err    &lt;=&gt; file not found, or unreadable, or illegible</span><span>
</span><span id="line-948"></span><span>        </span><span class="hs-comment">-- Succeeded iface &lt;=&gt; successfully found and parsed</span><span>
</span><span id="line-949"></span><span>
</span><span id="line-950"></span><span id="readIface"><span class="annot"><span class="annottext">readIface :: forall gbl lcl.
GenModule Unit -&gt; String -&gt; TcRnIf gbl lcl (MaybeErr SDoc ModIface)
</span><a href="GHC.Iface.Load.html#readIface"><span class="hs-identifier hs-var hs-var">readIface</span></a></span></span><span> </span><span id="local-6989586621681315473"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315473"><span class="hs-identifier hs-var">wanted_mod</span></a></span></span><span> </span><span id="local-6989586621681315472"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315472"><span class="hs-identifier hs-var">file_path</span></a></span></span><span>
</span><span id="line-951"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681315471"><span class="annot"><span class="annottext">Either SomeException ModIface
</span><a href="#local-6989586621681315471"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall env r. IOEnv env r -&gt; IOEnv env (Either SomeException r)
</span><a href="GHC.Data.IOEnv.html#tryMostM"><span class="hs-identifier hs-var">tryMostM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-952"></span><span>                 </span><span class="annot"><span class="annottext">forall a b.
CheckHiWay -&gt; TraceBinIFace -&gt; String -&gt; TcRnIf a b ModIface
</span><a href="GHC.Iface.Binary.html#readBinIface"><span class="hs-identifier hs-var">readBinIface</span></a></span><span> </span><span class="annot"><span class="annottext">CheckHiWay
</span><a href="GHC.Iface.Binary.html#CheckHiWay"><span class="hs-identifier hs-var">CheckHiWay</span></a></span><span> </span><span class="annot"><span class="annottext">TraceBinIFace
</span><a href="GHC.Iface.Binary.html#QuietBinIFace"><span class="hs-identifier hs-var">QuietBinIFace</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315472"><span class="hs-identifier hs-var">file_path</span></a></span><span>
</span><span id="line-953"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either SomeException ModIface
</span><a href="#local-6989586621681315471"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-954"></span><span>            </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621681315466"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315466"><span class="hs-identifier hs-var">iface</span></a></span></span><span>
</span><span id="line-955"></span><span>                </span><span class="hs-comment">-- NB: This check is NOT just a sanity check, it is</span><span>
</span><span id="line-956"></span><span>                </span><span class="hs-comment">-- critical for correctness of recompilation checking</span><span>
</span><span id="line-957"></span><span>                </span><span class="hs-comment">-- (it lets us tell when -this-unit-id has changed.)</span><span>
</span><span id="line-958"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315473"><span class="hs-identifier hs-var">wanted_mod</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315465"><span class="hs-identifier hs-var">actual_mod</span></a></span><span>
</span><span id="line-959"></span><span>                                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. val -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315466"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-960"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. err -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-var">Failed</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315464"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-961"></span><span>                </span><span class="hs-keyword">where</span><span>
</span><span id="line-962"></span><span>                  </span><span id="local-6989586621681315465"><span class="annot"><span class="annottext">actual_mod :: GenModule Unit
</span><a href="#local-6989586621681315465"><span class="hs-identifier hs-var hs-var">actual_mod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; GenModule Unit
</span><a href="GHC.Unit.Module.ModIface.html#mi_module"><span class="hs-identifier hs-var">mi_module</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315466"><span class="hs-identifier hs-var">iface</span></a></span><span>
</span><span id="line-963"></span><span>                  </span><span id="local-6989586621681315464"><span class="annot"><span class="annottext">err :: SDoc
</span><a href="#local-6989586621681315464"><span class="hs-identifier hs-var hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenModule Unit -&gt; GenModule Unit -&gt; SDoc
</span><a href="GHC.Iface.Load.html#hiModuleNameMismatchWarn"><span class="hs-identifier hs-var">hiModuleNameMismatchWarn</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315473"><span class="hs-identifier hs-var">wanted_mod</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315465"><span class="hs-identifier hs-var">actual_mod</span></a></span><span>
</span><span id="line-964"></span><span>
</span><span id="line-965"></span><span>            </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621681315462"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621681315462"><span class="hs-identifier hs-var">exn</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall err val. err -&gt; MaybeErr err val
</span><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-var">Failed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall e. Exception e =&gt; e -&gt; String
</span><a href="GHC.Utils.Panic.html#showException"><span class="hs-identifier hs-var">showException</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621681315462"><span class="hs-identifier hs-var">exn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-966"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-967"></span><span>
</span><span id="line-968"></span><span class="hs-comment">{-
*********************************************************
*                                                       *
        Wired-in interface for GHC.Prim
*                                                       *
*********************************************************
-}</span><span>
</span><span id="line-975"></span><span>
</span><span id="line-976"></span><span class="annot"><a href="GHC.Iface.Load.html#initExternalPackageState"><span class="hs-identifier hs-type">initExternalPackageState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#ExternalPackageState"><span class="hs-identifier hs-type">ExternalPackageState</span></a></span><span>
</span><span id="line-977"></span><span id="initExternalPackageState"><span class="annot"><span class="annottext">initExternalPackageState :: ExternalPackageState
</span><a href="GHC.Iface.Load.html#initExternalPackageState"><span class="hs-identifier hs-var hs-var">initExternalPackageState</span></a></span></span><span>
</span><span id="line-978"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#EPS"><span class="hs-identifier hs-type">EPS</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-979"></span><span>      </span><span class="annot"><span class="annottext">eps_is_boot :: ModuleNameEnv ModuleNameWithIsBoot
</span><a href="GHC.Unit.External.html#eps_is_boot"><span class="hs-identifier hs-var">eps_is_boot</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall key elt. UniqFM key elt
</span><a href="GHC.Types.Unique.FM.html#emptyUFM"><span class="hs-identifier hs-var">emptyUFM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-980"></span><span>      </span><span class="annot"><span class="annottext">eps_PIT :: PackageIfaceTable
</span><a href="GHC.Unit.External.html#eps_PIT"><span class="hs-identifier hs-var">eps_PIT</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageIfaceTable
</span><a href="GHC.Unit.External.html#emptyPackageIfaceTable"><span class="hs-identifier hs-var">emptyPackageIfaceTable</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-981"></span><span>      </span><span class="annot"><span class="annottext">eps_free_holes :: InstalledModuleEnv (UniqDSet ModuleName)
</span><a href="GHC.Unit.External.html#eps_free_holes"><span class="hs-identifier hs-var">eps_free_holes</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. InstalledModuleEnv a
</span><a href="GHC.Unit.Module.Env.html#emptyInstalledModuleEnv"><span class="hs-identifier hs-var">emptyInstalledModuleEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-982"></span><span>      </span><span class="annot"><span class="annottext">eps_PTE :: TypeEnv
</span><a href="GHC.Unit.External.html#eps_PTE"><span class="hs-identifier hs-var">eps_PTE</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="GHC.Types.TypeEnv.html#emptyTypeEnv"><span class="hs-identifier hs-var">emptyTypeEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-983"></span><span>      </span><span class="annot"><span class="annottext">eps_inst_env :: PackageInstEnv
</span><a href="GHC.Unit.External.html#eps_inst_env"><span class="hs-identifier hs-var">eps_inst_env</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageInstEnv
</span><a href="GHC.Core.InstEnv.html#emptyInstEnv"><span class="hs-identifier hs-var">emptyInstEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-984"></span><span>      </span><span class="annot"><span class="annottext">eps_fam_inst_env :: PackageFamInstEnv
</span><a href="GHC.Unit.External.html#eps_fam_inst_env"><span class="hs-identifier hs-var">eps_fam_inst_env</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageFamInstEnv
</span><a href="GHC.Core.FamInstEnv.html#emptyFamInstEnv"><span class="hs-identifier hs-var">emptyFamInstEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-985"></span><span>      </span><span class="annot"><span class="annottext">eps_rule_base :: PackageRuleBase
</span><a href="GHC.Unit.External.html#eps_rule_base"><span class="hs-identifier hs-var">eps_rule_base</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoreRule] -&gt; PackageRuleBase
</span><a href="GHC.Core.Rules.html#mkRuleBase"><span class="hs-identifier hs-var">mkRuleBase</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreRule]
</span><a href="GHC.Core.Opt.ConstantFold.html#builtinRules"><span class="hs-identifier hs-var">builtinRules</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-986"></span><span>        </span><span class="hs-comment">-- Initialise the EPS rule pool with the built-in rules</span><span>
</span><span id="line-987"></span><span>      </span><span class="annot"><span class="annottext">eps_mod_fam_inst_env :: ModuleEnv PackageFamInstEnv
</span><a href="GHC.Unit.External.html#eps_mod_fam_inst_env"><span class="hs-identifier hs-var">eps_mod_fam_inst_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. ModuleEnv a
</span><a href="GHC.Unit.Module.Env.html#emptyModuleEnv"><span class="hs-identifier hs-var">emptyModuleEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-988"></span><span>      </span><span class="annot"><span class="annottext">eps_complete_matches :: [CompleteMatch]
</span><a href="GHC.Unit.External.html#eps_complete_matches"><span class="hs-identifier hs-var">eps_complete_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-989"></span><span>      </span><span class="annot"><span class="annottext">eps_ann_env :: PackageAnnEnv
</span><a href="GHC.Unit.External.html#eps_ann_env"><span class="hs-identifier hs-var">eps_ann_env</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageAnnEnv
</span><a href="GHC.Types.Annotations.html#emptyAnnEnv"><span class="hs-identifier hs-var">emptyAnnEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-990"></span><span>      </span><span class="annot"><span class="annottext">eps_stats :: EpsStats
</span><a href="GHC.Unit.External.html#eps_stats"><span class="hs-identifier hs-var">eps_stats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#EpsStats"><span class="hs-identifier hs-type">EpsStats</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">n_ifaces_in :: Int
</span><a href="GHC.Unit.External.html#n_ifaces_in"><span class="hs-identifier hs-var">n_ifaces_in</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">n_decls_in :: Int
</span><a href="GHC.Unit.External.html#n_decls_in"><span class="hs-identifier hs-var">n_decls_in</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">n_decls_out :: Int
</span><a href="GHC.Unit.External.html#n_decls_out"><span class="hs-identifier hs-var">n_decls_out</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-991"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">n_insts_in :: Int
</span><a href="GHC.Unit.External.html#n_insts_in"><span class="hs-identifier hs-var">n_insts_in</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">n_insts_out :: Int
</span><a href="GHC.Unit.External.html#n_insts_out"><span class="hs-identifier hs-var">n_insts_out</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-992"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">n_rules_in :: Int
</span><a href="GHC.Unit.External.html#n_rules_in"><span class="hs-identifier hs-var">n_rules_in</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreRule]
</span><a href="GHC.Core.Opt.ConstantFold.html#builtinRules"><span class="hs-identifier hs-var">builtinRules</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">n_rules_out :: Int
</span><a href="GHC.Unit.External.html#n_rules_out"><span class="hs-identifier hs-var">n_rules_out</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-993"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-994"></span><span>
</span><span id="line-995"></span><span class="hs-comment">{-
*********************************************************
*                                                       *
        Wired-in interface for GHC.Prim
*                                                       *
*********************************************************
-}</span><span>
</span><span id="line-1002"></span><span>
</span><span id="line-1003"></span><span class="hs-comment">-- See Note [GHC.Prim] in primops.txt.pp.</span><span>
</span><span id="line-1004"></span><span class="annot"><a href="GHC.Iface.Load.html#ghcPrimIface"><span class="hs-identifier hs-type">ghcPrimIface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span>
</span><span id="line-1005"></span><span id="ghcPrimIface"><span class="annot"><span class="annottext">ghcPrimIface :: ModIface
</span><a href="GHC.Iface.Load.html#ghcPrimIface"><span class="hs-identifier hs-var hs-var">ghcPrimIface</span></a></span></span><span>
</span><span id="line-1006"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315442"><span class="hs-identifier hs-var">empty_iface</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1007"></span><span>        </span><span class="annot"><span class="annottext">mi_exports :: [IfaceExport]
</span><a href="GHC.Unit.Module.ModIface.html#mi_exports"><span class="hs-identifier hs-var">mi_exports</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[IfaceExport]
</span><a href="GHC.Builtin.Utils.html#ghcPrimExports"><span class="hs-identifier hs-var">ghcPrimExports</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1008"></span><span>        </span><span class="annot"><span class="annottext">mi_decls :: [IfaceDeclExts 'ModIfaceFinal]
</span><a href="GHC.Unit.Module.ModIface.html#mi_decls"><span class="hs-identifier hs-var">mi_decls</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1009"></span><span>        </span><span class="annot"><span class="annottext">mi_fixities :: [(OccName, Fixity)]
</span><a href="GHC.Unit.Module.ModIface.html#mi_fixities"><span class="hs-identifier hs-var">mi_fixities</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(OccName, Fixity)]
</span><a href="#local-6989586621681315438"><span class="hs-identifier hs-var">fixities</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1010"></span><span>        </span><span class="annot"><span class="annottext">mi_final_exts :: IfaceBackendExts 'ModIfaceFinal
</span><a href="GHC.Unit.Module.ModIface.html#mi_final_exts"><span class="hs-identifier hs-var">mi_final_exts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; IfaceBackendExts phase
</span><a href="GHC.Unit.Module.ModIface.html#mi_final_exts"><span class="hs-identifier hs-var">mi_final_exts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315442"><span class="hs-identifier hs-var">empty_iface</span></a></span><span class="hs-special">)</span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mi_fix_fn :: OccName -&gt; Maybe Fixity
</span><a href="GHC.Unit.Module.ModIface.html#mi_fix_fn"><span class="hs-identifier hs-var">mi_fix_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(OccName, Fixity)] -&gt; OccName -&gt; Maybe Fixity
</span><a href="GHC.Types.Fixity.Env.html#mkIfaceFixCache"><span class="hs-identifier hs-var">mkIfaceFixCache</span></a></span><span> </span><span class="annot"><span class="annottext">[(OccName, Fixity)]
</span><a href="#local-6989586621681315438"><span class="hs-identifier hs-var">fixities</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-1011"></span><span>        </span><span class="annot"><span class="annottext">mi_decl_docs :: DeclDocMap
</span><a href="GHC.Unit.Module.ModIface.html#mi_decl_docs"><span class="hs-identifier hs-var">mi_decl_docs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DeclDocMap
</span><a href="GHC.Builtin.Utils.html#ghcPrimDeclDocs"><span class="hs-identifier hs-var">ghcPrimDeclDocs</span></a></span><span> </span><span class="hs-comment">-- See Note [GHC.Prim Docs]</span><span>
</span><span id="line-1012"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1013"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1014"></span><span>    </span><span id="local-6989586621681315442"><span class="annot"><span class="annottext">empty_iface :: ModIface
</span><a href="#local-6989586621681315442"><span class="hs-identifier hs-var hs-var">empty_iface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenModule Unit -&gt; ModIface
</span><a href="GHC.Unit.Module.ModIface.html#emptyFullModIface"><span class="hs-identifier hs-var">emptyFullModIface</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="GHC.Builtin.Names.html#gHC_PRIM"><span class="hs-identifier hs-var">gHC_PRIM</span></a></span><span>
</span><span id="line-1015"></span><span>
</span><span id="line-1016"></span><span>    </span><span class="hs-comment">-- The fixity listed here for @`seq`@ should match</span><span>
</span><span id="line-1017"></span><span>    </span><span class="hs-comment">-- those in primops.txt.pp (from which Haddock docs are generated).</span><span>
</span><span id="line-1018"></span><span>    </span><span id="local-6989586621681315438"><span class="annot"><span class="annottext">fixities :: [(OccName, Fixity)]
</span><a href="#local-6989586621681315438"><span class="hs-identifier hs-var hs-var">fixities</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; OccName
</span><a href="GHC.Types.Name.html#getOccName"><span class="hs-identifier hs-var">getOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="GHC.Types.Id.Make.html#seqId"><span class="hs-identifier hs-var">seqId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SourceText -&gt; Int -&gt; FixityDirection -&gt; Fixity
</span><a href="GHC.Types.Fixity.html#Fixity"><span class="hs-identifier hs-var">Fixity</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="GHC.Types.SourceText.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">FixityDirection
</span><a href="GHC.Types.Fixity.html#InfixR"><span class="hs-identifier hs-var">InfixR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1019"></span><span>             </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#mapMaybe"><span class="hs-identifier hs-var">mapMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">PrimOp -&gt; Maybe (OccName, Fixity)
</span><a href="#local-6989586621681315426"><span class="hs-identifier hs-var">mkFixity</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimOp]
</span><a href="GHC.Builtin.PrimOps.html#allThePrimOps"><span class="hs-identifier hs-var">allThePrimOps</span></a></span><span>
</span><span id="line-1020"></span><span>    </span><span id="local-6989586621681315426"><span class="annot"><span class="annottext">mkFixity :: PrimOp -&gt; Maybe (OccName, Fixity)
</span><a href="#local-6989586621681315426"><span class="hs-identifier hs-var hs-var">mkFixity</span></a></span></span><span> </span><span id="local-6989586621681315424"><span class="annot"><span class="annottext">PrimOp
</span><a href="#local-6989586621681315424"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimOp -&gt; OccName
</span><a href="GHC.Builtin.PrimOps.html#primOpOcc"><span class="hs-identifier hs-var">primOpOcc</span></a></span><span> </span><span class="annot"><span class="annottext">PrimOp
</span><a href="#local-6989586621681315424"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PrimOp -&gt; Maybe Fixity
</span><a href="GHC.Builtin.PrimOps.html#primOpFixity"><span class="hs-identifier hs-var">primOpFixity</span></a></span><span> </span><span class="annot"><span class="annottext">PrimOp
</span><a href="#local-6989586621681315424"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-1021"></span><span>
</span><span id="line-1022"></span><span class="hs-comment">{-
*********************************************************
*                                                      *
\subsection{Statistics}
*                                                      *
*********************************************************
-}</span><span>
</span><span id="line-1029"></span><span>
</span><span id="line-1030"></span><span class="annot"><a href="GHC.Iface.Load.html#ifaceStats"><span class="hs-identifier hs-type">ifaceStats</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#ExternalPackageState"><span class="hs-identifier hs-type">ExternalPackageState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1031"></span><span id="ifaceStats"><span class="annot"><span class="annottext">ifaceStats :: ExternalPackageState -&gt; SDoc
</span><a href="GHC.Iface.Load.html#ifaceStats"><span class="hs-identifier hs-var hs-var">ifaceStats</span></a></span></span><span> </span><span id="local-6989586621681315423"><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315423"><span class="hs-identifier hs-var">eps</span></a></span></span><span>
</span><span id="line-1032"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hcat"><span class="hs-identifier hs-var">hcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Renamer stats: &quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315421"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1033"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1034"></span><span>    </span><span id="local-6989586621681315420"><span class="annot"><span class="annottext">stats :: EpsStats
</span><a href="#local-6989586621681315420"><span class="hs-identifier hs-var hs-var">stats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExternalPackageState -&gt; EpsStats
</span><a href="GHC.Unit.External.html#eps_stats"><span class="hs-identifier hs-var">eps_stats</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681315423"><span class="hs-identifier hs-var">eps</span></a></span><span>
</span><span id="line-1035"></span><span>    </span><span id="local-6989586621681315421"><span class="annot"><span class="annottext">msg :: SDoc
</span><a href="#local-6989586621681315421"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1036"></span><span>        </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_ifaces_in"><span class="hs-identifier hs-var">n_ifaces_in</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621681315420"><span class="hs-identifier hs-var">stats</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;interfaces read&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1037"></span><span>         </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_decls_out"><span class="hs-identifier hs-var">n_decls_out</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621681315420"><span class="hs-identifier hs-var">stats</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type/class/variable imported, out of&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1038"></span><span>                </span><span class="annot"><span class="annottext">Int -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_decls_in"><span class="hs-identifier hs-var">n_decls_in</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621681315420"><span class="hs-identifier hs-var">stats</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;read&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1039"></span><span>         </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_insts_out"><span class="hs-identifier hs-var">n_insts_out</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621681315420"><span class="hs-identifier hs-var">stats</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;instance decls imported, out of&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1040"></span><span>                </span><span class="annot"><span class="annottext">Int -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_insts_in"><span class="hs-identifier hs-var">n_insts_in</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621681315420"><span class="hs-identifier hs-var">stats</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;read&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1041"></span><span>         </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_rules_out"><span class="hs-identifier hs-var">n_rules_out</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621681315420"><span class="hs-identifier hs-var">stats</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rule decls imported, out of&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1042"></span><span>                </span><span class="annot"><span class="annottext">Int -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_rules_in"><span class="hs-identifier hs-var">n_rules_in</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621681315420"><span class="hs-identifier hs-var">stats</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;read&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-1043"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1044"></span><span>
</span><span id="line-1045"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Printing interfaces
*                                                                      *
************************************************************************

Note [Name qualification with --show-iface]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In order to disambiguate between identifiers from different modules, we qualify
all names that don't originate in the current module. In order to keep visual
noise as low as possible, we keep local names unqualified.

For some background on this choice see trac #15269.
-}</span><span>
</span><span id="line-1061"></span><span>
</span><span id="line-1062"></span><span class="hs-comment">-- | Read binary interface, and print it out</span><span>
</span><span id="line-1063"></span><span class="annot"><a href="GHC.Iface.Load.html#showIface"><span class="hs-identifier hs-type">showIface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Env.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1064"></span><span id="showIface"><span class="annot"><span class="annottext">showIface :: HscEnv -&gt; String -&gt; IO ()
</span><a href="GHC.Iface.Load.html#showIface"><span class="hs-identifier hs-var hs-var">showIface</span></a></span></span><span> </span><span id="local-6989586621681315418"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315418"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span id="local-6989586621681315417"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315417"><span class="hs-identifier hs-var">filename</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1065"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315416"><span class="annot"><span class="annottext">dflags :: DynFlags
</span><a href="#local-6989586621681315416"><span class="hs-identifier hs-var hs-var">dflags</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; DynFlags
</span><a href="GHC.Driver.Env.Types.html#hsc_dflags"><span class="hs-identifier hs-var">hsc_dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315418"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-1066"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315415"><span class="annot"><span class="annottext">logger :: Logger
</span><a href="#local-6989586621681315415"><span class="hs-identifier hs-var hs-var">logger</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; Logger
</span><a href="GHC.Driver.Env.Types.html#hsc_logger"><span class="hs-identifier hs-var">hsc_logger</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315418"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-1067"></span><span>       </span><span id="local-6989586621681315414"><span class="annot"><span class="annottext">unit_state :: UnitState
</span><a href="#local-6989586621681315414"><span class="hs-identifier hs-var hs-var">unit_state</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; UnitState
</span><a href="GHC.Driver.Env.html#hsc_units"><span class="hs-identifier hs-var">hsc_units</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315418"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-1068"></span><span>       </span><span id="local-6989586621681315413"><span class="annot"><span class="annottext">printer :: SDoc -&gt; IO ()
</span><a href="#local-6989586621681315413"><span class="hs-identifier hs-var hs-var">printer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; LogAction
</span><a href="GHC.Utils.Logger.html#putLogMsg"><span class="hs-identifier hs-var">putLogMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681315415"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315416"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><a href="GHC.Driver.Flags.html#NoReason"><span class="hs-identifier hs-var">NoReason</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevOutput"><span class="hs-identifier hs-var">SevOutput</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultDumpStyle"><span class="hs-identifier hs-var">defaultDumpStyle</span></a></span><span>
</span><span id="line-1069"></span><span>
</span><span id="line-1070"></span><span>   </span><span class="hs-comment">-- skip the hi way check; we don't want to worry about profiled vs.</span><span>
</span><span id="line-1071"></span><span>   </span><span class="hs-comment">-- non-profiled interfaces, for example.</span><span>
</span><span id="line-1072"></span><span>   </span><span id="local-6989586621681315406"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315406"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl a.
Char -&gt; HscEnv -&gt; gbl -&gt; lcl -&gt; TcRnIf gbl lcl a -&gt; IO a
</span><a href="GHC.Tc.Utils.Monad.html#initTcRnIf"><span class="hs-identifier hs-var">initTcRnIf</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'s'</span></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315418"><span class="hs-identifier hs-var">hsc_env</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1073"></span><span>       </span><span class="annot"><span class="annottext">forall a b.
CheckHiWay -&gt; TraceBinIFace -&gt; String -&gt; TcRnIf a b ModIface
</span><a href="GHC.Iface.Binary.html#readBinIface"><span class="hs-identifier hs-var">readBinIface</span></a></span><span> </span><span class="annot"><span class="annottext">CheckHiWay
</span><a href="GHC.Iface.Binary.html#IgnoreHiWay"><span class="hs-identifier hs-var">IgnoreHiWay</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SDoc -&gt; IO ()) -&gt; TraceBinIFace
</span><a href="GHC.Iface.Binary.html#TraceBinIFace"><span class="hs-identifier hs-var">TraceBinIFace</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; IO ()
</span><a href="#local-6989586621681315413"><span class="hs-identifier hs-var">printer</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315417"><span class="hs-identifier hs-var">filename</span></a></span><span>
</span><span id="line-1074"></span><span>
</span><span id="line-1075"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- See Note [Name qualification with --show-iface]</span><span>
</span><span id="line-1076"></span><span>       </span><span id="local-6989586621681315403"><span class="annot"><span class="annottext">qualifyImportedNames :: GenModule Unit -&gt; OccName -&gt; QualifyName
</span><a href="#local-6989586621681315403"><span class="hs-identifier hs-var hs-var">qualifyImportedNames</span></a></span></span><span> </span><span id="local-6989586621681315402"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315402"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1077"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315402"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; GenModule Unit
</span><a href="GHC.Unit.Module.ModIface.html#mi_module"><span class="hs-identifier hs-var">mi_module</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315406"><span class="hs-identifier hs-var">iface</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualifyName
</span><a href="GHC.Utils.Outputable.html#NameUnqual"><span class="hs-identifier hs-var">NameUnqual</span></a></span><span>
</span><span id="line-1078"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualifyName
</span><a href="GHC.Utils.Outputable.html#NameNotInScope1"><span class="hs-identifier hs-var">NameNotInScope1</span></a></span><span>
</span><span id="line-1079"></span><span>       </span><span id="local-6989586621681315399"><span class="annot"><span class="annottext">print_unqual :: PrintUnqualified
</span><a href="#local-6989586621681315399"><span class="hs-identifier hs-var hs-var">print_unqual</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenModule Unit -&gt; OccName -&gt; QualifyName)
-&gt; (GenModule Unit -&gt; Bool)
-&gt; QueryQualifyPackage
-&gt; PrintUnqualified
</span><a href="GHC.Utils.Outputable.html#QueryQualify"><span class="hs-identifier hs-var">QueryQualify</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit -&gt; OccName -&gt; QualifyName
</span><a href="#local-6989586621681315403"><span class="hs-identifier hs-var">qualifyImportedNames</span></a></span><span>
</span><span id="line-1080"></span><span>                                   </span><span class="annot"><span class="annottext">GenModule Unit -&gt; Bool
</span><a href="GHC.Utils.Outputable.html#neverQualifyModules"><span class="hs-identifier hs-var">neverQualifyModules</span></a></span><span>
</span><span id="line-1081"></span><span>                                   </span><span class="annot"><span class="annottext">QueryQualifyPackage
</span><a href="GHC.Utils.Outputable.html#neverQualifyPackages"><span class="hs-identifier hs-var">neverQualifyPackages</span></a></span><span>
</span><span id="line-1082"></span><span>   </span><span class="annot"><span class="annottext">Logger -&gt; LogAction
</span><a href="GHC.Utils.Logger.html#putLogMsg"><span class="hs-identifier hs-var">putLogMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681315415"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315416"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><a href="GHC.Driver.Flags.html#NoReason"><span class="hs-identifier hs-var">NoReason</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevDump"><span class="hs-identifier hs-var">SevDump</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span>
</span><span id="line-1083"></span><span>      </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrintUnqualified -&gt; PprStyle
</span><a href="GHC.Utils.Outputable.html#mkDumpStyle"><span class="hs-identifier hs-var">mkDumpStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="#local-6989586621681315399"><span class="hs-identifier hs-var">print_unqual</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1084"></span><span>      </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; ModIface -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprModIface"><span class="hs-identifier hs-var">pprModIface</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621681315414"><span class="hs-identifier hs-var">unit_state</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315406"><span class="hs-identifier hs-var">iface</span></a></span><span>
</span><span id="line-1085"></span><span>
</span><span id="line-1086"></span><span class="hs-comment">-- | Show a ModIface but don't display details; suitable for ModIfaces stored in</span><span>
</span><span id="line-1087"></span><span class="hs-comment">-- the EPT.</span><span>
</span><span id="line-1088"></span><span class="annot"><a href="GHC.Iface.Load.html#pprModIfaceSimple"><span class="hs-identifier hs-type">pprModIfaceSimple</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.State.html#UnitState"><span class="hs-identifier hs-type">UnitState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1089"></span><span id="pprModIfaceSimple"><span class="annot"><span class="annottext">pprModIfaceSimple :: UnitState -&gt; ModIface -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprModIfaceSimple"><span class="hs-identifier hs-var hs-var">pprModIfaceSimple</span></a></span></span><span> </span><span id="local-6989586621681315393"><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621681315393"><span class="hs-identifier hs-var">unit_state</span></a></span></span><span> </span><span id="local-6989586621681315392"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315392"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1090"></span><span>    </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; GenModule Unit
</span><a href="GHC.Unit.Module.ModIface.html#mi_module"><span class="hs-identifier hs-var">mi_module</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315392"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1091"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; Dependencies -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprDeps"><span class="hs-identifier hs-var">pprDeps</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621681315393"><span class="hs-identifier hs-var">unit_state</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Dependencies
</span><a href="GHC.Unit.Module.ModIface.html#mi_deps"><span class="hs-identifier hs-var">mi_deps</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315392"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1092"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExport -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprExport"><span class="hs-identifier hs-var">pprExport</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceExport]
</span><a href="GHC.Unit.Module.ModIface.html#mi_exports"><span class="hs-identifier hs-var">mi_exports</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315392"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1093"></span><span>
</span><span id="line-1094"></span><span class="hs-comment">-- | Show a ModIface</span><span>
</span><span id="line-1095"></span><span class="hs-comment">--</span><span>
</span><span id="line-1096"></span><span class="hs-comment">-- The UnitState is used to pretty-print units</span><span>
</span><span id="line-1097"></span><span class="annot"><a href="GHC.Iface.Load.html#pprModIface"><span class="hs-identifier hs-type">pprModIface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.State.html#UnitState"><span class="hs-identifier hs-type">UnitState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1098"></span><span id="pprModIface"><span class="annot"><span class="annottext">pprModIface :: UnitState -&gt; ModIface -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprModIface"><span class="hs-identifier hs-var hs-var">pprModIface</span></a></span></span><span> </span><span id="local-6989586621681315388"><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621681315388"><span class="hs-identifier hs-var">unit_state</span></a></span></span><span> </span><span id="local-6989586621681315387"><span class="annot"><span class="annottext">iface :: ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mi_final_exts :: forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; IfaceBackendExts phase
</span><a href="GHC.Unit.Module.ModIface.html#mi_final_exts"><span class="hs-identifier hs-var">mi_final_exts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315385"><span class="annot"><span class="annottext">IfaceBackendExts 'ModIfaceFinal
</span><a href="#local-6989586621681315385"><span class="hs-identifier hs-var">exts</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1099"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;interface&quot;</span></span><span>
</span><span id="line-1100"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; GenModule Unit
</span><a href="GHC.Unit.Module.ModIface.html#mi_module"><span class="hs-identifier hs-var">mi_module</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">HscSource -&gt; SDoc
</span><a href="#local-6989586621681315384"><span class="hs-identifier hs-var">pp_hsc_src</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; HscSource
</span><a href="GHC.Unit.Module.ModIface.html#mi_hsc_src"><span class="hs-identifier hs-var">mi_hsc_src</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1101"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Bool
</span><a href="GHC.Unit.Module.ModIface.html#mi_orphan"><span class="hs-identifier hs-var">mi_orphan</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBackendExts 'ModIfaceFinal
</span><a href="#local-6989586621681315385"><span class="hs-identifier hs-var">exts</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[orphan module]&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1102"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Bool
</span><a href="GHC.Unit.Module.ModIface.html#mi_finsts"><span class="hs-identifier hs-var">mi_finsts</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBackendExts 'ModIfaceFinal
</span><a href="#local-6989586621681315385"><span class="hs-identifier hs-var">exts</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[family instance module]&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1103"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Bool
</span><a href="GHC.Unit.Module.ModIface.html#mi_hpc"><span class="hs-identifier hs-var">mi_hpc</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[hpc]&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1104"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#integer"><span class="hs-identifier hs-var">integer</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="GHC.Settings.Constants.html#hiVersion"><span class="hs-identifier hs-var">hiVersion</span></a></span><span>
</span><span id="line-1105"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;interface hash:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Unit.Module.ModIface.html#mi_iface_hash"><span class="hs-identifier hs-var">mi_iface_hash</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBackendExts 'ModIfaceFinal
</span><a href="#local-6989586621681315385"><span class="hs-identifier hs-var">exts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1106"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ABI hash:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Unit.Module.ModIface.html#mi_mod_hash"><span class="hs-identifier hs-var">mi_mod_hash</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBackendExts 'ModIfaceFinal
</span><a href="#local-6989586621681315385"><span class="hs-identifier hs-var">exts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1107"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;export-list hash:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Unit.Module.ModIface.html#mi_exp_hash"><span class="hs-identifier hs-var">mi_exp_hash</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBackendExts 'ModIfaceFinal
</span><a href="#local-6989586621681315385"><span class="hs-identifier hs-var">exts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1108"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;orphan hash:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Unit.Module.ModIface.html#mi_orphan_hash"><span class="hs-identifier hs-var">mi_orphan_hash</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBackendExts 'ModIfaceFinal
</span><a href="#local-6989586621681315385"><span class="hs-identifier hs-var">exts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1109"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;flag hash:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Unit.Module.ModIface.html#mi_flag_hash"><span class="hs-identifier hs-var">mi_flag_hash</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBackendExts 'ModIfaceFinal
</span><a href="#local-6989586621681315385"><span class="hs-identifier hs-var">exts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1110"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;opt_hash:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Unit.Module.ModIface.html#mi_opt_hash"><span class="hs-identifier hs-var">mi_opt_hash</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBackendExts 'ModIfaceFinal
</span><a href="#local-6989586621681315385"><span class="hs-identifier hs-var">exts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1111"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hpc_hash:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Unit.Module.ModIface.html#mi_hpc_hash"><span class="hs-identifier hs-var">mi_hpc_hash</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBackendExts 'ModIfaceFinal
</span><a href="#local-6989586621681315385"><span class="hs-identifier hs-var">exts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1112"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;plugin_hash:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Unit.Module.ModIface.html#mi_plugin_hash"><span class="hs-identifier hs-var">mi_plugin_hash</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBackendExts 'ModIfaceFinal
</span><a href="#local-6989586621681315385"><span class="hs-identifier hs-var">exts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1113"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sig of:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; Maybe (GenModule Unit)
</span><a href="GHC.Unit.Module.ModIface.html#mi_sig_of"><span class="hs-identifier hs-var">mi_sig_of</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1114"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;used TH splices:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Bool
</span><a href="GHC.Unit.Module.ModIface.html#mi_used_th"><span class="hs-identifier hs-var">mi_used_th</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1115"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;where&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1116"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;exports:&quot;</span></span><span>
</span><span id="line-1117"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExport -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprExport"><span class="hs-identifier hs-var">pprExport</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceExport]
</span><a href="GHC.Unit.Module.ModIface.html#mi_exports"><span class="hs-identifier hs-var">mi_exports</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1118"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; Dependencies -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprDeps"><span class="hs-identifier hs-var">pprDeps</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621681315388"><span class="hs-identifier hs-var">unit_state</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Dependencies
</span><a href="GHC.Unit.Module.ModIface.html#mi_deps"><span class="hs-identifier hs-var">mi_deps</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1119"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Usage -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprUsage"><span class="hs-identifier hs-var">pprUsage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [Usage]
</span><a href="GHC.Unit.Module.ModIface.html#mi_usages"><span class="hs-identifier hs-var">mi_usages</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1120"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceAnnotation -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprIfaceAnnotation"><span class="hs-identifier hs-var">pprIfaceAnnotation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceAnnotation]
</span><a href="GHC.Unit.Module.ModIface.html#mi_anns"><span class="hs-identifier hs-var">mi_anns</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1121"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(OccName, Fixity)] -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprFixities"><span class="hs-identifier hs-var">pprFixities</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [(OccName, Fixity)]
</span><a href="GHC.Unit.Module.ModIface.html#mi_fixities"><span class="hs-identifier hs-var">mi_fixities</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1122"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681315364"><span class="hs-identifier hs-var">ver</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681315363"><span class="hs-identifier hs-var">decl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315364"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681315364"><span class="hs-identifier hs-var">ver</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681315363"><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681315363"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceDeclExts phase]
</span><a href="GHC.Unit.Module.ModIface.html#mi_decls"><span class="hs-identifier hs-var">mi_decls</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1123"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceClsInst]
</span><a href="GHC.Unit.Module.ModIface.html#mi_insts"><span class="hs-identifier hs-var">mi_insts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1124"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceFamInst]
</span><a href="GHC.Unit.Module.ModIface.html#mi_fam_insts"><span class="hs-identifier hs-var">mi_fam_insts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1125"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceRule]
</span><a href="GHC.Unit.Module.ModIface.html#mi_rules"><span class="hs-identifier hs-var">mi_rules</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1126"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Warnings
</span><a href="GHC.Unit.Module.ModIface.html#mi_warns"><span class="hs-identifier hs-var">mi_warns</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1127"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IfaceTrustInfo -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprTrustInfo"><span class="hs-identifier hs-var">pprTrustInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; IfaceTrustInfo
</span><a href="GHC.Unit.Module.ModIface.html#mi_trust"><span class="hs-identifier hs-var">mi_trust</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1128"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprTrustPkg"><span class="hs-identifier hs-var">pprTrustPkg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Bool
</span><a href="GHC.Unit.Module.ModIface.html#mi_trust_pkg"><span class="hs-identifier hs-var">mi_trust_pkg</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1129"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceCompleteMatch]
</span><a href="GHC.Unit.Module.ModIface.html#mi_complete_matches"><span class="hs-identifier hs-var">mi_complete_matches</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1130"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;module header:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; Maybe HsDocString
</span><a href="GHC.Unit.Module.ModIface.html#mi_doc_hdr"><span class="hs-identifier hs-var">mi_doc_hdr</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1131"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;declaration docs:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; DeclDocMap
</span><a href="GHC.Unit.Module.ModIface.html#mi_decl_docs"><span class="hs-identifier hs-var">mi_decl_docs</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1132"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;arg docs:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; ArgDocMap
</span><a href="GHC.Unit.Module.ModIface.html#mi_arg_docs"><span class="hs-identifier hs-var">mi_arg_docs</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1133"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;extensible fields:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExtensibleFields -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprExtensibleFields"><span class="hs-identifier hs-var">pprExtensibleFields</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; ExtensibleFields
</span><a href="GHC.Unit.Module.ModIface.html#mi_ext_fields"><span class="hs-identifier hs-var">mi_ext_fields</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681315387"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1134"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1135"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1136"></span><span>    </span><span id="local-6989586621681315384"><span class="annot"><span class="annottext">pp_hsc_src :: HscSource -&gt; SDoc
</span><a href="#local-6989586621681315384"><span class="hs-identifier hs-var hs-var">pp_hsc_src</span></a></span></span><span> </span><span class="annot"><span class="annottext">HscSource
</span><a href="GHC.Types.SourceFile.html#HsBootFile"><span class="hs-identifier hs-var">HsBootFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[boot]&quot;</span></span><span>
</span><span id="line-1137"></span><span>    </span><span class="annot"><a href="#local-6989586621681315384"><span class="hs-identifier hs-var">pp_hsc_src</span></a></span><span> </span><span class="annot"><span class="annottext">HscSource
</span><a href="GHC.Types.SourceFile.html#HsigFile"><span class="hs-identifier hs-var">HsigFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[hsig]&quot;</span></span><span>
</span><span id="line-1138"></span><span>    </span><span class="annot"><a href="#local-6989586621681315384"><span class="hs-identifier hs-var">pp_hsc_src</span></a></span><span> </span><span class="annot"><span class="annottext">HscSource
</span><a href="GHC.Types.SourceFile.html#HsSrcFile"><span class="hs-identifier hs-var">HsSrcFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1139"></span><span>
</span><span id="line-1140"></span><span class="hs-comment">{-
When printing export lists, we print like this:
        Avail   f               f
        AvailTC C [C, x, y]     C(x,y)
        AvailTC C [x, y]        C!(x,y)         -- Exporting x, y but not C
-}</span><span>
</span><span id="line-1146"></span><span>
</span><span id="line-1147"></span><span class="annot"><a href="GHC.Iface.Load.html#pprExport"><span class="hs-identifier hs-type">pprExport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#IfaceExport"><span class="hs-identifier hs-type">IfaceExport</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1148"></span><span id="pprExport"><span class="annot"><span class="annottext">pprExport :: IfaceExport -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprExport"><span class="hs-identifier hs-var hs-var">pprExport</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Avail.html#Avail"><span class="hs-identifier hs-type">Avail</span></a></span><span> </span><span id="local-6989586621681315349"><span class="annot"><span class="annottext">GreName
</span><a href="#local-6989586621681315349"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GreName
</span><a href="#local-6989586621681315349"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1149"></span><span class="annot"><a href="GHC.Iface.Load.html#pprExport"><span class="hs-identifier hs-var">pprExport</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Avail.html#AvailTC"><span class="hs-identifier hs-type">AvailTC</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1150"></span><span class="annot"><a href="GHC.Iface.Load.html#pprExport"><span class="hs-identifier hs-var">pprExport</span></a></span><span> </span><span id="local-6989586621681315347"><span class="annot"><span class="annottext">avail :: IfaceExport
</span><a href="#local-6989586621681315347"><span class="hs-identifier hs-var">avail</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Avail.html#AvailTC"><span class="hs-identifier hs-type">AvailTC</span></a></span><span> </span><span id="local-6989586621681315346"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315346"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">[GreName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1151"></span><span>    </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681315346"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315345"><span class="hs-identifier hs-var">mark</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. Outputable a =&gt; [a] -&gt; SDoc
</span><a href="#local-6989586621681315344"><span class="hs-identifier hs-var">pp_export</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceExport -&gt; [GreName]
</span><a href="GHC.Types.Avail.html#availSubordinateGreNames"><span class="hs-identifier hs-var">availSubordinateGreNames</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExport
</span><a href="#local-6989586621681315347"><span class="hs-identifier hs-var">avail</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1152"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1153"></span><span>    </span><span id="local-6989586621681315345"><span class="annot"><span class="annottext">mark :: SDoc
</span><a href="#local-6989586621681315345"><span class="hs-identifier hs-var hs-var">mark</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">IfaceExport -&gt; Bool
</span><a href="GHC.Types.Avail.html#availExportsDecl"><span class="hs-identifier hs-var">availExportsDecl</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExport
</span><a href="#local-6989586621681315347"><span class="hs-identifier hs-var">avail</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1154"></span><span>         </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#vbar"><span class="hs-identifier hs-var">vbar</span></a></span><span>
</span><span id="line-1155"></span><span>
</span><span id="line-1156"></span><span>    </span><span id="local-6989586621681315344"><span class="annot"><span class="annottext">pp_export :: [a] -&gt; SDoc
</span><a href="#local-6989586621681315344"><span class="hs-identifier hs-var hs-var">pp_export</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1157"></span><span>    </span><span class="annot"><a href="#local-6989586621681315344"><span class="hs-identifier hs-var">pp_export</span></a></span><span> </span><span id="local-6989586621681315338"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681315338"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681315338"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1158"></span><span>
</span><span id="line-1159"></span><span class="annot"><a href="GHC.Iface.Load.html#pprUsage"><span class="hs-identifier hs-type">pprUsage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Usage"><span class="hs-identifier hs-type">Usage</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1160"></span><span id="pprUsage"><span class="annot"><span class="annottext">pprUsage :: Usage -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprUsage"><span class="hs-identifier hs-var hs-var">pprUsage</span></a></span></span><span> </span><span id="local-6989586621681315336"><span class="annot"><span class="annottext">usage :: Usage
</span><a href="#local-6989586621681315336"><span class="hs-identifier hs-var">usage</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsagePackageModule"><span class="hs-identifier hs-type">UsagePackageModule</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-1161"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; Usage -&gt; (Usage -&gt; a) -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprUsageImport"><span class="hs-identifier hs-var">pprUsageImport</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681315336"><span class="hs-identifier hs-var">usage</span></a></span><span> </span><span class="annot"><span class="annottext">Usage -&gt; GenModule Unit
</span><a href="GHC.Unit.Module.Deps.html#usg_mod"><span class="hs-identifier hs-var">usg_mod</span></a></span><span>
</span><span id="line-1162"></span><span class="annot"><a href="GHC.Iface.Load.html#pprUsage"><span class="hs-identifier hs-var">pprUsage</span></a></span><span> </span><span id="local-6989586621681315332"><span class="annot"><span class="annottext">usage :: Usage
</span><a href="#local-6989586621681315332"><span class="hs-identifier hs-var">usage</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsageHomeModule"><span class="hs-identifier hs-type">UsageHomeModule</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-1163"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; Usage -&gt; (Usage -&gt; a) -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprUsageImport"><span class="hs-identifier hs-var">pprUsageImport</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681315332"><span class="hs-identifier hs-var">usage</span></a></span><span> </span><span class="annot"><span class="annottext">Usage -&gt; ModuleName
</span><a href="GHC.Unit.Module.Deps.html#usg_mod_name"><span class="hs-identifier hs-var">usg_mod_name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1164"></span><span>    </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-1165"></span><span>        </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681315328"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681315328"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;exports: &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681315328"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Maybe Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_exports"><span class="hs-identifier hs-var">usg_exports</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681315332"><span class="hs-identifier hs-var">usage</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1166"></span><span>        </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681315326"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681315325"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315326"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681315326"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681315325"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681315325"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Usage -&gt; [(OccName, Fingerprint)]
</span><a href="GHC.Unit.Module.Deps.html#usg_entities"><span class="hs-identifier hs-var">usg_entities</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681315332"><span class="hs-identifier hs-var">usage</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1167"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-1168"></span><span class="annot"><a href="GHC.Iface.Load.html#pprUsage"><span class="hs-identifier hs-var">pprUsage</span></a></span><span> </span><span id="local-6989586621681315323"><span class="annot"><span class="annottext">usage :: Usage
</span><a href="#local-6989586621681315323"><span class="hs-identifier hs-var">usage</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsageFile"><span class="hs-identifier hs-type">UsageFile</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-1169"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;addDependentFile&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1170"></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#doubleQuotes"><span class="hs-identifier hs-var">doubleQuotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; String
</span><a href="GHC.Unit.Module.Deps.html#usg_file_path"><span class="hs-identifier hs-var">usg_file_path</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681315323"><span class="hs-identifier hs-var">usage</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1171"></span><span>          </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_file_hash"><span class="hs-identifier hs-var">usg_file_hash</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681315323"><span class="hs-identifier hs-var">usage</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1172"></span><span class="annot"><a href="GHC.Iface.Load.html#pprUsage"><span class="hs-identifier hs-var">pprUsage</span></a></span><span> </span><span id="local-6989586621681315318"><span class="annot"><span class="annottext">usage :: Usage
</span><a href="#local-6989586621681315318"><span class="hs-identifier hs-var">usage</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsageMergedRequirement"><span class="hs-identifier hs-type">UsageMergedRequirement</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-1173"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;merged&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; GenModule Unit
</span><a href="GHC.Unit.Module.Deps.html#usg_mod"><span class="hs-identifier hs-var">usg_mod</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681315318"><span class="hs-identifier hs-var">usage</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_mod_hash"><span class="hs-identifier hs-var">usg_mod_hash</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681315318"><span class="hs-identifier hs-var">usage</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1174"></span><span>
</span><span id="line-1175"></span><span id="local-6989586621681316362"><span class="annot"><a href="GHC.Iface.Load.html#pprUsageImport"><span class="hs-identifier hs-type">pprUsageImport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681316362"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Usage"><span class="hs-identifier hs-type">Usage</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Usage"><span class="hs-identifier hs-type">Usage</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681316362"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span></span><span>
</span><span id="line-1176"></span><span id="pprUsageImport"><span class="annot"><span class="annottext">pprUsageImport :: forall a. Outputable a =&gt; Usage -&gt; (Usage -&gt; a) -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprUsageImport"><span class="hs-identifier hs-var hs-var">pprUsageImport</span></a></span></span><span> </span><span id="local-6989586621681315312"><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681315312"><span class="hs-identifier hs-var">usage</span></a></span></span><span> </span><span id="local-6989586621681315311"><span class="annot"><span class="annottext">Usage -&gt; a
</span><a href="#local-6989586621681315311"><span class="hs-identifier hs-var">usg_mod'</span></a></span></span><span>
</span><span id="line-1177"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;import&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315310"><span class="hs-keyword hs-var">safe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; a
</span><a href="#local-6989586621681315311"><span class="hs-identifier hs-var">usg_mod'</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681315312"><span class="hs-identifier hs-var">usage</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1178"></span><span>                       </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_mod_hash"><span class="hs-identifier hs-var">usg_mod_hash</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681315312"><span class="hs-identifier hs-var">usage</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1179"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1180"></span><span>        </span><span id="local-6989586621681315310"><span class="annot"><span class="annottext">safe :: SDoc
</span><a href="#local-6989586621681315310"><span class="hs-keyword hs-var hs-var">safe</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Usage -&gt; Bool
</span><a href="GHC.Unit.Module.Deps.html#usg_safe"><span class="hs-identifier hs-var">usg_safe</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681315312"><span class="hs-identifier hs-var">usage</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;safe&quot;</span></span><span>
</span><span id="line-1181"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; -/ &quot;</span></span><span>
</span><span id="line-1182"></span><span>
</span><span id="line-1183"></span><span class="hs-comment">-- | Pretty-print unit dependencies</span><span>
</span><span id="line-1184"></span><span class="annot"><a href="GHC.Iface.Load.html#pprDeps"><span class="hs-identifier hs-type">pprDeps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.State.html#UnitState"><span class="hs-identifier hs-type">UnitState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Dependencies"><span class="hs-identifier hs-type">Dependencies</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1185"></span><span id="pprDeps"><span class="annot"><span class="annottext">pprDeps :: UnitState -&gt; Dependencies -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprDeps"><span class="hs-identifier hs-var hs-var">pprDeps</span></a></span></span><span> </span><span id="local-6989586621681315308"><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621681315308"><span class="hs-identifier hs-var">unit_state</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Deps"><span class="hs-identifier hs-type">Deps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dep_mods :: Dependencies -&gt; [ModuleNameWithIsBoot]
</span><a href="GHC.Unit.Module.Deps.html#dep_mods"><span class="hs-identifier hs-var">dep_mods</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315305"><span class="annot"><span class="annottext">[ModuleNameWithIsBoot]
</span><a href="#local-6989586621681315305"><span class="hs-identifier hs-var">mods</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_pkgs :: Dependencies -&gt; [(UnitId, Bool)]
</span><a href="GHC.Unit.Module.Deps.html#dep_pkgs"><span class="hs-identifier hs-var">dep_pkgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315303"><span class="annot"><span class="annottext">[(UnitId, Bool)]
</span><a href="#local-6989586621681315303"><span class="hs-identifier hs-var">pkgs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_orphs :: Dependencies -&gt; [GenModule Unit]
</span><a href="GHC.Unit.Module.Deps.html#dep_orphs"><span class="hs-identifier hs-var">dep_orphs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315301"><span class="annot"><span class="annottext">[GenModule Unit]
</span><a href="#local-6989586621681315301"><span class="hs-identifier hs-var">orphs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1186"></span><span>                           </span><span class="annot"><span class="annottext">dep_finsts :: Dependencies -&gt; [GenModule Unit]
</span><a href="GHC.Unit.Module.Deps.html#dep_finsts"><span class="hs-identifier hs-var">dep_finsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315299"><span class="annot"><span class="annottext">[GenModule Unit]
</span><a href="#local-6989586621681315299"><span class="hs-identifier hs-var">finsts</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1187"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Unit.State.html#pprWithUnitState"><span class="hs-identifier hs-var">pprWithUnitState</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621681315308"><span class="hs-identifier hs-var">unit_state</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1188"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;module dependencies:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#fsep"><span class="hs-identifier hs-var">fsep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. Outputable a =&gt; GenWithIsBoot a -&gt; SDoc
</span><a href="#local-6989586621681315296"><span class="hs-identifier hs-var">ppr_mod</span></a></span><span> </span><span class="annot"><span class="annottext">[ModuleNameWithIsBoot]
</span><a href="#local-6989586621681315305"><span class="hs-identifier hs-var">mods</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1189"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;package dependencies:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#fsep"><span class="hs-identifier hs-var">fsep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. Outputable a =&gt; (a, Bool) -&gt; SDoc
</span><a href="#local-6989586621681315295"><span class="hs-identifier hs-var">ppr_pkg</span></a></span><span> </span><span class="annot"><span class="annottext">[(UnitId, Bool)]
</span><a href="#local-6989586621681315303"><span class="hs-identifier hs-var">pkgs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1190"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;orphans:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#fsep"><span class="hs-identifier hs-var">fsep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[GenModule Unit]
</span><a href="#local-6989586621681315301"><span class="hs-identifier hs-var">orphs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1191"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;family instance modules:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#fsep"><span class="hs-identifier hs-var">fsep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[GenModule Unit]
</span><a href="#local-6989586621681315299"><span class="hs-identifier hs-var">finsts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1192"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1193"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1194"></span><span>    </span><span id="local-6989586621681315296"><span class="annot"><span class="annottext">ppr_mod :: GenWithIsBoot a -&gt; SDoc
</span><a href="#local-6989586621681315296"><span class="hs-identifier hs-var hs-var">ppr_mod</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#GWIB"><span class="hs-identifier hs-type">GWIB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gwib_mod :: forall mod. GenWithIsBoot mod -&gt; mod
</span><a href="GHC.Unit.Types.html#gwib_mod"><span class="hs-identifier hs-var">gwib_mod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315291"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315291"><span class="hs-identifier hs-var">mod_name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gwib_isBoot :: forall mod. GenWithIsBoot mod -&gt; IsBootInterface
</span><a href="GHC.Unit.Types.html#gwib_isBoot"><span class="hs-identifier hs-var">gwib_isBoot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315290"><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315290"><span class="hs-identifier hs-var">boot</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315291"><span class="hs-identifier hs-var">mod_name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface -&gt; SDoc
</span><a href="#local-6989586621681315289"><span class="hs-identifier hs-var">ppr_boot</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681315290"><span class="hs-identifier hs-var">boot</span></a></span><span>
</span><span id="line-1195"></span><span>    </span><span id="local-6989586621681315295"><span class="annot"><span class="annottext">ppr_pkg :: (a, Bool) -&gt; SDoc
</span><a href="#local-6989586621681315295"><span class="hs-identifier hs-var hs-var">ppr_pkg</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315286"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315286"><span class="hs-identifier hs-var">pkg</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681315285"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681315285"><span class="hs-identifier hs-var">trust_req</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315286"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-1196"></span><span>                               </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681315285"><span class="hs-identifier hs-var">trust_req</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;*&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1197"></span><span>    </span><span id="local-6989586621681315289"><span class="annot"><span class="annottext">ppr_boot :: IsBootInterface -&gt; SDoc
</span><a href="#local-6989586621681315289"><span class="hs-identifier hs-var hs-var">ppr_boot</span></a></span></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#IsBoot"><span class="hs-identifier hs-var">IsBoot</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[boot]&quot;</span></span><span>
</span><span id="line-1198"></span><span>    </span><span class="annot"><a href="#local-6989586621681315289"><span class="hs-identifier hs-var">ppr_boot</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1199"></span><span>
</span><span id="line-1200"></span><span class="annot"><a href="GHC.Iface.Load.html#pprFixities"><span class="hs-identifier hs-type">pprFixities</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Fixity.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1201"></span><span id="pprFixities"><span class="annot"><span class="annottext">pprFixities :: [(OccName, Fixity)] -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprFixities"><span class="hs-identifier hs-var hs-var">pprFixities</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1202"></span><span class="annot"><a href="GHC.Iface.Load.html#pprFixities"><span class="hs-identifier hs-var">pprFixities</span></a></span><span> </span><span id="local-6989586621681315284"><span class="annot"><span class="annottext">[(OccName, Fixity)]
</span><a href="#local-6989586621681315284"><span class="hs-identifier hs-var">fixes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fixities&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; SDoc) -&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprWithCommas"><span class="hs-identifier hs-var">pprWithCommas</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a} {a}. (Outputable a, Outputable a) =&gt; (a, a) -&gt; SDoc
</span><a href="#local-6989586621681315282"><span class="hs-identifier hs-var">pprFix</span></a></span><span> </span><span class="annot"><span class="annottext">[(OccName, Fixity)]
</span><a href="#local-6989586621681315284"><span class="hs-identifier hs-var">fixes</span></a></span><span>
</span><span id="line-1203"></span><span>                  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1204"></span><span>                    </span><span id="local-6989586621681315282"><span class="annot"><span class="annottext">pprFix :: (a, a) -&gt; SDoc
</span><a href="#local-6989586621681315282"><span class="hs-identifier hs-var hs-var">pprFix</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315277"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315277"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681315276"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315276"><span class="hs-identifier hs-var">fix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315276"><span class="hs-identifier hs-var">fix</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315277"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-1205"></span><span>
</span><span id="line-1206"></span><span class="annot"><a href="GHC.Iface.Load.html#pprTrustInfo"><span class="hs-identifier hs-type">pprTrustInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SafeHaskell.html#IfaceTrustInfo"><span class="hs-identifier hs-type">IfaceTrustInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1207"></span><span id="pprTrustInfo"><span class="annot"><span class="annottext">pprTrustInfo :: IfaceTrustInfo -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprTrustInfo"><span class="hs-identifier hs-var hs-var">pprTrustInfo</span></a></span></span><span> </span><span id="local-6989586621681315275"><span class="annot"><span class="annottext">IfaceTrustInfo
</span><a href="#local-6989586621681315275"><span class="hs-identifier hs-var">trust</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;trusted:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTrustInfo
</span><a href="#local-6989586621681315275"><span class="hs-identifier hs-var">trust</span></a></span><span>
</span><span id="line-1208"></span><span>
</span><span id="line-1209"></span><span class="annot"><a href="GHC.Iface.Load.html#pprTrustPkg"><span class="hs-identifier hs-type">pprTrustPkg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1210"></span><span id="pprTrustPkg"><span class="annot"><span class="annottext">pprTrustPkg :: Bool -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprTrustPkg"><span class="hs-identifier hs-var hs-var">pprTrustPkg</span></a></span></span><span> </span><span id="local-6989586621681315274"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681315274"><span class="hs-identifier hs-var">tpkg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;require own pkg trusted:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681315274"><span class="hs-identifier hs-var">tpkg</span></a></span><span>
</span><span id="line-1211"></span><span>
</span><span id="line-1212"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Warnings.html#Warnings"><span class="hs-identifier hs-type">Warnings</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1213"></span><span>    </span><span id="local-6989586621681315271"><span class="annot"><span class="annottext">ppr :: Warnings -&gt; SDoc
</span><a href="#local-6989586621681315271"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Warnings -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprWarns"><span class="hs-identifier hs-var">pprWarns</span></a></span><span>
</span><span id="line-1214"></span><span>
</span><span id="line-1215"></span><span class="annot"><a href="GHC.Iface.Load.html#pprWarns"><span class="hs-identifier hs-type">pprWarns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Warnings.html#Warnings"><span class="hs-identifier hs-type">Warnings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1216"></span><span id="pprWarns"><span class="annot"><span class="annottext">pprWarns :: Warnings -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprWarns"><span class="hs-identifier hs-var hs-var">pprWarns</span></a></span></span><span> </span><span class="annot"><span class="annottext">Warnings
</span><a href="GHC.Unit.Module.Warnings.html#NoWarnings"><span class="hs-identifier hs-var">NoWarnings</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1217"></span><span class="annot"><a href="GHC.Iface.Load.html#pprWarns"><span class="hs-identifier hs-var">pprWarns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Warnings.html#WarnAll"><span class="hs-identifier hs-type">WarnAll</span></a></span><span> </span><span id="local-6989586621681315267"><span class="annot"><span class="annottext">WarningTxt
</span><a href="#local-6989586621681315267"><span class="hs-identifier hs-var">txt</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Warn all&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">WarningTxt
</span><a href="#local-6989586621681315267"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-1218"></span><span class="annot"><a href="GHC.Iface.Load.html#pprWarns"><span class="hs-identifier hs-var">pprWarns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Warnings.html#WarnSome"><span class="hs-identifier hs-type">WarnSome</span></a></span><span> </span><span id="local-6989586621681315265"><span class="annot"><span class="annottext">[(OccName, WarningTxt)]
</span><a href="#local-6989586621681315265"><span class="hs-identifier hs-var">prs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Warnings&quot;</span></span><span>
</span><span id="line-1219"></span><span>                        </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a} {a}. (Outputable a, Outputable a) =&gt; (a, a) -&gt; SDoc
</span><a href="#local-6989586621681315264"><span class="hs-identifier hs-var">pprWarning</span></a></span><span> </span><span class="annot"><span class="annottext">[(OccName, WarningTxt)]
</span><a href="#local-6989586621681315265"><span class="hs-identifier hs-var">prs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1220"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681315264"><span class="annot"><span class="annottext">pprWarning :: (a, a) -&gt; SDoc
</span><a href="#local-6989586621681315264"><span class="hs-identifier hs-var hs-var">pprWarning</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315259"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315259"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681315258"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315258"><span class="hs-identifier hs-var">txt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315259"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315258"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-1221"></span><span>
</span><span id="line-1222"></span><span class="annot"><a href="GHC.Iface.Load.html#pprIfaceAnnotation"><span class="hs-identifier hs-type">pprIfaceAnnotation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAnnotation"><span class="hs-identifier hs-type">IfaceAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1223"></span><span id="pprIfaceAnnotation"><span class="annot"><span class="annottext">pprIfaceAnnotation :: IfaceAnnotation -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprIfaceAnnotation"><span class="hs-identifier hs-var hs-var">pprIfaceAnnotation</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAnnotation"><span class="hs-identifier hs-type">IfaceAnnotation</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifAnnotatedTarget :: IfaceAnnotation -&gt; IfaceAnnTarget
</span><a href="GHC.Iface.Syntax.html#ifAnnotatedTarget"><span class="hs-identifier hs-var">ifAnnotatedTarget</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315255"><span class="annot"><span class="annottext">IfaceAnnTarget
</span><a href="#local-6989586621681315255"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifAnnotatedValue :: IfaceAnnotation -&gt; AnnPayload
</span><a href="GHC.Iface.Syntax.html#ifAnnotatedValue"><span class="hs-identifier hs-var">ifAnnotatedValue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315253"><span class="annot"><span class="annottext">AnnPayload
</span><a href="#local-6989586621681315253"><span class="hs-identifier hs-var">serialized</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1224"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceAnnTarget
</span><a href="#local-6989586621681315255"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;annotated by&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">AnnPayload
</span><a href="#local-6989586621681315253"><span class="hs-identifier hs-var">serialized</span></a></span><span>
</span><span id="line-1225"></span><span>
</span><span id="line-1226"></span><span class="annot"><a href="GHC.Iface.Load.html#pprExtensibleFields"><span class="hs-identifier hs-type">pprExtensibleFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Ext.Fields.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1227"></span><span id="pprExtensibleFields"><span class="annot"><span class="annottext">pprExtensibleFields :: ExtensibleFields -&gt; SDoc
</span><a href="GHC.Iface.Load.html#pprExtensibleFields"><span class="hs-identifier hs-var hs-var">pprExtensibleFields</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Ext.Fields.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span><span> </span><span id="local-6989586621681315251"><span class="annot"><span class="annottext">Map String BinData
</span><a href="#local-6989586621681315251"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">(String, BinData) -&gt; SDoc
</span><a href="#local-6989586621681315250"><span class="hs-identifier hs-var">pprField</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; [(k, a)]
</span><a href="../../containers-0.6.5.1/src/Data-Map-Internal.html#toList"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">Map String BinData
</span><a href="#local-6989586621681315251"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-1228"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1229"></span><span>    </span><span id="local-6989586621681315250"><span class="annot"><span class="annottext">pprField :: (String, BinData) -&gt; SDoc
</span><a href="#local-6989586621681315250"><span class="hs-identifier hs-var hs-var">pprField</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315247"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315247"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Binary.html#BinData"><span class="hs-identifier hs-type">BinData</span></a></span><span> </span><span id="local-6989586621681315245"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681315245"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span id="local-6989586621681315244"><span class="annot"><span class="annottext">BinArray
</span><a href="#local-6989586621681315244"><span class="hs-identifier hs-var">_data</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315247"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681315245"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-1230"></span><span>
</span><span id="line-1231"></span><span class="hs-comment">{-
*********************************************************
*                                                       *
\subsection{Errors}
*                                                       *
*********************************************************
-}</span><span>
</span><span id="line-1238"></span><span>
</span><span id="line-1239"></span><span class="annot"><a href="GHC.Iface.Load.html#badIfaceFile"><span class="hs-identifier hs-type">badIfaceFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1240"></span><span id="badIfaceFile"><span class="annot"><span class="annottext">badIfaceFile :: String -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Iface.Load.html#badIfaceFile"><span class="hs-identifier hs-var hs-var">badIfaceFile</span></a></span></span><span> </span><span id="local-6989586621681315243"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315243"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span id="local-6989586621681315242"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315242"><span class="hs-identifier hs-var">err</span></a></span></span><span>
</span><span id="line-1241"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Bad interface file:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315243"><span class="hs-identifier hs-var">file</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1242"></span><span>          </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315242"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1243"></span><span>
</span><span id="line-1244"></span><span class="annot"><a href="GHC.Iface.Load.html#hiModuleNameMismatchWarn"><span class="hs-identifier hs-type">hiModuleNameMismatchWarn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1245"></span><span id="hiModuleNameMismatchWarn"><span class="annot"><span class="annottext">hiModuleNameMismatchWarn :: GenModule Unit -&gt; GenModule Unit -&gt; SDoc
</span><a href="GHC.Iface.Load.html#hiModuleNameMismatchWarn"><span class="hs-identifier hs-var hs-var">hiModuleNameMismatchWarn</span></a></span></span><span> </span><span id="local-6989586621681315241"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315241"><span class="hs-identifier hs-var">requested_mod</span></a></span></span><span> </span><span id="local-6989586621681315240"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315240"><span class="hs-identifier hs-var">read_mod</span></a></span></span><span>
</span><span id="line-1246"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315241"><span class="hs-identifier hs-var">requested_mod</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315240"><span class="hs-identifier hs-var">read_mod</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1247"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Interface file contains module&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315240"><span class="hs-identifier hs-var">read_mod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1248"></span><span>         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;but we were expecting module&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315241"><span class="hs-identifier hs-var">requested_mod</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1249"></span><span>         </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Probable cause: the source code which generated interface file&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1250"></span><span>             </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;has an incompatible module name&quot;</span></span><span>
</span><span id="line-1251"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-1252"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1253"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1254"></span><span>  </span><span class="hs-comment">-- ToDo: This will fail to have enough qualification when the package IDs</span><span>
</span><span id="line-1255"></span><span>  </span><span class="hs-comment">-- are the same</span><span>
</span><span id="line-1256"></span><span>  </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrintUnqualified -&gt; Depth -&gt; PprStyle
</span><a href="GHC.Utils.Outputable.html#mkUserStyle"><span class="hs-identifier hs-var">mkUserStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="GHC.Utils.Outputable.html#alwaysQualify"><span class="hs-identifier hs-var">alwaysQualify</span></a></span><span> </span><span class="annot"><span class="annottext">Depth
</span><a href="GHC.Utils.Outputable.html#AllTheWay"><span class="hs-identifier hs-var">AllTheWay</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1257"></span><span>    </span><span class="hs-comment">-- we want the Modules below to be qualified with package names,</span><span>
</span><span id="line-1258"></span><span>    </span><span class="hs-comment">-- so reset the PrintUnqualified setting.</span><span>
</span><span id="line-1259"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Something is amiss; requested module &quot;</span></span><span>
</span><span id="line-1260"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315241"><span class="hs-identifier hs-var">requested_mod</span></a></span><span>
</span><span id="line-1261"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;differs from name found in the interface file&quot;</span></span><span>
</span><span id="line-1262"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315240"><span class="hs-identifier hs-var">read_mod</span></a></span><span>
</span><span id="line-1263"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;if these names look the same, try again with -dppr-debug&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1264"></span><span>         </span><span class="hs-special">]</span><span>
</span><span id="line-1265"></span><span>
</span><span id="line-1266"></span><span class="annot"><a href="GHC.Iface.Load.html#homeModError"><span class="hs-identifier hs-type">homeModError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#InstalledModule"><span class="hs-identifier hs-type">InstalledModule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Location.html#ModLocation"><span class="hs-identifier hs-type">ModLocation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1267"></span><span class="hs-comment">-- See Note [Home module load error]</span><span>
</span><span id="line-1268"></span><span id="homeModError"><span class="annot"><span class="annottext">homeModError :: InstalledModule -&gt; ModLocation -&gt; SDoc
</span><a href="GHC.Iface.Load.html#homeModError"><span class="hs-identifier hs-var hs-var">homeModError</span></a></span></span><span> </span><span id="local-6989586621681315235"><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315235"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621681315234"><span class="annot"><span class="annottext">ModLocation
</span><a href="#local-6989586621681315234"><span class="hs-identifier hs-var">location</span></a></span></span><span>
</span><span id="line-1269"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;attempting to use module &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681315235"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1270"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ModLocation -&gt; Maybe String
</span><a href="GHC.Unit.Module.Location.html#ml_hs_file"><span class="hs-identifier hs-var">ml_hs_file</span></a></span><span> </span><span class="annot"><span class="annottext">ModLocation
</span><a href="#local-6989586621681315234"><span class="hs-identifier hs-var">location</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1271"></span><span>           </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681315232"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315232"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#space"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315232"><span class="hs-identifier hs-var">file</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1272"></span><span>           </span><span class="annot"><span class="annottext">Maybe String
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1273"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;which is not loaded&quot;</span></span><span>
</span><span id="line-1274"></span><span>
</span><span id="line-1275"></span><span>
</span><span id="line-1276"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-1277"></span><span class="hs-comment">-- Error messages</span><span>
</span><span id="line-1278"></span><span>
</span><span id="line-1279"></span><span class="annot"><a href="GHC.Iface.Load.html#cannotFindInterface"><span class="hs-identifier hs-type">cannotFindInterface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Profile.html#Profile"><span class="hs-identifier hs-type">Profile</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#InstalledFindResult"><span class="hs-identifier hs-type">InstalledFindResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1280"></span><span id="cannotFindInterface"><span class="annot"><span class="annottext">cannotFindInterface :: UnitEnv
-&gt; Profile
-&gt; ([String] -&gt; SDoc)
-&gt; ModuleName
-&gt; InstalledFindResult
-&gt; SDoc
</span><a href="GHC.Iface.Load.html#cannotFindInterface"><span class="hs-identifier hs-var hs-var">cannotFindInterface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PtrString
-&gt; PtrString
-&gt; UnitEnv
-&gt; Profile
-&gt; ([String] -&gt; SDoc)
-&gt; ModuleName
-&gt; InstalledFindResult
-&gt; SDoc
</span><a href="GHC.Iface.Load.html#cantFindInstalledErr"><span class="hs-identifier hs-var">cantFindInstalledErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; PtrString
</span><a href="GHC.Data.FastString.html#sLit"><span class="hs-identifier hs-var">sLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Failed to load interface for&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1281"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; PtrString
</span><a href="GHC.Data.FastString.html#sLit"><span class="hs-identifier hs-var">sLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Ambiguous interface for&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1282"></span><span>
</span><span id="line-1283"></span><span class="annot"><a href="GHC.Iface.Load.html#cantFindInstalledErr"><span class="hs-identifier hs-type">cantFindInstalledErr</span></a></span><span>
</span><span id="line-1284"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#PtrString"><span class="hs-identifier hs-type">PtrString</span></a></span><span>
</span><span id="line-1285"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#PtrString"><span class="hs-identifier hs-type">PtrString</span></a></span><span>
</span><span id="line-1286"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-1287"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Profile.html#Profile"><span class="hs-identifier hs-type">Profile</span></a></span><span>
</span><span id="line-1288"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1289"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-1290"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#InstalledFindResult"><span class="hs-identifier hs-type">InstalledFindResult</span></a></span><span>
</span><span id="line-1291"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1292"></span><span id="cantFindInstalledErr"><span class="annot"><span class="annottext">cantFindInstalledErr :: PtrString
-&gt; PtrString
-&gt; UnitEnv
-&gt; Profile
-&gt; ([String] -&gt; SDoc)
-&gt; ModuleName
-&gt; InstalledFindResult
-&gt; SDoc
</span><a href="GHC.Iface.Load.html#cantFindInstalledErr"><span class="hs-identifier hs-var hs-var">cantFindInstalledErr</span></a></span></span><span> </span><span id="local-6989586621681315229"><span class="annot"><span class="annottext">PtrString
</span><a href="#local-6989586621681315229"><span class="hs-identifier hs-var">cannot_find</span></a></span></span><span> </span><span class="annot"><span class="annottext">PtrString
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681315228"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621681315228"><span class="hs-identifier hs-var">unit_env</span></a></span></span><span> </span><span id="local-6989586621681315227"><span class="annot"><span class="annottext">Profile
</span><a href="#local-6989586621681315227"><span class="hs-identifier hs-var">profile</span></a></span></span><span> </span><span id="local-6989586621681315226"><span class="annot"><span class="annottext">[String] -&gt; SDoc
</span><a href="#local-6989586621681315226"><span class="hs-identifier hs-var">tried_these</span></a></span></span><span> </span><span id="local-6989586621681315225"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315225"><span class="hs-identifier hs-var">mod_name</span></a></span></span><span> </span><span id="local-6989586621681315224"><span class="annot"><span class="annottext">InstalledFindResult
</span><a href="#local-6989586621681315224"><span class="hs-identifier hs-var">find_result</span></a></span></span><span>
</span><span id="line-1293"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PtrString -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ptext"><span class="hs-identifier hs-var">ptext</span></a></span><span> </span><span class="annot"><span class="annottext">PtrString
</span><a href="#local-6989586621681315229"><span class="hs-identifier hs-var">cannot_find</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315225"><span class="hs-identifier hs-var">mod_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1294"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315223"><span class="hs-identifier hs-var">more_info</span></a></span><span>
</span><span id="line-1295"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1296"></span><span>    </span><span id="local-6989586621681315222"><span class="annot"><span class="annottext">home_unit :: HomeUnit
</span><a href="#local-6989586621681315222"><span class="hs-identifier hs-var hs-var">home_unit</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; HomeUnit
</span><a href="GHC.Unit.Env.html#ue_home_unit"><span class="hs-identifier hs-var">ue_home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621681315228"><span class="hs-identifier hs-var">unit_env</span></a></span><span>
</span><span id="line-1297"></span><span>    </span><span id="local-6989586621681315220"><span class="annot"><span class="annottext">unit_state :: UnitState
</span><a href="#local-6989586621681315220"><span class="hs-identifier hs-var hs-var">unit_state</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitState
</span><a href="GHC.Unit.Env.html#ue_units"><span class="hs-identifier hs-var">ue_units</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621681315228"><span class="hs-identifier hs-var">unit_env</span></a></span><span>
</span><span id="line-1298"></span><span>    </span><span id="local-6989586621681315218"><span class="annot"><span class="annottext">build_tag :: String
</span><a href="#local-6989586621681315218"><span class="hs-identifier hs-var hs-var">build_tag</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ways -&gt; String
</span><a href="GHC.Platform.Ways.html#waysBuildTag"><span class="hs-identifier hs-var">waysBuildTag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Profile -&gt; Ways
</span><a href="GHC.Platform.Profile.html#profileWays"><span class="hs-identifier hs-var">profileWays</span></a></span><span> </span><span class="annot"><span class="annottext">Profile
</span><a href="#local-6989586621681315227"><span class="hs-identifier hs-var">profile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1299"></span><span>
</span><span id="line-1300"></span><span>    </span><span id="local-6989586621681315223"><span class="annot"><span class="annottext">more_info :: SDoc
</span><a href="#local-6989586621681315223"><span class="hs-identifier hs-var hs-var">more_info</span></a></span></span><span>
</span><span id="line-1301"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">InstalledFindResult
</span><a href="#local-6989586621681315224"><span class="hs-identifier hs-var">find_result</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1302"></span><span>            </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#InstalledNoPackage"><span class="hs-identifier hs-type">InstalledNoPackage</span></a></span><span> </span><span id="local-6989586621681315214"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621681315214"><span class="hs-identifier hs-var">pkg</span></a></span></span><span>
</span><span id="line-1303"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;no unit id matching&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621681315214"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1304"></span><span>                   </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;was found&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; SDoc
</span><a href="#local-6989586621681315213"><span class="hs-identifier hs-var">looks_like_srcpkgid</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621681315214"><span class="hs-identifier hs-var">pkg</span></a></span><span>
</span><span id="line-1305"></span><span>
</span><span id="line-1306"></span><span>            </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#InstalledNotFound"><span class="hs-identifier hs-type">InstalledNotFound</span></a></span><span> </span><span id="local-6989586621681315211"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315211"><span class="hs-identifier hs-var">files</span></a></span></span><span> </span><span id="local-6989586621681315210"><span class="annot"><span class="annottext">Maybe UnitId
</span><a href="#local-6989586621681315210"><span class="hs-identifier hs-var">mb_pkg</span></a></span></span><span>
</span><span id="line-1307"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681315209"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621681315209"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe UnitId
</span><a href="#local-6989586621681315210"><span class="hs-identifier hs-var">mb_pkg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall u. GenHomeUnit u -&gt; UnitId -&gt; Bool
</span><a href="GHC.Unit.Home.html#isHomeUnitId"><span class="hs-identifier hs-var">isHomeUnitId</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621681315222"><span class="hs-identifier hs-var">home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621681315209"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1308"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; [String] -&gt; SDoc
</span><a href="#local-6989586621681315207"><span class="hs-identifier hs-var">not_found_in_package</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621681315209"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315211"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-1309"></span><span>
</span><span id="line-1310"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315211"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-1311"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;It is not a module in the current program, or in any known package.&quot;</span></span><span>
</span><span id="line-1312"></span><span>
</span><span id="line-1313"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1314"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; SDoc
</span><a href="#local-6989586621681315226"><span class="hs-identifier hs-var">tried_these</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315211"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-1315"></span><span>
</span><span id="line-1316"></span><span>            </span><span class="annot"><span class="annottext">InstalledFindResult
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cantFindInstalledErr&quot;</span></span><span>
</span><span id="line-1317"></span><span>
</span><span id="line-1318"></span><span>    </span><span class="annot"><a href="#local-6989586621681315213"><span class="hs-identifier hs-type">looks_like_srcpkgid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1319"></span><span>    </span><span id="local-6989586621681315213"><span class="annot"><span class="annottext">looks_like_srcpkgid :: UnitId -&gt; SDoc
</span><a href="#local-6989586621681315213"><span class="hs-identifier hs-var hs-var">looks_like_srcpkgid</span></a></span></span><span> </span><span id="local-6989586621681315206"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621681315206"><span class="hs-identifier hs-var">pk</span></a></span></span><span>
</span><span id="line-1320"></span><span>     </span><span class="hs-comment">-- Unsafely coerce a unit id (i.e. an installed package component</span><span>
</span><span id="line-1321"></span><span>     </span><span class="hs-comment">-- identifier) into a PackageId and see if it means anything.</span><span>
</span><span id="line-1322"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315205"><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621681315205"><span class="hs-identifier hs-var">pkg</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681315204"><span class="annot"><span class="annottext">[UnitInfo]
</span><a href="#local-6989586621681315204"><span class="hs-identifier hs-var">pkgs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; PackageId -&gt; [UnitInfo]
</span><a href="GHC.Unit.State.html#searchPackageId"><span class="hs-identifier hs-var">searchPackageId</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621681315220"><span class="hs-identifier hs-var">unit_state</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; PackageId
</span><a href="GHC.Unit.Info.html#PackageId"><span class="hs-identifier hs-var">PackageId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitId -&gt; FastString
</span><a href="GHC.Unit.Types.html#unitIdFS"><span class="hs-identifier hs-var">unitIdFS</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621681315206"><span class="hs-identifier hs-var">pk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1323"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;This unit ID looks like the source package ID;&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1324"></span><span>       </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;the real unit ID is&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ftext"><span class="hs-identifier hs-var">ftext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitId -&gt; FastString
</span><a href="GHC.Unit.Types.html#unitIdFS"><span class="hs-identifier hs-var">unitIdFS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall compid srcpkgid srcpkgname uid modulename mod.
GenericUnitInfo compid srcpkgid srcpkgname uid modulename mod
-&gt; uid
</span><a href="../../ghc-boot-9.2.4/src/GHC-Unit-Database.html#unitId"><span class="hs-identifier hs-var">unitId</span></a></span><span> </span><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621681315205"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1325"></span><span>       </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[UnitInfo]
</span><a href="#local-6989586621681315204"><span class="hs-identifier hs-var">pkgs</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1326"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;and&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[UnitInfo]
</span><a href="#local-6989586621681315204"><span class="hs-identifier hs-var">pkgs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;other candidates&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1327"></span><span>     </span><span class="hs-comment">-- Todo: also check if it looks like a package name!</span><span>
</span><span id="line-1328"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1329"></span><span>
</span><span id="line-1330"></span><span>    </span><span id="local-6989586621681315207"><span class="annot"><span class="annottext">not_found_in_package :: UnitId -&gt; [String] -&gt; SDoc
</span><a href="#local-6989586621681315207"><span class="hs-identifier hs-var hs-var">not_found_in_package</span></a></span></span><span> </span><span id="local-6989586621681315198"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621681315198"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span id="local-6989586621681315197"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315197"><span class="hs-identifier hs-var">files</span></a></span></span><span>
</span><span id="line-1331"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315218"><span class="hs-identifier hs-var">build_tag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1332"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-1333"></span><span>            </span><span id="local-6989586621681315196"><span class="annot"><span class="annottext">build :: String
</span><a href="#local-6989586621681315196"><span class="hs-identifier hs-var hs-var">build</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315218"><span class="hs-identifier hs-var">build_tag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p&quot;</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;profiling&quot;</span></span><span>
</span><span id="line-1334"></span><span>                                        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315218"><span class="hs-identifier hs-var">build_tag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span>
</span><span id="line-1335"></span><span>         </span><span class="hs-keyword">in</span><span>
</span><span id="line-1336"></span><span>         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Perhaps you haven't installed the &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315196"><span class="hs-identifier hs-var">build</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-1337"></span><span>         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; libraries for package &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621681315198"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'?'</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1338"></span><span>         </span><span class="annot"><span class="annottext">[String] -&gt; SDoc
</span><a href="#local-6989586621681315226"><span class="hs-identifier hs-var">tried_these</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315197"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-1339"></span><span>
</span><span id="line-1340"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1341"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;There are files missing in the &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621681315198"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-1342"></span><span>         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; package,&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1343"></span><span>         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;try running 'ghc-pkg check'.&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1344"></span><span>         </span><span class="annot"><span class="annottext">[String] -&gt; SDoc
</span><a href="#local-6989586621681315226"><span class="hs-identifier hs-var">tried_these</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315197"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-1345"></span><span>
</span><span id="line-1346"></span><span class="annot"><a href="GHC.Iface.Load.html#may_show_locations"><span class="hs-identifier hs-type">may_show_locations</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1347"></span><span id="may_show_locations"><span class="annot"><span class="annottext">may_show_locations :: DynFlags -&gt; [String] -&gt; SDoc
</span><a href="GHC.Iface.Load.html#may_show_locations"><span class="hs-identifier hs-var hs-var">may_show_locations</span></a></span></span><span> </span><span id="local-6989586621681315194"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315194"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681315193"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315193"><span class="hs-identifier hs-var">files</span></a></span></span><span>
</span><span id="line-1348"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315193"><span class="hs-identifier hs-var">files</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1349"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Int
</span><a href="GHC.Driver.Session.html#verbosity"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315194"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1350"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Use -v (or `:set -v` in ghci) &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-1351"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;to see a list of the files searched for.&quot;</span></span><span>
</span><span id="line-1352"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1353"></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Locations searched:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315193"><span class="hs-identifier hs-var">files</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1354"></span><span>
</span><span id="line-1355"></span><span class="annot"><a href="GHC.Iface.Load.html#cannotFindModule"><span class="hs-identifier hs-type">cannotFindModule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Env.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#FindResult"><span class="hs-identifier hs-type">FindResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1356"></span><span id="cannotFindModule"><span class="annot"><span class="annottext">cannotFindModule :: HscEnv -&gt; ModuleName -&gt; FindResult -&gt; SDoc
</span><a href="GHC.Iface.Load.html#cannotFindModule"><span class="hs-identifier hs-var hs-var">cannotFindModule</span></a></span></span><span> </span><span id="local-6989586621681315190"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315190"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; UnitEnv -&gt; Profile -&gt; ModuleName -&gt; FindResult -&gt; SDoc
</span><a href="GHC.Iface.Load.html#cannotFindModule%27"><span class="hs-identifier hs-var">cannotFindModule'</span></a></span><span>
</span><span id="line-1357"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; DynFlags
</span><a href="GHC.Driver.Env.Types.html#hsc_dflags"><span class="hs-identifier hs-var">hsc_dflags</span></a></span><span>   </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315190"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1358"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; UnitEnv
</span><a href="GHC.Driver.Env.Types.html#hsc_unit_env"><span class="hs-identifier hs-var">hsc_unit_env</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315190"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1359"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; Profile
</span><a href="GHC.Driver.Session.html#targetProfile"><span class="hs-identifier hs-var">targetProfile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; DynFlags
</span><a href="GHC.Driver.Env.Types.html#hsc_dflags"><span class="hs-identifier hs-var">hsc_dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681315190"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1360"></span><span>
</span><span id="line-1361"></span><span>
</span><span id="line-1362"></span><span class="annot"><a href="GHC.Iface.Load.html#cannotFindModule%27"><span class="hs-identifier hs-type">cannotFindModule'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Profile.html#Profile"><span class="hs-identifier hs-type">Profile</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#FindResult"><span class="hs-identifier hs-type">FindResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1363"></span><span id="cannotFindModule%27"><span class="annot"><span class="annottext">cannotFindModule' :: DynFlags -&gt; UnitEnv -&gt; Profile -&gt; ModuleName -&gt; FindResult -&gt; SDoc
</span><a href="GHC.Iface.Load.html#cannotFindModule%27"><span class="hs-identifier hs-var hs-var">cannotFindModule'</span></a></span></span><span> </span><span id="local-6989586621681315188"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315188"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681315187"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621681315187"><span class="hs-identifier hs-var">unit_env</span></a></span></span><span> </span><span id="local-6989586621681315186"><span class="annot"><span class="annottext">Profile
</span><a href="#local-6989586621681315186"><span class="hs-identifier hs-var">profile</span></a></span></span><span> </span><span id="local-6989586621681315185"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315185"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621681315184"><span class="annot"><span class="annottext">FindResult
</span><a href="#local-6989586621681315184"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Unit.State.html#pprWithUnitState"><span class="hs-identifier hs-var">pprWithUnitState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitState
</span><a href="GHC.Unit.Env.html#ue_units"><span class="hs-identifier hs-var">ue_units</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621681315187"><span class="hs-identifier hs-var">unit_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1364"></span><span>  </span><span class="annot"><span class="annottext">Bool
-&gt; PtrString
-&gt; PtrString
-&gt; UnitEnv
-&gt; Profile
-&gt; ([String] -&gt; SDoc)
-&gt; ModuleName
-&gt; FindResult
-&gt; SDoc
</span><a href="GHC.Iface.Load.html#cantFindErr"><span class="hs-identifier hs-var">cantFindErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GeneralFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#gopt"><span class="hs-identifier hs-var">gopt</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_BuildingCabalPackage"><span class="hs-identifier hs-var">Opt_BuildingCabalPackage</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315188"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1365"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; PtrString
</span><a href="GHC.Data.FastString.html#sLit"><span class="hs-identifier hs-var">sLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315180"><span class="hs-identifier hs-var">cannotFindMsg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1366"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; PtrString
</span><a href="GHC.Data.FastString.html#sLit"><span class="hs-identifier hs-var">sLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Ambiguous module name&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1367"></span><span>              </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621681315187"><span class="hs-identifier hs-var">unit_env</span></a></span><span>
</span><span id="line-1368"></span><span>              </span><span class="annot"><span class="annottext">Profile
</span><a href="#local-6989586621681315186"><span class="hs-identifier hs-var">profile</span></a></span><span>
</span><span id="line-1369"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; [String] -&gt; SDoc
</span><a href="GHC.Iface.Load.html#may_show_locations"><span class="hs-identifier hs-var">may_show_locations</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681315188"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1370"></span><span>              </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315185"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-1371"></span><span>              </span><span class="annot"><span class="annottext">FindResult
</span><a href="#local-6989586621681315184"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-1372"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1373"></span><span>    </span><span id="local-6989586621681315180"><span class="annot"><span class="annottext">cannotFindMsg :: String
</span><a href="#local-6989586621681315180"><span class="hs-identifier hs-var hs-var">cannotFindMsg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1374"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FindResult
</span><a href="#local-6989586621681315184"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1375"></span><span>        </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#NotFound"><span class="hs-identifier hs-type">NotFound</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fr_mods_hidden :: FindResult -&gt; [Unit]
</span><a href="GHC.Unit.Finder.Types.html#fr_mods_hidden"><span class="hs-identifier hs-var">fr_mods_hidden</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315177"><span class="annot"><span class="annottext">[Unit]
</span><a href="#local-6989586621681315177"><span class="hs-identifier hs-var">hidden_mods</span></a></span></span><span>
</span><span id="line-1376"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fr_pkgs_hidden :: FindResult -&gt; [Unit]
</span><a href="GHC.Unit.Finder.Types.html#fr_pkgs_hidden"><span class="hs-identifier hs-var">fr_pkgs_hidden</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315175"><span class="annot"><span class="annottext">[Unit]
</span><a href="#local-6989586621681315175"><span class="hs-identifier hs-var">hidden_pkgs</span></a></span></span><span>
</span><span id="line-1377"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fr_unusables :: FindResult -&gt; [(Unit, UnusableUnitReason)]
</span><a href="GHC.Unit.Finder.Types.html#fr_unusables"><span class="hs-identifier hs-var">fr_unusables</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315173"><span class="annot"><span class="annottext">[(Unit, UnusableUnitReason)]
</span><a href="#local-6989586621681315173"><span class="hs-identifier hs-var">unusables</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1378"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Unit]
</span><a href="#local-6989586621681315177"><span class="hs-identifier hs-var">hidden_mods</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Unit]
</span><a href="#local-6989586621681315175"><span class="hs-identifier hs-var">hidden_pkgs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[(Unit, UnusableUnitReason)]
</span><a href="#local-6989586621681315173"><span class="hs-identifier hs-var">unusables</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1379"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Could not load module&quot;</span></span><span>
</span><span id="line-1380"></span><span>        </span><span class="annot"><span class="annottext">FindResult
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Could not find module&quot;</span></span><span>
</span><span id="line-1381"></span><span>
</span><span id="line-1382"></span><span class="annot"><a href="GHC.Iface.Load.html#cantFindErr"><span class="hs-identifier hs-type">cantFindErr</span></a></span><span>
</span><span id="line-1383"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- ^ Using Cabal?</span><span>
</span><span id="line-1384"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#PtrString"><span class="hs-identifier hs-type">PtrString</span></a></span><span>
</span><span id="line-1385"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#PtrString"><span class="hs-identifier hs-type">PtrString</span></a></span><span>
</span><span id="line-1386"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-1387"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Profile.html#Profile"><span class="hs-identifier hs-type">Profile</span></a></span><span>
</span><span id="line-1388"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1389"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-1390"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#FindResult"><span class="hs-identifier hs-type">FindResult</span></a></span><span>
</span><span id="line-1391"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1392"></span><span id="cantFindErr"><span class="annot"><span class="annottext">cantFindErr :: Bool
-&gt; PtrString
-&gt; PtrString
-&gt; UnitEnv
-&gt; Profile
-&gt; ([String] -&gt; SDoc)
-&gt; ModuleName
-&gt; FindResult
-&gt; SDoc
</span><a href="GHC.Iface.Load.html#cantFindErr"><span class="hs-identifier hs-var hs-var">cantFindErr</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PtrString
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681315172"><span class="annot"><span class="annottext">PtrString
</span><a href="#local-6989586621681315172"><span class="hs-identifier hs-var">multiple_found</span></a></span></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Profile
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; SDoc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681315171"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315171"><span class="hs-identifier hs-var">mod_name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Finder.Types.html#FoundMultiple"><span class="hs-identifier hs-type">FoundMultiple</span></a></span><span> </span><span id="local-6989586621681315169"><span class="annot"><span class="annottext">[(GenModule Unit, ModuleOrigin)]
</span><a href="#local-6989586621681315169"><span class="hs-identifier hs-var">mods</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1393"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681315168"><span class="annot"><span class="annottext">[Unit]
</span><a href="#local-6989586621681315168"><span class="hs-identifier hs-var">pkgs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe [Unit]
</span><a href="#local-6989586621681315167"><span class="hs-identifier hs-var">unambiguousPackages</span></a></span><span>
</span><span id="line-1394"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PtrString -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ptext"><span class="hs-identifier hs-var">ptext</span></a></span><span> </span><span class="annot"><span class="annottext">PtrString
</span><a href="#local-6989586621681315172"><span class="hs-identifier hs-var">multiple_found</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315171"><span class="hs-identifier hs-var">mod_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-1395"></span><span>       </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;it was found in multiple packages:&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1396"></span><span>                </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Unit]
</span><a href="#local-6989586621681315168"><span class="hs-identifier hs-var">pkgs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1397"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1398"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1399"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PtrString -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ptext"><span class="hs-identifier hs-var">ptext</span></a></span><span> </span><span class="annot"><span class="annottext">PtrString
</span><a href="#local-6989586621681315172"><span class="hs-identifier hs-var">multiple_found</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315171"><span class="hs-identifier hs-var">mod_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-1400"></span><span>       </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}.
(Outputable a, Outputable (GenModule a)) =&gt;
(GenModule a, ModuleOrigin) -&gt; SDoc
</span><a href="#local-6989586621681315166"><span class="hs-identifier hs-var">pprMod</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenModule Unit, ModuleOrigin)]
</span><a href="#local-6989586621681315169"><span class="hs-identifier hs-var">mods</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1401"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1402"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1403"></span><span>    </span><span id="local-6989586621681315167"><span class="annot"><span class="annottext">unambiguousPackages :: Maybe [Unit]
</span><a href="#local-6989586621681315167"><span class="hs-identifier hs-var hs-var">unambiguousPackages</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. Maybe [a] -&gt; (GenModule a, ModuleOrigin) -&gt; Maybe [a]
</span><a href="#local-6989586621681315164"><span class="hs-identifier hs-var">unambiguousPackage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(GenModule Unit, ModuleOrigin)]
</span><a href="#local-6989586621681315169"><span class="hs-identifier hs-var">mods</span></a></span><span>
</span><span id="line-1404"></span><span>    </span><span id="local-6989586621681315164"><span class="annot"><span class="annottext">unambiguousPackage :: Maybe [a] -&gt; (GenModule a, ModuleOrigin) -&gt; Maybe [a]
</span><a href="#local-6989586621681315164"><span class="hs-identifier hs-var hs-var">unambiguousPackage</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681315163"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681315163"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315162"><span class="annot"><span class="annottext">GenModule a
</span><a href="#local-6989586621681315162"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.State.html#ModOrigin"><span class="hs-identifier hs-type">ModOrigin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[UnitInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[UnitInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1405"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule a
</span><a href="#local-6989586621681315162"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681315163"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1406"></span><span>    </span><span class="annot"><a href="#local-6989586621681315164"><span class="hs-identifier hs-var">unambiguousPackage</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [a]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">(GenModule a, ModuleOrigin)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1407"></span><span>
</span><span id="line-1408"></span><span>    </span><span id="local-6989586621681315166"><span class="annot"><span class="annottext">pprMod :: (GenModule a, ModuleOrigin) -&gt; SDoc
</span><a href="#local-6989586621681315166"><span class="hs-identifier hs-var hs-var">pprMod</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315156"><span class="annot"><span class="annottext">GenModule a
</span><a href="#local-6989586621681315156"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681315155"><span class="annot"><span class="annottext">ModuleOrigin
</span><a href="#local-6989586621681315155"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;it is bound as&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule a
</span><a href="#local-6989586621681315156"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1409"></span><span>                                </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;by&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. Outputable a =&gt; GenModule a -&gt; ModuleOrigin -&gt; SDoc
</span><a href="#local-6989586621681315154"><span class="hs-identifier hs-var">pprOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule a
</span><a href="#local-6989586621681315156"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleOrigin
</span><a href="#local-6989586621681315155"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-1410"></span><span>    </span><span id="local-6989586621681315154"><span class="annot"><span class="annottext">pprOrigin :: GenModule a -&gt; ModuleOrigin -&gt; SDoc
</span><a href="#local-6989586621681315154"><span class="hs-identifier hs-var hs-var">pprOrigin</span></a></span></span><span> </span><span class="annot"><span class="annottext">GenModule a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ModuleOrigin
</span><a href="GHC.Unit.State.html#ModHidden"><span class="hs-identifier hs-var">ModHidden</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cantFindErr: bound by mod hidden&quot;</span></span><span>
</span><span id="line-1411"></span><span>    </span><span class="annot"><a href="#local-6989586621681315154"><span class="hs-identifier hs-var">pprOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.State.html#ModUnusable"><span class="hs-identifier hs-type">ModUnusable</span></a></span><span> </span><span class="annot"><span class="annottext">UnusableUnitReason
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cantFindErr: bound by mod unusable&quot;</span></span><span>
</span><span id="line-1412"></span><span>    </span><span class="annot"><a href="#local-6989586621681315154"><span class="hs-identifier hs-var">pprOrigin</span></a></span><span> </span><span id="local-6989586621681315145"><span class="annot"><span class="annottext">GenModule a
</span><a href="#local-6989586621681315145"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.State.html#ModOrigin"><span class="hs-identifier hs-type">ModOrigin</span></a></span><span> </span><span id="local-6989586621681315144"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681315144"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681315143"><span class="annot"><span class="annottext">[UnitInfo]
</span><a href="#local-6989586621681315143"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="annot"><span class="annottext">[UnitInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681315142"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681315142"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; [SDoc] -&gt; [SDoc]
</span><a href="GHC.Utils.Outputable.html#punctuate"><span class="hs-identifier hs-var">punctuate</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-1413"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681315144"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1414"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;package&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule a
</span><a href="#local-6989586621681315145"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1415"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-1416"></span><span>      </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;a reexport in package&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1417"></span><span>                </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span class="annot"><span class="annottext">UnitInfo -&gt; Unit
</span><a href="GHC.Unit.Info.html#mkUnit"><span class="hs-identifier hs-var">mkUnit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[UnitInfo]
</span><a href="#local-6989586621681315143"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-1418"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681315142"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;a package flag&quot;</span></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1419"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-1420"></span><span>
</span><span id="line-1421"></span><span class="annot"><a href="GHC.Iface.Load.html#cantFindErr"><span class="hs-identifier hs-var">cantFindErr</span></a></span><span> </span><span id="local-6989586621681315139"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681315139"><span class="hs-identifier hs-var">using_cabal</span></a></span></span><span> </span><span id="local-6989586621681315138"><span class="annot"><span class="annottext">PtrString
</span><a href="#local-6989586621681315138"><span class="hs-identifier hs-var">cannot_find</span></a></span></span><span> </span><span class="annot"><span class="annottext">PtrString
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681315137"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621681315137"><span class="hs-identifier hs-var">unit_env</span></a></span></span><span> </span><span id="local-6989586621681315136"><span class="annot"><span class="annottext">Profile
</span><a href="#local-6989586621681315136"><span class="hs-identifier hs-var">profile</span></a></span></span><span> </span><span id="local-6989586621681315135"><span class="annot"><span class="annottext">[String] -&gt; SDoc
</span><a href="#local-6989586621681315135"><span class="hs-identifier hs-var">tried_these</span></a></span></span><span> </span><span id="local-6989586621681315134"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315134"><span class="hs-identifier hs-var">mod_name</span></a></span></span><span> </span><span id="local-6989586621681315133"><span class="annot"><span class="annottext">FindResult
</span><a href="#local-6989586621681315133"><span class="hs-identifier hs-var">find_result</span></a></span></span><span>
</span><span id="line-1422"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PtrString -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ptext"><span class="hs-identifier hs-var">ptext</span></a></span><span> </span><span class="annot"><span class="annottext">PtrString
</span><a href="#local-6989586621681315138"><span class="hs-identifier hs-var">cannot_find</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315134"><span class="hs-identifier hs-var">mod_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1423"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681315132"><span class="hs-identifier hs-var">more_info</span></a></span><span>
</span><span id="line-1424"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1425"></span><span>    </span><span id="local-6989586621681315131"><span class="annot"><span class="annottext">home_unit :: HomeUnit
</span><a href="#local-6989586621681315131"><span class="hs-identifier hs-var hs-var">home_unit</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; HomeUnit
</span><a href="GHC.Unit.Env.html#ue_home_unit"><span class="hs-identifier hs-var">ue_home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621681315137"><span class="hs-identifier hs-var">unit_env</span></a></span><span>
</span><span id="line-1426"></span><span>    </span><span id="local-6989586621681315132"><span class="annot"><span class="annottext">more_info :: SDoc
</span><a href="#local-6989586621681315132"><span class="hs-identifier hs-var hs-var">more_info</span></a></span></span><span>
</span><span id="line-1427"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FindResult
</span><a href="#local-6989586621681315133"><span class="hs-identifier hs-var">find_result</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1428"></span><span>            </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#NoPackage"><span class="hs-identifier hs-type">NoPackage</span></a></span><span> </span><span id="local-6989586621681315129"><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681315129"><span class="hs-identifier hs-var">pkg</span></a></span></span><span>
</span><span id="line-1429"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;no unit id matching&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681315129"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1430"></span><span>                   </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;was found&quot;</span></span><span>
</span><span id="line-1431"></span><span>
</span><span id="line-1432"></span><span>            </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#NotFound"><span class="hs-identifier hs-type">NotFound</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fr_paths :: FindResult -&gt; [String]
</span><a href="GHC.Unit.Finder.Types.html#fr_paths"><span class="hs-identifier hs-var">fr_paths</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315127"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315127"><span class="hs-identifier hs-var">files</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fr_pkg :: FindResult -&gt; Maybe Unit
</span><a href="GHC.Unit.Finder.Types.html#fr_pkg"><span class="hs-identifier hs-var">fr_pkg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315125"><span class="annot"><span class="annottext">Maybe Unit
</span><a href="#local-6989586621681315125"><span class="hs-identifier hs-var">mb_pkg</span></a></span></span><span>
</span><span id="line-1433"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fr_mods_hidden :: FindResult -&gt; [Unit]
</span><a href="GHC.Unit.Finder.Types.html#fr_mods_hidden"><span class="hs-identifier hs-var">fr_mods_hidden</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315124"><span class="annot"><span class="annottext">[Unit]
</span><a href="#local-6989586621681315124"><span class="hs-identifier hs-var">mod_hiddens</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fr_pkgs_hidden :: FindResult -&gt; [Unit]
</span><a href="GHC.Unit.Finder.Types.html#fr_pkgs_hidden"><span class="hs-identifier hs-var">fr_pkgs_hidden</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315123"><span class="annot"><span class="annottext">[Unit]
</span><a href="#local-6989586621681315123"><span class="hs-identifier hs-var">pkg_hiddens</span></a></span></span><span>
</span><span id="line-1434"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fr_unusables :: FindResult -&gt; [(Unit, UnusableUnitReason)]
</span><a href="GHC.Unit.Finder.Types.html#fr_unusables"><span class="hs-identifier hs-var">fr_unusables</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315122"><span class="annot"><span class="annottext">[(Unit, UnusableUnitReason)]
</span><a href="#local-6989586621681315122"><span class="hs-identifier hs-var">unusables</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fr_suggestions :: FindResult -&gt; [ModuleSuggestion]
</span><a href="GHC.Unit.Finder.Types.html#fr_suggestions"><span class="hs-identifier hs-var">fr_suggestions</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315120"><span class="annot"><span class="annottext">[ModuleSuggestion]
</span><a href="#local-6989586621681315120"><span class="hs-identifier hs-var">suggest</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1435"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681315119"><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681315119"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe Unit
</span><a href="#local-6989586621681315125"><span class="hs-identifier hs-var">mb_pkg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeUnit -&gt; QueryQualifyPackage
</span><a href="GHC.Unit.Home.html#isHomeUnit"><span class="hs-identifier hs-var">isHomeUnit</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621681315131"><span class="hs-identifier hs-var">home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681315119"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1436"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Unit -&gt; [String] -&gt; SDoc
</span><a href="#local-6989586621681315117"><span class="hs-identifier hs-var">not_found_in_package</span></a></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681315119"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315127"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-1437"></span><span>
</span><span id="line-1438"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[ModuleSuggestion]
</span><a href="#local-6989586621681315120"><span class="hs-identifier hs-var">suggest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1439"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[ModuleSuggestion] -&gt; SDoc
</span><a href="#local-6989586621681315116"><span class="hs-identifier hs-var">pp_suggestions</span></a></span><span> </span><span class="annot"><span class="annottext">[ModuleSuggestion]
</span><a href="#local-6989586621681315120"><span class="hs-identifier hs-var">suggest</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; SDoc
</span><a href="#local-6989586621681315135"><span class="hs-identifier hs-var">tried_these</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315127"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-1440"></span><span>
</span><span id="line-1441"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315127"><span class="hs-identifier hs-var">files</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Unit]
</span><a href="#local-6989586621681315124"><span class="hs-identifier hs-var">mod_hiddens</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-1442"></span><span>                  </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Unit]
</span><a href="#local-6989586621681315123"><span class="hs-identifier hs-var">pkg_hiddens</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[(Unit, UnusableUnitReason)]
</span><a href="#local-6989586621681315122"><span class="hs-identifier hs-var">unusables</span></a></span><span>
</span><span id="line-1443"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;It is not a module in the current program, or in any known package.&quot;</span></span><span>
</span><span id="line-1444"></span><span>
</span><span id="line-1445"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1446"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Unit -&gt; SDoc
</span><a href="#local-6989586621681315115"><span class="hs-identifier hs-var">pkg_hidden</span></a></span><span> </span><span class="annot"><span class="annottext">[Unit]
</span><a href="#local-6989586621681315123"><span class="hs-identifier hs-var">pkg_hiddens</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1447"></span><span>                   </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="#local-6989586621681315114"><span class="hs-identifier hs-var">mod_hidden</span></a></span><span> </span><span class="annot"><span class="annottext">[Unit]
</span><a href="#local-6989586621681315124"><span class="hs-identifier hs-var">mod_hiddens</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1448"></span><span>                   </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. Outputable a =&gt; (a, UnusableUnitReason) -&gt; SDoc
</span><a href="#local-6989586621681315113"><span class="hs-identifier hs-var">unusable</span></a></span><span> </span><span class="annot"><span class="annottext">[(Unit, UnusableUnitReason)]
</span><a href="#local-6989586621681315122"><span class="hs-identifier hs-var">unusables</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1449"></span><span>                   </span><span class="annot"><span class="annottext">[String] -&gt; SDoc
</span><a href="#local-6989586621681315135"><span class="hs-identifier hs-var">tried_these</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315127"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-1450"></span><span>
</span><span id="line-1451"></span><span>            </span><span class="annot"><span class="annottext">FindResult
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cantFindErr&quot;</span></span><span>
</span><span id="line-1452"></span><span>
</span><span id="line-1453"></span><span>    </span><span id="local-6989586621681315112"><span class="annot"><span class="annottext">build_tag :: String
</span><a href="#local-6989586621681315112"><span class="hs-identifier hs-var hs-var">build_tag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ways -&gt; String
</span><a href="GHC.Platform.Ways.html#waysBuildTag"><span class="hs-identifier hs-var">waysBuildTag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Profile -&gt; Ways
</span><a href="GHC.Platform.Profile.html#profileWays"><span class="hs-identifier hs-var">profileWays</span></a></span><span> </span><span class="annot"><span class="annottext">Profile
</span><a href="#local-6989586621681315136"><span class="hs-identifier hs-var">profile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1454"></span><span>
</span><span id="line-1455"></span><span>    </span><span id="local-6989586621681315117"><span class="annot"><span class="annottext">not_found_in_package :: Unit -&gt; [String] -&gt; SDoc
</span><a href="#local-6989586621681315117"><span class="hs-identifier hs-var hs-var">not_found_in_package</span></a></span></span><span> </span><span id="local-6989586621681315111"><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681315111"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span id="local-6989586621681315110"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315110"><span class="hs-identifier hs-var">files</span></a></span></span><span>
</span><span id="line-1456"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315112"><span class="hs-identifier hs-var">build_tag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1457"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-1458"></span><span>            </span><span id="local-6989586621681315109"><span class="annot"><span class="annottext">build :: String
</span><a href="#local-6989586621681315109"><span class="hs-identifier hs-var hs-var">build</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315112"><span class="hs-identifier hs-var">build_tag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p&quot;</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;profiling&quot;</span></span><span>
</span><span id="line-1459"></span><span>                                        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315112"><span class="hs-identifier hs-var">build_tag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span>
</span><span id="line-1460"></span><span>         </span><span class="hs-keyword">in</span><span>
</span><span id="line-1461"></span><span>         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Perhaps you haven't installed the &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681315109"><span class="hs-identifier hs-var">build</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-1462"></span><span>         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; libraries for package &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681315111"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'?'</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1463"></span><span>         </span><span class="annot"><span class="annottext">[String] -&gt; SDoc
</span><a href="#local-6989586621681315135"><span class="hs-identifier hs-var">tried_these</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315110"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-1464"></span><span>
</span><span id="line-1465"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1466"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;There are files missing in the &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681315111"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-1467"></span><span>         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; package,&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1468"></span><span>         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;try running 'ghc-pkg check'.&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1469"></span><span>         </span><span class="annot"><span class="annottext">[String] -&gt; SDoc
</span><a href="#local-6989586621681315135"><span class="hs-identifier hs-var">tried_these</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681315110"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-1470"></span><span>
</span><span id="line-1471"></span><span>    </span><span class="annot"><a href="#local-6989586621681315115"><span class="hs-identifier hs-type">pkg_hidden</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Unit"><span class="hs-identifier hs-type">Unit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1472"></span><span>    </span><span id="local-6989586621681315115"><span class="annot"><span class="annottext">pkg_hidden :: Unit -&gt; SDoc
</span><a href="#local-6989586621681315115"><span class="hs-identifier hs-var hs-var">pkg_hidden</span></a></span></span><span> </span><span id="local-6989586621681315108"><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681315108"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1473"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;It is a member of the hidden package&quot;</span></span><span>
</span><span id="line-1474"></span><span>        </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681315108"><span class="hs-identifier hs-var">uid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1475"></span><span>        </span><span class="hs-comment">--FIXME: we don't really want to show the unit id here we should</span><span>
</span><span id="line-1476"></span><span>        </span><span class="hs-comment">-- show the source package id or installed package id if it's ambiguous</span><span>
</span><span id="line-1477"></span><span>        </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dot"><span class="hs-identifier hs-var">dot</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Unit -&gt; SDoc
</span><a href="#local-6989586621681315106"><span class="hs-identifier hs-var">pkg_hidden_hint</span></a></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681315108"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-1478"></span><span>
</span><span id="line-1479"></span><span>    </span><span id="local-6989586621681315106"><span class="annot"><span class="annottext">pkg_hidden_hint :: Unit -&gt; SDoc
</span><a href="#local-6989586621681315106"><span class="hs-identifier hs-var hs-var">pkg_hidden_hint</span></a></span></span><span> </span><span id="local-6989586621681315105"><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681315105"><span class="hs-identifier hs-var">uid</span></a></span></span><span>
</span><span id="line-1480"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681315139"><span class="hs-identifier hs-var">using_cabal</span></a></span><span>
</span><span id="line-1481"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681315104"><span class="annot"><span class="annottext">pkg :: UnitInfo
</span><a href="#local-6989586621681315104"><span class="hs-identifier hs-var hs-var">pkg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; Maybe a -&gt; a
</span><a href="GHC.Data.Maybe.html#expectJust"><span class="hs-identifier hs-var">expectJust</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pkg_hidden&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitState -&gt; Unit -&gt; Maybe UnitInfo
</span><a href="GHC.Unit.State.html#lookupUnit"><span class="hs-identifier hs-var">lookupUnit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitState
</span><a href="GHC.Unit.Env.html#ue_units"><span class="hs-identifier hs-var">ue_units</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621681315137"><span class="hs-identifier hs-var">unit_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681315105"><span class="hs-identifier hs-var">uid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1482"></span><span>           </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Perhaps you need to add&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1483"></span><span>              </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall compid srcpkgid srcpkgname uid modulename mod.
GenericUnitInfo compid srcpkgid srcpkgname uid modulename mod
-&gt; srcpkgname
</span><a href="../../ghc-boot-9.2.4/src/GHC-Unit-Database.html#unitPackageName"><span class="hs-identifier hs-var">unitPackageName</span></a></span><span> </span><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621681315104"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1484"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;to the build-depends in your .cabal file.&quot;</span></span><span>
</span><span id="line-1485"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681315100"><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621681315100"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; Unit -&gt; Maybe UnitInfo
</span><a href="GHC.Unit.State.html#lookupUnit"><span class="hs-identifier hs-var">lookupUnit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitState
</span><a href="GHC.Unit.Env.html#ue_units"><span class="hs-identifier hs-var">ue_units</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621681315137"><span class="hs-identifier hs-var">unit_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681315105"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-1486"></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;You can run&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1487"></span><span>           </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:set -package &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall compid srcpkgid srcpkgname uid modulename mod.
GenericUnitInfo compid srcpkgid srcpkgname uid modulename mod
-&gt; srcpkgname
</span><a href="../../ghc-boot-9.2.4/src/GHC-Unit-Database.html#unitPackageName"><span class="hs-identifier hs-var">unitPackageName</span></a></span><span> </span><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621681315100"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1488"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;to expose it.&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1489"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(Note: this unloads all the modules in the current scope.)&quot;</span></span><span>
</span><span id="line-1490"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1491"></span><span>
</span><span id="line-1492"></span><span>    </span><span id="local-6989586621681315114"><span class="annot"><span class="annottext">mod_hidden :: a -&gt; SDoc
</span><a href="#local-6989586621681315114"><span class="hs-identifier hs-var hs-var">mod_hidden</span></a></span></span><span> </span><span id="local-6989586621681315097"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315097"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1493"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;it is a hidden module in the package&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315097"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1494"></span><span>
</span><span id="line-1495"></span><span>    </span><span id="local-6989586621681315113"><span class="annot"><span class="annottext">unusable :: (a, UnusableUnitReason) -&gt; SDoc
</span><a href="#local-6989586621681315113"><span class="hs-identifier hs-var hs-var">unusable</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315094"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315094"><span class="hs-identifier hs-var">pkg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681315093"><span class="annot"><span class="annottext">UnusableUnitReason
</span><a href="#local-6989586621681315093"><span class="hs-identifier hs-var">reason</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1496"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;It is a member of the package&quot;</span></span><span>
</span><span id="line-1497"></span><span>      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681315094"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1498"></span><span>      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; UnusableUnitReason -&gt; SDoc
</span><a href="GHC.Unit.State.html#pprReason"><span class="hs-identifier hs-var">pprReason</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;which is&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UnusableUnitReason
</span><a href="#local-6989586621681315093"><span class="hs-identifier hs-var">reason</span></a></span><span>
</span><span id="line-1499"></span><span>
</span><span id="line-1500"></span><span>    </span><span class="annot"><a href="#local-6989586621681315116"><span class="hs-identifier hs-type">pp_suggestions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.State.html#ModuleSuggestion"><span class="hs-identifier hs-type">ModuleSuggestion</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1501"></span><span>    </span><span id="local-6989586621681315116"><span class="annot"><span class="annottext">pp_suggestions :: [ModuleSuggestion] -&gt; SDoc
</span><a href="#local-6989586621681315116"><span class="hs-identifier hs-var hs-var">pp_suggestions</span></a></span></span><span> </span><span id="local-6989586621681315091"><span class="annot"><span class="annottext">[ModuleSuggestion]
</span><a href="#local-6989586621681315091"><span class="hs-identifier hs-var">sugs</span></a></span></span><span>
</span><span id="line-1502"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[ModuleSuggestion]
</span><a href="#local-6989586621681315091"><span class="hs-identifier hs-var">sugs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1503"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Perhaps you meant&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1504"></span><span>                       </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleSuggestion -&gt; SDoc
</span><a href="#local-6989586621681315090"><span class="hs-identifier hs-var">pp_sugg</span></a></span><span> </span><span class="annot"><span class="annottext">[ModuleSuggestion]
</span><a href="#local-6989586621681315091"><span class="hs-identifier hs-var">sugs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1505"></span><span>
</span><span id="line-1506"></span><span>    </span><span class="hs-comment">-- NB: Prefer the *original* location, and then reexports, and then</span><span>
</span><span id="line-1507"></span><span>    </span><span class="hs-comment">-- package flags when making suggestions.  ToDo: if the original package</span><span>
</span><span id="line-1508"></span><span>    </span><span class="hs-comment">-- also has a reexport, prefer that one</span><span>
</span><span id="line-1509"></span><span>    </span><span id="local-6989586621681315090"><span class="annot"><span class="annottext">pp_sugg :: ModuleSuggestion -&gt; SDoc
</span><a href="#local-6989586621681315090"><span class="hs-identifier hs-var hs-var">pp_sugg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.State.html#SuggestVisible"><span class="hs-identifier hs-type">SuggestVisible</span></a></span><span> </span><span id="local-6989586621681315077"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315077"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681315076"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315076"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621681315075"><span class="annot"><span class="annottext">ModuleOrigin
</span><a href="#local-6989586621681315075"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315077"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleOrigin -&gt; SDoc
</span><a href="#local-6989586621681315074"><span class="hs-identifier hs-var">provenance</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleOrigin
</span><a href="#local-6989586621681315075"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-1510"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681315074"><span class="annot"><span class="annottext">provenance :: ModuleOrigin -&gt; SDoc
</span><a href="#local-6989586621681315074"><span class="hs-identifier hs-var hs-var">provenance</span></a></span></span><span> </span><span class="annot"><span class="annottext">ModuleOrigin
</span><a href="GHC.Unit.State.html#ModHidden"><span class="hs-identifier hs-var">ModHidden</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1511"></span><span>            </span><span class="annot"><a href="#local-6989586621681315074"><span class="hs-identifier hs-var">provenance</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.State.html#ModUnusable"><span class="hs-identifier hs-type">ModUnusable</span></a></span><span> </span><span class="annot"><span class="annottext">UnusableUnitReason
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1512"></span><span>            </span><span class="annot"><a href="#local-6989586621681315074"><span class="hs-identifier hs-var">provenance</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.State.html#ModOrigin"><span class="hs-identifier hs-type">ModOrigin</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fromOrigUnit :: ModuleOrigin -&gt; Maybe Bool
</span><a href="GHC.Unit.State.html#fromOrigUnit"><span class="hs-identifier hs-var">fromOrigUnit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315072"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681315072"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1513"></span><span>                                   </span><span class="annot"><span class="annottext">fromExposedReexport :: ModuleOrigin -&gt; [UnitInfo]
</span><a href="GHC.Unit.State.html#fromExposedReexport"><span class="hs-identifier hs-var">fromExposedReexport</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315070"><span class="annot"><span class="annottext">[UnitInfo]
</span><a href="#local-6989586621681315070"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1514"></span><span>                                   </span><span class="annot"><span class="annottext">fromPackageFlag :: ModuleOrigin -&gt; Bool
</span><a href="GHC.Unit.State.html#fromPackageFlag"><span class="hs-identifier hs-var">fromPackageFlag</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315068"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681315068"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1515"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681315072"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1516"></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;from&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315076"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1517"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681315068"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315076"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315077"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1518"></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;from&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315076"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1519"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315067"><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621681315067"><span class="hs-identifier hs-var">pkg</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[UnitInfo]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[UnitInfo]
</span><a href="#local-6989586621681315070"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-1520"></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;from&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitInfo -&gt; Unit
</span><a href="GHC.Unit.Info.html#mkUnit"><span class="hs-identifier hs-var">mkUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621681315067"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1521"></span><span>                    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reexporting&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315076"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1522"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681315068"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1523"></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;defined via package flags to be&quot;</span></span><span>
</span><span id="line-1524"></span><span>                    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315076"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1525"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1526"></span><span>    </span><span class="annot"><a href="#local-6989586621681315090"><span class="hs-identifier hs-var">pp_sugg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.State.html#SuggestHidden"><span class="hs-identifier hs-type">SuggestHidden</span></a></span><span> </span><span id="local-6989586621681315065"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315065"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681315064"><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315064"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621681315063"><span class="annot"><span class="annottext">ModuleOrigin
</span><a href="#local-6989586621681315063"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681315065"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleOrigin -&gt; SDoc
</span><a href="#local-6989586621681315062"><span class="hs-identifier hs-var">provenance</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleOrigin
</span><a href="#local-6989586621681315063"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-1527"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681315062"><span class="annot"><span class="annottext">provenance :: ModuleOrigin -&gt; SDoc
</span><a href="#local-6989586621681315062"><span class="hs-identifier hs-var hs-var">provenance</span></a></span></span><span> </span><span class="annot"><span class="annottext">ModuleOrigin
</span><a href="GHC.Unit.State.html#ModHidden"><span class="hs-identifier hs-var">ModHidden</span></a></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1528"></span><span>            </span><span class="annot"><a href="#local-6989586621681315062"><span class="hs-identifier hs-var">provenance</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.State.html#ModUnusable"><span class="hs-identifier hs-type">ModUnusable</span></a></span><span> </span><span class="annot"><span class="annottext">UnusableUnitReason
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1529"></span><span>            </span><span class="annot"><a href="#local-6989586621681315062"><span class="hs-identifier hs-var">provenance</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.State.html#ModOrigin"><span class="hs-identifier hs-type">ModOrigin</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fromOrigUnit :: ModuleOrigin -&gt; Maybe Bool
</span><a href="GHC.Unit.State.html#fromOrigUnit"><span class="hs-identifier hs-var">fromOrigUnit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315061"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681315061"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1530"></span><span>                                   </span><span class="annot"><span class="annottext">fromHiddenReexport :: ModuleOrigin -&gt; [UnitInfo]
</span><a href="GHC.Unit.State.html#fromHiddenReexport"><span class="hs-identifier hs-var">fromHiddenReexport</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681315059"><span class="annot"><span class="annottext">[UnitInfo]
</span><a href="#local-6989586621681315059"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1531"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681315061"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1532"></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;needs flag -package-id&quot;</span></span><span>
</span><span id="line-1533"></span><span>                    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681315064"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1534"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681315058"><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621681315058"><span class="hs-identifier hs-var">pkg</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[UnitInfo]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[UnitInfo]
</span><a href="#local-6989586621681315059"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1535"></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;needs flag -package-id&quot;</span></span><span>
</span><span id="line-1536"></span><span>                    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitInfo -&gt; Unit
</span><a href="GHC.Unit.Info.html#mkUnit"><span class="hs-identifier hs-var">mkUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621681315058"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1537"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-1538"></span></pre></body></html>
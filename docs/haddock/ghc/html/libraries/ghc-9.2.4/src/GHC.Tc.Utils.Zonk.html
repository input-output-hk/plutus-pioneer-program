<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP              #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies     #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-incomplete-record-updates #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The AQUA Project, Glasgow University, 1996-1998

-}</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-comment">-- | Specialisations of the @HsSyn@ syntax for the typechecker</span><span>
</span><span id="line-14"></span><span class="hs-comment">--</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- This module is an extension of @HsSyn@ syntax, for use in the type checker.</span><span>
</span><span id="line-16"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Tc.Utils.Zonk</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-17"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Extracting types from HsSyn</span></span><span>
</span><span id="line-18"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier">hsLitType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier">hsPatType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLPatType"><span class="hs-identifier">hsLPatType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Other HsSyn functions</span></span><span>
</span><span id="line-21"></span><span>        </span><span class="annot"><a href="GHC.Hs.Utils.html#mkHsDictLet"><span class="hs-identifier">mkHsDictLet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Utils.html#mkHsApp"><span class="hs-identifier">mkHsApp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><a href="GHC.Hs.Type.html#mkHsAppTy"><span class="hs-identifier">mkHsAppTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Utils.html#mkHsCaseAlt"><span class="hs-identifier">mkHsCaseAlt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#tcShortCutLit"><span class="hs-identifier">tcShortCutLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#shortCutLit"><span class="hs-identifier">shortCutLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsOverLitName"><span class="hs-identifier">hsOverLitName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>        </span><span class="annot"><a href="GHC.Core.ConLike.html#conLikeResTy"><span class="hs-identifier">conLikeResTy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>        </span><span class="annot"><span class="hs-comment">-- * re-exported from TcMonad</span></span><span>
</span><span id="line-27"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.html#TcId"><span class="hs-identifier">TcId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcIdSet"><span class="hs-identifier">TcIdSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Zonking</span></span><span>
</span><span id="line-30"></span><span>        </span><span class="hs-comment">-- | For a description of &quot;zonking&quot;, see Note [What is zonking?]</span><span>
</span><span id="line-31"></span><span>        </span><span class="hs-comment">-- in &quot;GHC.Tc.Utils.TcMType&quot;</span><span>
</span><span id="line-32"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopDecls"><span class="hs-identifier">zonkTopDecls</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopExpr"><span class="hs-identifier">zonkTopExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopLExpr"><span class="hs-identifier">zonkTopLExpr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopBndrs"><span class="hs-identifier">zonkTopBndrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkFlexi"><span class="hs-identifier">ZonkFlexi</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#emptyZonkEnv"><span class="hs-identifier">emptyZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#mkEmptyZonkEnv"><span class="hs-identifier">mkEmptyZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier">initZonkEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBindersX"><span class="hs-identifier">zonkTyVarBindersX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBinderX"><span class="hs-identifier">zonkTyVarBinderX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrs"><span class="hs-identifier">zonkTyBndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrsX"><span class="hs-identifier">zonkTyBndrsX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToType"><span class="hs-identifier">zonkTcTypeToType</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier">zonkTcTypeToTypeX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypesToTypesX"><span class="hs-identifier">zonkTcTypesToTypesX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypesToTypesX"><span class="hs-identifier">zonkScaledTcTypesToTypesX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarOcc"><span class="hs-identifier">zonkTyVarOcc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier">zonkCoToCo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBinds"><span class="hs-identifier">zonkEvBinds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds"><span class="hs-identifier">zonkTcEvBinds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcMethInfoToMethInfoX"><span class="hs-identifier">zonkTcMethInfoToMethInfoX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#lookupTyVarOcc"><span class="hs-identifier">lookupTyVarOcc</span></a></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">

#include &quot;HsVersions.h&quot;
</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Platform.html"><span class="hs-identifier">GHC.Platform</span></a></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html"><span class="hs-identifier">GHC.Builtin.Types</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.Prim.html"><span class="hs-identifier">GHC.Builtin.Types.Prim</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.html"><span class="hs-identifier">GHC.Hs</span></a></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Splice.html"><span class="hs-identifier">GHC.Tc.Gen.Splice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Gen.Splice.html#runTopSplice"><span class="hs-identifier">runTopSplice</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html"><span class="hs-identifier">GHC.Tc.Utils.Monad</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html"><span class="hs-identifier">GHC.Tc.TyCl.Build</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html#TcMethInfo"><span class="hs-identifier">TcMethInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html#MethInfo"><span class="hs-identifier">MethInfo</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html"><span class="hs-identifier">GHC.Tc.Utils.TcType</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcMType.html"><span class="hs-identifier">GHC.Tc.Utils.TcMType</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Env.html"><span class="hs-identifier">GHC.Tc.Utils.Env</span></a></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Env.html#tcLookupGlobalOnly"><span class="hs-identifier">tcLookupGlobalOnly</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html"><span class="hs-identifier">GHC.Tc.Types.Evidence</span></a></span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html"><span class="hs-identifier">GHC.Core.TyCo.Ppr</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier">pprTyVar</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.html"><span class="hs-identifier">GHC.Core.Coercion</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html"><span class="hs-identifier">GHC.Core.ConLike</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html"><span class="hs-identifier">GHC.Core.DataCon</span></a></span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html"><span class="hs-identifier">GHC.Core.Multiplicity</span></a></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.html"><span class="hs-identifier">GHC.Core</span></a></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html"><span class="hs-identifier">GHC.Core.Predicate</span></a></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html"><span class="hs-identifier">GHC.Types.Name.Env</span></a></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html"><span class="hs-identifier">GHC.Types.Var.Env</span></a></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.html"><span class="hs-identifier">GHC.Types.Id</span></a></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html"><span class="hs-identifier">GHC.Types.Id.Info</span></a></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.TypeEnv.html"><span class="hs-identifier">GHC.Types.TypeEnv</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html"><span class="hs-identifier">GHC.Types.SourceText</span></a></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html"><span class="hs-identifier">GHC.Types.Unique.FM</span></a></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html"><span class="hs-identifier">GHC.Types.TyThing</span></a></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html"><span class="hs-identifier">GHC.Driver.Session</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier">getDynFlags</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#targetPlatform"><span class="hs-identifier">targetPlatform</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Control-Monad.html#"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-List.html#"><span class="hs-identifier">Data.List</span></a></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-OldList.html#partition"><span class="hs-identifier">partition</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Control-Arrow.html#"><span class="hs-identifier">Control.Arrow</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Control-Arrow.html#second"><span class="hs-identifier">second</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
       Extracting the type from HsSyn
*                                                                      *
************************************************************************

-}</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLPatType"><span class="hs-identifier hs-type">hsLPatType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-112"></span><span id="hsLPatType"><span class="annot"><span class="annottext">hsLPatType :: LPat GhcTc -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsLPatType"><span class="hs-identifier hs-var hs-var">hsLPatType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681306341"><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681306341"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcTc -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681306341"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-type">hsPatType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-115"></span><span id="hsPatType"><span class="annot"><span class="annottext">hsPatType :: Pat GhcTc -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var hs-var">hsPatType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ParPat"><span class="hs-identifier hs-type">ParPat</span></a></span><span> </span><span class="annot"><span class="annottext">XParPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681306339"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681306339"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsLPatType"><span class="hs-identifier hs-var">hsLPatType</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681306339"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-116"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#WildPat"><span class="hs-identifier hs-type">WildPat</span></a></span><span> </span><span id="local-6989586621681306337"><span class="annot"><span class="annottext">XWildPat GhcTc
</span><a href="#local-6989586621681306337"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XWildPat GhcTc
</span><a href="#local-6989586621681306337"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-117"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-type">VarPat</span></a></span><span> </span><span class="annot"><span class="annottext">XVarPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681306335"><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621681306335"><span class="hs-identifier hs-var">lvar</span></a></span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621681306335"><span class="hs-identifier hs-var">lvar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#BangPat"><span class="hs-identifier hs-type">BangPat</span></a></span><span> </span><span class="annot"><span class="annottext">XBangPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681306331"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681306331"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsLPatType"><span class="hs-identifier hs-var">hsLPatType</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681306331"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-119"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LazyPat"><span class="hs-identifier hs-type">LazyPat</span></a></span><span> </span><span class="annot"><span class="annottext">XLazyPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681306329"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681306329"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsLPatType"><span class="hs-identifier hs-var">hsLPatType</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681306329"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-120"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LitPat"><span class="hs-identifier hs-type">LitPat</span></a></span><span> </span><span class="annot"><span class="annottext">XLitPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681306327"><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681306327"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass). HsLit (GhcPass p) -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681306327"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-121"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#AsPat"><span class="hs-identifier hs-type">AsPat</span></a></span><span> </span><span class="annot"><span class="annottext">XAsPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681306325"><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621681306325"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621681306325"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span> </span><span id="local-6989586621681306323"><span class="annot"><span class="annottext">XViewPat GhcTc
</span><a href="#local-6989586621681306323"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XViewPat GhcTc
</span><a href="#local-6989586621681306323"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-123"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ListPatTc"><span class="hs-identifier hs-type">ListPatTc</span></a></span><span> </span><span id="local-6989586621681306320"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306320"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (Kind, SyntaxExpr GhcTc)
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Kind
</span><a href="GHC.Builtin.Types.html#mkListTy"><span class="hs-identifier hs-var">mkListTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306320"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-124"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ListPatTc"><span class="hs-identifier hs-type">ListPatTc</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681306318"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306318"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306318"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-125"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span id="local-6989586621681306316"><span class="annot"><span class="annottext">XTuplePat GhcTc
</span><a href="#local-6989586621681306316"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681306315"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621681306315"><span class="hs-identifier hs-var">bx</span></a></span></span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Boxity -&gt; [Kind] -&gt; Kind
</span><a href="GHC.Builtin.Types.html#mkTupleTy1"><span class="hs-identifier hs-var">mkTupleTy1</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621681306315"><span class="hs-identifier hs-var">bx</span></a></span><span> </span><span class="annot"><span class="annottext">XTuplePat GhcTc
</span><a href="#local-6989586621681306316"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-126"></span><span>                  </span><span class="hs-comment">-- See Note [Don't flatten tuples from HsSyn] in GHC.Core.Make</span><span>
</span><span id="line-127"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SumPat"><span class="hs-identifier hs-type">SumPat</span></a></span><span> </span><span id="local-6989586621681306312"><span class="annot"><span class="annottext">XSumPat GhcTc
</span><a href="#local-6989586621681306312"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ConTag
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ConTag
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; Kind
</span><a href="GHC.Builtin.Types.html#mkSumTy"><span class="hs-identifier hs-var">mkSumTy</span></a></span><span> </span><span class="annot"><span class="annottext">XSumPat GhcTc
</span><a href="#local-6989586621681306312"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-128"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_con :: forall p. Pat p -&gt; XRec p (ConLikeP p)
</span><a href="Language.Haskell.Syntax.Pat.html#pat_con"><span class="hs-identifier hs-var">pat_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681306308"><span class="annot"><span class="annottext">XRec GhcTc (ConLikeP GhcTc)
</span><a href="#local-6989586621681306308"><span class="hs-identifier hs-var">lcon</span></a></span></span><span>
</span><span id="line-129"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_con_ext :: forall p. Pat p -&gt; XConPat p
</span><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#ConPatTc"><span class="hs-identifier hs-type">ConPatTc</span></a></span><span>
</span><span id="line-130"></span><span>                    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cpt_arg_tys :: ConPatTc -&gt; [Kind]
</span><a href="GHC.Hs.Pat.html#cpt_arg_tys"><span class="hs-identifier hs-var">cpt_arg_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681306304"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681306304"><span class="hs-identifier hs-var">tys</span></a></span></span><span>
</span><span id="line-131"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-132"></span><span>                  </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>                                        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConLike -&gt; [Kind] -&gt; Kind
</span><a href="GHC.Core.ConLike.html#conLikeResTy"><span class="hs-identifier hs-var">conLikeResTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcTc (ConLikeP GhcTc)
</span><a href="#local-6989586621681306308"><span class="hs-identifier hs-var">lcon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681306304"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-134"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SigPat"><span class="hs-identifier hs-type">SigPat</span></a></span><span> </span><span id="local-6989586621681306302"><span class="annot"><span class="annottext">XSigPat GhcTc
</span><a href="#local-6989586621681306302"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc GhcTc)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XSigPat GhcTc
</span><a href="#local-6989586621681306302"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-135"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPat"><span class="hs-identifier hs-type">NPat</span></a></span><span> </span><span id="local-6989586621681306300"><span class="annot"><span class="annottext">XNPat GhcTc
</span><a href="#local-6989586621681306300"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">XRec GhcTc (HsOverLit GhcTc)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XNPat GhcTc
</span><a href="#local-6989586621681306300"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-136"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPlusKPat"><span class="hs-identifier hs-type">NPlusKPat</span></a></span><span> </span><span id="local-6989586621681306298"><span class="annot"><span class="annottext">XNPlusKPat GhcTc
</span><a href="#local-6989586621681306298"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">LIdP GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">XRec GhcTc (HsOverLit GhcTc)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XNPlusKPat GhcTc
</span><a href="#local-6989586621681306298"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-137"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#XPat"><span class="hs-identifier hs-type">XPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#CoPat"><span class="hs-identifier hs-type">CoPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681306295"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306295"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306295"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-138"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SplicePat"><span class="hs-identifier hs-type">SplicePat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hsPatType: SplicePat&quot;</span></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span id="local-6989586621681307599"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-type">hsLitType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681307599"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span></span><span>
</span><span id="line-141"></span><span id="hsLitType"><span class="annot"><span class="annottext">hsLitType :: forall (p :: Pass). HsLit (GhcPass p) -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var hs-var">hsLitType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsChar"><span class="hs-identifier hs-type">HsChar</span></a></span><span> </span><span class="annot"><span class="annottext">XHsChar (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#charTy"><span class="hs-identifier hs-var">charTy</span></a></span><span>
</span><span id="line-142"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsCharPrim"><span class="hs-identifier hs-type">HsCharPrim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsCharPrim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#charPrimTy"><span class="hs-identifier hs-var">charPrimTy</span></a></span><span>
</span><span id="line-143"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsString"><span class="hs-identifier hs-type">HsString</span></a></span><span> </span><span class="annot"><span class="annottext">XHsString (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FastString
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#stringTy"><span class="hs-identifier hs-var">stringTy</span></a></span><span>
</span><span id="line-144"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsStringPrim"><span class="hs-identifier hs-type">HsStringPrim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsStringPrim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#addrPrimTy"><span class="hs-identifier hs-var">addrPrimTy</span></a></span><span>
</span><span id="line-145"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsInt"><span class="hs-identifier hs-type">HsInt</span></a></span><span> </span><span class="annot"><span class="annottext">XHsInt (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">IntegralLit
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#intTy"><span class="hs-identifier hs-var">intTy</span></a></span><span>
</span><span id="line-146"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsIntPrim"><span class="hs-identifier hs-type">HsIntPrim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsIntPrim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#intPrimTy"><span class="hs-identifier hs-var">intPrimTy</span></a></span><span>
</span><span id="line-147"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsWordPrim"><span class="hs-identifier hs-type">HsWordPrim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsWordPrim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#wordPrimTy"><span class="hs-identifier hs-var">wordPrimTy</span></a></span><span>
</span><span id="line-148"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsInt64Prim"><span class="hs-identifier hs-type">HsInt64Prim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsInt64Prim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#int64PrimTy"><span class="hs-identifier hs-var">int64PrimTy</span></a></span><span>
</span><span id="line-149"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsWord64Prim"><span class="hs-identifier hs-type">HsWord64Prim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsWord64Prim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#word64PrimTy"><span class="hs-identifier hs-var">word64PrimTy</span></a></span><span>
</span><span id="line-150"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsInteger"><span class="hs-identifier hs-type">HsInteger</span></a></span><span> </span><span class="annot"><span class="annottext">XHsInteger (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681306272"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306272"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306272"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-151"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsRat"><span class="hs-identifier hs-type">HsRat</span></a></span><span> </span><span class="annot"><span class="annottext">XHsRat (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681306270"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306270"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306270"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-152"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsFloatPrim"><span class="hs-identifier hs-type">HsFloatPrim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsFloatPrim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#floatPrimTy"><span class="hs-identifier hs-var">floatPrimTy</span></a></span><span>
</span><span id="line-153"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsDoublePrim"><span class="hs-identifier hs-type">HsDoublePrim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsDoublePrim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#doublePrimTy"><span class="hs-identifier hs-var">doublePrimTy</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-comment">{- *********************************************************************
*                                                                      *
         Short-cuts for overloaded numeric literals
*                                                                      *
********************************************************************* -}</span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span class="hs-comment">-- Overloaded literals. Here mainly because it uses isIntTy etc</span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span class="hs-comment">{- Note [Short cut for overloaded literals]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
A literal like &quot;3&quot; means (fromInteger @ty (dNum :: Num ty) (3::Integer)).
But if we have a list like
  [4,2,3,2,4,4,2]::[Int]
we use a lot of compile time and space generating and solving all those Num
constraints, and generating calls to fromInteger etc.  Better just to cut to
the chase, and cough up an Int literal. Large collections of literals like this
sometimes appear in source files, so it's quite a worthwhile fix.

So we try to take advantage of whatever nearby type information we have,
to short-cut the process for built-in types.  We can do this in two places;

* In the typechecker, when we are about to typecheck the literal.
* If that fails, in the desugarer, once we know the final type.
-}</span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#tcShortCutLit"><span class="hs-identifier hs-type">tcShortCutLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#ExpRhoType"><span class="hs-identifier hs-type">ExpRhoType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span id="tcShortCutLit"><span class="annot"><span class="annottext">tcShortCutLit :: HsOverLit GhcRn -&gt; ExpRhoType -&gt; TcM (Maybe (HsOverLit GhcTc))
</span><a href="GHC.Tc.Utils.Zonk.html#tcShortCutLit"><span class="hs-identifier hs-var hs-var">tcShortCutLit</span></a></span></span><span> </span><span id="local-6989586621681306265"><span class="annot"><span class="annottext">lit :: HsOverLit GhcRn
</span><a href="#local-6989586621681306265"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#OverLit"><span class="hs-identifier hs-type">OverLit</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ol_val :: forall p. HsOverLit p -&gt; OverLitVal
</span><a href="Language.Haskell.Syntax.Lit.html#ol_val"><span class="hs-identifier hs-var">ol_val</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681306262"><span class="annot"><span class="annottext">OverLitVal
</span><a href="#local-6989586621681306262"><span class="hs-identifier hs-var">val</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ol_ext :: forall p. HsOverLit p -&gt; XOverLit p
</span><a href="Language.Haskell.Syntax.Lit.html#ol_ext"><span class="hs-identifier hs-var">ol_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681306260"><span class="annot"><span class="annottext">XOverLit GhcRn
</span><a href="#local-6989586621681306260"><span class="hs-identifier hs-var">rebindable</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681306259"><span class="annot"><span class="annottext">ExpRhoType
</span><a href="#local-6989586621681306259"><span class="hs-identifier hs-var">exp_res_ty</span></a></span></span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">XOverLit GhcRn
</span><a href="#local-6989586621681306260"><span class="hs-identifier hs-var">rebindable</span></a></span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681306257"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306257"><span class="hs-identifier hs-var">res_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExpRhoType -&gt; Maybe Kind
</span><a href="GHC.Tc.Utils.TcMType.html#checkingExpType_maybe"><span class="hs-identifier hs-var">checkingExpType_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">ExpRhoType
</span><a href="#local-6989586621681306259"><span class="hs-identifier hs-var">exp_res_ty</span></a></span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681306255"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681306255"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-185"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681306254"><span class="annot"><span class="annottext">platform :: Platform
</span><a href="#local-6989586621681306254"><span class="hs-identifier hs-var hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Platform
</span><a href="GHC.Driver.Session.html#targetPlatform"><span class="hs-identifier hs-var">targetPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681306255"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-186"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; OverLitVal -&gt; Kind -&gt; Maybe (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#shortCutLit"><span class="hs-identifier hs-var">shortCutLit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681306254"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">OverLitVal
</span><a href="#local-6989586621681306262"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306257"><span class="hs-identifier hs-var">res_ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-187"></span><span>            </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681306253"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681306253"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-188"></span><span>                         </span><span class="annot"><span class="annottext">HsOverLit GhcRn
</span><a href="#local-6989586621681306265"><span class="hs-identifier hs-var">lit</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ol_witness :: HsExpr GhcTc
</span><a href="Language.Haskell.Syntax.Lit.html#ol_witness"><span class="hs-identifier hs-var">ol_witness</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681306253"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-189"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ol_ext :: XOverLit GhcTc
</span><a href="Language.Haskell.Syntax.Lit.html#ol_ext"><span class="hs-identifier hs-var">ol_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Kind -&gt; OverLitTc
</span><a href="GHC.Hs.Lit.html#OverLitTc"><span class="hs-identifier hs-var">OverLitTc</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306257"><span class="hs-identifier hs-var">res_ty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-190"></span><span>            </span><span class="annot"><span class="annottext">Maybe (HsExpr GhcTc)
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-191"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-192"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#shortCutLit"><span class="hs-identifier hs-type">shortCutLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#OverLitVal"><span class="hs-identifier hs-type">OverLitVal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span id="shortCutLit"><span class="annot"><span class="annottext">shortCutLit :: Platform -&gt; OverLitVal -&gt; Kind -&gt; Maybe (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#shortCutLit"><span class="hs-identifier hs-var hs-var">shortCutLit</span></a></span></span><span> </span><span id="local-6989586621681306250"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681306250"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span id="local-6989586621681306249"><span class="annot"><span class="annottext">OverLitVal
</span><a href="#local-6989586621681306249"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span id="local-6989586621681306248"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306248"><span class="hs-identifier hs-var">res_ty</span></a></span></span><span>
</span><span id="line-196"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OverLitVal
</span><a href="#local-6989586621681306249"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-197"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsIntegral"><span class="hs-identifier hs-type">HsIntegral</span></a></span><span> </span><span id="local-6989586621681306246"><span class="annot"><span class="annottext">IntegralLit
</span><a href="#local-6989586621681306246"><span class="hs-identifier hs-var">int_lit</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IntegralLit -&gt; Maybe (HsExpr GhcTc)
</span><a href="#local-6989586621681306245"><span class="hs-identifier hs-var">go_integral</span></a></span><span> </span><span class="annot"><span class="annottext">IntegralLit
</span><a href="#local-6989586621681306246"><span class="hs-identifier hs-var">int_lit</span></a></span><span>
</span><span id="line-198"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsFractional"><span class="hs-identifier hs-type">HsFractional</span></a></span><span> </span><span id="local-6989586621681306243"><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681306243"><span class="hs-identifier hs-var">frac_lit</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FractionalLit -&gt; Maybe (HsExpr GhcTc)
</span><a href="#local-6989586621681306242"><span class="hs-identifier hs-var">go_fractional</span></a></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681306243"><span class="hs-identifier hs-var">frac_lit</span></a></span><span>
</span><span id="line-199"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsIsString"><span class="hs-identifier hs-type">HsIsString</span></a></span><span> </span><span id="local-6989586621681306240"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681306240"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681306239"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681306239"><span class="hs-identifier hs-var">src</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SourceText -&gt; FastString -&gt; Maybe (HsExpr GhcTc)
</span><a href="#local-6989586621681306238"><span class="hs-identifier hs-var">go_string</span></a></span><span>   </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681306240"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681306239"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-201"></span><span>    </span><span id="local-6989586621681306245"><span class="annot"><span class="annottext">go_integral :: IntegralLit -&gt; Maybe (HsExpr GhcTc)
</span><a href="#local-6989586621681306245"><span class="hs-identifier hs-var hs-var">go_integral</span></a></span></span><span> </span><span id="local-6989586621681306237"><span class="annot"><span class="annottext">int :: IntegralLit
</span><a href="#local-6989586621681306237"><span class="hs-identifier hs-var">int</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SourceText.html#IL"><span class="hs-identifier hs-type">IL</span></a></span><span> </span><span id="local-6989586621681306235"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681306235"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621681306234"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681306234"><span class="hs-identifier hs-var">neg</span></a></span></span><span> </span><span id="local-6989586621681306233"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681306233"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isIntTy"><span class="hs-identifier hs-var">isIntTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306248"><span class="hs-identifier hs-var">res_ty</span></a></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Integer -&gt; Bool
</span><a href="GHC.Platform.html#platformInIntRange"><span class="hs-identifier hs-var">platformInIntRange</span></a></span><span>  </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681306250"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681306233"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-203"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x. XHsInt x -&gt; IntegralLit -&gt; HsLit x
</span><a href="Language.Haskell.Syntax.Lit.html#HsInt"><span class="hs-identifier hs-var">HsInt</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">IntegralLit
</span><a href="#local-6989586621681306237"><span class="hs-identifier hs-var">int</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isWordTy"><span class="hs-identifier hs-var">isWordTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306248"><span class="hs-identifier hs-var">res_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Integer -&gt; Bool
</span><a href="GHC.Platform.html#platformInWordRange"><span class="hs-identifier hs-var">platformInWordRange</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681306250"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681306233"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-205"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; HsLit GhcTc -&gt; HsExpr GhcTc
</span><a href="GHC.Tc.Utils.Zonk.html#mkLit"><span class="hs-identifier hs-var">mkLit</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#wordDataCon"><span class="hs-identifier hs-var">wordDataCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x. XHsWordPrim x -&gt; Integer -&gt; HsLit x
</span><a href="Language.Haskell.Syntax.Lit.html#HsWordPrim"><span class="hs-identifier hs-var">HsWordPrim</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681306235"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681306233"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isIntegerTy"><span class="hs-identifier hs-var">isIntegerTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306248"><span class="hs-identifier hs-var">res_ty</span></a></span><span>
</span><span id="line-207"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x. XHsInteger x -&gt; Integer -&gt; Kind -&gt; HsLit x
</span><a href="Language.Haskell.Syntax.Lit.html#HsInteger"><span class="hs-identifier hs-var">HsInteger</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681306235"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681306233"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306248"><span class="hs-identifier hs-var">res_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-209"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FractionalLit -&gt; Maybe (HsExpr GhcTc)
</span><a href="#local-6989586621681306242"><span class="hs-identifier hs-var">go_fractional</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Integer -&gt; FractionalLit
</span><a href="GHC.Types.SourceText.html#integralFractionalLit"><span class="hs-identifier hs-var">integralFractionalLit</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681306234"><span class="hs-identifier hs-var">neg</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681306233"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>        </span><span class="hs-comment">-- The 'otherwise' case is important</span><span>
</span><span id="line-211"></span><span>        </span><span class="hs-comment">-- Consider (3 :: Float).  Syntactically it looks like an IntLit,</span><span>
</span><span id="line-212"></span><span>        </span><span class="hs-comment">-- so we'll call shortCutIntLit, but of course it's a float</span><span>
</span><span id="line-213"></span><span>        </span><span class="hs-comment">-- This can make a big difference for programs with a lot of</span><span>
</span><span id="line-214"></span><span>        </span><span class="hs-comment">-- literals, compiled without -O</span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span>    </span><span id="local-6989586621681306242"><span class="annot"><span class="annottext">go_fractional :: FractionalLit -&gt; Maybe (HsExpr GhcTc)
</span><a href="#local-6989586621681306242"><span class="hs-identifier hs-var hs-var">go_fractional</span></a></span></span><span> </span><span id="local-6989586621681306220"><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681306220"><span class="hs-identifier hs-var">f</span></a></span></span><span>
</span><span id="line-217"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isFloatTy"><span class="hs-identifier hs-var">isFloatTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306248"><span class="hs-identifier hs-var">res_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681306218"><span class="hs-identifier hs-var">valueInRange</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; HsLit GhcTc -&gt; HsExpr GhcTc
</span><a href="GHC.Tc.Utils.Zonk.html#mkLit"><span class="hs-identifier hs-var">mkLit</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#floatDataCon"><span class="hs-identifier hs-var">floatDataCon</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x. XHsFloatPrim x -&gt; FractionalLit -&gt; HsLit x
</span><a href="Language.Haskell.Syntax.Lit.html#HsFloatPrim"><span class="hs-identifier hs-var">HsFloatPrim</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681306220"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isDoubleTy"><span class="hs-identifier hs-var">isDoubleTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306248"><span class="hs-identifier hs-var">res_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681306218"><span class="hs-identifier hs-var">valueInRange</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; HsLit GhcTc -&gt; HsExpr GhcTc
</span><a href="GHC.Tc.Utils.Zonk.html#mkLit"><span class="hs-identifier hs-var">mkLit</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#doubleDataCon"><span class="hs-identifier hs-var">doubleDataCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x. XHsDoublePrim x -&gt; FractionalLit -&gt; HsLit x
</span><a href="Language.Haskell.Syntax.Lit.html#HsDoublePrim"><span class="hs-identifier hs-var">HsDoublePrim</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681306220"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-220"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-221"></span><span>        </span><span id="local-6989586621681306218"><span class="annot"><span class="annottext">valueInRange :: Bool
</span><a href="#local-6989586621681306218"><span class="hs-identifier hs-var hs-var">valueInRange</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-222"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681306220"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-223"></span><span>            </span><span class="annot"><a href="GHC.Types.SourceText.html#FL"><span class="hs-identifier hs-type">FL</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fl_exp :: FractionalLit -&gt; Integer
</span><a href="GHC.Types.SourceText.html#fl_exp"><span class="hs-identifier hs-var">fl_exp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681306212"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681306212"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681306212"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681306212"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-224"></span><span>            </span><span class="hs-comment">-- We limit short-cutting Fractional Literals to when their power of 10</span><span>
</span><span id="line-225"></span><span>            </span><span class="hs-comment">-- is less than 100, which ensures desugaring isn't slow.</span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span>    </span><span id="local-6989586621681306238"><span class="annot"><span class="annottext">go_string :: SourceText -&gt; FastString -&gt; Maybe (HsExpr GhcTc)
</span><a href="#local-6989586621681306238"><span class="hs-identifier hs-var hs-var">go_string</span></a></span></span><span> </span><span id="local-6989586621681306210"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681306210"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621681306209"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681306209"><span class="hs-identifier hs-var">s</span></a></span></span><span>
</span><span id="line-228"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isStringTy"><span class="hs-identifier hs-var">isStringTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306248"><span class="hs-identifier hs-var">res_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x. XHsString x -&gt; FastString -&gt; HsLit x
</span><a href="Language.Haskell.Syntax.Lit.html#HsString"><span class="hs-identifier hs-var">HsString</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681306210"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681306209"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#mkLit"><span class="hs-identifier hs-type">mkLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-232"></span><span id="mkLit"><span class="annot"><span class="annottext">mkLit :: DataCon -&gt; HsLit GhcTc -&gt; HsExpr GhcTc
</span><a href="GHC.Tc.Utils.Zonk.html#mkLit"><span class="hs-identifier hs-var hs-var">mkLit</span></a></span></span><span> </span><span id="local-6989586621681306207"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681306207"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621681306206"><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681306206"><span class="hs-identifier hs-var">lit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p. XApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-var">HsApp</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnCO
</span><a href="GHC.Parser.Annotation.html#noComments"><span class="hs-identifier hs-var">noComments</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; LHsExpr GhcTc
</span><a href="GHC.Hs.Utils.html#nlHsDataCon"><span class="hs-identifier hs-var">nlHsDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681306207"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass). HsLit (GhcPass p) -&gt; LHsExpr (GhcPass p)
</span><a href="GHC.Hs.Utils.html#nlHsLit"><span class="hs-identifier hs-var">nlHsLit</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681306206"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="hs-comment">------------------------------</span><span>
</span><span id="line-235"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsOverLitName"><span class="hs-identifier hs-type">hsOverLitName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#OverLitVal"><span class="hs-identifier hs-type">OverLitVal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-236"></span><span class="hs-comment">-- Get the canonical 'fromX' name for a particular OverLitVal</span><span>
</span><span id="line-237"></span><span id="hsOverLitName"><span class="annot"><span class="annottext">hsOverLitName :: OverLitVal -&gt; Name
</span><a href="GHC.Tc.Utils.Zonk.html#hsOverLitName"><span class="hs-identifier hs-var hs-var">hsOverLitName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsIntegral"><span class="hs-identifier hs-type">HsIntegral</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#fromIntegerName"><span class="hs-identifier hs-var">fromIntegerName</span></a></span><span>
</span><span id="line-238"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsOverLitName"><span class="hs-identifier hs-var">hsOverLitName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsFractional"><span class="hs-identifier hs-type">HsFractional</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#fromRationalName"><span class="hs-identifier hs-var">fromRationalName</span></a></span><span>
</span><span id="line-239"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsOverLitName"><span class="hs-identifier hs-var">hsOverLitName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsIsString"><span class="hs-identifier hs-type">HsIsString</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#fromStringName"><span class="hs-identifier hs-var">fromStringName</span></a></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[BackSubst-HsBinds]{Running a substitution over @HsBinds@}
*                                                                      *
************************************************************************

The rest of the zonking is done *after* typechecking.
The main zonking pass runs over the bindings

 a) to convert TcTyVars to TyVars etc, dereferencing any bindings etc
 b) convert unbound TcTyVar to Void
 c) convert each TcId to an Id by zonking its type

The type variables are converted by binding mutable tyvars to immutable ones
and then zonking as normal.

The Ids are converted by binding them in the normal Tc envt; that
way we maintain sharing; eg an Id is zonked at its binding site and they
all occurrences of that Id point to the common zonked copy

It's all pretty boring stuff, because HsSyn is such a large type, and
the environment manipulation is tiresome.
-}</span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-comment">-- Confused by zonking? See Note [What is zonking?] in GHC.Tc.Utils.TcMType.</span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span class="hs-comment">-- | See Note [The ZonkEnv]</span><span>
</span><span id="line-269"></span><span class="hs-comment">-- Confused by zonking? See Note [What is zonking?] in &quot;GHC.Tc.Utils.TcMType&quot;.</span><span>
</span><span id="line-270"></span><span class="hs-keyword">data</span><span> </span><span id="ZonkEnv"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-var">ZonkEnv</span></a></span></span><span>  </span><span class="hs-comment">-- See Note [The ZonkEnv]</span><span>
</span><span id="line-271"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ZonkEnv"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-var">ZonkEnv</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="ze_flexi"><span class="annot"><span class="annottext">ZonkEnv -&gt; ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#ze_flexi"><span class="hs-identifier hs-var hs-var">ze_flexi</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkFlexi"><span class="hs-identifier hs-type">ZonkFlexi</span></a></span><span>
</span><span id="line-272"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="ze_tv_env"><span class="annot"><span class="annottext">ZonkEnv -&gt; TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var hs-var">ze_tv_env</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#TyCoVarEnv"><span class="hs-identifier hs-type">TyCoVarEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span>
</span><span id="line-273"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="ze_id_env"><span class="annot"><span class="annottext">ZonkEnv -&gt; TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var hs-var">ze_id_env</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#IdEnv"><span class="hs-identifier hs-type">IdEnv</span></a></span><span>      </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-274"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="ze_meta_tv_env"><span class="annot"><span class="annottext">ZonkEnv -&gt; TcRef (TyVarEnv Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#ze_meta_tv_env"><span class="hs-identifier hs-var hs-var">ze_meta_tv_env</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcRef"><span class="hs-identifier hs-type">TcRef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.Env.html#TyVarEnv"><span class="hs-identifier hs-type">TyVarEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="hs-comment">{- Note [The ZonkEnv]
~~~~~~~~~~~~~~~~~~~~~
* ze_flexi :: ZonkFlexi says what to do with a
  unification variable that is still un-unified.
  See Note [Un-unified unification variables]

* ze_tv_env :: TyCoVarEnv TyCoVar promotes sharing. At a binding site
  of a tyvar or covar, we zonk the kind right away and add a mapping
  to the env. This prevents re-zonking the kind at every
  occurrence. But this is *just* an optimisation.

* ze_id_env : IdEnv Id promotes sharing among Ids, by making all
  occurrences of the Id point to a single zonked copy, built at the
  binding site.

  Unlike ze_tv_env, it is knot-tied: see extendIdZonkEnvRec.
  In a mutually recursive group
     rec { f = ...g...; g = ...f... }
  we want the occurrence of g to point to the one zonked Id for g,
  and the same for f.

  Because it is knot-tied, we must be careful to consult it lazily.
  Specifically, zonkIdOcc is not monadic.

* ze_meta_tv_env: see Note [Sharing when zonking to Type]


Notes:
  * We must be careful never to put coercion variables (which are Ids,
    after all) in the knot-tied ze_id_env, because coercions can
    appear in types, and we sometimes inspect a zonked type in this
    module.  [Question: where, precisely?]

  * In zonkTyVarOcc we consult ze_tv_env in a monadic context,
    a second reason that ze_tv_env can't be monadic.

  * An obvious suggestion would be to have one VarEnv Var to
    replace both ze_id_env and ze_tv_env, but that doesn't work
    because of the knot-tying stuff mentioned above.

Note [Un-unified unification variables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
What should we do if we find a Flexi unification variable?
There are three possibilities:

* DefaultFlexi: this is the common case, in situations like
     length @alpha ([] @alpha)
  It really doesn't matter what type we choose for alpha.  But
  we must choose a type!  We can't leave mutable unification
  variables floating around: after typecheck is complete, every
  type variable occurrence must have a binding site.

  So we default it to 'Any' of the right kind.

  All this works for both type and kind variables (indeed
  the two are the same thing).

* SkolemiseFlexi: is a special case for the LHS of RULES.
  See Note [Zonking the LHS of a RULE]

* RuntimeUnkFlexi: is a special case for the GHCi debugger.
  It's a way to have a variable that is not a mutable
  unification variable, but doesn't have a binding site
  either.

* NoFlexi: See Note [Error on unconstrained meta-variables]
  in GHC.Tc.Utils.TcMType. This mode will panic on unfilled
  meta-variables.
-}</span><span>
</span><span id="line-345"></span><span>
</span><span id="line-346"></span><span class="hs-keyword">data</span><span> </span><span id="ZonkFlexi"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkFlexi"><span class="hs-identifier hs-var">ZonkFlexi</span></a></span></span><span>   </span><span class="hs-comment">-- See Note [Un-unified unification variables]</span><span>
</span><span id="line-347"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DefaultFlexi"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#DefaultFlexi"><span class="hs-identifier hs-var">DefaultFlexi</span></a></span></span><span>    </span><span class="hs-comment">-- Default unbound unification variables to Any</span><span>
</span><span id="line-348"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SkolemiseFlexi"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#SkolemiseFlexi"><span class="hs-identifier hs-var">SkolemiseFlexi</span></a></span></span><span>  </span><span class="hs-comment">-- Skolemise unbound unification variables</span><span>
</span><span id="line-349"></span><span>                    </span><span class="hs-comment">-- See Note [Zonking the LHS of a RULE]</span><span>
</span><span id="line-350"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RuntimeUnkFlexi"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#RuntimeUnkFlexi"><span class="hs-identifier hs-var">RuntimeUnkFlexi</span></a></span></span><span> </span><span class="hs-comment">-- Used in the GHCi debugger</span><span>
</span><span id="line-351"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NoFlexi"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#NoFlexi"><span class="hs-identifier hs-var">NoFlexi</span></a></span></span><span>         </span><span class="hs-comment">-- Panic on unfilled meta-variables</span><span>
</span><span id="line-352"></span><span>                    </span><span class="hs-comment">-- See Note [Error on unconstrained meta-variables]</span><span>
</span><span id="line-353"></span><span>                    </span><span class="hs-comment">-- in GHC.Tc.Utils.TcMType</span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-356"></span><span>  </span><span id="local-6989586621681306180"><span class="annot"><span class="annottext">ppr :: ZonkEnv -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: ZonkEnv -&gt; TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681306178"><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306178"><span class="hs-identifier hs-var">tv_env</span></a></span></span><span>
</span><span id="line-357"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: ZonkEnv -&gt; TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681306177"><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306177"><span class="hs-identifier hs-var">id_env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-358"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ZE&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-359"></span><span>         </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ze_tv_env =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306178"><span class="hs-identifier hs-var">tv_env</span></a></span><span>
</span><span id="line-360"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ze_id_env =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306177"><span class="hs-identifier hs-var">id_env</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-comment">-- The EvBinds have to already be zonked, but that's usually the case.</span><span>
</span><span id="line-363"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#emptyZonkEnv"><span class="hs-identifier hs-type">emptyZonkEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-364"></span><span id="emptyZonkEnv"><span class="annot"><span class="annottext">emptyZonkEnv :: TcM ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#emptyZonkEnv"><span class="hs-identifier hs-var hs-var">emptyZonkEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi -&gt; TcM ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#mkEmptyZonkEnv"><span class="hs-identifier hs-var">mkEmptyZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#DefaultFlexi"><span class="hs-identifier hs-var">DefaultFlexi</span></a></span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#mkEmptyZonkEnv"><span class="hs-identifier hs-type">mkEmptyZonkEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkFlexi"><span class="hs-identifier hs-type">ZonkFlexi</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-367"></span><span id="mkEmptyZonkEnv"><span class="annot"><span class="annottext">mkEmptyZonkEnv :: ZonkFlexi -&gt; TcM ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#mkEmptyZonkEnv"><span class="hs-identifier hs-var hs-var">mkEmptyZonkEnv</span></a></span></span><span> </span><span id="local-6989586621681306172"><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681306172"><span class="hs-identifier hs-var">flexi</span></a></span></span><span>
</span><span id="line-368"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681306171"><span class="annot"><span class="annottext">TcRef (TyVarEnv Kind)
</span><a href="#local-6989586621681306171"><span class="hs-identifier hs-var">mtv_env_ref</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a gbl lcl. a -&gt; TcRnIf gbl lcl (TcRef a)
</span><a href="GHC.Tc.Utils.Monad.html#newTcRef"><span class="hs-identifier hs-var">newTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a
</span><a href="GHC.Types.Var.Env.html#emptyVarEnv"><span class="hs-identifier hs-var">emptyVarEnv</span></a></span><span>
</span><span id="line-369"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_flexi :: ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#ze_flexi"><span class="hs-identifier hs-var">ze_flexi</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681306172"><span class="hs-identifier hs-var">flexi</span></a></span><span>
</span><span id="line-370"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a
</span><a href="GHC.Types.Var.Env.html#emptyVarEnv"><span class="hs-identifier hs-var">emptyVarEnv</span></a></span><span>
</span><span id="line-371"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a
</span><a href="GHC.Types.Var.Env.html#emptyVarEnv"><span class="hs-identifier hs-var">emptyVarEnv</span></a></span><span>
</span><span id="line-372"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_meta_tv_env :: TcRef (TyVarEnv Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#ze_meta_tv_env"><span class="hs-identifier hs-var">ze_meta_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcRef (TyVarEnv Kind)
</span><a href="#local-6989586621681306171"><span class="hs-identifier hs-var">mtv_env_ref</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-373"></span><span>
</span><span id="line-374"></span><span id="local-6989586621681307509"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-type">initZonkEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681307509"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681307509"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-375"></span><span id="initZonkEnv"><span class="annot"><span class="annottext">initZonkEnv :: forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var hs-var">initZonkEnv</span></a></span></span><span> </span><span id="local-6989586621681306167"><span class="annot"><span class="annottext">ZonkEnv -&gt; TcM b
</span><a href="#local-6989586621681306167"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681306166"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306166"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi -&gt; TcM ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#mkEmptyZonkEnv"><span class="hs-identifier hs-var">mkEmptyZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#DefaultFlexi"><span class="hs-identifier hs-var">DefaultFlexi</span></a></span><span>
</span><span id="line-376"></span><span>                              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcM b
</span><a href="#local-6989586621681306167"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306166"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span class="hs-comment">-- | Extend the knot-tied environment.</span><span>
</span><span id="line-379"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-type">extendIdZonkEnvRec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-380"></span><span id="extendIdZonkEnvRec"><span class="annot"><span class="annottext">extendIdZonkEnvRec :: ZonkEnv -&gt; [TcTyVar] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var hs-var">extendIdZonkEnvRec</span></a></span></span><span> </span><span id="local-6989586621681306163"><span class="annot"><span class="annottext">ze :: ZonkEnv
</span><a href="#local-6989586621681306163"><span class="hs-identifier hs-var">ze</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: ZonkEnv -&gt; TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681306162"><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306162"><span class="hs-identifier hs-var">id_env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681306161"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306161"><span class="hs-identifier hs-var">ids</span></a></span></span><span>
</span><span id="line-381"></span><span>    </span><span class="hs-comment">-- NB: Don't look at the var to decide which env't to put it in. That</span><span>
</span><span id="line-382"></span><span>    </span><span class="hs-comment">-- would end up knot-tying all the env'ts.</span><span>
</span><span id="line-383"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306163"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a -&gt; [(TcTyVar, a)] -&gt; VarEnv a
</span><a href="GHC.Types.Var.Env.html#extendVarEnvList"><span class="hs-identifier hs-var">extendVarEnvList</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306162"><span class="hs-identifier hs-var">id_env</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306159"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306159"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681306159"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306159"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306161"><span class="hs-identifier hs-var">ids</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-384"></span><span>  </span><span class="hs-comment">-- Given coercion variables will actually end up here. That's OK though:</span><span>
</span><span id="line-385"></span><span>  </span><span class="hs-comment">-- coercion variables are never looked up in the knot-tied env't, so zonking</span><span>
</span><span id="line-386"></span><span>  </span><span class="hs-comment">-- them simply doesn't get optimised. No one gets hurt. An improvement (?)</span><span>
</span><span id="line-387"></span><span>  </span><span class="hs-comment">-- would be to do SCC analysis in zonkEvBinds and then only knot-tie the</span><span>
</span><span id="line-388"></span><span>  </span><span class="hs-comment">-- recursive groups. But perhaps the time it takes to do the analysis is</span><span>
</span><span id="line-389"></span><span>  </span><span class="hs-comment">-- more than the savings.</span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#extendZonkEnv"><span class="hs-identifier hs-type">extendZonkEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-392"></span><span id="extendZonkEnv"><span class="annot"><span class="annottext">extendZonkEnv :: ZonkEnv -&gt; [TcTyVar] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendZonkEnv"><span class="hs-identifier hs-var hs-var">extendZonkEnv</span></a></span></span><span> </span><span id="local-6989586621681306157"><span class="annot"><span class="annottext">ze :: ZonkEnv
</span><a href="#local-6989586621681306157"><span class="hs-identifier hs-var">ze</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: ZonkEnv -&gt; TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681306156"><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306156"><span class="hs-identifier hs-var">tyco_env</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: ZonkEnv -&gt; TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681306155"><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306155"><span class="hs-identifier hs-var">id_env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681306154"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306154"><span class="hs-identifier hs-var">vars</span></a></span></span><span>
</span><span id="line-393"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306157"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a -&gt; [(TcTyVar, a)] -&gt; VarEnv a
</span><a href="GHC.Types.Var.Env.html#extendVarEnvList"><span class="hs-identifier hs-var">extendVarEnvList</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306156"><span class="hs-identifier hs-var">tyco_env</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306153"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306153"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681306153"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306153"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306152"><span class="hs-identifier hs-var">tycovars</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-394"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a -&gt; [(TcTyVar, a)] -&gt; VarEnv a
</span><a href="GHC.Types.Var.Env.html#extendVarEnvList"><span class="hs-identifier hs-var">extendVarEnvList</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306155"><span class="hs-identifier hs-var">id_env</span></a></span><span>   </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306151"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306151"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681306151"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306151"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306150"><span class="hs-identifier hs-var">ids</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-395"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-396"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681306152"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306152"><span class="hs-identifier hs-var">tycovars</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681306150"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306150"><span class="hs-identifier hs-var">ids</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.3.0/src/Data-OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyCoVar"><span class="hs-identifier hs-var">isTyCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306154"><span class="hs-identifier hs-var">vars</span></a></span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-type">extendIdZonkEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-399"></span><span id="extendIdZonkEnv"><span class="annot"><span class="annottext">extendIdZonkEnv :: ZonkEnv -&gt; TcTyVar -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-var hs-var">extendIdZonkEnv</span></a></span></span><span> </span><span id="local-6989586621681306147"><span class="annot"><span class="annottext">ze :: ZonkEnv
</span><a href="#local-6989586621681306147"><span class="hs-identifier hs-var">ze</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: ZonkEnv -&gt; TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681306146"><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306146"><span class="hs-identifier hs-var">id_env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681306145"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306145"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-400"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306147"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a -&gt; TcTyVar -&gt; a -&gt; VarEnv a
</span><a href="GHC.Types.Var.Env.html#extendVarEnv"><span class="hs-identifier hs-var">extendVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306146"><span class="hs-identifier hs-var">id_env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306145"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306145"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#extendTyZonkEnv"><span class="hs-identifier hs-type">extendTyZonkEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-403"></span><span id="extendTyZonkEnv"><span class="annot"><span class="annottext">extendTyZonkEnv :: ZonkEnv -&gt; TcTyVar -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendTyZonkEnv"><span class="hs-identifier hs-var hs-var">extendTyZonkEnv</span></a></span></span><span> </span><span id="local-6989586621681306141"><span class="annot"><span class="annottext">ze :: ZonkEnv
</span><a href="#local-6989586621681306141"><span class="hs-identifier hs-var">ze</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: ZonkEnv -&gt; TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681306140"><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306140"><span class="hs-identifier hs-var">ty_env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681306139"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306139"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-404"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306141"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a -&gt; TcTyVar -&gt; a -&gt; VarEnv a
</span><a href="GHC.Types.Var.Env.html#extendVarEnv"><span class="hs-identifier hs-var">extendVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306140"><span class="hs-identifier hs-var">ty_env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306139"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306139"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#setZonkType"><span class="hs-identifier hs-type">setZonkType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkFlexi"><span class="hs-identifier hs-type">ZonkFlexi</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-407"></span><span id="setZonkType"><span class="annot"><span class="annottext">setZonkType :: ZonkEnv -&gt; ZonkFlexi -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#setZonkType"><span class="hs-identifier hs-var hs-var">setZonkType</span></a></span></span><span> </span><span id="local-6989586621681306137"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306137"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span id="local-6989586621681306136"><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681306136"><span class="hs-identifier hs-var">flexi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306137"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_flexi :: ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#ze_flexi"><span class="hs-identifier hs-var">ze_flexi</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681306136"><span class="hs-identifier hs-var">flexi</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-408"></span><span>
</span><span id="line-409"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEnvIds"><span class="hs-identifier hs-type">zonkEnvIds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.TypeEnv.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span>
</span><span id="line-410"></span><span id="zonkEnvIds"><span class="annot"><span class="annottext">zonkEnvIds :: ZonkEnv -&gt; TypeEnv
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEnvIds"><span class="hs-identifier hs-var hs-var">zonkEnvIds</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: ZonkEnv -&gt; TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681306134"><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306134"><span class="hs-identifier hs-var">id_env</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-411"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [(Name, a)] -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#mkNameEnv"><span class="hs-identifier hs-var">mkNameEnv</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306131"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; TyThing
</span><a href="GHC.Types.TyThing.html#AnId"><span class="hs-identifier hs-var">AnId</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306131"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681306131"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306131"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall key elt. UniqFM key elt -&gt; [elt]
</span><a href="GHC.Types.Unique.FM.html#nonDetEltsUFM"><span class="hs-identifier hs-var">nonDetEltsUFM</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306134"><span class="hs-identifier hs-var">id_env</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-412"></span><span>  </span><span class="hs-comment">-- It's OK to use nonDetEltsUFM here because we forget the ordering</span><span>
</span><span id="line-413"></span><span>  </span><span class="hs-comment">-- immediately by creating a TypeEnv</span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLIdOcc"><span class="hs-identifier hs-type">zonkLIdOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-416"></span><span id="zonkLIdOcc"><span class="annot"><span class="annottext">zonkLIdOcc :: ZonkEnv
-&gt; GenLocated SrcSpanAnnN TcTyVar -&gt; GenLocated SrcSpanAnnN TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLIdOcc"><span class="hs-identifier hs-var hs-var">zonkLIdOcc</span></a></span></span><span> </span><span id="local-6989586621681306127"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306127"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b l. (a -&gt; b) -&gt; GenLocated l a -&gt; GenLocated l b
</span><a href="GHC.Types.SrcLoc.html#mapLoc"><span class="hs-identifier hs-var">mapLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306127"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-type">zonkIdOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-419"></span><span class="hs-comment">-- Ids defined in this module should be in the envt;</span><span>
</span><span id="line-420"></span><span class="hs-comment">-- ignore others.  (Actually, data constructors are also</span><span>
</span><span id="line-421"></span><span class="hs-comment">-- not LocalVars, even when locally defined, but that is fine.)</span><span>
</span><span id="line-422"></span><span class="hs-comment">-- (Also foreign-imported things aren't currently in the ZonkEnv;</span><span>
</span><span id="line-423"></span><span class="hs-comment">--  that's ok because they don't need zonking.)</span><span>
</span><span id="line-424"></span><span class="hs-comment">--</span><span>
</span><span id="line-425"></span><span class="hs-comment">-- Actually, Template Haskell works in 'chunks' of declarations, and</span><span>
</span><span id="line-426"></span><span class="hs-comment">-- an earlier chunk won't be in the 'env' that the zonking phase</span><span>
</span><span id="line-427"></span><span class="hs-comment">-- carries around.  Instead it'll be in the tcg_gbl_env, already fully</span><span>
</span><span id="line-428"></span><span class="hs-comment">-- zonked.  There's no point in looking it up there (except for error</span><span>
</span><span id="line-429"></span><span class="hs-comment">-- checking), and it's not conveniently to hand; hence the simple</span><span>
</span><span id="line-430"></span><span class="hs-comment">-- 'orElse' case in the LocalVar branch.</span><span>
</span><span id="line-431"></span><span class="hs-comment">--</span><span>
</span><span id="line-432"></span><span class="hs-comment">-- Even without template splices, in module Main, the checking of</span><span>
</span><span id="line-433"></span><span class="hs-comment">-- 'main' is done as a separate chunk.</span><span>
</span><span id="line-434"></span><span id="zonkIdOcc"><span class="annot"><span class="annottext">zonkIdOcc :: ZonkEnv -&gt; TcTyVar -&gt; TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var hs-var">zonkIdOcc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: ZonkEnv -&gt; TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681306124"><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306124"><span class="hs-identifier hs-var">id_env</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681306123"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306123"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-435"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; Bool
</span><a href="GHC.Types.Var.html#isLocalVar"><span class="hs-identifier hs-var">isLocalVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306123"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a -&gt; TcTyVar -&gt; Maybe a
</span><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-var">lookupVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681306124"><span class="hs-identifier hs-var">id_env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306123"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; a -&gt; a
</span><a href="GHC.Data.Maybe.html#orElse"><span class="hs-operator hs-var">`orElse`</span></a></span><span>
</span><span id="line-436"></span><span>                    </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306123"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-437"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306123"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-438"></span><span>
</span><span id="line-439"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkIdOccs"><span class="hs-identifier hs-type">zonkIdOccs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-440"></span><span id="zonkIdOccs"><span class="annot"><span class="annottext">zonkIdOccs :: ZonkEnv -&gt; [TcTyVar] -&gt; [TcTyVar]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOccs"><span class="hs-identifier hs-var hs-var">zonkIdOccs</span></a></span></span><span> </span><span id="local-6989586621681306118"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306118"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681306117"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306117"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306118"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306117"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-441"></span><span>
</span><span id="line-442"></span><span class="hs-comment">-- zonkIdBndr is used *after* typechecking to get the Id's type</span><span>
</span><span id="line-443"></span><span class="hs-comment">-- to its final form.  The TyVarEnv give</span><span>
</span><span id="line-444"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-type">zonkIdBndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-445"></span><span id="zonkIdBndr"><span class="annot"><span class="annottext">zonkIdBndr :: ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var hs-var">zonkIdBndr</span></a></span></span><span> </span><span id="local-6989586621681306115"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306115"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681306114"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306114"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-446"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621681306112"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306112"><span class="hs-identifier hs-var">w'</span></a></span></span><span> </span><span id="local-6989586621681306111"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306111"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Scaled Kind -&gt; TcM (Scaled Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-var">zonkScaledTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306115"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; Scaled Kind
</span><a href="GHC.Types.Id.html#idScaledType"><span class="hs-identifier hs-var">idScaledType</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306114"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-447"></span><span>       </span><span class="annot"><span class="annottext">Kind -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.TcMType.html#ensureNotLevPoly"><span class="hs-identifier hs-var">ensureNotLevPoly</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306111"><span class="hs-identifier hs-var">ty'</span></a></span><span>
</span><span id="line-448"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the type of binder&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306114"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; TcTyVar -&gt; TcTyVar
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; Kind -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setLevityInfoWithType"><span class="hs-operator hs-var">`setLevityInfoWithType`</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306111"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; Kind -&gt; TcTyVar
</span><a href="GHC.Types.Var.html#setIdMult"><span class="hs-identifier hs-var">setIdMult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; Kind -&gt; TcTyVar
</span><a href="GHC.Types.Id.html#setIdType"><span class="hs-identifier hs-var">setIdType</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306114"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306111"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306112"><span class="hs-identifier hs-var">w'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-451"></span><span>
</span><span id="line-452"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndrs"><span class="hs-identifier hs-type">zonkIdBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-453"></span><span id="zonkIdBndrs"><span class="annot"><span class="annottext">zonkIdBndrs :: ZonkEnv -&gt; [TcTyVar] -&gt; TcM [TcTyVar]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndrs"><span class="hs-identifier hs-var hs-var">zonkIdBndrs</span></a></span></span><span> </span><span id="local-6989586621681306101"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306101"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681306100"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306100"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306101"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306100"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopBndrs"><span class="hs-identifier hs-type">zonkTopBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-456"></span><span id="zonkTopBndrs"><span class="annot"><span class="annottext">zonkTopBndrs :: [TcTyVar] -&gt; TcM [TcTyVar]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTopBndrs"><span class="hs-identifier hs-var hs-var">zonkTopBndrs</span></a></span></span><span> </span><span id="local-6989586621681306098"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306098"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681306097"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306097"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; TcM [TcTyVar]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndrs"><span class="hs-identifier hs-var">zonkIdBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306097"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306098"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-457"></span><span>
</span><span id="line-458"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkFieldOcc"><span class="hs-identifier hs-type">zonkFieldOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span id="zonkFieldOcc"><span class="annot"><span class="annottext">zonkFieldOcc :: ZonkEnv -&gt; FieldOcc GhcTc -&gt; TcM (FieldOcc GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkFieldOcc"><span class="hs-identifier hs-var hs-var">zonkFieldOcc</span></a></span></span><span> </span><span id="local-6989586621681306095"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306095"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span id="local-6989586621681306093"><span class="annot"><span class="annottext">XCFieldOcc GhcTc
</span><a href="#local-6989586621681306093"><span class="hs-identifier hs-var">sel</span></a></span></span><span> </span><span id="local-6989586621681306092"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621681306092"><span class="hs-identifier hs-var">lbl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-460"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#flip"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall pass. XCFieldOcc pass -&gt; LocatedN RdrName -&gt; FieldOcc pass
</span><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-var">FieldOcc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621681306092"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306095"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XCFieldOcc GhcTc
</span><a href="#local-6989586621681306093"><span class="hs-identifier hs-var">sel</span></a></span><span>
</span><span id="line-461"></span><span>
</span><span id="line-462"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrsX"><span class="hs-identifier hs-type">zonkEvBndrsX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span id="zonkEvBndrsX"><span class="annot"><span class="annottext">zonkEvBndrsX :: ZonkEnv -&gt; [TcTyVar] -&gt; TcM (ZonkEnv, [TcTyVar])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrsX"><span class="hs-identifier hs-var hs-var">zonkEvBndrsX</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) acc x y.
Monad m =&gt;
(acc -&gt; x -&gt; m (acc, y)) -&gt; acc -&gt; [x] -&gt; m (acc, [y])
</span><a href="GHC.Utils.Monad.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrX"><span class="hs-identifier hs-var">zonkEvBndrX</span></a></span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrX"><span class="hs-identifier hs-type">zonkEvBndrX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span class="hs-comment">-- Works for dictionaries and coercions</span><span>
</span><span id="line-467"></span><span id="zonkEvBndrX"><span class="annot"><span class="annottext">zonkEvBndrX :: ZonkEnv -&gt; TcTyVar -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrX"><span class="hs-identifier hs-var hs-var">zonkEvBndrX</span></a></span></span><span> </span><span id="local-6989586621681306086"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306086"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681306085"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306085"><span class="hs-identifier hs-var">var</span></a></span></span><span>
</span><span id="line-468"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681306084"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306084"><span class="hs-identifier hs-var">var'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndr"><span class="hs-identifier hs-var">zonkEvBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306086"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306085"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-469"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendZonkEnv"><span class="hs-identifier hs-var">extendZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306086"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306084"><span class="hs-identifier hs-var">var'</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306084"><span class="hs-identifier hs-var">var'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndr"><span class="hs-identifier hs-type">zonkEvBndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span>
</span><span id="line-472"></span><span class="hs-comment">-- Works for dictionaries and coercions</span><span>
</span><span id="line-473"></span><span class="hs-comment">-- Does not extend the ZonkEnv</span><span>
</span><span id="line-474"></span><span id="zonkEvBndr"><span class="annot"><span class="annottext">zonkEvBndr :: ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndr"><span class="hs-identifier hs-var hs-var">zonkEvBndr</span></a></span></span><span> </span><span id="local-6989586621681306082"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306082"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681306081"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306081"><span class="hs-identifier hs-var">var</span></a></span></span><span>
</span><span id="line-475"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
(Kind -&gt; m Kind) -&gt; TcTyVar -&gt; m TcTyVar
</span><a href="GHC.Types.Var.html#updateIdTypeAndMultM"><span class="hs-identifier hs-var">updateIdTypeAndMultM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;zonkEvBndr_zonkTcTypeToType&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306082"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306081"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-476"></span><span>
</span><span id="line-477"></span><span class="hs-comment">{-
zonkEvVarOcc :: ZonkEnv -&gt; EvVar -&gt; TcM EvTerm
zonkEvVarOcc env v
  | isCoVar v
  = EvCoercion &lt;$&gt; zonkCoVarOcc env v
  | otherwise
  = return (EvId $ zonkIdOcc env v)
-}</span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBndrX"><span class="hs-identifier hs-type">zonkCoreBndrX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-487"></span><span id="zonkCoreBndrX"><span class="annot"><span class="annottext">zonkCoreBndrX :: ZonkEnv -&gt; TcTyVar -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBndrX"><span class="hs-identifier hs-var hs-var">zonkCoreBndrX</span></a></span></span><span> </span><span id="local-6989586621681306078"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306078"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681306077"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306077"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-488"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306077"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681306075"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306075"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306078"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306077"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-489"></span><span>                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-var">extendIdZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306078"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306075"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306075"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-490"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306078"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306077"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBndrsX"><span class="hs-identifier hs-type">zonkCoreBndrsX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-493"></span><span id="zonkCoreBndrsX"><span class="annot"><span class="annottext">zonkCoreBndrsX :: ZonkEnv -&gt; [TcTyVar] -&gt; TcM (ZonkEnv, [TcTyVar])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBndrsX"><span class="hs-identifier hs-var hs-var">zonkCoreBndrsX</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) acc x y.
Monad m =&gt;
(acc -&gt; x -&gt; m (acc, y)) -&gt; acc -&gt; [x] -&gt; m (acc, [y])
</span><a href="GHC.Utils.Monad.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBndrX"><span class="hs-identifier hs-var">zonkCoreBndrX</span></a></span><span>
</span><span id="line-494"></span><span>
</span><span id="line-495"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrs"><span class="hs-identifier hs-type">zonkTyBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-496"></span><span id="zonkTyBndrs"><span class="annot"><span class="annottext">zonkTyBndrs :: [TcTyVar] -&gt; TcM (ZonkEnv, [TcTyVar])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrs"><span class="hs-identifier hs-var hs-var">zonkTyBndrs</span></a></span></span><span> </span><span id="local-6989586621681306072"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306072"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681306071"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306071"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; TcM (ZonkEnv, [TcTyVar])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrsX"><span class="hs-identifier hs-var">zonkTyBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306071"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681306072"><span class="hs-identifier hs-var">tvs</span></a></span><span>
</span><span id="line-497"></span><span>
</span><span id="line-498"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrsX"><span class="hs-identifier hs-type">zonkTyBndrsX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-499"></span><span id="zonkTyBndrsX"><span class="annot"><span class="annottext">zonkTyBndrsX :: ZonkEnv -&gt; [TcTyVar] -&gt; TcM (ZonkEnv, [TcTyVar])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrsX"><span class="hs-identifier hs-var hs-var">zonkTyBndrsX</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) acc x y.
Monad m =&gt;
(acc -&gt; x -&gt; m (acc, y)) -&gt; acc -&gt; [x] -&gt; m (acc, [y])
</span><a href="GHC.Utils.Monad.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span>
</span><span id="line-500"></span><span>
</span><span id="line-501"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-type">zonkTyBndrX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-502"></span><span class="hs-comment">-- This guarantees to return a TyVar (not a TcTyVar)</span><span>
</span><span id="line-503"></span><span class="hs-comment">-- then we add it to the envt, so all occurrences are replaced</span><span>
</span><span id="line-504"></span><span class="hs-comment">--</span><span>
</span><span id="line-505"></span><span class="hs-comment">-- It does not clone: the new TyVar has the sane Name</span><span>
</span><span id="line-506"></span><span class="hs-comment">-- as the old one.  This important when zonking the</span><span>
</span><span id="line-507"></span><span class="hs-comment">-- TyVarBndrs of a TyCon, whose Names may scope.</span><span>
</span><span id="line-508"></span><span id="zonkTyBndrX"><span class="annot"><span class="annottext">zonkTyBndrX :: ZonkEnv -&gt; TcTyVar -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-var hs-var">zonkTyBndrX</span></a></span></span><span> </span><span id="local-6989586621681306070"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306070"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681306069"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306069"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-509"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isImmutableTyVar</span><span> </span><span class="hs-identifier">tv</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">tv</span><span> </span><span class="hs-operator">&lt;+&gt;</span><span> </span><span class="hs-identifier">dcolon</span><span> </span><span class="hs-operator">&lt;+&gt;</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">tyVarKind</span><span> </span><span class="hs-identifier">tv</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-510"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681306063"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306063"><span class="hs-identifier hs-var">ki</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306070"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; Kind
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306069"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-511"></span><span>               </span><span class="hs-comment">-- Internal names tidy up better, for iface files.</span><span>
</span><span id="line-512"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681306062"><span class="annot"><span class="annottext">tv' :: TcTyVar
</span><a href="#local-6989586621681306062"><span class="hs-identifier hs-var hs-var">tv'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Kind -&gt; TcTyVar
</span><a href="GHC.Types.Var.html#mkTyVar"><span class="hs-identifier hs-var">mkTyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; Name
</span><a href="GHC.Types.Var.html#tyVarName"><span class="hs-identifier hs-var">tyVarName</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306069"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681306063"><span class="hs-identifier hs-var">ki</span></a></span><span>
</span><span id="line-513"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendTyZonkEnv"><span class="hs-identifier hs-var">extendTyZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306070"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306062"><span class="hs-identifier hs-var">tv'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306062"><span class="hs-identifier hs-var">tv'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-514"></span><span>
</span><span id="line-515"></span><span id="local-6989586621681307468"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBindersX"><span class="hs-identifier hs-type">zonkTyVarBindersX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681307468"><span class="hs-identifier hs-type">vis</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-516"></span><span>                             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681307468"><span class="hs-identifier hs-type">vis</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-517"></span><span id="zonkTyVarBindersX"><span class="annot"><span class="annottext">zonkTyVarBindersX :: forall vis.
ZonkEnv
-&gt; [VarBndr TcTyVar vis] -&gt; TcM (ZonkEnv, [VarBndr TcTyVar vis])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBindersX"><span class="hs-identifier hs-var hs-var">zonkTyVarBindersX</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) acc x y.
Monad m =&gt;
(acc -&gt; x -&gt; m (acc, y)) -&gt; acc -&gt; [x] -&gt; m (acc, [y])
</span><a href="GHC.Utils.Monad.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a></span><span> </span><span class="annot"><span class="annottext">forall vis.
ZonkEnv
-&gt; VarBndr TcTyVar vis -&gt; TcM (ZonkEnv, VarBndr TcTyVar vis)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBinderX"><span class="hs-identifier hs-var">zonkTyVarBinderX</span></a></span><span>
</span><span id="line-518"></span><span>
</span><span id="line-519"></span><span id="local-6989586621681307466"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBinderX"><span class="hs-identifier hs-type">zonkTyVarBinderX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681307466"><span class="hs-identifier hs-type">vis</span></a></span><span>
</span><span id="line-520"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681307466"><span class="hs-identifier hs-type">vis</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-521"></span><span class="hs-comment">-- Takes a TcTyVar and guarantees to return a TyVar</span><span>
</span><span id="line-522"></span><span id="zonkTyVarBinderX"><span class="annot"><span class="annottext">zonkTyVarBinderX :: forall vis.
ZonkEnv
-&gt; VarBndr TcTyVar vis -&gt; TcM (ZonkEnv, VarBndr TcTyVar vis)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBinderX"><span class="hs-identifier hs-var hs-var">zonkTyVarBinderX</span></a></span></span><span> </span><span id="local-6989586621681306056"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306056"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621681306054"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306054"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681306053"><span class="annot"><span class="annottext">vis
</span><a href="#local-6989586621681306053"><span class="hs-identifier hs-var">vis</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-523"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681306052"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306052"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681306051"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306051"><span class="hs-identifier hs-var">tv'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306056"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306054"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-524"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306052"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall var argf. var -&gt; argf -&gt; VarBndr var argf
</span><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-var">Bndr</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681306051"><span class="hs-identifier hs-var">tv'</span></a></span><span> </span><span class="annot"><span class="annottext">vis
</span><a href="#local-6989586621681306053"><span class="hs-identifier hs-var">vis</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-525"></span><span>
</span><span id="line-526"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopExpr"><span class="hs-identifier hs-type">zonkTopExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-527"></span><span id="zonkTopExpr"><span class="annot"><span class="annottext">zonkTopExpr :: HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTopExpr"><span class="hs-identifier hs-var hs-var">zonkTopExpr</span></a></span></span><span> </span><span id="local-6989586621681306050"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681306050"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681306049"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306049"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306049"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681306050"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-528"></span><span>
</span><span id="line-529"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopLExpr"><span class="hs-identifier hs-type">zonkTopLExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-530"></span><span id="zonkTopLExpr"><span class="annot"><span class="annottext">zonkTopLExpr :: LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTopLExpr"><span class="hs-identifier hs-var hs-var">zonkTopLExpr</span></a></span></span><span> </span><span id="local-6989586621681306047"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681306047"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681306046"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306046"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306046"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681306047"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-531"></span><span>
</span><span id="line-532"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopDecls"><span class="hs-identifier hs-type">zonkTopDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span>
</span><span id="line-533"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-534"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRuleDecl"><span class="hs-identifier hs-type">LRuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LTcSpecPrag"><span class="hs-identifier hs-type">LTcSpecPrag</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-535"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LForeignDecl"><span class="hs-identifier hs-type">LForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-536"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.TypeEnv.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-537"></span><span>                     </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-538"></span><span>                     </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-539"></span><span>                     </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LForeignDecl"><span class="hs-identifier hs-type">LForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-540"></span><span>                     </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LTcSpecPrag"><span class="hs-identifier hs-type">LTcSpecPrag</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-541"></span><span>                     </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRuleDecl"><span class="hs-identifier hs-type">LRuleDecl</span></a></span><span>    </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-542"></span><span id="zonkTopDecls"><span class="annot"><span class="annottext">zonkTopDecls :: Bag EvBind
-&gt; LHsBinds GhcTc
-&gt; [LRuleDecl GhcTc]
-&gt; [LTcSpecPrag]
-&gt; [LForeignDecl GhcTc]
-&gt; TcM
     (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
      [LTcSpecPrag], [LRuleDecl GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTopDecls"><span class="hs-identifier hs-var hs-var">zonkTopDecls</span></a></span></span><span> </span><span id="local-6989586621681306044"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681306044"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span> </span><span id="local-6989586621681306043"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681306043"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621681306042"><span class="annot"><span class="annottext">[LRuleDecl GhcTc]
</span><a href="#local-6989586621681306042"><span class="hs-identifier hs-var">rules</span></a></span></span><span> </span><span id="local-6989586621681306041"><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681306041"><span class="hs-identifier hs-var">imp_specs</span></a></span></span><span> </span><span id="local-6989586621681306040"><span class="annot"><span class="annottext">[LForeignDecl GhcTc]
</span><a href="#local-6989586621681306040"><span class="hs-identifier hs-var">fords</span></a></span></span><span>
</span><span id="line-543"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681306039"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306039"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681306038"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681306038"><span class="hs-identifier hs-var">ev_binds'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681306037"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306037"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Bag EvBind -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBinds"><span class="hs-identifier hs-var">zonkEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306037"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681306044"><span class="hs-identifier hs-var">ev_binds</span></a></span><span>
</span><span id="line-544"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681306036"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306036"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681306035"><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681306035"><span class="hs-identifier hs-var">binds'</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsBinds GhcTc -&gt; TcM (ZonkEnv, LHsBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRecMonoBinds"><span class="hs-identifier hs-var">zonkRecMonoBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306039"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681306043"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-545"></span><span>                        </span><span class="hs-comment">-- Top level is implicitly recursive</span><span>
</span><span id="line-546"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681306033"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (RuleDecl GhcTc)]
</span><a href="#local-6989586621681306033"><span class="hs-identifier hs-var">rules'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LRuleDecl GhcTc] -&gt; TcM [LRuleDecl GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRules"><span class="hs-identifier hs-var">zonkRules</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306036"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">[LRuleDecl GhcTc]
</span><a href="#local-6989586621681306042"><span class="hs-identifier hs-var">rules</span></a></span><span>
</span><span id="line-547"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681306031"><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681306031"><span class="hs-identifier hs-var">specs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LTcSpecPrag] -&gt; TcM [LTcSpecPrag]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLTcSpecPrags"><span class="hs-identifier hs-var">zonkLTcSpecPrags</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306036"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681306041"><span class="hs-identifier hs-var">imp_specs</span></a></span><span>
</span><span id="line-548"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681306029"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ForeignDecl GhcTc)]
</span><a href="#local-6989586621681306029"><span class="hs-identifier hs-var">fords'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LForeignDecl GhcTc] -&gt; TcM [LForeignDecl GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkForeignExports"><span class="hs-identifier hs-var">zonkForeignExports</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306036"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">[LForeignDecl GhcTc]
</span><a href="#local-6989586621681306040"><span class="hs-identifier hs-var">fords</span></a></span><span>
</span><span id="line-549"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; TypeEnv
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEnvIds"><span class="hs-identifier hs-var">zonkEnvIds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306036"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681306038"><span class="hs-identifier hs-var">ev_binds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681306035"><span class="hs-identifier hs-var">binds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ForeignDecl GhcTc)]
</span><a href="#local-6989586621681306029"><span class="hs-identifier hs-var">fords'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681306031"><span class="hs-identifier hs-var">specs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (RuleDecl GhcTc)]
</span><a href="#local-6989586621681306033"><span class="hs-identifier hs-var">rules'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-550"></span><span>
</span><span id="line-551"></span><span class="hs-comment">---------------------------------------------</span><span>
</span><span id="line-552"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-type">zonkLocalBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsLocalBinds"><span class="hs-identifier hs-type">HsLocalBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-553"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsLocalBinds"><span class="hs-identifier hs-type">HsLocalBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-554"></span><span id="zonkLocalBinds"><span class="annot"><span class="annottext">zonkLocalBinds :: ZonkEnv -&gt; HsLocalBinds GhcTc -&gt; TcM (ZonkEnv, HsLocalBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var hs-var">zonkLocalBinds</span></a></span></span><span> </span><span id="local-6989586621681306026"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306026"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#EmptyLocalBinds"><span class="hs-identifier hs-type">EmptyLocalBinds</span></a></span><span> </span><span id="local-6989586621681306024"><span class="annot"><span class="annottext">XEmptyLocalBinds GhcTc GhcTc
</span><a href="#local-6989586621681306024"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-555"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306026"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR. XEmptyLocalBinds idL idR -&gt; HsLocalBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#EmptyLocalBinds"><span class="hs-identifier hs-var">EmptyLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcTc GhcTc
</span><a href="#local-6989586621681306024"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-556"></span><span>
</span><span id="line-557"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XHsValBinds GhcTc GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-type">ValBinds</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-558"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkLocalBinds&quot;</span></span><span> </span><span class="hs-comment">-- Not in typechecker output</span><span>
</span><span id="line-559"></span><span>
</span><span id="line-560"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span id="local-6989586621681306021"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306021"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span id="local-6989586621681306020"><span class="annot"><span class="annottext">XHsValBinds GhcTc GhcTc
</span><a href="#local-6989586621681306020"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#XValBindsLR"><span class="hs-identifier hs-type">XValBindsLR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#NValBinds"><span class="hs-identifier hs-type">NValBinds</span></a></span><span> </span><span id="local-6989586621681306017"><span class="annot"><span class="annottext">[(RecFlag, LHsBinds GhcTc)]
</span><a href="#local-6989586621681306017"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621681306016"><span class="annot"><span class="annottext">[LSig GhcRn]
</span><a href="#local-6989586621681306016"><span class="hs-identifier hs-var">sigs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-561"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681306015"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306015"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681306014"><span class="annot"><span class="annottext">[(RecFlag, Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))]
</span><a href="#local-6989586621681306014"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall {a}.
ZonkEnv
-&gt; [(a, Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv,
      [(a, Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))])
</span><a href="#local-6989586621681306013"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306021"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[(RecFlag, LHsBinds GhcTc)]
</span><a href="#local-6989586621681306017"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-562"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306015"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall idL idR.
XHsValBinds idL idR
-&gt; HsValBindsLR idL idR -&gt; HsLocalBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-var">HsValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XHsValBinds GhcTc GhcTc
</span><a href="#local-6989586621681306020"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR. XXValBindsLR idL idR -&gt; HsValBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#XValBindsLR"><span class="hs-identifier hs-var">XValBindsLR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL.
[(RecFlag, LHsBinds idL)] -&gt; [LSig GhcRn] -&gt; NHsValBindsLR idL
</span><a href="GHC.Hs.Binds.html#NValBinds"><span class="hs-identifier hs-var">NValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">[(RecFlag, Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))]
</span><a href="#local-6989586621681306014"><span class="hs-identifier hs-var">new_binds</span></a></span><span> </span><span class="annot"><span class="annottext">[LSig GhcRn]
</span><a href="#local-6989586621681306016"><span class="hs-identifier hs-var">sigs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-563"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-564"></span><span>    </span><span id="local-6989586621681306013"><span class="annot"><span class="annottext">go :: ZonkEnv
-&gt; [(a, Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv,
      [(a, Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))])
</span><a href="#local-6989586621681306013"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621681306008"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306008"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-565"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306008"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-566"></span><span>    </span><span class="annot"><a href="#local-6989586621681306013"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681306007"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306007"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681306006"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681306006"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681306005"><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681306005"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681306004"><span class="annot"><span class="annottext">[(a, Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))]
</span><a href="#local-6989586621681306004"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-567"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681306003"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306003"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681306002"><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681306002"><span class="hs-identifier hs-var">b'</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsBinds GhcTc -&gt; TcM (ZonkEnv, LHsBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRecMonoBinds"><span class="hs-identifier hs-var">zonkRecMonoBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306007"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681306005"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-568"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681306001"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306001"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681306000"><span class="annot"><span class="annottext">[(a, Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))]
</span><a href="#local-6989586621681306000"><span class="hs-identifier hs-var">bs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; [(a, Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv,
      [(a, Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))])
</span><a href="#local-6989586621681306013"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306003"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))]
</span><a href="#local-6989586621681306004"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-569"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681306001"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681306006"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681306002"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[(a, Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))]
</span><a href="#local-6989586621681306000"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-570"></span><span>
</span><span id="line-571"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span id="local-6989586621681305999"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305999"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsIPBinds"><span class="hs-identifier hs-type">HsIPBinds</span></a></span><span> </span><span id="local-6989586621681305997"><span class="annot"><span class="annottext">XHsIPBinds GhcTc GhcTc
</span><a href="#local-6989586621681305997"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#IPBinds"><span class="hs-identifier hs-type">IPBinds</span></a></span><span> </span><span id="local-6989586621681305995"><span class="annot"><span class="annottext">XIPBinds GhcTc
</span><a href="#local-6989586621681305995"><span class="hs-identifier hs-var">dict_binds</span></a></span></span><span> </span><span id="local-6989586621681305994"><span class="annot"><span class="annottext">[LIPBind GhcTc]
</span><a href="#local-6989586621681305994"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-572"></span><span>    </span><span id="local-6989586621681305993"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (IPBind GhcTc)]
</span><a href="#local-6989586621681305993"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b ann.
(a -&gt; TcM b)
-&gt; GenLocated (SrcSpanAnn' ann) a
-&gt; TcRn (GenLocated (SrcSpanAnn' ann) b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocMA"><span class="hs-identifier hs-var">wrapLocMA</span></a></span><span> </span><span class="annot"><span class="annottext">IPBind GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (IPBind GhcTc)
</span><a href="#local-6989586621681305991"><span class="hs-identifier hs-var">zonk_ip_bind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LIPBind GhcTc]
</span><a href="#local-6989586621681305994"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-573"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-574"></span><span>        </span><span id="local-6989586621681305990"><span class="annot"><span class="annottext">env1 :: ZonkEnv
</span><a href="#local-6989586621681305990"><span class="hs-identifier hs-var hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305999"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-575"></span><span>                 </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681305989"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#IPBind"><span class="hs-identifier hs-type">IPBind</span></a></span><span> </span><span class="annot"><span class="annottext">XCIPBind GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621681305989"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681305989"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (IPBind GhcTc)]
</span><a href="#local-6989586621681305993"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-576"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681305987"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305987"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305986"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681305986"><span class="hs-identifier hs-var">new_dict_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, TcEvBinds)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds"><span class="hs-identifier hs-var">zonkTcEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305990"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">XIPBinds GhcTc
</span><a href="#local-6989586621681305995"><span class="hs-identifier hs-var">dict_binds</span></a></span><span>
</span><span id="line-577"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305987"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall idL idR.
XHsIPBinds idL idR -&gt; HsIPBinds idR -&gt; HsLocalBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#HsIPBinds"><span class="hs-identifier hs-var">HsIPBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XHsIPBinds GhcTc GhcTc
</span><a href="#local-6989586621681305997"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XIPBinds id -&gt; [LIPBind id] -&gt; HsIPBinds id
</span><a href="Language.Haskell.Syntax.Binds.html#IPBinds"><span class="hs-identifier hs-var">IPBinds</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681305986"><span class="hs-identifier hs-var">new_dict_binds</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (IPBind GhcTc)]
</span><a href="#local-6989586621681305993"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-578"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-579"></span><span>    </span><span id="local-6989586621681305991"><span class="annot"><span class="annottext">zonk_ip_bind :: IPBind GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (IPBind GhcTc)
</span><a href="#local-6989586621681305991"><span class="hs-identifier hs-var hs-var">zonk_ip_bind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#IPBind"><span class="hs-identifier hs-type">IPBind</span></a></span><span> </span><span id="local-6989586621681305985"><span class="annot"><span class="annottext">XCIPBind GhcTc
</span><a href="#local-6989586621681305985"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305984"><span class="annot"><span class="annottext">Either (XRec GhcTc HsIPName) (IdP GhcTc)
</span><a href="#local-6989586621681305984"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681305983"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305983"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-580"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305982"><span class="annot"><span class="annottext">Either (Located HsIPName) TcTyVar
</span><a href="#local-6989586621681305982"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b.
(a -&gt; TcM b)
-&gt; Either (Located HsIPName) a -&gt; TcM (Either (Located HsIPName) b)
</span><a href="GHC.Tc.Utils.Zonk.html#mapIPNameTc"><span class="hs-identifier hs-var">mapIPNameTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305999"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Either (XRec GhcTc HsIPName) (IdP GhcTc)
</span><a href="#local-6989586621681305984"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-581"></span><span>             </span><span id="local-6989586621681305980"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305980"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305999"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305983"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-582"></span><span>             </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id.
XCIPBind id
-&gt; Either (XRec id HsIPName) (IdP id) -&gt; LHsExpr id -&gt; IPBind id
</span><a href="Language.Haskell.Syntax.Binds.html#IPBind"><span class="hs-identifier hs-var">IPBind</span></a></span><span> </span><span class="annot"><span class="annottext">XCIPBind GhcTc
</span><a href="#local-6989586621681305985"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Either (Located HsIPName) TcTyVar
</span><a href="#local-6989586621681305982"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305980"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-583"></span><span>
</span><span id="line-584"></span><span class="hs-comment">---------------------------------------------</span><span>
</span><span id="line-585"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkRecMonoBinds"><span class="hs-identifier hs-type">zonkRecMonoBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-586"></span><span id="zonkRecMonoBinds"><span class="annot"><span class="annottext">zonkRecMonoBinds :: ZonkEnv -&gt; LHsBinds GhcTc -&gt; TcM (ZonkEnv, LHsBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRecMonoBinds"><span class="hs-identifier hs-var hs-var">zonkRecMonoBinds</span></a></span></span><span> </span><span id="local-6989586621681305979"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305979"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305978"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681305978"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-587"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a env. (a -&gt; IOEnv env a) -&gt; IOEnv env a
</span><a href="GHC.Data.IOEnv.html#fixM"><span class="hs-identifier hs-var">fixM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305976"><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681305976"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-588"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681305975"><span class="annot"><span class="annottext">env1 :: ZonkEnv
</span><a href="#local-6989586621681305975"><span class="hs-identifier hs-var hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305979"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p idR.
CollectPass p =&gt;
CollectFlag p -&gt; LHsBindsLR p idR -&gt; [IdP p]
</span><a href="GHC.Hs.Utils.html#collectHsBindsBinders"><span class="hs-identifier hs-var">collectHsBindsBinders</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681305976"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-589"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305972"><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681305972"><span class="hs-identifier hs-var">binds'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsBinds GhcTc -&gt; TcM (LHsBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMonoBinds"><span class="hs-identifier hs-var">zonkMonoBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305975"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681305978"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-590"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305975"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681305972"><span class="hs-identifier hs-var">binds'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-591"></span><span>
</span><span id="line-592"></span><span class="hs-comment">---------------------------------------------</span><span>
</span><span id="line-593"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkMonoBinds"><span class="hs-identifier hs-type">zonkMonoBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-594"></span><span id="zonkMonoBinds"><span class="annot"><span class="annottext">zonkMonoBinds :: ZonkEnv -&gt; LHsBinds GhcTc -&gt; TcM (LHsBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMonoBinds"><span class="hs-identifier hs-var hs-var">zonkMonoBinds</span></a></span></span><span> </span><span id="local-6989586621681305970"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305970"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305969"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681305969"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Bag a -&gt; m (Bag b)
</span><a href="GHC.Data.Bag.html#mapBagM"><span class="hs-identifier hs-var">mapBagM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsBind GhcTc -&gt; TcM (LHsBind GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_lbind"><span class="hs-identifier hs-var">zonk_lbind</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305970"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681305969"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-595"></span><span>
</span><span id="line-596"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_lbind"><span class="hs-identifier hs-type">zonk_lbind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBind"><span class="hs-identifier hs-type">LHsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBind"><span class="hs-identifier hs-type">LHsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-597"></span><span id="zonk_lbind"><span class="annot"><span class="annottext">zonk_lbind :: ZonkEnv -&gt; LHsBind GhcTc -&gt; TcM (LHsBind GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_lbind"><span class="hs-identifier hs-var hs-var">zonk_lbind</span></a></span></span><span> </span><span id="local-6989586621681305966"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305966"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b ann.
(a -&gt; TcM b)
-&gt; GenLocated (SrcSpanAnn' ann) a
-&gt; TcRn (GenLocated (SrcSpanAnn' ann) b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocMA"><span class="hs-identifier hs-var">wrapLocMA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsBindLR GhcTc GhcTc -&gt; TcM (HsBindLR GhcTc GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_bind"><span class="hs-identifier hs-var">zonk_bind</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305966"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-598"></span><span>
</span><span id="line-599"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_bind"><span class="hs-identifier hs-type">zonk_bind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsBind"><span class="hs-identifier hs-type">HsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsBind"><span class="hs-identifier hs-type">HsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-600"></span><span id="zonk_bind"><span class="annot"><span class="annottext">zonk_bind :: ZonkEnv -&gt; HsBindLR GhcTc GhcTc -&gt; TcM (HsBindLR GhcTc GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_bind"><span class="hs-identifier hs-var hs-var">zonk_bind</span></a></span></span><span> </span><span id="local-6989586621681305963"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305963"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305962"><span class="annot"><span class="annottext">bind :: HsBindLR GhcTc GhcTc
</span><a href="#local-6989586621681305962"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatBind"><span class="hs-identifier hs-type">PatBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_lhs :: forall idL idR. HsBindLR idL idR -&gt; LPat idL
</span><a href="Language.Haskell.Syntax.Binds.html#pat_lhs"><span class="hs-identifier hs-var">pat_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305959"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681305959"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_rhs :: forall idL idR. HsBindLR idL idR -&gt; GRHSs idR (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Binds.html#pat_rhs"><span class="hs-identifier hs-var">pat_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305957"><span class="annot"><span class="annottext">GRHSs GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681305957"><span class="hs-identifier hs-var">grhss</span></a></span></span><span>
</span><span id="line-601"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_ext :: forall idL idR. HsBindLR idL idR -&gt; XPatBind idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#pat_ext"><span class="hs-identifier hs-var">pat_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305955"><span class="annot"><span class="annottext">XPatBind GhcTc GhcTc
</span><a href="#local-6989586621681305955"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-602"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305954"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305954"><span class="hs-identifier hs-var">_env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305953"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681305953"><span class="hs-identifier hs-var">new_pat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305963"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681305959"><span class="hs-identifier hs-var">pat</span></a></span><span>            </span><span class="hs-comment">-- Env already extended</span><span>
</span><span id="line-603"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305951"><span class="annot"><span class="annottext">GRHSs GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305951"><span class="hs-identifier hs-var">new_grhss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ SrcSpan) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; GRHSs GhcTc (LocatedA (body GhcTc))
-&gt; TcM (GRHSs GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkGRHSs"><span class="hs-identifier hs-var">zonkGRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305963"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">GRHSs GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681305957"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-604"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305949"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305949"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305963"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XPatBind GhcTc GhcTc
</span><a href="#local-6989586621681305955"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-605"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsBindLR GhcTc GhcTc
</span><a href="#local-6989586621681305962"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_lhs :: LPat GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#pat_lhs"><span class="hs-identifier hs-var">pat_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681305953"><span class="hs-identifier hs-var">new_pat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_rhs :: GRHSs GhcTc (LHsExpr GhcTc)
</span><a href="Language.Haskell.Syntax.Binds.html#pat_rhs"><span class="hs-identifier hs-var">pat_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GRHSs GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305951"><span class="hs-identifier hs-var">new_grhss</span></a></span><span>
</span><span id="line-606"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_ext :: XPatBind GhcTc GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#pat_ext"><span class="hs-identifier hs-var">pat_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305949"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-607"></span><span>
</span><span id="line-608"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_bind"><span class="hs-identifier hs-var">zonk_bind</span></a></span><span> </span><span id="local-6989586621681305948"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305948"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#VarBind"><span class="hs-identifier hs-type">VarBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">var_ext :: forall idL idR. HsBindLR idL idR -&gt; XVarBind idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#var_ext"><span class="hs-identifier hs-var">var_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305945"><span class="annot"><span class="annottext">XVarBind GhcTc GhcTc
</span><a href="#local-6989586621681305945"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-609"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">var_id :: forall idL idR. HsBindLR idL idR -&gt; IdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#var_id"><span class="hs-identifier hs-var">var_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305943"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681305943"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">var_rhs :: forall idL idR. HsBindLR idL idR -&gt; LHsExpr idR
</span><a href="Language.Haskell.Syntax.Binds.html#var_rhs"><span class="hs-identifier hs-var">var_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305941"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305941"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-610"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305940"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305940"><span class="hs-identifier hs-var">new_var</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305948"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681305943"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-611"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305939"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305939"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305948"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305941"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-612"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#VarBind"><span class="hs-identifier hs-type">VarBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">var_ext :: XVarBind GhcTc GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#var_ext"><span class="hs-identifier hs-var">var_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XVarBind GhcTc GhcTc
</span><a href="#local-6989586621681305945"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-613"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">var_id :: IdP GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#var_id"><span class="hs-identifier hs-var">var_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305940"><span class="hs-identifier hs-var">new_var</span></a></span><span>
</span><span id="line-614"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">var_rhs :: LHsExpr GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#var_rhs"><span class="hs-identifier hs-var">var_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305939"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-615"></span><span>
</span><span id="line-616"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_bind"><span class="hs-identifier hs-var">zonk_bind</span></a></span><span> </span><span id="local-6989586621681305938"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305938"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305937"><span class="annot"><span class="annottext">bind :: HsBindLR GhcTc GhcTc
</span><a href="#local-6989586621681305937"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: forall idL idR. HsBindLR idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681305934"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681305934"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681305933"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305933"><span class="hs-identifier hs-var">var</span></a></span></span><span>
</span><span id="line-617"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: forall idL idR. HsBindLR idL idR -&gt; MatchGroup idR (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305931"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681305931"><span class="hs-identifier hs-var">ms</span></a></span></span><span>
</span><span id="line-618"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_ext :: forall idL idR. HsBindLR idL idR -&gt; XFunBind idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305929"><span class="annot"><span class="annottext">XFunBind GhcTc GhcTc
</span><a href="#local-6989586621681305929"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-619"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305928"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305928"><span class="hs-identifier hs-var">new_var</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305938"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305933"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-620"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305927"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305927"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305926"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305926"><span class="hs-identifier hs-var">new_co_fn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305938"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XFunBind GhcTc GhcTc
</span><a href="#local-6989586621681305929"><span class="hs-identifier hs-var">co_fn</span></a></span><span>
</span><span id="line-621"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305924"><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305924"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ SrcSpan) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305927"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681305931"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-622"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsBindLR GhcTc GhcTc
</span><a href="#local-6989586621681305937"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: LIdP GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681305934"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305928"><span class="hs-identifier hs-var">new_var</span></a></span><span>
</span><span id="line-623"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305924"><span class="hs-identifier hs-var">new_ms</span></a></span><span>
</span><span id="line-624"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_ext :: XFunBind GhcTc GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305926"><span class="hs-identifier hs-var">new_co_fn</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-625"></span><span>
</span><span id="line-626"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_bind"><span class="hs-identifier hs-var">zonk_bind</span></a></span><span> </span><span id="local-6989586621681305922"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305922"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#AbsBinds"><span class="hs-identifier hs-type">AbsBinds</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">abs_tvs :: forall idL idR. HsBindLR idL idR -&gt; [TcTyVar]
</span><a href="Language.Haskell.Syntax.Binds.html#abs_tvs"><span class="hs-identifier hs-var">abs_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305919"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681305919"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_ev_vars :: forall idL idR. HsBindLR idL idR -&gt; [TcTyVar]
</span><a href="Language.Haskell.Syntax.Binds.html#abs_ev_vars"><span class="hs-identifier hs-var">abs_ev_vars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305917"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681305917"><span class="hs-identifier hs-var">evs</span></a></span></span><span>
</span><span id="line-627"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_ev_binds :: forall idL idR. HsBindLR idL idR -&gt; [TcEvBinds]
</span><a href="Language.Haskell.Syntax.Binds.html#abs_ev_binds"><span class="hs-identifier hs-var">abs_ev_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305915"><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621681305915"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span>
</span><span id="line-628"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_exports :: forall idL idR. HsBindLR idL idR -&gt; [ABExport idL]
</span><a href="Language.Haskell.Syntax.Binds.html#abs_exports"><span class="hs-identifier hs-var">abs_exports</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305913"><span class="annot"><span class="annottext">[ABExport GhcTc]
</span><a href="#local-6989586621681305913"><span class="hs-identifier hs-var">exports</span></a></span></span><span>
</span><span id="line-629"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_binds :: forall idL idR. HsBindLR idL idR -&gt; LHsBinds idL
</span><a href="Language.Haskell.Syntax.Binds.html#abs_binds"><span class="hs-identifier hs-var">abs_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305911"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681305911"><span class="hs-identifier hs-var">val_binds</span></a></span></span><span>
</span><span id="line-630"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_sig :: forall idL idR. HsBindLR idL idR -&gt; Bool
</span><a href="Language.Haskell.Syntax.Binds.html#abs_sig"><span class="hs-identifier hs-var">abs_sig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305909"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681305909"><span class="hs-identifier hs-var">has_sig</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-631"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">all</span><span> </span><span class="hs-identifier">isImmutableTyVar</span><span> </span><span class="hs-identifier">tyvars</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-632"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305906"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305906"><span class="hs-identifier hs-var">env0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305905"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681305905"><span class="hs-identifier hs-var">new_tyvars</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; TcM (ZonkEnv, [TcTyVar])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrsX"><span class="hs-identifier hs-var">zonkTyBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305922"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681305919"><span class="hs-identifier hs-var">tyvars</span></a></span><span>
</span><span id="line-633"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305904"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305904"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305903"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681305903"><span class="hs-identifier hs-var">new_evs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; TcM (ZonkEnv, [TcTyVar])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrsX"><span class="hs-identifier hs-var">zonkEvBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305906"><span class="hs-identifier hs-var">env0</span></a></span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681305917"><span class="hs-identifier hs-var">evs</span></a></span><span>
</span><span id="line-634"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305902"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305902"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305901"><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621681305901"><span class="hs-identifier hs-var">new_ev_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcEvBinds] -&gt; TcM (ZonkEnv, [TcEvBinds])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds_s"><span class="hs-identifier hs-var">zonkTcEvBinds_s</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305904"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621681305915"><span class="hs-identifier hs-var">ev_binds</span></a></span><span>
</span><span id="line-635"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305899"><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681305899"><span class="hs-identifier hs-var">new_val_bind</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305898"><span class="annot"><span class="annottext">[ABExport GhcTc]
</span><a href="#local-6989586621681305898"><span class="hs-identifier hs-var">new_exports</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a env. (a -&gt; IOEnv env a) -&gt; IOEnv env a
</span><a href="GHC.Data.IOEnv.html#fixM"><span class="hs-identifier hs-var">fixM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span id="local-6989586621681305897"><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681305897"><span class="hs-identifier hs-var">new_val_binds</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[ABExport GhcTc]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-636"></span><span>         </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681305896"><span class="annot"><span class="annottext">env3 :: ZonkEnv
</span><a href="#local-6989586621681305896"><span class="hs-identifier hs-var hs-var">env3</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305902"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-637"></span><span>                         </span><span class="annot"><span class="annottext">forall p idR.
CollectPass p =&gt;
CollectFlag p -&gt; LHsBindsLR p idR -&gt; [IdP p]
</span><a href="GHC.Hs.Utils.html#collectHsBindsBinders"><span class="hs-identifier hs-var">collectHsBindsBinders</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681305897"><span class="hs-identifier hs-var">new_val_binds</span></a></span><span>
</span><span id="line-638"></span><span>            </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305895"><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681305895"><span class="hs-identifier hs-var">new_val_binds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Bag a -&gt; m (Bag b)
</span><a href="GHC.Data.Bag.html#mapBagM"><span class="hs-identifier hs-var">mapBagM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681305894"><span class="hs-identifier hs-var">zonk_val_bind</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305896"><span class="hs-identifier hs-var">env3</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681305911"><span class="hs-identifier hs-var">val_binds</span></a></span><span>
</span><span id="line-639"></span><span>            </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305893"><span class="annot"><span class="annottext">[ABExport GhcTc]
</span><a href="#local-6989586621681305893"><span class="hs-identifier hs-var">new_exports</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; ABExport GhcTc -&gt; TcM (ABExport GhcTc)
</span><a href="#local-6989586621681305892"><span class="hs-identifier hs-var">zonk_export</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305896"><span class="hs-identifier hs-var">env3</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ABExport GhcTc]
</span><a href="#local-6989586621681305913"><span class="hs-identifier hs-var">exports</span></a></span><span>
</span><span id="line-640"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681305895"><span class="hs-identifier hs-var">new_val_binds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[ABExport GhcTc]
</span><a href="#local-6989586621681305893"><span class="hs-identifier hs-var">new_exports</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-641"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#AbsBinds"><span class="hs-identifier hs-type">AbsBinds</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">abs_ext :: XAbsBinds GhcTc GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#abs_ext"><span class="hs-identifier hs-var">abs_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-642"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_tvs :: [TcTyVar]
</span><a href="Language.Haskell.Syntax.Binds.html#abs_tvs"><span class="hs-identifier hs-var">abs_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681305905"><span class="hs-identifier hs-var">new_tyvars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_ev_vars :: [TcTyVar]
</span><a href="Language.Haskell.Syntax.Binds.html#abs_ev_vars"><span class="hs-identifier hs-var">abs_ev_vars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681305903"><span class="hs-identifier hs-var">new_evs</span></a></span><span>
</span><span id="line-643"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_ev_binds :: [TcEvBinds]
</span><a href="Language.Haskell.Syntax.Binds.html#abs_ev_binds"><span class="hs-identifier hs-var">abs_ev_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621681305901"><span class="hs-identifier hs-var">new_ev_binds</span></a></span><span>
</span><span id="line-644"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_exports :: [ABExport GhcTc]
</span><a href="Language.Haskell.Syntax.Binds.html#abs_exports"><span class="hs-identifier hs-var">abs_exports</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ABExport GhcTc]
</span><a href="#local-6989586621681305898"><span class="hs-identifier hs-var">new_exports</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_binds :: LHsBinds GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#abs_binds"><span class="hs-identifier hs-var">abs_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681305899"><span class="hs-identifier hs-var">new_val_bind</span></a></span><span>
</span><span id="line-645"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_sig :: Bool
</span><a href="Language.Haskell.Syntax.Binds.html#abs_sig"><span class="hs-identifier hs-var">abs_sig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681305909"><span class="hs-identifier hs-var">has_sig</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-646"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-647"></span><span>    </span><span id="local-6989586621681305894"><span class="annot"><span class="annottext">zonk_val_bind :: ZonkEnv
-&gt; GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621681305894"><span class="hs-identifier hs-var hs-var">zonk_val_bind</span></a></span></span><span> </span><span id="local-6989586621681305890"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305890"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305889"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
</span><a href="#local-6989586621681305889"><span class="hs-identifier hs-var">lbind</span></a></span></span><span>
</span><span id="line-648"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681305909"><span class="hs-identifier hs-var">has_sig</span></a></span><span>
</span><span id="line-649"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681305888"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681305888"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681305887"><span class="annot"><span class="annottext">bind :: HsBindLR GhcTc GhcTc
</span><a href="#local-6989586621681305887"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: forall idL idR. HsBindLR idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681305886"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681305886"><span class="hs-identifier hs-var">mloc</span></a></span></span><span> </span><span id="local-6989586621681305885"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305885"><span class="hs-identifier hs-var">mono_id</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-650"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: forall idL idR. HsBindLR idL idR -&gt; MatchGroup idR (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305884"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681305884"><span class="hs-identifier hs-var">ms</span></a></span></span><span>
</span><span id="line-651"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_ext :: forall idL idR. HsBindLR idL idR -&gt; XFunBind idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305883"><span class="annot"><span class="annottext">XFunBind GhcTc GhcTc
</span><a href="#local-6989586621681305883"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
</span><a href="#local-6989586621681305889"><span class="hs-identifier hs-var">lbind</span></a></span><span>
</span><span id="line-652"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305882"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305882"><span class="hs-identifier hs-var">new_mono_id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
(Kind -&gt; m Kind) -&gt; TcTyVar -&gt; m TcTyVar
</span><a href="GHC.Types.Var.html#updateIdTypeAndMultM"><span class="hs-identifier hs-var">updateIdTypeAndMultM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305890"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305885"><span class="hs-identifier hs-var">mono_id</span></a></span><span>
</span><span id="line-653"></span><span>                            </span><span class="hs-comment">-- Specifically /not/ zonkIdBndr; we do not</span><span>
</span><span id="line-654"></span><span>                            </span><span class="hs-comment">-- want to complain about a levity-polymorphic binder</span><span>
</span><span id="line-655"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305881"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305881"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305880"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305880"><span class="hs-identifier hs-var">new_co_fn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305890"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XFunBind GhcTc GhcTc
</span><a href="#local-6989586621681305883"><span class="hs-identifier hs-var">co_fn</span></a></span><span>
</span><span id="line-656"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305879"><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305879"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span>            </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ SrcSpan) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305881"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681305884"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-657"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681305888"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-658"></span><span>             </span><span class="annot"><span class="annottext">HsBindLR GhcTc GhcTc
</span><a href="#local-6989586621681305887"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: LIdP GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681305886"><span class="hs-identifier hs-var">mloc</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305882"><span class="hs-identifier hs-var">new_mono_id</span></a></span><span>
</span><span id="line-659"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305879"><span class="hs-identifier hs-var">new_ms</span></a></span><span>
</span><span id="line-660"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_ext :: XFunBind GhcTc GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305880"><span class="hs-identifier hs-var">new_co_fn</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-661"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-662"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsBind GhcTc -&gt; TcM (LHsBind GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_lbind"><span class="hs-identifier hs-var">zonk_lbind</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305890"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
</span><a href="#local-6989586621681305889"><span class="hs-identifier hs-var">lbind</span></a></span><span>   </span><span class="hs-comment">-- The normal case</span><span>
</span><span id="line-663"></span><span>
</span><span id="line-664"></span><span>    </span><span class="annot"><a href="#local-6989586621681305892"><span class="hs-identifier hs-type">zonk_export</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ABExport"><span class="hs-identifier hs-type">ABExport</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ABExport"><span class="hs-identifier hs-type">ABExport</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-665"></span><span>    </span><span id="local-6989586621681305892"><span class="annot"><span class="annottext">zonk_export :: ZonkEnv -&gt; ABExport GhcTc -&gt; TcM (ABExport GhcTc)
</span><a href="#local-6989586621681305892"><span class="hs-identifier hs-var hs-var">zonk_export</span></a></span></span><span> </span><span id="local-6989586621681305878"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305878"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ABE"><span class="hs-identifier hs-type">ABE</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">abe_ext :: forall p. ABExport p -&gt; XABE p
</span><a href="Language.Haskell.Syntax.Binds.html#abe_ext"><span class="hs-identifier hs-var">abe_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305875"><span class="annot"><span class="annottext">XABE GhcTc
</span><a href="#local-6989586621681305875"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-666"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_wrap :: forall p. ABExport p -&gt; HsWrapper
</span><a href="Language.Haskell.Syntax.Binds.html#abe_wrap"><span class="hs-identifier hs-var">abe_wrap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305873"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305873"><span class="hs-identifier hs-var">wrap</span></a></span></span><span>
</span><span id="line-667"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_poly :: forall p. ABExport p -&gt; IdP p
</span><a href="Language.Haskell.Syntax.Binds.html#abe_poly"><span class="hs-identifier hs-var">abe_poly</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305871"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681305871"><span class="hs-identifier hs-var">poly_id</span></a></span></span><span>
</span><span id="line-668"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_mono :: forall p. ABExport p -&gt; IdP p
</span><a href="Language.Haskell.Syntax.Binds.html#abe_mono"><span class="hs-identifier hs-var">abe_mono</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305869"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681305869"><span class="hs-identifier hs-var">mono_id</span></a></span></span><span>
</span><span id="line-669"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_prags :: forall p. ABExport p -&gt; TcSpecPrags
</span><a href="Language.Haskell.Syntax.Binds.html#abe_prags"><span class="hs-identifier hs-var">abe_prags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305867"><span class="annot"><span class="annottext">TcSpecPrags
</span><a href="#local-6989586621681305867"><span class="hs-identifier hs-var">prags</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-670"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305866"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305866"><span class="hs-identifier hs-var">new_poly_id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305878"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681305871"><span class="hs-identifier hs-var">poly_id</span></a></span><span>
</span><span id="line-671"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305865"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305865"><span class="hs-identifier hs-var">new_wrap</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305878"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305873"><span class="hs-identifier hs-var">wrap</span></a></span><span>
</span><span id="line-672"></span><span>             </span><span id="local-6989586621681305864"><span class="annot"><span class="annottext">TcSpecPrags
</span><a href="#local-6989586621681305864"><span class="hs-identifier hs-var">new_prags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcSpecPrags -&gt; TcM TcSpecPrags
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSpecPrags"><span class="hs-identifier hs-var">zonkSpecPrags</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305878"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcSpecPrags
</span><a href="#local-6989586621681305867"><span class="hs-identifier hs-var">prags</span></a></span><span>
</span><span id="line-673"></span><span>             </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ABE"><span class="hs-identifier hs-type">ABE</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">abe_ext :: XABE GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#abe_ext"><span class="hs-identifier hs-var">abe_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XABE GhcTc
</span><a href="#local-6989586621681305875"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-674"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_wrap :: HsWrapper
</span><a href="Language.Haskell.Syntax.Binds.html#abe_wrap"><span class="hs-identifier hs-var">abe_wrap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305865"><span class="hs-identifier hs-var">new_wrap</span></a></span><span>
</span><span id="line-675"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_poly :: IdP GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#abe_poly"><span class="hs-identifier hs-var">abe_poly</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305866"><span class="hs-identifier hs-var">new_poly_id</span></a></span><span>
</span><span id="line-676"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_mono :: IdP GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#abe_mono"><span class="hs-identifier hs-var">abe_mono</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305878"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681305869"><span class="hs-identifier hs-var">mono_id</span></a></span><span>
</span><span id="line-677"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_prags :: TcSpecPrags
</span><a href="Language.Haskell.Syntax.Binds.html#abe_prags"><span class="hs-identifier hs-var">abe_prags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcSpecPrags
</span><a href="#local-6989586621681305864"><span class="hs-identifier hs-var">new_prags</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-678"></span><span>
</span><span id="line-679"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_bind"><span class="hs-identifier hs-var">zonk_bind</span></a></span><span> </span><span id="local-6989586621681305862"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305862"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span id="local-6989586621681305860"><span class="annot"><span class="annottext">XPatSynBind GhcTc GhcTc
</span><a href="#local-6989586621681305860"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305859"><span class="annot"><span class="annottext">bind :: PatSynBind GhcTc GhcTc
</span><a href="#local-6989586621681305859"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PSB"><span class="hs-identifier hs-type">PSB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psb_id :: forall idL idR. PatSynBind idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681305856"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681305856"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681305855"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305855"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-680"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_args :: forall idL idR. PatSynBind idL idR -&gt; HsPatSynDetails idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_args"><span class="hs-identifier hs-var">psb_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305853"><span class="annot"><span class="annottext">HsPatSynDetails GhcTc
</span><a href="#local-6989586621681305853"><span class="hs-identifier hs-var">details</span></a></span></span><span>
</span><span id="line-681"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_def :: forall idL idR. PatSynBind idL idR -&gt; LPat idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_def"><span class="hs-identifier hs-var">psb_def</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305851"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681305851"><span class="hs-identifier hs-var">lpat</span></a></span></span><span>
</span><span id="line-682"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_dir :: forall idL idR. PatSynBind idL idR -&gt; HsPatSynDir idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_dir"><span class="hs-identifier hs-var">psb_dir</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305849"><span class="annot"><span class="annottext">HsPatSynDir GhcTc
</span><a href="#local-6989586621681305849"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-683"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305848"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305848"><span class="hs-identifier hs-var">id'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305862"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305855"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-684"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305847"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305847"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305846"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681305846"><span class="hs-identifier hs-var">lpat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305862"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681305851"><span class="hs-identifier hs-var">lpat</span></a></span><span>
</span><span id="line-685"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305845"><span class="annot"><span class="annottext">HsConDetails
  Void (GenLocated SrcSpanAnnN TcTyVar) [RecordPatSynField GhcTc]
</span><a href="#local-6989586621681305845"><span class="hs-identifier hs-var">details'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsPatSynDetails GhcTc -&gt; TcM (HsPatSynDetails GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDetails"><span class="hs-identifier hs-var">zonkPatSynDetails</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305847"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSynDetails GhcTc
</span><a href="#local-6989586621681305853"><span class="hs-identifier hs-var">details</span></a></span><span>
</span><span id="line-686"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305843"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305843"><span class="hs-identifier hs-var">_env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305842"><span class="annot"><span class="annottext">HsPatSynDir GhcTc
</span><a href="#local-6989586621681305842"><span class="hs-identifier hs-var">dir'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsPatSynDir GhcTc -&gt; TcM (ZonkEnv, HsPatSynDir GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDir"><span class="hs-identifier hs-var">zonkPatSynDir</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305847"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc
</span><a href="#local-6989586621681305849"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-687"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall idL idR.
XPatSynBind idL idR -&gt; PatSynBind idL idR -&gt; HsBindLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-var">PatSynBind</span></a></span><span> </span><span class="annot"><span class="annottext">XPatSynBind GhcTc GhcTc
</span><a href="#local-6989586621681305860"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-688"></span><span>                  </span><span class="annot"><span class="annottext">PatSynBind GhcTc GhcTc
</span><a href="#local-6989586621681305859"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psb_id :: LIdP GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681305856"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305848"><span class="hs-identifier hs-var">id'</span></a></span><span>
</span><span id="line-689"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_args :: HsPatSynDetails GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#psb_args"><span class="hs-identifier hs-var">psb_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsConDetails
  Void (GenLocated SrcSpanAnnN TcTyVar) [RecordPatSynField GhcTc]
</span><a href="#local-6989586621681305845"><span class="hs-identifier hs-var">details'</span></a></span><span>
</span><span id="line-690"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_def :: LPat GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#psb_def"><span class="hs-identifier hs-var">psb_def</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681305846"><span class="hs-identifier hs-var">lpat'</span></a></span><span>
</span><span id="line-691"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_dir :: HsPatSynDir GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#psb_dir"><span class="hs-identifier hs-var">psb_dir</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc
</span><a href="#local-6989586621681305842"><span class="hs-identifier hs-var">dir'</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-692"></span><span>
</span><span id="line-693"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDetails"><span class="hs-identifier hs-type">zonkPatSynDetails</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-694"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsPatSynDetails"><span class="hs-identifier hs-type">HsPatSynDetails</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-695"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsPatSynDetails"><span class="hs-identifier hs-type">HsPatSynDetails</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-696"></span><span id="zonkPatSynDetails"><span class="annot"><span class="annottext">zonkPatSynDetails :: ZonkEnv -&gt; HsPatSynDetails GhcTc -&gt; TcM (HsPatSynDetails GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDetails"><span class="hs-identifier hs-var hs-var">zonkPatSynDetails</span></a></span></span><span> </span><span id="local-6989586621681305840"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305840"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681305838"><span class="annot"><span class="annottext">[LIdP GhcTc]
</span><a href="#local-6989586621681305838"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-697"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall tyarg arg rec.
[tyarg] -&gt; [arg] -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><a href="Language.Haskell.Syntax.Type.html#noTypeArgs"><span class="hs-identifier hs-var">noTypeArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; GenLocated SrcSpanAnnN TcTyVar -&gt; GenLocated SrcSpanAnnN TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLIdOcc"><span class="hs-identifier hs-var">zonkLIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305840"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LIdP GhcTc]
</span><a href="#local-6989586621681305838"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-698"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDetails"><span class="hs-identifier hs-var">zonkPatSynDetails</span></a></span><span> </span><span id="local-6989586621681305836"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305836"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621681305834"><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621681305834"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span id="local-6989586621681305833"><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621681305833"><span class="hs-identifier hs-var">a2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-699"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall tyarg arg rec. arg -&gt; arg -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-var">InfixCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; GenLocated SrcSpanAnnN TcTyVar -&gt; GenLocated SrcSpanAnnN TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLIdOcc"><span class="hs-identifier hs-var">zonkLIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305836"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621681305834"><span class="hs-identifier hs-var">a1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; GenLocated SrcSpanAnnN TcTyVar -&gt; GenLocated SrcSpanAnnN TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLIdOcc"><span class="hs-identifier hs-var">zonkLIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305836"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621681305833"><span class="hs-identifier hs-var">a2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-700"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDetails"><span class="hs-identifier hs-var">zonkPatSynDetails</span></a></span><span> </span><span id="local-6989586621681305832"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305832"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span id="local-6989586621681305830"><span class="annot"><span class="annottext">[RecordPatSynField GhcTc]
</span><a href="#local-6989586621681305830"><span class="hs-identifier hs-var">flds</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-701"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall tyarg arg rec. rec -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-var">RecCon</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; RecordPatSynField GhcTc -&gt; TcM (RecordPatSynField GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynField"><span class="hs-identifier hs-var">zonkPatSynField</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305832"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[RecordPatSynField GhcTc]
</span><a href="#local-6989586621681305830"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-702"></span><span>
</span><span id="line-703"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynField"><span class="hs-identifier hs-type">zonkPatSynField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#RecordPatSynField"><span class="hs-identifier hs-type">RecordPatSynField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#RecordPatSynField"><span class="hs-identifier hs-type">RecordPatSynField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span id="zonkPatSynField"><span class="annot"><span class="annottext">zonkPatSynField :: ZonkEnv -&gt; RecordPatSynField GhcTc -&gt; TcM (RecordPatSynField GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynField"><span class="hs-identifier hs-var hs-var">zonkPatSynField</span></a></span></span><span> </span><span id="local-6989586621681305827"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305827"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#RecordPatSynField"><span class="hs-identifier hs-type">RecordPatSynField</span></a></span><span> </span><span id="local-6989586621681305825"><span class="annot"><span class="annottext">FieldOcc GhcTc
</span><a href="#local-6989586621681305825"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305824"><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621681305824"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-705"></span><span>    </span><span class="annot"><span class="annottext">forall pass. FieldOcc pass -&gt; LIdP pass -&gt; RecordPatSynField pass
</span><a href="Language.Haskell.Syntax.Binds.html#RecordPatSynField"><span class="hs-identifier hs-var">RecordPatSynField</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; FieldOcc GhcTc -&gt; TcM (FieldOcc GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkFieldOcc"><span class="hs-identifier hs-var">zonkFieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305827"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcTc
</span><a href="#local-6989586621681305825"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; GenLocated SrcSpanAnnN TcTyVar -&gt; GenLocated SrcSpanAnnN TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLIdOcc"><span class="hs-identifier hs-var">zonkLIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305827"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621681305824"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-706"></span><span>
</span><span id="line-707"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDir"><span class="hs-identifier hs-type">zonkPatSynDir</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsPatSynDir"><span class="hs-identifier hs-type">HsPatSynDir</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-708"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsPatSynDir"><span class="hs-identifier hs-type">HsPatSynDir</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-709"></span><span id="zonkPatSynDir"><span class="annot"><span class="annottext">zonkPatSynDir :: ZonkEnv -&gt; HsPatSynDir GhcTc -&gt; TcM (ZonkEnv, HsPatSynDir GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDir"><span class="hs-identifier hs-var hs-var">zonkPatSynDir</span></a></span></span><span> </span><span id="local-6989586621681305823"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305823"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#Unidirectional"><span class="hs-identifier hs-var">Unidirectional</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305823"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall id. HsPatSynDir id
</span><a href="Language.Haskell.Syntax.Binds.html#Unidirectional"><span class="hs-identifier hs-var">Unidirectional</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-710"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDir"><span class="hs-identifier hs-var">zonkPatSynDir</span></a></span><span> </span><span id="local-6989586621681305821"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305821"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#ImplicitBidirectional"><span class="hs-identifier hs-var">ImplicitBidirectional</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305821"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall id. HsPatSynDir id
</span><a href="Language.Haskell.Syntax.Binds.html#ImplicitBidirectional"><span class="hs-identifier hs-var">ImplicitBidirectional</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-711"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDir"><span class="hs-identifier hs-var">zonkPatSynDir</span></a></span><span> </span><span id="local-6989586621681305819"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305819"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ExplicitBidirectional"><span class="hs-identifier hs-type">ExplicitBidirectional</span></a></span><span> </span><span id="local-6989586621681305817"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681305817"><span class="hs-identifier hs-var">mg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-712"></span><span>    </span><span id="local-6989586621681305816"><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305816"><span class="hs-identifier hs-var">mg'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ SrcSpan) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305819"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681305817"><span class="hs-identifier hs-var">mg</span></a></span><span>
</span><span id="line-713"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305819"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall id. MatchGroup id (LHsExpr id) -&gt; HsPatSynDir id
</span><a href="Language.Haskell.Syntax.Binds.html#ExplicitBidirectional"><span class="hs-identifier hs-var">ExplicitBidirectional</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305816"><span class="hs-identifier hs-var">mg'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-714"></span><span>
</span><span id="line-715"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkSpecPrags"><span class="hs-identifier hs-type">zonkSpecPrags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#TcSpecPrags"><span class="hs-identifier hs-type">TcSpecPrags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#TcSpecPrags"><span class="hs-identifier hs-type">TcSpecPrags</span></a></span><span>
</span><span id="line-716"></span><span id="zonkSpecPrags"><span class="annot"><span class="annottext">zonkSpecPrags :: ZonkEnv -&gt; TcSpecPrags -&gt; TcM TcSpecPrags
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSpecPrags"><span class="hs-identifier hs-var hs-var">zonkSpecPrags</span></a></span></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span>   </span><span class="annot"><span class="annottext">TcSpecPrags
</span><a href="Language.Haskell.Syntax.Binds.html#IsDefaultMethod"><span class="hs-identifier hs-var">IsDefaultMethod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TcSpecPrags
</span><a href="Language.Haskell.Syntax.Binds.html#IsDefaultMethod"><span class="hs-identifier hs-var">IsDefaultMethod</span></a></span><span>
</span><span id="line-717"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkSpecPrags"><span class="hs-identifier hs-var">zonkSpecPrags</span></a></span><span> </span><span id="local-6989586621681305814"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305814"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SpecPrags"><span class="hs-identifier hs-type">SpecPrags</span></a></span><span> </span><span id="local-6989586621681305812"><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681305812"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305811"><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681305811"><span class="hs-identifier hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LTcSpecPrag] -&gt; TcM [LTcSpecPrag]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLTcSpecPrags"><span class="hs-identifier hs-var">zonkLTcSpecPrags</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305814"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681305812"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-718"></span><span>                                       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LTcSpecPrag] -&gt; TcSpecPrags
</span><a href="Language.Haskell.Syntax.Binds.html#SpecPrags"><span class="hs-identifier hs-var">SpecPrags</span></a></span><span> </span><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681305811"><span class="hs-identifier hs-var">ps'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-719"></span><span>
</span><span id="line-720"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLTcSpecPrags"><span class="hs-identifier hs-type">zonkLTcSpecPrags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LTcSpecPrag"><span class="hs-identifier hs-type">LTcSpecPrag</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LTcSpecPrag"><span class="hs-identifier hs-type">LTcSpecPrag</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-721"></span><span id="zonkLTcSpecPrags"><span class="annot"><span class="annottext">zonkLTcSpecPrags :: ZonkEnv -&gt; [LTcSpecPrag] -&gt; TcM [LTcSpecPrag]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLTcSpecPrags"><span class="hs-identifier hs-var hs-var">zonkLTcSpecPrags</span></a></span></span><span> </span><span id="local-6989586621681305810"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305810"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305809"><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681305809"><span class="hs-identifier hs-var">ps</span></a></span></span><span>
</span><span id="line-722"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">LTcSpecPrag -&gt; IOEnv (Env TcGblEnv TcLclEnv) LTcSpecPrag
</span><a href="#local-6989586621681305808"><span class="hs-identifier hs-var">zonk_prag</span></a></span><span> </span><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681305809"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-723"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-724"></span><span>    </span><span id="local-6989586621681305808"><span class="annot"><span class="annottext">zonk_prag :: LTcSpecPrag -&gt; IOEnv (Env TcGblEnv TcLclEnv) LTcSpecPrag
</span><a href="#local-6989586621681305808"><span class="hs-identifier hs-var hs-var">zonk_prag</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681305807"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681305807"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SpecPrag"><span class="hs-identifier hs-type">SpecPrag</span></a></span><span> </span><span id="local-6989586621681305805"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305805"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621681305804"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305804"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span> </span><span id="local-6989586621681305803"><span class="annot"><span class="annottext">InlinePragma
</span><a href="#local-6989586621681305803"><span class="hs-identifier hs-var">inl</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-725"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305802"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305802"><span class="hs-identifier hs-var">co_fn'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305810"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305804"><span class="hs-identifier hs-var">co_fn</span></a></span><span>
</span><span id="line-726"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681305807"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; HsWrapper -&gt; InlinePragma -&gt; TcSpecPrag
</span><a href="Language.Haskell.Syntax.Binds.html#SpecPrag"><span class="hs-identifier hs-var">SpecPrag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305810"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305805"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305802"><span class="hs-identifier hs-var">co_fn'</span></a></span><span> </span><span class="annot"><span class="annottext">InlinePragma
</span><a href="#local-6989586621681305803"><span class="hs-identifier hs-var">inl</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-727"></span><span>
</span><span id="line-728"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[BackSubst-Match-GRHSs]{Match and GRHSs}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-735"></span><span>
</span><span id="line-736"></span><span id="local-6989586621681307386"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-type">zonkMatchGroup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307386"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-737"></span><span>            </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-738"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307386"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307386"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-739"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307386"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-740"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307386"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-741"></span><span id="zonkMatchGroup"><span class="annot"><span class="annottext">zonkMatchGroup :: forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ SrcSpan) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var hs-var">zonkMatchGroup</span></a></span></span><span> </span><span id="local-6989586621681305791"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305791"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305790"><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305790"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_alts :: forall p body. MatchGroup p body -&gt; XRec p [LMatch p body]
</span><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681305787"><span class="annot"><span class="annottext">Anno
  [GenLocated
     (Anno (Match GhcTc (LocatedA (body GhcTc))))
     (Match GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621681305787"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681305786"><span class="annot"><span class="annottext">[GenLocated
   (Anno (Match GhcTc (LocatedA (body GhcTc))))
   (Match GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621681305786"><span class="hs-identifier hs-var">ms</span></a></span></span><span>
</span><span id="line-742"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_ext :: forall p body. MatchGroup p body -&gt; XMG p body
</span><a href="Language.Haskell.Syntax.Expr.html#mg_ext"><span class="hs-identifier hs-var">mg_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroupTc"><span class="hs-identifier hs-type">MatchGroupTc</span></a></span><span> </span><span id="local-6989586621681305783"><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681305783"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span> </span><span id="local-6989586621681305782"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305782"><span class="hs-identifier hs-var">res_ty</span></a></span></span><span>
</span><span id="line-743"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_origin :: forall p body. MatchGroup p body -&gt; Origin
</span><a href="Language.Haskell.Syntax.Expr.html#mg_origin"><span class="hs-identifier hs-var">mg_origin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305780"><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621681305780"><span class="hs-identifier hs-var">origin</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-744"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305779"><span class="annot"><span class="annottext">[GenLocated
   (Anno (Match GhcTc (LocatedA (body GhcTc))))
   (Match GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621681305779"><span class="hs-identifier hs-var">ms'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ SrcSpan) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; LMatch GhcTc (LocatedA (body GhcTc))
-&gt; TcM (LMatch GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatch"><span class="hs-identifier hs-var">zonkMatch</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305791"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305790"><span class="hs-identifier hs-var">zBody</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (Anno (Match GhcTc (LocatedA (body GhcTc))))
   (Match GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621681305786"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-745"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305777"><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681305777"><span class="hs-identifier hs-var">arg_tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Scaled Kind] -&gt; TcM [Scaled Kind]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypesToTypesX"><span class="hs-identifier hs-var">zonkScaledTcTypesToTypesX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305791"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681305783"><span class="hs-identifier hs-var">arg_tys</span></a></span><span>
</span><span id="line-746"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305776"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305776"><span class="hs-identifier hs-var">res_ty'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305791"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305782"><span class="hs-identifier hs-var">res_ty</span></a></span><span>
</span><span id="line-747"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_alts :: XRec GhcTc [LMatch GhcTc (LocatedA (body GhcTc))]
</span><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">Anno
  [GenLocated
     (Anno (Match GhcTc (LocatedA (body GhcTc))))
     (Match GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621681305787"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (Anno (Match GhcTc (LocatedA (body GhcTc))))
   (Match GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621681305779"><span class="hs-identifier hs-var">ms'</span></a></span><span>
</span><span id="line-748"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_ext :: XMG GhcTc (LocatedA (body GhcTc))
</span><a href="Language.Haskell.Syntax.Expr.html#mg_ext"><span class="hs-identifier hs-var">mg_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Scaled Kind] -&gt; Kind -&gt; MatchGroupTc
</span><a href="Language.Haskell.Syntax.Expr.html#MatchGroupTc"><span class="hs-identifier hs-var">MatchGroupTc</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681305777"><span class="hs-identifier hs-var">arg_tys'</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305776"><span class="hs-identifier hs-var">res_ty'</span></a></span><span>
</span><span id="line-749"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_origin :: Origin
</span><a href="Language.Haskell.Syntax.Expr.html#mg_origin"><span class="hs-identifier hs-var">mg_origin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621681305780"><span class="hs-identifier hs-var">origin</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-750"></span><span>
</span><span id="line-751"></span><span id="local-6989586621681307319"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkMatch"><span class="hs-identifier hs-type">zonkMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307319"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-752"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-753"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307319"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307319"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-754"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307319"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-755"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307319"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-756"></span><span id="zonkMatch"><span class="annot"><span class="annottext">zonkMatch :: forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ SrcSpan) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; LMatch GhcTc (LocatedA (body GhcTc))
-&gt; TcM (LMatch GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatch"><span class="hs-identifier hs-var hs-var">zonkMatch</span></a></span></span><span> </span><span id="local-6989586621681305768"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305768"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305767"><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305767"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681305766"><span class="annot"><span class="annottext">Anno (Match GhcTc (LocatedA (body GhcTc)))
</span><a href="#local-6989586621681305766"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681305765"><span class="annot"><span class="annottext">match :: Match GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305765"><span class="hs-identifier hs-var">match</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">m_pats :: forall p body. Match p body -&gt; [LPat p]
</span><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305762"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681305762"><span class="hs-identifier hs-var">pats</span></a></span></span><span>
</span><span id="line-757"></span><span>                                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_grhss :: forall p body. Match p body -&gt; GRHSs p body
</span><a href="Language.Haskell.Syntax.Expr.html#m_grhss"><span class="hs-identifier hs-var">m_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305760"><span class="annot"><span class="annottext">GRHSs GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305760"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-758"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305759"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305759"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305758"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681305758"><span class="hs-identifier hs-var">new_pats</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305768"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681305762"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-759"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305756"><span class="annot"><span class="annottext">GRHSs GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305756"><span class="hs-identifier hs-var">new_grhss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ SrcSpan) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; GRHSs GhcTc (LocatedA (body GhcTc))
-&gt; TcM (GRHSs GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkGRHSs"><span class="hs-identifier hs-var">zonkGRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305759"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305767"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">GRHSs GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305760"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-760"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">Anno (Match GhcTc (LocatedA (body GhcTc)))
</span><a href="#local-6989586621681305766"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Match GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305765"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">m_pats :: [LPat GhcTc]
</span><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681305758"><span class="hs-identifier hs-var">new_pats</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_grhss :: GRHSs GhcTc (LocatedA (body GhcTc))
</span><a href="Language.Haskell.Syntax.Expr.html#m_grhss"><span class="hs-identifier hs-var">m_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GRHSs GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305756"><span class="hs-identifier hs-var">new_grhss</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-761"></span><span>
</span><span id="line-762"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-763"></span><span id="local-6989586621681307402"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkGRHSs"><span class="hs-identifier hs-type">zonkGRHSs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307402"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-764"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-765"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307402"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307402"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-766"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307402"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-767"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307402"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-768"></span><span>
</span><span id="line-769"></span><span id="zonkGRHSs"><span class="annot"><span class="annottext">zonkGRHSs :: forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ SrcSpan) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; GRHSs GhcTc (LocatedA (body GhcTc))
-&gt; TcM (GRHSs GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkGRHSs"><span class="hs-identifier hs-var hs-var">zonkGRHSs</span></a></span></span><span> </span><span id="local-6989586621681305744"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305744"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305743"><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305743"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span id="local-6989586621681305741"><span class="annot"><span class="annottext">XCGRHSs GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305741"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305740"><span class="annot"><span class="annottext">[LGRHS GhcTc (LocatedA (body GhcTc))]
</span><a href="#local-6989586621681305740"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span id="local-6989586621681305739"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681305739"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-770"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681305738"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305738"><span class="hs-identifier hs-var">new_env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305737"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681305737"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsLocalBinds GhcTc -&gt; TcM (ZonkEnv, HsLocalBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305744"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681305739"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-771"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-772"></span><span>        </span><span id="local-6989586621681305736"><span class="annot"><span class="annottext">zonk_grhs :: GRHS GhcTc (LocatedA (body GhcTc))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (GRHS GhcTc (LocatedA (body GhcTc)))
</span><a href="#local-6989586621681305736"><span class="hs-identifier hs-var hs-var">zonk_grhs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span id="local-6989586621681305734"><span class="annot"><span class="annottext">XCGRHS GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305734"><span class="hs-identifier hs-var">xx</span></a></span></span><span> </span><span id="local-6989586621681305733"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681305733"><span class="hs-identifier hs-var">guarded</span></a></span></span><span> </span><span id="local-6989586621681305732"><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681305732"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-773"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305731"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305731"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305730"><span class="annot"><span class="annottext">[GenLocated
   (Anno (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc))))
   (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305730"><span class="hs-identifier hs-var">new_guarded</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (LocatedA (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305738"><span class="hs-identifier hs-var">new_env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681305733"><span class="hs-identifier hs-var">guarded</span></a></span><span>
</span><span id="line-774"></span><span>               </span><span id="local-6989586621681305728"><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681305728"><span class="hs-identifier hs-var">new_rhs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305743"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305731"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681305732"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-775"></span><span>               </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p body.
XCGRHS p body -&gt; [GuardLStmt p] -&gt; body -&gt; GRHS p body
</span><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-var">GRHS</span></a></span><span> </span><span class="annot"><span class="annottext">XCGRHS GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305734"><span class="hs-identifier hs-var">xx</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (Anno (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc))))
   (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305730"><span class="hs-identifier hs-var">new_guarded</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681305728"><span class="hs-identifier hs-var">new_rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-776"></span><span>    </span><span id="local-6989586621681305727"><span class="annot"><span class="annottext">[Located (GRHS GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621681305727"><span class="hs-identifier hs-var">new_grhss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="annot"><span class="annottext">GRHS GhcTc (LocatedA (body GhcTc))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (GRHS GhcTc (LocatedA (body GhcTc)))
</span><a href="#local-6989586621681305736"><span class="hs-identifier hs-var">zonk_grhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LGRHS GhcTc (LocatedA (body GhcTc))]
</span><a href="#local-6989586621681305740"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-777"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p body.
XCGRHSs p body -&gt; [LGRHS p body] -&gt; HsLocalBinds p -&gt; GRHSs p body
</span><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-var">GRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">XCGRHSs GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305741"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[Located (GRHS GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621681305727"><span class="hs-identifier hs-var">new_grhss</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681305737"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-778"></span><span>
</span><span id="line-779"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[BackSubst-HsExpr]{Running a zonkitution over a TypeCheckedExpr}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-786"></span><span>
</span><span id="line-787"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLExprs"><span class="hs-identifier hs-type">zonkLExprs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-788"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-789"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-type">zonkExpr</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-790"></span><span>
</span><span id="line-791"></span><span id="zonkLExprs"><span class="annot"><span class="annottext">zonkLExprs :: ZonkEnv -&gt; [LHsExpr GhcTc] -&gt; TcM [LHsExpr GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExprs"><span class="hs-identifier hs-var hs-var">zonkLExprs</span></a></span></span><span> </span><span id="local-6989586621681305724"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305724"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305723"><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621681305723"><span class="hs-identifier hs-var">exprs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305724"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621681305723"><span class="hs-identifier hs-var">exprs</span></a></span><span>
</span><span id="line-792"></span><span id="zonkLExpr"><span class="annot"><span class="annottext">zonkLExpr :: ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var hs-var">zonkLExpr</span></a></span></span><span>  </span><span id="local-6989586621681305722"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305722"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305721"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305721"><span class="hs-identifier hs-var">expr</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b ann.
(a -&gt; TcM b)
-&gt; GenLocated (SrcSpanAnn' ann) a
-&gt; TcRn (GenLocated (SrcSpanAnn' ann) b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocMA"><span class="hs-identifier hs-var">wrapLocMA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305722"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305721"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-793"></span><span>
</span><span id="line-794"></span><span id="zonkExpr"><span class="annot"><span class="annottext">zonkExpr :: ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var hs-var">zonkExpr</span></a></span></span><span> </span><span id="local-6989586621681305720"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305720"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-type">HsVar</span></a></span><span> </span><span id="local-6989586621681305718"><span class="annot"><span class="annottext">XVar GhcTc
</span><a href="#local-6989586621681305718"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681305717"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681305717"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681305716"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305716"><span class="hs-identifier hs-var">id</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-795"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isNothing</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">isDataConId_maybe</span><span> </span><span class="hs-identifier">id</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">id</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-796"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XVar p -&gt; LIdP p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcTc
</span><a href="#local-6989586621681305718"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681305717"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305720"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305716"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-797"></span><span>
</span><span id="line-798"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305713"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305713"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsUnboundVar"><span class="hs-identifier hs-type">HsUnboundVar</span></a></span><span> </span><span id="local-6989586621681305711"><span class="annot"><span class="annottext">XUnboundVar GhcTc
</span><a href="#local-6989586621681305711"><span class="hs-identifier hs-var">her</span></a></span></span><span> </span><span id="local-6989586621681305710"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681305710"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-799"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305709"><span class="annot"><span class="annottext">HoleExprRef
</span><a href="#local-6989586621681305709"><span class="hs-identifier hs-var">her'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HoleExprRef -&gt; TcM HoleExprRef
</span><a href="#local-6989586621681305708"><span class="hs-identifier hs-var">zonk_her</span></a></span><span> </span><span class="annot"><span class="annottext">XUnboundVar GhcTc
</span><a href="#local-6989586621681305711"><span class="hs-identifier hs-var">her</span></a></span><span>
</span><span id="line-800"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XUnboundVar p -&gt; OccName -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsUnboundVar"><span class="hs-identifier hs-var">HsUnboundVar</span></a></span><span> </span><span class="annot"><span class="annottext">HoleExprRef
</span><a href="#local-6989586621681305709"><span class="hs-identifier hs-var">her'</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681305710"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-801"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-802"></span><span>    </span><span class="annot"><a href="#local-6989586621681305708"><span class="hs-identifier hs-type">zonk_her</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HoleExprRef"><span class="hs-identifier hs-type">HoleExprRef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HoleExprRef"><span class="hs-identifier hs-type">HoleExprRef</span></a></span><span>
</span><span id="line-803"></span><span>    </span><span id="local-6989586621681305708"><span class="annot"><span class="annottext">zonk_her :: HoleExprRef -&gt; TcM HoleExprRef
</span><a href="#local-6989586621681305708"><span class="hs-identifier hs-var hs-var">zonk_her</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HER"><span class="hs-identifier hs-type">HER</span></a></span><span> </span><span id="local-6989586621681305706"><span class="annot"><span class="annottext">IORef EvTerm
</span><a href="#local-6989586621681305706"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span id="local-6989586621681305705"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305705"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681305704"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681305704"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-804"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">forall a env. IORef a -&gt; (a -&gt; IOEnv env a) -&gt; IOEnv env ()
</span><a href="GHC.Data.IOEnv.html#updMutVarM"><span class="hs-identifier hs-var">updMutVarM</span></a></span><span> </span><span class="annot"><span class="annottext">IORef EvTerm
</span><a href="#local-6989586621681305706"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305713"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-805"></span><span>           </span><span id="local-6989586621681305701"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305701"><span class="hs-identifier hs-var">ty'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305713"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305705"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-806"></span><span>           </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IORef EvTerm -&gt; Kind -&gt; Unique -&gt; HoleExprRef
</span><a href="GHC.Tc.Types.Evidence.html#HER"><span class="hs-identifier hs-var">HER</span></a></span><span> </span><span class="annot"><span class="annottext">IORef EvTerm
</span><a href="#local-6989586621681305706"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305701"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681305704"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-807"></span><span>
</span><span id="line-808"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305700"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305700"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsRecFld"><span class="hs-identifier hs-type">HsRecFld</span></a></span><span> </span><span class="annot"><span class="annottext">XRecFld GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#Ambiguous"><span class="hs-identifier hs-type">Ambiguous</span></a></span><span> </span><span id="local-6989586621681305697"><span class="annot"><span class="annottext">XAmbiguous GhcTc
</span><a href="#local-6989586621681305697"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681305696"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621681305696"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-809"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XRecFld p -&gt; AmbiguousFieldOcc p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsRecFld"><span class="hs-identifier hs-var">HsRecFld</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XAmbiguous pass -&gt; LocatedN RdrName -&gt; AmbiguousFieldOcc pass
</span><a href="Language.Haskell.Syntax.Type.html#Ambiguous"><span class="hs-identifier hs-var">Ambiguous</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305700"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XAmbiguous GhcTc
</span><a href="#local-6989586621681305697"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621681305696"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305695"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305695"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsRecFld"><span class="hs-identifier hs-type">HsRecFld</span></a></span><span> </span><span class="annot"><span class="annottext">XRecFld GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#Unambiguous"><span class="hs-identifier hs-type">Unambiguous</span></a></span><span> </span><span id="local-6989586621681305693"><span class="annot"><span class="annottext">XUnambiguous GhcTc
</span><a href="#local-6989586621681305693"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681305692"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621681305692"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-811"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XRecFld p -&gt; AmbiguousFieldOcc p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsRecFld"><span class="hs-identifier hs-var">HsRecFld</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XUnambiguous pass -&gt; LocatedN RdrName -&gt; AmbiguousFieldOcc pass
</span><a href="Language.Haskell.Syntax.Type.html#Unambiguous"><span class="hs-identifier hs-var">Unambiguous</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305695"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XUnambiguous GhcTc
</span><a href="#local-6989586621681305693"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621681305692"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-812"></span><span>
</span><span id="line-813"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681305691"><span class="annot"><span class="annottext">e :: HsExpr GhcTc
</span><a href="#local-6989586621681305691"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsConLikeOut"><span class="hs-identifier hs-type">HsConLikeOut</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305691"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-814"></span><span>
</span><span id="line-815"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsIPVar"><span class="hs-identifier hs-type">HsIPVar</span></a></span><span> </span><span id="local-6989586621681305688"><span class="annot"><span class="annottext">XIPVar GhcTc
</span><a href="#local-6989586621681305688"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305687"><span class="annot"><span class="annottext">HsIPName
</span><a href="#local-6989586621681305687"><span class="hs-identifier hs-var">id</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-816"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XIPVar p -&gt; HsIPName -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsIPVar"><span class="hs-identifier hs-var">HsIPVar</span></a></span><span> </span><span class="annot"><span class="annottext">XIPVar GhcTc
</span><a href="#local-6989586621681305688"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsIPName
</span><a href="#local-6989586621681305687"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-817"></span><span>
</span><span id="line-818"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681305686"><span class="annot"><span class="annottext">e :: HsExpr GhcTc
</span><a href="#local-6989586621681305686"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsOverLabel"><span class="hs-identifier hs-type">HsOverLabel</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305686"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-819"></span><span>
</span><span id="line-820"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305684"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305684"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span id="local-6989586621681305683"><span class="annot"><span class="annottext">XLitE GhcTc
</span><a href="#local-6989586621681305683"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsRat"><span class="hs-identifier hs-type">HsRat</span></a></span><span> </span><span id="local-6989586621681305682"><span class="annot"><span class="annottext">XHsRat GhcTc
</span><a href="#local-6989586621681305682"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681305681"><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681305681"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681305680"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305680"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-821"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305679"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305679"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305684"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305680"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-822"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">XLitE GhcTc
</span><a href="#local-6989586621681305683"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x. XHsRat x -&gt; FractionalLit -&gt; Kind -&gt; HsLit x
</span><a href="Language.Haskell.Syntax.Lit.html#HsRat"><span class="hs-identifier hs-var">HsRat</span></a></span><span> </span><span class="annot"><span class="annottext">XHsRat GhcTc
</span><a href="#local-6989586621681305682"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681305681"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305679"><span class="hs-identifier hs-var">new_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-823"></span><span>
</span><span id="line-824"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span id="local-6989586621681305678"><span class="annot"><span class="annottext">XLitE GhcTc
</span><a href="#local-6989586621681305678"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305677"><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681305677"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-825"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">XLitE GhcTc
</span><a href="#local-6989586621681305678"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681305677"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-826"></span><span>
</span><span id="line-827"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305676"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305676"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span id="local-6989586621681305674"><span class="annot"><span class="annottext">XOverLitE GhcTc
</span><a href="#local-6989586621681305674"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305673"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681305673"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-828"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305672"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681305672"><span class="hs-identifier hs-var">lit'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsOverLit GhcTc -&gt; TcM (HsOverLit GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkOverLit"><span class="hs-identifier hs-var">zonkOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305676"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681305673"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-829"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XOverLitE p -&gt; HsOverLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsOverLit"><span class="hs-identifier hs-var">HsOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">XOverLitE GhcTc
</span><a href="#local-6989586621681305674"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681305672"><span class="hs-identifier hs-var">lit'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-830"></span><span>
</span><span id="line-831"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305670"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305670"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLam"><span class="hs-identifier hs-type">HsLam</span></a></span><span> </span><span id="local-6989586621681305668"><span class="annot"><span class="annottext">XLam GhcTc
</span><a href="#local-6989586621681305668"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305667"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681305667"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-832"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305666"><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305666"><span class="hs-identifier hs-var">new_matches</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ SrcSpan) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305670"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681305667"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-833"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XLam p -&gt; MatchGroup p (LHsExpr p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLam"><span class="hs-identifier hs-var">HsLam</span></a></span><span> </span><span class="annot"><span class="annottext">XLam GhcTc
</span><a href="#local-6989586621681305668"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305666"><span class="hs-identifier hs-var">new_matches</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-834"></span><span>
</span><span id="line-835"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305665"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305665"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLamCase"><span class="hs-identifier hs-type">HsLamCase</span></a></span><span> </span><span id="local-6989586621681305663"><span class="annot"><span class="annottext">XLamCase GhcTc
</span><a href="#local-6989586621681305663"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305662"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681305662"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-836"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305661"><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305661"><span class="hs-identifier hs-var">new_matches</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ SrcSpan) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305665"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681305662"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-837"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XLamCase p -&gt; MatchGroup p (LHsExpr p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLamCase"><span class="hs-identifier hs-var">HsLamCase</span></a></span><span> </span><span class="annot"><span class="annottext">XLamCase GhcTc
</span><a href="#local-6989586621681305663"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305661"><span class="hs-identifier hs-var">new_matches</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-838"></span><span>
</span><span id="line-839"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305660"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305660"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-type">HsApp</span></a></span><span> </span><span id="local-6989586621681305659"><span class="annot"><span class="annottext">XApp GhcTc
</span><a href="#local-6989586621681305659"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305658"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305658"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681305657"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305657"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-840"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305656"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305656"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305660"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305658"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-841"></span><span>       </span><span id="local-6989586621681305655"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305655"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305660"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305657"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-842"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-var">HsApp</span></a></span><span> </span><span class="annot"><span class="annottext">XApp GhcTc
</span><a href="#local-6989586621681305659"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305656"><span class="hs-identifier hs-var">new_e1</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305655"><span class="hs-identifier hs-var">new_e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-843"></span><span>
</span><span id="line-844"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305654"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305654"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsAppType"><span class="hs-identifier hs-type">HsAppType</span></a></span><span> </span><span id="local-6989586621681305652"><span class="annot"><span class="annottext">XAppTypeE GhcTc
</span><a href="#local-6989586621681305652"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681305651"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305651"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681305650"><span class="annot"><span class="annottext">LHsWcType (NoGhcTc GhcTc)
</span><a href="#local-6989586621681305650"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-845"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305649"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305649"><span class="hs-identifier hs-var">new_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305654"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305651"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-846"></span><span>       </span><span id="local-6989586621681305648"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305648"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305654"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XAppTypeE GhcTc
</span><a href="#local-6989586621681305652"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-847"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XAppTypeE p -&gt; LHsExpr p -&gt; LHsWcType (NoGhcTc p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsAppType"><span class="hs-identifier hs-var">HsAppType</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305648"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305649"><span class="hs-identifier hs-var">new_e</span></a></span><span> </span><span class="annot"><span class="annottext">LHsWcType (NoGhcTc GhcTc)
</span><a href="#local-6989586621681305650"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-848"></span><span>       </span><span class="hs-comment">-- NB: the type is an HsType; can't zonk that!</span><span>
</span><span id="line-849"></span><span>
</span><span id="line-850"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681305647"><span class="annot"><span class="annottext">e :: HsExpr GhcTc
</span><a href="#local-6989586621681305647"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsRnBracketOut"><span class="hs-identifier hs-type">HsRnBracketOut</span></a></span><span> </span><span class="annot"><span class="annottext">XRnBracketOut GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsBracket (HsBracketRn GhcTc)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[PendingRnSplice' GhcTc]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-851"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkExpr: HsRnBracketOut&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305647"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-852"></span><span>
</span><span id="line-853"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305644"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305644"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsTcBracketOut"><span class="hs-identifier hs-type">HsTcBracketOut</span></a></span><span> </span><span id="local-6989586621681305642"><span class="annot"><span class="annottext">XTcBracketOut GhcTc
</span><a href="#local-6989586621681305642"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305641"><span class="annot"><span class="annottext">Maybe QuoteWrapper
</span><a href="#local-6989586621681305641"><span class="hs-identifier hs-var">wrap</span></a></span></span><span> </span><span id="local-6989586621681305640"><span class="annot"><span class="annottext">HsBracket (HsBracketRn GhcTc)
</span><a href="#local-6989586621681305640"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621681305639"><span class="annot"><span class="annottext">[PendingTcSplice' GhcTc]
</span><a href="#local-6989586621681305639"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-854"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305638"><span class="annot"><span class="annottext">Maybe QuoteWrapper
</span><a href="#local-6989586621681305638"><span class="hs-identifier hs-var">wrap'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">QuoteWrapper -&gt; IOEnv (Env TcGblEnv TcLclEnv) QuoteWrapper
</span><a href="#local-6989586621681305636"><span class="hs-identifier hs-var">zonkQuoteWrap</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe QuoteWrapper
</span><a href="#local-6989586621681305641"><span class="hs-identifier hs-var">wrap</span></a></span><span>
</span><span id="line-855"></span><span>       </span><span id="local-6989586621681305635"><span class="annot"><span class="annottext">[PendingTcSplice]
</span><a href="#local-6989586621681305635"><span class="hs-identifier hs-var">bs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; PendingTcSplice -&gt; IOEnv (Env TcGblEnv TcLclEnv) PendingTcSplice
</span><a href="#local-6989586621681305634"><span class="hs-identifier hs-var">zonk_b</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305644"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PendingTcSplice' GhcTc]
</span><a href="#local-6989586621681305639"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-856"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XTcBracketOut p
-&gt; Maybe QuoteWrapper
-&gt; HsBracket (HsBracketRn p)
-&gt; [PendingTcSplice' p]
-&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsTcBracketOut"><span class="hs-identifier hs-var">HsTcBracketOut</span></a></span><span> </span><span class="annot"><span class="annottext">XTcBracketOut GhcTc
</span><a href="#local-6989586621681305642"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe QuoteWrapper
</span><a href="#local-6989586621681305638"><span class="hs-identifier hs-var">wrap'</span></a></span><span> </span><span class="annot"><span class="annottext">HsBracket (HsBracketRn GhcTc)
</span><a href="#local-6989586621681305640"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">[PendingTcSplice]
</span><a href="#local-6989586621681305635"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-857"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-858"></span><span>    </span><span id="local-6989586621681305636"><span class="annot"><span class="annottext">zonkQuoteWrap :: QuoteWrapper -&gt; IOEnv (Env TcGblEnv TcLclEnv) QuoteWrapper
</span><a href="#local-6989586621681305636"><span class="hs-identifier hs-var hs-var">zonkQuoteWrap</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#QuoteWrapper"><span class="hs-identifier hs-type">QuoteWrapper</span></a></span><span> </span><span id="local-6989586621681305632"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305632"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span id="local-6989586621681305631"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305631"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-859"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681305630"><span class="annot"><span class="annottext">ev' :: TcTyVar
</span><a href="#local-6989586621681305630"><span class="hs-identifier hs-var hs-var">ev'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305644"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305632"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-860"></span><span>        </span><span id="local-6989586621681305629"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305629"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305644"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305631"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-861"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; Kind -&gt; QuoteWrapper
</span><a href="GHC.Tc.Types.Evidence.html#QuoteWrapper"><span class="hs-identifier hs-var">QuoteWrapper</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305630"><span class="hs-identifier hs-var">ev'</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305629"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-862"></span><span>
</span><span id="line-863"></span><span>    </span><span id="local-6989586621681305634"><span class="annot"><span class="annottext">zonk_b :: ZonkEnv
-&gt; PendingTcSplice -&gt; IOEnv (Env TcGblEnv TcLclEnv) PendingTcSplice
</span><a href="#local-6989586621681305634"><span class="hs-identifier hs-var hs-var">zonk_b</span></a></span></span><span> </span><span id="local-6989586621681305626"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305626"><span class="hs-identifier hs-var">env'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#PendingTcSplice"><span class="hs-identifier hs-type">PendingTcSplice</span></a></span><span> </span><span id="local-6989586621681305624"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681305624"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681305623"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305623"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305622"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305622"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305626"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305623"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-864"></span><span>                                           </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; LHsExpr GhcTc -&gt; PendingTcSplice
</span><a href="GHC.Hs.Expr.html#PendingTcSplice"><span class="hs-identifier hs-var">PendingTcSplice</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681305624"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305622"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-865"></span><span>
</span><span id="line-866"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305621"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305621"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsSpliceE"><span class="hs-identifier hs-type">HsSpliceE</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceE GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XSplice"><span class="hs-identifier hs-type">XSplice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsSplicedT"><span class="hs-identifier hs-type">HsSplicedT</span></a></span><span> </span><span id="local-6989586621681305617"><span class="annot"><span class="annottext">DelayedSplice
</span><a href="#local-6989586621681305617"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-867"></span><span>  </span><span class="annot"><span class="annottext">DelayedSplice -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Gen.Splice.html#runTopSplice"><span class="hs-identifier hs-var">runTopSplice</span></a></span><span> </span><span class="annot"><span class="annottext">DelayedSplice
</span><a href="#local-6989586621681305617"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305621"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-868"></span><span>
</span><span id="line-869"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681305616"><span class="annot"><span class="annottext">e :: HsExpr GhcTc
</span><a href="#local-6989586621681305616"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsSpliceE"><span class="hs-identifier hs-type">HsSpliceE</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceE GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsSplice GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkExpr: HsSpliceE&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305616"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-870"></span><span>
</span><span id="line-871"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305615"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305615"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-type">OpApp</span></a></span><span> </span><span id="local-6989586621681305613"><span class="annot"><span class="annottext">XOpApp GhcTc
</span><a href="#local-6989586621681305613"><span class="hs-identifier hs-var">fixity</span></a></span></span><span> </span><span id="local-6989586621681305612"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305612"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681305611"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305611"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621681305610"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305610"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-872"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305609"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305609"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305615"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305612"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-873"></span><span>       </span><span id="local-6989586621681305608"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305608"><span class="hs-identifier hs-var">new_op</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305615"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305611"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-874"></span><span>       </span><span id="local-6989586621681305607"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305607"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305615"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305610"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-875"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XOpApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-var">OpApp</span></a></span><span> </span><span class="annot"><span class="annottext">XOpApp GhcTc
</span><a href="#local-6989586621681305613"><span class="hs-identifier hs-var">fixity</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305609"><span class="hs-identifier hs-var">new_e1</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305608"><span class="hs-identifier hs-var">new_op</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305607"><span class="hs-identifier hs-var">new_e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-876"></span><span>
</span><span id="line-877"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305606"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305606"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#NegApp"><span class="hs-identifier hs-type">NegApp</span></a></span><span> </span><span id="local-6989586621681305604"><span class="annot"><span class="annottext">XNegApp GhcTc
</span><a href="#local-6989586621681305604"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305603"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305603"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681305602"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305602"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-878"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305601"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305601"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305600"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305600"><span class="hs-identifier hs-var">new_op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305606"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305602"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-879"></span><span>       </span><span id="local-6989586621681305598"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305598"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305601"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305603"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-880"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XNegApp p -&gt; LHsExpr p -&gt; SyntaxExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#NegApp"><span class="hs-identifier hs-var">NegApp</span></a></span><span> </span><span class="annot"><span class="annottext">XNegApp GhcTc
</span><a href="#local-6989586621681305604"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305598"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305600"><span class="hs-identifier hs-var">new_op</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-881"></span><span>
</span><span id="line-882"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305597"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305597"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPar"><span class="hs-identifier hs-type">HsPar</span></a></span><span> </span><span id="local-6989586621681305595"><span class="annot"><span class="annottext">XPar GhcTc
</span><a href="#local-6989586621681305595"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305594"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305594"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-883"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305593"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305593"><span class="hs-identifier hs-var">new_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305597"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305594"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-884"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XPar p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsPar"><span class="hs-identifier hs-var">HsPar</span></a></span><span> </span><span class="annot"><span class="annottext">XPar GhcTc
</span><a href="#local-6989586621681305595"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305593"><span class="hs-identifier hs-var">new_e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-885"></span><span>
</span><span id="line-886"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305592"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305592"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SectionL"><span class="hs-identifier hs-type">SectionL</span></a></span><span> </span><span id="local-6989586621681305590"><span class="annot"><span class="annottext">XSectionL GhcTc
</span><a href="#local-6989586621681305590"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305589"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305589"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681305588"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305588"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-887"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305587"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305587"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305592"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305589"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-888"></span><span>       </span><span id="local-6989586621681305586"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305586"><span class="hs-identifier hs-var">new_op</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305592"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305588"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-889"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XSectionL p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#SectionL"><span class="hs-identifier hs-var">SectionL</span></a></span><span> </span><span class="annot"><span class="annottext">XSectionL GhcTc
</span><a href="#local-6989586621681305590"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305587"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305586"><span class="hs-identifier hs-var">new_op</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-890"></span><span>
</span><span id="line-891"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305585"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305585"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SectionR"><span class="hs-identifier hs-type">SectionR</span></a></span><span> </span><span id="local-6989586621681305583"><span class="annot"><span class="annottext">XSectionR GhcTc
</span><a href="#local-6989586621681305583"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305582"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305582"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621681305581"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305581"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-892"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305580"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305580"><span class="hs-identifier hs-var">new_op</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305585"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305582"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-893"></span><span>       </span><span id="local-6989586621681305579"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305579"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305585"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305581"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-894"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XSectionR p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#SectionR"><span class="hs-identifier hs-var">SectionR</span></a></span><span> </span><span class="annot"><span class="annottext">XSectionR GhcTc
</span><a href="#local-6989586621681305583"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305580"><span class="hs-identifier hs-var">new_op</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305579"><span class="hs-identifier hs-var">new_expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-895"></span><span>
</span><span id="line-896"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305578"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305578"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitTuple"><span class="hs-identifier hs-type">ExplicitTuple</span></a></span><span> </span><span id="local-6989586621681305576"><span class="annot"><span class="annottext">XExplicitTuple GhcTc
</span><a href="#local-6989586621681305576"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305575"><span class="annot"><span class="annottext">[HsTupArg GhcTc]
</span><a href="#local-6989586621681305575"><span class="hs-identifier hs-var">tup_args</span></a></span></span><span> </span><span id="local-6989586621681305574"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621681305574"><span class="hs-identifier hs-var">boxed</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-897"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305573"><span class="annot"><span class="annottext">[HsTupArg GhcTc]
</span><a href="#local-6989586621681305573"><span class="hs-identifier hs-var">new_tup_args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">HsTupArg GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (HsTupArg GhcTc)
</span><a href="#local-6989586621681305572"><span class="hs-identifier hs-var">zonk_tup_arg</span></a></span><span> </span><span class="annot"><span class="annottext">[HsTupArg GhcTc]
</span><a href="#local-6989586621681305575"><span class="hs-identifier hs-var">tup_args</span></a></span><span>
</span><span id="line-898"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XExplicitTuple p -&gt; [HsTupArg p] -&gt; Boxity -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ExplicitTuple"><span class="hs-identifier hs-var">ExplicitTuple</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitTuple GhcTc
</span><a href="#local-6989586621681305576"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[HsTupArg GhcTc]
</span><a href="#local-6989586621681305573"><span class="hs-identifier hs-var">new_tup_args</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621681305574"><span class="hs-identifier hs-var">boxed</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-899"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-900"></span><span>    </span><span id="local-6989586621681305572"><span class="annot"><span class="annottext">zonk_tup_arg :: HsTupArg GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (HsTupArg GhcTc)
</span><a href="#local-6989586621681305572"><span class="hs-identifier hs-var hs-var">zonk_tup_arg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Present"><span class="hs-identifier hs-type">Present</span></a></span><span> </span><span id="local-6989586621681305570"><span class="annot"><span class="annottext">XPresent GhcTc
</span><a href="#local-6989586621681305570"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305569"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305569"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305568"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305568"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305578"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305569"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-901"></span><span>                                    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XPresent id -&gt; LHsExpr id -&gt; HsTupArg id
</span><a href="Language.Haskell.Syntax.Expr.html#Present"><span class="hs-identifier hs-var">Present</span></a></span><span> </span><span class="annot"><span class="annottext">XPresent GhcTc
</span><a href="#local-6989586621681305570"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305568"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-902"></span><span>    </span><span class="annot"><a href="#local-6989586621681305572"><span class="hs-identifier hs-var">zonk_tup_arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Missing"><span class="hs-identifier hs-type">Missing</span></a></span><span> </span><span id="local-6989586621681305566"><span class="annot"><span class="annottext">XMissing GhcTc
</span><a href="#local-6989586621681305566"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305565"><span class="annot"><span class="annottext">Scaled Kind
</span><a href="#local-6989586621681305565"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Scaled Kind -&gt; TcM (Scaled Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-var">zonkScaledTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305578"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XMissing GhcTc
</span><a href="#local-6989586621681305566"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-903"></span><span>                                  </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XMissing id -&gt; HsTupArg id
</span><a href="Language.Haskell.Syntax.Expr.html#Missing"><span class="hs-identifier hs-var">Missing</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Kind
</span><a href="#local-6989586621681305565"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-904"></span><span>
</span><span id="line-905"></span><span>
</span><span id="line-906"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305564"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305564"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitSum"><span class="hs-identifier hs-type">ExplicitSum</span></a></span><span> </span><span id="local-6989586621681305562"><span class="annot"><span class="annottext">XExplicitSum GhcTc
</span><a href="#local-6989586621681305562"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621681305561"><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681305561"><span class="hs-identifier hs-var">alt</span></a></span></span><span> </span><span id="local-6989586621681305560"><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681305560"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span id="local-6989586621681305559"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305559"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-907"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305558"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681305558"><span class="hs-identifier hs-var">new_args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305564"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">XExplicitSum GhcTc
</span><a href="#local-6989586621681305562"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-908"></span><span>       </span><span id="local-6989586621681305557"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305557"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305564"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305559"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-909"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XExplicitSum p -&gt; ConTag -&gt; ConTag -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ExplicitSum"><span class="hs-identifier hs-var">ExplicitSum</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681305558"><span class="hs-identifier hs-var">new_args</span></a></span><span> </span><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681305561"><span class="hs-identifier hs-var">alt</span></a></span><span> </span><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681305560"><span class="hs-identifier hs-var">arity</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305557"><span class="hs-identifier hs-var">new_expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-910"></span><span>
</span><span id="line-911"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305556"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305556"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCase"><span class="hs-identifier hs-type">HsCase</span></a></span><span> </span><span id="local-6989586621681305554"><span class="annot"><span class="annottext">XCase GhcTc
</span><a href="#local-6989586621681305554"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305553"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305553"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681305552"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681305552"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-912"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305551"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305551"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305556"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305553"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-913"></span><span>       </span><span id="local-6989586621681305550"><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305550"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ SrcSpan) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305556"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681305552"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-914"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XCase p -&gt; LHsExpr p -&gt; MatchGroup p (LHsExpr p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsCase"><span class="hs-identifier hs-var">HsCase</span></a></span><span> </span><span class="annot"><span class="annottext">XCase GhcTc
</span><a href="#local-6989586621681305554"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305551"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305550"><span class="hs-identifier hs-var">new_ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-915"></span><span>
</span><span id="line-916"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305549"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305549"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsIf"><span class="hs-identifier hs-type">HsIf</span></a></span><span> </span><span id="local-6989586621681305547"><span class="annot"><span class="annottext">XIf GhcTc
</span><a href="#local-6989586621681305547"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305546"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305546"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681305545"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305545"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span id="local-6989586621681305544"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305544"><span class="hs-identifier hs-var">e3</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-917"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305543"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305543"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305549"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305546"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-918"></span><span>       </span><span id="local-6989586621681305542"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305542"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305549"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305545"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-919"></span><span>       </span><span id="local-6989586621681305541"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305541"><span class="hs-identifier hs-var">new_e3</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305549"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305544"><span class="hs-identifier hs-var">e3</span></a></span><span>
</span><span id="line-920"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XIf p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsIf"><span class="hs-identifier hs-var">HsIf</span></a></span><span> </span><span class="annot"><span class="annottext">XIf GhcTc
</span><a href="#local-6989586621681305547"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305543"><span class="hs-identifier hs-var">new_e1</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305542"><span class="hs-identifier hs-var">new_e2</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305541"><span class="hs-identifier hs-var">new_e3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-921"></span><span>
</span><span id="line-922"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305540"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305540"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsMultiIf"><span class="hs-identifier hs-type">HsMultiIf</span></a></span><span> </span><span id="local-6989586621681305538"><span class="annot"><span class="annottext">XMultiIf GhcTc
</span><a href="#local-6989586621681305538"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681305537"><span class="annot"><span class="annottext">[LGRHS GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621681305537"><span class="hs-identifier hs-var">alts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-923"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305536"><span class="annot"><span class="annottext">[Located (GRHS GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305536"><span class="hs-identifier hs-var">alts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="annot"><span class="annottext">GRHS GhcTc (LocatedA (HsExpr GhcTc))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (GRHS GhcTc (LocatedA (HsExpr GhcTc)))
</span><a href="#local-6989586621681305535"><span class="hs-identifier hs-var">zonk_alt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LGRHS GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621681305537"><span class="hs-identifier hs-var">alts</span></a></span><span>
</span><span id="line-924"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305534"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305534"><span class="hs-identifier hs-var">ty'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305540"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XMultiIf GhcTc
</span><a href="#local-6989586621681305538"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-925"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. XMultiIf p -&gt; [LGRHS p (LHsExpr p)] -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsMultiIf"><span class="hs-identifier hs-var">HsMultiIf</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305534"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">[Located (GRHS GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305536"><span class="hs-identifier hs-var">alts'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-926"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681305535"><span class="annot"><span class="annottext">zonk_alt :: GRHS GhcTc (LocatedA (HsExpr GhcTc))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (GRHS GhcTc (LocatedA (HsExpr GhcTc)))
</span><a href="#local-6989586621681305535"><span class="hs-identifier hs-var hs-var">zonk_alt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span id="local-6989586621681305533"><span class="annot"><span class="annottext">XCGRHS GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305533"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305532"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681305532"><span class="hs-identifier hs-var">guard</span></a></span></span><span> </span><span id="local-6989586621681305531"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305531"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-927"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305530"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305530"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305529"><span class="annot"><span class="annottext">[GenLocated
   (Anno (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc))))
   (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305529"><span class="hs-identifier hs-var">guard'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (LocatedA (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305540"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681305532"><span class="hs-identifier hs-var">guard</span></a></span><span>
</span><span id="line-928"></span><span>               </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305528"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305528"><span class="hs-identifier hs-var">expr'</span></a></span></span><span>          </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305530"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305531"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-929"></span><span>               </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall p body.
XCGRHS p body -&gt; [GuardLStmt p] -&gt; body -&gt; GRHS p body
</span><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-var">GRHS</span></a></span><span> </span><span class="annot"><span class="annottext">XCGRHS GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305533"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (Anno (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc))))
   (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305529"><span class="hs-identifier hs-var">guard'</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305528"><span class="hs-identifier hs-var">expr'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-930"></span><span>
</span><span id="line-931"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305527"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305527"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLet"><span class="hs-identifier hs-type">HsLet</span></a></span><span> </span><span id="local-6989586621681305525"><span class="annot"><span class="annottext">XLet GhcTc
</span><a href="#local-6989586621681305525"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305524"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681305524"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621681305523"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305523"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-932"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305522"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305522"><span class="hs-identifier hs-var">new_env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305521"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681305521"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsLocalBinds GhcTc -&gt; TcM (ZonkEnv, HsLocalBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305527"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681305524"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-933"></span><span>       </span><span id="local-6989586621681305520"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305520"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305522"><span class="hs-identifier hs-var">new_env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305523"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-934"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XLet p -&gt; HsLocalBinds p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLet"><span class="hs-identifier hs-var">HsLet</span></a></span><span> </span><span class="annot"><span class="annottext">XLet GhcTc
</span><a href="#local-6989586621681305525"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681305521"><span class="hs-identifier hs-var">new_binds</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305520"><span class="hs-identifier hs-var">new_expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-935"></span><span>
</span><span id="line-936"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305519"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305519"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsDo"><span class="hs-identifier hs-type">HsDo</span></a></span><span> </span><span id="local-6989586621681305517"><span class="annot"><span class="annottext">XDo GhcTc
</span><a href="#local-6989586621681305517"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681305516"><span class="annot"><span class="annottext">HsStmtContext (HsDoRn GhcTc)
</span><a href="#local-6989586621681305516"><span class="hs-identifier hs-var">do_or_lc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681305515"><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681305515"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681305514"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305514"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-937"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305513"><span class="annot"><span class="annottext">[GenLocated
   (Anno (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc))))
   (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305513"><span class="hs-identifier hs-var">new_stmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (LocatedA (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305519"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305514"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-938"></span><span>       </span><span id="local-6989586621681305512"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305512"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305519"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XDo GhcTc
</span><a href="#local-6989586621681305517"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-939"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XDo p
-&gt; HsStmtContext (HsDoRn p) -&gt; XRec p [ExprLStmt p] -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsDo"><span class="hs-identifier hs-var">HsDo</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305512"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext (HsDoRn GhcTc)
</span><a href="#local-6989586621681305516"><span class="hs-identifier hs-var">do_or_lc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681305515"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (Anno (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc))))
   (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305513"><span class="hs-identifier hs-var">new_stmts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-940"></span><span>
</span><span id="line-941"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305511"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305511"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitList"><span class="hs-identifier hs-type">ExplicitList</span></a></span><span> </span><span id="local-6989586621681305509"><span class="annot"><span class="annottext">XExplicitList GhcTc
</span><a href="#local-6989586621681305509"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681305508"><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621681305508"><span class="hs-identifier hs-var">exprs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-942"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305507"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305507"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305511"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitList GhcTc
</span><a href="#local-6989586621681305509"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-943"></span><span>       </span><span id="local-6989586621681305506"><span class="annot"><span class="annottext">[LocatedA (HsExpr GhcTc)]
</span><a href="#local-6989586621681305506"><span class="hs-identifier hs-var">new_exprs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LHsExpr GhcTc] -&gt; TcM [LHsExpr GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExprs"><span class="hs-identifier hs-var">zonkLExprs</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305511"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621681305508"><span class="hs-identifier hs-var">exprs</span></a></span><span>
</span><span id="line-944"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XExplicitList p -&gt; [LHsExpr p] -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ExplicitList"><span class="hs-identifier hs-var">ExplicitList</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305507"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedA (HsExpr GhcTc)]
</span><a href="#local-6989586621681305506"><span class="hs-identifier hs-var">new_exprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-945"></span><span>
</span><span id="line-946"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305505"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305505"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305504"><span class="annot"><span class="annottext">expr :: HsExpr GhcTc
</span><a href="#local-6989586621681305504"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecordCon"><span class="hs-identifier hs-type">RecordCon</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rcon_ext :: forall p. HsExpr p -&gt; XRecordCon p
</span><a href="Language.Haskell.Syntax.Expr.html#rcon_ext"><span class="hs-identifier hs-var">rcon_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305501"><span class="annot"><span class="annottext">XRecordCon GhcTc
</span><a href="#local-6989586621681305501"><span class="hs-identifier hs-var">con_expr</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rcon_flds :: forall p. HsExpr p -&gt; HsRecordBinds p
</span><a href="Language.Haskell.Syntax.Expr.html#rcon_flds"><span class="hs-identifier hs-var">rcon_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305499"><span class="annot"><span class="annottext">HsRecordBinds GhcTc
</span><a href="#local-6989586621681305499"><span class="hs-identifier hs-var">rbinds</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-947"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305498"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305498"><span class="hs-identifier hs-var">new_con_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305505"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XRecordCon GhcTc
</span><a href="#local-6989586621681305501"><span class="hs-identifier hs-var">con_expr</span></a></span><span>
</span><span id="line-948"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305497"><span class="annot"><span class="annottext">HsRecFields GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305497"><span class="hs-identifier hs-var">new_rbinds</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsRecordBinds GhcTc -&gt; TcM (HsRecordBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRecFields"><span class="hs-identifier hs-var">zonkRecFields</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305505"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecordBinds GhcTc
</span><a href="#local-6989586621681305499"><span class="hs-identifier hs-var">rbinds</span></a></span><span>
</span><span id="line-949"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305504"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rcon_ext :: XRecordCon GhcTc
</span><a href="Language.Haskell.Syntax.Expr.html#rcon_ext"><span class="hs-identifier hs-var">rcon_ext</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305498"><span class="hs-identifier hs-var">new_con_expr</span></a></span><span>
</span><span id="line-950"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rcon_flds :: HsRecordBinds GhcTc
</span><a href="Language.Haskell.Syntax.Expr.html#rcon_flds"><span class="hs-identifier hs-var">rcon_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsRecFields GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305497"><span class="hs-identifier hs-var">new_rbinds</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-951"></span><span>
</span><span id="line-952"></span><span class="hs-comment">-- Record updates via dot syntax are replaced by desugared expressions</span><span>
</span><span id="line-953"></span><span class="hs-comment">-- in the renamer. See Note [Rebindable Syntax and HsExpansion]. This</span><span>
</span><span id="line-954"></span><span class="hs-comment">-- is why we match on 'rupd_flds = Left rbinds' here and panic otherwise.</span><span>
</span><span id="line-955"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305495"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305495"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecordUpd"><span class="hs-identifier hs-type">RecordUpd</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rupd_flds :: forall p. HsExpr p -&gt; Either [LHsRecUpdField p] [LHsRecUpdProj p]
</span><a href="Language.Haskell.Syntax.Expr.html#rupd_flds"><span class="hs-identifier hs-var">rupd_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621681305492"><span class="annot"><span class="annottext">[LHsRecUpdField GhcTc]
</span><a href="#local-6989586621681305492"><span class="hs-identifier hs-var">rbinds</span></a></span></span><span>
</span><span id="line-956"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_expr :: forall p. HsExpr p -&gt; LHsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#rupd_expr"><span class="hs-identifier hs-var">rupd_expr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305490"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305490"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-957"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_ext :: forall p. HsExpr p -&gt; XRecordUpd p
</span><a href="Language.Haskell.Syntax.Expr.html#rupd_ext"><span class="hs-identifier hs-var">rupd_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#RecordUpdTc"><span class="hs-identifier hs-type">RecordUpdTc</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-958"></span><span>                                       </span><span class="annot"><span class="annottext">rupd_cons :: RecordUpdTc -&gt; [ConLike]
</span><a href="GHC.Hs.Expr.html#rupd_cons"><span class="hs-identifier hs-var">rupd_cons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305486"><span class="annot"><span class="annottext">[ConLike]
</span><a href="#local-6989586621681305486"><span class="hs-identifier hs-var">cons</span></a></span></span><span>
</span><span id="line-959"></span><span>                                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_in_tys :: RecordUpdTc -&gt; [Kind]
</span><a href="GHC.Hs.Expr.html#rupd_in_tys"><span class="hs-identifier hs-var">rupd_in_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305484"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681305484"><span class="hs-identifier hs-var">in_tys</span></a></span></span><span>
</span><span id="line-960"></span><span>                                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_out_tys :: RecordUpdTc -&gt; [Kind]
</span><a href="GHC.Hs.Expr.html#rupd_out_tys"><span class="hs-identifier hs-var">rupd_out_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305482"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681305482"><span class="hs-identifier hs-var">out_tys</span></a></span></span><span>
</span><span id="line-961"></span><span>                                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_wrap :: RecordUpdTc -&gt; HsWrapper
</span><a href="GHC.Hs.Expr.html#rupd_wrap"><span class="hs-identifier hs-var">rupd_wrap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305480"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305480"><span class="hs-identifier hs-var">req_wrap</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-962"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305479"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305479"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305495"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305490"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-963"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305478"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681305478"><span class="hs-identifier hs-var">new_in_tys</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305495"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681305484"><span class="hs-identifier hs-var">in_tys</span></a></span><span>
</span><span id="line-964"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305477"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681305477"><span class="hs-identifier hs-var">new_out_tys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305495"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681305482"><span class="hs-identifier hs-var">out_tys</span></a></span><span>
</span><span id="line-965"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305476"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField' (AmbiguousFieldOcc GhcTc) (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305476"><span class="hs-identifier hs-var">new_rbinds</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LHsRecUpdField GhcTc] -&gt; TcM [LHsRecUpdField GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRecUpdFields"><span class="hs-identifier hs-var">zonkRecUpdFields</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305495"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsRecUpdField GhcTc]
</span><a href="#local-6989586621681305492"><span class="hs-identifier hs-var">rbinds</span></a></span><span>
</span><span id="line-966"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305474"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305474"><span class="hs-identifier hs-var">new_recwrap</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305495"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305480"><span class="hs-identifier hs-var">req_wrap</span></a></span><span>
</span><span id="line-967"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-968"></span><span>            </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecordUpd"><span class="hs-identifier hs-type">RecordUpd</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-969"></span><span>                  </span><span class="annot"><span class="annottext">rupd_expr :: LHsExpr GhcTc
</span><a href="Language.Haskell.Syntax.Expr.html#rupd_expr"><span class="hs-identifier hs-var">rupd_expr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305479"><span class="hs-identifier hs-var">new_expr</span></a></span><span>
</span><span id="line-970"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_flds :: Either [LHsRecUpdField GhcTc] [LHsRecUpdProj GhcTc]
</span><a href="Language.Haskell.Syntax.Expr.html#rupd_flds"><span class="hs-identifier hs-var">rupd_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField' (AmbiguousFieldOcc GhcTc) (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305476"><span class="hs-identifier hs-var">new_rbinds</span></a></span><span>
</span><span id="line-971"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_ext :: XRecordUpd GhcTc
</span><a href="Language.Haskell.Syntax.Expr.html#rupd_ext"><span class="hs-identifier hs-var">rupd_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#RecordUpdTc"><span class="hs-identifier hs-type">RecordUpdTc</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-972"></span><span>                               </span><span class="annot"><span class="annottext">rupd_cons :: [ConLike]
</span><a href="GHC.Hs.Expr.html#rupd_cons"><span class="hs-identifier hs-var">rupd_cons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ConLike]
</span><a href="#local-6989586621681305486"><span class="hs-identifier hs-var">cons</span></a></span><span>
</span><span id="line-973"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_in_tys :: [Kind]
</span><a href="GHC.Hs.Expr.html#rupd_in_tys"><span class="hs-identifier hs-var">rupd_in_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681305478"><span class="hs-identifier hs-var">new_in_tys</span></a></span><span>
</span><span id="line-974"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_out_tys :: [Kind]
</span><a href="GHC.Hs.Expr.html#rupd_out_tys"><span class="hs-identifier hs-var">rupd_out_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681305477"><span class="hs-identifier hs-var">new_out_tys</span></a></span><span>
</span><span id="line-975"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_wrap :: HsWrapper
</span><a href="GHC.Hs.Expr.html#rupd_wrap"><span class="hs-identifier hs-var">rupd_wrap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305474"><span class="hs-identifier hs-var">new_recwrap</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-976"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecordUpd"><span class="hs-identifier hs-type">RecordUpd</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.Tc.Utils.Zonk: zonkExpr: The impossible happened!&quot;</span></span><span>
</span><span id="line-977"></span><span>
</span><span id="line-978"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305473"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305473"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprWithTySig"><span class="hs-identifier hs-type">ExprWithTySig</span></a></span><span> </span><span class="annot"><span class="annottext">XExprWithTySig GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681305471"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305471"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681305470"><span class="annot"><span class="annottext">LHsSigWcType (NoGhcTc GhcTc)
</span><a href="#local-6989586621681305470"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-979"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305469"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305469"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305473"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305471"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-980"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XExprWithTySig p
-&gt; LHsExpr p -&gt; LHsSigWcType (NoGhcTc p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ExprWithTySig"><span class="hs-identifier hs-var">ExprWithTySig</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305469"><span class="hs-identifier hs-var">e'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigWcType (NoGhcTc GhcTc)
</span><a href="#local-6989586621681305470"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-981"></span><span>
</span><span id="line-982"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305468"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305468"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ArithSeq"><span class="hs-identifier hs-type">ArithSeq</span></a></span><span> </span><span id="local-6989586621681305466"><span class="annot"><span class="annottext">XArithSeq GhcTc
</span><a href="#local-6989586621681305466"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681305465"><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="#local-6989586621681305465"><span class="hs-identifier hs-var">wit</span></a></span></span><span> </span><span id="local-6989586621681305464"><span class="annot"><span class="annottext">ArithSeqInfo GhcTc
</span><a href="#local-6989586621681305464"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-983"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305463"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305463"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305462"><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681305462"><span class="hs-identifier hs-var">new_wit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; Maybe SyntaxExprTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
</span><a href="#local-6989586621681305461"><span class="hs-identifier hs-var">zonkWit</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305468"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="#local-6989586621681305465"><span class="hs-identifier hs-var">wit</span></a></span><span>
</span><span id="line-984"></span><span>       </span><span id="local-6989586621681305460"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305460"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305468"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XArithSeq GhcTc
</span><a href="#local-6989586621681305466"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-985"></span><span>       </span><span id="local-6989586621681305459"><span class="annot"><span class="annottext">ArithSeqInfo GhcTc
</span><a href="#local-6989586621681305459"><span class="hs-identifier hs-var">new_info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; ArithSeqInfo GhcTc -&gt; TcM (ArithSeqInfo GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkArithSeq"><span class="hs-identifier hs-var">zonkArithSeq</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305463"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">ArithSeqInfo GhcTc
</span><a href="#local-6989586621681305464"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-986"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XArithSeq p -&gt; Maybe (SyntaxExpr p) -&gt; ArithSeqInfo p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ArithSeq"><span class="hs-identifier hs-var">ArithSeq</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305460"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681305462"><span class="hs-identifier hs-var">new_wit</span></a></span><span> </span><span class="annot"><span class="annottext">ArithSeqInfo GhcTc
</span><a href="#local-6989586621681305459"><span class="hs-identifier hs-var">new_info</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-987"></span><span>   </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681305461"><span class="annot"><span class="annottext">zonkWit :: ZonkEnv
-&gt; Maybe SyntaxExprTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
</span><a href="#local-6989586621681305461"><span class="hs-identifier hs-var hs-var">zonkWit</span></a></span></span><span> </span><span id="local-6989586621681305454"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305454"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305454"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-988"></span><span>         </span><span class="annot"><a href="#local-6989586621681305461"><span class="hs-identifier hs-var">zonkWit</span></a></span><span> </span><span id="local-6989586621681305453"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305453"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681305452"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305452"><span class="hs-identifier hs-var">fln</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><a href="../../base-4.16.3.0/src/Control-Arrow.html#second"><span class="hs-identifier hs-var">second</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305453"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305452"><span class="hs-identifier hs-var">fln</span></a></span><span>
</span><span id="line-989"></span><span>
</span><span id="line-990"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305451"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305451"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPragE"><span class="hs-identifier hs-type">HsPragE</span></a></span><span> </span><span id="local-6989586621681305449"><span class="annot"><span class="annottext">XPragE GhcTc
</span><a href="#local-6989586621681305449"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305448"><span class="annot"><span class="annottext">HsPragE GhcTc
</span><a href="#local-6989586621681305448"><span class="hs-identifier hs-var">prag</span></a></span></span><span> </span><span id="local-6989586621681305447"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305447"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-991"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305446"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305446"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305451"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305447"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-992"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XPragE p -&gt; HsPragE p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsPragE"><span class="hs-identifier hs-var">HsPragE</span></a></span><span> </span><span class="annot"><span class="annottext">XPragE GhcTc
</span><a href="#local-6989586621681305449"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsPragE GhcTc
</span><a href="#local-6989586621681305448"><span class="hs-identifier hs-var">prag</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305446"><span class="hs-identifier hs-var">new_expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-993"></span><span>
</span><span id="line-994"></span><span class="hs-comment">-- arrow notation extensions</span><span>
</span><span id="line-995"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305445"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305445"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsProc"><span class="hs-identifier hs-type">HsProc</span></a></span><span> </span><span id="local-6989586621681305443"><span class="annot"><span class="annottext">XProc GhcTc
</span><a href="#local-6989586621681305443"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305442"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681305442"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681305441"><span class="annot"><span class="annottext">LHsCmdTop GhcTc
</span><a href="#local-6989586621681305441"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-996"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305440"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305440"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305439"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681305439"><span class="hs-identifier hs-var">new_pat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305445"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681305442"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-997"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305438"><span class="annot"><span class="annottext">GenLocated SrcSpan (HsCmdTop GhcTc)
</span><a href="#local-6989586621681305438"><span class="hs-identifier hs-var">new_body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmdTop GhcTc -&gt; TcM (LHsCmdTop GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCmdTop"><span class="hs-identifier hs-var">zonkCmdTop</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305440"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcTc
</span><a href="#local-6989586621681305441"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-998"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XProc p -&gt; LPat p -&gt; LHsCmdTop p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsProc"><span class="hs-identifier hs-var">HsProc</span></a></span><span> </span><span class="annot"><span class="annottext">XProc GhcTc
</span><a href="#local-6989586621681305443"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681305439"><span class="hs-identifier hs-var">new_pat</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (HsCmdTop GhcTc)
</span><a href="#local-6989586621681305438"><span class="hs-identifier hs-var">new_body</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-999"></span><span>
</span><span id="line-1000"></span><span class="hs-comment">-- StaticPointers extension</span><span>
</span><span id="line-1001"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305436"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305436"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStatic"><span class="hs-identifier hs-type">HsStatic</span></a></span><span> </span><span id="local-6989586621681305434"><span class="annot"><span class="annottext">XStatic GhcTc
</span><a href="#local-6989586621681305434"><span class="hs-identifier hs-var">fvs</span></a></span></span><span> </span><span id="local-6989586621681305433"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305433"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1002"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p. XStatic p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsStatic"><span class="hs-identifier hs-var">HsStatic</span></a></span><span> </span><span class="annot"><span class="annottext">XStatic GhcTc
</span><a href="#local-6989586621681305434"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305436"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305433"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1003"></span><span>
</span><span id="line-1004"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305432"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305432"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-type">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#WrapExpr"><span class="hs-identifier hs-type">WrapExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsWrap"><span class="hs-identifier hs-type">HsWrap</span></a></span><span> </span><span id="local-6989586621681305428"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305428"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span> </span><span id="local-6989586621681305427"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305427"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1005"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305426"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305426"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305425"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305425"><span class="hs-identifier hs-var">new_co_fn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305432"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305428"><span class="hs-identifier hs-var">co_fn</span></a></span><span>
</span><span id="line-1006"></span><span>       </span><span id="local-6989586621681305424"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305424"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305426"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305427"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1007"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XXExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-var">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsWrap HsExpr -&gt; XXExprGhcTc
</span><a href="GHC.Hs.Expr.html#WrapExpr"><span class="hs-identifier hs-var">WrapExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (hs_syn :: * -&gt; *).
HsWrapper -&gt; hs_syn GhcTc -&gt; HsWrap hs_syn
</span><a href="GHC.Hs.Expr.html#HsWrap"><span class="hs-identifier hs-var">HsWrap</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305425"><span class="hs-identifier hs-var">new_co_fn</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305424"><span class="hs-identifier hs-var">new_expr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1008"></span><span>
</span><span id="line-1009"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681305423"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305423"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-type">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ExpansionExpr"><span class="hs-identifier hs-type">ExpansionExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsExpanded"><span class="hs-identifier hs-type">HsExpanded</span></a></span><span> </span><span id="local-6989586621681305420"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681305420"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681305419"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305419"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1010"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p. XXExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-var">XExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpansion (HsExpr GhcRn) (HsExpr GhcTc) -&gt; XXExprGhcTc
</span><a href="GHC.Hs.Expr.html#ExpansionExpr"><span class="hs-identifier hs-var">ExpansionExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; HsExpansion a b
</span><a href="GHC.Hs.Expr.html#HsExpanded"><span class="hs-identifier hs-var">HsExpanded</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681305420"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305423"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305419"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-1011"></span><span>
</span><span id="line-1012"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681305417"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305417"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkExpr&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305417"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1013"></span><span>
</span><span id="line-1014"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1015"></span><span class="hs-comment">{-
Note [Skolems in zonkSyntaxExpr]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider rebindable syntax with something like

  (&gt;&gt;=) :: (forall x. blah) -&gt; (forall y. blah') -&gt; blah''

The x and y become skolems that are in scope when type-checking the
arguments to the bind. This means that we must extend the ZonkEnv with
these skolems when zonking the arguments to the bind. But the skolems
are different between the two arguments, and so we should theoretically
carry around different environments to use for the different arguments.

However, this becomes a logistical nightmare, especially in dealing with
the more exotic Stmt forms. So, we simplify by making the critical
assumption that the uniques of the skolems are different. (This assumption
is justified by the use of newUnique in GHC.Tc.Utils.TcMType.instSkolTyCoVarX.)
Now, we can safely just extend one environment.
-}</span><span>
</span><span id="line-1034"></span><span>
</span><span id="line-1035"></span><span class="hs-comment">-- See Note [Skolems in zonkSyntaxExpr]</span><span>
</span><span id="line-1036"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-type">zonkSyntaxExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-1037"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1038"></span><span id="zonkSyntaxExpr"><span class="annot"><span class="annottext">zonkSyntaxExpr :: ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var hs-var">zonkSyntaxExpr</span></a></span></span><span> </span><span id="local-6989586621681305416"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305416"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#SyntaxExprTc"><span class="hs-identifier hs-type">SyntaxExprTc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">syn_expr :: SyntaxExprTc -&gt; HsExpr GhcTc
</span><a href="GHC.Hs.Expr.html#syn_expr"><span class="hs-identifier hs-var">syn_expr</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305413"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305413"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-1039"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">syn_arg_wraps :: SyntaxExprTc -&gt; [HsWrapper]
</span><a href="GHC.Hs.Expr.html#syn_arg_wraps"><span class="hs-identifier hs-var">syn_arg_wraps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305411"><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621681305411"><span class="hs-identifier hs-var">arg_wraps</span></a></span></span><span>
</span><span id="line-1040"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">syn_res_wrap :: SyntaxExprTc -&gt; HsWrapper
</span><a href="GHC.Hs.Expr.html#syn_res_wrap"><span class="hs-identifier hs-var">syn_res_wrap</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305409"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305409"><span class="hs-identifier hs-var">res_wrap</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1041"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305408"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305408"><span class="hs-identifier hs-var">env0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305407"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305407"><span class="hs-identifier hs-var">res_wrap'</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305416"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305409"><span class="hs-identifier hs-var">res_wrap</span></a></span><span>
</span><span id="line-1042"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305406"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305406"><span class="hs-identifier hs-var">expr'</span></a></span></span><span>              </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305408"><span class="hs-identifier hs-var">env0</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305413"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1043"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305405"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305405"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305404"><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621681305404"><span class="hs-identifier hs-var">arg_wraps'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) acc x y.
Monad m =&gt;
(acc -&gt; x -&gt; m (acc, y)) -&gt; acc -&gt; [x] -&gt; m (acc, [y])
</span><a href="GHC.Utils.Monad.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305408"><span class="hs-identifier hs-var">env0</span></a></span><span> </span><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621681305411"><span class="hs-identifier hs-var">arg_wraps</span></a></span><span>
</span><span id="line-1044"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305405"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#SyntaxExprTc"><span class="hs-identifier hs-type">SyntaxExprTc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">syn_expr :: HsExpr GhcTc
</span><a href="GHC.Hs.Expr.html#syn_expr"><span class="hs-identifier hs-var">syn_expr</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305406"><span class="hs-identifier hs-var">expr'</span></a></span><span>
</span><span id="line-1045"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">syn_arg_wraps :: [HsWrapper]
</span><a href="GHC.Hs.Expr.html#syn_arg_wraps"><span class="hs-identifier hs-var">syn_arg_wraps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621681305404"><span class="hs-identifier hs-var">arg_wraps'</span></a></span><span>
</span><span id="line-1046"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">syn_res_wrap :: HsWrapper
</span><a href="GHC.Hs.Expr.html#syn_res_wrap"><span class="hs-identifier hs-var">syn_res_wrap</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305407"><span class="hs-identifier hs-var">res_wrap'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1047"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span id="local-6989586621681305403"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305403"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="GHC.Hs.Expr.html#NoSyntaxExprTc"><span class="hs-identifier hs-var">NoSyntaxExprTc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305403"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="GHC.Hs.Expr.html#NoSyntaxExprTc"><span class="hs-identifier hs-var">NoSyntaxExprTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1048"></span><span>
</span><span id="line-1049"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1050"></span><span>
</span><span id="line-1051"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-type">zonkLCmd</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1052"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-type">zonkCmd</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmd"><span class="hs-identifier hs-type">HsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmd"><span class="hs-identifier hs-type">HsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1053"></span><span>
</span><span id="line-1054"></span><span id="zonkLCmd"><span class="annot"><span class="annottext">zonkLCmd :: ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var hs-var">zonkLCmd</span></a></span></span><span>  </span><span id="local-6989586621681305399"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305399"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305398"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681305398"><span class="hs-identifier hs-var">cmd</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b ann.
(a -&gt; TcM b)
-&gt; GenLocated (SrcSpanAnn' ann) a
-&gt; TcRn (GenLocated (SrcSpanAnn' ann) b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocMA"><span class="hs-identifier hs-var">wrapLocMA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305399"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681305398"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1055"></span><span>
</span><span id="line-1056"></span><span id="zonkCmd"><span class="annot"><span class="annottext">zonkCmd :: ZonkEnv -&gt; HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var hs-var">zonkCmd</span></a></span></span><span> </span><span id="local-6989586621681305397"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305397"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XCmd"><span class="hs-identifier hs-type">XCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsWrap"><span class="hs-identifier hs-type">HsWrap</span></a></span><span> </span><span id="local-6989586621681305395"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305395"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621681305394"><span class="annot"><span class="annottext">HsCmd GhcTc
</span><a href="#local-6989586621681305394"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1057"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305393"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305393"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305392"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305392"><span class="hs-identifier hs-var">w'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305397"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305395"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-1058"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305391"><span class="annot"><span class="annottext">HsCmd GhcTc
</span><a href="#local-6989586621681305391"><span class="hs-identifier hs-var">cmd'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305393"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">HsCmd GhcTc
</span><a href="#local-6989586621681305394"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1059"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XXCmd id -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#XCmd"><span class="hs-identifier hs-var">XCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (hs_syn :: * -&gt; *).
HsWrapper -&gt; hs_syn GhcTc -&gt; HsWrap hs_syn
</span><a href="GHC.Hs.Expr.html#HsWrap"><span class="hs-identifier hs-var">HsWrap</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305392"><span class="hs-identifier hs-var">w'</span></a></span><span> </span><span class="annot"><span class="annottext">HsCmd GhcTc
</span><a href="#local-6989586621681305391"><span class="hs-identifier hs-var">cmd'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1060"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681305390"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305390"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrApp"><span class="hs-identifier hs-type">HsCmdArrApp</span></a></span><span> </span><span id="local-6989586621681305388"><span class="annot"><span class="annottext">XCmdArrApp GhcTc
</span><a href="#local-6989586621681305388"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681305387"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305387"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681305386"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305386"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span id="local-6989586621681305385"><span class="annot"><span class="annottext">HsArrAppType
</span><a href="#local-6989586621681305385"><span class="hs-identifier hs-var">ho</span></a></span></span><span> </span><span id="local-6989586621681305384"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681305384"><span class="hs-identifier hs-var">rl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1061"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305383"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305383"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305390"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305387"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1062"></span><span>       </span><span id="local-6989586621681305382"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305382"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305390"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305386"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1063"></span><span>       </span><span id="local-6989586621681305381"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305381"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305390"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdArrApp GhcTc
</span><a href="#local-6989586621681305388"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1064"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id.
XCmdArrApp id
-&gt; LHsExpr id -&gt; LHsExpr id -&gt; HsArrAppType -&gt; Bool -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrApp"><span class="hs-identifier hs-var">HsCmdArrApp</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305381"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305383"><span class="hs-identifier hs-var">new_e1</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305382"><span class="hs-identifier hs-var">new_e2</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrAppType
</span><a href="#local-6989586621681305385"><span class="hs-identifier hs-var">ho</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681305384"><span class="hs-identifier hs-var">rl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1065"></span><span>
</span><span id="line-1066"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681305380"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305380"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrForm"><span class="hs-identifier hs-type">HsCmdArrForm</span></a></span><span> </span><span id="local-6989586621681305378"><span class="annot"><span class="annottext">XCmdArrForm GhcTc
</span><a href="#local-6989586621681305378"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305377"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305377"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621681305376"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681305376"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681305375"><span class="annot"><span class="annottext">Maybe Fixity
</span><a href="#local-6989586621681305375"><span class="hs-identifier hs-var">fixity</span></a></span></span><span> </span><span id="local-6989586621681305374"><span class="annot"><span class="annottext">[LHsCmdTop GhcTc]
</span><a href="#local-6989586621681305374"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1067"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305373"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305373"><span class="hs-identifier hs-var">new_op</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305380"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305377"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-1068"></span><span>       </span><span id="local-6989586621681305372"><span class="annot"><span class="annottext">[GenLocated SrcSpan (HsCmdTop GhcTc)]
</span><a href="#local-6989586621681305372"><span class="hs-identifier hs-var">new_args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmdTop GhcTc -&gt; TcM (LHsCmdTop GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCmdTop"><span class="hs-identifier hs-var">zonkCmdTop</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305380"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsCmdTop GhcTc]
</span><a href="#local-6989586621681305374"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1069"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id.
XCmdArrForm id
-&gt; LHsExpr id
-&gt; LexicalFixity
-&gt; Maybe Fixity
-&gt; [LHsCmdTop id]
-&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrForm"><span class="hs-identifier hs-var">HsCmdArrForm</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdArrForm GhcTc
</span><a href="#local-6989586621681305378"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305373"><span class="hs-identifier hs-var">new_op</span></a></span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681305376"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Fixity
</span><a href="#local-6989586621681305375"><span class="hs-identifier hs-var">fixity</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (HsCmdTop GhcTc)]
</span><a href="#local-6989586621681305372"><span class="hs-identifier hs-var">new_args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1070"></span><span>
</span><span id="line-1071"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681305371"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305371"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdApp"><span class="hs-identifier hs-type">HsCmdApp</span></a></span><span> </span><span id="local-6989586621681305369"><span class="annot"><span class="annottext">XCmdApp GhcTc
</span><a href="#local-6989586621681305369"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305368"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681305368"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621681305367"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305367"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1072"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305366"><span class="annot"><span class="annottext">LocatedA (HsCmd GhcTc)
</span><a href="#local-6989586621681305366"><span class="hs-identifier hs-var">new_c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305371"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681305368"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1073"></span><span>       </span><span id="local-6989586621681305365"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305365"><span class="hs-identifier hs-var">new_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305371"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305367"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1074"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XCmdApp id -&gt; LHsCmd id -&gt; LHsExpr id -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdApp"><span class="hs-identifier hs-var">HsCmdApp</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdApp GhcTc
</span><a href="#local-6989586621681305369"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsCmd GhcTc)
</span><a href="#local-6989586621681305366"><span class="hs-identifier hs-var">new_c</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305365"><span class="hs-identifier hs-var">new_e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1075"></span><span>
</span><span id="line-1076"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681305364"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305364"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLam"><span class="hs-identifier hs-type">HsCmdLam</span></a></span><span> </span><span id="local-6989586621681305362"><span class="annot"><span class="annottext">XCmdLam GhcTc
</span><a href="#local-6989586621681305362"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305361"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681305361"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1077"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305360"><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsCmd GhcTc))
</span><a href="#local-6989586621681305360"><span class="hs-identifier hs-var">new_matches</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ SrcSpan) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305364"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681305361"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-1078"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XCmdLam id -&gt; MatchGroup id (LHsCmd id) -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdLam"><span class="hs-identifier hs-var">HsCmdLam</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdLam GhcTc
</span><a href="#local-6989586621681305362"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsCmd GhcTc))
</span><a href="#local-6989586621681305360"><span class="hs-identifier hs-var">new_matches</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1079"></span><span>
</span><span id="line-1080"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681305359"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305359"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdPar"><span class="hs-identifier hs-type">HsCmdPar</span></a></span><span> </span><span id="local-6989586621681305357"><span class="annot"><span class="annottext">XCmdPar GhcTc
</span><a href="#local-6989586621681305357"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305356"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681305356"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1081"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305355"><span class="annot"><span class="annottext">LocatedA (HsCmd GhcTc)
</span><a href="#local-6989586621681305355"><span class="hs-identifier hs-var">new_c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305359"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681305356"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1082"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XCmdPar id -&gt; LHsCmd id -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdPar"><span class="hs-identifier hs-var">HsCmdPar</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdPar GhcTc
</span><a href="#local-6989586621681305357"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsCmd GhcTc)
</span><a href="#local-6989586621681305355"><span class="hs-identifier hs-var">new_c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1083"></span><span>
</span><span id="line-1084"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681305354"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305354"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdCase"><span class="hs-identifier hs-type">HsCmdCase</span></a></span><span> </span><span id="local-6989586621681305352"><span class="annot"><span class="annottext">XCmdCase GhcTc
</span><a href="#local-6989586621681305352"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305351"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305351"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681305350"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681305350"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1085"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305349"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305349"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305354"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305351"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1086"></span><span>       </span><span id="local-6989586621681305348"><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsCmd GhcTc))
</span><a href="#local-6989586621681305348"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ SrcSpan) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305354"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681305350"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-1087"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id.
XCmdCase id -&gt; LHsExpr id -&gt; MatchGroup id (LHsCmd id) -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdCase"><span class="hs-identifier hs-var">HsCmdCase</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdCase GhcTc
</span><a href="#local-6989586621681305352"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305349"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsCmd GhcTc))
</span><a href="#local-6989586621681305348"><span class="hs-identifier hs-var">new_ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1088"></span><span>
</span><span id="line-1089"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681305347"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305347"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLamCase"><span class="hs-identifier hs-type">HsCmdLamCase</span></a></span><span> </span><span id="local-6989586621681305345"><span class="annot"><span class="annottext">XCmdLamCase GhcTc
</span><a href="#local-6989586621681305345"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305344"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681305344"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1090"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305343"><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsCmd GhcTc))
</span><a href="#local-6989586621681305343"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ SrcSpan) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305347"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681305344"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-1091"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XCmdLamCase id -&gt; MatchGroup id (LHsCmd id) -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdLamCase"><span class="hs-identifier hs-var">HsCmdLamCase</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdLamCase GhcTc
</span><a href="#local-6989586621681305345"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LocatedA (HsCmd GhcTc))
</span><a href="#local-6989586621681305343"><span class="hs-identifier hs-var">new_ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1092"></span><span>
</span><span id="line-1093"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681305342"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305342"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdIf"><span class="hs-identifier hs-type">HsCmdIf</span></a></span><span> </span><span id="local-6989586621681305340"><span class="annot"><span class="annottext">XCmdIf GhcTc
</span><a href="#local-6989586621681305340"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305339"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305339"><span class="hs-identifier hs-var">eCond</span></a></span></span><span> </span><span id="local-6989586621681305338"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305338"><span class="hs-identifier hs-var">ePred</span></a></span></span><span> </span><span id="local-6989586621681305337"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681305337"><span class="hs-identifier hs-var">cThen</span></a></span></span><span> </span><span id="local-6989586621681305336"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681305336"><span class="hs-identifier hs-var">cElse</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1094"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305335"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305335"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305334"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305334"><span class="hs-identifier hs-var">new_eCond</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305342"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305339"><span class="hs-identifier hs-var">eCond</span></a></span><span>
</span><span id="line-1095"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305333"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305333"><span class="hs-identifier hs-var">new_ePred</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305335"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305338"><span class="hs-identifier hs-var">ePred</span></a></span><span>
</span><span id="line-1096"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305332"><span class="annot"><span class="annottext">LocatedA (HsCmd GhcTc)
</span><a href="#local-6989586621681305332"><span class="hs-identifier hs-var">new_cThen</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305335"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681305337"><span class="hs-identifier hs-var">cThen</span></a></span><span>
</span><span id="line-1097"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305331"><span class="annot"><span class="annottext">LocatedA (HsCmd GhcTc)
</span><a href="#local-6989586621681305331"><span class="hs-identifier hs-var">new_cElse</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305335"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681305336"><span class="hs-identifier hs-var">cElse</span></a></span><span>
</span><span id="line-1098"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id.
XCmdIf id
-&gt; SyntaxExpr id
-&gt; LHsExpr id
-&gt; LHsCmd id
-&gt; LHsCmd id
-&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdIf"><span class="hs-identifier hs-var">HsCmdIf</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdIf GhcTc
</span><a href="#local-6989586621681305340"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305334"><span class="hs-identifier hs-var">new_eCond</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305333"><span class="hs-identifier hs-var">new_ePred</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsCmd GhcTc)
</span><a href="#local-6989586621681305332"><span class="hs-identifier hs-var">new_cThen</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsCmd GhcTc)
</span><a href="#local-6989586621681305331"><span class="hs-identifier hs-var">new_cElse</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1099"></span><span>
</span><span id="line-1100"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681305330"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305330"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLet"><span class="hs-identifier hs-type">HsCmdLet</span></a></span><span> </span><span id="local-6989586621681305328"><span class="annot"><span class="annottext">XCmdLet GhcTc
</span><a href="#local-6989586621681305328"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305327"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681305327"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621681305326"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681305326"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1101"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305325"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305325"><span class="hs-identifier hs-var">new_env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305324"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681305324"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsLocalBinds GhcTc -&gt; TcM (ZonkEnv, HsLocalBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305330"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681305327"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-1102"></span><span>       </span><span id="local-6989586621681305323"><span class="annot"><span class="annottext">LocatedA (HsCmd GhcTc)
</span><a href="#local-6989586621681305323"><span class="hs-identifier hs-var">new_cmd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305325"><span class="hs-identifier hs-var">new_env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681305326"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1103"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XCmdLet id -&gt; HsLocalBinds id -&gt; LHsCmd id -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdLet"><span class="hs-identifier hs-var">HsCmdLet</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdLet GhcTc
</span><a href="#local-6989586621681305328"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681305324"><span class="hs-identifier hs-var">new_binds</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsCmd GhcTc)
</span><a href="#local-6989586621681305323"><span class="hs-identifier hs-var">new_cmd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1104"></span><span>
</span><span id="line-1105"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681305322"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305322"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdDo"><span class="hs-identifier hs-type">HsCmdDo</span></a></span><span> </span><span id="local-6989586621681305320"><span class="annot"><span class="annottext">XCmdDo GhcTc
</span><a href="#local-6989586621681305320"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681305319"><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681305319"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681305318"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsCmd GhcTc)))]
</span><a href="#local-6989586621681305318"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1106"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305317"><span class="annot"><span class="annottext">[GenLocated
   (Anno (StmtLR GhcTc GhcTc (LocatedA (HsCmd GhcTc))))
   (StmtLR GhcTc GhcTc (LocatedA (HsCmd GhcTc)))]
</span><a href="#local-6989586621681305317"><span class="hs-identifier hs-var">new_stmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (LocatedA (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305322"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsCmd GhcTc)))]
</span><a href="#local-6989586621681305318"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1107"></span><span>       </span><span id="local-6989586621681305316"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305316"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305322"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdDo GhcTc
</span><a href="#local-6989586621681305320"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1108"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XCmdDo id -&gt; XRec id [CmdLStmt id] -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdDo"><span class="hs-identifier hs-var">HsCmdDo</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305316"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681305319"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (Anno (StmtLR GhcTc GhcTc (LocatedA (HsCmd GhcTc))))
   (StmtLR GhcTc GhcTc (LocatedA (HsCmd GhcTc)))]
</span><a href="#local-6989586621681305317"><span class="hs-identifier hs-var">new_stmts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1109"></span><span>
</span><span id="line-1110"></span><span>
</span><span id="line-1111"></span><span>
</span><span id="line-1112"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmdTop"><span class="hs-identifier hs-type">zonkCmdTop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmdTop"><span class="hs-identifier hs-type">LHsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmdTop"><span class="hs-identifier hs-type">LHsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1113"></span><span id="zonkCmdTop"><span class="annot"><span class="annottext">zonkCmdTop :: ZonkEnv -&gt; LHsCmdTop GhcTc -&gt; TcM (LHsCmdTop GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCmdTop"><span class="hs-identifier hs-var hs-var">zonkCmdTop</span></a></span></span><span> </span><span id="local-6989586621681305315"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305315"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305314"><span class="annot"><span class="annottext">LHsCmdTop GhcTc
</span><a href="#local-6989586621681305314"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsCmdTop GhcTc -&gt; TcM (HsCmdTop GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_cmd_top"><span class="hs-identifier hs-var">zonk_cmd_top</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305315"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcTc
</span><a href="#local-6989586621681305314"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1114"></span><span>
</span><span id="line-1115"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_cmd_top"><span class="hs-identifier hs-type">zonk_cmd_top</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdTop"><span class="hs-identifier hs-type">HsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdTop"><span class="hs-identifier hs-type">HsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1116"></span><span id="zonk_cmd_top"><span class="annot"><span class="annottext">zonk_cmd_top :: ZonkEnv -&gt; HsCmdTop GhcTc -&gt; TcM (HsCmdTop GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_cmd_top"><span class="hs-identifier hs-var hs-var">zonk_cmd_top</span></a></span></span><span> </span><span id="local-6989586621681305312"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305312"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdTop"><span class="hs-identifier hs-type">HsCmdTop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#CmdTopTc"><span class="hs-identifier hs-type">CmdTopTc</span></a></span><span> </span><span id="local-6989586621681305309"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305309"><span class="hs-identifier hs-var">stack_tys</span></a></span></span><span> </span><span id="local-6989586621681305308"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305308"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681305307"><span class="annot"><span class="annottext">CmdSyntaxTable GhcTc
</span><a href="#local-6989586621681305307"><span class="hs-identifier hs-var">ids</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681305306"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681305306"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1117"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305305"><span class="annot"><span class="annottext">LocatedA (HsCmd GhcTc)
</span><a href="#local-6989586621681305305"><span class="hs-identifier hs-var">new_cmd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305312"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681305306"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1118"></span><span>       </span><span id="local-6989586621681305304"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305304"><span class="hs-identifier hs-var">new_stack_tys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305312"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305309"><span class="hs-identifier hs-var">stack_tys</span></a></span><span>
</span><span id="line-1119"></span><span>       </span><span id="local-6989586621681305303"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305303"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305312"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305308"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1120"></span><span>       </span><span id="local-6989586621681305302"><span class="annot"><span class="annottext">CmdSyntaxTable GhcTc
</span><a href="#local-6989586621681305302"><span class="hs-identifier hs-var">new_ids</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) b c a.
Monad m =&gt;
(b -&gt; m c) -&gt; [(a, b)] -&gt; m [(a, c)]
</span><a href="GHC.Utils.Monad.html#mapSndM"><span class="hs-identifier hs-var">mapSndM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305312"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmdSyntaxTable GhcTc
</span><a href="#local-6989586621681305307"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-1121"></span><span>
</span><span id="line-1122"></span><span>       </span><span class="hs-identifier">MASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isLiftedTypeKind</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">tcTypeKind</span><span> </span><span class="hs-identifier">new_stack_tys</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1123"></span><span>         </span><span class="hs-comment">-- desugarer assumes that this is not levity polymorphic...</span><span>
</span><span id="line-1124"></span><span>         </span><span class="hs-comment">-- but indeed it should always be lifted due to the typing</span><span>
</span><span id="line-1125"></span><span>         </span><span class="hs-comment">-- rules for arrows</span><span>
</span><span id="line-1126"></span><span>
</span><span id="line-1127"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XCmdTop p -&gt; LHsCmd p -&gt; HsCmdTop p
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdTop"><span class="hs-identifier hs-var">HsCmdTop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Kind -&gt; CmdSyntaxTable GhcTc -&gt; CmdTopTc
</span><a href="GHC.Hs.Expr.html#CmdTopTc"><span class="hs-identifier hs-var">CmdTopTc</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305304"><span class="hs-identifier hs-var">new_stack_tys</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305303"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="annot"><span class="annottext">CmdSyntaxTable GhcTc
</span><a href="#local-6989586621681305302"><span class="hs-identifier hs-var">new_ids</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocatedA (HsCmd GhcTc)
</span><a href="#local-6989586621681305305"><span class="hs-identifier hs-var">new_cmd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1128"></span><span>
</span><span id="line-1129"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1130"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-type">zonkCoFn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1131"></span><span id="zonkCoFn"><span class="annot"><span class="annottext">zonkCoFn :: ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var hs-var">zonkCoFn</span></a></span></span><span> </span><span id="local-6989586621681305298"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305298"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305298"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1132"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681305296"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305296"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCompose"><span class="hs-identifier hs-type">WpCompose</span></a></span><span> </span><span id="local-6989586621681305294"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305294"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681305293"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305293"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305292"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305292"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305291"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305291"><span class="hs-identifier hs-var">c1'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305296"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305294"><span class="hs-identifier hs-var">c1</span></a></span><span>
</span><span id="line-1133"></span><span>                                    </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305290"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305290"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305289"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305289"><span class="hs-identifier hs-var">c2'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305292"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305293"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-1134"></span><span>                                    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305290"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; HsWrapper -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpCompose"><span class="hs-identifier hs-var">WpCompose</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305291"><span class="hs-identifier hs-var">c1'</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305289"><span class="hs-identifier hs-var">c2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1135"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681305288"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305288"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpFun"><span class="hs-identifier hs-type">WpFun</span></a></span><span> </span><span id="local-6989586621681305286"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305286"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681305285"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305285"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span id="local-6989586621681305284"><span class="annot"><span class="annottext">Scaled Kind
</span><a href="#local-6989586621681305284"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681305283"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681305283"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305282"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305282"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305281"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305281"><span class="hs-identifier hs-var">c1'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305288"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305286"><span class="hs-identifier hs-var">c1</span></a></span><span>
</span><span id="line-1136"></span><span>                                     </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305280"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305280"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305279"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305279"><span class="hs-identifier hs-var">c2'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305282"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305285"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-1137"></span><span>                                     </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305278"><span class="annot"><span class="annottext">Scaled Kind
</span><a href="#local-6989586621681305278"><span class="hs-identifier hs-var">t1'</span></a></span></span><span>         </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Scaled Kind -&gt; TcM (Scaled Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-var">zonkScaledTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305280"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Kind
</span><a href="#local-6989586621681305284"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1138"></span><span>                                     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305280"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; HsWrapper -&gt; Scaled Kind -&gt; SDoc -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpFun"><span class="hs-identifier hs-var">WpFun</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305281"><span class="hs-identifier hs-var">c1'</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681305279"><span class="hs-identifier hs-var">c2'</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Kind
</span><a href="#local-6989586621681305278"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681305283"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1139"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681305277"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305277"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-type">WpCast</span></a></span><span> </span><span id="local-6989586621681305275"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681305275"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305274"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681305274"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcCoercionR -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305277"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681305275"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1140"></span><span>                              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305277"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcCoercionR -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681305274"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1141"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681305273"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305273"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpEvLam"><span class="hs-identifier hs-type">WpEvLam</span></a></span><span> </span><span id="local-6989586621681305271"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305271"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305270"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305270"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305269"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305269"><span class="hs-identifier hs-var">ev'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrX"><span class="hs-identifier hs-var">zonkEvBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305273"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305271"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1142"></span><span>                                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305270"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpEvLam"><span class="hs-identifier hs-var">WpEvLam</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305269"><span class="hs-identifier hs-var">ev'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1143"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681305268"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305268"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpEvApp"><span class="hs-identifier hs-type">WpEvApp</span></a></span><span> </span><span id="local-6989586621681305266"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681305266"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305265"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681305265"><span class="hs-identifier hs-var">arg'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305268"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681305266"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1144"></span><span>                                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305268"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpEvApp"><span class="hs-identifier hs-var">WpEvApp</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681305265"><span class="hs-identifier hs-var">arg'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1145"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681305264"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305264"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpTyLam"><span class="hs-identifier hs-type">WpTyLam</span></a></span><span> </span><span id="local-6989586621681305262"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305262"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isImmutableTyVar</span><span> </span><span class="hs-identifier">tv</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1146"></span><span>                              </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305261"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305261"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305260"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305260"><span class="hs-identifier hs-var">tv'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305264"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305262"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1147"></span><span>                                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305261"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpTyLam"><span class="hs-identifier hs-var">WpTyLam</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305260"><span class="hs-identifier hs-var">tv'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1148"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681305259"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305259"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpTyApp"><span class="hs-identifier hs-type">WpTyApp</span></a></span><span> </span><span id="local-6989586621681305257"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305257"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305256"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305256"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305259"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305257"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1149"></span><span>                                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305259"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpTyApp"><span class="hs-identifier hs-var">WpTyApp</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305256"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1150"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681305255"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305255"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpLet"><span class="hs-identifier hs-type">WpLet</span></a></span><span> </span><span id="local-6989586621681305253"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681305253"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305252"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305252"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305251"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681305251"><span class="hs-identifier hs-var">bs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, TcEvBinds)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds"><span class="hs-identifier hs-var">zonkTcEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305255"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681305253"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1151"></span><span>                                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305252"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcEvBinds -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpLet"><span class="hs-identifier hs-var">WpLet</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681305251"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1152"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681305250"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305250"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpMultCoercion"><span class="hs-identifier hs-type">WpMultCoercion</span></a></span><span> </span><span id="local-6989586621681305248"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681305248"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305247"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681305247"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcCoercionR -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305250"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681305248"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1153"></span><span>                                      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305250"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcCoercionR -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpMultCoercion"><span class="hs-identifier hs-var">WpMultCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681305247"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1154"></span><span>
</span><span id="line-1155"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1156"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkOverLit"><span class="hs-identifier hs-type">zonkOverLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1157"></span><span id="zonkOverLit"><span class="annot"><span class="annottext">zonkOverLit :: ZonkEnv -&gt; HsOverLit GhcTc -&gt; TcM (HsOverLit GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkOverLit"><span class="hs-identifier hs-var hs-var">zonkOverLit</span></a></span></span><span> </span><span id="local-6989586621681305246"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305246"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305245"><span class="annot"><span class="annottext">lit :: HsOverLit GhcTc
</span><a href="#local-6989586621681305245"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#OverLit"><span class="hs-identifier hs-type">OverLit</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">ol_ext :: forall p. HsOverLit p -&gt; XOverLit p
</span><a href="Language.Haskell.Syntax.Lit.html#ol_ext"><span class="hs-identifier hs-var">ol_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Lit.html#OverLitTc"><span class="hs-identifier hs-type">OverLitTc</span></a></span><span> </span><span id="local-6989586621681305244"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681305244"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681305243"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305243"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ol_witness :: forall p. HsOverLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Lit.html#ol_witness"><span class="hs-identifier hs-var">ol_witness</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305242"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305242"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1158"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681305241"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305241"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305246"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305243"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1159"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305240"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305240"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305246"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305242"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1160"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681305245"><span class="hs-identifier hs-var">lit</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ol_witness :: HsExpr GhcTc
</span><a href="Language.Haskell.Syntax.Lit.html#ol_witness"><span class="hs-identifier hs-var">ol_witness</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305240"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ol_ext :: XOverLit GhcTc
</span><a href="Language.Haskell.Syntax.Lit.html#ol_ext"><span class="hs-identifier hs-var">ol_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Kind -&gt; OverLitTc
</span><a href="GHC.Hs.Lit.html#OverLitTc"><span class="hs-identifier hs-var">OverLitTc</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681305244"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305241"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1161"></span><span>
</span><span id="line-1162"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1163"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkArithSeq"><span class="hs-identifier hs-type">zonkArithSeq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ArithSeqInfo"><span class="hs-identifier hs-type">ArithSeqInfo</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ArithSeqInfo"><span class="hs-identifier hs-type">ArithSeqInfo</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1164"></span><span>
</span><span id="line-1165"></span><span id="zonkArithSeq"><span class="annot"><span class="annottext">zonkArithSeq :: ZonkEnv -&gt; ArithSeqInfo GhcTc -&gt; TcM (ArithSeqInfo GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkArithSeq"><span class="hs-identifier hs-var hs-var">zonkArithSeq</span></a></span></span><span> </span><span id="local-6989586621681305239"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305239"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#From"><span class="hs-identifier hs-type">From</span></a></span><span> </span><span id="local-6989586621681305237"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305237"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1166"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305236"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305236"><span class="hs-identifier hs-var">new_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305239"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305237"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1167"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. LHsExpr id -&gt; ArithSeqInfo id
</span><a href="Language.Haskell.Syntax.Expr.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305236"><span class="hs-identifier hs-var">new_e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1168"></span><span>
</span><span id="line-1169"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkArithSeq"><span class="hs-identifier hs-var">zonkArithSeq</span></a></span><span> </span><span id="local-6989586621681305235"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305235"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FromThen"><span class="hs-identifier hs-type">FromThen</span></a></span><span> </span><span id="local-6989586621681305233"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305233"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681305232"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305232"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1170"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305231"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305231"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305235"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305233"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1171"></span><span>       </span><span id="local-6989586621681305230"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305230"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305235"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305232"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1172"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. LHsExpr id -&gt; LHsExpr id -&gt; ArithSeqInfo id
</span><a href="Language.Haskell.Syntax.Expr.html#FromThen"><span class="hs-identifier hs-var">FromThen</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305231"><span class="hs-identifier hs-var">new_e1</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305230"><span class="hs-identifier hs-var">new_e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1173"></span><span>
</span><span id="line-1174"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkArithSeq"><span class="hs-identifier hs-var">zonkArithSeq</span></a></span><span> </span><span id="local-6989586621681305229"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305229"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FromTo"><span class="hs-identifier hs-type">FromTo</span></a></span><span> </span><span id="local-6989586621681305227"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305227"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681305226"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305226"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1175"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305225"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305225"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305229"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305227"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1176"></span><span>       </span><span id="local-6989586621681305224"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305224"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305229"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305226"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1177"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. LHsExpr id -&gt; LHsExpr id -&gt; ArithSeqInfo id
</span><a href="Language.Haskell.Syntax.Expr.html#FromTo"><span class="hs-identifier hs-var">FromTo</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305225"><span class="hs-identifier hs-var">new_e1</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305224"><span class="hs-identifier hs-var">new_e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1178"></span><span>
</span><span id="line-1179"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkArithSeq"><span class="hs-identifier hs-var">zonkArithSeq</span></a></span><span> </span><span id="local-6989586621681305223"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305223"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FromThenTo"><span class="hs-identifier hs-type">FromThenTo</span></a></span><span> </span><span id="local-6989586621681305221"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305221"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681305220"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305220"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span id="local-6989586621681305219"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305219"><span class="hs-identifier hs-var">e3</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1180"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681305218"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305218"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305223"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305221"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1181"></span><span>       </span><span id="local-6989586621681305217"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305217"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305223"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305220"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1182"></span><span>       </span><span id="local-6989586621681305216"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305216"><span class="hs-identifier hs-var">new_e3</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305223"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305219"><span class="hs-identifier hs-var">e3</span></a></span><span>
</span><span id="line-1183"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id.
LHsExpr id -&gt; LHsExpr id -&gt; LHsExpr id -&gt; ArithSeqInfo id
</span><a href="Language.Haskell.Syntax.Expr.html#FromThenTo"><span class="hs-identifier hs-var">FromThenTo</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305218"><span class="hs-identifier hs-var">new_e1</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305217"><span class="hs-identifier hs-var">new_e2</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305216"><span class="hs-identifier hs-var">new_e3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1184"></span><span>
</span><span id="line-1185"></span><span>
</span><span id="line-1186"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1187"></span><span id="local-6989586621681307308"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-type">zonkStmts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#StmtLR"><span class="hs-identifier hs-type">StmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307308"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span>
</span><span id="line-1188"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-1189"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307308"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307308"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1190"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307308"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1191"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307308"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-1192"></span><span id="zonkStmts"><span class="annot"><span class="annottext">zonkStmts :: forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (LocatedA (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var hs-var">zonkStmts</span></a></span></span><span> </span><span id="local-6989586621681305206"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305206"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305206"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1193"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span id="local-6989586621681305205"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305205"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305204"><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305204"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305203"><span class="annot"><span class="annottext">LStmt GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305203"><span class="hs-identifier hs-var">s</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681305202"><span class="annot"><span class="annottext">[LStmt GhcTc (LocatedA (body GhcTc))]
</span><a href="#local-6989586621681305202"><span class="hs-identifier hs-var">ss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305201"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305201"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305200"><span class="annot"><span class="annottext">LocatedA (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
</span><a href="#local-6989586621681305200"><span class="hs-identifier hs-var">s'</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b c.
(a -&gt; TcM (b, c)) -&gt; LocatedA a -&gt; TcM (b, LocatedA c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocSndMA"><span class="hs-identifier hs-var">wrapLocSndMA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; StmtLR GhcTc GhcTc (LocatedA (body GhcTc))
-&gt; TcM (ZonkEnv, StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305205"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305204"><span class="hs-identifier hs-var">zBody</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LStmt GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305203"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1194"></span><span>                                </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305197"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305197"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305196"><span class="annot"><span class="annottext">[LocatedA (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621681305196"><span class="hs-identifier hs-var">ss'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (LocatedA (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305201"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305204"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcTc (LocatedA (body GhcTc))]
</span><a href="#local-6989586621681305202"><span class="hs-identifier hs-var">ss</span></a></span><span>
</span><span id="line-1195"></span><span>                                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305197"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LocatedA (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
</span><a href="#local-6989586621681305200"><span class="hs-identifier hs-var">s'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LocatedA (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621681305196"><span class="hs-identifier hs-var">ss'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1196"></span><span>
</span><span id="line-1197"></span><span id="local-6989586621681307167"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-type">zonkStmt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#StmtLR"><span class="hs-identifier hs-type">StmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307167"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span>
</span><span id="line-1198"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-1199"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307167"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307167"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1200"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Stmt"><span class="hs-identifier hs-type">Stmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307167"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1201"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Stmt"><span class="hs-identifier hs-type">Stmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307167"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1202"></span><span id="zonkStmt"><span class="annot"><span class="annottext">zonkStmt :: forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; StmtLR GhcTc GhcTc (LocatedA (body GhcTc))
-&gt; TcM (ZonkEnv, StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var hs-var">zonkStmt</span></a></span></span><span> </span><span id="local-6989586621681305128"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305128"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmt"><span class="hs-identifier hs-type">ParStmt</span></a></span><span> </span><span id="local-6989586621681305126"><span class="annot"><span class="annottext">XParStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305126"><span class="hs-identifier hs-var">bind_ty</span></a></span></span><span> </span><span id="local-6989586621681305125"><span class="annot"><span class="annottext">[ParStmtBlock GhcTc GhcTc]
</span><a href="#local-6989586621681305125"><span class="hs-identifier hs-var">stmts_w_bndrs</span></a></span></span><span> </span><span id="local-6989586621681305124"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305124"><span class="hs-identifier hs-var">mzip_op</span></a></span></span><span> </span><span id="local-6989586621681305123"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305123"><span class="hs-identifier hs-var">bind_op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1203"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305122"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305122"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305121"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305121"><span class="hs-identifier hs-var">new_bind_op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305128"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305123"><span class="hs-identifier hs-var">bind_op</span></a></span><span>
</span><span id="line-1204"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305120"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305120"><span class="hs-identifier hs-var">new_bind_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305122"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">XParStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305126"><span class="hs-identifier hs-var">bind_ty</span></a></span><span>
</span><span id="line-1205"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305119"><span class="annot"><span class="annottext">[ParStmtBlock GhcTc GhcTc]
</span><a href="#local-6989586621681305119"><span class="hs-identifier hs-var">new_stmts_w_bndrs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; ParStmtBlock GhcTc GhcTc -&gt; TcM (ParStmtBlock GhcTc GhcTc)
</span><a href="#local-6989586621681305118"><span class="hs-identifier hs-var">zonk_branch</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305122"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ParStmtBlock GhcTc GhcTc]
</span><a href="#local-6989586621681305125"><span class="hs-identifier hs-var">stmts_w_bndrs</span></a></span><span>
</span><span id="line-1206"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681305117"><span class="annot"><span class="annottext">new_binders :: [TcTyVar]
</span><a href="#local-6989586621681305117"><span class="hs-identifier hs-var hs-var">new_binders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305116"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span class="annot"><span class="annottext">XParStmtBlock GhcTc GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681305114"><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621681305114"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[ParStmtBlock GhcTc GhcTc]
</span><a href="#local-6989586621681305119"><span class="hs-identifier hs-var">new_stmts_w_bndrs</span></a></span><span>
</span><span id="line-1207"></span><span>                              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305116"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305116"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621681305114"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1208"></span><span>             </span><span id="local-6989586621681305113"><span class="annot"><span class="annottext">env2 :: ZonkEnv
</span><a href="#local-6989586621681305113"><span class="hs-identifier hs-var hs-var">env2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305122"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681305117"><span class="hs-identifier hs-var">new_binders</span></a></span><span>
</span><span id="line-1209"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305112"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305112"><span class="hs-identifier hs-var">new_mzip</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305113"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305124"><span class="hs-identifier hs-var">mzip_op</span></a></span><span>
</span><span id="line-1210"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305113"><span class="hs-identifier hs-var">env2</span></a></span><span>
</span><span id="line-1211"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall idL idR body.
XParStmt idL idR body
-&gt; [ParStmtBlock idL idR]
-&gt; HsExpr idR
-&gt; SyntaxExpr idR
-&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#ParStmt"><span class="hs-identifier hs-var">ParStmt</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305120"><span class="hs-identifier hs-var">new_bind_ty</span></a></span><span> </span><span class="annot"><span class="annottext">[ParStmtBlock GhcTc GhcTc]
</span><a href="#local-6989586621681305119"><span class="hs-identifier hs-var">new_stmts_w_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305112"><span class="hs-identifier hs-var">new_mzip</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305121"><span class="hs-identifier hs-var">new_bind_op</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-1212"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1213"></span><span>    </span><span class="annot"><a href="#local-6989586621681305118"><span class="hs-identifier hs-type">zonk_branch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-1214"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1215"></span><span>    </span><span id="local-6989586621681305118"><span class="annot"><span class="annottext">zonk_branch :: ZonkEnv
-&gt; ParStmtBlock GhcTc GhcTc -&gt; TcM (ParStmtBlock GhcTc GhcTc)
</span><a href="#local-6989586621681305118"><span class="hs-identifier hs-var hs-var">zonk_branch</span></a></span></span><span> </span><span id="local-6989586621681305111"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305111"><span class="hs-identifier hs-var">env1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span id="local-6989586621681305110"><span class="annot"><span class="annottext">XParStmtBlock GhcTc GhcTc
</span><a href="#local-6989586621681305110"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305109"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681305109"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span id="local-6989586621681305108"><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621681305108"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span id="local-6989586621681305107"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305107"><span class="hs-identifier hs-var">return_op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1216"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305106"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305106"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305105"><span class="annot"><span class="annottext">[GenLocated
   (Anno (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc))))
   (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305105"><span class="hs-identifier hs-var">new_stmts</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (LocatedA (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305111"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681305109"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1217"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305104"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305104"><span class="hs-identifier hs-var">env3</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305103"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305103"><span class="hs-identifier hs-var">new_return</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305106"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305107"><span class="hs-identifier hs-var">return_op</span></a></span><span>
</span><span id="line-1218"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR.
XParStmtBlock idL idR
-&gt; [ExprLStmt idL]
-&gt; [IdP idR]
-&gt; SyntaxExpr idR
-&gt; ParStmtBlock idL idR
</span><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-var">ParStmtBlock</span></a></span><span> </span><span class="annot"><span class="annottext">XParStmtBlock GhcTc GhcTc
</span><a href="#local-6989586621681305110"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (Anno (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc))))
   (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305105"><span class="hs-identifier hs-var">new_stmts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; [TcTyVar]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOccs"><span class="hs-identifier hs-var">zonkIdOccs</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305104"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621681305108"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1219"></span><span>                                                                   </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305103"><span class="hs-identifier hs-var">new_return</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1220"></span><span>
</span><span id="line-1221"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621681305102"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305102"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305101"><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305101"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecStmt"><span class="hs-identifier hs-type">RecStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_stmts :: forall idL idR body.
StmtLR idL idR body -&gt; XRec idR [LStmtLR idL idR body]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_stmts"><span class="hs-identifier hs-var">recS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681305098"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621681305098"><span class="hs-identifier hs-var">segStmts</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_later_ids :: forall idL idR body. StmtLR idL idR body -&gt; [IdP idR]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_later_ids"><span class="hs-identifier hs-var">recS_later_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305096"><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621681305096"><span class="hs-identifier hs-var">lvs</span></a></span></span><span>
</span><span id="line-1222"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_rec_ids :: forall idL idR body. StmtLR idL idR body -&gt; [IdP idR]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_rec_ids"><span class="hs-identifier hs-var">recS_rec_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305094"><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621681305094"><span class="hs-identifier hs-var">rvs</span></a></span></span><span>
</span><span id="line-1223"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_ret_fn :: forall idL idR body. StmtLR idL idR body -&gt; SyntaxExpr idR
</span><a href="Language.Haskell.Syntax.Expr.html#recS_ret_fn"><span class="hs-identifier hs-var">recS_ret_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305092"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305092"><span class="hs-identifier hs-var">ret_id</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_mfix_fn :: forall idL idR body. StmtLR idL idR body -&gt; SyntaxExpr idR
</span><a href="Language.Haskell.Syntax.Expr.html#recS_mfix_fn"><span class="hs-identifier hs-var">recS_mfix_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305090"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305090"><span class="hs-identifier hs-var">mfix_id</span></a></span></span><span>
</span><span id="line-1224"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_bind_fn :: forall idL idR body. StmtLR idL idR body -&gt; SyntaxExpr idR
</span><a href="Language.Haskell.Syntax.Expr.html#recS_bind_fn"><span class="hs-identifier hs-var">recS_bind_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305088"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305088"><span class="hs-identifier hs-var">bind_id</span></a></span></span><span>
</span><span id="line-1225"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_ext :: forall idL idR body. StmtLR idL idR body -&gt; XRecStmt idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#recS_ext"><span class="hs-identifier hs-var">recS_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1226"></span><span>                                       </span><span class="annot"><a href="GHC.Hs.Expr.html#RecStmtTc"><span class="hs-identifier hs-type">RecStmtTc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_bind_ty :: RecStmtTc -&gt; Kind
</span><a href="GHC.Hs.Expr.html#recS_bind_ty"><span class="hs-identifier hs-var">recS_bind_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305084"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305084"><span class="hs-identifier hs-var">bind_ty</span></a></span></span><span>
</span><span id="line-1227"></span><span>                                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_later_rets :: RecStmtTc -&gt; [HsExpr GhcTc]
</span><a href="GHC.Hs.Expr.html#recS_later_rets"><span class="hs-identifier hs-var">recS_later_rets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305082"><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681305082"><span class="hs-identifier hs-var">later_rets</span></a></span></span><span>
</span><span id="line-1228"></span><span>                                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_rec_rets :: RecStmtTc -&gt; [HsExpr GhcTc]
</span><a href="GHC.Hs.Expr.html#recS_rec_rets"><span class="hs-identifier hs-var">recS_rec_rets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305080"><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681305080"><span class="hs-identifier hs-var">rec_rets</span></a></span></span><span>
</span><span id="line-1229"></span><span>                                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_ret_ty :: RecStmtTc -&gt; Kind
</span><a href="GHC.Hs.Expr.html#recS_ret_ty"><span class="hs-identifier hs-var">recS_ret_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305078"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305078"><span class="hs-identifier hs-var">ret_ty</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1230"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305077"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305077"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305076"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305076"><span class="hs-identifier hs-var">new_bind_id</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305102"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305088"><span class="hs-identifier hs-var">bind_id</span></a></span><span>
</span><span id="line-1231"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305075"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305075"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305074"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305074"><span class="hs-identifier hs-var">new_mfix_id</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305077"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305090"><span class="hs-identifier hs-var">mfix_id</span></a></span><span>
</span><span id="line-1232"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305073"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305073"><span class="hs-identifier hs-var">env3</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305072"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305072"><span class="hs-identifier hs-var">new_ret_id</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305075"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305092"><span class="hs-identifier hs-var">ret_id</span></a></span><span>
</span><span id="line-1233"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305071"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305071"><span class="hs-identifier hs-var">new_bind_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305073"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305084"><span class="hs-identifier hs-var">bind_ty</span></a></span><span>
</span><span id="line-1234"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305070"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681305070"><span class="hs-identifier hs-var">new_rvs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; TcM [TcTyVar]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndrs"><span class="hs-identifier hs-var">zonkIdBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305073"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621681305094"><span class="hs-identifier hs-var">rvs</span></a></span><span>
</span><span id="line-1235"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305069"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681305069"><span class="hs-identifier hs-var">new_lvs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; TcM [TcTyVar]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndrs"><span class="hs-identifier hs-var">zonkIdBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305073"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621681305096"><span class="hs-identifier hs-var">lvs</span></a></span><span>
</span><span id="line-1236"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305068"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305068"><span class="hs-identifier hs-var">new_ret_ty</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305073"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305078"><span class="hs-identifier hs-var">ret_ty</span></a></span><span>
</span><span id="line-1237"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681305067"><span class="annot"><span class="annottext">env4 :: ZonkEnv
</span><a href="#local-6989586621681305067"><span class="hs-identifier hs-var hs-var">env4</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305073"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681305070"><span class="hs-identifier hs-var">new_rvs</span></a></span><span>
</span><span id="line-1238"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305066"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305066"><span class="hs-identifier hs-var">env5</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305065"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621681305065"><span class="hs-identifier hs-var">new_segStmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (LocatedA (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305067"><span class="hs-identifier hs-var">env4</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305101"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621681305098"><span class="hs-identifier hs-var">segStmts</span></a></span><span>
</span><span id="line-1239"></span><span>        </span><span class="hs-comment">-- Zonk the ret-expressions in an envt that</span><span>
</span><span id="line-1240"></span><span>        </span><span class="hs-comment">-- has the polymorphic bindings in the envt</span><span>
</span><span id="line-1241"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305064"><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681305064"><span class="hs-identifier hs-var">new_later_rets</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305066"><span class="hs-identifier hs-var">env5</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681305082"><span class="hs-identifier hs-var">later_rets</span></a></span><span>
</span><span id="line-1242"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305063"><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681305063"><span class="hs-identifier hs-var">new_rec_rets</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305066"><span class="hs-identifier hs-var">env5</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681305080"><span class="hs-identifier hs-var">rec_rets</span></a></span><span>
</span><span id="line-1243"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305073"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681305069"><span class="hs-identifier hs-var">new_lvs</span></a></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- Only the lvs are needed</span><span>
</span><span id="line-1244"></span><span>                 </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecStmt"><span class="hs-identifier hs-type">RecStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_stmts :: XRec GhcTc [LStmtLR GhcTc GhcTc (LocatedA (body GhcTc))]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_stmts"><span class="hs-identifier hs-var">recS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621681305065"><span class="hs-identifier hs-var">new_segStmts</span></a></span><span>
</span><span id="line-1245"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_later_ids :: [IdP GhcTc]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_later_ids"><span class="hs-identifier hs-var">recS_later_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681305069"><span class="hs-identifier hs-var">new_lvs</span></a></span><span>
</span><span id="line-1246"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_rec_ids :: [IdP GhcTc]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_rec_ids"><span class="hs-identifier hs-var">recS_rec_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681305070"><span class="hs-identifier hs-var">new_rvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_ret_fn :: SyntaxExpr GhcTc
</span><a href="Language.Haskell.Syntax.Expr.html#recS_ret_fn"><span class="hs-identifier hs-var">recS_ret_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305072"><span class="hs-identifier hs-var">new_ret_id</span></a></span><span>
</span><span id="line-1247"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_mfix_fn :: SyntaxExpr GhcTc
</span><a href="Language.Haskell.Syntax.Expr.html#recS_mfix_fn"><span class="hs-identifier hs-var">recS_mfix_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305074"><span class="hs-identifier hs-var">new_mfix_id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_bind_fn :: SyntaxExpr GhcTc
</span><a href="Language.Haskell.Syntax.Expr.html#recS_bind_fn"><span class="hs-identifier hs-var">recS_bind_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305076"><span class="hs-identifier hs-var">new_bind_id</span></a></span><span>
</span><span id="line-1248"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_ext :: XRecStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="Language.Haskell.Syntax.Expr.html#recS_ext"><span class="hs-identifier hs-var">recS_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#RecStmtTc"><span class="hs-identifier hs-type">RecStmtTc</span></a></span><span>
</span><span id="line-1249"></span><span>                             </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_bind_ty :: Kind
</span><a href="GHC.Hs.Expr.html#recS_bind_ty"><span class="hs-identifier hs-var">recS_bind_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305071"><span class="hs-identifier hs-var">new_bind_ty</span></a></span><span>
</span><span id="line-1250"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_later_rets :: [HsExpr GhcTc]
</span><a href="GHC.Hs.Expr.html#recS_later_rets"><span class="hs-identifier hs-var">recS_later_rets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681305064"><span class="hs-identifier hs-var">new_later_rets</span></a></span><span>
</span><span id="line-1251"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_rec_rets :: [HsExpr GhcTc]
</span><a href="GHC.Hs.Expr.html#recS_rec_rets"><span class="hs-identifier hs-var">recS_rec_rets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681305063"><span class="hs-identifier hs-var">new_rec_rets</span></a></span><span>
</span><span id="line-1252"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_ret_ty :: Kind
</span><a href="GHC.Hs.Expr.html#recS_ret_ty"><span class="hs-identifier hs-var">recS_ret_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305068"><span class="hs-identifier hs-var">new_ret_ty</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1253"></span><span>
</span><span id="line-1254"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621681305061"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305061"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305060"><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305060"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span id="local-6989586621681305058"><span class="annot"><span class="annottext">XBodyStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305058"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681305057"><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681305057"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621681305056"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305056"><span class="hs-identifier hs-var">then_op</span></a></span></span><span> </span><span id="local-6989586621681305055"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305055"><span class="hs-identifier hs-var">guard_op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1255"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305054"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305054"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305053"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305053"><span class="hs-identifier hs-var">new_then_op</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305061"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305056"><span class="hs-identifier hs-var">then_op</span></a></span><span>
</span><span id="line-1256"></span><span>       </span><span class="hs-special">(</span><span id="local-6989586621681305052"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305052"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305051"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305051"><span class="hs-identifier hs-var">new_guard_op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305054"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305055"><span class="hs-identifier hs-var">guard_op</span></a></span><span>
</span><span id="line-1257"></span><span>       </span><span id="local-6989586621681305050"><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681305050"><span class="hs-identifier hs-var">new_body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305060"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305052"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681305057"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1258"></span><span>       </span><span id="local-6989586621681305049"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305049"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305052"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">XBodyStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305058"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1259"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305052"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall idL idR body.
XBodyStmt idL idR body
-&gt; body -&gt; SyntaxExpr idR -&gt; SyntaxExpr idR -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-var">BodyStmt</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305049"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681305050"><span class="hs-identifier hs-var">new_body</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305053"><span class="hs-identifier hs-var">new_then_op</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305051"><span class="hs-identifier hs-var">new_guard_op</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1260"></span><span>
</span><span id="line-1261"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621681305048"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305048"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681305047"><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305047"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-type">LastStmt</span></a></span><span> </span><span id="local-6989586621681305045"><span class="annot"><span class="annottext">XLastStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305045"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681305044"><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681305044"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621681305043"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681305043"><span class="hs-identifier hs-var">noret</span></a></span></span><span> </span><span id="local-6989586621681305042"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305042"><span class="hs-identifier hs-var">ret_op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1262"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305041"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305041"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305040"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305040"><span class="hs-identifier hs-var">new_ret</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305048"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305042"><span class="hs-identifier hs-var">ret_op</span></a></span><span>
</span><span id="line-1263"></span><span>       </span><span id="local-6989586621681305039"><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681305039"><span class="hs-identifier hs-var">new_body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305047"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305041"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681305044"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1264"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305048"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall idL idR body.
XLastStmt idL idR body
-&gt; body -&gt; Maybe Bool -&gt; SyntaxExpr idR -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-var">LastStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLastStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305045"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681305039"><span class="hs-identifier hs-var">new_body</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681305043"><span class="hs-identifier hs-var">noret</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305040"><span class="hs-identifier hs-var">new_ret</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1265"></span><span>
</span><span id="line-1266"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621681305038"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305038"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#TransStmt"><span class="hs-identifier hs-type">TransStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">trS_stmts :: forall idL idR body. StmtLR idL idR body -&gt; [ExprLStmt idL]
</span><a href="Language.Haskell.Syntax.Expr.html#trS_stmts"><span class="hs-identifier hs-var">trS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305035"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681305035"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_bndrs :: forall idL idR body. StmtLR idL idR body -&gt; [(IdP idR, IdP idR)]
</span><a href="Language.Haskell.Syntax.Expr.html#trS_bndrs"><span class="hs-identifier hs-var">trS_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305033"><span class="annot"><span class="annottext">[(IdP GhcTc, IdP GhcTc)]
</span><a href="#local-6989586621681305033"><span class="hs-identifier hs-var">binderMap</span></a></span></span><span>
</span><span id="line-1267"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_by :: forall idL idR body. StmtLR idL idR body -&gt; Maybe (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Expr.html#trS_by"><span class="hs-identifier hs-var">trS_by</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305031"><span class="annot"><span class="annottext">Maybe (LHsExpr GhcTc)
</span><a href="#local-6989586621681305031"><span class="hs-identifier hs-var">by</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_form :: forall idL idR body. StmtLR idL idR body -&gt; TransForm
</span><a href="Language.Haskell.Syntax.Expr.html#trS_form"><span class="hs-identifier hs-var">trS_form</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305029"><span class="annot"><span class="annottext">TransForm
</span><a href="#local-6989586621681305029"><span class="hs-identifier hs-var">form</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_using :: forall idL idR body. StmtLR idL idR body -&gt; LHsExpr idR
</span><a href="Language.Haskell.Syntax.Expr.html#trS_using"><span class="hs-identifier hs-var">trS_using</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305027"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305027"><span class="hs-identifier hs-var">using</span></a></span></span><span>
</span><span id="line-1268"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_ret :: forall idL idR body. StmtLR idL idR body -&gt; SyntaxExpr idR
</span><a href="Language.Haskell.Syntax.Expr.html#trS_ret"><span class="hs-identifier hs-var">trS_ret</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305025"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305025"><span class="hs-identifier hs-var">return_op</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_bind :: forall idL idR body. StmtLR idL idR body -&gt; SyntaxExpr idR
</span><a href="Language.Haskell.Syntax.Expr.html#trS_bind"><span class="hs-identifier hs-var">trS_bind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305023"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305023"><span class="hs-identifier hs-var">bind_op</span></a></span></span><span>
</span><span id="line-1269"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_ext :: forall idL idR body. StmtLR idL idR body -&gt; XTransStmt idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#trS_ext"><span class="hs-identifier hs-var">trS_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305021"><span class="annot"><span class="annottext">XTransStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305021"><span class="hs-identifier hs-var">bind_arg_ty</span></a></span></span><span>
</span><span id="line-1270"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_fmap :: forall idL idR body. StmtLR idL idR body -&gt; HsExpr idR
</span><a href="Language.Haskell.Syntax.Expr.html#trS_fmap"><span class="hs-identifier hs-var">trS_fmap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681305019"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305019"><span class="hs-identifier hs-var">liftM_op</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1271"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1272"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305018"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305018"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305017"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305017"><span class="hs-identifier hs-var">bind_op'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305038"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305023"><span class="hs-identifier hs-var">bind_op</span></a></span><span>
</span><span id="line-1273"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305016"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305016"><span class="hs-identifier hs-var">bind_arg_ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305018"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">XTransStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681305021"><span class="hs-identifier hs-var">bind_arg_ty</span></a></span><span>
</span><span id="line-1274"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305015"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305015"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305014"><span class="annot"><span class="annottext">[GenLocated
   (Anno (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc))))
   (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305014"><span class="hs-identifier hs-var">stmts'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (LocatedA (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305018"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681305035"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1275"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305013"><span class="annot"><span class="annottext">Maybe (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305013"><span class="hs-identifier hs-var">by'</span></a></span></span><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Maybe a -&gt; m (Maybe b)
</span><a href="GHC.Utils.Monad.html#fmapMaybeM"><span class="hs-identifier hs-var">fmapMaybeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305015"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsExpr GhcTc)
</span><a href="#local-6989586621681305031"><span class="hs-identifier hs-var">by</span></a></span><span>
</span><span id="line-1276"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305011"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305011"><span class="hs-identifier hs-var">using'</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305015"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681305027"><span class="hs-identifier hs-var">using</span></a></span><span>
</span><span id="line-1277"></span><span>
</span><span id="line-1278"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681305010"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305010"><span class="hs-identifier hs-var">env3</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305009"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305009"><span class="hs-identifier hs-var">return_op'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305015"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681305025"><span class="hs-identifier hs-var">return_op</span></a></span><span>
</span><span id="line-1279"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305008"><span class="annot"><span class="annottext">[(TcTyVar, TcTyVar)]
</span><a href="#local-6989586621681305008"><span class="hs-identifier hs-var">binderMap'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (TcTyVar, TcTyVar)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (TcTyVar, TcTyVar)
</span><a href="#local-6989586621681305007"><span class="hs-identifier hs-var">zonkBinderMapEntry</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305010"><span class="hs-identifier hs-var">env3</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(IdP GhcTc, IdP GhcTc)]
</span><a href="#local-6989586621681305033"><span class="hs-identifier hs-var">binderMap</span></a></span><span>
</span><span id="line-1280"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681305006"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305006"><span class="hs-identifier hs-var">liftM_op'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305010"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305019"><span class="hs-identifier hs-var">liftM_op</span></a></span><span>
</span><span id="line-1281"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681305005"><span class="annot"><span class="annottext">env3' :: ZonkEnv
</span><a href="#local-6989586621681305005"><span class="hs-identifier hs-var hs-var">env3'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305010"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">[(TcTyVar, TcTyVar)]
</span><a href="#local-6989586621681305008"><span class="hs-identifier hs-var">binderMap'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1282"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305005"><span class="hs-identifier hs-var">env3'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#TransStmt"><span class="hs-identifier hs-type">TransStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">trS_stmts :: [GuardLStmt GhcTc]
</span><a href="Language.Haskell.Syntax.Expr.html#trS_stmts"><span class="hs-identifier hs-var">trS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (Anno (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc))))
   (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681305014"><span class="hs-identifier hs-var">stmts'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_bndrs :: [(IdP GhcTc, IdP GhcTc)]
</span><a href="Language.Haskell.Syntax.Expr.html#trS_bndrs"><span class="hs-identifier hs-var">trS_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(TcTyVar, TcTyVar)]
</span><a href="#local-6989586621681305008"><span class="hs-identifier hs-var">binderMap'</span></a></span><span>
</span><span id="line-1283"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_by :: Maybe (LHsExpr GhcTc)
</span><a href="Language.Haskell.Syntax.Expr.html#trS_by"><span class="hs-identifier hs-var">trS_by</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681305013"><span class="hs-identifier hs-var">by'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_form :: TransForm
</span><a href="Language.Haskell.Syntax.Expr.html#trS_form"><span class="hs-identifier hs-var">trS_form</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TransForm
</span><a href="#local-6989586621681305029"><span class="hs-identifier hs-var">form</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_using :: LHsExpr GhcTc
</span><a href="Language.Haskell.Syntax.Expr.html#trS_using"><span class="hs-identifier hs-var">trS_using</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681305011"><span class="hs-identifier hs-var">using'</span></a></span><span>
</span><span id="line-1284"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_ret :: SyntaxExpr GhcTc
</span><a href="Language.Haskell.Syntax.Expr.html#trS_ret"><span class="hs-identifier hs-var">trS_ret</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305009"><span class="hs-identifier hs-var">return_op'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_bind :: SyntaxExpr GhcTc
</span><a href="Language.Haskell.Syntax.Expr.html#trS_bind"><span class="hs-identifier hs-var">trS_bind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681305017"><span class="hs-identifier hs-var">bind_op'</span></a></span><span>
</span><span id="line-1285"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_ext :: XTransStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="Language.Haskell.Syntax.Expr.html#trS_ext"><span class="hs-identifier hs-var">trS_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681305016"><span class="hs-identifier hs-var">bind_arg_ty'</span></a></span><span>
</span><span id="line-1286"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_fmap :: HsExpr GhcTc
</span><a href="Language.Haskell.Syntax.Expr.html#trS_fmap"><span class="hs-identifier hs-var">trS_fmap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681305006"><span class="hs-identifier hs-var">liftM_op'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1287"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1288"></span><span>    </span><span id="local-6989586621681305007"><span class="annot"><span class="annottext">zonkBinderMapEntry :: ZonkEnv
-&gt; (TcTyVar, TcTyVar)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (TcTyVar, TcTyVar)
</span><a href="#local-6989586621681305007"><span class="hs-identifier hs-var hs-var">zonkBinderMapEntry</span></a></span></span><span> </span><span id="local-6989586621681305002"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305002"><span class="hs-identifier hs-var">env</span></a></span></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621681305001"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305001"><span class="hs-identifier hs-var">oldBinder</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681305000"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305000"><span class="hs-identifier hs-var">newBinder</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1289"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681304999"><span class="annot"><span class="annottext">oldBinder' :: TcTyVar
</span><a href="#local-6989586621681304999"><span class="hs-identifier hs-var hs-var">oldBinder'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305002"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305001"><span class="hs-identifier hs-var">oldBinder</span></a></span><span>
</span><span id="line-1290"></span><span>        </span><span id="local-6989586621681304998"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304998"><span class="hs-identifier hs-var">newBinder'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681305002"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681305000"><span class="hs-identifier hs-var">newBinder</span></a></span><span>
</span><span id="line-1291"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304999"><span class="hs-identifier hs-var">oldBinder'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304998"><span class="hs-identifier hs-var">newBinder'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1292"></span><span>
</span><span id="line-1293"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621681304997"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304997"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span id="local-6989586621681304995"><span class="annot"><span class="annottext">XLetStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681304995"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681304994"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681304994"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1294"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304993"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304993"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304992"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681304992"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsLocalBinds GhcTc -&gt; TcM (ZonkEnv, HsLocalBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304997"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681304994"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-1295"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304993"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall idL idR body.
XLetStmt idL idR body
-&gt; HsLocalBindsLR idL idR -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-var">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLetStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681304995"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681304992"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1296"></span><span>
</span><span id="line-1297"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621681304991"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304991"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304990"><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681304990"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span> </span><span id="local-6989586621681304988"><span class="annot"><span class="annottext">XBindStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681304988"><span class="hs-identifier hs-var">xbs</span></a></span></span><span> </span><span id="local-6989586621681304987"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304987"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681304986"><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681304986"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1298"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304985"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304985"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304984"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304984"><span class="hs-identifier hs-var">new_bind</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304991"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XBindStmtTc -&gt; SyntaxExpr GhcTc
</span><a href="GHC.Hs.Expr.html#xbstc_bindOp"><span class="hs-identifier hs-var">xbstc_bindOp</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681304988"><span class="hs-identifier hs-var">xbs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1299"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304982"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304982"><span class="hs-identifier hs-var">new_w</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304985"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XBindStmtTc -&gt; Kind
</span><a href="GHC.Hs.Expr.html#xbstc_boundResultMult"><span class="hs-identifier hs-var">xbstc_boundResultMult</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681304988"><span class="hs-identifier hs-var">xbs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1300"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304980"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304980"><span class="hs-identifier hs-var">new_bind_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304985"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XBindStmtTc -&gt; Kind
</span><a href="GHC.Hs.Expr.html#xbstc_boundResultType"><span class="hs-identifier hs-var">xbstc_boundResultType</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681304988"><span class="hs-identifier hs-var">xbs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1301"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304978"><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681304978"><span class="hs-identifier hs-var">new_body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681304990"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304985"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681304986"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1302"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304977"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304977"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304976"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304976"><span class="hs-identifier hs-var">new_pat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304985"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304987"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1303"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304975"><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681304975"><span class="hs-identifier hs-var">new_fail</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">XBindStmtTc -&gt; Maybe (SyntaxExpr GhcTc)
</span><a href="GHC.Hs.Expr.html#xbstc_failOp"><span class="hs-identifier hs-var">xbstc_failOp</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681304988"><span class="hs-identifier hs-var">xbs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1304"></span><span>            </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1305"></span><span>            </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681304973"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304973"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304985"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304973"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1306"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304977"><span class="hs-identifier hs-var">env2</span></a></span><span>
</span><span id="line-1307"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall idL idR body.
XBindStmt idL idR body -&gt; LPat idL -&gt; body -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-var">BindStmt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#XBindStmtTc"><span class="hs-identifier hs-type">XBindStmtTc</span></a></span><span>
</span><span id="line-1308"></span><span>                              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">xbstc_bindOp :: SyntaxExpr GhcTc
</span><a href="GHC.Hs.Expr.html#xbstc_bindOp"><span class="hs-identifier hs-var">xbstc_bindOp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304984"><span class="hs-identifier hs-var">new_bind</span></a></span><span>
</span><span id="line-1309"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">xbstc_boundResultType :: Kind
</span><a href="GHC.Hs.Expr.html#xbstc_boundResultType"><span class="hs-identifier hs-var">xbstc_boundResultType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304980"><span class="hs-identifier hs-var">new_bind_ty</span></a></span><span>
</span><span id="line-1310"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">xbstc_boundResultMult :: Kind
</span><a href="GHC.Hs.Expr.html#xbstc_boundResultMult"><span class="hs-identifier hs-var">xbstc_boundResultMult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304982"><span class="hs-identifier hs-var">new_w</span></a></span><span>
</span><span id="line-1311"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">xbstc_failOp :: Maybe (SyntaxExpr GhcTc)
</span><a href="GHC.Hs.Expr.html#xbstc_failOp"><span class="hs-identifier hs-var">xbstc_failOp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681304975"><span class="hs-identifier hs-var">new_fail</span></a></span><span>
</span><span id="line-1312"></span><span>                              </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1313"></span><span>                            </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304976"><span class="hs-identifier hs-var">new_pat</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621681304978"><span class="hs-identifier hs-var">new_body</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1314"></span><span>
</span><span id="line-1315"></span><span class="hs-comment">-- Scopes: join &gt; ops (in reverse order) &gt; pats (in forward order)</span><span>
</span><span id="line-1316"></span><span class="hs-comment">--              &gt; rest of stmts</span><span>
</span><span id="line-1317"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621681304971"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304971"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304970"><span class="annot"><span class="annottext">ZonkEnv -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621681304970"><span class="hs-identifier hs-var">_zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeStmt"><span class="hs-identifier hs-type">ApplicativeStmt</span></a></span><span> </span><span id="local-6989586621681304968"><span class="annot"><span class="annottext">XApplicativeStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681304968"><span class="hs-identifier hs-var">body_ty</span></a></span></span><span> </span><span id="local-6989586621681304967"><span class="annot"><span class="annottext">[(SyntaxExpr GhcTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681304967"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621681304966"><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="#local-6989586621681304966"><span class="hs-identifier hs-var">mb_join</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1318"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304965"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304965"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304964"><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681304964"><span class="hs-identifier hs-var">new_mb_join</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; Maybe SyntaxExprTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
</span><a href="#local-6989586621681304963"><span class="hs-identifier hs-var">zonk_join</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304971"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="#local-6989586621681304966"><span class="hs-identifier hs-var">mb_join</span></a></span><span>
</span><span id="line-1319"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304962"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304962"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304961"><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681304961"><span class="hs-identifier hs-var">new_args</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
</span><a href="#local-6989586621681304960"><span class="hs-identifier hs-var">zonk_args</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304965"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">[(SyntaxExpr GhcTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681304967"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1320"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304959"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304959"><span class="hs-identifier hs-var">new_body_ty</span></a></span></span><span>           </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304962"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621681304968"><span class="hs-identifier hs-var">body_ty</span></a></span><span>
</span><span id="line-1321"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304962"><span class="hs-identifier hs-var">env2</span></a></span><span>
</span><span id="line-1322"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall idL idR body.
XApplicativeStmt idL idR body
-&gt; [(SyntaxExpr idR, ApplicativeArg idL)]
-&gt; Maybe (SyntaxExpr idR)
-&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#ApplicativeStmt"><span class="hs-identifier hs-var">ApplicativeStmt</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304959"><span class="hs-identifier hs-var">new_body_ty</span></a></span><span> </span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681304961"><span class="hs-identifier hs-var">new_args</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681304964"><span class="hs-identifier hs-var">new_mb_join</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1323"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1324"></span><span>    </span><span id="local-6989586621681304963"><span class="annot"><span class="annottext">zonk_join :: ZonkEnv
-&gt; Maybe SyntaxExprTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
</span><a href="#local-6989586621681304963"><span class="hs-identifier hs-var hs-var">zonk_join</span></a></span></span><span> </span><span id="local-6989586621681304955"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304955"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304955"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1325"></span><span>    </span><span class="annot"><a href="#local-6989586621681304963"><span class="hs-identifier hs-var">zonk_join</span></a></span><span> </span><span id="local-6989586621681304954"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304954"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681304953"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304953"><span class="hs-identifier hs-var">j</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><a href="../../base-4.16.3.0/src/Control-Arrow.html#second"><span class="hs-identifier hs-var">second</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304954"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304953"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-1326"></span><span>
</span><span id="line-1327"></span><span>    </span><span class="annot"><a href="#local-6989586621681304952"><span class="hs-identifier hs-type">get_pat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArg"><span class="hs-identifier hs-type">ApplicativeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-1328"></span><span>    </span><span id="local-6989586621681304952"><span class="annot"><span class="annottext">get_pat :: (SyntaxExpr GhcTc, ApplicativeArg GhcTc) -&gt; LPat GhcTc
</span><a href="#local-6989586621681304952"><span class="hs-identifier hs-var hs-var">get_pat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-type">ApplicativeArgOne</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681304950"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304950"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304950"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1329"></span><span>    </span><span class="annot"><a href="#local-6989586621681304952"><span class="hs-identifier hs-var">get_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-type">ApplicativeArgMany</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681304948"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304948"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsStmtContext (ApplicativeArgStmCtxPass GhcTc)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304948"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1330"></span><span>
</span><span id="line-1331"></span><span>    </span><span class="annot"><a href="#local-6989586621681304947"><span class="hs-identifier hs-type">replace_pat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-1332"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArg"><span class="hs-identifier hs-type">ApplicativeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1333"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArg"><span class="hs-identifier hs-type">ApplicativeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1334"></span><span>    </span><span id="local-6989586621681304947"><span class="annot"><span class="annottext">replace_pat :: LPat GhcTc
-&gt; (SyntaxExpr GhcTc, ApplicativeArg GhcTc)
-&gt; (SyntaxExpr GhcTc, ApplicativeArg GhcTc)
</span><a href="#local-6989586621681304947"><span class="hs-identifier hs-var hs-var">replace_pat</span></a></span></span><span> </span><span id="local-6989586621681304946"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304946"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304945"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304945"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-type">ApplicativeArgOne</span></a></span><span> </span><span id="local-6989586621681304944"><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
</span><a href="#local-6989586621681304944"><span class="hs-identifier hs-var">fail_op</span></a></span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681304943"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681304943"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681304942"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681304942"><span class="hs-identifier hs-var">isBody</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1335"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304945"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall idL.
XApplicativeArgOne idL
-&gt; LPat idL -&gt; LHsExpr idL -&gt; Bool -&gt; ApplicativeArg idL
</span><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-var">ApplicativeArgOne</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
</span><a href="#local-6989586621681304944"><span class="hs-identifier hs-var">fail_op</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304946"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681304943"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681304942"><span class="hs-identifier hs-var">isBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1336"></span><span>    </span><span class="annot"><a href="#local-6989586621681304947"><span class="hs-identifier hs-var">replace_pat</span></a></span><span> </span><span id="local-6989586621681304941"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304941"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304940"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304940"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-type">ApplicativeArgMany</span></a></span><span> </span><span id="local-6989586621681304939"><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
</span><a href="#local-6989586621681304939"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681304938"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681304938"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681304937"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681304937"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681304936"><span class="annot"><span class="annottext">HsStmtContext (ApplicativeArgStmCtxPass GhcTc)
</span><a href="#local-6989586621681304936"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1337"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304940"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall idL.
XApplicativeArgMany idL
-&gt; [ExprLStmt idL]
-&gt; HsExpr idL
-&gt; LPat idL
-&gt; HsStmtContext (ApplicativeArgStmCtxPass idL)
-&gt; ApplicativeArg idL
</span><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-var">ApplicativeArgMany</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
</span><a href="#local-6989586621681304939"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681304938"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681304937"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304941"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext (ApplicativeArgStmCtxPass GhcTc)
</span><a href="#local-6989586621681304936"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1338"></span><span>
</span><span id="line-1339"></span><span>    </span><span id="local-6989586621681304960"><span class="annot"><span class="annottext">zonk_args :: ZonkEnv
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
</span><a href="#local-6989586621681304960"><span class="hs-identifier hs-var hs-var">zonk_args</span></a></span></span><span> </span><span id="local-6989586621681304932"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304932"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304931"><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681304931"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-1340"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304930"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304930"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304929"><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681304929"><span class="hs-identifier hs-var">new_args_rev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
</span><a href="#local-6989586621681304928"><span class="hs-identifier hs-var">zonk_args_rev</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304932"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681304931"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1341"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304926"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304926"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304925"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681304925"><span class="hs-identifier hs-var">new_pats</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304930"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">(SyntaxExpr GhcTc, ApplicativeArg GhcTc) -&gt; LPat GhcTc
</span><a href="#local-6989586621681304952"><span class="hs-identifier hs-var">get_pat</span></a></span><span> </span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681304931"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1342"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304926"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a b c. String -&gt; (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><a href="GHC.Utils.Misc.html#zipWithEqual"><span class="hs-identifier hs-var">zipWithEqual</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkStmt&quot;</span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
-&gt; (SyntaxExpr GhcTc, ApplicativeArg GhcTc)
-&gt; (SyntaxExpr GhcTc, ApplicativeArg GhcTc)
</span><a href="#local-6989586621681304947"><span class="hs-identifier hs-var">replace_pat</span></a></span><span>
</span><span id="line-1343"></span><span>                                        </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681304925"><span class="hs-identifier hs-var">new_pats</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681304929"><span class="hs-identifier hs-var">new_args_rev</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1344"></span><span>
</span><span id="line-1345"></span><span>     </span><span class="hs-comment">-- these need to go backward, because if any operators are higher-rank,</span><span>
</span><span id="line-1346"></span><span>     </span><span class="hs-comment">-- later operators may introduce skolems that are in scope for earlier</span><span>
</span><span id="line-1347"></span><span>     </span><span class="hs-comment">-- arguments</span><span>
</span><span id="line-1348"></span><span>    </span><span id="local-6989586621681304928"><span class="annot"><span class="annottext">zonk_args_rev :: ZonkEnv
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
</span><a href="#local-6989586621681304928"><span class="hs-identifier hs-var hs-var">zonk_args_rev</span></a></span></span><span> </span><span id="local-6989586621681304918"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304918"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681304917"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304917"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304916"><span class="annot"><span class="annottext">ApplicativeArg GhcTc
</span><a href="#local-6989586621681304916"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681304915"><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681304915"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1349"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304914"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304914"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304913"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304913"><span class="hs-identifier hs-var">new_op</span></a></span></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304918"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304917"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-1350"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304912"><span class="annot"><span class="annottext">ApplicativeArg GhcTc
</span><a href="#local-6989586621681304912"><span class="hs-identifier hs-var">new_arg</span></a></span></span><span>                </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; ApplicativeArg GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ApplicativeArg GhcTc)
</span><a href="#local-6989586621681304911"><span class="hs-identifier hs-var">zonk_arg</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304914"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">ApplicativeArg GhcTc
</span><a href="#local-6989586621681304916"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1351"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304910"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304910"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304909"><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681304909"><span class="hs-identifier hs-var">new_args</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
</span><a href="#local-6989586621681304928"><span class="hs-identifier hs-var">zonk_args_rev</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304914"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681304915"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1352"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304910"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304913"><span class="hs-identifier hs-var">new_op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ApplicativeArg GhcTc
</span><a href="#local-6989586621681304912"><span class="hs-identifier hs-var">new_arg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681304909"><span class="hs-identifier hs-var">new_args</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1353"></span><span>    </span><span class="annot"><a href="#local-6989586621681304928"><span class="hs-identifier hs-var">zonk_args_rev</span></a></span><span> </span><span id="local-6989586621681304908"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304908"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304908"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1354"></span><span>
</span><span id="line-1355"></span><span>    </span><span id="local-6989586621681304911"><span class="annot"><span class="annottext">zonk_arg :: ZonkEnv
-&gt; ApplicativeArg GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ApplicativeArg GhcTc)
</span><a href="#local-6989586621681304911"><span class="hs-identifier hs-var hs-var">zonk_arg</span></a></span></span><span> </span><span id="local-6989586621681304896"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304896"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-type">ApplicativeArgOne</span></a></span><span> </span><span id="local-6989586621681304895"><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
</span><a href="#local-6989586621681304895"><span class="hs-identifier hs-var">fail_op</span></a></span></span><span> </span><span id="local-6989586621681304894"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304894"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681304893"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681304893"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681304892"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681304892"><span class="hs-identifier hs-var">isBody</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1356"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304891"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681304891"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304896"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681304893"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1357"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304890"><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681304890"><span class="hs-identifier hs-var">new_fail</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#forM"><span class="hs-identifier hs-var">forM</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
</span><a href="#local-6989586621681304895"><span class="hs-identifier hs-var">fail_op</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681304888"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304888"><span class="hs-identifier hs-var">old_fail</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1358"></span><span>              </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304887"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304887"><span class="hs-identifier hs-var">fail'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304896"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304888"><span class="hs-identifier hs-var">old_fail</span></a></span><span>
</span><span id="line-1359"></span><span>                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304887"><span class="hs-identifier hs-var">fail'</span></a></span><span>
</span><span id="line-1360"></span><span>                 </span><span class="hs-special">}</span><span>
</span><span id="line-1361"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL.
XApplicativeArgOne idL
-&gt; LPat idL -&gt; LHsExpr idL -&gt; Bool -&gt; ApplicativeArg idL
</span><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-var">ApplicativeArgOne</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681304890"><span class="hs-identifier hs-var">new_fail</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304894"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681304891"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681304892"><span class="hs-identifier hs-var">isBody</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1362"></span><span>    </span><span class="annot"><a href="#local-6989586621681304911"><span class="hs-identifier hs-var">zonk_arg</span></a></span><span> </span><span id="local-6989586621681304886"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304886"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-type">ApplicativeArgMany</span></a></span><span> </span><span id="local-6989586621681304885"><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
</span><a href="#local-6989586621681304885"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681304884"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681304884"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span id="local-6989586621681304883"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681304883"><span class="hs-identifier hs-var">ret</span></a></span></span><span> </span><span id="local-6989586621681304882"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304882"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681304881"><span class="annot"><span class="annottext">HsStmtContext (ApplicativeArgStmCtxPass GhcTc)
</span><a href="#local-6989586621681304881"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1363"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304880"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304880"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304879"><span class="annot"><span class="annottext">[GenLocated
   (Anno (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc))))
   (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681304879"><span class="hs-identifier hs-var">new_stmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
ZonkEnv
-&gt; (ZonkEnv
    -&gt; LocatedA (body GhcTc) -&gt; TcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (LocatedA (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304886"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681304884"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1364"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304878"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681304878"><span class="hs-identifier hs-var">new_ret</span></a></span></span><span>           </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304880"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681304883"><span class="hs-identifier hs-var">ret</span></a></span><span>
</span><span id="line-1365"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL.
XApplicativeArgMany idL
-&gt; [ExprLStmt idL]
-&gt; HsExpr idL
-&gt; LPat idL
-&gt; HsStmtContext (ApplicativeArgStmCtxPass idL)
-&gt; ApplicativeArg idL
</span><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-var">ApplicativeArgMany</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
</span><a href="#local-6989586621681304885"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (Anno (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc))))
   (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681304879"><span class="hs-identifier hs-var">new_stmts</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681304878"><span class="hs-identifier hs-var">new_ret</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304882"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext (ApplicativeArgStmCtxPass GhcTc)
</span><a href="#local-6989586621681304881"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1366"></span><span>
</span><span id="line-1367"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1368"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkRecFields"><span class="hs-identifier hs-type">zonkRecFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsRecordBinds"><span class="hs-identifier hs-type">HsRecordBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsRecordBinds"><span class="hs-identifier hs-type">HsRecordBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1369"></span><span id="zonkRecFields"><span class="annot"><span class="annottext">zonkRecFields :: ZonkEnv -&gt; HsRecordBinds GhcTc -&gt; TcM (HsRecordBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRecFields"><span class="hs-identifier hs-var hs-var">zonkRecFields</span></a></span></span><span> </span><span id="local-6989586621681304877"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304877"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span id="local-6989586621681304875"><span class="annot"><span class="annottext">[LHsRecField GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621681304875"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span id="local-6989586621681304874"><span class="annot"><span class="annottext">Maybe (Located ConTag)
</span><a href="#local-6989586621681304874"><span class="hs-identifier hs-var">dd</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1370"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304873"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField' (FieldOcc GhcTc) (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681304873"><span class="hs-identifier hs-var">flds'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA
  (HsRecField' (FieldOcc GhcTc) (LocatedA (HsExpr GhcTc)))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (GenLocated
        SrcSpanAnnA
        (HsRecField' (FieldOcc GhcTc) (LocatedA (HsExpr GhcTc))))
</span><a href="#local-6989586621681304872"><span class="hs-identifier hs-var">zonk_rbind</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsRecField GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621681304875"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-1371"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p arg.
[LHsRecField p arg] -&gt; Maybe (Located ConTag) -&gt; HsRecFields p arg
</span><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-var">HsRecFields</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField' (FieldOcc GhcTc) (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621681304873"><span class="hs-identifier hs-var">flds'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Located ConTag)
</span><a href="#local-6989586621681304874"><span class="hs-identifier hs-var">dd</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1372"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1373"></span><span>    </span><span id="local-6989586621681304872"><span class="annot"><span class="annottext">zonk_rbind :: GenLocated
  SrcSpanAnnA
  (HsRecField' (FieldOcc GhcTc) (LocatedA (HsExpr GhcTc)))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (GenLocated
        SrcSpanAnnA
        (HsRecField' (FieldOcc GhcTc) (LocatedA (HsExpr GhcTc))))
</span><a href="#local-6989586621681304872"><span class="hs-identifier hs-var hs-var">zonk_rbind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681304871"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681304871"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681304870"><span class="annot"><span class="annottext">HsRecField' (FieldOcc GhcTc) (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681304870"><span class="hs-identifier hs-var">fld</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1374"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304869"><span class="annot"><span class="annottext">Located (FieldOcc GhcTc)
</span><a href="#local-6989586621681304869"><span class="hs-identifier hs-var">new_id</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; FieldOcc GhcTc -&gt; TcM (FieldOcc GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkFieldOcc"><span class="hs-identifier hs-var">zonkFieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304877"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id arg. HsRecField' id arg -&gt; Located id
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldLbl"><span class="hs-identifier hs-var">hsRecFieldLbl</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecField' (FieldOcc GhcTc) (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681304870"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1375"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304867"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681304867"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304877"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id arg. HsRecField' id arg -&gt; arg
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var">hsRecFieldArg</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecField' (FieldOcc GhcTc) (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681304870"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1376"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681304871"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsRecField' (FieldOcc GhcTc) (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681304870"><span class="hs-identifier hs-var">fld</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsRecFieldLbl :: Located (FieldOcc GhcTc)
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldLbl"><span class="hs-identifier hs-var">hsRecFieldLbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Located (FieldOcc GhcTc)
</span><a href="#local-6989586621681304869"><span class="hs-identifier hs-var">new_id</span></a></span><span>
</span><span id="line-1377"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hsRecFieldArg :: LocatedA (HsExpr GhcTc)
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var">hsRecFieldArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681304867"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1378"></span><span>
</span><span id="line-1379"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkRecUpdFields"><span class="hs-identifier hs-type">zonkRecUpdFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecUpdField"><span class="hs-identifier hs-type">LHsRecUpdField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1380"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecUpdField"><span class="hs-identifier hs-type">LHsRecUpdField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1381"></span><span id="zonkRecUpdFields"><span class="annot"><span class="annottext">zonkRecUpdFields :: ZonkEnv -&gt; [LHsRecUpdField GhcTc] -&gt; TcM [LHsRecUpdField GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRecUpdFields"><span class="hs-identifier hs-var hs-var">zonkRecUpdFields</span></a></span></span><span> </span><span id="local-6989586621681304865"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304865"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA
  (HsRecField' (AmbiguousFieldOcc GhcTc) (LocatedA (HsExpr GhcTc)))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (GenLocated
        SrcSpanAnnA
        (HsRecField' (AmbiguousFieldOcc GhcTc) (LocatedA (HsExpr GhcTc))))
</span><a href="#local-6989586621681304864"><span class="hs-identifier hs-var">zonk_rbind</span></a></span><span>
</span><span id="line-1382"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1383"></span><span>    </span><span id="local-6989586621681304864"><span class="annot"><span class="annottext">zonk_rbind :: GenLocated
  SrcSpanAnnA
  (HsRecField' (AmbiguousFieldOcc GhcTc) (LocatedA (HsExpr GhcTc)))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (GenLocated
        SrcSpanAnnA
        (HsRecField' (AmbiguousFieldOcc GhcTc) (LocatedA (HsExpr GhcTc))))
</span><a href="#local-6989586621681304864"><span class="hs-identifier hs-var hs-var">zonk_rbind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681304863"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681304863"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681304862"><span class="annot"><span class="annottext">HsRecField' (AmbiguousFieldOcc GhcTc) (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681304862"><span class="hs-identifier hs-var">fld</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1384"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304861"><span class="annot"><span class="annottext">Located (FieldOcc GhcTc)
</span><a href="#local-6989586621681304861"><span class="hs-identifier hs-var">new_id</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; FieldOcc GhcTc -&gt; TcM (FieldOcc GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkFieldOcc"><span class="hs-identifier hs-var">zonkFieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304865"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall arg.
HsRecField' (AmbiguousFieldOcc GhcTc) arg -&gt; LFieldOcc GhcTc
</span><a href="GHC.Hs.Pat.html#hsRecUpdFieldOcc"><span class="hs-identifier hs-var">hsRecUpdFieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecField' (AmbiguousFieldOcc GhcTc) (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681304862"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1385"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304859"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681304859"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304865"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id arg. HsRecField' id arg -&gt; arg
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var">hsRecFieldArg</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecField' (AmbiguousFieldOcc GhcTc) (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681304862"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1386"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681304863"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsRecField' (AmbiguousFieldOcc GhcTc) (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621681304862"><span class="hs-identifier hs-var">fld</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsRecFieldLbl :: Located (AmbiguousFieldOcc GhcTc)
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldLbl"><span class="hs-identifier hs-var">hsRecFieldLbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcTc -&gt; AmbiguousFieldOcc GhcTc
</span><a href="GHC.Hs.Type.html#ambiguousFieldOcc"><span class="hs-identifier hs-var">ambiguousFieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Located (FieldOcc GhcTc)
</span><a href="#local-6989586621681304861"><span class="hs-identifier hs-var">new_id</span></a></span><span>
</span><span id="line-1387"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hsRecFieldArg :: LocatedA (HsExpr GhcTc)
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var">hsRecFieldArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681304859"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1388"></span><span>
</span><span id="line-1389"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1390"></span><span id="local-6989586621681307423"><span id="local-6989586621681307424"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#mapIPNameTc"><span class="hs-identifier hs-type">mapIPNameTc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681307424"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681307423"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsIPName"><span class="hs-identifier hs-type">HsIPName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681307424"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1391"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsIPName"><span class="hs-identifier hs-type">HsIPName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681307423"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1392"></span><span id="mapIPNameTc"><span class="annot"><span class="annottext">mapIPNameTc :: forall a b.
(a -&gt; TcM b)
-&gt; Either (Located HsIPName) a -&gt; TcM (Either (Located HsIPName) b)
</span><a href="GHC.Tc.Utils.Zonk.html#mapIPNameTc"><span class="hs-identifier hs-var hs-var">mapIPNameTc</span></a></span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TcM b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621681304854"><span class="annot"><span class="annottext">Located HsIPName
</span><a href="#local-6989586621681304854"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><a href="../../base-4.16.3.0/src/Data-Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">Located HsIPName
</span><a href="#local-6989586621681304854"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1393"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#mapIPNameTc"><span class="hs-identifier hs-var">mapIPNameTc</span></a></span><span> </span><span id="local-6989586621681304853"><span class="annot"><span class="annottext">a -&gt; TcM b
</span><a href="#local-6989586621681304853"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/Data-Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621681304852"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681304852"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681304851"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681304851"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">a -&gt; TcM b
</span><a href="#local-6989586621681304853"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681304852"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1394"></span><span>                             </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><a href="../../base-4.16.3.0/src/Data-Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681304851"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1395"></span><span>
</span><span id="line-1396"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[BackSubst-Pats]{Patterns}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1403"></span><span>
</span><span id="line-1404"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-type">zonkPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1405"></span><span class="hs-comment">-- Extend the environment as we go, because it's possible for one</span><span>
</span><span id="line-1406"></span><span class="hs-comment">-- pattern to bind something that is used in another (inside or</span><span>
</span><span id="line-1407"></span><span class="hs-comment">-- to the right)</span><span>
</span><span id="line-1408"></span><span id="zonkPat"><span class="annot"><span class="annottext">zonkPat :: ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var hs-var">zonkPat</span></a></span></span><span> </span><span id="local-6989586621681304850"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304850"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304849"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304849"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c.
(a -&gt; TcM (b, c)) -&gt; LocatedA a -&gt; TcM (b, LocatedA c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocSndMA"><span class="hs-identifier hs-var">wrapLocSndMA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Pat GhcTc -&gt; TcM (ZonkEnv, Pat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304850"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304849"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1409"></span><span>
</span><span id="line-1410"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-type">zonk_pat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1411"></span><span id="zonk_pat"><span class="annot"><span class="annottext">zonk_pat :: ZonkEnv -&gt; Pat GhcTc -&gt; TcM (ZonkEnv, Pat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var hs-var">zonk_pat</span></a></span></span><span> </span><span id="local-6989586621681304847"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304847"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ParPat"><span class="hs-identifier hs-type">ParPat</span></a></span><span> </span><span id="local-6989586621681304846"><span class="annot"><span class="annottext">XParPat GhcTc
</span><a href="#local-6989586621681304846"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681304845"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304845"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1412"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304844"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304844"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304843"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304843"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304847"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304845"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1413"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304844"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall p. XParPat p -&gt; LPat p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#ParPat"><span class="hs-identifier hs-var">ParPat</span></a></span><span> </span><span class="annot"><span class="annottext">XParPat GhcTc
</span><a href="#local-6989586621681304846"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304843"><span class="hs-identifier hs-var">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1414"></span><span>
</span><span id="line-1415"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304842"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304842"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#WildPat"><span class="hs-identifier hs-type">WildPat</span></a></span><span> </span><span id="local-6989586621681304841"><span class="annot"><span class="annottext">XWildPat GhcTc
</span><a href="#local-6989586621681304841"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1416"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304840"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304840"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304842"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XWildPat GhcTc
</span><a href="#local-6989586621681304841"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1417"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.TcMType.html#ensureNotLevPoly"><span class="hs-identifier hs-var">ensureNotLevPoly</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304840"><span class="hs-identifier hs-var">ty'</span></a></span><span>
</span><span id="line-1418"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In a wildcard pattern&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1419"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304842"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall p. XWildPat p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#WildPat"><span class="hs-identifier hs-var">WildPat</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304840"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1420"></span><span>
</span><span id="line-1421"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304839"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304839"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-type">VarPat</span></a></span><span> </span><span id="local-6989586621681304838"><span class="annot"><span class="annottext">XVarPat GhcTc
</span><a href="#local-6989586621681304838"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681304837"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681304837"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681304836"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304836"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1422"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304835"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304835"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304839"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304836"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1423"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-var">extendIdZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304839"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304835"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall p. XVarPat p -&gt; LIdP p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-var">VarPat</span></a></span><span> </span><span class="annot"><span class="annottext">XVarPat GhcTc
</span><a href="#local-6989586621681304838"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681304837"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304835"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1424"></span><span>
</span><span id="line-1425"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304834"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304834"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LazyPat"><span class="hs-identifier hs-type">LazyPat</span></a></span><span> </span><span id="local-6989586621681304833"><span class="annot"><span class="annottext">XLazyPat GhcTc
</span><a href="#local-6989586621681304833"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681304832"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304832"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1426"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304831"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304831"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304830"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304830"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304834"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304832"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1427"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304831"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">forall p. XLazyPat p -&gt; LPat p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#LazyPat"><span class="hs-identifier hs-var">LazyPat</span></a></span><span> </span><span class="annot"><span class="annottext">XLazyPat GhcTc
</span><a href="#local-6989586621681304833"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304830"><span class="hs-identifier hs-var">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1428"></span><span>
</span><span id="line-1429"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304829"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304829"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#BangPat"><span class="hs-identifier hs-type">BangPat</span></a></span><span> </span><span id="local-6989586621681304828"><span class="annot"><span class="annottext">XBangPat GhcTc
</span><a href="#local-6989586621681304828"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681304827"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304827"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1430"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304826"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304826"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304825"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304825"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304829"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304827"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1431"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304826"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">forall p. XBangPat p -&gt; LPat p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#BangPat"><span class="hs-identifier hs-var">BangPat</span></a></span><span> </span><span class="annot"><span class="annottext">XBangPat GhcTc
</span><a href="#local-6989586621681304828"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304825"><span class="hs-identifier hs-var">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1432"></span><span>
</span><span id="line-1433"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304824"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304824"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#AsPat"><span class="hs-identifier hs-type">AsPat</span></a></span><span> </span><span id="local-6989586621681304823"><span class="annot"><span class="annottext">XAsPat GhcTc
</span><a href="#local-6989586621681304823"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681304822"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681304822"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681304821"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304821"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681304820"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304820"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1434"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304819"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304819"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304824"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304821"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1435"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304818"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304818"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304817"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304817"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-var">extendIdZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304824"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304819"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304820"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1436"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304818"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall p. XAsPat p -&gt; LIdP p -&gt; LPat p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#AsPat"><span class="hs-identifier hs-var">AsPat</span></a></span><span> </span><span class="annot"><span class="annottext">XAsPat GhcTc
</span><a href="#local-6989586621681304823"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681304822"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304819"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304817"><span class="hs-identifier hs-var">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1437"></span><span>
</span><span id="line-1438"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304816"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304816"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span> </span><span id="local-6989586621681304815"><span class="annot"><span class="annottext">XViewPat GhcTc
</span><a href="#local-6989586621681304815"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681304814"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681304814"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681304813"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304813"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1439"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304812"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681304812"><span class="hs-identifier hs-var">expr'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304816"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681304814"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1440"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304811"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304811"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304810"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304810"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304816"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304813"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1441"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304809"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304809"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304816"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XViewPat GhcTc
</span><a href="#local-6989586621681304815"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1442"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304811"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall p. XViewPat p -&gt; LHsExpr p -&gt; LPat p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-var">ViewPat</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304809"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681304812"><span class="hs-identifier hs-var">expr'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304810"><span class="hs-identifier hs-var">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1443"></span><span>
</span><span id="line-1444"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304808"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304808"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ListPatTc"><span class="hs-identifier hs-type">ListPatTc</span></a></span><span> </span><span id="local-6989586621681304807"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304807"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (Kind, SyntaxExpr GhcTc)
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681304806"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681304806"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1445"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304805"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304805"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304808"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304807"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1446"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304804"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304804"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304803"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681304803"><span class="hs-identifier hs-var">pats'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304808"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681304806"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1447"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304804"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall p. XListPat p -&gt; [LPat p] -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-var">ListPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Maybe (Kind, SyntaxExpr GhcTc) -&gt; ListPatTc
</span><a href="GHC.Hs.Pat.html#ListPatTc"><span class="hs-identifier hs-var">ListPatTc</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304805"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681304803"><span class="hs-identifier hs-var">pats'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1448"></span><span>
</span><span id="line-1449"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304802"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304802"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ListPatTc"><span class="hs-identifier hs-type">ListPatTc</span></a></span><span> </span><span id="local-6989586621681304801"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304801"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304800"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304800"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681304799"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304799"><span class="hs-identifier hs-var">wit</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681304798"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681304798"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1450"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304797"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304797"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304796"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304796"><span class="hs-identifier hs-var">wit'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304802"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304799"><span class="hs-identifier hs-var">wit</span></a></span><span>
</span><span id="line-1451"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304795"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304795"><span class="hs-identifier hs-var">ty2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304797"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304800"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1452"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304794"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304794"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304797"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304801"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1453"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304793"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304793"><span class="hs-identifier hs-var">env''</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304792"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681304792"><span class="hs-identifier hs-var">pats'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304797"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681304798"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1454"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304793"><span class="hs-identifier hs-var">env''</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall p. XListPat p -&gt; [LPat p] -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-var">ListPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Maybe (Kind, SyntaxExpr GhcTc) -&gt; ListPatTc
</span><a href="GHC.Hs.Pat.html#ListPatTc"><span class="hs-identifier hs-var">ListPatTc</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304794"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304795"><span class="hs-identifier hs-var">ty2'</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304796"><span class="hs-identifier hs-var">wit'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681304792"><span class="hs-identifier hs-var">pats'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1455"></span><span>
</span><span id="line-1456"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304791"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304791"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span id="local-6989586621681304790"><span class="annot"><span class="annottext">XTuplePat GhcTc
</span><a href="#local-6989586621681304790"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621681304789"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681304789"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span id="local-6989586621681304788"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621681304788"><span class="hs-identifier hs-var">boxed</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1457"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304787"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681304787"><span class="hs-identifier hs-var">tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304791"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">XTuplePat GhcTc
</span><a href="#local-6989586621681304790"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1458"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304786"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304786"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304785"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681304785"><span class="hs-identifier hs-var">pats'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304791"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681304789"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1459"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304786"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall p. XTuplePat p -&gt; [LPat p] -&gt; Boxity -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#TuplePat"><span class="hs-identifier hs-var">TuplePat</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681304787"><span class="hs-identifier hs-var">tys'</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681304785"><span class="hs-identifier hs-var">pats'</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621681304788"><span class="hs-identifier hs-var">boxed</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1460"></span><span>
</span><span id="line-1461"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304784"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304784"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SumPat"><span class="hs-identifier hs-type">SumPat</span></a></span><span> </span><span id="local-6989586621681304783"><span class="annot"><span class="annottext">XSumPat GhcTc
</span><a href="#local-6989586621681304783"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621681304782"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304782"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681304781"><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681304781"><span class="hs-identifier hs-var">alt</span></a></span></span><span> </span><span id="local-6989586621681304780"><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681304780"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1462"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304779"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681304779"><span class="hs-identifier hs-var">tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304784"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">XSumPat GhcTc
</span><a href="#local-6989586621681304783"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1463"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304778"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304778"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304777"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304777"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304784"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304782"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1464"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304778"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall p. XSumPat p -&gt; LPat p -&gt; ConTag -&gt; ConTag -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#SumPat"><span class="hs-identifier hs-var">SumPat</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681304779"><span class="hs-identifier hs-var">tys'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304777"><span class="hs-identifier hs-var">pat'</span></a></span><span> </span><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681304781"><span class="hs-identifier hs-var">alt</span></a></span><span> </span><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681304780"><span class="hs-identifier hs-var">arity</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1465"></span><span>
</span><span id="line-1466"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304776"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304776"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304775"><span class="annot"><span class="annottext">p :: Pat GhcTc
</span><a href="#local-6989586621681304775"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_con :: forall p. Pat p -&gt; XRec p (ConLikeP p)
</span><a href="Language.Haskell.Syntax.Pat.html#pat_con"><span class="hs-identifier hs-var">pat_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681304774"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681304774"><span class="hs-identifier hs-var">con</span></a></span></span><span>
</span><span id="line-1467"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_args :: forall p. Pat p -&gt; HsConPatDetails p
</span><a href="Language.Haskell.Syntax.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304772"><span class="annot"><span class="annottext">HsConPatDetails GhcTc
</span><a href="#local-6989586621681304772"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-1468"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_con_ext :: forall p. Pat p -&gt; XConPat p
</span><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304771"><span class="annot"><span class="annottext">p' :: XConPat GhcTc
</span><a href="#local-6989586621681304771"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ConPatTc"><span class="hs-identifier hs-type">ConPatTc</span></a></span><span>
</span><span id="line-1469"></span><span>                         </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cpt_tvs :: ConPatTc -&gt; [TcTyVar]
</span><a href="GHC.Hs.Pat.html#cpt_tvs"><span class="hs-identifier hs-var">cpt_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304769"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304769"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span>
</span><span id="line-1470"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_dicts :: ConPatTc -&gt; [TcTyVar]
</span><a href="GHC.Hs.Pat.html#cpt_dicts"><span class="hs-identifier hs-var">cpt_dicts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304767"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304767"><span class="hs-identifier hs-var">evs</span></a></span></span><span>
</span><span id="line-1471"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_binds :: ConPatTc -&gt; TcEvBinds
</span><a href="GHC.Hs.Pat.html#cpt_binds"><span class="hs-identifier hs-var">cpt_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304765"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681304765"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-1472"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_wrap :: ConPatTc -&gt; HsWrapper
</span><a href="GHC.Hs.Pat.html#cpt_wrap"><span class="hs-identifier hs-var">cpt_wrap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304763"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681304763"><span class="hs-identifier hs-var">wrapper</span></a></span></span><span>
</span><span id="line-1473"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_arg_tys :: ConPatTc -&gt; [Kind]
</span><a href="GHC.Hs.Pat.html#cpt_arg_tys"><span class="hs-identifier hs-var">cpt_arg_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304762"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681304762"><span class="hs-identifier hs-var">tys</span></a></span></span><span>
</span><span id="line-1474"></span><span>                         </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1475"></span><span>                       </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1476"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">all</span><span> </span><span class="hs-identifier">isImmutableTyVar</span><span> </span><span class="hs-identifier">tyvars</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1477"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304761"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681304761"><span class="hs-identifier hs-var">new_tys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304776"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681304762"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1478"></span><span>
</span><span id="line-1479"></span><span>          </span><span class="hs-comment">-- an unboxed tuple pattern (but only an unboxed tuple pattern)</span><span>
</span><span id="line-1480"></span><span>          </span><span class="hs-comment">-- might have levity-polymorphic arguments. Check for this badness.</span><span>
</span><span id="line-1481"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681304774"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1482"></span><span>            </span><span class="annot"><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-type">RealDataCon</span></a></span><span> </span><span id="local-6989586621681304759"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681304759"><span class="hs-identifier hs-var">dc</span></a></span></span><span>
</span><span id="line-1483"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcTyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isUnboxedTupleTyCon"><span class="hs-identifier hs-var">isUnboxedTupleTyCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; TcTyCon
</span><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier hs-var">dataConTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681304759"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1484"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Kind -&gt; TcM ()
</span><a href="GHC.Tc.Utils.TcMType.html#checkForLevPoly"><span class="hs-identifier hs-var">checkForLevPoly</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681304754"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Kind] -&gt; [Kind]
</span><a href="GHC.Core.Type.html#dropRuntimeRepArgs"><span class="hs-identifier hs-var">dropRuntimeRepArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681304761"><span class="hs-identifier hs-var">new_tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1485"></span><span>            </span><span class="annot"><span class="annottext">ConLike
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1486"></span><span>
</span><span id="line-1487"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304752"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304752"><span class="hs-identifier hs-var">env0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304751"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304751"><span class="hs-identifier hs-var">new_tyvars</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; TcM (ZonkEnv, [TcTyVar])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrsX"><span class="hs-identifier hs-var">zonkTyBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304776"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304769"><span class="hs-identifier hs-var">tyvars</span></a></span><span>
</span><span id="line-1488"></span><span>          </span><span class="hs-comment">-- Must zonk the existential variables, because their</span><span>
</span><span id="line-1489"></span><span>          </span><span class="hs-comment">-- /kind/ need potential zonking.</span><span>
</span><span id="line-1490"></span><span>          </span><span class="hs-comment">-- cf typecheck/should_compile/tc221.hs</span><span>
</span><span id="line-1491"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304750"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304750"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304749"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304749"><span class="hs-identifier hs-var">new_evs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; TcM (ZonkEnv, [TcTyVar])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrsX"><span class="hs-identifier hs-var">zonkEvBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304752"><span class="hs-identifier hs-var">env0</span></a></span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304767"><span class="hs-identifier hs-var">evs</span></a></span><span>
</span><span id="line-1492"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304748"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304748"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304747"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681304747"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, TcEvBinds)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds"><span class="hs-identifier hs-var">zonkTcEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304750"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681304765"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-1493"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304746"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304746"><span class="hs-identifier hs-var">env3</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304745"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681304745"><span class="hs-identifier hs-var">new_wrapper</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304748"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681304763"><span class="hs-identifier hs-var">wrapper</span></a></span><span>
</span><span id="line-1494"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304744"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304744"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304743"><span class="annot"><span class="annottext">HsConDetails
  (HsPatSigType GhcRn)
  (GenLocated SrcSpanAnnA (Pat GhcTc))
  (HsRecFields GhcTc (GenLocated SrcSpanAnnA (Pat GhcTc)))
</span><a href="#local-6989586621681304743"><span class="hs-identifier hs-var">new_args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; HsConPatDetails GhcTc -&gt; TcM (ZonkEnv, HsConPatDetails GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkConStuff"><span class="hs-identifier hs-var">zonkConStuff</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304746"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">HsConPatDetails GhcTc
</span><a href="#local-6989586621681304772"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1495"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304744"><span class="hs-identifier hs-var">env'</span></a></span><span>
</span><span id="line-1496"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681304775"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1497"></span><span>                 </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_args :: HsConPatDetails GhcTc
</span><a href="Language.Haskell.Syntax.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsConDetails
  (HsPatSigType GhcRn)
  (GenLocated SrcSpanAnnA (Pat GhcTc))
  (HsRecFields GhcTc (GenLocated SrcSpanAnnA (Pat GhcTc)))
</span><a href="#local-6989586621681304743"><span class="hs-identifier hs-var">new_args</span></a></span><span>
</span><span id="line-1498"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_con_ext :: XConPat GhcTc
</span><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XConPat GhcTc
</span><a href="#local-6989586621681304771"><span class="hs-identifier hs-var">p'</span></a></span><span>
</span><span id="line-1499"></span><span>                   </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cpt_arg_tys :: [Kind]
</span><a href="GHC.Hs.Pat.html#cpt_arg_tys"><span class="hs-identifier hs-var">cpt_arg_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681304761"><span class="hs-identifier hs-var">new_tys</span></a></span><span>
</span><span id="line-1500"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_tvs :: [TcTyVar]
</span><a href="GHC.Hs.Pat.html#cpt_tvs"><span class="hs-identifier hs-var">cpt_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304751"><span class="hs-identifier hs-var">new_tyvars</span></a></span><span>
</span><span id="line-1501"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_dicts :: [TcTyVar]
</span><a href="GHC.Hs.Pat.html#cpt_dicts"><span class="hs-identifier hs-var">cpt_dicts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304749"><span class="hs-identifier hs-var">new_evs</span></a></span><span>
</span><span id="line-1502"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_binds :: TcEvBinds
</span><a href="GHC.Hs.Pat.html#cpt_binds"><span class="hs-identifier hs-var">cpt_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681304747"><span class="hs-identifier hs-var">new_binds</span></a></span><span>
</span><span id="line-1503"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_wrap :: HsWrapper
</span><a href="GHC.Hs.Pat.html#cpt_wrap"><span class="hs-identifier hs-var">cpt_wrap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681304745"><span class="hs-identifier hs-var">new_wrapper</span></a></span><span>
</span><span id="line-1504"></span><span>                   </span><span class="hs-special">}</span><span>
</span><span id="line-1505"></span><span>                 </span><span class="hs-special">}</span><span>
</span><span id="line-1506"></span><span>               </span><span class="hs-special">)</span><span>
</span><span id="line-1507"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1508"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1509"></span><span>    </span><span id="local-6989586621681304754"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621681304754"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the type of an element of an unboxed tuple pattern:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681304775"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1510"></span><span>
</span><span id="line-1511"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304740"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304740"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LitPat"><span class="hs-identifier hs-type">LitPat</span></a></span><span> </span><span id="local-6989586621681304739"><span class="annot"><span class="annottext">XLitPat GhcTc
</span><a href="#local-6989586621681304739"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681304738"><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681304738"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304740"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall p. XLitPat p -&gt; HsLit p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#LitPat"><span class="hs-identifier hs-var">LitPat</span></a></span><span> </span><span class="annot"><span class="annottext">XLitPat GhcTc
</span><a href="#local-6989586621681304739"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681304738"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1512"></span><span>
</span><span id="line-1513"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304737"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304737"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SigPat"><span class="hs-identifier hs-type">SigPat</span></a></span><span> </span><span id="local-6989586621681304736"><span class="annot"><span class="annottext">XSigPat GhcTc
</span><a href="#local-6989586621681304736"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681304735"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304735"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681304734"><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc GhcTc)
</span><a href="#local-6989586621681304734"><span class="hs-identifier hs-var">hs_ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1514"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304733"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304733"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304737"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XSigPat GhcTc
</span><a href="#local-6989586621681304736"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1515"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304732"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304732"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304731"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304731"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304737"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304735"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1516"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304732"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall p. XSigPat p -&gt; LPat p -&gt; HsPatSigType (NoGhcTc p) -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#SigPat"><span class="hs-identifier hs-var">SigPat</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304733"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304731"><span class="hs-identifier hs-var">pat'</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc GhcTc)
</span><a href="#local-6989586621681304734"><span class="hs-identifier hs-var">hs_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1517"></span><span>
</span><span id="line-1518"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304730"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304730"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPat"><span class="hs-identifier hs-type">NPat</span></a></span><span> </span><span id="local-6989586621681304729"><span class="annot"><span class="annottext">XNPat GhcTc
</span><a href="#local-6989586621681304729"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681304728"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681304728"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681304727"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681304727"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681304726"><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="#local-6989586621681304726"><span class="hs-identifier hs-var">mb_neg</span></a></span></span><span> </span><span id="local-6989586621681304725"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304725"><span class="hs-identifier hs-var">eq_expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1519"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304724"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304724"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304723"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304723"><span class="hs-identifier hs-var">eq_expr'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304730"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304725"><span class="hs-identifier hs-var">eq_expr</span></a></span><span>
</span><span id="line-1520"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304722"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304722"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304721"><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681304721"><span class="hs-identifier hs-var">mb_neg'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="#local-6989586621681304726"><span class="hs-identifier hs-var">mb_neg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1521"></span><span>            </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304724"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1522"></span><span>            </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681304720"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304720"><span class="hs-identifier hs-var">n</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><a href="../../base-4.16.3.0/src/Control-Arrow.html#second"><span class="hs-identifier hs-var">second</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304724"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304720"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1523"></span><span>
</span><span id="line-1524"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304719"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681304719"><span class="hs-identifier hs-var">lit'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsOverLit GhcTc -&gt; TcM (HsOverLit GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkOverLit"><span class="hs-identifier hs-var">zonkOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304722"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681304727"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-1525"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304718"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304718"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304722"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">XNPat GhcTc
</span><a href="#local-6989586621681304729"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1526"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304722"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall p.
XNPat p
-&gt; XRec p (HsOverLit p)
-&gt; Maybe (SyntaxExpr p)
-&gt; SyntaxExpr p
-&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#NPat"><span class="hs-identifier hs-var">NPat</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304718"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681304728"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681304719"><span class="hs-identifier hs-var">lit'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681304721"><span class="hs-identifier hs-var">mb_neg'</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304723"><span class="hs-identifier hs-var">eq_expr'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1527"></span><span>
</span><span id="line-1528"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304717"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304717"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPlusKPat"><span class="hs-identifier hs-type">NPlusKPat</span></a></span><span> </span><span id="local-6989586621681304716"><span class="annot"><span class="annottext">XNPlusKPat GhcTc
</span><a href="#local-6989586621681304716"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681304715"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681304715"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681304714"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304714"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681304713"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681304713"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681304712"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681304712"><span class="hs-identifier hs-var">lit1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681304711"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681304711"><span class="hs-identifier hs-var">lit2</span></a></span></span><span> </span><span id="local-6989586621681304710"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304710"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681304709"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304709"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1529"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304708"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304708"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304707"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304707"><span class="hs-identifier hs-var">e1'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304717"><span class="hs-identifier hs-var">env</span></a></span><span>  </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304710"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1530"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304706"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304706"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304705"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304705"><span class="hs-identifier hs-var">e2'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304708"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681304709"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1531"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304704"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304704"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304706"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304714"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1532"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304703"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681304703"><span class="hs-identifier hs-var">lit1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsOverLit GhcTc -&gt; TcM (HsOverLit GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkOverLit"><span class="hs-identifier hs-var">zonkOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304706"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681304712"><span class="hs-identifier hs-var">lit1</span></a></span><span>
</span><span id="line-1533"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304702"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681304702"><span class="hs-identifier hs-var">lit2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsOverLit GhcTc -&gt; TcM (HsOverLit GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkOverLit"><span class="hs-identifier hs-var">zonkOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304706"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681304711"><span class="hs-identifier hs-var">lit2</span></a></span><span>
</span><span id="line-1534"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304701"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304701"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304706"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">XNPlusKPat GhcTc
</span><a href="#local-6989586621681304716"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1535"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-var">extendIdZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304706"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304704"><span class="hs-identifier hs-var">n'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1536"></span><span>                  </span><span class="annot"><span class="annottext">forall p.
XNPlusKPat p
-&gt; LIdP p
-&gt; XRec p (HsOverLit p)
-&gt; HsOverLit p
-&gt; SyntaxExpr p
-&gt; SyntaxExpr p
-&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#NPlusKPat"><span class="hs-identifier hs-var">NPlusKPat</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304701"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681304715"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304704"><span class="hs-identifier hs-var">n'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681304713"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681304703"><span class="hs-identifier hs-var">lit1'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681304702"><span class="hs-identifier hs-var">lit2'</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304707"><span class="hs-identifier hs-var">e1'</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681304705"><span class="hs-identifier hs-var">e2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1537"></span><span>
</span><span id="line-1538"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681304700"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304700"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#XPat"><span class="hs-identifier hs-type">XPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#CoPat"><span class="hs-identifier hs-type">CoPat</span></a></span><span> </span><span id="local-6989586621681304699"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681304699"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span> </span><span id="local-6989586621681304698"><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681304698"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681304697"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304697"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1539"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304696"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304696"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304695"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681304695"><span class="hs-identifier hs-var">co_fn'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304700"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681304699"><span class="hs-identifier hs-var">co_fn</span></a></span><span>
</span><span id="line-1540"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304694"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304694"><span class="hs-identifier hs-var">env''</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304693"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304693"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304696"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681304698"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1541"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304692"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304692"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304694"><span class="hs-identifier hs-var">env''</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304697"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1542"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304694"><span class="hs-identifier hs-var">env''</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall p. XXPat p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#XPat"><span class="hs-identifier hs-var">XPat</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; Pat GhcTc -&gt; Kind -&gt; CoPat
</span><a href="GHC.Hs.Pat.html#CoPat"><span class="hs-identifier hs-var">CoPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681304695"><span class="hs-identifier hs-var">co_fn'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304693"><span class="hs-identifier hs-var">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304692"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1543"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-1544"></span><span>
</span><span id="line-1545"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681304691"><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681304691"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonk_pat&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681304691"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1546"></span><span>
</span><span id="line-1547"></span><span class="hs-comment">---------------------------</span><span>
</span><span id="line-1548"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkConStuff"><span class="hs-identifier hs-type">zonkConStuff</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsConPatDetails"><span class="hs-identifier hs-type">HsConPatDetails</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-1549"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsConPatDetails"><span class="hs-identifier hs-type">HsConPatDetails</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1550"></span><span id="zonkConStuff"><span class="annot"><span class="annottext">zonkConStuff :: ZonkEnv
-&gt; HsConPatDetails GhcTc -&gt; TcM (ZonkEnv, HsConPatDetails GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkConStuff"><span class="hs-identifier hs-var hs-var">zonkConStuff</span></a></span></span><span> </span><span id="local-6989586621681304690"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304690"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span id="local-6989586621681304689"><span class="annot"><span class="annottext">[HsPatSigType (NoGhcTc GhcTc)]
</span><a href="#local-6989586621681304689"><span class="hs-identifier hs-var">tyargs</span></a></span></span><span> </span><span id="local-6989586621681304688"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681304688"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1551"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304687"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304687"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304686"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681304686"><span class="hs-identifier hs-var">pats'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304690"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681304688"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1552"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304687"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall tyarg arg rec.
[tyarg] -&gt; [arg] -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[HsPatSigType (NoGhcTc GhcTc)]
</span><a href="#local-6989586621681304689"><span class="hs-identifier hs-var">tyargs</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681304686"><span class="hs-identifier hs-var">pats'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1553"></span><span>
</span><span id="line-1554"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkConStuff"><span class="hs-identifier hs-var">zonkConStuff</span></a></span><span> </span><span id="local-6989586621681304685"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304685"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621681304684"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304684"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span id="local-6989586621681304683"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304683"><span class="hs-identifier hs-var">p2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1555"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304682"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304682"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304681"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304681"><span class="hs-identifier hs-var">p1'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304685"><span class="hs-identifier hs-var">env</span></a></span><span>  </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304684"><span class="hs-identifier hs-var">p1</span></a></span><span>
</span><span id="line-1556"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304680"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304680"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304679"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304679"><span class="hs-identifier hs-var">p2'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304682"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304683"><span class="hs-identifier hs-var">p2</span></a></span><span>
</span><span id="line-1557"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304680"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall tyarg arg rec. arg -&gt; arg -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-var">InfixCon</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304681"><span class="hs-identifier hs-var">p1'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304679"><span class="hs-identifier hs-var">p2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1558"></span><span>
</span><span id="line-1559"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkConStuff"><span class="hs-identifier hs-var">zonkConStuff</span></a></span><span> </span><span id="local-6989586621681304678"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304678"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span id="local-6989586621681304677"><span class="annot"><span class="annottext">[LHsRecField GhcTc (LPat GhcTc)]
</span><a href="#local-6989586621681304677"><span class="hs-identifier hs-var">rpats</span></a></span></span><span> </span><span id="local-6989586621681304676"><span class="annot"><span class="annottext">Maybe (Located ConTag)
</span><a href="#local-6989586621681304676"><span class="hs-identifier hs-var">dd</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1560"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304675"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304675"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304674"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681304674"><span class="hs-identifier hs-var">pats'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304678"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id arg. HsRecField' id arg -&gt; arg
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var">hsRecFieldArg</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsRecField GhcTc (LPat GhcTc)]
</span><a href="#local-6989586621681304677"><span class="hs-identifier hs-var">rpats</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1561"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681304673"><span class="annot"><span class="annottext">rpats' :: [GenLocated
   SrcSpanAnnA
   (HsRecField'
      (FieldOcc GhcTc) (GenLocated SrcSpanAnnA (Pat GhcTc)))]
</span><a href="#local-6989586621681304673"><span class="hs-identifier hs-var hs-var">rpats'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><a href="../../base-4.16.3.0/src/GHC-List.html#zipWith"><span class="hs-identifier hs-var">zipWith</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681304671"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681304671"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681304670"><span class="annot"><span class="annottext">HsRecField' (FieldOcc GhcTc) (GenLocated SrcSpanAnnA (Pat GhcTc))
</span><a href="#local-6989586621681304670"><span class="hs-identifier hs-var">rp</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681304669"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304669"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1562"></span><span>                                  </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681304671"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsRecField' (FieldOcc GhcTc) (GenLocated SrcSpanAnnA (Pat GhcTc))
</span><a href="#local-6989586621681304670"><span class="hs-identifier hs-var">rp</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsRecFieldArg :: GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var">hsRecFieldArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304669"><span class="hs-identifier hs-var">p'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1563"></span><span>                               </span><span class="annot"><span class="annottext">[LHsRecField GhcTc (LPat GhcTc)]
</span><a href="#local-6989586621681304677"><span class="hs-identifier hs-var">rpats</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681304674"><span class="hs-identifier hs-var">pats'</span></a></span><span>
</span><span id="line-1564"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304675"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall tyarg arg rec. rec -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-var">RecCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p arg.
[LHsRecField p arg] -&gt; Maybe (Located ConTag) -&gt; HsRecFields p arg
</span><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-var">HsRecFields</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField'
      (FieldOcc GhcTc) (GenLocated SrcSpanAnnA (Pat GhcTc)))]
</span><a href="#local-6989586621681304673"><span class="hs-identifier hs-var">rpats'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Located ConTag)
</span><a href="#local-6989586621681304676"><span class="hs-identifier hs-var">dd</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1565"></span><span>        </span><span class="hs-comment">-- Field selectors have declared types; hence no zonking</span><span>
</span><span id="line-1566"></span><span>
</span><span id="line-1567"></span><span class="hs-comment">---------------------------</span><span>
</span><span id="line-1568"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-type">zonkPats</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1569"></span><span id="zonkPats"><span class="annot"><span class="annottext">zonkPats :: ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var hs-var">zonkPats</span></a></span></span><span> </span><span id="local-6989586621681304668"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304668"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304668"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1570"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span id="local-6989586621681304667"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304667"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304666"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304666"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681304665"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681304665"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304664"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304664"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304663"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304663"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304667"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681304666"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1571"></span><span>                             </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304662"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304662"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304661"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681304661"><span class="hs-identifier hs-var">pats'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304664"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681304665"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1572"></span><span>                             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304662"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621681304663"><span class="hs-identifier hs-var">pat'</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621681304661"><span class="hs-identifier hs-var">pats'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1573"></span><span>
</span><span id="line-1574"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[BackSubst-Foreign]{Foreign exports}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1581"></span><span>
</span><span id="line-1582"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkForeignExports"><span class="hs-identifier hs-type">zonkForeignExports</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LForeignDecl"><span class="hs-identifier hs-type">LForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1583"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LForeignDecl"><span class="hs-identifier hs-type">LForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1584"></span><span id="zonkForeignExports"><span class="annot"><span class="annottext">zonkForeignExports :: ZonkEnv -&gt; [LForeignDecl GhcTc] -&gt; TcM [LForeignDecl GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkForeignExports"><span class="hs-identifier hs-var hs-var">zonkForeignExports</span></a></span></span><span> </span><span id="local-6989586621681304660"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304660"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304659"><span class="annot"><span class="annottext">[LForeignDecl GhcTc]
</span><a href="#local-6989586621681304659"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b ann.
(a -&gt; TcM b)
-&gt; GenLocated (SrcSpanAnn' ann) a
-&gt; TcRn (GenLocated (SrcSpanAnn' ann) b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocMA"><span class="hs-identifier hs-var">wrapLocMA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; ForeignDecl GhcTc -&gt; TcM (ForeignDecl GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkForeignExport"><span class="hs-identifier hs-var">zonkForeignExport</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304660"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LForeignDecl GhcTc]
</span><a href="#local-6989586621681304659"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-1585"></span><span>
</span><span id="line-1586"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkForeignExport"><span class="hs-identifier hs-type">zonkForeignExport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignDecl"><span class="hs-identifier hs-type">ForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignDecl"><span class="hs-identifier hs-type">ForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1587"></span><span id="zonkForeignExport"><span class="annot"><span class="annottext">zonkForeignExport :: ZonkEnv -&gt; ForeignDecl GhcTc -&gt; TcM (ForeignDecl GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkForeignExport"><span class="hs-identifier hs-var hs-var">zonkForeignExport</span></a></span></span><span> </span><span id="local-6989586621681304657"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304657"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignExport"><span class="hs-identifier hs-type">ForeignExport</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fd_name :: forall pass. ForeignDecl pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Decls.html#fd_name"><span class="hs-identifier hs-var">fd_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304654"><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621681304654"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_e_ext :: forall pass. ForeignDecl pass -&gt; XForeignExport pass
</span><a href="Language.Haskell.Syntax.Decls.html#fd_e_ext"><span class="hs-identifier hs-var">fd_e_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304652"><span class="annot"><span class="annottext">XForeignExport GhcTc
</span><a href="#local-6989586621681304652"><span class="hs-identifier hs-var">co</span></a></span></span><span>
</span><span id="line-1588"></span><span>                                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_fe :: forall pass. ForeignDecl pass -&gt; ForeignExport
</span><a href="Language.Haskell.Syntax.Decls.html#fd_fe"><span class="hs-identifier hs-var">fd_fe</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304650"><span class="annot"><span class="annottext">ForeignExport
</span><a href="#local-6989586621681304650"><span class="hs-identifier hs-var">spec</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1589"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignExport"><span class="hs-identifier hs-type">ForeignExport</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fd_name :: LIdP GhcTc
</span><a href="Language.Haskell.Syntax.Decls.html#fd_name"><span class="hs-identifier hs-var">fd_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; GenLocated SrcSpanAnnN TcTyVar -&gt; GenLocated SrcSpanAnnN TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLIdOcc"><span class="hs-identifier hs-var">zonkLIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304657"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621681304654"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-1590"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_sig_ty :: LHsSigType GhcTc
</span><a href="Language.Haskell.Syntax.Decls.html#fd_sig_ty"><span class="hs-identifier hs-var">fd_sig_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Err.html#undefined"><span class="hs-identifier hs-var">undefined</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_e_ext :: XForeignExport GhcTc
</span><a href="Language.Haskell.Syntax.Decls.html#fd_e_ext"><span class="hs-identifier hs-var">fd_e_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XForeignExport GhcTc
</span><a href="#local-6989586621681304652"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1591"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_fe :: ForeignExport
</span><a href="Language.Haskell.Syntax.Decls.html#fd_fe"><span class="hs-identifier hs-var">fd_fe</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignExport
</span><a href="#local-6989586621681304650"><span class="hs-identifier hs-var">spec</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1592"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkForeignExport"><span class="hs-identifier hs-var">zonkForeignExport</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681304647"><span class="annot"><span class="annottext">ForeignDecl GhcTc
</span><a href="#local-6989586621681304647"><span class="hs-identifier hs-var">for_imp</span></a></span></span><span>
</span><span id="line-1593"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignDecl GhcTc
</span><a href="#local-6989586621681304647"><span class="hs-identifier hs-var">for_imp</span></a></span><span>     </span><span class="hs-comment">-- Foreign imports don't need zonking</span><span>
</span><span id="line-1594"></span><span>
</span><span id="line-1595"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkRules"><span class="hs-identifier hs-type">zonkRules</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRuleDecl"><span class="hs-identifier hs-type">LRuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRuleDecl"><span class="hs-identifier hs-type">LRuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1596"></span><span id="zonkRules"><span class="annot"><span class="annottext">zonkRules :: ZonkEnv -&gt; [LRuleDecl GhcTc] -&gt; TcM [LRuleDecl GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRules"><span class="hs-identifier hs-var hs-var">zonkRules</span></a></span></span><span> </span><span id="local-6989586621681304646"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304646"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304645"><span class="annot"><span class="annottext">[LRuleDecl GhcTc]
</span><a href="#local-6989586621681304645"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b ann.
(a -&gt; TcM b)
-&gt; GenLocated (SrcSpanAnn' ann) a
-&gt; TcRn (GenLocated (SrcSpanAnn' ann) b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocMA"><span class="hs-identifier hs-var">wrapLocMA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; RuleDecl GhcTc -&gt; TcM (RuleDecl GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRule"><span class="hs-identifier hs-var">zonkRule</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304646"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LRuleDecl GhcTc]
</span><a href="#local-6989586621681304645"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-1597"></span><span>
</span><span id="line-1598"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkRule"><span class="hs-identifier hs-type">zonkRule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleDecl"><span class="hs-identifier hs-type">RuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleDecl"><span class="hs-identifier hs-type">RuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1599"></span><span id="zonkRule"><span class="annot"><span class="annottext">zonkRule :: ZonkEnv -&gt; RuleDecl GhcTc -&gt; TcM (RuleDecl GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRule"><span class="hs-identifier hs-var hs-var">zonkRule</span></a></span></span><span> </span><span id="local-6989586621681304643"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304643"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304642"><span class="annot"><span class="annottext">rule :: RuleDecl GhcTc
</span><a href="#local-6989586621681304642"><span class="hs-identifier hs-var">rule</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsRule"><span class="hs-identifier hs-type">HsRule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rd_tmvs :: forall pass. RuleDecl pass -&gt; [LRuleBndr pass]
</span><a href="Language.Haskell.Syntax.Decls.html#rd_tmvs"><span class="hs-identifier hs-var">rd_tmvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304639"><span class="annot"><span class="annottext">[LRuleBndr GhcTc]
</span><a href="#local-6989586621681304639"><span class="hs-identifier hs-var">tm_bndrs</span></a></span></span><span class="hs-comment">{-::[RuleBndr TcId]-}</span><span>
</span><span id="line-1600"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_lhs :: forall pass. RuleDecl pass -&gt; XRec pass (HsExpr pass)
</span><a href="Language.Haskell.Syntax.Decls.html#rd_lhs"><span class="hs-identifier hs-var">rd_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304637"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681304637"><span class="hs-identifier hs-var">lhs</span></a></span></span><span>
</span><span id="line-1601"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_rhs :: forall pass. RuleDecl pass -&gt; XRec pass (HsExpr pass)
</span><a href="Language.Haskell.Syntax.Decls.html#rd_rhs"><span class="hs-identifier hs-var">rd_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304635"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681304635"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1602"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304634"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304634"><span class="hs-identifier hs-var">env_inside</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304633"><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcTc)]
</span><a href="#local-6989586621681304633"><span class="hs-identifier hs-var">new_tm_bndrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) acc x y.
Monad m =&gt;
(acc -&gt; x -&gt; m (acc, y)) -&gt; acc -&gt; [x] -&gt; m (acc, [y])
</span><a href="GHC.Utils.Monad.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LRuleBndr GhcTc -&gt; TcM (ZonkEnv, LRuleBndr GhcTc)
</span><a href="#local-6989586621681304632"><span class="hs-identifier hs-var">zonk_tm_bndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304643"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[LRuleBndr GhcTc]
</span><a href="#local-6989586621681304639"><span class="hs-identifier hs-var">tm_bndrs</span></a></span><span>
</span><span id="line-1603"></span><span>
</span><span id="line-1604"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681304631"><span class="annot"><span class="annottext">env_lhs :: ZonkEnv
</span><a href="#local-6989586621681304631"><span class="hs-identifier hs-var hs-var">env_lhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; ZonkFlexi -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#setZonkType"><span class="hs-identifier hs-var">setZonkType</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304634"><span class="hs-identifier hs-var">env_inside</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#SkolemiseFlexi"><span class="hs-identifier hs-var">SkolemiseFlexi</span></a></span><span>
</span><span id="line-1605"></span><span>              </span><span class="hs-comment">-- See Note [Zonking the LHS of a RULE]</span><span>
</span><span id="line-1606"></span><span>
</span><span id="line-1607"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304630"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681304630"><span class="hs-identifier hs-var">new_lhs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304631"><span class="hs-identifier hs-var">env_lhs</span></a></span><span>    </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681304637"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-1608"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304629"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681304629"><span class="hs-identifier hs-var">new_rhs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304634"><span class="hs-identifier hs-var">env_inside</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681304635"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1609"></span><span>
</span><span id="line-1610"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RuleDecl GhcTc
</span><a href="#local-6989586621681304642"><span class="hs-identifier hs-var">rule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rd_tmvs :: [LRuleBndr GhcTc]
</span><a href="Language.Haskell.Syntax.Decls.html#rd_tmvs"><span class="hs-identifier hs-var">rd_tmvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcTc)]
</span><a href="#local-6989586621681304633"><span class="hs-identifier hs-var">new_tm_bndrs</span></a></span><span>
</span><span id="line-1611"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_lhs :: LHsExpr GhcTc
</span><a href="Language.Haskell.Syntax.Decls.html#rd_lhs"><span class="hs-identifier hs-var">rd_lhs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681304630"><span class="hs-identifier hs-var">new_lhs</span></a></span><span>
</span><span id="line-1612"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_rhs :: LHsExpr GhcTc
</span><a href="Language.Haskell.Syntax.Decls.html#rd_rhs"><span class="hs-identifier hs-var">rd_rhs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621681304629"><span class="hs-identifier hs-var">new_rhs</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1613"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1614"></span><span>   </span><span class="annot"><a href="#local-6989586621681304632"><span class="hs-identifier hs-type">zonk_tm_bndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRuleBndr"><span class="hs-identifier hs-type">LRuleBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRuleBndr"><span class="hs-identifier hs-type">LRuleBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1615"></span><span>   </span><span id="local-6989586621681304632"><span class="annot"><span class="annottext">zonk_tm_bndr :: ZonkEnv -&gt; LRuleBndr GhcTc -&gt; TcM (ZonkEnv, LRuleBndr GhcTc)
</span><a href="#local-6989586621681304632"><span class="hs-identifier hs-var hs-var">zonk_tm_bndr</span></a></span></span><span> </span><span id="local-6989586621681304628"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304628"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681304627"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681304627"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleBndr"><span class="hs-identifier hs-type">RuleBndr</span></a></span><span> </span><span id="local-6989586621681304625"><span class="annot"><span class="annottext">XCRuleBndr GhcTc
</span><a href="#local-6989586621681304625"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681304624"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681304624"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681304623"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304623"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1616"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304622"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304622"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304621"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304621"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="#local-6989586621681304620"><span class="hs-identifier hs-var">zonk_it</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304628"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304623"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1617"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304622"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681304627"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. XCRuleBndr pass -&gt; LIdP pass -&gt; RuleBndr pass
</span><a href="Language.Haskell.Syntax.Decls.html#RuleBndr"><span class="hs-identifier hs-var">RuleBndr</span></a></span><span> </span><span class="annot"><span class="annottext">XCRuleBndr GhcTc
</span><a href="#local-6989586621681304625"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681304624"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304621"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1618"></span><span>   </span><span class="annot"><a href="#local-6989586621681304632"><span class="hs-identifier hs-var">zonk_tm_bndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleBndrSig"><span class="hs-identifier hs-type">RuleBndrSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonk_tm_bndr RuleBndrSig&quot;</span></span><span>
</span><span id="line-1619"></span><span>
</span><span id="line-1620"></span><span>   </span><span id="local-6989586621681304620"><span class="annot"><span class="annottext">zonk_it :: ZonkEnv -&gt; TcTyVar -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="#local-6989586621681304620"><span class="hs-identifier hs-var hs-var">zonk_it</span></a></span></span><span> </span><span id="local-6989586621681304616"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304616"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304615"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304615"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-1621"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304615"><span class="hs-identifier hs-var">v</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304614"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304614"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304616"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304615"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1622"></span><span>                       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304616"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304614"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304614"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1623"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isImmutableTyVar</span><span> </span><span class="hs-identifier">v</span><span class="hs-special">)</span><span>
</span><span id="line-1624"></span><span>                    </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304616"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304615"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1625"></span><span>                    </span><span class="hs-comment">-- DV: used to be return (env,v) but that is plain</span><span>
</span><span id="line-1626"></span><span>                    </span><span class="hs-comment">-- wrong because we may need to go inside the kind</span><span>
</span><span id="line-1627"></span><span>                    </span><span class="hs-comment">-- of v and zonk there!</span><span>
</span><span id="line-1628"></span><span>
</span><span id="line-1629"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
              Constraints and evidence
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1636"></span><span>
</span><span id="line-1637"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-type">zonkEvTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>
</span><span id="line-1638"></span><span id="zonkEvTerm"><span class="annot"><span class="annottext">zonkEvTerm :: ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var hs-var">zonkEvTerm</span></a></span></span><span> </span><span id="local-6989586621681304613"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304613"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span> </span><span id="local-6989586621681304611"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304611"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1639"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-var">EvExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; TcM EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304613"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304611"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1640"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span id="local-6989586621681304609"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304609"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a></span><span> </span><span id="local-6989586621681304607"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304607"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681304606"><span class="annot"><span class="annottext">EvTypeable
</span><a href="#local-6989586621681304606"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1641"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; EvTypeable -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-var">EvTypeable</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304609"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304607"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTypeable -&gt; TcM EvTypeable
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTypeable"><span class="hs-identifier hs-var">zonkEvTypeable</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304609"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTypeable
</span><a href="#local-6989586621681304606"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1642"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span id="local-6989586621681304604"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304604"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvFun"><span class="hs-identifier hs-type">EvFun</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">et_tvs :: EvTerm -&gt; [TcTyVar]
</span><a href="GHC.Tc.Types.Evidence.html#et_tvs"><span class="hs-identifier hs-var">et_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304601"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304601"><span class="hs-identifier hs-var">tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_given :: EvTerm -&gt; [TcTyVar]
</span><a href="GHC.Tc.Types.Evidence.html#et_given"><span class="hs-identifier hs-var">et_given</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304599"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304599"><span class="hs-identifier hs-var">evs</span></a></span></span><span>
</span><span id="line-1643"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_binds :: EvTerm -&gt; TcEvBinds
</span><a href="GHC.Tc.Types.Evidence.html#et_binds"><span class="hs-identifier hs-var">et_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304597"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681304597"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_body :: EvTerm -&gt; TcTyVar
</span><a href="GHC.Tc.Types.Evidence.html#et_body"><span class="hs-identifier hs-var">et_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304595"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304595"><span class="hs-identifier hs-var">body_id</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1644"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304594"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304594"><span class="hs-identifier hs-var">env0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304593"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304593"><span class="hs-identifier hs-var">new_tvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; TcM (ZonkEnv, [TcTyVar])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrsX"><span class="hs-identifier hs-var">zonkTyBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304604"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304601"><span class="hs-identifier hs-var">tvs</span></a></span><span>
</span><span id="line-1645"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304592"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304592"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304591"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304591"><span class="hs-identifier hs-var">new_evs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; TcM (ZonkEnv, [TcTyVar])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrsX"><span class="hs-identifier hs-var">zonkEvBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304594"><span class="hs-identifier hs-var">env0</span></a></span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304599"><span class="hs-identifier hs-var">evs</span></a></span><span>
</span><span id="line-1646"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304590"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304590"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304589"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681304589"><span class="hs-identifier hs-var">new_ev_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, TcEvBinds)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds"><span class="hs-identifier hs-var">zonkTcEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304592"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681304597"><span class="hs-identifier hs-var">ev_binds</span></a></span><span>
</span><span id="line-1647"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681304588"><span class="annot"><span class="annottext">new_body_id :: TcTyVar
</span><a href="#local-6989586621681304588"><span class="hs-identifier hs-var hs-var">new_body_id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304590"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304595"><span class="hs-identifier hs-var">body_id</span></a></span><span>
</span><span id="line-1648"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvFun"><span class="hs-identifier hs-type">EvFun</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">et_tvs :: [TcTyVar]
</span><a href="GHC.Tc.Types.Evidence.html#et_tvs"><span class="hs-identifier hs-var">et_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304593"><span class="hs-identifier hs-var">new_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_given :: [TcTyVar]
</span><a href="GHC.Tc.Types.Evidence.html#et_given"><span class="hs-identifier hs-var">et_given</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304591"><span class="hs-identifier hs-var">new_evs</span></a></span><span>
</span><span id="line-1649"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_binds :: TcEvBinds
</span><a href="GHC.Tc.Types.Evidence.html#et_binds"><span class="hs-identifier hs-var">et_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681304589"><span class="hs-identifier hs-var">new_ev_binds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_body :: TcTyVar
</span><a href="GHC.Tc.Types.Evidence.html#et_body"><span class="hs-identifier hs-var">et_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304588"><span class="hs-identifier hs-var">new_body_id</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1650"></span><span>
</span><span id="line-1651"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-type">zonkCoreExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>
</span><span id="line-1652"></span><span id="zonkCoreExpr"><span class="annot"><span class="annottext">zonkCoreExpr :: ZonkEnv -&gt; EvExpr -&gt; TcM EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var hs-var">zonkCoreExpr</span></a></span></span><span> </span><span id="local-6989586621681304586"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304586"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681304584"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304584"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1653"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; Bool
</span><a href="GHC.Types.Var.html#isCoVar"><span class="hs-identifier hs-var">isCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304584"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1654"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. TcCoercionR -&gt; Expr b
</span><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoVarOcc"><span class="hs-identifier hs-var">zonkCoVarOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304586"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304584"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1655"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1656"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. TcTyVar -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304586"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304584"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1657"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span> </span><span id="local-6989586621681304579"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681304579"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1658"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681304579"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1659"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681304578"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304578"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span id="local-6989586621681304577"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681304577"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1660"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. TcCoercionR -&gt; Expr b
</span><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcCoercionR -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304578"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681304577"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1661"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681304576"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304576"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span id="local-6989586621681304574"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304574"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1662"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. Kind -&gt; Expr b
</span><a href="GHC.Core.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304576"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304574"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1663"></span><span>
</span><span id="line-1664"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681304573"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304573"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-type">Cast</span></a></span><span> </span><span id="local-6989586621681304571"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304571"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681304570"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681304570"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1665"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. Expr b -&gt; TcCoercionR -&gt; Expr b
</span><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; TcM EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304573"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304571"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcCoercionR -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304573"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681304570"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1666"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681304569"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304569"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-type">Tick</span></a></span><span> </span><span id="local-6989586621681304567"><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621681304567"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681304566"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304566"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1667"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. CoreTickish -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-var">Tick</span></a></span><span> </span><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621681304567"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; TcM EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304569"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304566"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-comment">-- Do we need to zonk in ticks?</span><span>
</span><span id="line-1668"></span><span>
</span><span id="line-1669"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681304565"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304565"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span id="local-6989586621681304563"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304563"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681304562"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304562"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1670"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. Expr b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; TcM EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304565"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304563"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; TcM EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304565"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304562"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1671"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681304561"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304561"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621681304559"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304559"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681304558"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304558"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1672"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304557"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304557"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304556"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304556"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBndrX"><span class="hs-identifier hs-var">zonkCoreBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304561"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304559"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1673"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall b. b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304556"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; TcM EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304557"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304558"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1674"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681304555"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304555"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Let"><span class="hs-identifier hs-type">Let</span></a></span><span> </span><span id="local-6989586621681304553"><span class="annot"><span class="annottext">Bind TcTyVar
</span><a href="#local-6989586621681304553"><span class="hs-identifier hs-var">bind</span></a></span></span><span> </span><span id="local-6989586621681304552"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304552"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1675"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304551"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304551"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304550"><span class="annot"><span class="annottext">Bind TcTyVar
</span><a href="#local-6989586621681304550"><span class="hs-identifier hs-var">bind'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Bind TcTyVar -&gt; TcM (ZonkEnv, Bind TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBind"><span class="hs-identifier hs-var">zonkCoreBind</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304555"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Bind TcTyVar
</span><a href="#local-6989586621681304553"><span class="hs-identifier hs-var">bind</span></a></span><span>
</span><span id="line-1676"></span><span>         </span><span class="annot"><span class="annottext">forall b. Bind b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Let"><span class="hs-identifier hs-var">Let</span></a></span><span> </span><span class="annot"><span class="annottext">Bind TcTyVar
</span><a href="#local-6989586621681304550"><span class="hs-identifier hs-var">bind'</span></a></span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; TcM EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304551"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304552"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1677"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681304548"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304548"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Case"><span class="hs-identifier hs-type">Case</span></a></span><span> </span><span id="local-6989586621681304546"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304546"><span class="hs-identifier hs-var">scrut</span></a></span></span><span> </span><span id="local-6989586621681304545"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304545"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621681304544"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304544"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681304543"><span class="annot"><span class="annottext">[Alt TcTyVar]
</span><a href="#local-6989586621681304543"><span class="hs-identifier hs-var">alts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1678"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681304542"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304542"><span class="hs-identifier hs-var">scrut'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; TcM EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304548"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304546"><span class="hs-identifier hs-var">scrut</span></a></span><span>
</span><span id="line-1679"></span><span>         </span><span id="local-6989586621681304541"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304541"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304548"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304544"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1680"></span><span>         </span><span id="local-6989586621681304540"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304540"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304548"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304545"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-1681"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681304539"><span class="annot"><span class="annottext">env1 :: ZonkEnv
</span><a href="#local-6989586621681304539"><span class="hs-identifier hs-var hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-var">extendIdZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304548"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304540"><span class="hs-identifier hs-var">b'</span></a></span><span>
</span><span id="line-1682"></span><span>         </span><span id="local-6989586621681304538"><span class="annot"><span class="annottext">[Alt TcTyVar]
</span><a href="#local-6989586621681304538"><span class="hs-identifier hs-var">alts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Alt TcTyVar -&gt; TcM (Alt TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreAlt"><span class="hs-identifier hs-var">zonkCoreAlt</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304539"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Alt TcTyVar]
</span><a href="#local-6989586621681304543"><span class="hs-identifier hs-var">alts</span></a></span><span>
</span><span id="line-1683"></span><span>         </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. Expr b -&gt; b -&gt; Kind -&gt; [Alt b] -&gt; Expr b
</span><a href="GHC.Core.html#Case"><span class="hs-identifier hs-var">Case</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304542"><span class="hs-identifier hs-var">scrut'</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304540"><span class="hs-identifier hs-var">b'</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304541"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">[Alt TcTyVar]
</span><a href="#local-6989586621681304538"><span class="hs-identifier hs-var">alts'</span></a></span><span>
</span><span id="line-1684"></span><span>
</span><span id="line-1685"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreAlt"><span class="hs-identifier hs-type">zonkCoreAlt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span>
</span><span id="line-1686"></span><span id="zonkCoreAlt"><span class="annot"><span class="annottext">zonkCoreAlt :: ZonkEnv -&gt; Alt TcTyVar -&gt; TcM (Alt TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreAlt"><span class="hs-identifier hs-var hs-var">zonkCoreAlt</span></a></span></span><span> </span><span id="local-6989586621681304535"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304535"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span id="local-6989586621681304533"><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621681304533"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span id="local-6989586621681304532"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304532"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span id="local-6989586621681304531"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304531"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1687"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304530"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304530"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304529"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304529"><span class="hs-identifier hs-var">bndrs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; TcM (ZonkEnv, [TcTyVar])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBndrsX"><span class="hs-identifier hs-var">zonkCoreBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304535"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304532"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-1688"></span><span>         </span><span id="local-6989586621681304528"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304528"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; TcM EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304530"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304531"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1689"></span><span>         </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. AltCon -&gt; [b] -&gt; Expr b -&gt; Alt b
</span><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-var">Alt</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621681304533"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304529"><span class="hs-identifier hs-var">bndrs'</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304528"><span class="hs-identifier hs-var">rhs'</span></a></span><span>
</span><span id="line-1690"></span><span>
</span><span id="line-1691"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBind"><span class="hs-identifier hs-type">zonkCoreBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1692"></span><span id="zonkCoreBind"><span class="annot"><span class="annottext">zonkCoreBind :: ZonkEnv -&gt; Bind TcTyVar -&gt; TcM (ZonkEnv, Bind TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBind"><span class="hs-identifier hs-var hs-var">zonkCoreBind</span></a></span></span><span> </span><span id="local-6989586621681304526"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304526"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-type">NonRec</span></a></span><span> </span><span id="local-6989586621681304524"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304524"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681304523"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304523"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1693"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681304522"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304522"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304526"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304524"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1694"></span><span>         </span><span id="local-6989586621681304521"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304521"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; TcM EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304526"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304523"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1695"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681304520"><span class="annot"><span class="annottext">env1 :: ZonkEnv
</span><a href="#local-6989586621681304520"><span class="hs-identifier hs-var hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-var">extendIdZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304526"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304522"><span class="hs-identifier hs-var">v'</span></a></span><span>
</span><span id="line-1696"></span><span>         </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304520"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall b. b -&gt; Expr b -&gt; Bind b
</span><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-var">NonRec</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304522"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304521"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1697"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBind"><span class="hs-identifier hs-var">zonkCoreBind</span></a></span><span> </span><span id="local-6989586621681304519"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304519"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span id="local-6989586621681304517"><span class="annot"><span class="annottext">[(TcTyVar, EvExpr)]
</span><a href="#local-6989586621681304517"><span class="hs-identifier hs-var">pairs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1698"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304516"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304516"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304515"><span class="annot"><span class="annottext">[(TcTyVar, EvExpr)]
</span><a href="#local-6989586621681304515"><span class="hs-identifier hs-var">pairs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a env. (a -&gt; IOEnv env a) -&gt; IOEnv env a
</span><a href="GHC.Data.IOEnv.html#fixM"><span class="hs-identifier hs-var">fixM</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, [(TcTyVar, EvExpr)])
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [(TcTyVar, EvExpr)])
</span><a href="#local-6989586621681304514"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1699"></span><span>         </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304516"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall b. [(b, Expr b)] -&gt; Bind b
</span><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">[(TcTyVar, EvExpr)]
</span><a href="#local-6989586621681304515"><span class="hs-identifier hs-var">pairs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1700"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1701"></span><span>    </span><span id="local-6989586621681304514"><span class="annot"><span class="annottext">go :: (ZonkEnv, [(TcTyVar, EvExpr)])
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [(TcTyVar, EvExpr)])
</span><a href="#local-6989586621681304514"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304513"><span class="annot"><span class="annottext">[(TcTyVar, EvExpr)]
</span><a href="#local-6989586621681304513"><span class="hs-identifier hs-var">new_pairs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1702"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681304512"><span class="annot"><span class="annottext">env1 :: ZonkEnv
</span><a href="#local-6989586621681304512"><span class="hs-identifier hs-var hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304519"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.3.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">[(TcTyVar, EvExpr)]
</span><a href="#local-6989586621681304513"><span class="hs-identifier hs-var">new_pairs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1703"></span><span>         </span><span id="local-6989586621681304511"><span class="annot"><span class="annottext">[(TcTyVar, EvExpr)]
</span><a href="#local-6989586621681304511"><span class="hs-identifier hs-var">pairs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; (TcTyVar, EvExpr) -&gt; TcM (TcTyVar, EvExpr)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCorePair"><span class="hs-identifier hs-var">zonkCorePair</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304512"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(TcTyVar, EvExpr)]
</span><a href="#local-6989586621681304517"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1704"></span><span>         </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304512"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(TcTyVar, EvExpr)]
</span><a href="#local-6989586621681304511"><span class="hs-identifier hs-var">pairs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1705"></span><span>
</span><span id="line-1706"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCorePair"><span class="hs-identifier hs-type">zonkCorePair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1707"></span><span id="zonkCorePair"><span class="annot"><span class="annottext">zonkCorePair :: ZonkEnv -&gt; (TcTyVar, EvExpr) -&gt; TcM (TcTyVar, EvExpr)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCorePair"><span class="hs-identifier hs-var hs-var">zonkCorePair</span></a></span></span><span> </span><span id="local-6989586621681304508"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304508"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304507"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304507"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681304506"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304506"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304508"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304507"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; TcM EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304508"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681304506"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1708"></span><span>
</span><span id="line-1709"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvTypeable"><span class="hs-identifier hs-type">zonkEvTypeable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a></span><span>
</span><span id="line-1710"></span><span id="zonkEvTypeable"><span class="annot"><span class="annottext">zonkEvTypeable :: ZonkEnv -&gt; EvTypeable -&gt; TcM EvTypeable
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTypeable"><span class="hs-identifier hs-var hs-var">zonkEvTypeable</span></a></span></span><span> </span><span id="local-6989586621681304505"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304505"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyCon"><span class="hs-identifier hs-type">EvTypeableTyCon</span></a></span><span> </span><span id="local-6989586621681304503"><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681304503"><span class="hs-identifier hs-var">tycon</span></a></span></span><span> </span><span id="local-6989586621681304502"><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621681304502"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1711"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304501"><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621681304501"><span class="hs-identifier hs-var">e'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304505"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621681304502"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1712"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon -&gt; [EvTerm] -&gt; EvTypeable
</span><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyCon"><span class="hs-identifier hs-var">EvTypeableTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681304503"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621681304501"><span class="hs-identifier hs-var">e'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1713"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvTypeable"><span class="hs-identifier hs-var">zonkEvTypeable</span></a></span><span> </span><span id="local-6989586621681304500"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304500"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyApp"><span class="hs-identifier hs-type">EvTypeableTyApp</span></a></span><span> </span><span id="local-6989586621681304498"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304498"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681304497"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304497"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1714"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304496"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304496"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304500"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304498"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1715"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304495"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304495"><span class="hs-identifier hs-var">t2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304500"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304497"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1716"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvTerm -&gt; EvTerm -&gt; EvTypeable
</span><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyApp"><span class="hs-identifier hs-var">EvTypeableTyApp</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304496"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304495"><span class="hs-identifier hs-var">t2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1717"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvTypeable"><span class="hs-identifier hs-var">zonkEvTypeable</span></a></span><span> </span><span id="local-6989586621681304494"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304494"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTrFun"><span class="hs-identifier hs-type">EvTypeableTrFun</span></a></span><span> </span><span id="local-6989586621681304492"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304492"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span id="local-6989586621681304491"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304491"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681304490"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304490"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1718"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304489"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304489"><span class="hs-identifier hs-var">tm'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304494"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304492"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1719"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304488"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304488"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304494"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304491"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1720"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304487"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304487"><span class="hs-identifier hs-var">t2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304494"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304490"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1721"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvTerm -&gt; EvTerm -&gt; EvTerm -&gt; EvTypeable
</span><a href="GHC.Tc.Types.Evidence.html#EvTypeableTrFun"><span class="hs-identifier hs-var">EvTypeableTrFun</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304489"><span class="hs-identifier hs-var">tm'</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304488"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304487"><span class="hs-identifier hs-var">t2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1722"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvTypeable"><span class="hs-identifier hs-var">zonkEvTypeable</span></a></span><span> </span><span id="local-6989586621681304486"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304486"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyLit"><span class="hs-identifier hs-type">EvTypeableTyLit</span></a></span><span> </span><span id="local-6989586621681304484"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304484"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1723"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304483"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304483"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304486"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304484"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1724"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvTerm -&gt; EvTypeable
</span><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyLit"><span class="hs-identifier hs-var">EvTypeableTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304483"><span class="hs-identifier hs-var">t1'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1725"></span><span>
</span><span id="line-1726"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds_s"><span class="hs-identifier hs-type">zonkTcEvBinds_s</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1727"></span><span id="zonkTcEvBinds_s"><span class="annot"><span class="annottext">zonkTcEvBinds_s :: ZonkEnv -&gt; [TcEvBinds] -&gt; TcM (ZonkEnv, [TcEvBinds])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds_s"><span class="hs-identifier hs-var hs-var">zonkTcEvBinds_s</span></a></span></span><span> </span><span id="local-6989586621681304482"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304482"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304481"><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621681304481"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304480"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304480"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304479"><span class="annot"><span class="annottext">[Bag EvBind]
</span><a href="#local-6989586621681304479"><span class="hs-identifier hs-var">bs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) acc x y.
Monad m =&gt;
(acc -&gt; x -&gt; m (acc, y)) -&gt; acc -&gt; [x] -&gt; m (acc, [y])
</span><a href="GHC.Utils.Monad.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_tc_ev_binds"><span class="hs-identifier hs-var">zonk_tc_ev_binds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304482"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621681304481"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1728"></span><span>                            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304480"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bag EvBind -&gt; TcEvBinds
</span><a href="GHC.Tc.Types.Evidence.html#EvBinds"><span class="hs-identifier hs-var">EvBinds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [Bag a] -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unionManyBags"><span class="hs-identifier hs-var">unionManyBags</span></a></span><span> </span><span class="annot"><span class="annottext">[Bag EvBind]
</span><a href="#local-6989586621681304479"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1729"></span><span>
</span><span id="line-1730"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds"><span class="hs-identifier hs-type">zonkTcEvBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1731"></span><span id="zonkTcEvBinds"><span class="annot"><span class="annottext">zonkTcEvBinds :: ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, TcEvBinds)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds"><span class="hs-identifier hs-var hs-var">zonkTcEvBinds</span></a></span></span><span> </span><span id="local-6989586621681304475"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304475"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304474"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681304474"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304473"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304473"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304472"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681304472"><span class="hs-identifier hs-var">bs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_tc_ev_binds"><span class="hs-identifier hs-var">zonk_tc_ev_binds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304475"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681304474"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1732"></span><span>                          </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304473"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag EvBind -&gt; TcEvBinds
</span><a href="GHC.Tc.Types.Evidence.html#EvBinds"><span class="hs-identifier hs-var">EvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681304472"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1733"></span><span>
</span><span id="line-1734"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_tc_ev_binds"><span class="hs-identifier hs-type">zonk_tc_ev_binds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1735"></span><span id="zonk_tc_ev_binds"><span class="annot"><span class="annottext">zonk_tc_ev_binds :: ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_tc_ev_binds"><span class="hs-identifier hs-var hs-var">zonk_tc_ev_binds</span></a></span></span><span> </span><span id="local-6989586621681304471"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304471"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span> </span><span id="local-6989586621681304469"><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681304469"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvBindsVar -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBindsVar"><span class="hs-identifier hs-var">zonkEvBindsVar</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304471"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681304469"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-1736"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_tc_ev_binds"><span class="hs-identifier hs-var">zonk_tc_ev_binds</span></a></span><span> </span><span id="local-6989586621681304467"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304467"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBinds"><span class="hs-identifier hs-type">EvBinds</span></a></span><span> </span><span id="local-6989586621681304466"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681304466"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Bag EvBind -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBinds"><span class="hs-identifier hs-var">zonkEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304467"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681304466"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1737"></span><span>
</span><span id="line-1738"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBindsVar"><span class="hs-identifier hs-type">zonkEvBindsVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1739"></span><span id="zonkEvBindsVar"><span class="annot"><span class="annottext">zonkEvBindsVar :: ZonkEnv -&gt; EvBindsVar -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBindsVar"><span class="hs-identifier hs-var hs-var">zonkEvBindsVar</span></a></span></span><span> </span><span id="local-6989586621681304465"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304465"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ebv_binds :: EvBindsVar -&gt; IORef EvBindMap
</span><a href="GHC.Tc.Types.Evidence.html#ebv_binds"><span class="hs-identifier hs-var">ebv_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304462"><span class="annot"><span class="annottext">IORef EvBindMap
</span><a href="#local-6989586621681304462"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1740"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304461"><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621681304461"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a env. IORef a -&gt; IOEnv env a
</span><a href="GHC.Data.IOEnv.html#readMutVar"><span class="hs-identifier hs-var">readMutVar</span></a></span><span> </span><span class="annot"><span class="annottext">IORef EvBindMap
</span><a href="#local-6989586621681304462"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-1741"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Bag EvBind -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBinds"><span class="hs-identifier hs-var">zonkEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304465"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvBindMap -&gt; Bag EvBind
</span><a href="GHC.Tc.Types.Evidence.html#evBindMapBinds"><span class="hs-identifier hs-var">evBindMapBinds</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621681304461"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1742"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBindsVar"><span class="hs-identifier hs-var">zonkEvBindsVar</span></a></span><span> </span><span id="local-6989586621681304458"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304458"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#CoEvBindsVar"><span class="hs-identifier hs-type">CoEvBindsVar</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304458"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1743"></span><span>
</span><span id="line-1744"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBinds"><span class="hs-identifier hs-type">zonkEvBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1745"></span><span id="zonkEvBinds"><span class="annot"><span class="annottext">zonkEvBinds :: ZonkEnv -&gt; Bag EvBind -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBinds"><span class="hs-identifier hs-var hs-var">zonkEvBinds</span></a></span></span><span> </span><span id="local-6989586621681304455"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304455"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304454"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681304454"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-1746"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;zonkEvBinds&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1747"></span><span>    </span><span class="annot"><span class="annottext">forall a env. (a -&gt; IOEnv env a) -&gt; IOEnv env a
</span><a href="GHC.Data.IOEnv.html#fixM"><span class="hs-identifier hs-var">fixM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304453"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681304453"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1748"></span><span>         </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681304452"><span class="annot"><span class="annottext">env1 :: ZonkEnv
</span><a href="#local-6989586621681304452"><span class="hs-identifier hs-var hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcTyVar] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304455"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag EvBind -&gt; [TcTyVar]
</span><a href="#local-6989586621681304451"><span class="hs-identifier hs-var">collect_ev_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681304453"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1749"></span><span>         </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304450"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681304450"><span class="hs-identifier hs-var">binds'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Bag a -&gt; m (Bag b)
</span><a href="GHC.Data.Bag.html#mapBagM"><span class="hs-identifier hs-var">mapBagM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvBind -&gt; TcM EvBind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBind"><span class="hs-identifier hs-var">zonkEvBind</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304452"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681304454"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-1750"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304452"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681304450"><span class="hs-identifier hs-var">binds'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1751"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1752"></span><span>    </span><span class="annot"><a href="#local-6989586621681304451"><span class="hs-identifier hs-type">collect_ev_bndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1753"></span><span>    </span><span id="local-6989586621681304451"><span class="annot"><span class="annottext">collect_ev_bndrs :: Bag EvBind -&gt; [TcTyVar]
</span><a href="#local-6989586621681304451"><span class="hs-identifier hs-var hs-var">collect_ev_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.3.0/src/Data-Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">EvBind -&gt; [TcTyVar] -&gt; [TcTyVar]
</span><a href="#local-6989586621681304447"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1754"></span><span>    </span><span id="local-6989586621681304447"><span class="annot"><span class="annottext">add :: EvBind -&gt; [TcTyVar] -&gt; [TcTyVar]
</span><a href="#local-6989586621681304447"><span class="hs-identifier hs-var hs-var">add</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eb_lhs :: EvBind -&gt; TcTyVar
</span><a href="GHC.Tc.Types.Evidence.html#eb_lhs"><span class="hs-identifier hs-var">eb_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304444"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304444"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681304443"><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304443"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304444"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[TcTyVar]
</span><a href="#local-6989586621681304443"><span class="hs-identifier hs-var">vars</span></a></span><span>
</span><span id="line-1755"></span><span>
</span><span id="line-1756"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBind"><span class="hs-identifier hs-type">zonkEvBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span>
</span><span id="line-1757"></span><span id="zonkEvBind"><span class="annot"><span class="annottext">zonkEvBind :: ZonkEnv -&gt; EvBind -&gt; TcM EvBind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBind"><span class="hs-identifier hs-var hs-var">zonkEvBind</span></a></span></span><span> </span><span id="local-6989586621681304442"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304442"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304441"><span class="annot"><span class="annottext">bind :: EvBind
</span><a href="#local-6989586621681304441"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eb_lhs :: EvBind -&gt; TcTyVar
</span><a href="GHC.Tc.Types.Evidence.html#eb_lhs"><span class="hs-identifier hs-var">eb_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304440"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304440"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">eb_rhs :: EvBind -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#eb_rhs"><span class="hs-identifier hs-var">eb_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304438"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304438"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1758"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304437"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304437"><span class="hs-identifier hs-var">var'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;zonkEvBndr&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndr"><span class="hs-identifier hs-var">zonkEvBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304442"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304440"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-1759"></span><span>
</span><span id="line-1760"></span><span>         </span><span class="hs-comment">-- Optimise the common case of Refl coercions</span><span>
</span><span id="line-1761"></span><span>         </span><span class="hs-comment">-- See Note [Optimise coercion zonking]</span><span>
</span><span id="line-1762"></span><span>         </span><span class="hs-comment">-- This has a very big effect on some programs (eg #5030)</span><span>
</span><span id="line-1763"></span><span>
</span><span id="line-1764"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304436"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304436"><span class="hs-identifier hs-var">term'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Maybe (Role, Kind, Kind)
</span><a href="GHC.Core.Predicate.html#getEqPredTys_maybe"><span class="hs-identifier hs-var">getEqPredTys_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304437"><span class="hs-identifier hs-var">var'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1765"></span><span>           </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304434"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681304434"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304433"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304433"><span class="hs-identifier hs-var">ty1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304432"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304432"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304433"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304432"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1766"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcCoercionR -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#evCoercion"><span class="hs-identifier hs-var">evCoercion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role -&gt; Kind -&gt; TcCoercionR
</span><a href="GHC.Tc.Types.Evidence.html#mkTcReflCo"><span class="hs-identifier hs-var">mkTcReflCo</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681304434"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304433"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1767"></span><span>           </span><span id="local-6989586621681304428"><span class="annot"><span class="annottext">Maybe (Role, Kind, Kind)
</span><a href="#local-6989586621681304428"><span class="hs-identifier hs-var">_other</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304442"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304438"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-1768"></span><span>
</span><span id="line-1769"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvBind
</span><a href="#local-6989586621681304441"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eb_lhs :: TcTyVar
</span><a href="GHC.Tc.Types.Evidence.html#eb_lhs"><span class="hs-identifier hs-var">eb_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304437"><span class="hs-identifier hs-var">var'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">eb_rhs :: EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#eb_rhs"><span class="hs-identifier hs-var">eb_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681304436"><span class="hs-identifier hs-var">term'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1770"></span><span>
</span><span id="line-1771"></span><span class="hs-comment">{- Note [Optimise coercion zonking]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When optimising evidence binds we may come across situations where
a coercion looks like
      cv = ReflCo ty
or    cv1 = cv2
where the type 'ty' is big.  In such cases it is a waste of time to zonk both
  * The variable on the LHS
  * The coercion on the RHS
Rather, we can zonk the variable, and if its type is (ty ~ ty), we can just
use Refl on the right, ignoring the actual coercion on the RHS.

This can have a very big effect, because the constraint solver sometimes does go
to a lot of effort to prove Refl!  (Eg when solving  10+3 = 10+3; cf #5030)


************************************************************************
*                                                                      *
                         Zonking types
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1793"></span><span>
</span><span id="line-1794"></span><span class="hs-comment">{- Note [Sharing when zonking to Type]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Problem:

    In GHC.Tc.Utils.TcMType.zonkTcTyVar, we short-circuit (Indirect ty) to
    (Indirect zty), see Note [Sharing in zonking] in GHC.Tc.Utils.TcMType. But we
    /can't/ do this when zonking a TcType to a Type (#15552, esp
    comment:3).  Suppose we have

       alpha -&gt; alpha
         where
            alpha is already unified:
             alpha := T{tc-tycon} Int -&gt; Int
         and T is knot-tied

    By &quot;knot-tied&quot; I mean that the occurrence of T is currently a TcTyCon,
    but the global env contains a mapping &quot;T&quot; :-&gt; T{knot-tied-tc}. See
    Note [Type checking recursive type and class declarations] in
    GHC.Tc.TyCl.

    Now we call zonkTcTypeToType on that (alpha -&gt; alpha). If we follow
    the same path as Note [Sharing in zonking] in GHC.Tc.Utils.TcMType, we'll
    update alpha to
       alpha := T{knot-tied-tc} Int -&gt; Int

    But alas, if we encounter alpha for a /second/ time, we end up
    looking at T{knot-tied-tc} and fall into a black hole. The whole
    point of zonkTcTypeToType is that it produces a type full of
    knot-tied tycons, and you must not look at the result!!

    To put it another way (zonkTcTypeToType . zonkTcTypeToType) is not
    the same as zonkTcTypeToType. (If we distinguished TcType from
    Type, this issue would have been a type error!)

Solutions: (see #15552 for other variants)

One possible solution is simply not to do the short-circuiting.
That has less sharing, but maybe sharing is rare. And indeed,
that usually turns out to be viable from a perf point of view

But zonkTyVarOcc implements something a bit better

* ZonkEnv contains ze_meta_tv_env, which maps
      from a MetaTyVar (unification variable)
      to a Type (not a TcType)

* In zonkTyVarOcc, we check this map to see if we have zonked
  this variable before. If so, use the previous answer; if not
  zonk it, and extend the map.

* The map is of course stateful, held in a TcRef. (That is unlike
  the treatment of lexically-scoped variables in ze_tv_env and
  ze_id_env.)

* In zonkTyVarOcc we read the TcRef to look up the unification
  variable:
    - if we get a hit we use the zonked result;
    - if not, in zonk_meta we see if the variable is `Indirect ty`,
      zonk that, and update the map (in finish_meta)
  But Nota Bene that the &quot;update map&quot; step must re-read the TcRef
  (or, more precisely, use updTcRef) because the zonking of the
  `Indirect ty` may have added lots of stuff to the map.  See
  #19668 for an example where this made an asymptotic difference!

Is it worth the extra work of carrying ze_meta_tv_env? Some
non-systematic perf measurements suggest that compiler allocation is
reduced overall (by 0.5% or so) but compile time really doesn't
change.  But in some cases it makes a HUGE difference: see test
T9198 and #19668.  So yes, it seems worth it.
-}</span><span>
</span><span id="line-1864"></span><span>
</span><span id="line-1865"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarOcc"><span class="hs-identifier hs-type">zonkTyVarOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span>
</span><span id="line-1866"></span><span id="zonkTyVarOcc"><span class="annot"><span class="annottext">zonkTyVarOcc :: ZonkEnv -&gt; TcTyVar -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarOcc"><span class="hs-identifier hs-var hs-var">zonkTyVarOcc</span></a></span></span><span> </span><span id="local-6989586621681304427"><span class="annot"><span class="annottext">env :: ZonkEnv
</span><a href="#local-6989586621681304427"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_flexi :: ZonkEnv -&gt; ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#ze_flexi"><span class="hs-identifier hs-var">ze_flexi</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304426"><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681304426"><span class="hs-identifier hs-var">flexi</span></a></span></span><span>
</span><span id="line-1867"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: ZonkEnv -&gt; TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304425"><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681304425"><span class="hs-identifier hs-var">tv_env</span></a></span></span><span>
</span><span id="line-1868"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_meta_tv_env :: ZonkEnv -&gt; TcRef (TyVarEnv Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#ze_meta_tv_env"><span class="hs-identifier hs-var">ze_meta_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304424"><span class="annot"><span class="annottext">TcRef (TyVarEnv Kind)
</span><a href="#local-6989586621681304424"><span class="hs-identifier hs-var">mtv_env_ref</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681304423"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304423"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-1869"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; Bool
</span><a href="GHC.Types.Var.html#isTcTyVar"><span class="hs-identifier hs-var">isTcTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304423"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1870"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; TcTyVarDetails
</span><a href="GHC.Types.Var.html#tcTyVarDetails"><span class="hs-identifier hs-var">tcTyVarDetails</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304423"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1871"></span><span>      </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#SkolemTv"><span class="hs-identifier hs-type">SkolemTv</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcM Kind
</span><a href="#local-6989586621681304419"><span class="hs-identifier hs-var">lookup_in_tv_env</span></a></span><span>
</span><span id="line-1872"></span><span>      </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#RuntimeUnk"><span class="hs-identifier hs-type">RuntimeUnk</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcM Kind
</span><a href="#local-6989586621681304419"><span class="hs-identifier hs-var">lookup_in_tv_env</span></a></span><span>
</span><span id="line-1873"></span><span>      </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#MetaTv"><span class="hs-identifier hs-type">MetaTv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mtv_ref :: TcTyVarDetails -&gt; IORef MetaDetails
</span><a href="GHC.Tc.Utils.TcType.html#mtv_ref"><span class="hs-identifier hs-var">mtv_ref</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304415"><span class="annot"><span class="annottext">IORef MetaDetails
</span><a href="#local-6989586621681304415"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1874"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304414"><span class="annot"><span class="annottext">TyVarEnv Kind
</span><a href="#local-6989586621681304414"><span class="hs-identifier hs-var">mtv_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a gbl lcl. TcRef a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#readTcRef"><span class="hs-identifier hs-var">readTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">TcRef (TyVarEnv Kind)
</span><a href="#local-6989586621681304424"><span class="hs-identifier hs-var">mtv_env_ref</span></a></span><span>
</span><span id="line-1875"></span><span>                </span><span class="hs-comment">-- See Note [Sharing when zonking to Type]</span><span>
</span><span id="line-1876"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a -&gt; TcTyVar -&gt; Maybe a
</span><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-var">lookupVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarEnv Kind
</span><a href="#local-6989586621681304414"><span class="hs-identifier hs-var">mtv_env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304423"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1877"></span><span>                  </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681304412"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304412"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304412"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1878"></span><span>                  </span><span class="annot"><span class="annottext">Maybe Kind
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304411"><span class="annot"><span class="annottext">MetaDetails
</span><a href="#local-6989586621681304411"><span class="hs-identifier hs-var">mtv_details</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a gbl lcl. TcRef a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#readTcRef"><span class="hs-identifier hs-var">readTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">IORef MetaDetails
</span><a href="#local-6989586621681304415"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-1879"></span><span>                                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">IORef MetaDetails -&gt; MetaDetails -&gt; TcM Kind
</span><a href="#local-6989586621681304410"><span class="hs-identifier hs-var">zonk_meta</span></a></span><span> </span><span class="annot"><span class="annottext">IORef MetaDetails
</span><a href="#local-6989586621681304415"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">MetaDetails
</span><a href="#local-6989586621681304411"><span class="hs-identifier hs-var">mtv_details</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1880"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1881"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcM Kind
</span><a href="#local-6989586621681304419"><span class="hs-identifier hs-var">lookup_in_tv_env</span></a></span><span>
</span><span id="line-1882"></span><span>
</span><span id="line-1883"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1884"></span><span>    </span><span id="local-6989586621681304419"><span class="annot"><span class="annottext">lookup_in_tv_env :: TcM Kind
</span><a href="#local-6989586621681304419"><span class="hs-identifier hs-var hs-var">lookup_in_tv_env</span></a></span></span><span>    </span><span class="hs-comment">-- Look up in the env just as we do for Ids</span><span>
</span><span id="line-1885"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a -&gt; TcTyVar -&gt; Maybe a
</span><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-var">lookupVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681304425"><span class="hs-identifier hs-var">tv_env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304423"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1886"></span><span>          </span><span class="annot"><span class="annottext">Maybe TcTyVar
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
(Kind -&gt; m Kind) -&gt; TcTyVar -&gt; m TcTyVar
</span><a href="GHC.Types.Var.html#updateTyVarKindM"><span class="hs-identifier hs-var">updateTyVarKindM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304427"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304423"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1887"></span><span>          </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681304407"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304407"><span class="hs-identifier hs-var">tv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304407"><span class="hs-identifier hs-var">tv'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1888"></span><span>
</span><span id="line-1889"></span><span>    </span><span id="local-6989586621681304410"><span class="annot"><span class="annottext">zonk_meta :: IORef MetaDetails -&gt; MetaDetails -&gt; TcM Kind
</span><a href="#local-6989586621681304410"><span class="hs-identifier hs-var hs-var">zonk_meta</span></a></span></span><span> </span><span id="local-6989586621681304406"><span class="annot"><span class="annottext">IORef MetaDetails
</span><a href="#local-6989586621681304406"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="annot"><span class="annottext">MetaDetails
</span><a href="GHC.Tc.Utils.TcType.html#Flexi"><span class="hs-identifier hs-var">Flexi</span></a></span><span>
</span><span id="line-1890"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304404"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304404"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304427"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; Kind
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304423"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1891"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304403"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304403"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi -&gt; TcTyVar -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#commitFlexi"><span class="hs-identifier hs-var">commitFlexi</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681304426"><span class="hs-identifier hs-var">flexi</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304423"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304404"><span class="hs-identifier hs-var">kind</span></a></span><span>
</span><span id="line-1892"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; IORef MetaDetails -&gt; Kind -&gt; TcM ()
</span><a href="GHC.Tc.Utils.TcMType.html#writeMetaTyVarRef"><span class="hs-identifier hs-var">writeMetaTyVarRef</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304423"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">IORef MetaDetails
</span><a href="#local-6989586621681304406"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304403"><span class="hs-identifier hs-var">ty</span></a></span><span>  </span><span class="hs-comment">-- Belt and braces</span><span>
</span><span id="line-1893"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; TcM Kind
</span><a href="#local-6989586621681304400"><span class="hs-identifier hs-var">finish_meta</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304403"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1894"></span><span>
</span><span id="line-1895"></span><span>    </span><span class="annot"><a href="#local-6989586621681304410"><span class="hs-identifier hs-var">zonk_meta</span></a></span><span> </span><span class="annot"><span class="annottext">IORef MetaDetails
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#Indirect"><span class="hs-identifier hs-type">Indirect</span></a></span><span> </span><span id="local-6989586621681304398"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304398"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1896"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304397"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304397"><span class="hs-identifier hs-var">zty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304427"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304398"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1897"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; TcM Kind
</span><a href="#local-6989586621681304400"><span class="hs-identifier hs-var">finish_meta</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304397"><span class="hs-identifier hs-var">zty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1898"></span><span>
</span><span id="line-1899"></span><span>    </span><span id="local-6989586621681304400"><span class="annot"><span class="annottext">finish_meta :: Kind -&gt; TcM Kind
</span><a href="#local-6989586621681304400"><span class="hs-identifier hs-var hs-var">finish_meta</span></a></span></span><span> </span><span id="local-6989586621681304396"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304396"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-1900"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall a gbl lcl. TcRef a -&gt; (a -&gt; a) -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#updTcRef"><span class="hs-identifier hs-var">updTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">TcRef (TyVarEnv Kind)
</span><a href="#local-6989586621681304424"><span class="hs-identifier hs-var">mtv_env_ref</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681304394"><span class="annot"><span class="annottext">TyVarEnv Kind
</span><a href="#local-6989586621681304394"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a -&gt; TcTyVar -&gt; a -&gt; VarEnv a
</span><a href="GHC.Types.Var.Env.html#extendVarEnv"><span class="hs-identifier hs-var">extendVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarEnv Kind
</span><a href="#local-6989586621681304394"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304423"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304396"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1901"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304396"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1902"></span><span>
</span><span id="line-1903"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#lookupTyVarOcc"><span class="hs-identifier hs-type">lookupTyVarOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span>
</span><span id="line-1904"></span><span id="lookupTyVarOcc"><span class="annot"><span class="annottext">lookupTyVarOcc :: ZonkEnv -&gt; TcTyVar -&gt; Maybe TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#lookupTyVarOcc"><span class="hs-identifier hs-var hs-var">lookupTyVarOcc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: ZonkEnv -&gt; TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304393"><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681304393"><span class="hs-identifier hs-var">tv_env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681304392"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304392"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-1905"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a -&gt; TcTyVar -&gt; Maybe a
</span><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-var">lookupVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681304393"><span class="hs-identifier hs-var">tv_env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304392"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1906"></span><span>
</span><span id="line-1907"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#commitFlexi"><span class="hs-identifier hs-type">commitFlexi</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkFlexi"><span class="hs-identifier hs-type">ZonkFlexi</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1908"></span><span class="hs-comment">-- Only monadic so we can do tc-tracing</span><span>
</span><span id="line-1909"></span><span id="commitFlexi"><span class="annot"><span class="annottext">commitFlexi :: ZonkFlexi -&gt; TcTyVar -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#commitFlexi"><span class="hs-identifier hs-var hs-var">commitFlexi</span></a></span></span><span> </span><span id="local-6989586621681304391"><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681304391"><span class="hs-identifier hs-var">flexi</span></a></span></span><span> </span><span id="local-6989586621681304390"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304390"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681304389"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304389"><span class="hs-identifier hs-var">zonked_kind</span></a></span></span><span>
</span><span id="line-1910"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681304391"><span class="hs-identifier hs-var">flexi</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1911"></span><span>      </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#SkolemiseFlexi"><span class="hs-identifier hs-var">SkolemiseFlexi</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Kind -&gt; TcTyVar
</span><a href="GHC.Types.Var.html#mkTyVar"><span class="hs-identifier hs-var">mkTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681304388"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304389"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1912"></span><span>
</span><span id="line-1913"></span><span>      </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#DefaultFlexi"><span class="hs-identifier hs-var">DefaultFlexi</span></a></span><span>
</span><span id="line-1914"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#isRuntimeRepTy"><span class="hs-identifier hs-var">isRuntimeRepTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304389"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span>
</span><span id="line-1915"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Defaulting flexi tyvar to LiftedRep:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304390"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1916"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#liftedRepTy"><span class="hs-identifier hs-var">liftedRepTy</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1917"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#isMultiplicityTy"><span class="hs-identifier hs-var">isMultiplicityTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304389"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span>
</span><span id="line-1918"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Defaulting flexi tyvar to Many:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304390"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1919"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#manyDataConTy"><span class="hs-identifier hs-var">manyDataConTy</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1920"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1921"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Defaulting flexi tyvar to Any:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304390"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1922"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Kind
</span><a href="GHC.Builtin.Types.html#anyTypeOfKind"><span class="hs-identifier hs-var">anyTypeOfKind</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304389"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1923"></span><span>
</span><span id="line-1924"></span><span>      </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#RuntimeUnkFlexi"><span class="hs-identifier hs-var">RuntimeUnkFlexi</span></a></span><span>
</span><span id="line-1925"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Defaulting flexi tyvar to RuntimeUnk:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304390"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1926"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Kind -&gt; TcTyVarDetails -&gt; TcTyVar
</span><a href="GHC.Types.Var.html#mkTcTyVar"><span class="hs-identifier hs-var">mkTcTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681304388"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304389"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVarDetails
</span><a href="GHC.Tc.Utils.TcType.html#RuntimeUnk"><span class="hs-identifier hs-var">RuntimeUnk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1927"></span><span>                        </span><span class="hs-comment">-- This is where RuntimeUnks are born:</span><span>
</span><span id="line-1928"></span><span>                        </span><span class="hs-comment">-- otherwise-unconstrained unification variables are</span><span>
</span><span id="line-1929"></span><span>                        </span><span class="hs-comment">-- turned into RuntimeUnks as they leave the</span><span>
</span><span id="line-1930"></span><span>                        </span><span class="hs-comment">-- typechecker's monad</span><span>
</span><span id="line-1931"></span><span>
</span><span id="line-1932"></span><span>      </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#NoFlexi"><span class="hs-identifier hs-var">NoFlexi</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NoFlexi&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304390"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304389"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1933"></span><span>
</span><span id="line-1934"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1935"></span><span>     </span><span id="local-6989586621681304388"><span class="annot"><span class="annottext">name :: Name
</span><a href="#local-6989586621681304388"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; Name
</span><a href="GHC.Types.Var.html#tyVarName"><span class="hs-identifier hs-var">tyVarName</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304390"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1936"></span><span>
</span><span id="line-1937"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoVarOcc"><span class="hs-identifier hs-type">zonkCoVarOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-1938"></span><span id="zonkCoVarOcc"><span class="annot"><span class="annottext">zonkCoVarOcc :: ZonkEnv -&gt; TcTyVar -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoVarOcc"><span class="hs-identifier hs-var hs-var">zonkCoVarOcc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: ZonkEnv -&gt; TyCoVarEnv TcTyVar
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304378"><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681304378"><span class="hs-identifier hs-var">tyco_env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681304377"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304377"><span class="hs-identifier hs-var">cv</span></a></span></span><span>
</span><span id="line-1939"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681304376"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304376"><span class="hs-identifier hs-var">cv'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. VarEnv a -&gt; TcTyVar -&gt; Maybe a
</span><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-var">lookupVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv TcTyVar
</span><a href="#local-6989586621681304378"><span class="hs-identifier hs-var">tyco_env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304377"><span class="hs-identifier hs-var">cv</span></a></span><span>  </span><span class="hs-comment">-- don't look in the knot-tied env</span><span>
</span><span id="line-1940"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; TcCoercionR
</span><a href="GHC.Core.Coercion.html#mkCoVarCo"><span class="hs-identifier hs-var">mkCoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304376"><span class="hs-identifier hs-var">cv'</span></a></span><span>
</span><span id="line-1941"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1942"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304374"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304374"><span class="hs-identifier hs-var">cv'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.TcMType.html#zonkCoVar"><span class="hs-identifier hs-var">zonkCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304377"><span class="hs-identifier hs-var">cv</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; TcCoercionR
</span><a href="GHC.Core.Coercion.html#mkCoVarCo"><span class="hs-identifier hs-var">mkCoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304374"><span class="hs-identifier hs-var">cv'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1943"></span><span>
</span><span id="line-1944"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoHole"><span class="hs-identifier hs-type">zonkCoHole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-1945"></span><span id="zonkCoHole"><span class="annot"><span class="annottext">zonkCoHole :: ZonkEnv -&gt; CoercionHole -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoHole"><span class="hs-identifier hs-var hs-var">zonkCoHole</span></a></span></span><span> </span><span id="local-6989586621681304371"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304371"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304370"><span class="annot"><span class="annottext">hole :: CoercionHole
</span><a href="#local-6989586621681304370"><span class="hs-identifier hs-var">hole</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ch_ref :: CoercionHole -&gt; IORef (Maybe TcCoercionR)
</span><a href="GHC.Core.TyCo.Rep.html#ch_ref"><span class="hs-identifier hs-var">ch_ref</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304367"><span class="annot"><span class="annottext">IORef (Maybe TcCoercionR)
</span><a href="#local-6989586621681304367"><span class="hs-identifier hs-var">ref</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ch_co_var :: CoercionHole -&gt; TcTyVar
</span><a href="GHC.Core.TyCo.Rep.html#ch_co_var"><span class="hs-identifier hs-var">ch_co_var</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681304365"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304365"><span class="hs-identifier hs-var">cv</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1946"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304364"><span class="annot"><span class="annottext">Maybe TcCoercionR
</span><a href="#local-6989586621681304364"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a gbl lcl. TcRef a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#readTcRef"><span class="hs-identifier hs-var">readTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">IORef (Maybe TcCoercionR)
</span><a href="#local-6989586621681304367"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-1947"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe TcCoercionR
</span><a href="#local-6989586621681304364"><span class="hs-identifier hs-var">contents</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1948"></span><span>           </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681304363"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681304363"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304362"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681304362"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcCoercionR -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304371"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681304363"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1949"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; TcCoercionR -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.TcMType.html#checkCoercionHole"><span class="hs-identifier hs-var">checkCoercionHole</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304365"><span class="hs-identifier hs-var">cv</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681304362"><span class="hs-identifier hs-var">co'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1950"></span><span>
</span><span id="line-1951"></span><span>              </span><span class="hs-comment">-- This next case should happen only in the presence of</span><span>
</span><span id="line-1952"></span><span>              </span><span class="hs-comment">-- (undeferred) type errors. Originally, I put in a panic</span><span>
</span><span id="line-1953"></span><span>              </span><span class="hs-comment">-- here, but that caused too many uses of `failIfErrsM`.</span><span>
</span><span id="line-1954"></span><span>           </span><span class="annot"><span class="annottext">Maybe TcCoercionR
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Zonking unfilled coercion hole&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621681304370"><span class="hs-identifier hs-var">hole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1955"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="GHC.Utils.Misc.html#debugIsOn"><span class="hs-identifier hs-var">debugIsOn</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1956"></span><span>                           </span><span class="annot"><span class="annottext">TcM () -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#whenNoErrs"><span class="hs-identifier hs-var">whenNoErrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1957"></span><span>                           </span><span class="hs-identifier">MASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">False</span><span>
</span><span id="line-1958"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">text</span><span> </span><span class="hs-string">&quot;Type-correct unfilled coercion hole&quot;</span><span>
</span><span id="line-1959"></span><span>                                     </span><span class="hs-operator">&lt;+&gt;</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">hole</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1960"></span><span>                         </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304358"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304358"><span class="hs-identifier hs-var">cv'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; TcM TcTyVar
</span><a href="GHC.Tc.Utils.TcMType.html#zonkCoVar"><span class="hs-identifier hs-var">zonkCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304365"><span class="hs-identifier hs-var">cv</span></a></span><span>
</span><span id="line-1961"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar -&gt; TcCoercionR
</span><a href="GHC.Core.Coercion.html#mkCoVarCo"><span class="hs-identifier hs-var">mkCoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304358"><span class="hs-identifier hs-var">cv'</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1962"></span><span>                             </span><span class="hs-comment">-- This will be an out-of-scope variable, but keeping</span><span>
</span><span id="line-1963"></span><span>                             </span><span class="hs-comment">-- this as a coercion hole led to #15787</span><span>
</span><span id="line-1964"></span><span>
</span><span id="line-1965"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_tycomapper"><span class="hs-identifier hs-type">zonk_tycomapper</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#TyCoMapper"><span class="hs-identifier hs-type">TyCoMapper</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span>
</span><span id="line-1966"></span><span id="zonk_tycomapper"><span class="annot"><span class="annottext">zonk_tycomapper :: TyCoMapper ZonkEnv (IOEnv (Env TcGblEnv TcLclEnv))
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_tycomapper"><span class="hs-identifier hs-var hs-var">zonk_tycomapper</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#TyCoMapper"><span class="hs-identifier hs-type">TyCoMapper</span></a></span><span>
</span><span id="line-1967"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcm_tyvar :: ZonkEnv -&gt; TcTyVar -&gt; TcM Kind
</span><a href="GHC.Core.Type.html#tcm_tyvar"><span class="hs-identifier hs-var">tcm_tyvar</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarOcc"><span class="hs-identifier hs-var">zonkTyVarOcc</span></a></span><span>
</span><span id="line-1968"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcm_covar :: ZonkEnv -&gt; TcTyVar -&gt; TcM TcCoercionR
</span><a href="GHC.Core.Type.html#tcm_covar"><span class="hs-identifier hs-var">tcm_covar</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoVarOcc"><span class="hs-identifier hs-var">zonkCoVarOcc</span></a></span><span>
</span><span id="line-1969"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcm_hole :: ZonkEnv -&gt; CoercionHole -&gt; TcM TcCoercionR
</span><a href="GHC.Core.Type.html#tcm_hole"><span class="hs-identifier hs-var">tcm_hole</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; CoercionHole -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoHole"><span class="hs-identifier hs-var">zonkCoHole</span></a></span><span>
</span><span id="line-1970"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcm_tycobinder :: ZonkEnv -&gt; TcTyVar -&gt; ArgFlag -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="GHC.Core.Type.html#tcm_tycobinder"><span class="hs-identifier hs-var">tcm_tycobinder</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681304351"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304351"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304350"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304350"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681304349"><span class="annot"><span class="annottext">ArgFlag
</span><a href="#local-6989586621681304349"><span class="hs-identifier hs-var">_vis</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcTyVar -&gt; TcM (ZonkEnv, TcTyVar)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304351"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621681304350"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1971"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcm_tycon :: TcTyCon -&gt; IOEnv (Env TcGblEnv TcLclEnv) TcTyCon
</span><a href="GHC.Core.Type.html#tcm_tycon"><span class="hs-identifier hs-var">tcm_tycon</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyCon -&gt; IOEnv (Env TcGblEnv TcLclEnv) TcTyCon
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTyConToTyCon"><span class="hs-identifier hs-var">zonkTcTyConToTyCon</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1972"></span><span>
</span><span id="line-1973"></span><span class="hs-comment">-- Zonk a TyCon by changing a TcTyCon to a regular TyCon</span><span>
</span><span id="line-1974"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTyConToTyCon"><span class="hs-identifier hs-type">zonkTcTyConToTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcTyCon"><span class="hs-identifier hs-type">TcTyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>
</span><span id="line-1975"></span><span id="zonkTcTyConToTyCon"><span class="annot"><span class="annottext">zonkTcTyConToTyCon :: TcTyCon -&gt; IOEnv (Env TcGblEnv TcLclEnv) TcTyCon
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTyConToTyCon"><span class="hs-identifier hs-var hs-var">zonkTcTyConToTyCon</span></a></span></span><span> </span><span id="local-6989586621681304345"><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681304345"><span class="hs-identifier hs-var">tc</span></a></span></span><span>
</span><span id="line-1976"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcTyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isTcTyCon"><span class="hs-identifier hs-var">isTcTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681304345"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304343"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681304343"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcM TyThing
</span><a href="GHC.Tc.Utils.Env.html#tcLookupGlobalOnly"><span class="hs-identifier hs-var">tcLookupGlobalOnly</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681304345"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1977"></span><span>                      </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681304343"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1978"></span><span>                          </span><span class="annot"><a href="GHC.Types.TyThing.html#ATyCon"><span class="hs-identifier hs-type">ATyCon</span></a></span><span> </span><span id="local-6989586621681304341"><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681304341"><span class="hs-identifier hs-var">real_tc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681304341"><span class="hs-identifier hs-var">real_tc</span></a></span><span>
</span><span id="line-1979"></span><span>                          </span><span class="annot"><span class="annottext">TyThing
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkTcTyCon&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681304345"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681304343"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1980"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681304345"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-comment">-- it's already zonked</span><span>
</span><span id="line-1981"></span><span>
</span><span id="line-1982"></span><span class="hs-comment">-- Confused by zonking? See Note [What is zonking?] in GHC.Tc.Utils.TcMType.</span><span>
</span><span id="line-1983"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToType"><span class="hs-identifier hs-type">zonkTcTypeToType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1984"></span><span id="zonkTcTypeToType"><span class="annot"><span class="annottext">zonkTcTypeToType :: Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToType"><span class="hs-identifier hs-var hs-var">zonkTcTypeToType</span></a></span></span><span> </span><span id="local-6989586621681304340"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304340"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681304339"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304339"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304339"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304340"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1985"></span><span>
</span><span id="line-1986"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-type">zonkScaledTcTypeToTypeX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1987"></span><span id="zonkScaledTcTypeToTypeX"><span class="annot"><span class="annottext">zonkScaledTcTypeToTypeX :: ZonkEnv -&gt; Scaled Kind -&gt; TcM (Scaled Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-var hs-var">zonkScaledTcTypeToTypeX</span></a></span></span><span> </span><span id="local-6989586621681304338"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304338"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621681304337"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304337"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681304336"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304336"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Kind -&gt; a -&gt; Scaled a
</span><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-var">Scaled</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304338"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304337"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1988"></span><span>                                                   </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304338"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304336"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1989"></span><span>
</span><span id="line-1990"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1991"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypesToTypesX"><span class="hs-identifier hs-type">zonkTcTypesToTypesX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1992"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier hs-type">zonkCoToCo</span></a></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-1993"></span><span class="hs-special">(</span><span id="zonkTcTypeToTypeX"><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span></span><span class="hs-special">,</span><span> </span><span id="zonkTcTypesToTypesX"><span class="annot"><span class="annottext">ZonkEnv -&gt; [Kind] -&gt; TcM [Kind]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypesToTypesX"><span class="hs-identifier hs-var">zonkTcTypesToTypesX</span></a></span></span><span class="hs-special">,</span><span> </span><span id="zonkCoToCo"><span class="annot"><span class="annottext">ZonkEnv -&gt; TcCoercionR -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; [TcCoercionR] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [TcCoercionR]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1994"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) env.
Monad m =&gt;
TyCoMapper env m
-&gt; (env -&gt; Kind -&gt; m Kind, env -&gt; [Kind] -&gt; m [Kind],
    env -&gt; TcCoercionR -&gt; m TcCoercionR,
    env -&gt; [TcCoercionR] -&gt; m [TcCoercionR])
</span><a href="GHC.Core.Type.html#mapTyCoX"><span class="hs-identifier hs-var">mapTyCoX</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoMapper ZonkEnv (IOEnv (Env TcGblEnv TcLclEnv))
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_tycomapper"><span class="hs-identifier hs-var">zonk_tycomapper</span></a></span><span>
</span><span id="line-1995"></span><span>
</span><span id="line-1996"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypesToTypesX"><span class="hs-identifier hs-type">zonkScaledTcTypesToTypesX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1997"></span><span id="zonkScaledTcTypesToTypesX"><span class="annot"><span class="annottext">zonkScaledTcTypesToTypesX :: ZonkEnv -&gt; [Scaled Kind] -&gt; TcM [Scaled Kind]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypesToTypesX"><span class="hs-identifier hs-var hs-var">zonkScaledTcTypesToTypesX</span></a></span></span><span> </span><span id="local-6989586621681304333"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304333"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681304332"><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681304332"><span class="hs-identifier hs-var">scaled_tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1998"></span><span>   </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.3.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Scaled Kind -&gt; TcM (Scaled Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-var">zonkScaledTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304333"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681304332"><span class="hs-identifier hs-var">scaled_tys</span></a></span><span>
</span><span id="line-1999"></span><span>
</span><span id="line-2000"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcMethInfoToMethInfoX"><span class="hs-identifier hs-type">zonkTcMethInfoToMethInfoX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html#TcMethInfo"><span class="hs-identifier hs-type">TcMethInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html#MethInfo"><span class="hs-identifier hs-type">MethInfo</span></a></span><span>
</span><span id="line-2001"></span><span id="zonkTcMethInfoToMethInfoX"><span class="annot"><span class="annottext">zonkTcMethInfoToMethInfoX :: ZonkEnv -&gt; TcMethInfo -&gt; TcM TcMethInfo
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcMethInfoToMethInfoX"><span class="hs-identifier hs-var hs-var">zonkTcMethInfoToMethInfoX</span></a></span></span><span> </span><span id="local-6989586621681304331"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304331"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304330"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681304330"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304329"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304329"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304328"><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
</span><a href="#local-6989586621681304328"><span class="hs-identifier hs-var">gdm_spec</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2002"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304327"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304327"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304331"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304329"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-2003"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681304326"><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
</span><a href="#local-6989586621681304326"><span class="hs-identifier hs-var">gdm_spec'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
-&gt; TcM (Maybe (DefMethSpec (SrcSpan, Kind)))
</span><a href="#local-6989586621681304325"><span class="hs-identifier hs-var">zonk_gdm</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
</span><a href="#local-6989586621681304328"><span class="hs-identifier hs-var">gdm_spec</span></a></span><span>
</span><span id="line-2004"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681304330"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304327"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
</span><a href="#local-6989586621681304326"><span class="hs-identifier hs-var">gdm_spec'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2005"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2006"></span><span>    </span><span class="annot"><a href="#local-6989586621681304325"><span class="hs-identifier hs-type">zonk_gdm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#DefMethSpec"><span class="hs-identifier hs-type">DefMethSpec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2007"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#DefMethSpec"><span class="hs-identifier hs-type">DefMethSpec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2008"></span><span>    </span><span id="local-6989586621681304325"><span class="annot"><span class="annottext">zonk_gdm :: Maybe (DefMethSpec (SrcSpan, Kind))
-&gt; TcM (Maybe (DefMethSpec (SrcSpan, Kind)))
</span><a href="#local-6989586621681304325"><span class="hs-identifier hs-var hs-var">zonk_gdm</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2009"></span><span>    </span><span class="annot"><a href="#local-6989586621681304325"><span class="hs-identifier hs-var">zonk_gdm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DefMethSpec (SrcSpan, Kind)
</span><a href="GHC.Types.Basic.html#VanillaDM"><span class="hs-identifier hs-var">VanillaDM</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall ty. DefMethSpec ty
</span><a href="GHC.Types.Basic.html#VanillaDM"><span class="hs-identifier hs-var">VanillaDM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2010"></span><span>    </span><span class="annot"><a href="#local-6989586621681304325"><span class="hs-identifier hs-var">zonk_gdm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#GenericDM"><span class="hs-identifier hs-type">GenericDM</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681304322"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681304322"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681304321"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304321"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2011"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681304320"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304320"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681304331"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304321"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-2012"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.3.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.3.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall ty. ty -&gt; DefMethSpec ty
</span><a href="GHC.Types.Basic.html#GenericDM"><span class="hs-identifier hs-var">GenericDM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681304322"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681304320"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2013"></span><span>
</span><span id="line-2014"></span><span class="hs-comment">---------------------------------------</span><span>
</span><span id="line-2015"></span><span class="hs-comment">{- Note [Zonking the LHS of a RULE]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
See also GHC.HsToCore.Binds Note [Free tyvars on rule LHS]

We need to gather the type variables mentioned on the LHS so we can
quantify over them.  Example:
  data T a = C

  foo :: T a -&gt; Int
  foo C = 1

  {-# RULES &quot;myrule&quot;  foo C = 1 #-}

After type checking the LHS becomes (foo alpha (C alpha)) and we do
not want to zap the unbound meta-tyvar 'alpha' to Any, because that
limits the applicability of the rule.  Instead, we want to quantify
over it!

We do this in two stages.

* During zonking, we skolemise the TcTyVar 'alpha' to TyVar 'a'.  We
  do this by using zonkTvSkolemising as the UnboundTyVarZonker in the
  ZonkEnv.  (This is in fact the whole reason that the ZonkEnv has a
  UnboundTyVarZonker.)

* In GHC.HsToCore.Binds, we quantify over it.  See GHC.HsToCore.Binds
  Note [Free tyvars on rule LHS]

Quantifying here is awkward because (a) the data type is big and (b)
finding the free type vars of an expression is necessarily monadic
operation. (consider /\a -&gt; f @ b, where b is side-effected to a)
-}</span><span>
</span><span id="line-2047"></span></pre></body></html>
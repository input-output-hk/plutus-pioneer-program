<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Unit.External</span><span>
</span><span id="line-2"></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#ExternalPackageState"><span class="hs-identifier">ExternalPackageState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-3"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#EpsStats"><span class="hs-identifier">EpsStats</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-4"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#addEpsInStats"><span class="hs-identifier">addEpsInStats</span></a></span><span>
</span><span id="line-5"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#PackageTypeEnv"><span class="hs-identifier">PackageTypeEnv</span></a></span><span>
</span><span id="line-6"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#PackageIfaceTable"><span class="hs-identifier">PackageIfaceTable</span></a></span><span>
</span><span id="line-7"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#PackageInstEnv"><span class="hs-identifier">PackageInstEnv</span></a></span><span>
</span><span id="line-8"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#PackageFamInstEnv"><span class="hs-identifier">PackageFamInstEnv</span></a></span><span>
</span><span id="line-9"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#PackageRuleBase"><span class="hs-identifier">PackageRuleBase</span></a></span><span>
</span><span id="line-10"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#PackageCompleteMatches"><span class="hs-identifier">PackageCompleteMatches</span></a></span><span>
</span><span id="line-11"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#emptyPackageIfaceTable"><span class="hs-identifier">emptyPackageIfaceTable</span></a></span><span>
</span><span id="line-12"></span><span>   </span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">where</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.html"><span class="hs-identifier">GHC.Unit</span></a></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html"><span class="hs-identifier">GHC.Unit.Module.ModIface</span></a></span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.html"><span class="hs-identifier">GHC.Core</span></a></span><span>         </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.html#RuleBase"><span class="hs-identifier">RuleBase</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.FamInstEnv.html"><span class="hs-identifier">GHC.Core.FamInstEnv</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html"><span class="hs-identifier">GHC.Core.InstEnv</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html#InstEnv"><span class="hs-identifier">InstEnv</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Annotations.html"><span class="hs-identifier">GHC.Types.Annotations</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Annotations.html#AnnEnv"><span class="hs-identifier">AnnEnv</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.CompleteMatch.html"><span class="hs-identifier">GHC.Types.CompleteMatch</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.TypeEnv.html"><span class="hs-identifier">GHC.Types.TypeEnv</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.DSet.html"><span class="hs-identifier">GHC.Types.Unique.DSet</span></a></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-keyword">type</span><span> </span><span id="PackageTypeEnv"><span class="annot"><a href="GHC.Unit.External.html#PackageTypeEnv"><span class="hs-identifier hs-var">PackageTypeEnv</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.TypeEnv.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">type</span><span> </span><span id="PackageRuleBase"><span class="annot"><a href="GHC.Unit.External.html#PackageRuleBase"><span class="hs-identifier hs-var">PackageRuleBase</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#RuleBase"><span class="hs-identifier hs-type">RuleBase</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">type</span><span> </span><span id="PackageInstEnv"><span class="annot"><a href="GHC.Unit.External.html#PackageInstEnv"><span class="hs-identifier hs-var">PackageInstEnv</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html#InstEnv"><span class="hs-identifier hs-type">InstEnv</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">type</span><span> </span><span id="PackageFamInstEnv"><span class="annot"><a href="GHC.Unit.External.html#PackageFamInstEnv"><span class="hs-identifier hs-var">PackageFamInstEnv</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.FamInstEnv.html#FamInstEnv"><span class="hs-identifier hs-type">FamInstEnv</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">type</span><span> </span><span id="PackageAnnEnv"><span class="annot"><a href="GHC.Unit.External.html#PackageAnnEnv"><span class="hs-identifier hs-var">PackageAnnEnv</span></a></span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Annotations.html#AnnEnv"><span class="hs-identifier hs-type">AnnEnv</span></a></span><span>
</span><span id="line-35"></span><span class="hs-keyword">type</span><span> </span><span id="PackageCompleteMatches"><span class="annot"><a href="GHC.Unit.External.html#PackageCompleteMatches"><span class="hs-identifier hs-var">PackageCompleteMatches</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.CompleteMatch.html#CompleteMatches"><span class="hs-identifier hs-type">CompleteMatches</span></a></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-comment">-- | Helps us find information about modules in the imported packages</span><span>
</span><span id="line-38"></span><span class="hs-keyword">type</span><span> </span><span id="PackageIfaceTable"><span class="annot"><a href="GHC.Unit.External.html#PackageIfaceTable"><span class="hs-identifier hs-var">PackageIfaceTable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Env.html#ModuleEnv"><span class="hs-identifier hs-type">ModuleEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span>
</span><span id="line-39"></span><span>        </span><span class="hs-comment">-- Domain = modules in the imported packages</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-comment">-- | Constructs an empty PackageIfaceTable</span><span>
</span><span id="line-42"></span><span class="annot"><a href="GHC.Unit.External.html#emptyPackageIfaceTable"><span class="hs-identifier hs-type">emptyPackageIfaceTable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#PackageIfaceTable"><span class="hs-identifier hs-type">PackageIfaceTable</span></a></span><span>
</span><span id="line-43"></span><span id="emptyPackageIfaceTable"><span class="annot"><span class="annottext">emptyPackageIfaceTable :: PackageIfaceTable
</span><a href="GHC.Unit.External.html#emptyPackageIfaceTable"><span class="hs-identifier hs-var hs-var">emptyPackageIfaceTable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. ModuleEnv a
</span><a href="GHC.Unit.Module.Env.html#emptyModuleEnv"><span class="hs-identifier hs-var">emptyModuleEnv</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-comment">-- | Information about other packages that we have slurped in by reading</span><span>
</span><span id="line-47"></span><span class="hs-comment">-- their interface files</span><span>
</span><span id="line-48"></span><span class="hs-keyword">data</span><span> </span><span id="ExternalPackageState"><span class="annot"><a href="GHC.Unit.External.html#ExternalPackageState"><span class="hs-identifier hs-var">ExternalPackageState</span></a></span></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="EPS"><span class="annot"><a href="GHC.Unit.External.html#EPS"><span class="hs-identifier hs-var">EPS</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-50"></span><span>        </span><span id="eps_is_boot"><span class="annot"><span class="annottext">ExternalPackageState -&gt; ModuleNameEnv ModuleNameWithIsBoot
</span><a href="GHC.Unit.External.html#eps_is_boot"><span class="hs-identifier hs-var hs-var">eps_is_boot</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Env.html#ModuleNameEnv"><span class="hs-identifier hs-type">ModuleNameEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#ModuleNameWithIsBoot"><span class="hs-identifier hs-type">ModuleNameWithIsBoot</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>                </span><span class="hs-comment">-- ^ In OneShot mode (only), home-package modules</span><span>
</span><span id="line-52"></span><span>                </span><span class="hs-comment">-- accumulate in the external package state, and are</span><span>
</span><span id="line-53"></span><span>                </span><span class="hs-comment">-- sucked in lazily.  For these home-pkg modules</span><span>
</span><span id="line-54"></span><span>                </span><span class="hs-comment">-- (only) we need to record which are boot modules.</span><span>
</span><span id="line-55"></span><span>                </span><span class="hs-comment">-- We set this field after loading all the</span><span>
</span><span id="line-56"></span><span>                </span><span class="hs-comment">-- explicitly-imported interfaces, but before doing</span><span>
</span><span id="line-57"></span><span>                </span><span class="hs-comment">-- anything else</span><span>
</span><span id="line-58"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-59"></span><span>                </span><span class="hs-comment">-- The 'ModuleName' part is not necessary, but it's useful for</span><span>
</span><span id="line-60"></span><span>                </span><span class="hs-comment">-- debug prints, and it's convenient because this field comes</span><span>
</span><span id="line-61"></span><span>                </span><span class="hs-comment">-- direct from 'GHC.Tc.Utils.imp_dep_mods'</span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span>        </span><span id="eps_PIT"><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageIfaceTable
</span><a href="GHC.Unit.External.html#eps_PIT"><span class="hs-identifier hs-var hs-var">eps_PIT</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.External.html#PackageIfaceTable"><span class="hs-identifier hs-type">PackageIfaceTable</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>                </span><span class="hs-comment">-- ^ The 'ModIface's for modules in external packages</span><span>
</span><span id="line-65"></span><span>                </span><span class="hs-comment">-- whose interfaces we have opened.</span><span>
</span><span id="line-66"></span><span>                </span><span class="hs-comment">-- The declarations in these interface files are held in the</span><span>
</span><span id="line-67"></span><span>                </span><span class="hs-comment">-- 'eps_decls', 'eps_inst_env', 'eps_fam_inst_env' and 'eps_rules'</span><span>
</span><span id="line-68"></span><span>                </span><span class="hs-comment">-- fields of this record, not in the 'mi_decls' fields of the</span><span>
</span><span id="line-69"></span><span>                </span><span class="hs-comment">-- interface we have sucked in.</span><span>
</span><span id="line-70"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-71"></span><span>                </span><span class="hs-comment">-- What /is/ in the PIT is:</span><span>
</span><span id="line-72"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-73"></span><span>                </span><span class="hs-comment">-- * The Module</span><span>
</span><span id="line-74"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-75"></span><span>                </span><span class="hs-comment">-- * Fingerprint info</span><span>
</span><span id="line-76"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-77"></span><span>                </span><span class="hs-comment">-- * Its exports</span><span>
</span><span id="line-78"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-79"></span><span>                </span><span class="hs-comment">-- * Fixities</span><span>
</span><span id="line-80"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-81"></span><span>                </span><span class="hs-comment">-- * Deprecations and warnings</span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span>        </span><span id="eps_free_holes"><span class="annot"><span class="annottext">ExternalPackageState -&gt; InstalledModuleEnv (UniqDSet ModuleName)
</span><a href="GHC.Unit.External.html#eps_free_holes"><span class="hs-identifier hs-var hs-var">eps_free_holes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Env.html#InstalledModuleEnv"><span class="hs-identifier hs-type">InstalledModuleEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Unique.DSet.html#UniqDSet"><span class="hs-identifier hs-type">UniqDSet</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>                </span><span class="hs-comment">-- ^ Cache for 'mi_free_holes'.  Ordinarily, we can rely on</span><span>
</span><span id="line-85"></span><span>                </span><span class="hs-comment">-- the 'eps_PIT' for this information, EXCEPT that when</span><span>
</span><span id="line-86"></span><span>                </span><span class="hs-comment">-- we do dependency analysis, we need to look at the</span><span>
</span><span id="line-87"></span><span>                </span><span class="hs-comment">-- 'Dependencies' of our imports to determine what their</span><span>
</span><span id="line-88"></span><span>                </span><span class="hs-comment">-- precise free holes are ('moduleFreeHolesPrecise').  We</span><span>
</span><span id="line-89"></span><span>                </span><span class="hs-comment">-- don't want to repeatedly reread in the interface</span><span>
</span><span id="line-90"></span><span>                </span><span class="hs-comment">-- for every import, so cache it here.  When the PIT</span><span>
</span><span id="line-91"></span><span>                </span><span class="hs-comment">-- gets filled in we can drop these entries.</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span>        </span><span id="eps_PTE"><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageTypeEnv
</span><a href="GHC.Unit.External.html#eps_PTE"><span class="hs-identifier hs-var hs-var">eps_PTE</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.External.html#PackageTypeEnv"><span class="hs-identifier hs-type">PackageTypeEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>                </span><span class="hs-comment">-- ^ Result of typechecking all the external package</span><span>
</span><span id="line-95"></span><span>                </span><span class="hs-comment">-- interface files we have sucked in. The domain of</span><span>
</span><span id="line-96"></span><span>                </span><span class="hs-comment">-- the mapping is external-package modules</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span>        </span><span id="eps_inst_env"><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageInstEnv
</span><a href="GHC.Unit.External.html#eps_inst_env"><span class="hs-identifier hs-var hs-var">eps_inst_env</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.External.html#PackageInstEnv"><span class="hs-identifier hs-type">PackageInstEnv</span></a></span><span class="hs-special">,</span><span>   </span><span class="hs-comment">-- ^ The total 'InstEnv' accumulated</span><span>
</span><span id="line-99"></span><span>                                               </span><span class="hs-comment">-- from all the external-package modules</span><span>
</span><span id="line-100"></span><span>        </span><span id="eps_fam_inst_env"><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageFamInstEnv
</span><a href="GHC.Unit.External.html#eps_fam_inst_env"><span class="hs-identifier hs-var hs-var">eps_fam_inst_env</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.External.html#PackageFamInstEnv"><span class="hs-identifier hs-type">PackageFamInstEnv</span></a></span><span class="hs-special">,</span><span class="hs-comment">-- ^ The total 'FamInstEnv' accumulated</span><span>
</span><span id="line-101"></span><span>                                               </span><span class="hs-comment">-- from all the external-package modules</span><span>
</span><span id="line-102"></span><span>        </span><span id="eps_rule_base"><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageRuleBase
</span><a href="GHC.Unit.External.html#eps_rule_base"><span class="hs-identifier hs-var hs-var">eps_rule_base</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.External.html#PackageRuleBase"><span class="hs-identifier hs-type">PackageRuleBase</span></a></span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- ^ The total 'RuleEnv' accumulated</span><span>
</span><span id="line-103"></span><span>                                               </span><span class="hs-comment">-- from all the external-package modules</span><span>
</span><span id="line-104"></span><span>        </span><span id="eps_ann_env"><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageAnnEnv
</span><a href="GHC.Unit.External.html#eps_ann_env"><span class="hs-identifier hs-var hs-var">eps_ann_env</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.External.html#PackageAnnEnv"><span class="hs-identifier hs-type">PackageAnnEnv</span></a></span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- ^ The total 'AnnEnv' accumulated</span><span>
</span><span id="line-105"></span><span>                                               </span><span class="hs-comment">-- from all the external-package modules</span><span>
</span><span id="line-106"></span><span>        </span><span id="eps_complete_matches"><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageCompleteMatches
</span><a href="GHC.Unit.External.html#eps_complete_matches"><span class="hs-identifier hs-var hs-var">eps_complete_matches</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.External.html#PackageCompleteMatches"><span class="hs-identifier hs-type">PackageCompleteMatches</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>                                  </span><span class="hs-comment">-- ^ The total 'CompleteMatches' accumulated</span><span>
</span><span id="line-108"></span><span>                                  </span><span class="hs-comment">-- from all the external-package modules</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span>        </span><span id="eps_mod_fam_inst_env"><span class="annot"><span class="annottext">ExternalPackageState -&gt; ModuleEnv PackageFamInstEnv
</span><a href="GHC.Unit.External.html#eps_mod_fam_inst_env"><span class="hs-identifier hs-var hs-var">eps_mod_fam_inst_env</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Env.html#ModuleEnv"><span class="hs-identifier hs-type">ModuleEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Core.FamInstEnv.html#FamInstEnv"><span class="hs-identifier hs-type">FamInstEnv</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- ^ The family instances accumulated from external</span><span>
</span><span id="line-111"></span><span>                                                         </span><span class="hs-comment">-- packages, keyed off the module that declared them</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span>        </span><span id="eps_stats"><span class="annot"><span class="annottext">ExternalPackageState -&gt; EpsStats
</span><a href="GHC.Unit.External.html#eps_stats"><span class="hs-identifier hs-var hs-var">eps_stats</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.External.html#EpsStats"><span class="hs-identifier hs-type">EpsStats</span></a></span><span>                 </span><span class="hs-comment">-- ^ Stastics about what was loaded from external packages</span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span class="hs-comment">-- | Accumulated statistics about what we are putting into the 'ExternalPackageState'.</span><span>
</span><span id="line-117"></span><span class="hs-comment">-- \&quot;In\&quot; means stuff that is just /read/ from interface files,</span><span>
</span><span id="line-118"></span><span class="hs-comment">-- \&quot;Out\&quot; means actually sucked in and type-checked</span><span>
</span><span id="line-119"></span><span class="hs-keyword">data</span><span> </span><span id="EpsStats"><span class="annot"><a href="GHC.Unit.External.html#EpsStats"><span class="hs-identifier hs-var">EpsStats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EpsStats"><span class="annot"><a href="GHC.Unit.External.html#EpsStats"><span class="hs-identifier hs-var">EpsStats</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="n_ifaces_in"><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_ifaces_in"><span class="hs-identifier hs-var hs-var">n_ifaces_in</span></a></span></span><span>
</span><span id="line-120"></span><span>                         </span><span class="hs-special">,</span><span> </span><span id="n_decls_in"><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_decls_in"><span class="hs-identifier hs-var hs-var">n_decls_in</span></a></span></span><span class="hs-special">,</span><span> </span><span id="n_decls_out"><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_decls_out"><span class="hs-identifier hs-var hs-var">n_decls_out</span></a></span></span><span>
</span><span id="line-121"></span><span>                         </span><span class="hs-special">,</span><span> </span><span id="n_rules_in"><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_rules_in"><span class="hs-identifier hs-var hs-var">n_rules_in</span></a></span></span><span class="hs-special">,</span><span> </span><span id="n_rules_out"><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_rules_out"><span class="hs-identifier hs-var hs-var">n_rules_out</span></a></span></span><span>
</span><span id="line-122"></span><span>                         </span><span class="hs-special">,</span><span> </span><span id="n_insts_in"><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_insts_in"><span class="hs-identifier hs-var hs-var">n_insts_in</span></a></span></span><span class="hs-special">,</span><span> </span><span id="n_insts_out"><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_insts_out"><span class="hs-identifier hs-var hs-var">n_insts_out</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="annot"><a href="GHC.Unit.External.html#addEpsInStats"><span class="hs-identifier hs-type">addEpsInStats</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#EpsStats"><span class="hs-identifier hs-type">EpsStats</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.External.html#EpsStats"><span class="hs-identifier hs-type">EpsStats</span></a></span><span>
</span><span id="line-125"></span><span class="hs-comment">-- ^ Add stats for one newly-read interface</span><span>
</span><span id="line-126"></span><span id="addEpsInStats"><span class="annot"><span class="annottext">addEpsInStats :: EpsStats -&gt; Int -&gt; Int -&gt; Int -&gt; EpsStats
</span><a href="GHC.Unit.External.html#addEpsInStats"><span class="hs-identifier hs-var hs-var">addEpsInStats</span></a></span></span><span> </span><span id="local-6989586621681142604"><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621681142604"><span class="hs-identifier hs-var">stats</span></a></span></span><span> </span><span id="local-6989586621681142603"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681142603"><span class="hs-identifier hs-var">n_decls</span></a></span></span><span> </span><span id="local-6989586621681142602"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681142602"><span class="hs-identifier hs-var">n_insts</span></a></span></span><span> </span><span id="local-6989586621681142601"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681142601"><span class="hs-identifier hs-var">n_rules</span></a></span></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621681142604"><span class="hs-identifier hs-var">stats</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">n_ifaces_in :: Int
</span><a href="GHC.Unit.External.html#n_ifaces_in"><span class="hs-identifier hs-var">n_ifaces_in</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_ifaces_in"><span class="hs-identifier hs-var">n_ifaces_in</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621681142604"><span class="hs-identifier hs-var">stats</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-128"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">n_decls_in :: Int
</span><a href="GHC.Unit.External.html#n_decls_in"><span class="hs-identifier hs-var">n_decls_in</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_decls_in"><span class="hs-identifier hs-var">n_decls_in</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621681142604"><span class="hs-identifier hs-var">stats</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681142603"><span class="hs-identifier hs-var">n_decls</span></a></span><span>
</span><span id="line-129"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">n_insts_in :: Int
</span><a href="GHC.Unit.External.html#n_insts_in"><span class="hs-identifier hs-var">n_insts_in</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_insts_in"><span class="hs-identifier hs-var">n_insts_in</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621681142604"><span class="hs-identifier hs-var">stats</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681142602"><span class="hs-identifier hs-var">n_insts</span></a></span><span>
</span><span id="line-130"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">n_rules_in :: Int
</span><a href="GHC.Unit.External.html#n_rules_in"><span class="hs-identifier hs-var">n_rules_in</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Unit.External.html#n_rules_in"><span class="hs-identifier hs-var">n_rules_in</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621681142604"><span class="hs-identifier hs-var">stats</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.3.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681142601"><span class="hs-identifier hs-var">n_rules</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span></pre></body></html>
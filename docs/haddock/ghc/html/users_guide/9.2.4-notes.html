

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.4. Version 9.2.4 &mdash; Glasgow Haskell Compiler 9.2.4 User&#39;s Guide</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Glasgow Haskell Compiler 9.2.4 User&#39;s Guide"
          href="_static/opensearch.xml"/>

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Using GHCi" href="ghci.html" />
    <link rel="prev" title="2.3. Version 9.2.3" href="9.2.3-notes.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Glasgow Haskell Compiler
          

          
          </a>

          
            
            
              <div class="version">
                9.2.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="release-notes.html">2. Release notes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="9.2.1-notes.html">2.1. Version 9.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="9.2.2-notes.html">2.2. Version 9.2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="9.2.3-notes.html">2.3. Version 9.2.3</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2.4. Version 9.2.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#compiler">2.4.1. Compiler</a></li>
<li class="toctree-l3"><a class="reference internal" href="#runtime-system">2.4.2. Runtime system</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ghci">2.4.3. GHCi</a></li>
<li class="toctree-l3"><a class="reference internal" href="#core-libraries">2.4.4. Core libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-system-and-packaging">2.4.5. Build system and packaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#included-libraries">2.4.6. Included libraries</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ghci.html">3. Using GHCi</a></li>
<li class="toctree-l1"><a class="reference internal" href="runghc.html">4. Using runghc</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">5. Using GHC</a></li>
<li class="toctree-l1"><a class="reference internal" href="exts.html">6. Language extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending_ghc.html">7. Extending and using GHC as a Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="profiling.html">8. Profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug-info.html">9. Debugging compiled programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="gone_wrong.html">10. What to do when something goes wrong</a></li>
<li class="toctree-l1"><a class="reference internal" href="hints.html">11. Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">12. Other Haskell utility programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="win32-dlls.html">13. Running GHC on Win32 systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="bugs.html">14. Known bugs and infelicities</a></li>
<li class="toctree-l1"><a class="reference internal" href="eventlog-formats.html">15. Eventlog encodings</a></li>
<li class="toctree-l1"><a class="reference internal" href="editing-guide.html">16. Care and feeding of your GHC User’s Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Glasgow Haskell Compiler</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="release-notes.html"><span class="section-number">2. </span>Release notes</a> &raquo;</li>
        
      <li><span class="section-number">2.4. </span>Version 9.2.4</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/9.2.4-notes.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="version-9-2-4">
<span id="release-9-2-4"></span><h1><span class="section-number">2.4. </span>Version 9.2.4<a class="headerlink" href="#version-9-2-4" title="Permalink to this heading">¶</a></h1>
<p>The significant changes to the various parts of the compiler are listed in the
following sections.</p>
<p>The <a class="reference internal" href="phases.html#ghc-flag-fllvm"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">LLVM</span> <span class="pre">backend</span></code></a> of this release is to be used with LLVM
9, 10, 11, or 12.</p>
<section id="compiler">
<h2><span class="section-number">2.4.1. </span>Compiler<a class="headerlink" href="#compiler" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>Add the <a class="reference internal" href="exts/rank_polymorphism.html#extension-DeepSubsumption"><code class="xref std std-extension docutils literal notranslate"><span class="pre">DeepSubsumption</span></code></a> language extension which reverses the
effects of the <a class="reference external" href="https://github.com/ghc-proposals/ghc-proposals/blob/master/proposals/0511-deep-subsumption.rst">Simplified Subsumption Proposal</a> introduced in GHC 9.0. This
is an attempt to make GHC 9.2.4 more backwards compatible with GHC 8.10 and
eases migration for users who depended on this feature.</p>
<p>This extension is enabled by default with the <a class="reference internal" href="exts/control.html#extension-Haskell2010"><code class="xref std std-extension docutils literal notranslate"><span class="pre">Haskell2010</span></code></a>
and <a class="reference internal" href="exts/control.html#extension-Haskell98"><code class="xref std std-extension docutils literal notranslate"><span class="pre">Haskell98</span></code></a> languages but disabled with the <a class="reference internal" href="exts/control.html#extension-GHC2021"><code class="xref std std-extension docutils literal notranslate"><span class="pre">GHC2021</span></code></a>
language originally introduced in GHC 9.2.1.</p>
<p>See the <a class="reference external" href="https://github.com/ghc-proposals/ghc-proposals/blob/master/proposals/0511-deep-subsumption.rst">Deep Subsumption Proposal</a> for more details.</p>
</li>
</ul>
<ul class="simple">
<li><p>The flag <code class="docutils literal notranslate"><span class="pre">-ddump-llvm</span></code> doesn’t imply <code class="docutils literal notranslate"><span class="pre">-fllvm</span></code> any more (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21776">#21776</a>).</p></li>
<li><p>Fix a compiler panic due to a bug in the simplifier (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21694">#21694</a>).</p></li>
<li><p>Fix a bug where the flag <code class="docutils literal notranslate"><span class="pre">Werror=unrecognised-warning-flags</span></code> did not behave as expected (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21682">#21682</a>).</p></li>
<li><p>Fix miscompilations on AArch64 (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21624">#21624</a>, <a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21773">#21773</a>, <a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/20735">#20735</a>).</p></li>
<li><p>Fix a miscompilation bug that manifests due to improper handling of name shadowing during
common subexpression elimination (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21685">#21685</a>).</p></li>
<li><p>Fix a space leak that may manifest using the <code class="docutils literal notranslate"><span class="pre">extendMG</span></code> function (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21818">#21818</a>).</p></li>
<li><p>Ensure types from record dot syntax are stored in the HIE file AST (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21797">#21797</a>).</p></li>
<li><p>Fix a compiler panic when importing “wrapper” with <code class="docutils literal notranslate"><span class="pre">-XCApiFFI</span></code> (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/20272">#20272</a>).</p></li>
<li><p>Enable <code class="docutils literal notranslate"><span class="pre">-Wunicode-bidirectional-format-characters</span></code> by default. This was meant to be enabled previously
but was not due to a botched backport (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21865">#21865</a>).</p></li>
</ul>
</section>
<section id="runtime-system">
<h2><span class="section-number">2.4.2. </span>Runtime system<a class="headerlink" href="#runtime-system" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Fix segfaults that may arise due to a bug in the implementation of the
<code class="docutils literal notranslate"><span class="pre">keepAlive#</span></code> primop. This may regress performance for certain programs which
use this primop or functions which use the primop, such as <code class="docutils literal notranslate"><span class="pre">withForeignPtr</span></code>.
These regressions are mostly small, but can be larger in certain edge cases.
Judicious use of <code class="docutils literal notranslate"><span class="pre">unsafeWithForeignPtr</span></code> when its argument is known
not to statically diverge can mitigate these in many cases. It is our
judgement that the critical correctness issues justify the regression in
performance and that it is important to get a release out with the fix while we
work on a better approach which will improve performance for future releases
(<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21708">#21708</a>).</p></li>
<li><p>Fix a segfault that may arise using LDV profiling (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21880">#21880</a>).</p></li>
<li><p>Fix a bug in the nonmoving GC which resulted in segfaults due to early GC (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21885">#21885</a>).</p></li>
<li><p>Fix accounting for copied bytes during sequential garbage collections (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21745">#21745</a>).</p></li>
<li><p>Allow passing``-po`` flag to set output during non-profiled builds (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21445">#21445</a>).</p></li>
<li><p>Respect the <code class="docutils literal notranslate"><span class="pre">-po</span></code> flag to set output while heap profiling (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21446">#21446</a>).</p></li>
</ul>
</section>
<section id="ghci">
<h2><span class="section-number">2.4.3. </span>GHCi<a class="headerlink" href="#ghci" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Allow CApi FFI calls in GHCi (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/7388">#7388</a>).</p></li>
<li><p>Fix behaviour of Ctrl-C on Windows in GHCi (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21889">#21889</a>).</p></li>
</ul>
</section>
<section id="core-libraries">
<h2><span class="section-number">2.4.4. </span>Core libraries<a class="headerlink" href="#core-libraries" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Bump <code class="docutils literal notranslate"><span class="pre">base</span></code> to 4.16.3.0.</p></li>
<li><p>Ensure <code class="docutils literal notranslate"><span class="pre">hGetBufNonBlocking</span></code> doesn’t block on Windows (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21665">#21665</a>).</p></li>
</ul>
</section>
<section id="build-system-and-packaging">
<h2><span class="section-number">2.4.5. </span>Build system and packaging<a class="headerlink" href="#build-system-and-packaging" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Don’t override linker on Darwin during <code class="docutils literal notranslate"><span class="pre">configure</span></code> (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/21712">#21712</a>).</p></li>
<li><p>Fix a hadrian bug to do with building profiled executables without corresponding libraries (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/19624">#19624</a>).</p></li>
<li><p>Fix a panic on FreeBSD when building with hadrian due to incorrect arch triple (<a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/issues/15718">#15718</a>).</p></li>
</ul>
</section>
<section id="included-libraries">
<h2><span class="section-number">2.4.6. </span>Included libraries<a class="headerlink" href="#included-libraries" title="Permalink to this heading">¶</a></h2>
<p>The package database provided with this distribution also contains a number of
packages other than GHC itself. See the changelogs provided with these packages
for further change information.</p>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><span>Package</span></th>
<th class="head"><span>Version</span></th>
<th class="head"><span>Reason for inclusion</span></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ghc</p></td>
<td><span>9.2.4</span></td>
<td><p><p>The compiler itself</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>Cabal</p></td>
<td><span>3.6.3.0</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghc-pkg</span></code> utility</p>
</p></td>
</tr>
<tr class="row-even"><td><p>Win32</p></td>
<td><span>2.12.0.1</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghc</span></code> library</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>array</p></td>
<td><span>0.5.4.0</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghc</span></code> library</p>
</p></td>
</tr>
<tr class="row-even"><td><p>base</p></td>
<td><span>4.16.3.0</span></td>
<td><p><p>Core library</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>binary</p></td>
<td><span>0.8.9.0</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghc</span></code> library</p>
</p></td>
</tr>
<tr class="row-even"><td><p>bytestring</p></td>
<td><span>0.11.3.1</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghc</span></code> library</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>containers</p></td>
<td><span>0.6.5.1</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghc</span></code> library</p>
</p></td>
</tr>
<tr class="row-even"><td><p>deepseq</p></td>
<td><span>1.4.6.1</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghc</span></code> library</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>directory</p></td>
<td><span>1.3.6.2</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghc</span></code> library</p>
</p></td>
</tr>
<tr class="row-even"><td><p>exceptions</p></td>
<td><span>0.10.4</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghc</span></code> and <code class="docutils literal notranslate"><span class="pre">haskeline</span></code> library</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>filepath</p></td>
<td><span>1.4.2.2</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghc</span></code> library</p>
</p></td>
</tr>
<tr class="row-even"><td><p>ghc-boot-th</p></td>
<td><span>9.2.4</span></td>
<td><p><p>Internal compiler library</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>ghc-boot</p></td>
<td><span>9.2.4</span></td>
<td><p><p>Internal compiler library</p>
</p></td>
</tr>
<tr class="row-even"><td><p>ghc-compact</p></td>
<td><span>0.1.0.0</span></td>
<td><p><p>Core library</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>ghc-heap</p></td>
<td><span>9.2.4</span></td>
<td><p><p>GHC heap-walking library</p>
</p></td>
</tr>
<tr class="row-even"><td><p>ghc-prim</p></td>
<td><span>0.8.0</span></td>
<td><p><p>Core library</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>ghci</p></td>
<td><span>9.2.4</span></td>
<td><p><p>The REPL interface</p>
</p></td>
</tr>
<tr class="row-even"><td><p>haskeline</p></td>
<td><span>0.8.2</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghci</span></code> executable</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>hpc</p></td>
<td><span>0.6.1.0</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">hpc</span></code> executable</p>
</p></td>
</tr>
<tr class="row-even"><td><p>integer-gmp</p></td>
<td><span>1.1</span></td>
<td><p><p>Core library</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>libiserv</p></td>
<td><span>9.2.4</span></td>
<td><p><p>Internal compiler library</p>
</p></td>
</tr>
<tr class="row-even"><td><p>mtl</p></td>
<td><span>2.2.2</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">Cabal</span></code> library</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>parsec</p></td>
<td><span>3.1.15.0</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">Cabal</span></code> library</p>
</p></td>
</tr>
<tr class="row-even"><td><p>pretty</p></td>
<td><span>1.1.3.6</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghc</span></code> library</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>process</p></td>
<td><span>1.6.13.2</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghc</span></code> library</p>
</p></td>
</tr>
<tr class="row-even"><td><p>stm</p></td>
<td><span>2.5.0.2</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">haskeline</span></code> library</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>template-haskell</p></td>
<td><span>2.18.0.0</span></td>
<td><p><p>Core library</p>
</p></td>
</tr>
<tr class="row-even"><td><p>terminfo</p></td>
<td><span>0.4.1.5</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">haskeline</span></code> library</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>text</p></td>
<td><span>1.2.5.0</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">Cabal</span></code> library</p>
</p></td>
</tr>
<tr class="row-even"><td><p>time</p></td>
<td><span>1.11.1.1</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghc</span></code> library</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>transformers</p></td>
<td><span>0.5.6.2</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghc</span></code> library</p>
</p></td>
</tr>
<tr class="row-even"><td><p>unix</p></td>
<td><span>2.7.2.2</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">ghc</span></code> library</p>
</p></td>
</tr>
<tr class="row-odd"><td><p>xhtml</p></td>
<td><span>3000.2.2.1</span></td>
<td><p><p>Dependency of <code class="docutils literal notranslate"><span class="pre">haddock</span></code> executable</p>
</p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ghci.html" class="btn btn-neutral float-right" title="3. Using GHCi" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="9.2.3-notes.html" class="btn btn-neutral float-left" title="2.3. Version 9.2.3" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, GHC Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.10. GHC Backends &mdash; Glasgow Haskell Compiler 9.2.4 User&#39;s Guide</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Glasgow Haskell Compiler 9.2.4 User&#39;s Guide"
          href="_static/opensearch.xml"/>

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="5.11. Options related to a particular phase" href="phases.html" />
    <link rel="prev" title="5.9. Packages" href="packages.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Glasgow Haskell Compiler
          

          
          </a>

          
            
            
              <div class="version">
                9.2.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">2. Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="ghci.html">3. Using GHCi</a></li>
<li class="toctree-l1"><a class="reference internal" href="runghc.html">4. Using runghc</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="usage.html">5. Using GHC</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="using.html">5.1. Using GHC</a></li>
<li class="toctree-l2"><a class="reference internal" href="using-warnings.html">5.2. Warnings and sanity-checking</a></li>
<li class="toctree-l2"><a class="reference internal" href="using-optimisation.html">5.3. Optimisation (code improvement)</a></li>
<li class="toctree-l2"><a class="reference internal" href="using-concurrent.html">5.4. Using Concurrent Haskell</a></li>
<li class="toctree-l2"><a class="reference internal" href="using-concurrent.html#using-smp-parallelism">5.5. Using SMP parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="flags.html">5.6. Flag reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="runtime_control.html">5.7. Running a compiled program</a></li>
<li class="toctree-l2"><a class="reference internal" href="separate_compilation.html">5.8. Filenames and separate compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="packages.html">5.9. Packages</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.10. GHC Backends</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#native-code-generator-fasm">5.10.1. Native Code Generator (<code class="docutils literal notranslate"><span class="pre">-fasm</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#llvm-code-generator-fllvm">5.10.2. LLVM Code Generator (<code class="docutils literal notranslate"><span class="pre">-fllvm</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#c-code-generator-fvia-c">5.10.3. C Code Generator (<code class="docutils literal notranslate"><span class="pre">-fvia-C</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unregisterised-compilation">5.10.4. Unregisterised compilation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="phases.html">5.11. Options related to a particular phase</a></li>
<li class="toctree-l2"><a class="reference internal" href="shared_libs.html">5.12. Using shared libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">5.13. Debugging the compiler</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="exts.html">6. Language extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending_ghc.html">7. Extending and using GHC as a Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="profiling.html">8. Profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug-info.html">9. Debugging compiled programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="gone_wrong.html">10. What to do when something goes wrong</a></li>
<li class="toctree-l1"><a class="reference internal" href="hints.html">11. Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">12. Other Haskell utility programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="win32-dlls.html">13. Running GHC on Win32 systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="bugs.html">14. Known bugs and infelicities</a></li>
<li class="toctree-l1"><a class="reference internal" href="eventlog-formats.html">15. Eventlog encodings</a></li>
<li class="toctree-l1"><a class="reference internal" href="editing-guide.html">16. Care and feeding of your GHC User’s Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Glasgow Haskell Compiler</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="usage.html"><span class="section-number">5. </span>Using GHC</a> &raquo;</li>
        
      <li><span class="section-number">5.10. </span>GHC Backends</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/codegens.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="ghc-backends">
<span id="code-generators"></span><h1><span class="section-number">5.10. </span>GHC Backends<a class="headerlink" href="#ghc-backends" title="Permalink to this heading">¶</a></h1>
<p id="index-0">GHC supports multiple backend code generators. This is the part of the
compiler responsible for taking the last intermediate representation
that GHC uses (a form called Cmm that is a simple, C like language) and
compiling it to executable code. The backends that GHC support are
described below.</p>
<section id="native-code-generator-fasm">
<span id="native-code-gen"></span><h2><span class="section-number">5.10.1. </span>Native Code Generator (<code class="docutils literal notranslate"><span class="pre">-fasm</span></code>)<a class="headerlink" href="#native-code-generator-fasm" title="Permalink to this heading">¶</a></h2>
<p id="index-1">The default backend for GHC. It is a native code generator, compiling
Cmm all the way to assembly code. It is the fastest backend and
generally produces good performance code. It has the best support for
compiling shared libraries. Select it with the <code class="docutils literal notranslate"><span class="pre">-fasm</span></code> flag.</p>
</section>
<section id="llvm-code-generator-fllvm">
<span id="llvm-code-gen"></span><h2><span class="section-number">5.10.2. </span>LLVM Code Generator (<code class="docutils literal notranslate"><span class="pre">-fllvm</span></code>)<a class="headerlink" href="#llvm-code-generator-fllvm" title="Permalink to this heading">¶</a></h2>
<p id="index-2">This is an alternative backend that uses the <a class="reference external" href="http://llvm.org">LLVM</a>
compiler to produce executable code. It generally produces code with
performance as good as the native code generator but for some cases can
produce much faster code. This is especially true for numeric, array
heavy code using packages like vector. The penalty is a significant
increase in compilation times. Select the LLVM backend with the
<a class="reference internal" href="phases.html#ghc-flag-fllvm"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-fllvm</span></code></a> flag.</p>
<p>You must install and have LLVM available on your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> for the LLVM code
generator to work. Specifically GHC needs to be able to call the <code class="docutils literal notranslate"><span class="pre">opt</span></code>
and <code class="docutils literal notranslate"><span class="pre">llc</span></code> tools. Secondly, if you are running Mac OS X with LLVM 3.0
or greater then you also need the <a class="reference external" href="http://clang.llvm.org">Clang C
compiler</a> compiler available on your <code class="docutils literal notranslate"><span class="pre">PATH</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that this GHC release expects an LLVM version in the 9
up to 13 (not inclusive) release series.</p>
</div>
<p>To install LLVM and Clang:</p>
<ul class="simple">
<li><p><em>Linux</em>: Use your package management tool.</p></li>
<li><p><em>Mac OS X</em>: Clang is included by default on recent OS X machines when
Xcode is installed (from 10.6 and later). LLVM is not included.
In order to use the LLVM based code generator, you should install the
<a class="reference external" href="http://mxcl.github.com/homebrew/">Homebrew</a> package manager for
OS X. Alternatively you can download binaries for LLVM and Clang from
<a class="reference external" href="http://llvm.org/releases/download.html">here</a>.</p></li>
<li><p><em>Windows</em>: You should download binaries for LLVM and clang from
<a class="reference external" href="http://llvm.org/releases/download.html">here</a>.</p></li>
</ul>
</section>
<section id="c-code-generator-fvia-c">
<span id="c-code-gen"></span><h2><span class="section-number">5.10.3. </span>C Code Generator (<code class="docutils literal notranslate"><span class="pre">-fvia-C</span></code>)<a class="headerlink" href="#c-code-generator-fvia-c" title="Permalink to this heading">¶</a></h2>
<span class="target" id="index-3"></span><dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-fvia-C">
<span class="sig-name descname"><span class="pre">-fvia-C</span></span><a class="headerlink" href="#ghc-flag-fvia-C" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the C code generator. Only supposed in unregisterised GHC builds.</p>
</dd></dl>

<p>This is the oldest code generator in GHC and is generally not included
any more having been deprecated around GHC 7.0. Select it with the
<a class="reference internal" href="#ghc-flag-fvia-C"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-fvia-C</span></code></a> flag.</p>
<p>The C code generator is only supported when GHC is built in
unregisterised mode, a mode where GHC produces “portable” C code as
output to facilitate porting GHC itself to a new platform. This mode
produces much slower code though so it’s unlikely your version of GHC
was built this way. If it has then the native code generator probably
won’t be available. You can check this information by calling
<code class="docutils literal notranslate"><span class="pre">ghc</span> <span class="pre">--info</span></code> (see <a class="reference internal" href="using.html#ghc-flag-info"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">--info</span></code></a>).</p>
</section>
<section id="unregisterised-compilation">
<span id="unreg"></span><h2><span class="section-number">5.10.4. </span>Unregisterised compilation<a class="headerlink" href="#unregisterised-compilation" title="Permalink to this heading">¶</a></h2>
<p id="index-4">The term “unregisterised” really means “compile via vanilla C”,
disabling some of the platform-specific tricks that GHC normally uses to
make programs go faster. When compiling unregisterised, GHC simply
generates a C file which is compiled via gcc.</p>
<p>When GHC is build in unregisterised mode only the LLVM and C code
generators will be available. The native code generator won’t be. LLVM
usually offers a substantial performance benefit over the C backend in
unregisterised mode.</p>
<p>Unregisterised compilation can be useful when porting GHC to a new
machine, since it reduces the prerequisite tools to <code class="docutils literal notranslate"><span class="pre">gcc</span></code>, <code class="docutils literal notranslate"><span class="pre">as</span></code>, and
<code class="docutils literal notranslate"><span class="pre">ld</span></code> and nothing more, and furthermore the amount of platform-specific
code that needs to be written in order to get unregisterised compilation
going is usually fairly small.</p>
<p>Unregisterised compilation cannot be selected at compile-time; you have
to build GHC with the appropriate options set. Consult the GHC Building
Guide for details.</p>
<p>You can check if your GHC is unregisterised by calling
<code class="docutils literal notranslate"><span class="pre">ghc</span> <span class="pre">--print-unregisterised</span></code> (see <a class="reference internal" href="using.html#ghc-flag-print-unregisterised"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">--print-unregisterised</span></code></a>) or
<code class="docutils literal notranslate"><span class="pre">ghc</span> <span class="pre">--info</span></code> (see <a class="reference internal" href="using.html#ghc-flag-info"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">--info</span></code></a>).</p>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="phases.html" class="btn btn-neutral float-right" title="5.11. Options related to a particular phase" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="packages.html" class="btn btn-neutral float-left" title="5.9. Packages" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, GHC Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
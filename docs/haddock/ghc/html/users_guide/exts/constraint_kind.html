

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6.10.3. The Constraint kind &mdash; Glasgow Haskell Compiler 9.2.4 User&#39;s Guide</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Glasgow Haskell Compiler 9.2.4 User&#39;s Guide"
          href="../_static/opensearch.xml"/>

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6.10.4. Quantified constraints" href="quantified_constraints.html" />
    <link rel="prev" title="6.10.2. Equality constraints and Coercible constraint" href="equality_constraints.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Glasgow Haskell Compiler
          

          
          </a>

          
            
            
              <div class="version">
                9.2.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">2. Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ghci.html">3. Using GHCi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../runghc.html">4. Using runghc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">5. Using GHC</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../exts.html">6. Language extensions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">6.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="syntax.html">6.2. Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="import_export.html">6.3. Import and export</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">6.4. Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="records.html">6.5. Records</a></li>
<li class="toctree-l2"><a class="reference internal" href="deriving.html">6.6. Deriving mechanism</a></li>
<li class="toctree-l2"><a class="reference internal" href="patterns.html">6.7. Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="typeclasses.html">6.8. Class and instances declarations</a></li>
<li class="toctree-l2"><a class="reference internal" href="literals.html">6.9. Literals</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="constraints.html">6.10. Constraints</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="flexible_contexts.html">6.10.1. Loosening restrictions on class contexts</a></li>
<li class="toctree-l3"><a class="reference internal" href="equality_constraints.html">6.10.2. Equality constraints and Coercible constraint</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">6.10.3. The <code class="docutils literal notranslate"><span class="pre">Constraint</span></code> kind</a></li>
<li class="toctree-l3"><a class="reference internal" href="quantified_constraints.html">6.10.4. Quantified constraints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="type_signatures.html">6.11. Type signatures</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings.html">6.12. Bindings and generalisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="template_haskell.html">6.13. Template Haskell</a></li>
<li class="toctree-l2"><a class="reference internal" href="strict.html">6.14. Bang patterns and Strict Haskell</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallel.html">6.15. Parallel and Concurrent</a></li>
<li class="toctree-l2"><a class="reference internal" href="primitives.html">6.16. Unboxed types and primitive operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="ffi.html">6.17. Foreign function interface (FFI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="safe_haskell.html">6.18. Safe Haskell</a></li>
<li class="toctree-l2"><a class="reference internal" href="misc.html">6.19. Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="pragmas.html">6.20. Pragmas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../extending_ghc.html">7. Extending and using GHC as a Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../profiling.html">8. Profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debug-info.html">9. Debugging compiled programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gone_wrong.html">10. What to do when something goes wrong</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hints.html">11. Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils.html">12. Other Haskell utility programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../win32-dlls.html">13. Running GHC on Win32 systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bugs.html">14. Known bugs and infelicities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eventlog-formats.html">15. Eventlog encodings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../editing-guide.html">16. Care and feeding of your GHC User’s Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Glasgow Haskell Compiler</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../exts.html"><span class="section-number">6. </span>Language extensions</a> &raquo;</li>
        
          <li><a href="constraints.html"><span class="section-number">6.10. </span>Constraints</a> &raquo;</li>
        
      <li><span class="section-number">6.10.3. </span>The <code class="docutils literal notranslate"><span class="pre">Constraint</span></code> kind</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/exts/constraint_kind.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="the-constraint-kind">
<span id="constraint-kind"></span><h1><span class="section-number">6.10.3. </span>The <code class="docutils literal notranslate"><span class="pre">Constraint</span></code> kind<a class="headerlink" href="#the-constraint-kind" title="Permalink to this heading">¶</a></h1>
<dl class="std extension">
<dt class="sig sig-object std" id="extension-ConstraintKinds">
<span id="ghc-flag--XConstraintKinds"></span><span id="extension-NoConstraintKinds"></span><span class="sig-name descname"><span class="pre">ConstraintKinds</span></span><a class="headerlink" href="#extension-ConstraintKinds" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Since<span class="colon">:</span></dt>
<dd class="field-odd"><p>7.4.1</p>
</dd>
</dl>
<p>Allow types of kind <code class="docutils literal notranslate"><span class="pre">Constraint</span></code> to be used in contexts.</p>
</dd></dl>

<p>Normally, <em>constraints</em> (which appear in types to the left of the <code class="docutils literal notranslate"><span class="pre">=&gt;</span></code>
arrow) have a very restricted syntax. They can only be:</p>
<ul class="simple">
<li><p>Class constraints, e.g. <code class="docutils literal notranslate"><span class="pre">Show</span> <span class="pre">a</span></code></p></li>
<li><p><a class="reference internal" href="implicit_parameters.html#extension-ImplicitParams"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">Implicit</span> <span class="pre">parameter</span></code></a> constraints, e.g.
<code class="docutils literal notranslate"><span class="pre">?x::Int</span></code> (with the <a class="reference internal" href="implicit_parameters.html#extension-ImplicitParams"><code class="xref std std-extension docutils literal notranslate"><span class="pre">ImplicitParams</span></code></a> extension)</p></li>
<li><p><a class="reference internal" href="equality_constraints.html#equality-constraints"><span class="std std-ref">Equality constraints</span></a>, e.g. <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">~</span> <span class="pre">Int</span></code>
(with the <a class="reference internal" href="type_families.html#extension-TypeFamilies"><code class="xref std std-extension docutils literal notranslate"><span class="pre">TypeFamilies</span></code></a> or <a class="reference internal" href="gadt.html#extension-GADTs"><code class="xref std std-extension docutils literal notranslate"><span class="pre">GADTs</span></code></a> extensions)</p></li>
</ul>
<p>With the <a class="reference internal" href="#extension-ConstraintKinds"><code class="xref std std-extension docutils literal notranslate"><span class="pre">ConstraintKinds</span></code></a> extension, GHC becomes more liberal in what it
accepts as constraints in your program. To be precise, with this flag
any <em>type</em> of the new kind <code class="docutils literal notranslate"><span class="pre">Constraint</span></code> can be used as a constraint.
The following things have kind <code class="docutils literal notranslate"><span class="pre">Constraint</span></code>:</p>
<ul>
<li><p>Anything which is already valid as a constraint without the flag:
saturated applications to type classes, implicit parameter and
equality constraints.</p></li>
<li><p>Tuples, all of whose component types have kind <code class="docutils literal notranslate"><span class="pre">Constraint</span></code>. So for example
the type <code class="docutils literal notranslate"><span class="pre">(Show</span> <span class="pre">a,</span> <span class="pre">Ord</span> <span class="pre">a)</span></code> is of kind <code class="docutils literal notranslate"><span class="pre">Constraint</span></code>.</p></li>
<li><p>Anything whose form is not yet known, but the user has declared to
have kind <code class="docutils literal notranslate"><span class="pre">Constraint</span></code> (for which they need to import it from
<code class="docutils literal notranslate"><span class="pre">Data.Kind</span></code>). So for example
<code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">Foo</span> <span class="pre">(f</span> <span class="pre">::</span> <span class="pre">Type</span> <span class="pre">-&gt;</span> <span class="pre">Constraint)</span> <span class="pre">=</span> <span class="pre">forall</span> <span class="pre">b.</span> <span class="pre">f</span> <span class="pre">b</span> <span class="pre">=&gt;</span> <span class="pre">b</span> <span class="pre">-&gt;</span> <span class="pre">b</span></code>
is allowed, as well as examples involving type families:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">type</span><span class="w"> </span><span class="kr">family</span><span class="w"> </span><span class="kt">Typ</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Constraint</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">Typ</span><span class="w"> </span><span class="kt">Int</span><span class="w">  </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Show</span><span class="w"> </span><span class="n">b</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">Typ</span><span class="w"> </span><span class="kt">Bool</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Num</span><span class="w"> </span><span class="n">b</span><span class="w"></span>

<span class="nf">func</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Typ</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">b</span><span class="w"></span>
<span class="nf">func</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="o">...</span><span class="w"></span>
</pre></div>
</div>
</li>
</ul>
<p>Note that because constraints are just handled as types of a particular
kind, this extension allows type constraint synonyms:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">type</span><span class="w"> </span><span class="kt">Stringy</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="p">(</span><span class="kt">Read</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">Show</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"></span>
<span class="nf">foo</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Stringy</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"></span>
<span class="nf">foo</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="p">(</span><span class="n">show</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">read</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Presently, only standard constraints, tuples and type synonyms for those
two sorts of constraint are permitted in instance contexts and
superclasses (without extra flags). The reason is that permitting more
general constraints can cause type checking to loop, as it would with
these two programs:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">type</span><span class="w"> </span><span class="kr">family</span><span class="w"> </span><span class="kt">Clsish</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">Clsish</span><span class="w"> </span><span class="nb">()</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Cls</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="kr">class</span><span class="w"> </span><span class="kt">Clsish</span><span class="w"> </span><span class="nb">()</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="kt">Cls</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="kr">where</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">class</span><span class="w"> </span><span class="kt">OkCls</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="kr">where</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="kr">family</span><span class="w"> </span><span class="kt">OkClsish</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">OkClsish</span><span class="w"> </span><span class="nb">()</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">OkCls</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="kr">instance</span><span class="w"> </span><span class="kt">OkClsish</span><span class="w"> </span><span class="nb">()</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="kt">OkCls</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="kr">where</span><span class="w"></span>
</pre></div>
</div>
<p>You may write programs that use exotic sorts of constraints in instance
contexts and superclasses, but to do so you must use
<a class="reference internal" href="instances.html#extension-UndecidableInstances"><code class="xref std std-extension docutils literal notranslate"><span class="pre">UndecidableInstances</span></code></a> to signal that you don’t mind if the type
checker fails to terminate.</p>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="quantified_constraints.html" class="btn btn-neutral float-right" title="6.10.4. Quantified constraints" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="equality_constraints.html" class="btn btn-neutral float-left" title="6.10.2. Equality constraints and Coercible constraint" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, GHC Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6.2.18. Typed Holes &mdash; Glasgow Haskell Compiler 9.2.4 User&#39;s Guide</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Glasgow Haskell Compiler 9.2.4 User&#39;s Guide"
          href="../_static/opensearch.xml"/>

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6.2.19. Arrow notation" href="arrows.html" />
    <link rel="prev" title="6.2.17. More liberal syntax for function arguments" href="block_arguments.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Glasgow Haskell Compiler
          

          
          </a>

          
            
            
              <div class="version">
                9.2.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">2. Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ghci.html">3. Using GHCi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../runghc.html">4. Using runghc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">5. Using GHC</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../exts.html">6. Language extensions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">6.1. Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="syntax.html">6.2. Syntax</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="unicode_syntax.html">6.2.1. Unicode syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="magic_hash.html">6.2.2. The magic hash</a></li>
<li class="toctree-l3"><a class="reference internal" href="recursive_do.html">6.2.3. The recursive do-notation</a></li>
<li class="toctree-l3"><a class="reference internal" href="applicative_do.html">6.2.4. Applicative do-notation</a></li>
<li class="toctree-l3"><a class="reference internal" href="qualified_do.html">6.2.5. Qualified do-notation</a></li>
<li class="toctree-l3"><a class="reference internal" href="parallel_list_comprehensions.html">6.2.6. Parallel List Comprehensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="generalised_list_comprehensions.html">6.2.7. Generalised (SQL-like) List Comprehensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="monad_comprehensions.html">6.2.8. Monad comprehensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="overloaded_lists.html">6.2.9. Overloaded lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="rebindable_syntax.html">6.2.10. Rebindable syntax and the implicit Prelude import</a></li>
<li class="toctree-l3"><a class="reference internal" href="rebindable_syntax.html#postfix-operators">6.2.11. Postfix operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple_sections.html">6.2.12. Tuple sections</a></li>
<li class="toctree-l3"><a class="reference internal" href="lambda_case.html">6.2.13. Lambda-case</a></li>
<li class="toctree-l3"><a class="reference internal" href="empty_case.html">6.2.14. Empty case alternatives</a></li>
<li class="toctree-l3"><a class="reference internal" href="multiway_if.html">6.2.15. Multi-way if-expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="local_fixity_decls.html">6.2.16. Local Fixity Declarations</a></li>
<li class="toctree-l3"><a class="reference internal" href="block_arguments.html">6.2.17. More liberal syntax for function arguments</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">6.2.18. Typed Holes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#valid-hole-fits">6.2.18.1. Valid Hole Fits</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="arrows.html">6.2.19. Arrow notation</a></li>
<li class="toctree-l3"><a class="reference internal" href="lexical_negation.html">6.2.20. Lexical negation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="import_export.html">6.3. Import and export</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">6.4. Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="records.html">6.5. Records</a></li>
<li class="toctree-l2"><a class="reference internal" href="deriving.html">6.6. Deriving mechanism</a></li>
<li class="toctree-l2"><a class="reference internal" href="patterns.html">6.7. Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="typeclasses.html">6.8. Class and instances declarations</a></li>
<li class="toctree-l2"><a class="reference internal" href="literals.html">6.9. Literals</a></li>
<li class="toctree-l2"><a class="reference internal" href="constraints.html">6.10. Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="type_signatures.html">6.11. Type signatures</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings.html">6.12. Bindings and generalisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="template_haskell.html">6.13. Template Haskell</a></li>
<li class="toctree-l2"><a class="reference internal" href="strict.html">6.14. Bang patterns and Strict Haskell</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallel.html">6.15. Parallel and Concurrent</a></li>
<li class="toctree-l2"><a class="reference internal" href="primitives.html">6.16. Unboxed types and primitive operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="ffi.html">6.17. Foreign function interface (FFI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="safe_haskell.html">6.18. Safe Haskell</a></li>
<li class="toctree-l2"><a class="reference internal" href="misc.html">6.19. Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="pragmas.html">6.20. Pragmas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../extending_ghc.html">7. Extending and using GHC as a Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../profiling.html">8. Profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debug-info.html">9. Debugging compiled programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gone_wrong.html">10. What to do when something goes wrong</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hints.html">11. Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils.html">12. Other Haskell utility programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../win32-dlls.html">13. Running GHC on Win32 systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bugs.html">14. Known bugs and infelicities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eventlog-formats.html">15. Eventlog encodings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../editing-guide.html">16. Care and feeding of your GHC User’s Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Glasgow Haskell Compiler</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../exts.html"><span class="section-number">6. </span>Language extensions</a> &raquo;</li>
        
          <li><a href="syntax.html"><span class="section-number">6.2. </span>Syntax</a> &raquo;</li>
        
      <li><span class="section-number">6.2.18. </span>Typed Holes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/exts/typed_holes.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="typed-holes">
<span id="id1"></span><h1><span class="section-number">6.2.18. </span>Typed Holes<a class="headerlink" href="#typed-holes" title="Permalink to this heading">¶</a></h1>
<p>Typed holes are a feature of GHC that allows special placeholders
written with a leading underscore (e.g., “<code class="docutils literal notranslate"><span class="pre">_</span></code>”, “<code class="docutils literal notranslate"><span class="pre">_foo</span></code>”,
“<code class="docutils literal notranslate"><span class="pre">_bar</span></code>”), to be used as expressions. During compilation these holes
will generate an error message that describes which type is expected at
the hole’s location, information about the origin of any free type
variables, and a list of local bindings that might help fill the hole
and bindings in scope that fit the type of the hole that might help fill
the hole with actual code. Typed holes are always enabled in GHC.</p>
<p>The goal of typed holes is to help with writing Haskell code rather than
to change the type system. Typed holes can be used to obtain extra
information from the type checker, which might otherwise be hard to get.
Normally, using GHCi, users can inspect the (inferred) type signatures
of all top-level bindings. However, this method is less convenient with
terms that are not defined on top-level or inside complex expressions.
Holes allow the user to check the type of the term they are about to
write.</p>
<p>For example, compiling the following module with GHC:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">f</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="nf">f</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">_</span><span class="w"></span>
</pre></div>
</div>
<p>will fail with the following error:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">hole</span><span class="o">.</span><span class="n">hs</span><span class="kt">:</span><span class="mi">2</span><span class="kt">:</span><span class="mi">7</span><span class="kt">:</span><span class="w"></span>
<span class="w">    </span><span class="kt">Found</span><span class="w"> </span><span class="n">hole</span><span class="w"> </span><span class="p">`</span><span class="n">_&#39;</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="kr">type</span><span class="kt">:</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="w">    </span><span class="kt">Where:</span><span class="w"> </span><span class="p">`</span><span class="n">a&#39;</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">rigid</span><span class="w"> </span><span class="kr">type</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">by</span><span class="w"></span>
<span class="w">               </span><span class="n">the</span><span class="w"> </span><span class="kr">type</span><span class="w"> </span><span class="n">signature</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">hole</span><span class="o">.</span><span class="n">hs</span><span class="kt">:</span><span class="mi">1</span><span class="kt">:</span><span class="mi">6</span><span class="w"></span>
<span class="w">    </span><span class="kt">In</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="kt">:</span><span class="w"> </span><span class="kr">_</span><span class="w"></span>
<span class="w">    </span><span class="kt">In</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">equation</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="p">`</span><span class="n">f&#39;</span><span class="kt">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">_</span><span class="w"></span>
<span class="w">    </span><span class="kt">Relevant</span><span class="w"> </span><span class="n">bindings</span><span class="w"> </span><span class="n">include</span><span class="w"></span>
<span class="w">      </span><span class="n">x</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">(</span><span class="n">bound</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">hole</span><span class="o">.</span><span class="n">hs</span><span class="kt">:</span><span class="mi">2</span><span class="kt">:</span><span class="mi">3</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="n">f</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">(</span><span class="n">bound</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">hole</span><span class="o">.</span><span class="n">hs</span><span class="kt">:</span><span class="mi">2</span><span class="kt">:</span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kt">Valid</span><span class="w"> </span><span class="n">hole</span><span class="w"> </span><span class="n">fits</span><span class="w"> </span><span class="n">include</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">(</span><span class="n">bound</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">hole</span><span class="o">.</span><span class="n">hs</span><span class="kt">:</span><span class="mi">2</span><span class="kt">:</span><span class="mi">3</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Here are some more details:</p>
<ul>
<li><p>A “<code class="docutils literal notranslate"><span class="pre">Found</span> <span class="pre">hole</span></code>” error usually terminates compilation, like any
other type error. After all, you have omitted some code from your
program. Nevertheless, you can run and test a piece of code
containing holes, by using the <a class="reference internal" href="../using-warnings.html#ghc-flag-fdefer-typed-holes"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-fdefer-typed-holes</span></code></a> flag. This
flag defers errors produced by typed holes until runtime, and
converts them into compile-time warnings. These warnings can in turn
be suppressed entirely by <a class="reference internal" href="../using-warnings.html#ghc-flag-Wtyped-holes"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-Wno-typed-holes</span></code></a>.</p>
<p>The same behaviour for “<code class="docutils literal notranslate"><span class="pre">Variable</span> <span class="pre">out</span> <span class="pre">of</span> <span class="pre">scope</span></code>” errors, it terminates
compilation by default. You can defer such errors by using the
<a class="reference internal" href="../using-warnings.html#ghc-flag-fdefer-out-of-scope-variables"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-fdefer-out-of-scope-variables</span></code></a> flag. This flag defers errors
produced by out of scope variables until runtime, and
converts them into compile-time warnings. These warnings can in turn
be suppressed entirely by <a class="reference internal" href="../using-warnings.html#ghc-flag-Wdeferred-out-of-scope-variables"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-Wno-deferred-out-of-scope-variables</span></code></a>.</p>
<p>The result is that a hole or a variable will behave like <code class="docutils literal notranslate"><span class="pre">undefined</span></code>, but with
the added benefits that it shows a warning at compile time, and will
show the same message if it gets evaluated at runtime. This behaviour
follows that of the <a class="reference internal" href="../using-warnings.html#ghc-flag-fdefer-type-errors"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-fdefer-type-errors</span></code></a> option, which implies
<a class="reference internal" href="../using-warnings.html#ghc-flag-fdefer-typed-holes"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-fdefer-typed-holes</span></code></a> and <a class="reference internal" href="../using-warnings.html#ghc-flag-fdefer-out-of-scope-variables"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-fdefer-out-of-scope-variables</span></code></a>.
See <a class="reference internal" href="defer_type_errors.html#defer-type-errors"><span class="std std-ref">Deferring type errors to runtime</span></a>.</p>
</li>
<li><p>All unbound identifiers are treated as typed holes, <em>whether or not
they start with an underscore</em>. The only difference is in the error
message:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">cons</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">True</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="n">_x</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="n">y</span><span class="w"></span>
</pre></div>
</div>
<p>yields the errors</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Foo.hs:3:21: error:
   Found hole: _x :: Bool
   Or perhaps ‘_x’ is mis-spelled, or not in scope
   In the first argument of ‘(:)’, namely ‘_x’
   In the second argument of ‘(:)’, namely ‘_x : y’
   In the second argument of ‘(:)’, namely ‘True : _x : y’
   Relevant bindings include
     z :: Bool (bound at Foo.hs:3:6)
   cons :: Bool -&gt; [Bool] (bound at Foo.hs:3:1)
   Valid hole fits include
     z :: Bool (bound at mpt.hs:2:6)
     otherwise :: Bool
       (imported from ‘Prelude’ at mpt.hs:1:8-10
       (and originally defined in ‘GHC.Base’))
     False :: Bool
       (imported from ‘Prelude’ at mpt.hs:1:8-10
       (and originally defined in ‘GHC.Types’))
     True :: Bool
       (imported from ‘Prelude’ at mpt.hs:1:8-10
       (and originally defined in ‘GHC.Types’))
     maxBound :: forall a. Bounded a =&gt; a
       with maxBound @Bool
       (imported from ‘Prelude’ at mpt.hs:1:8-10
       (and originally defined in ‘GHC.Enum’))
     minBound :: forall a. Bounded a =&gt; a
       with minBound @Bool
       (imported from ‘Prelude’ at mpt.hs:1:8-10
       (and originally defined in ‘GHC.Enum’))

Foo.hs:3:26: error:
    Variable not in scope: y :: [Bool]
</pre></div>
</div>
<p>More information is given for explicit holes (i.e. ones that start
with an underscore), than for out-of-scope variables, because the
latter are often unintended typos, so the extra information is
distracting. If you want the detailed information, use a leading
underscore to make explicit your intent to use a hole.</p>
</li>
<li><p>Unbound identifiers with the same name are never unified, even within
the same function, but shown individually. For example:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">cons</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">_x</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="n">_x</span><span class="w"></span>
</pre></div>
</div>
<p>results in the following errors:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unbound.hs:1:8:
    Found hole &#39;_x&#39; with type: a
    Where: `a&#39; is a rigid type variable bound by
               the inferred type of cons :: [a] at unbound.hs:1:1
    In the first argument of `(:)&#39;, namely `_x&#39;
    In the expression: _x : _x
    In an equation for `cons&#39;: cons = _x : _x
    Relevant bindings include cons :: [a] (bound at unbound.hs:1:1)

unbound.hs:1:13:
    Found hole: _x :: [a]
    Where: ‘a’ is a rigid type variable bound by
            the inferred type of cons :: [a]
            at unbound.hs:3:1-12
    Or perhaps ‘_x’ is mis-spelled, or not in scope
    In the second argument of ‘(:)’, namely ‘_x’
    In the expression: _x : _x
    In an equation for ‘cons’: cons = _x : _x
    Relevant bindings include cons :: [a] (bound at unbound.hs:3:1)
    Valid hole fits include
      cons :: forall a. [a]
        with cons @a
        (defined at mpt.hs:3:1)
      mempty :: forall a. Monoid a =&gt; a
        with mempty @[a]
        (imported from ‘Prelude’ at mpt.hs:1:8-10
        (and originally defined in ‘GHC.Base’))
</pre></div>
</div>
<p>Notice the two different types reported for the two different
occurrences of <code class="docutils literal notranslate"><span class="pre">_x</span></code>.</p>
</li>
<li><p>No language extension is required to use typed holes. The lexeme
“<code class="docutils literal notranslate"><span class="pre">_</span></code>” was previously illegal in Haskell, but now has a more
informative error message. The lexeme “<code class="docutils literal notranslate"><span class="pre">_x</span></code>” is a perfectly legal
variable, and its behaviour is unchanged when it is in scope. For
example</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">f</span><span class="w"> </span><span class="n">_x</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">_x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
</pre></div>
</div>
<p>does not elicit any errors. Only a variable <em>that is not in scope</em>
(whether or not it starts with an underscore) is treated as an error
(which it always was), albeit now with a more informative error
message.</p>
</li>
<li><p>Unbound data constructors used in expressions behave exactly as
above. However, unbound data constructors used in <em>patterns</em> cannot
be deferred, and instead bring compilation to a halt. (In
implementation terms, they are reported by the renamer rather than
the type checker.)</p></li>
<li><p>The list of valid hole fits is found by checking which bindings in scope
would fit into the hole. As an example, compiling the following module with
GHC:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span><span class="w"> </span><span class="nn">Data.List</span><span class="w"> </span><span class="p">(</span><span class="nf">inits</span><span class="p">)</span><span class="w"></span>

<span class="nf">g</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="p">[</span><span class="kt">String</span><span class="p">]</span><span class="w"></span>
<span class="nf">g</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">_</span><span class="w"> </span><span class="s">&quot;hello, world&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>yields the errors:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>• Found hole: _ :: [Char] -&gt; [String]
• In the expression: _
  In the expression: _ &quot;hello, world&quot;
  In an equation for ‘g’: g = _ &quot;hello, world&quot;
• Relevant bindings include g :: [String] (bound at mpt.hs:6:1)
  Valid hole fits include
    lines :: String -&gt; [String]
      (imported from ‘Prelude’ at mpt.hs:3:8-9
       (and originally defined in ‘base-4.11.0.0:Data.OldList’))
    words :: String -&gt; [String]
      (imported from ‘Prelude’ at mpt.hs:3:8-9
       (and originally defined in ‘base-4.11.0.0:Data.OldList’))
    inits :: forall a. [a] -&gt; [[a]]
      with inits @Char
      (imported from ‘Data.List’ at mpt.hs:4:19-23
       (and originally defined in ‘base-4.11.0.0:Data.OldList’))
    repeat :: forall a. a -&gt; [a]
      with repeat @String
      (imported from ‘Prelude’ at mpt.hs:3:8-9
       (and originally defined in ‘GHC.List’))
    fail :: forall (m :: * -&gt; *). Monad m =&gt; forall a. String -&gt; m a
      with fail @[] @String
      (imported from ‘Prelude’ at mpt.hs:3:8-9
       (and originally defined in ‘GHC.Base’))
    return :: forall (m :: * -&gt; *). Monad m =&gt; forall a. a -&gt; m a
      with return @[] @String
      (imported from ‘Prelude’ at mpt.hs:3:8-9
       (and originally defined in ‘GHC.Base’))
    pure :: forall (f :: * -&gt; *). Applicative f =&gt; forall a. a -&gt; f a
      with pure @[] @String
      (imported from ‘Prelude’ at mpt.hs:3:8-9
       (and originally defined in ‘GHC.Base’))
    read :: forall a. Read a =&gt; String -&gt; a
      with read @[String]
      (imported from ‘Prelude’ at mpt.hs:3:8-9
       (and originally defined in ‘Text.Read’))
    mempty :: forall a. Monoid a =&gt; a
      with mempty @([Char] -&gt; [String])
      (imported from ‘Prelude’ at mpt.hs:3:8-9
       (and originally defined in ‘GHC.Base’))
</pre></div>
</div>
</li>
</ul>
<p>There are a few flags for controlling the amount of context information shown
for typed holes:</p>
<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-fshow-hole-constraints">
<span class="sig-name descname"><span class="pre">-fshow-hole-constraints</span></span><a class="headerlink" href="#ghc-flag-fshow-hole-constraints" title="Permalink to this definition">¶</a></dt>
<dd><p>When reporting typed holes, also print constraints that are in scope.
Example:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">f</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Eq</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Bool</span><span class="w"></span>
<span class="nf">f</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">_</span><span class="w"></span>
</pre></div>
</div>
<p>results in the following message:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>show_constraints.hs:4:7: error:
    • Found hole: _ :: Bool
    • In the expression: _
      In an equation for ‘f’: f x = _
    • Relevant bindings include
        x :: a (bound at show_constraints.hs:4:3)
        f :: a -&gt; Bool (bound at show_constraints.hs:4:1)
      Constraints include Eq a (from show_constraints.hs:3:1-22)
      Valid hole fits include
        otherwise :: Bool
        False :: Bool
        True :: Bool
        maxBound :: forall a. Bounded a =&gt; a
          with maxBound @Bool
        minBound :: forall a. Bounded a =&gt; a
          with minBound @Bool
</pre></div>
</div>
</dd></dl>

<section id="valid-hole-fits">
<span id="typed-hole-valid-hole-fits"></span><h2><span class="section-number">6.2.18.1. </span>Valid Hole Fits<a class="headerlink" href="#valid-hole-fits" title="Permalink to this heading">¶</a></h2>
<p>GHC sometimes suggests valid hole fits for typed holes, which is
configurable by a few flags.</p>
<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-fno-show-valid-hole-fits">
<span class="sig-name descname"><span class="pre">-fno-show-valid-hole-fits</span></span><a class="headerlink" href="#ghc-flag-fno-show-valid-hole-fits" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Default<span class="colon">:</span></dt>
<dd class="field-odd"><p>off</p>
</dd>
</dl>
<p>This flag can be toggled to turn off the display of valid hole fits
entirely.</p>
</dd></dl>

<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-fmax-valid-hole-fits-n">
<span class="sig-name descname"><span class="pre">-fmax-valid-hole-fits</span></span><span class="sig-prename descclassname"><span class="pre">=⟨n⟩</span></span><a class="headerlink" href="#ghc-flag-fmax-valid-hole-fits-n" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Default<span class="colon">:</span></dt>
<dd class="field-odd"><p>6</p>
</dd>
</dl>
<p>The list of valid hole fits is limited by displaying up to 6
hole fits per hole. The number of hole fits shown can be set by this
flag. Turning the limit off with <a class="reference internal" href="#ghc-flag--fmax-valid-hole-fits=⟨n⟩"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-fno-max-valid-hole-fits</span></code></a>
displays all found hole fits.</p>
</dd></dl>

<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-fshow-type-of-hole-fits">
<span class="sig-name descname"><span class="pre">-fshow-type-of-hole-fits</span></span><a class="headerlink" href="#ghc-flag-fshow-type-of-hole-fits" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Default<span class="colon">:</span></dt>
<dd class="field-odd"><p>on</p>
</dd>
</dl>
<p>By default, the hole fits show the type of the hole fit.
This can be turned off by the reverse of this flag.</p>
</dd></dl>

<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-fshow-type-app-of-hole-fits">
<span class="sig-name descname"><span class="pre">-fshow-type-app-of-hole-fits</span></span><a class="headerlink" href="#ghc-flag-fshow-type-app-of-hole-fits" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Default<span class="colon">:</span></dt>
<dd class="field-odd"><p>on</p>
</dd>
</dl>
<p>By default, the hole fits show the type application needed to make
this hole fit fit the type of the hole, e.g. for the hole
<code class="docutils literal notranslate"><span class="pre">(_</span> <span class="pre">::</span> <span class="pre">Int</span> <span class="pre">-&gt;</span> <span class="pre">[Int])</span></code>, <code class="docutils literal notranslate"><span class="pre">mempty</span></code> is a hole fit with
<code class="docutils literal notranslate"><span class="pre">mempty</span> <span class="pre">&#64;(Int</span> <span class="pre">-&gt;</span> <span class="pre">[Int])</span></code>. This can be toggled off with
the reverse of this flag.</p>
</dd></dl>

<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-fshow-docs-of-hole-fits">
<span class="sig-name descname"><span class="pre">-fshow-docs-of-hole-fits</span></span><a class="headerlink" href="#ghc-flag-fshow-docs-of-hole-fits" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Default<span class="colon">:</span></dt>
<dd class="field-odd"><p>off</p>
</dd>
</dl>
<p>It can sometime be the case that the name and type of a valid hole
fit is not enough to realize what the fit stands for. This flag
adds the documentation of the fit to the message, if the
documentation is available (and the module from which the function
comes was compiled with the <code class="docutils literal notranslate"><span class="pre">-haddock</span></code> flag).</p>
</dd></dl>

<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-fshow-type-app-vars-of-hole-fits">
<span class="sig-name descname"><span class="pre">-fshow-type-app-vars-of-hole-fits</span></span><a class="headerlink" href="#ghc-flag-fshow-type-app-vars-of-hole-fits" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Default<span class="colon">:</span></dt>
<dd class="field-odd"><p>on</p>
</dd>
</dl>
<p>By default, the hole fits show the type application needed to make
this hole fit fit the type of the hole, e.g. for the hole
<code class="docutils literal notranslate"><span class="pre">(_</span> <span class="pre">::</span> <span class="pre">Int</span> <span class="pre">-&gt;</span> <span class="pre">[Int])</span></code>, <code class="docutils literal notranslate"><span class="pre">mempty</span> <span class="pre">::</span> <span class="pre">Monoid</span> <span class="pre">a</span> <span class="pre">=&gt;</span> <span class="pre">a</span></code> is a hole fit
with <code class="docutils literal notranslate"><span class="pre">mempty</span> <span class="pre">&#64;(Int</span> <span class="pre">-&gt;</span> <span class="pre">[Int])</span></code>. This flag toggles whether to show
<code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">~</span> <span class="pre">(Int</span> <span class="pre">-&gt;</span> <span class="pre">[Int])</span></code> instead of <code class="docutils literal notranslate"><span class="pre">mempty</span> <span class="pre">&#64;(Int</span> <span class="pre">-&gt;</span> <span class="pre">[Int])</span></code> in the where
clause of the valid hole fit message.</p>
</dd></dl>

<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-fshow-provenance-of-hole-fits">
<span class="sig-name descname"><span class="pre">-fshow-provenance-of-hole-fits</span></span><a class="headerlink" href="#ghc-flag-fshow-provenance-of-hole-fits" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Default<span class="colon">:</span></dt>
<dd class="field-odd"><p>on</p>
</dd>
</dl>
<p>By default, each hole fit shows the provenance information of its
hole fit, i.e. where it was bound or defined, and what module
it was originally defined in if it was imported. This can be toggled
off using the reverse of this flag.</p>
</dd></dl>

<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-funclutter-valid-hole-fits">
<span class="sig-name descname"><span class="pre">-funclutter-valid-hole-fits</span></span><a class="headerlink" href="#ghc-flag-funclutter-valid-hole-fits" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Default<span class="colon">:</span></dt>
<dd class="field-odd"><p>off</p>
</dd>
</dl>
<p>This flag can be toggled to decrease the verbosity of the valid hole fit
suggestions by not showing the provenance nor type application of the
suggestions.</p>
</dd></dl>

<section id="refinement-hole-fits">
<span id="typed-holes-refinement-hole-fits"></span><h3><span class="section-number">6.2.18.1.1. </span>Refinement Hole Fits<a class="headerlink" href="#refinement-hole-fits" title="Permalink to this heading">¶</a></h3>
<p>When the flag <a class="reference internal" href="#ghc-flag-frefinement-level-hole-fits-n"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-frefinement-level-hole-fits=⟨n⟩</span></code></a> is set to an
<code class="docutils literal notranslate"><span class="pre">n</span></code> larger than <code class="docutils literal notranslate"><span class="pre">0</span></code>, GHC will offer up a list of valid refinement
hole fits, which are valid hole fits that need up to <code class="docutils literal notranslate"><span class="pre">n</span></code> levels of
additional refinement to be complete, where each level represents an additional
hole in the hole fit that requires filling in.  As an example, consider the
hole in</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">f</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="p">[</span><span class="kt">Integer</span><span class="p">]</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span><span class="w"></span>
<span class="nf">f</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">_</span><span class="w"></span>
</pre></div>
</div>
<p>When the refinement level is not set, it will only offer valid hole fits
suggestions:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kt">Valid</span><span class="w"> </span><span class="n">hole</span><span class="w"> </span><span class="n">fits</span><span class="w"> </span><span class="n">include</span><span class="w"></span>
<span class="w">  </span><span class="n">f</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="p">[</span><span class="kt">Integer</span><span class="p">]</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span><span class="w"></span>
<span class="w">  </span><span class="n">head</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="w">    </span><span class="n">with</span><span class="w"> </span><span class="n">head</span><span class="w"> </span><span class="o">@</span><span class="kt">Integer</span><span class="w"></span>
<span class="w">  </span><span class="n">last</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="w">    </span><span class="n">with</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="o">@</span><span class="kt">Integer</span><span class="w"></span>
<span class="w">  </span><span class="n">maximum</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">.</span><span class="w"></span>
<span class="w">              </span><span class="kt">Foldable</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"></span>
<span class="w">              </span><span class="n">forall</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="w"> </span><span class="kt">Ord</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="w">    </span><span class="n">with</span><span class="w"> </span><span class="n">maximum</span><span class="w"> </span><span class="o">@</span><span class="kt">[]</span><span class="w"> </span><span class="o">@</span><span class="kt">Integer</span><span class="w"></span>
<span class="w">  </span><span class="n">minimum</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">.</span><span class="w"></span>
<span class="w">              </span><span class="kt">Foldable</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"></span>
<span class="w">              </span><span class="n">forall</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="w"> </span><span class="kt">Ord</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="w">    </span><span class="n">with</span><span class="w"> </span><span class="n">minimum</span><span class="w"> </span><span class="o">@</span><span class="kt">[]</span><span class="w"> </span><span class="o">@</span><span class="kt">Integer</span><span class="w"></span>
<span class="w">  </span><span class="n">product</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">.</span><span class="w"></span>
<span class="w">              </span><span class="kt">Foldable</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"></span>
<span class="w">              </span><span class="n">forall</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="w"> </span><span class="kt">Num</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="w">    </span><span class="n">with</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="o">@</span><span class="kt">[]</span><span class="w"> </span><span class="o">@</span><span class="kt">Integer</span><span class="w"></span>
<span class="w">  </span><span class="n">sum</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">.</span><span class="w"></span>
<span class="w">          </span><span class="kt">Foldable</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"></span>
<span class="w">          </span><span class="n">forall</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="w"> </span><span class="kt">Num</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="w">    </span><span class="n">with</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">@</span><span class="kt">[]</span><span class="w"> </span><span class="o">@</span><span class="kt">Integer</span><span class="w"></span>
</pre></div>
</div>
<p>However, with <a class="reference internal" href="#ghc-flag-frefinement-level-hole-fits-n"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-frefinement-level-hole-fits=⟨n⟩</span></code></a> set to e.g. <cite>1</cite>,
it will additionally offer up a list of refinement hole fits, in this case:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kt">Valid</span><span class="w"> </span><span class="n">refinement</span><span class="w"> </span><span class="n">hole</span><span class="w"> </span><span class="n">fits</span><span class="w"> </span><span class="n">include</span><span class="w"></span>
<span class="w">  </span><span class="n">foldl1</span><span class="w"> </span><span class="p">(</span><span class="kr">_</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">with</span><span class="w"> </span><span class="n">foldl1</span><span class="w"> </span><span class="o">@</span><span class="kt">[]</span><span class="w"> </span><span class="o">@</span><span class="kt">Integer</span><span class="w"></span>
<span class="w">    </span><span class="kr">where</span><span class="w"> </span><span class="n">foldl1</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">.</span><span class="w"></span>
<span class="w">                    </span><span class="kt">Foldable</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"></span>
<span class="w">                    </span><span class="n">forall</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="w">  </span><span class="n">foldr1</span><span class="w"> </span><span class="p">(</span><span class="kr">_</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">with</span><span class="w"> </span><span class="n">foldr1</span><span class="w"> </span><span class="o">@</span><span class="kt">[]</span><span class="w"> </span><span class="o">@</span><span class="kt">Integer</span><span class="w"></span>
<span class="w">    </span><span class="kr">where</span><span class="w"> </span><span class="n">foldr1</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">.</span><span class="w"></span>
<span class="w">                    </span><span class="kt">Foldable</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"></span>
<span class="w">                    </span><span class="n">forall</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="w">  </span><span class="n">const</span><span class="w"> </span><span class="p">(</span><span class="kr">_</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">with</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="o">@</span><span class="kt">Integer</span><span class="w"> </span><span class="o">@</span><span class="p">[</span><span class="kt">Integer</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="kr">where</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="o">.</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="o">$</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="kr">_</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="p">[</span><span class="kt">Integer</span><span class="p">]</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">with</span><span class="w"> </span><span class="p">(</span><span class="o">$</span><span class="p">)</span><span class="w"> </span><span class="o">@</span><span class="kt">GHC</span><span class="o">.</span><span class="kt">Types</span><span class="o">.</span><span class="kt">LiftedRep</span><span class="w"> </span><span class="o">@</span><span class="p">[</span><span class="kt">Integer</span><span class="p">]</span><span class="w"> </span><span class="o">@</span><span class="kt">Integer</span><span class="w"></span>
<span class="w">    </span><span class="kr">where</span><span class="w"> </span><span class="p">(</span><span class="o">$</span><span class="p">)</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="o">.</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">b</span><span class="w"></span>
<span class="w">  </span><span class="n">fail</span><span class="w"> </span><span class="p">(</span><span class="kr">_</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">with</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="o">@</span><span class="p">((</span><span class="ow">-&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="kt">Integer</span><span class="p">])</span><span class="w"> </span><span class="o">@</span><span class="kt">Integer</span><span class="w"></span>
<span class="w">    </span><span class="kr">where</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="p">(</span><span class="n">m</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">.</span><span class="w"></span>
<span class="w">                  </span><span class="kt">Monad</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"></span>
<span class="w">                  </span><span class="n">forall</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="w">  </span><span class="n">return</span><span class="w"> </span><span class="p">(</span><span class="kr">_</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">with</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="o">@</span><span class="p">((</span><span class="ow">-&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="kt">Integer</span><span class="p">])</span><span class="w"> </span><span class="o">@</span><span class="kt">Integer</span><span class="w"></span>
<span class="w">    </span><span class="kr">where</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="p">(</span><span class="n">m</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">.</span><span class="w"> </span><span class="kt">Monad</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="kt">Some</span><span class="w"> </span><span class="n">refinement</span><span class="w"> </span><span class="n">hole</span><span class="w"> </span><span class="n">fits</span><span class="w"> </span><span class="n">suppressed</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">use</span><span class="w"> </span><span class="o">-</span><span class="n">fmax</span><span class="o">-</span><span class="n">refinement</span><span class="o">-</span><span class="n">hole</span><span class="o">-</span><span class="n">fits</span><span class="ow">=</span><span class="kt">N</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="o">-</span><span class="n">fno</span><span class="o">-</span><span class="n">max</span><span class="o">-</span><span class="n">refinement</span><span class="o">-</span><span class="n">hole</span><span class="o">-</span><span class="n">fits</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Which shows that the hole could be replaced with e.g. <code class="docutils literal notranslate"><span class="pre">foldl1</span> <span class="pre">_</span></code>. While not
fixing the hole, this can help users understand what options they have.</p>
<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-frefinement-level-hole-fits-n">
<span class="sig-name descname"><span class="pre">-frefinement-level-hole-fits</span></span><span class="sig-prename descclassname"><span class="pre">=⟨n⟩</span></span><a class="headerlink" href="#ghc-flag-frefinement-level-hole-fits-n" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Default<span class="colon">:</span></dt>
<dd class="field-odd"><p>off</p>
</dd>
</dl>
<p>The list of valid refinement hole fits is generated by considering
hole fits with a varying amount of additional holes. The amount of
holes in a refinement can be set by this flag. If the flag is set to 0
or not set at all, no valid refinement hole fits will be suggested.</p>
</dd></dl>

<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-fabstract-refinement-hole-fits">
<span class="sig-name descname"><span class="pre">-fabstract-refinement-hole-fits</span></span><a class="headerlink" href="#ghc-flag-fabstract-refinement-hole-fits" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Default<span class="colon">:</span></dt>
<dd class="field-odd"><p>off</p>
</dd>
</dl>
<p>Valid list of valid refinement hole fits can often grow large when
the refinement level is <code class="docutils literal notranslate"><span class="pre">&gt;=</span> <span class="pre">2</span></code>, with holes like <code class="docutils literal notranslate"><span class="pre">head</span> <span class="pre">_</span> <span class="pre">_</span></code> or
<code class="docutils literal notranslate"><span class="pre">fst</span> <span class="pre">_</span> <span class="pre">_</span></code>, which are valid refinements, but which are unlikely to be
relevant since one or more of the holes are still completely open, in that
neither the type nor kind of those holes are constrained by the proposed
identifier at all. By default, such holes are not reported. By turning this
flag on, such holes are included in the list of valid refinement hole fits.</p>
</dd></dl>

<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-fmax-refinement-hole-fits-n">
<span class="sig-name descname"><span class="pre">-fmax-refinement-hole-fits</span></span><span class="sig-prename descclassname"><span class="pre">=⟨n⟩</span></span><a class="headerlink" href="#ghc-flag-fmax-refinement-hole-fits-n" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Default<span class="colon">:</span></dt>
<dd class="field-odd"><p>6</p>
</dd>
</dl>
<p>The list of valid refinement hole fits is limited by displaying up to 6
hole fits per hole. The number of hole fits shown can be set by this
flag. Turning the limit off with <a class="reference internal" href="#ghc-flag--fmax-refinement-hole-fits=⟨n⟩"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-fno-max-refinement-hole-fits</span></code></a>
displays all found hole fits.</p>
</dd></dl>

<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-fshow-hole-matches-of-hole-fits">
<span class="sig-name descname"><span class="pre">-fshow-hole-matches-of-hole-fits</span></span><a class="headerlink" href="#ghc-flag-fshow-hole-matches-of-hole-fits" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Default<span class="colon">:</span></dt>
<dd class="field-odd"><p>on</p>
</dd>
</dl>
<p>The types of the additional holes in refinement hole fits are displayed
in the output, e.g. <code class="docutils literal notranslate"><span class="pre">foldl1</span> <span class="pre">(_</span> <span class="pre">::</span> <span class="pre">a</span> <span class="pre">-&gt;</span> <span class="pre">a</span> <span class="pre">-&gt;</span> <span class="pre">a)</span></code> is a refinement
for the hole <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">::</span> <span class="pre">[a]</span> <span class="pre">-&gt;</span> <span class="pre">a</span></code>. If this flag is toggled off, the output
will display only <code class="docutils literal notranslate"><span class="pre">foldl1</span> <span class="pre">_</span></code>, which can be used as a direct replacement
for the hole, without requiring <code class="docutils literal notranslate"><span class="pre">-XScopedTypeVariables</span></code>.</p>
</dd></dl>

</section>
<section id="sorting-valid-hole-fits">
<h3><span class="section-number">6.2.18.1.2. </span>Sorting Valid Hole Fits<a class="headerlink" href="#sorting-valid-hole-fits" title="Permalink to this heading">¶</a></h3>
<p>There are currently two ways to sort valid hole fits.
Sorting can be toggled with <a class="reference internal" href="#ghc-flag--fno-sort-valid-hole-fits"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-fsort-valid-hole-fits</span></code></a></p>
<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-fno-sort-valid-hole-fits">
<span class="sig-name descname"><span class="pre">-fno-sort-valid-hole-fits</span></span><a class="headerlink" href="#ghc-flag-fno-sort-valid-hole-fits" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Default<span class="colon">:</span></dt>
<dd class="field-odd"><p>off</p>
</dd>
</dl>
<p>By default the valid hole fits are sorted to show the most relevant
hole fits at the top of the list of valid hole fits. This can be
toggled off with this flag.</p>
</dd></dl>

<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-fsort-by-size-hole-fits">
<span class="sig-name descname"><span class="pre">-fsort-by-size-hole-fits</span></span><a class="headerlink" href="#ghc-flag-fsort-by-size-hole-fits" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Default<span class="colon">:</span></dt>
<dd class="field-odd"><p>on</p>
</dd>
</dl>
<p>Sorts by how big the types the quantified type variables in the type of the
function would have to be in order to match the type of the hole.</p>
</dd></dl>

<dl class="std ghc-flag">
<dt class="sig sig-object std" id="ghc-flag-fsort-by-subsumption-hole-fits">
<span class="sig-name descname"><span class="pre">-fsort-by-subsumption-hole-fits</span></span><a class="headerlink" href="#ghc-flag-fsort-by-subsumption-hole-fits" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Default<span class="colon">:</span></dt>
<dd class="field-odd"><p>off</p>
</dd>
</dl>
<p>An alternative sort. Sorts by checking which hole fits subsume other
hole fits, such that if hole fit a could be used as hole fits for
hole fit b, then b appears before a in the output. It is more precise than
the default sort, but also a lot slower, since a subsumption check has to be
run for each pair of valid hole fits.</p>
</dd></dl>

</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="arrows.html" class="btn btn-neutral float-right" title="6.2.19. Arrow notation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="block_arguments.html" class="btn btn-neutral float-left" title="6.2.17. More liberal syntax for function arguments" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, GHC Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- editorconfig-checker-disable-file</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- | This module assigns types to built-ins.</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- See the @plutus/plutus-core/docs/Constant application.md@</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- article for how this emerged.</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE DataKinds        #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE GADTs            #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies     #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators    #-}</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE StrictData       #-}</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">PlutusCore.Builtin.TypeScheme</span><span>
</span><span id="line-15"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier">Typeable</span></a></span><span>
</span><span id="line-16"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeScheme"><span class="hs-identifier">TypeScheme</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#argProxy"><span class="hs-identifier">argProxy</span></a></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#typeSchemeToType"><span class="hs-identifier">typeSchemeToType</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownKind.html"><span class="hs-identifier">PlutusCore.Builtin.KnownKind</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html"><span class="hs-identifier">PlutusCore.Builtin.KnownType</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownTypeAst.html"><span class="hs-identifier">PlutusCore.Builtin.KnownTypeAst</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Core.html"><span class="hs-identifier">PlutusCore.Core</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Name.html"><span class="hs-identifier">PlutusCore.Name</span></a></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier">Data.Kind</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">GHC</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier">Data.Proxy</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier">GHC.TypeLits</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier">Type.Reflection</span></a></span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">9</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeSchemeArrow"><span class="hs-operator hs-type">`TypeSchemeArrow`</span></a></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-comment">{- Note [MakeKnown in TypeSchemeArrow]
There's a @MakeKnown val arg@ constrained packed in the 'TypeSchemeArrow' constructor. It's not
supposed to be there, but unfortunately, in the @Generators@ tests we use 'TypeScheme' for
generation of arbitrary arguments of builtins and that requires 'makeKnown', which makes us have
the 'MakeKnown' in 'TypeSchemeArrow'.

The solution is to fix the @Generators@ tests. Explicitly constraining @args@ outside of
'TypeScheme' sounds like a promising strategy. Maybe we could just delete those tests altogether.

However it's also worth considering untangling 'RuntimeScheme' from 'TypeScheme' and generating the
two in parallel, so that we only need to optimize the former. Then we will be able to afford having
any kind of nonsense in 'TypeScheme'. Another reason for that would be the fact that Core output
has 'typeSchemeToRuntimeScheme' all over the place as it can't be inlined due to being a recursive
function, which we can't turn into an inlinable class method, because the indices of 'TypeScheme'
don't reflect its structure due to the 'TypeSchemeAll' constructor not being reflected at the type
level in any way. It's unlikely that having those 'typeSchemeToRuntimeScheme' has any impact on
performance, because they're only evaluated once during initialization, but it certainly has impact
on readability of the Core output.
-}</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-comment">-- We have these 'Typeable' constraints here just for the generators tests. It's fine since</span><span>
</span><span id="line-56"></span><span class="hs-comment">-- 'TypeScheme' is not used for evaluation and so we can shove into 'TypeScheme' whatever we want.</span><span>
</span><span id="line-57"></span><span class="hs-comment">-- | Type schemes of primitive operations.</span><span>
</span><span id="line-58"></span><span class="hs-comment">-- @as@ is a list of types of arguments, @r@ is the resulting type.</span><span>
</span><span id="line-59"></span><span class="hs-comment">-- E.g. @Text -&gt; Bool -&gt; Integer@ is encoded as @TypeScheme val [Text, Bool] Integer@.</span><span>
</span><span id="line-60"></span><span class="hs-keyword">data</span><span> </span><span id="TypeScheme"><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeScheme"><span class="hs-identifier hs-var">TypeScheme</span></a></span></span><span> </span><span id="local-6989586621681081151"><span class="annot"><a href="#local-6989586621681081151"><span class="hs-identifier hs-type">val</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681081150"><span class="annot"><a href="#local-6989586621681081150"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">GHC.Type</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681081149"><span class="annot"><a href="#local-6989586621681081149"><span class="hs-identifier hs-type">res</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-61"></span><span>    </span><span id="local-6989586621681081147"><span id="local-6989586621681081148"><span id="TypeSchemeResult"><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeSchemeResult"><span class="hs-identifier hs-var">TypeSchemeResult</span></a></span></span><span>
</span><span id="line-62"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081148"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownTypeAst.html#KnownTypeAst"><span class="hs-identifier hs-type">KnownTypeAst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081147"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681081148"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnown"><span class="hs-identifier hs-type">MakeKnown</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081147"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081148"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeScheme"><span class="hs-identifier hs-type">TypeScheme</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081147"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621681081148"><span class="hs-identifier hs-type">res</span></a></span></span></span><span>
</span><span id="line-64"></span><span>    </span><span id="local-6989586621681081142"><span id="local-6989586621681081143"><span id="local-6989586621681081144"><span id="local-6989586621681081145"><span id="TypeSchemeArrow"><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeSchemeArrow"><span class="hs-identifier hs-var">TypeSchemeArrow</span></a></span></span><span>
</span><span id="line-65"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081145"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownTypeAst.html#KnownTypeAst"><span class="hs-identifier hs-type">KnownTypeAst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081144"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681081145"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnown"><span class="hs-identifier hs-type">MakeKnown</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081144"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081145"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnown"><span class="hs-identifier hs-type">ReadKnown</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081144"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081145"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeScheme"><span class="hs-identifier hs-type">TypeScheme</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081144"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081143"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081142"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeScheme"><span class="hs-identifier hs-type">TypeScheme</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081144"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681081145"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621681081143"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681081142"><span class="hs-identifier hs-type">res</span></a></span></span></span></span></span><span>
</span><span id="line-67"></span><span>    </span><span id="local-6989586621681081136"><span id="local-6989586621681081137"><span id="local-6989586621681081138"><span id="local-6989586621681081139"><span id="local-6989586621681081140"><span id="local-6989586621681081141"><span id="TypeSchemeAll"><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeSchemeAll"><span class="hs-identifier hs-var">TypeSchemeAll</span></a></span></span><span>
</span><span id="line-68"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">KnownSymbol</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081141"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">KnownNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081140"><span class="hs-identifier hs-type">uniq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownKind.html#KnownKind"><span class="hs-identifier hs-type">KnownKind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081139"><span class="hs-identifier hs-type">kind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span>           </span><span class="hs-comment">-- Here we require the user to manually provide the unique of a type variable.</span><span>
</span><span id="line-70"></span><span>           </span><span class="hs-comment">-- That's nothing but silly, but I do not see what else we can do with the current design.</span><span>
</span><span id="line-71"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681081141"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681081140"><span class="hs-identifier hs-type">uniq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681081139"><span class="hs-identifier hs-type">kind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeScheme"><span class="hs-identifier hs-type">TypeScheme</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081138"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081137"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081136"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-73"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeScheme"><span class="hs-identifier hs-type">TypeScheme</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081138"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081137"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081136"><span class="hs-identifier hs-type">res</span></a></span></span></span></span></span></span></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span id="local-6989586621681081205"><span id="local-6989586621681081206"><span id="local-6989586621681081207"><span id="local-6989586621681081208"><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#argProxy"><span class="hs-identifier hs-type">argProxy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeScheme"><span class="hs-identifier hs-type">TypeScheme</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081208"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681081207"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621681081206"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681081205"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081207"><span class="hs-identifier hs-type">arg</span></a></span></span></span></span></span><span>
</span><span id="line-76"></span><span id="argProxy"><span class="annot"><span class="annottext">argProxy :: forall val arg (args :: [*]) res.
TypeScheme val (arg : args) res -&gt; Proxy arg
</span><a href="PlutusCore.Builtin.TypeScheme.html#argProxy"><span class="hs-identifier hs-var hs-var">argProxy</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeScheme val (arg : args) res
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-comment">-- | Convert a 'TypeScheme' to the corresponding 'Type'.</span><span>
</span><span id="line-79"></span><span class="hs-comment">-- Basically, a map from the PHOAS representation to the FOAS one.</span><span>
</span><span id="line-80"></span><span id="local-6989586621681081194"><span id="local-6989586621681081195"><span id="local-6989586621681081196"><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#typeSchemeToType"><span class="hs-identifier hs-type">typeSchemeToType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeScheme"><span class="hs-identifier hs-type">TypeScheme</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081196"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081195"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081194"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681081196"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-81"></span><span id="typeSchemeToType"><span class="annot"><span class="annottext">typeSchemeToType :: forall val (args :: [*]) res.
TypeScheme val args res -&gt; Type TyName (UniOf val) ()
</span><a href="PlutusCore.Builtin.TypeScheme.html#typeSchemeToType"><span class="hs-identifier hs-var hs-var">typeSchemeToType</span></a></span></span><span> </span><span id="local-6989586621681081133"><span class="annot"><span class="annottext">sch :: TypeScheme val args res
</span><a href="#local-6989586621681081133"><span class="hs-identifier hs-var">sch</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="annottext">TypeScheme val args res
</span><a href="PlutusCore.Builtin.TypeScheme.html#TypeSchemeResult"><span class="hs-identifier hs-var">TypeSchemeResult</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a (uni :: * -&gt; *) (x :: a) (proxy :: a -&gt; *).
KnownTypeAst uni x =&gt;
proxy x -&gt; Type TyName uni ()
</span><a href="PlutusCore.Builtin.KnownTypeAst.html#toTypeAst"><span class="hs-identifier hs-var">toTypeAst</span></a></span><span> </span><span class="annot"><span class="annottext">TypeScheme val args res
</span><a href="#local-6989586621681081133"><span class="hs-identifier hs-var">sch</span></a></span><span>
</span><span id="line-82"></span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#typeSchemeToType"><span class="hs-identifier hs-var">typeSchemeToType</span></a></span><span> </span><span id="local-6989586621681081126"><span class="annot"><span class="annottext">sch :: TypeScheme val args res
</span><a href="#local-6989586621681081126"><span class="hs-identifier hs-var">sch</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeSchemeArrow"><span class="hs-identifier hs-type">TypeSchemeArrow</span></a></span><span> </span><span id="local-6989586621681081119"><span class="annot"><span class="annottext">TypeScheme val args res
</span><a href="#local-6989586621681081119"><span class="hs-identifier hs-var">schB</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-83"></span><span>    </span><span class="annot"><span class="annottext">forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyFun"><span class="hs-identifier hs-var">TyFun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a (uni :: * -&gt; *) (x :: a) (proxy :: a -&gt; *).
KnownTypeAst uni x =&gt;
proxy x -&gt; Type TyName uni ()
</span><a href="PlutusCore.Builtin.KnownTypeAst.html#toTypeAst"><span class="hs-identifier hs-var">toTypeAst</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall val arg (args :: [*]) res.
TypeScheme val (arg : args) res -&gt; Proxy arg
</span><a href="PlutusCore.Builtin.TypeScheme.html#argProxy"><span class="hs-identifier hs-var">argProxy</span></a></span><span> </span><span class="annot"><span class="annottext">TypeScheme val args res
</span><a href="#local-6989586621681081126"><span class="hs-identifier hs-var">sch</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall val (args :: [*]) res.
TypeScheme val args res -&gt; Type TyName (UniOf val) ()
</span><a href="PlutusCore.Builtin.TypeScheme.html#typeSchemeToType"><span class="hs-identifier hs-var">typeSchemeToType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeScheme val args res
</span><a href="#local-6989586621681081119"><span class="hs-identifier hs-var">schB</span></a></span><span>
</span><span id="line-84"></span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#typeSchemeToType"><span class="hs-identifier hs-var">typeSchemeToType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeSchemeAll"><span class="hs-identifier hs-type">TypeSchemeAll</span></a></span><span> </span><span id="local-6989586621681081107"><span class="annot"><span class="annottext">Proxy '(text, uniq, kind)
</span><a href="#local-6989586621681081107"><span class="hs-identifier hs-var">proxy</span></a></span></span><span> </span><span id="local-6989586621681081106"><span class="annot"><span class="annottext">TypeScheme val args res
</span><a href="#local-6989586621681081106"><span class="hs-identifier hs-var">schK</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy '(text, uniq, kind)
</span><a href="#local-6989586621681081107"><span class="hs-identifier hs-var">proxy</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681081103"><span id="local-6989586621681081104"><span id="local-6989586621681081105"><span class="annot"><span class="annottext">Proxy '(text, uniq, kind)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681081105"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681081104"><span class="hs-identifier hs-type">uniq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681081103"><span class="hs-identifier hs-type">kind</span></a></span><span class="hs-special">)</span></span></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-86"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681081102"><span class="annot"><span class="annottext">text :: Text
</span><a href="#local-6989586621681081102"><span class="hs-identifier hs-var hs-var">text</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (n :: Symbol) (proxy :: Symbol -&gt; *).
KnownSymbol n =&gt;
proxy n -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">symbolVal</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621681081105"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span>
</span><span id="line-87"></span><span>            </span><span id="local-6989586621681081099"><span class="annot"><span class="annottext">uniq :: Int
</span><a href="#local-6989586621681081099"><span class="hs-identifier hs-var hs-var">uniq</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (n :: Nat) (proxy :: Nat -&gt; *).
KnownNat n =&gt;
proxy n -&gt; Integer
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">natVal</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621681081104"><span class="hs-identifier hs-type">uniq</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span>
</span><span id="line-88"></span><span>            </span><span id="local-6989586621681081097"><span class="annot"><span class="annottext">a :: TyName
</span><a href="#local-6989586621681081097"><span class="hs-identifier hs-var hs-var">a</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; TyName
</span><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-var">TyName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Unique -&gt; Name
</span><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-var">Name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681081102"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Unique
</span><a href="PlutusCore.Name.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681081099"><span class="hs-identifier hs-var">uniq</span></a></span><span>
</span><span id="line-89"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyForall"><span class="hs-identifier hs-var">TyForall</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621681081097"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k. SingKind k -&gt; Kind ()
</span><a href="PlutusCore.Builtin.KnownKind.html#demoteKind"><span class="hs-identifier hs-var">demoteKind</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall k. KnownKind k =&gt; SingKind k
</span><a href="PlutusCore.Builtin.KnownKind.html#knownKind"><span class="hs-identifier hs-var">knownKind</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621681081103"><span class="hs-identifier hs-type">kind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall val (args :: [*]) res.
TypeScheme val args res -&gt; Type TyName (UniOf val) ()
</span><a href="PlutusCore.Builtin.TypeScheme.html#typeSchemeToType"><span class="hs-identifier hs-var">typeSchemeToType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeScheme val args res
</span><a href="#local-6989586621681081106"><span class="hs-identifier hs-var">schK</span></a></span><span>
</span><span id="line-90"></span></pre></body></html>
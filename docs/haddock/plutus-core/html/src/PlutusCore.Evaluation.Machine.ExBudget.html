<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- editorconfig-checker-disable-file</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds             #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass        #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances     #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings     #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE StrictData            #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances  #-}</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-comment">{- Note [Strict Data for budgeting]

Without the StrictData pragma here, we get a memory leak during evaluation
because large unevaluated arthimetic expressions build up.  Strictness is only
really required for ExBudget, but it's simpler if we jut make
everything strict, and it doesn't seem to do any harm.
-}</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-comment">-- TODO: revise this.</span><span>
</span><span id="line-19"></span><span class="hs-comment">{- Note [Budgeting]

When running Plutus code on the chain, you're running code on other peoples
machines, so you'll have to pay for it. And it has to be possible to determine
how much money that should be before sending the transaction with the Plutus
code to the chain. If you spend too little, your transaction will be rejected.
If you spend too much, you're wasting money. So it must be possible to estimate
how much a script will cost. The easiest way to do so is to run the script
locally and determine the cost. The functional nature of Plutus allows for the
assumption it will cost a similar amount locally as on the chain. See
'CekBudgetMode'.

Additionally, it's helpful to know which parts of the script cost how much. We
assume it's useful to have a list of costs per term executed, so it's possible
to estimate which parts of the script cost how much. The 'ExTally' has not been
determined to be useful, but it was easy to implement.

We're tracking execution cost via both memory (via 'ExMemory') and CPU (via
'ExCPU'). Node operators are more interested in space limits than time limits -
the memory upper limit will be reached faster than the time limit (which would
be until next block). The two resources are then converted to the main currency
of the chain based on protocol parameters - that way it's possible to adjust the
actual fees without changing the code.

When tracking memory, we ignore garbage collection - only total memory
allocation is counted. This decision decouples us from the implementation of the
GC itself. Additionally, sharing of references is assumed. If a builtin
generates a new value, every reference of that value (e.g. in different CEK
environments) is assumed to point to the same value, without any copies. So the
total memory of the program is bounded to the original program + anything the
builtins produce + the machine space used by the CEK machine itself. The CEK
environment costs are included in the stack frame costs of the CEK machine,
they're linear.

The tracking of the costs themselves does not cost any CPU or memory. Currently
that's an implementation detail. We may have to readjust this depending on real
world experience.

The CEK machine does budgeting in these steps:
- The memory cost of the initial AST is added to the budget. See Note [Memory
  Usage for Plutus]. This operation currently does not cost any CPU. It
  currently costs as much memory as the AST itself, before aborting. See
  https://github.com/input-output-hk/plutus/issues/1799 for more discussion.
- Then each machine reduction step requires a certain amount of memory and CPU.
- The builtin operations may require different amounts of memory and CPU,
  depending on the input size.
- If a computation runs out of Memory or CPU, it is aborted, via the same
  mechanism when 'error' is called.

Tracking CEK machine layers is rather straightforward, albeit these numbers
still have to be filled in. For builtins (e.g. +, etc.) the cost tracking can be
a bit more complicated, as the required resources may depend on the size of the
inputs (E.g. multiplying numbers, where the output will be around 6 words if
both inputs are at 3 words each). These cost estimations will also have factors
attached which can be configured at runtime via protocol parameters - so it's
possible to adjust them at runtime.

-}</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-comment">{-| Note [Budgeting units]

 We use picoseconds for measuring times and words for measuring memory usage.
 Some care is required with time units because different units are used in
 different places.

 * The basic data for models of execution time is produced by Criterion
   benchmarks (run via plutus-core:cost-model-budgeting-bench) and saved in
   a CSV file (usually 'benching.csv').  At this point the time units are seconds.

 * The data in the CSV file is used by plutus-core:generate-cost-model to create
   cost-prediction models for the built-in functions, and data describing these
   is written to a JSON file (usually 'builtinCostModel.json'.  This process
   involves several steps:

     * The CreateBuiltinCostModel module reads in the data from the CSV file
       and runs R code in 'models.R' to fit linear models to the benchmark
       results for each builtin.  This process (and its results) necessarily
       involves the use of floating-point numbers.

       Builtin execution times are typically of the order of 10^(-6) or 10^(-7)
       seconds, and the benching data is converted to microseconds in 'models.R'
       because it's sometimes useful to work with the data interactively and this
       makes the numbers a lot more human-readable.

     * The coefficents from the R models are returned to the Haskell code in
       CreateBuiltinCostModel and written out to a JSON file.  To avoid the
       use of floats in JSON and in cost prediction at runtime (which might be
       machine-dependent if floats were used), numbers are multiplied by 10^6
       and rounded to the nearest integer, shfting from the microsecond scale to
       the picosecond scale.  This rescaling is safe because all of our models
       are (currently) linear in their inputs.

 * When the Plutus Core evaluator is compiled, the JSON data in
   'builtinCostModel.json' is read in and used to create the defaultCostModel
   object.  This also includes information about the costs of basic CEK machine
   operations obtained from 'cekMachineCosts.json' (currently generated manually).

 * When the Plutus Core evaluator is run, the code in
   PlutusCore.Evaluation.Machine.BuiltinCostModel uses the data in
   defaultCostModel to create Haskell versions of the cost models which estimate
   the execution time of a built-in function given the sizes of its inputs.
   This (and the memory usage) are fed into a budgeting process which measures
   the ongoing resource consumption during script execution.

   All budget calculations are (at least on 64-bit machines) done using the
   'SatInt' type which deals with overflow by truncating excessivly large values
   to the maximum 'SatInt' value, 2^63-1.  In picoseconds this is about 106
   days, which should suffice for any code we expect to run.  Memory budgeting
   is entirely in terms of machine words, and floating-point issues are
   irrelevant.

 Some precision is lost during the conversion from R's floating-point models to
 the integral numbers used in the Haskell models.  However, experimentation
 shows that the difference is very small.  The tests in plutus-core:
 cost-model-test run the R models and the Haskell models with a large number of
 random inputs and check that they agree to within one part in 10,000, which
 is well within the accuracy we require for the cost model.
-}</span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">PlutusCore.Evaluation.Machine.ExBudget</span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier">ExBudget</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#minusExBudget"><span class="hs-identifier">minusExBudget</span></a></span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudgetBuiltin"><span class="hs-identifier">ExBudgetBuiltin</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExRestrictingBudget"><span class="hs-identifier">ExRestrictingBudget</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#LowerIntialCharacter"><span class="hs-identifier">LowerIntialCharacter</span></a></span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#enormousBudget"><span class="hs-identifier">enormousBudget</span></a></span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span class="hs-keyword">where</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExMemory.html"><span class="hs-identifier">PlutusCore.Evaluation.Machine.ExMemory</span></a></span><span>
</span><span id="line-149"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusPrelude.html"><span class="hs-identifier">PlutusPrelude</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier">toList</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../serialise/html/src"><span class="hs-identifier">Codec.Serialise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../serialise/html/src"><span class="hs-identifier">Serialise</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier">Data.Char</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier">toLower</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier">Data.Semigroup</span></a></span><span>
</span><span id="line-154"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../deriving-aeson/html/src"><span class="hs-identifier">Deriving.Aeson</span></a></span><span>
</span><span id="line-155"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../th-lift/html/src"><span class="hs-identifier">Language.Haskell.TH.Lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/template-haskell-2.18.0.0/src"><span class="hs-identifier">Lift</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../nothunks/html/src"><span class="hs-identifier">NoThunks.Class</span></a></span><span>
</span><span id="line-157"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../prettyprinter/html/src"><span class="hs-identifier">Prettyprinter</span></a></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="hs-comment">-- | This is used elsewhere to convert cost models into JSON objects where the</span><span>
</span><span id="line-161"></span><span class="hs-comment">-- names of the fields are exactly the same as the names of the builtins.</span><span>
</span><span id="line-162"></span><span class="hs-keyword">data</span><span> </span><span id="LowerIntialCharacter"><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#LowerIntialCharacter"><span class="hs-identifier hs-var">LowerIntialCharacter</span></a></span></span><span>
</span><span id="line-163"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../deriving-aeson/html/src"><span class="hs-identifier hs-type">StringModifier</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#LowerIntialCharacter"><span class="hs-identifier hs-type">LowerIntialCharacter</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-164"></span><span>  </span><span id="local-6989586621681034581"><span class="annot"><span class="annottext">getStringModifier :: String -&gt; String
</span><a href="../../../../deriving-aeson/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">getStringModifier</span></a></span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-165"></span><span>  </span><span class="annot"><a href="../../../../deriving-aeson/html/src"><span class="hs-identifier hs-var">getStringModifier</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681034579"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681034579"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621681034578"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681034578"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">toLower</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681034579"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681034578"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span class="hs-comment">-- | A class for injecting a 'Builtin' into an @exBudgetCat@.</span><span>
</span><span id="line-168"></span><span class="hs-comment">-- We need it, because the constant application machinery calls 'spendBudget' before reducing a</span><span>
</span><span id="line-169"></span><span class="hs-comment">-- constant application and we want to be general over @exBudgetCat@ there, but still track the</span><span>
</span><span id="line-170"></span><span class="hs-comment">-- built-in functions category, hence the ad hoc polymorphism.</span><span>
</span><span id="line-171"></span><span class="hs-keyword">class</span><span> </span><span id="ExBudgetBuiltin"><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudgetBuiltin"><span class="hs-identifier hs-var">ExBudgetBuiltin</span></a></span></span><span> </span><span id="local-6989586621681035001"><span class="annot"><a href="#local-6989586621681035001"><span class="hs-identifier hs-type">fun</span></a></span></span><span> </span><span id="local-6989586621681035000"><span class="annot"><a href="#local-6989586621681035000"><span class="hs-identifier hs-type">exBudgetCat</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-172"></span><span>    </span><span id="exBudgetBuiltin"><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#exBudgetBuiltin"><span class="hs-identifier hs-type">exBudgetBuiltin</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681035001"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681035000"><span class="hs-identifier hs-type">exBudgetCat</span></a></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="hs-comment">-- | A dummy 'ExBudgetBuiltin' instance to be used in monads where we don't care about costing.</span><span>
</span><span id="line-175"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681034998"><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudgetBuiltin"><span class="hs-identifier hs-type">ExBudgetBuiltin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681034998"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-176"></span><span>    </span><span id="local-6989586621681034573"><span class="annot"><span class="annottext">exBudgetBuiltin :: fun -&gt; ()
</span><a href="#local-6989586621681034573"><span class="hs-identifier hs-var hs-var hs-var hs-var">exBudgetBuiltin</span></a></span></span><span> </span><span class="annot"><span class="annottext">fun
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span id="local-6989586621681034571"><span id="local-6989586621681034572"></span></span><span class="hs-keyword">data</span><span> </span><span id="ExBudget"><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-var">ExBudget</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ExBudget"><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-var">ExBudget</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="exBudgetCPU"><span class="annot"><span class="annottext">ExBudget -&gt; ExCPU
</span><a href="PlutusCore.Evaluation.Machine.ExBudget.html#exBudgetCPU"><span class="hs-identifier hs-var hs-var">exBudgetCPU</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExMemory.html#ExCPU"><span class="hs-identifier hs-type">ExCPU</span></a></span><span class="hs-special">,</span><span> </span><span id="exBudgetMemory"><span class="annot"><span class="annottext">ExBudget -&gt; ExMemory
</span><a href="PlutusCore.Evaluation.Machine.ExBudget.html#exBudgetMemory"><span class="hs-identifier hs-var hs-var">exBudgetMemory</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExMemory.html#ExMemory"><span class="hs-identifier hs-type">ExMemory</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-179"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681034560"><span id="local-6989586621681034566"><span class="annot"><span class="annottext">ExBudget -&gt; ExBudget -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ExBudget -&gt; ExBudget -&gt; Bool
$c/= :: ExBudget -&gt; ExBudget -&gt; Bool
== :: ExBudget -&gt; ExBudget -&gt; Bool
$c== :: ExBudget -&gt; ExBudget -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681034547"><span id="local-6989586621681034549"><span id="local-6989586621681034557"><span class="annot"><span class="annottext">Int -&gt; ExBudget -&gt; String -&gt; String
[ExBudget] -&gt; String -&gt; String
ExBudget -&gt; String
forall a.
(Int -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
showList :: [ExBudget] -&gt; String -&gt; String
$cshowList :: [ExBudget] -&gt; String -&gt; String
show :: ExBudget -&gt; String
$cshow :: ExBudget -&gt; String
showsPrec :: Int -&gt; ExBudget -&gt; String -&gt; String
$cshowsPrec :: Int -&gt; ExBudget -&gt; String -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep ExBudget x -&gt; ExBudget
forall x. ExBudget -&gt; Rep ExBudget x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep ExBudget x -&gt; ExBudget
$cfrom :: forall x. ExBudget -&gt; Rep ExBudget x
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681034531"><span id="local-6989586621681034541"><span class="annot"><span class="annottext">forall t.
(forall (m :: * -&gt; *). Quote m =&gt; t -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; t -&gt; Code m t) -&gt; Lift t
forall (m :: * -&gt; *). Quote m =&gt; ExBudget -&gt; m Exp
forall (m :: * -&gt; *). Quote m =&gt; ExBudget -&gt; Code m ExBudget
liftTyped :: forall (m :: * -&gt; *). Quote m =&gt; ExBudget -&gt; Code m ExBudget
$cliftTyped :: forall (m :: * -&gt; *). Quote m =&gt; ExBudget -&gt; Code m ExBudget
lift :: forall (m :: * -&gt; *). Quote m =&gt; ExBudget -&gt; m Exp
$clift :: forall (m :: * -&gt; *). Quote m =&gt; ExBudget -&gt; m Exp
</span><a href="../../../../ghc/html/libraries/template-haskell-2.18.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Lift</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681034519"><span id="local-6989586621681034521"><span id="local-6989586621681034981"><span class="annot"><a href="../../../../prettyprinter-configurable/html/src"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681034981"><span class="hs-identifier hs-type">config</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681034516"><span class="annot"><span class="annottext">ExBudget -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: ExBudget -&gt; ()
$crnf :: ExBudget -&gt; ()
</span><a href="../../../../ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681034509"><span id="local-6989586621681034511"><span id="local-6989586621681034513"><span class="annot"><span class="annottext">Context -&gt; ExBudget -&gt; IO (Maybe ThunkInfo)
Proxy ExBudget -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy ExBudget -&gt; String
$cshowTypeOf :: Proxy ExBudget -&gt; String
wNoThunks :: Context -&gt; ExBudget -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; ExBudget -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; ExBudget -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; ExBudget -&gt; IO (Maybe ThunkInfo)
</span><a href="../../../../nothunks/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681034500"><span id="local-6989586621681034502"><span id="local-6989586621681034504"><span id="local-6989586621681034506"><span class="annot"><span class="annottext">[ExBudget] -&gt; Encoding
ExBudget -&gt; Encoding
forall s. Decoder s [ExBudget]
forall s. Decoder s ExBudget
forall a.
(a -&gt; Encoding)
-&gt; (forall s. Decoder s a)
-&gt; ([a] -&gt; Encoding)
-&gt; (forall s. Decoder s [a])
-&gt; Serialise a
decodeList :: forall s. Decoder s [ExBudget]
$cdecodeList :: forall s. Decoder s [ExBudget]
encodeList :: [ExBudget] -&gt; Encoding
$cencodeList :: [ExBudget] -&gt; Encoding
decode :: forall s. Decoder s ExBudget
$cdecode :: forall s. Decoder s ExBudget
encode :: ExBudget -&gt; Encoding
$cencode :: ExBudget -&gt; Encoding
</span><a href="../../../../serialise/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Serialise</span></a></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681034489"><span id="local-6989586621681034497"><span class="annot"><span class="annottext">Value -&gt; Parser [ExBudget]
Value -&gt; Parser ExBudget
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [ExBudget]
$cparseJSONList :: Value -&gt; Parser [ExBudget]
parseJSON :: Value -&gt; Parser ExBudget
$cparseJSON :: Value -&gt; Parser ExBudget
</span><a href="../../../../aeson/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681034319"><span id="local-6989586621681034327"><span id="local-6989586621681034335"><span id="local-6989586621681034344"><span class="annot"><span class="annottext">[ExBudget] -&gt; Encoding
[ExBudget] -&gt; Value
ExBudget -&gt; Encoding
ExBudget -&gt; Value
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [ExBudget] -&gt; Encoding
$ctoEncodingList :: [ExBudget] -&gt; Encoding
toJSONList :: [ExBudget] -&gt; Value
$ctoJSONList :: [ExBudget] -&gt; Value
toEncoding :: ExBudget -&gt; Encoding
$ctoEncoding :: ExBudget -&gt; Encoding
toJSON :: ExBudget -&gt; Value
$ctoJSON :: ExBudget -&gt; Value
</span><a href="../../../../aeson/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="../../../../deriving-aeson/html/src"><span class="hs-identifier hs-type">CustomJSON</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="../../../../deriving-aeson/html/src"><span class="hs-identifier hs-type">FieldLabelModifier</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#LowerIntialCharacter"><span class="hs-identifier hs-type">LowerIntialCharacter</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-type">ExBudget</span></a></span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-comment">-- LowerIntialCharacter won't actually do anything here, but let's have it in case we change the field names.</span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-comment">-- | Subract one 'ExBudget' from another. Does not guarantee that the result is positive.</span><span>
</span><span id="line-185"></span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#minusExBudget"><span class="hs-identifier hs-type">minusExBudget</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-type">ExBudget</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-type">ExBudget</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-type">ExBudget</span></a></span><span>
</span><span id="line-186"></span><span id="minusExBudget"><span class="annot"><span class="annottext">minusExBudget :: ExBudget -&gt; ExBudget -&gt; ExBudget
</span><a href="PlutusCore.Evaluation.Machine.ExBudget.html#minusExBudget"><span class="hs-identifier hs-var hs-var">minusExBudget</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-type">ExBudget</span></a></span><span> </span><span id="local-6989586621681033864"><span class="annot"><span class="annottext">ExCPU
</span><a href="#local-6989586621681033864"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681033863"><span class="annot"><span class="annottext">ExMemory
</span><a href="#local-6989586621681033863"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-type">ExBudget</span></a></span><span> </span><span id="local-6989586621681033862"><span class="annot"><span class="annottext">ExCPU
</span><a href="#local-6989586621681033862"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span id="local-6989586621681033861"><span class="annot"><span class="annottext">ExMemory
</span><a href="#local-6989586621681033861"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExCPU -&gt; ExMemory -&gt; ExBudget
</span><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-var">ExBudget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExCPU
</span><a href="#local-6989586621681033864"><span class="hs-identifier hs-var">c1</span></a></span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span class="annot"><span class="annottext">ExCPU
</span><a href="#local-6989586621681033862"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExMemory
</span><a href="#local-6989586621681033863"><span class="hs-identifier hs-var">m1</span></a></span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span class="annot"><span class="annottext">ExMemory
</span><a href="#local-6989586621681033861"><span class="hs-identifier hs-var">m2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="hs-comment">-- These functions are performance critical, so we can't use GenericSemigroupMonoid, and we insist that they be inlined.</span><span>
</span><span id="line-189"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681033858"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-type">ExBudget</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-type">ExBudget</span></a></span><span> </span><span id="local-6989586621681033851"><span class="annot"><span class="annottext">ExCPU
</span><a href="#local-6989586621681033851"><span class="hs-identifier hs-var">cpu1</span></a></span></span><span> </span><span id="local-6989586621681033850"><span class="annot"><span class="annottext">ExMemory
</span><a href="#local-6989586621681033850"><span class="hs-identifier hs-var">mem1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681033849"><span class="annot"><span class="annottext">&lt;&gt; :: ExBudget -&gt; ExBudget -&gt; ExBudget
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-type">ExBudget</span></a></span><span> </span><span id="local-6989586621681033848"><span class="annot"><span class="annottext">ExCPU
</span><a href="#local-6989586621681033848"><span class="hs-identifier hs-var">cpu2</span></a></span></span><span> </span><span id="local-6989586621681033847"><span class="annot"><span class="annottext">ExMemory
</span><a href="#local-6989586621681033847"><span class="hs-identifier hs-var">mem2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExCPU -&gt; ExMemory -&gt; ExBudget
</span><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-var">ExBudget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExCPU
</span><a href="#local-6989586621681033851"><span class="hs-identifier hs-var">cpu1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ExCPU
</span><a href="#local-6989586621681033848"><span class="hs-identifier hs-var">cpu2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExMemory
</span><a href="#local-6989586621681033850"><span class="hs-identifier hs-var">mem1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ExMemory
</span><a href="#local-6989586621681033847"><span class="hs-identifier hs-var">mem2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-comment">-- This absolutely must be inlined so that the 'fromIntegral' calls can get optimized away, or it destroys performance</span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-pragma hs-type">stimes</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-194"></span><span>    </span><span id="local-6989586621681033837"><span class="annot"><span class="annottext">stimes :: forall b. Integral b =&gt; b -&gt; ExBudget -&gt; ExBudget
</span><a href="#local-6989586621681033837"><span class="hs-identifier hs-var hs-var hs-var hs-var">stimes</span></a></span></span><span> </span><span id="local-6989586621681033836"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681033836"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-type">ExBudget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExMemory.html#ExCPU"><span class="hs-identifier hs-type">ExCPU</span></a></span><span> </span><span id="local-6989586621681033834"><span class="annot"><span class="annottext">CostingInteger
</span><a href="#local-6989586621681033834"><span class="hs-identifier hs-var">cpu</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExMemory.html#ExMemory"><span class="hs-identifier hs-type">ExMemory</span></a></span><span> </span><span id="local-6989586621681033832"><span class="annot"><span class="annottext">CostingInteger
</span><a href="#local-6989586621681033832"><span class="hs-identifier hs-var">mem</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExCPU -&gt; ExMemory -&gt; ExBudget
</span><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-var">ExBudget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CostingInteger -&gt; ExCPU
</span><a href="PlutusCore.Evaluation.Machine.ExMemory.html#ExCPU"><span class="hs-identifier hs-var">ExCPU</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681033836"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">CostingInteger
</span><a href="#local-6989586621681033834"><span class="hs-identifier hs-var">cpu</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CostingInteger -&gt; ExMemory
</span><a href="PlutusCore.Evaluation.Machine.ExMemory.html#ExMemory"><span class="hs-identifier hs-var">ExMemory</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681033836"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">CostingInteger
</span><a href="#local-6989586621681033832"><span class="hs-identifier hs-var">mem</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681033824"><span id="local-6989586621681033826"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-type">ExBudget</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-197"></span><span>    </span><span id="local-6989586621681033818"><span class="annot"><span class="annottext">mempty :: ExBudget
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExCPU -&gt; ExMemory -&gt; ExBudget
</span><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-var">ExBudget</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681033815"><span class="annot"><a href="../../../../prettyprinter/html/src"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-type">ExBudget</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-200"></span><span>    </span><span id="local-6989586621681033801"><span class="annot"><span class="annottext">pretty :: forall ann. ExBudget -&gt; Doc ann
</span><a href="../../../../prettyprinter/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-type">ExBudget</span></a></span><span> </span><span id="local-6989586621681033799"><span class="annot"><span class="annottext">ExCPU
</span><a href="#local-6989586621681033799"><span class="hs-identifier hs-var">cpu</span></a></span></span><span> </span><span id="local-6989586621681033798"><span class="annot"><span class="annottext">ExMemory
</span><a href="#local-6989586621681033798"><span class="hs-identifier hs-var">memory</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall ann. Doc ann -&gt; Doc ann
</span><a href="../../../../prettyprinter/html/src"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) m. (Foldable t, Monoid m) =&gt; t m -&gt; m
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">fold</span></a></span><span>
</span><span id="line-201"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;{ cpu: &quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../../../../prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">ExCPU
</span><a href="#local-6989586621681033799"><span class="hs-identifier hs-var">cpu</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall ann. Doc ann
</span><a href="../../../../prettyprinter/html/src"><span class="hs-identifier hs-var">line</span></a></span><span>
</span><span id="line-202"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;| mem: &quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../../../../prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">ExMemory
</span><a href="#local-6989586621681033798"><span class="hs-identifier hs-var">memory</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall ann. Doc ann
</span><a href="../../../../prettyprinter/html/src"><span class="hs-identifier hs-var">line</span></a></span><span>
</span><span id="line-203"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-204"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span class="hs-keyword">newtype</span><span> </span><span id="ExRestrictingBudget"><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExRestrictingBudget"><span class="hs-identifier hs-var">ExRestrictingBudget</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ExRestrictingBudget"><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExRestrictingBudget"><span class="hs-identifier hs-var">ExRestrictingBudget</span></a></span></span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unExRestrictingBudget"><span class="annot"><span class="annottext">ExRestrictingBudget -&gt; ExBudget
</span><a href="PlutusCore.Evaluation.Machine.ExBudget.html#unExRestrictingBudget"><span class="hs-identifier hs-var hs-var">unExRestrictingBudget</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-type">ExBudget</span></a></span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681033785"><span id="local-6989586621681033787"><span id="local-6989586621681033791"><span class="annot"><span class="annottext">Int -&gt; ExRestrictingBudget -&gt; String -&gt; String
[ExRestrictingBudget] -&gt; String -&gt; String
ExRestrictingBudget -&gt; String
forall a.
(Int -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
showList :: [ExRestrictingBudget] -&gt; String -&gt; String
$cshowList :: [ExRestrictingBudget] -&gt; String -&gt; String
show :: ExRestrictingBudget -&gt; String
$cshow :: ExRestrictingBudget -&gt; String
showsPrec :: Int -&gt; ExRestrictingBudget -&gt; String -&gt; String
$cshowsPrec :: Int -&gt; ExRestrictingBudget -&gt; String -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681033780"><span id="local-6989586621681033783"><span class="annot"><span class="annottext">ExRestrictingBudget -&gt; ExRestrictingBudget -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ExRestrictingBudget -&gt; ExRestrictingBudget -&gt; Bool
$c/= :: ExRestrictingBudget -&gt; ExRestrictingBudget -&gt; Bool
== :: ExRestrictingBudget -&gt; ExRestrictingBudget -&gt; Bool
$c== :: ExRestrictingBudget -&gt; ExRestrictingBudget -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>      </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681033768"><span id="local-6989586621681033774"><span id="local-6989586621681033778"><span class="annot"><span class="annottext">NonEmpty ExRestrictingBudget -&gt; ExRestrictingBudget
ExRestrictingBudget -&gt; ExRestrictingBudget -&gt; ExRestrictingBudget
forall b.
Integral b =&gt;
b -&gt; ExRestrictingBudget -&gt; ExRestrictingBudget
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
stimes :: forall b.
Integral b =&gt;
b -&gt; ExRestrictingBudget -&gt; ExRestrictingBudget
$cstimes :: forall b.
Integral b =&gt;
b -&gt; ExRestrictingBudget -&gt; ExRestrictingBudget
sconcat :: NonEmpty ExRestrictingBudget -&gt; ExRestrictingBudget
$csconcat :: NonEmpty ExRestrictingBudget -&gt; ExRestrictingBudget
&lt;&gt; :: ExRestrictingBudget -&gt; ExRestrictingBudget -&gt; ExRestrictingBudget
$c&lt;&gt; :: ExRestrictingBudget -&gt; ExRestrictingBudget -&gt; ExRestrictingBudget
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681033751"><span id="local-6989586621681033755"><span id="local-6989586621681033759"><span class="annot"><span class="annottext">Semigroup ExRestrictingBudget
ExRestrictingBudget
[ExRestrictingBudget] -&gt; ExRestrictingBudget
ExRestrictingBudget -&gt; ExRestrictingBudget -&gt; ExRestrictingBudget
forall a.
Semigroup a -&gt; a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
mconcat :: [ExRestrictingBudget] -&gt; ExRestrictingBudget
$cmconcat :: [ExRestrictingBudget] -&gt; ExRestrictingBudget
mappend :: ExRestrictingBudget -&gt; ExRestrictingBudget -&gt; ExRestrictingBudget
$cmappend :: ExRestrictingBudget -&gt; ExRestrictingBudget -&gt; ExRestrictingBudget
mempty :: ExRestrictingBudget
$cmempty :: ExRestrictingBudget
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>      </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681033742"><span id="local-6989586621681033746"><span class="annot"><span class="annottext">forall ann. [ExRestrictingBudget] -&gt; Doc ann
forall ann. ExRestrictingBudget -&gt; Doc ann
forall a.
(forall ann. a -&gt; Doc ann)
-&gt; (forall ann. [a] -&gt; Doc ann) -&gt; Pretty a
prettyList :: forall ann. [ExRestrictingBudget] -&gt; Doc ann
$cprettyList :: forall ann. [ExRestrictingBudget] -&gt; Doc ann
pretty :: forall ann. ExRestrictingBudget -&gt; Doc ann
$cpretty :: forall ann. ExRestrictingBudget -&gt; Doc ann
</span><a href="#local-6989586621681033742"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Pretty</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681033733"><span id="local-6989586621681033737"><span id="local-6989586621681034725"><span class="annot"><a href="../../../../prettyprinter-configurable/html/src"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681034725"><span class="hs-identifier hs-type">config</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681033728"><span class="annot"><span class="annottext">ExRestrictingBudget -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: ExRestrictingBudget -&gt; ()
$crnf :: ExRestrictingBudget -&gt; ()
</span><a href="#local-6989586621681033728"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span class="hs-comment">-- | When we want to just evaluate the program we use the 'Restricting' mode with an enormous</span><span>
</span><span id="line-213"></span><span class="hs-comment">-- budget, so that evaluation costs of on-chain budgeting are reflected accurately in benchmarks.</span><span>
</span><span id="line-214"></span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#enormousBudget"><span class="hs-identifier hs-type">enormousBudget</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExRestrictingBudget"><span class="hs-identifier hs-type">ExRestrictingBudget</span></a></span><span>
</span><span id="line-215"></span><span id="enormousBudget"><span class="annot"><span class="annottext">enormousBudget :: ExRestrictingBudget
</span><a href="PlutusCore.Evaluation.Machine.ExBudget.html#enormousBudget"><span class="hs-identifier hs-var hs-var">enormousBudget</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExBudget -&gt; ExRestrictingBudget
</span><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExRestrictingBudget"><span class="hs-identifier hs-var">ExRestrictingBudget</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ExCPU -&gt; ExMemory -&gt; ExBudget
</span><a href="PlutusCore.Evaluation.Machine.ExBudget.html#ExBudget"><span class="hs-identifier hs-var">ExBudget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CostingInteger -&gt; ExCPU
</span><a href="PlutusCore.Evaluation.Machine.ExMemory.html#ExCPU"><span class="hs-identifier hs-var">ExCPU</span></a></span><span> </span><span class="annot"><span class="annottext">CostingInteger
</span><a href="#local-6989586621681033724"><span class="hs-identifier hs-var">maxInt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CostingInteger -&gt; ExMemory
</span><a href="PlutusCore.Evaluation.Machine.ExMemory.html#ExMemory"><span class="hs-identifier hs-var">ExMemory</span></a></span><span> </span><span class="annot"><span class="annottext">CostingInteger
</span><a href="#local-6989586621681033724"><span class="hs-identifier hs-var">maxInt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>                 </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681033724"><span class="annot"><span class="annottext">maxInt :: CostingInteger
</span><a href="#local-6989586621681033724"><span class="hs-identifier hs-var hs-var">maxInt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">maxBound</span></a></span><span> </span><span class="hs-glyph">::</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span></pre></body></html>
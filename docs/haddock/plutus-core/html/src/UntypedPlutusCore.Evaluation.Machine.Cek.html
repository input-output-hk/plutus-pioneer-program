<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- editorconfig-checker-disable-file</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- | The API to the CEK machine.</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DataKinds        #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators    #-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">UntypedPlutusCore.Evaluation.Machine.Cek</span><span>
</span><span id="line-9"></span><span>    </span><span class="hs-special">(</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Running the machine</span></span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#runCek"><span class="hs-identifier">runCek</span></a></span><span>
</span><span id="line-12"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#runCekDeBruijn"><span class="hs-identifier">runCekDeBruijn</span></a></span><span>
</span><span id="line-13"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#runCekNoEmit"><span class="hs-identifier">runCekNoEmit</span></a></span><span>
</span><span id="line-14"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#unsafeRunCekNoEmit"><span class="hs-identifier">unsafeRunCekNoEmit</span></a></span><span>
</span><span id="line-15"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#evaluateCek"><span class="hs-identifier">evaluateCek</span></a></span><span>
</span><span id="line-16"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#evaluateCekNoEmit"><span class="hs-identifier">evaluateCekNoEmit</span></a></span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#unsafeEvaluateCek"><span class="hs-identifier">unsafeEvaluateCek</span></a></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#unsafeEvaluateCekNoEmit"><span class="hs-identifier">unsafeEvaluateCekNoEmit</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Result.html#EvaluationResult"><span class="hs-identifier">EvaluationResult</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html#extractEvaluationResult"><span class="hs-identifier">extractEvaluationResult</span></a></span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html#unsafeExtractEvaluationResult"><span class="hs-identifier">unsafeExtractEvaluationResult</span></a></span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Errors</span></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekUserError"><span class="hs-identifier">CekUserError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html#ErrorWithCause"><span class="hs-identifier">ErrorWithCause</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekEvaluationException"><span class="hs-identifier">CekEvaluationException</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html#EvaluationError"><span class="hs-identifier">EvaluationError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Costing</span></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#ExBudgetCategory"><span class="hs-identifier">ExBudgetCategory</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekBudgetSpender"><span class="hs-identifier">CekBudgetSpender</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#ExBudgetMode"><span class="hs-identifier">ExBudgetMode</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#StepKind"><span class="hs-identifier">StepKind</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.ExBudgetMode.html#CekExTally"><span class="hs-identifier">CekExTally</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.ExBudgetMode.html#CountingSt"><span class="hs-identifier">CountingSt</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.ExBudgetMode.html#TallyingSt"><span class="hs-identifier">TallyingSt</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.ExBudgetMode.html#RestrictingSt"><span class="hs-identifier">RestrictingSt</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.CekMachineCosts.html#CekMachineCosts"><span class="hs-identifier">CekMachineCosts</span></a></span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Costing modes</span></span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.ExBudgetMode.html#counting"><span class="hs-identifier">counting</span></a></span><span>
</span><span id="line-39"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.ExBudgetMode.html#tallying"><span class="hs-identifier">tallying</span></a></span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.ExBudgetMode.html#restricting"><span class="hs-identifier">restricting</span></a></span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.ExBudgetMode.html#restrictingEnormous"><span class="hs-identifier">restrictingEnormous</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.ExBudget.html#enormousBudget"><span class="hs-identifier">enormousBudget</span></a></span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Emitter modes</span></span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.EmitterMode.html#noEmitter"><span class="hs-identifier">noEmitter</span></a></span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.EmitterMode.html#logEmitter"><span class="hs-identifier">logEmitter</span></a></span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.EmitterMode.html#logWithTimeEmitter"><span class="hs-identifier">logWithTimeEmitter</span></a></span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.EmitterMode.html#logWithBudgetEmitter"><span class="hs-identifier">logWithBudgetEmitter</span></a></span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Misc</span></span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekValue"><span class="hs-identifier">CekValue</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#readKnownCek"><span class="hs-identifier">readKnownCek</span></a></span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../hashable/html/src"><span class="hs-identifier">Hashable</span></a></span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#PrettyUni"><span class="hs-identifier">PrettyUni</span></a></span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">where</span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusPrelude.html"><span class="hs-identifier">PlutusPrelude</span></a></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Core.html"><span class="hs-identifier">UntypedPlutusCore.Core</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="UntypedPlutusCore.DeBruijn.html"><span class="hs-identifier">UntypedPlutusCore.DeBruijn</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.CekMachineCosts.html"><span class="hs-identifier">UntypedPlutusCore.Evaluation.Machine.Cek.CekMachineCosts</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.EmitterMode.html"><span class="hs-identifier">UntypedPlutusCore.Evaluation.Machine.Cek.EmitterMode</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.ExBudgetMode.html"><span class="hs-identifier">UntypedPlutusCore.Evaluation.Machine.Cek.ExBudgetMode</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html"><span class="hs-identifier">UntypedPlutusCore.Evaluation.Machine.Cek.Internal</span></a></span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.html"><span class="hs-identifier">PlutusCore.Builtin</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html"><span class="hs-identifier">PlutusCore.Evaluation.Machine.Exception</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.MachineParameters.html"><span class="hs-identifier">PlutusCore.Evaluation.Machine.MachineParameters</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Name.html"><span class="hs-identifier">PlutusCore.Name</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Pretty.html"><span class="hs-identifier">PlutusCore.Pretty</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Quote.html"><span class="hs-identifier">PlutusCore.Quote</span></a></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../mtl/html/src"><span class="hs-identifier">Control.Monad.Except</span></a></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../mtl/html/src"><span class="hs-identifier">Control.Monad.State</span></a></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier">Data.Bifunctor</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier">Data.Ix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier">Ix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Universe.html"><span class="hs-identifier">Universe</span></a></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-comment">{- Note [CEK runners naming convention]
A function whose name ends in @NoEmit@ does not perform logging and so does not return any logs.
A function whose name starts with @unsafe@ throws exceptions instead of returning them purely.
A function from the @runCek@ family takes an 'ExBudgetMode' parameter and returns the final
'CekExBudgetState' (and possibly logs). Note that 'runCek' is defined in @...Cek.Internal@ for
reasons explained in Note [Compilation peculiarities].
A function from the @evaluateCek@ family does not return the final 'ExBudgetMode', nor does it
allow one to specify an 'ExBudgetMode'. I.e. such functions are only for fully evaluating programs
(and possibly returning logs). See also haddocks of 'enormousBudget'.
-}</span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="hs-comment">{-| Evaluate a term using the CEK machine with logging enabled and keep track of costing.
A wrapper around the internal runCek to debruijn input and undebruijn output.
*THIS FUNCTION IS PARTIAL if the input term contains free variables*
-}</span><span>
</span><span id="line-94"></span><span id="local-6989586621681135606"><span id="local-6989586621681135611"><span id="local-6989586621681135612"><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#runCek"><span class="hs-identifier hs-type">runCek</span></a></span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135612"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#PrettyUni"><span class="hs-identifier hs-type">PrettyUni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135611"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135612"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.MachineParameters.html#MachineParameters"><span class="hs-identifier hs-type">MachineParameters</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.CekMachineCosts.html#CekMachineCosts"><span class="hs-identifier hs-type">CekMachineCosts</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekValue"><span class="hs-identifier hs-type">CekValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135611"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135612"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#ExBudgetMode"><span class="hs-identifier hs-type">ExBudgetMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135606"><span class="hs-identifier hs-type">cost</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135611"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135612"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-98"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#EmitterMode"><span class="hs-identifier hs-type">EmitterMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135611"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135612"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135611"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135612"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekEvaluationException"><span class="hs-identifier hs-type">CekEvaluationException</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135611"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135612"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135611"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135612"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681135606"><span class="hs-identifier hs-type">cost</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-101"></span><span id="runCek"><span class="annot"><span class="annottext">runCek :: forall fun (uni :: * -&gt; *) cost.
(Ix fun, PrettyUni uni fun) =&gt;
MachineParameters CekMachineCosts CekValue uni fun
-&gt; ExBudgetMode cost uni fun
-&gt; EmitterMode uni fun
-&gt; Term Name uni fun ()
-&gt; (Either
      (CekEvaluationException Name uni fun) (Term Name uni fun ()),
    cost, [Text])
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#runCek"><span class="hs-identifier hs-var hs-var">runCek</span></a></span></span><span> </span><span id="local-6989586621681135364"><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135364"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621681135363"><span class="annot"><span class="annottext">ExBudgetMode cost uni fun
</span><a href="#local-6989586621681135363"><span class="hs-identifier hs-var">mode</span></a></span></span><span> </span><span id="local-6989586621681135362"><span class="annot"><span class="annottext">EmitterMode uni fun
</span><a href="#local-6989586621681135362"><span class="hs-identifier hs-var">emitMode</span></a></span></span><span> </span><span id="local-6989586621681135361"><span class="annot"><span class="annottext">Term Name uni fun ()
</span><a href="#local-6989586621681135361"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-comment">-- translating input</span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall e a. Except e a -&gt; Either e a
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">runExcept</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="PlutusCore.DeBruijn.Internal.html#FreeVariableError"><span class="hs-identifier hs-type">FreeVariableError</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall e (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
(AsFreeVariableError e, MonadError e m) =&gt;
Term Name uni fun ann -&gt; m (Term NamedDeBruijn uni fun ann)
</span><a href="UntypedPlutusCore.DeBruijn.html#deBruijnTerm"><span class="hs-identifier hs-var">deBruijnTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Term Name uni fun ()
</span><a href="#local-6989586621681135361"><span class="hs-identifier hs-var">term</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-104"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621681135358"><span class="annot"><span class="annottext">FreeVariableError
</span><a href="#local-6989586621681135358"><span class="hs-identifier hs-var">fvError</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a e. Exception e =&gt; e -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVariableError
</span><a href="#local-6989586621681135358"><span class="hs-identifier hs-var">fvError</span></a></span><span>
</span><span id="line-105"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621681135356"><span class="annot"><span class="annottext">Term NamedDeBruijn uni fun ()
</span><a href="#local-6989586621681135356"><span class="hs-identifier hs-var">dbt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-106"></span><span>            </span><span class="hs-comment">-- Don't use 'let': https://github.com/input-output-hk/plutus/issues/3876</span><span>
</span><span id="line-107"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall fun (uni :: * -&gt; *) cost.
(Ix fun, PrettyUni uni fun) =&gt;
MachineParameters CekMachineCosts CekValue uni fun
-&gt; ExBudgetMode cost uni fun
-&gt; EmitterMode uni fun
-&gt; Term NamedDeBruijn uni fun ()
-&gt; (Either
      (CekEvaluationException NamedDeBruijn uni fun)
      (Term NamedDeBruijn uni fun ()),
    cost, [Text])
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#runCekDeBruijn"><span class="hs-identifier hs-var">runCekDeBruijn</span></a></span><span> </span><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135364"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">ExBudgetMode cost uni fun
</span><a href="#local-6989586621681135363"><span class="hs-identifier hs-var">mode</span></a></span><span> </span><span class="annot"><span class="annottext">EmitterMode uni fun
</span><a href="#local-6989586621681135362"><span class="hs-identifier hs-var">emitMode</span></a></span><span> </span><span class="annot"><span class="annottext">Term NamedDeBruijn uni fun ()
</span><a href="#local-6989586621681135356"><span class="hs-identifier hs-var">dbt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-108"></span><span>                </span><span class="hs-comment">-- translating back the output</span><span>
</span><span id="line-109"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621681135355"><span class="annot"><span class="annottext">Either
  (CekEvaluationException NamedDeBruijn uni fun)
  (Term NamedDeBruijn uni fun ())
</span><a href="#local-6989586621681135355"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681135354"><span class="annot"><span class="annottext">cost
</span><a href="#local-6989586621681135354"><span class="hs-identifier hs-var">cost'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681135353"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621681135353"><span class="hs-identifier hs-var">logs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun.
Either
  (CekEvaluationException NamedDeBruijn uni fun)
  (Term NamedDeBruijn uni fun ())
-&gt; Either
     (CekEvaluationException Name uni fun) (Term Name uni fun ())
</span><a href="#local-6989586621681135352"><span class="hs-identifier hs-var">unDeBruijnResult</span></a></span><span> </span><span class="annot"><span class="annottext">Either
  (CekEvaluationException NamedDeBruijn uni fun)
  (Term NamedDeBruijn uni fun ())
</span><a href="#local-6989586621681135355"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cost
</span><a href="#local-6989586621681135354"><span class="hs-identifier hs-var">cost'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621681135353"><span class="hs-identifier hs-var">logs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-comment">-- *GRACEFULLY* undebruijnifies: a) the error-cause-term (if it exists) or b) the success value-term.</span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-comment">-- 'Graceful' means that the (a) &amp;&amp; (b) undebruijnifications do not throw an error upon a free variable encounter.</span><span>
</span><span id="line-113"></span><span>    </span><span id="local-6989586621681135569"><span id="local-6989586621681135570"><span class="annot"><a href="#local-6989586621681135352"><span class="hs-identifier hs-type">unDeBruijnResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekEvaluationException"><span class="hs-identifier hs-type">CekEvaluationException</span></a></span><span> </span><span class="annot"><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"><span class="hs-identifier hs-type">NamedDeBruijn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135570"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135569"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"><span class="hs-identifier hs-type">NamedDeBruijn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135570"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135569"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekEvaluationException"><span class="hs-identifier hs-type">CekEvaluationException</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135570"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135569"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135570"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135569"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-115"></span><span>    </span><span id="local-6989586621681135352"><span class="annot"><span class="annottext">unDeBruijnResult :: forall (uni :: * -&gt; *) fun.
Either
  (CekEvaluationException NamedDeBruijn uni fun)
  (Term NamedDeBruijn uni fun ())
-&gt; Either
     (CekEvaluationException Name uni fun) (Term Name uni fun ())
</span><a href="#local-6989586621681135352"><span class="hs-identifier hs-var hs-var">unDeBruijnResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">bimap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun.
Term NamedDeBruijn uni fun () -&gt; Term Name uni fun ()
</span><a href="#local-6989586621681135346"><span class="hs-identifier hs-var">gracefulUnDeBruijn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun.
Term NamedDeBruijn uni fun () -&gt; Term Name uni fun ()
</span><a href="#local-6989586621681135346"><span class="hs-identifier hs-var">gracefulUnDeBruijn</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-comment">-- free debruijn indices will be turned to free, consistent uniques</span><span>
</span><span id="line-118"></span><span>    </span><span id="local-6989586621681135552"><span id="local-6989586621681135553"><span class="annot"><a href="#local-6989586621681135346"><span class="hs-identifier hs-type">gracefulUnDeBruijn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.DeBruijn.Internal.html#NamedDeBruijn"><span class="hs-identifier hs-type">NamedDeBruijn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135553"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135552"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135553"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135552"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-119"></span><span>    </span><span id="local-6989586621681135346"><span class="annot"><span class="annottext">gracefulUnDeBruijn :: forall (uni :: * -&gt; *) fun.
Term NamedDeBruijn uni fun () -&gt; Term Name uni fun ()
</span><a href="#local-6989586621681135346"><span class="hs-identifier hs-var hs-var">gracefulUnDeBruijn</span></a></span></span><span> </span><span id="local-6989586621681135324"><span class="annot"><span class="annottext">Term NamedDeBruijn uni fun ()
</span><a href="#local-6989586621681135324"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Quote a -&gt; a
</span><a href="PlutusCore.Quote.html#runQuote"><span class="hs-identifier hs-var">runQuote</span></a></span><span>
</span><span id="line-120"></span><span>                           </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) s a. Monad m =&gt; StateT s m a -&gt; s -&gt; m a
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">evalStateT</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-121"></span><span>                           </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (uni :: * -&gt; *) fun ann.
MonadQuote m =&gt;
(Index -&gt; ReaderT Levels m Unique)
-&gt; Term NamedDeBruijn uni fun ann -&gt; m (Term Name uni fun ann)
</span><a href="UntypedPlutusCore.DeBruijn.html#unDeBruijnTermWith"><span class="hs-identifier hs-var">unDeBruijnTermWith</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
(MonadReader Levels m, MonadState (Map Level Unique) m,
 MonadQuote m) =&gt;
Index -&gt; m Unique
</span><a href="PlutusCore.DeBruijn.Internal.html#freeIndexAsConsistentLevel"><span class="hs-identifier hs-var">freeIndexAsConsistentLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Term NamedDeBruijn uni fun ()
</span><a href="#local-6989586621681135324"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="hs-comment">-- | Evaluate a term using the CEK machine with logging disabled and keep track of costing.</span><span>
</span><span id="line-124"></span><span class="hs-comment">-- *THIS FUNCTION IS PARTIAL if the input term contains free variables*</span><span>
</span><span id="line-125"></span><span id="local-6989586621681135502"><span id="local-6989586621681135503"><span id="local-6989586621681135504"><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#runCekNoEmit"><span class="hs-identifier hs-type">runCekNoEmit</span></a></span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135504"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#PrettyUni"><span class="hs-identifier hs-type">PrettyUni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135503"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135504"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.MachineParameters.html#MachineParameters"><span class="hs-identifier hs-type">MachineParameters</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.CekMachineCosts.html#CekMachineCosts"><span class="hs-identifier hs-type">CekMachineCosts</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekValue"><span class="hs-identifier hs-type">CekValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135503"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135504"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#ExBudgetMode"><span class="hs-identifier hs-type">ExBudgetMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135502"><span class="hs-identifier hs-type">cost</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135503"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135504"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135503"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135504"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekEvaluationException"><span class="hs-identifier hs-type">CekEvaluationException</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135503"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135504"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135503"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135504"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681135502"><span class="hs-identifier hs-type">cost</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-131"></span><span id="runCekNoEmit"><span class="annot"><span class="annottext">runCekNoEmit :: forall fun (uni :: * -&gt; *) cost.
(Ix fun, PrettyUni uni fun) =&gt;
MachineParameters CekMachineCosts CekValue uni fun
-&gt; ExBudgetMode cost uni fun
-&gt; Term Name uni fun ()
-&gt; (Either
      (CekEvaluationException Name uni fun) (Term Name uni fun ()),
    cost)
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#runCekNoEmit"><span class="hs-identifier hs-var hs-var">runCekNoEmit</span></a></span></span><span> </span><span id="local-6989586621681135313"><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135313"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621681135312"><span class="annot"><span class="annottext">ExBudgetMode cost uni fun
</span><a href="#local-6989586621681135312"><span class="hs-identifier hs-var">mode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-comment">-- throw away the logs</span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681135311"><span class="annot"><span class="annottext">Either (CekEvaluationException Name uni fun) (Term Name uni fun ())
</span><a href="#local-6989586621681135311"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681135310"><span class="annot"><span class="annottext">cost
</span><a href="#local-6989586621681135310"><span class="hs-identifier hs-var">cost</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681135309"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621681135309"><span class="hs-identifier hs-var">_logs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (CekEvaluationException Name uni fun) (Term Name uni fun ())
</span><a href="#local-6989586621681135311"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cost
</span><a href="#local-6989586621681135310"><span class="hs-identifier hs-var">cost</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall fun (uni :: * -&gt; *) cost.
(Ix fun, PrettyUni uni fun) =&gt;
MachineParameters CekMachineCosts CekValue uni fun
-&gt; ExBudgetMode cost uni fun
-&gt; EmitterMode uni fun
-&gt; Term Name uni fun ()
-&gt; (Either
      (CekEvaluationException Name uni fun) (Term Name uni fun ()),
    cost, [Text])
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#runCek"><span class="hs-identifier hs-var">runCek</span></a></span><span> </span><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135313"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">ExBudgetMode cost uni fun
</span><a href="#local-6989586621681135312"><span class="hs-identifier hs-var">mode</span></a></span><span> </span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun. EmitterMode uni fun
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.EmitterMode.html#noEmitter"><span class="hs-identifier hs-var">noEmitter</span></a></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-comment">{-| Unsafely evaluate a term using the CEK machine with logging disabled and keep track of costing.
May throw a 'CekMachineException'.
*THIS FUNCTION IS PARTIAL if the input term contains free variables*
-}</span><span>
</span><span id="line-139"></span><span id="local-6989586621681135489"><span id="local-6989586621681135490"><span id="local-6989586621681135496"><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#unsafeRunCekNoEmit"><span class="hs-identifier hs-type">unsafeRunCekNoEmit</span></a></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../prettyprinter/html/src"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135496"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135496"><span class="hs-identifier hs-type">uni</span></a></span><span>
</span><span id="line-141"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135496"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681135496"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Pretty.PrettyConst.html#PrettyConst"><span class="hs-identifier hs-type">PrettyConst</span></a></span><span>
</span><span id="line-142"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135490"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../prettyprinter/html/src"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135490"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135490"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-143"></span><span>       </span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.MachineParameters.html#MachineParameters"><span class="hs-identifier hs-type">MachineParameters</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.CekMachineCosts.html#CekMachineCosts"><span class="hs-identifier hs-type">CekMachineCosts</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekValue"><span class="hs-identifier hs-type">CekValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135496"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135490"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#ExBudgetMode"><span class="hs-identifier hs-type">ExBudgetMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135489"><span class="hs-identifier hs-type">cost</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135496"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135490"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135496"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135490"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Evaluation.Result.html#EvaluationResult"><span class="hs-identifier hs-type">EvaluationResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135496"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135490"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681135489"><span class="hs-identifier hs-type">cost</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-148"></span><span id="unsafeRunCekNoEmit"><span class="annot"><span class="annottext">unsafeRunCekNoEmit :: forall (uni :: * -&gt; *) fun cost.
(Pretty (SomeTypeIn uni), Typeable uni, Closed uni,
 Everywhere uni PrettyConst, Ix fun, Pretty fun, Typeable fun) =&gt;
MachineParameters CekMachineCosts CekValue uni fun
-&gt; ExBudgetMode cost uni fun
-&gt; Term Name uni fun ()
-&gt; (EvaluationResult (Term Name uni fun ()), cost)
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#unsafeRunCekNoEmit"><span class="hs-identifier hs-var hs-var">unsafeRunCekNoEmit</span></a></span></span><span> </span><span id="local-6989586621681135265"><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135265"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621681135264"><span class="annot"><span class="annottext">ExBudgetMode cost uni fun
</span><a href="#local-6989586621681135264"><span class="hs-identifier hs-var">mode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-comment">-- Don't use 'first': https://github.com/input-output-hk/plutus/issues/3876</span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681135263"><span class="annot"><span class="annottext">Either
  (EvaluationException
     CekUserError (MachineError fun) (Term Name uni fun ()))
  (Term Name uni fun ())
</span><a href="#local-6989586621681135263"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681135262"><span class="annot"><span class="annottext">cost
</span><a href="#local-6989586621681135262"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall internal term user a.
(PrettyPlc internal, PrettyPlc term, Typeable internal,
 Typeable term) =&gt;
Either (EvaluationException user internal term) a
-&gt; EvaluationResult a
</span><a href="PlutusCore.Evaluation.Machine.Exception.html#unsafeExtractEvaluationResult"><span class="hs-identifier hs-var">unsafeExtractEvaluationResult</span></a></span><span> </span><span class="annot"><span class="annottext">Either
  (EvaluationException
     CekUserError (MachineError fun) (Term Name uni fun ()))
  (Term Name uni fun ())
</span><a href="#local-6989586621681135263"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cost
</span><a href="#local-6989586621681135262"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall fun (uni :: * -&gt; *) cost.
(Ix fun, PrettyUni uni fun) =&gt;
MachineParameters CekMachineCosts CekValue uni fun
-&gt; ExBudgetMode cost uni fun
-&gt; Term Name uni fun ()
-&gt; (Either
      (CekEvaluationException Name uni fun) (Term Name uni fun ()),
    cost)
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#runCekNoEmit"><span class="hs-identifier hs-var">runCekNoEmit</span></a></span><span> </span><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135265"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">ExBudgetMode cost uni fun
</span><a href="#local-6989586621681135264"><span class="hs-identifier hs-var">mode</span></a></span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="hs-comment">-- | Evaluate a term using the CEK machine with logging enabled.</span><span>
</span><span id="line-153"></span><span class="hs-comment">-- *THIS FUNCTION IS PARTIAL if the input term contains free variables*</span><span>
</span><span id="line-154"></span><span id="local-6989586621681135446"><span id="local-6989586621681135447"><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#evaluateCek"><span class="hs-identifier hs-type">evaluateCek</span></a></span><span>
</span><span id="line-155"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135447"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#PrettyUni"><span class="hs-identifier hs-type">PrettyUni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135446"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135447"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#EmitterMode"><span class="hs-identifier hs-type">EmitterMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135446"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135447"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.MachineParameters.html#MachineParameters"><span class="hs-identifier hs-type">MachineParameters</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.CekMachineCosts.html#CekMachineCosts"><span class="hs-identifier hs-type">CekMachineCosts</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekValue"><span class="hs-identifier hs-type">CekValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135446"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135447"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135446"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135447"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekEvaluationException"><span class="hs-identifier hs-type">CekEvaluationException</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135446"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135447"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135446"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135447"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-160"></span><span id="evaluateCek"><span class="annot"><span class="annottext">evaluateCek :: forall fun (uni :: * -&gt; *).
(Ix fun, PrettyUni uni fun) =&gt;
EmitterMode uni fun
-&gt; MachineParameters CekMachineCosts CekValue uni fun
-&gt; Term Name uni fun ()
-&gt; (Either
      (CekEvaluationException Name uni fun) (Term Name uni fun ()),
    [Text])
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#evaluateCek"><span class="hs-identifier hs-var hs-var">evaluateCek</span></a></span></span><span> </span><span id="local-6989586621681135256"><span class="annot"><span class="annottext">EmitterMode uni fun
</span><a href="#local-6989586621681135256"><span class="hs-identifier hs-var">emitMode</span></a></span></span><span> </span><span id="local-6989586621681135255"><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135255"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-comment">-- throw away the cost</span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681135254"><span class="annot"><span class="annottext">Either (CekEvaluationException Name uni fun) (Term Name uni fun ())
</span><a href="#local-6989586621681135254"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681135253"><span class="annot"><span class="annottext">RestrictingSt
</span><a href="#local-6989586621681135253"><span class="hs-identifier hs-var">_cost</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681135252"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621681135252"><span class="hs-identifier hs-var">logs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (CekEvaluationException Name uni fun) (Term Name uni fun ())
</span><a href="#local-6989586621681135254"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621681135252"><span class="hs-identifier hs-var">logs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall fun (uni :: * -&gt; *) cost.
(Ix fun, PrettyUni uni fun) =&gt;
MachineParameters CekMachineCosts CekValue uni fun
-&gt; ExBudgetMode cost uni fun
-&gt; EmitterMode uni fun
-&gt; Term Name uni fun ()
-&gt; (Either
      (CekEvaluationException Name uni fun) (Term Name uni fun ()),
    cost, [Text])
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#runCek"><span class="hs-identifier hs-var">runCek</span></a></span><span> </span><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135255"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun.
PrettyUni uni fun =&gt;
ExBudgetMode RestrictingSt uni fun
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.ExBudgetMode.html#restrictingEnormous"><span class="hs-identifier hs-var">restrictingEnormous</span></a></span><span> </span><span class="annot"><span class="annottext">EmitterMode uni fun
</span><a href="#local-6989586621681135256"><span class="hs-identifier hs-var">emitMode</span></a></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="hs-comment">-- | Evaluate a term using the CEK machine with logging disabled.</span><span>
</span><span id="line-165"></span><span class="hs-comment">-- *THIS FUNCTION IS PARTIAL if the input term contains free variables*</span><span>
</span><span id="line-166"></span><span id="local-6989586621681135439"><span id="local-6989586621681135440"><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#evaluateCekNoEmit"><span class="hs-identifier hs-type">evaluateCekNoEmit</span></a></span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135440"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#PrettyUni"><span class="hs-identifier hs-type">PrettyUni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135439"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135440"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.MachineParameters.html#MachineParameters"><span class="hs-identifier hs-type">MachineParameters</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.CekMachineCosts.html#CekMachineCosts"><span class="hs-identifier hs-type">CekMachineCosts</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekValue"><span class="hs-identifier hs-type">CekValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135439"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135440"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135439"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135440"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekEvaluationException"><span class="hs-identifier hs-type">CekEvaluationException</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135439"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135440"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135439"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135440"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-171"></span><span id="evaluateCekNoEmit"><span class="annot"><span class="annottext">evaluateCekNoEmit :: forall fun (uni :: * -&gt; *).
(Ix fun, PrettyUni uni fun) =&gt;
MachineParameters CekMachineCosts CekValue uni fun
-&gt; Term Name uni fun ()
-&gt; Either
     (CekEvaluationException Name uni fun) (Term Name uni fun ())
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#evaluateCekNoEmit"><span class="hs-identifier hs-var hs-var">evaluateCekNoEmit</span></a></span></span><span> </span><span id="local-6989586621681135246"><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135246"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall fun (uni :: * -&gt; *) cost.
(Ix fun, PrettyUni uni fun) =&gt;
MachineParameters CekMachineCosts CekValue uni fun
-&gt; ExBudgetMode cost uni fun
-&gt; Term Name uni fun ()
-&gt; (Either
      (CekEvaluationException Name uni fun) (Term Name uni fun ()),
    cost)
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#runCekNoEmit"><span class="hs-identifier hs-var">runCekNoEmit</span></a></span><span> </span><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135246"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun.
PrettyUni uni fun =&gt;
ExBudgetMode RestrictingSt uni fun
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.ExBudgetMode.html#restrictingEnormous"><span class="hs-identifier hs-var">restrictingEnormous</span></a></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="hs-comment">-- | Evaluate a term using the CEK machine with logging enabled. May throw a 'CekMachineException'.</span><span>
</span><span id="line-174"></span><span class="hs-comment">-- *THIS FUNCTION IS PARTIAL if the input term contains free variables*</span><span>
</span><span id="line-175"></span><span id="local-6989586621681135433"><span id="local-6989586621681135434"><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#unsafeEvaluateCek"><span class="hs-identifier hs-type">unsafeEvaluateCek</span></a></span><span>
</span><span id="line-176"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../prettyprinter/html/src"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135434"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135434"><span class="hs-identifier hs-type">uni</span></a></span><span>
</span><span id="line-177"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135434"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681135434"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Pretty.PrettyConst.html#PrettyConst"><span class="hs-identifier hs-type">PrettyConst</span></a></span><span>
</span><span id="line-178"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135433"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../prettyprinter/html/src"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135433"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135433"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-179"></span><span>       </span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#EmitterMode"><span class="hs-identifier hs-type">EmitterMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135434"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135433"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.MachineParameters.html#MachineParameters"><span class="hs-identifier hs-type">MachineParameters</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.CekMachineCosts.html#CekMachineCosts"><span class="hs-identifier hs-type">CekMachineCosts</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekValue"><span class="hs-identifier hs-type">CekValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135434"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135433"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135434"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135433"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Evaluation.Result.html#EvaluationResult"><span class="hs-identifier hs-type">EvaluationResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135434"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135433"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-184"></span><span id="unsafeEvaluateCek"><span class="annot"><span class="annottext">unsafeEvaluateCek :: forall (uni :: * -&gt; *) fun.
(Pretty (SomeTypeIn uni), Typeable uni, Closed uni,
 Everywhere uni PrettyConst, Ix fun, Pretty fun, Typeable fun) =&gt;
EmitterMode uni fun
-&gt; MachineParameters CekMachineCosts CekValue uni fun
-&gt; Term Name uni fun ()
-&gt; (EvaluationResult (Term Name uni fun ()), [Text])
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#unsafeEvaluateCek"><span class="hs-identifier hs-var hs-var">unsafeEvaluateCek</span></a></span></span><span> </span><span id="local-6989586621681135210"><span class="annot"><span class="annottext">EmitterMode uni fun
</span><a href="#local-6989586621681135210"><span class="hs-identifier hs-var">emitTime</span></a></span></span><span> </span><span id="local-6989586621681135209"><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135209"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-comment">-- Don't use 'first': https://github.com/input-output-hk/plutus/issues/3876</span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681135208"><span class="annot"><span class="annottext">Either
  (EvaluationException
     CekUserError (MachineError fun) (Term Name uni fun ()))
  (Term Name uni fun ())
</span><a href="#local-6989586621681135208"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681135207"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621681135207"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall internal term user a.
(PrettyPlc internal, PrettyPlc term, Typeable internal,
 Typeable term) =&gt;
Either (EvaluationException user internal term) a
-&gt; EvaluationResult a
</span><a href="PlutusCore.Evaluation.Machine.Exception.html#unsafeExtractEvaluationResult"><span class="hs-identifier hs-var">unsafeExtractEvaluationResult</span></a></span><span> </span><span class="annot"><span class="annottext">Either
  (EvaluationException
     CekUserError (MachineError fun) (Term Name uni fun ()))
  (Term Name uni fun ())
</span><a href="#local-6989586621681135208"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621681135207"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall fun (uni :: * -&gt; *).
(Ix fun, PrettyUni uni fun) =&gt;
EmitterMode uni fun
-&gt; MachineParameters CekMachineCosts CekValue uni fun
-&gt; Term Name uni fun ()
-&gt; (Either
      (CekEvaluationException Name uni fun) (Term Name uni fun ()),
    [Text])
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#evaluateCek"><span class="hs-identifier hs-var">evaluateCek</span></a></span><span> </span><span class="annot"><span class="annottext">EmitterMode uni fun
</span><a href="#local-6989586621681135210"><span class="hs-identifier hs-var">emitTime</span></a></span><span> </span><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135209"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="hs-comment">-- | Evaluate a term using the CEK machine with logging disabled. May throw a 'CekMachineException'.</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- *THIS FUNCTION IS PARTIAL if the input term contains free variables*</span><span>
</span><span id="line-190"></span><span id="local-6989586621681135429"><span id="local-6989586621681135430"><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#unsafeEvaluateCekNoEmit"><span class="hs-identifier hs-type">unsafeEvaluateCekNoEmit</span></a></span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../prettyprinter/html/src"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135430"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135430"><span class="hs-identifier hs-type">uni</span></a></span><span>
</span><span id="line-192"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135430"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681135430"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Pretty.PrettyConst.html#PrettyConst"><span class="hs-identifier hs-type">PrettyConst</span></a></span><span>
</span><span id="line-193"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135429"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../prettyprinter/html/src"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135429"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135429"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-194"></span><span>       </span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.MachineParameters.html#MachineParameters"><span class="hs-identifier hs-type">MachineParameters</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.CekMachineCosts.html#CekMachineCosts"><span class="hs-identifier hs-type">CekMachineCosts</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekValue"><span class="hs-identifier hs-type">CekValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135430"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135429"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135430"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135429"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Result.html#EvaluationResult"><span class="hs-identifier hs-type">EvaluationResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135430"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135429"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-198"></span><span id="unsafeEvaluateCekNoEmit"><span class="annot"><span class="annottext">unsafeEvaluateCekNoEmit :: forall (uni :: * -&gt; *) fun.
(Pretty (SomeTypeIn uni), Typeable uni, Closed uni,
 Everywhere uni PrettyConst, Ix fun, Pretty fun, Typeable fun) =&gt;
MachineParameters CekMachineCosts CekValue uni fun
-&gt; Term Name uni fun () -&gt; EvaluationResult (Term Name uni fun ())
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#unsafeEvaluateCekNoEmit"><span class="hs-identifier hs-var hs-var">unsafeEvaluateCekNoEmit</span></a></span></span><span> </span><span id="local-6989586621681135171"><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135171"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall internal term user a.
(PrettyPlc internal, PrettyPlc term, Typeable internal,
 Typeable term) =&gt;
Either (EvaluationException user internal term) a
-&gt; EvaluationResult a
</span><a href="PlutusCore.Evaluation.Machine.Exception.html#unsafeExtractEvaluationResult"><span class="hs-identifier hs-var">unsafeExtractEvaluationResult</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall fun (uni :: * -&gt; *).
(Ix fun, PrettyUni uni fun) =&gt;
MachineParameters CekMachineCosts CekValue uni fun
-&gt; Term Name uni fun ()
-&gt; Either
     (CekEvaluationException Name uni fun) (Term Name uni fun ())
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#evaluateCekNoEmit"><span class="hs-identifier hs-var">evaluateCekNoEmit</span></a></span><span> </span><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135171"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="hs-comment">-- | Unlift a value using the CEK machine.</span><span>
</span><span id="line-201"></span><span class="hs-comment">-- *THIS FUNCTION IS PARTIAL if the input term contains free variables*</span><span>
</span><span id="line-202"></span><span id="local-6989586621681135424"><span id="local-6989586621681135425"><span id="local-6989586621681135426"><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#readKnownCek"><span class="hs-identifier hs-type">readKnownCek</span></a></span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnown"><span class="hs-identifier hs-type">ReadKnown</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135426"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135425"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681135424"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-204"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135425"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#PrettyUni"><span class="hs-identifier hs-type">PrettyUni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135426"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135425"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-205"></span><span>       </span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.MachineParameters.html#MachineParameters"><span class="hs-identifier hs-type">MachineParameters</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.CekMachineCosts.html#CekMachineCosts"><span class="hs-identifier hs-type">CekMachineCosts</span></a></span><span> </span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekValue"><span class="hs-identifier hs-type">CekValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135426"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135425"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="UntypedPlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135426"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135425"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="UntypedPlutusCore.Evaluation.Machine.Cek.Internal.html#CekEvaluationException"><span class="hs-identifier hs-type">CekEvaluationException</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135426"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681135425"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681135424"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-209"></span><span id="readKnownCek"><span class="annot"><span class="annottext">readKnownCek :: forall (uni :: * -&gt; *) fun a.
(ReadKnown (Term Name uni fun ()) a, Ix fun, PrettyUni uni fun) =&gt;
MachineParameters CekMachineCosts CekValue uni fun
-&gt; Term Name uni fun ()
-&gt; Either (CekEvaluationException Name uni fun) a
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#readKnownCek"><span class="hs-identifier hs-var hs-var">readKnownCek</span></a></span></span><span> </span><span id="local-6989586621681135153"><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135153"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall fun (uni :: * -&gt; *).
(Ix fun, PrettyUni uni fun) =&gt;
MachineParameters CekMachineCosts CekValue uni fun
-&gt; Term Name uni fun ()
-&gt; Either
     (CekEvaluationException Name uni fun) (Term Name uni fun ())
</span><a href="UntypedPlutusCore.Evaluation.Machine.Cek.html#evaluateCekNoEmit"><span class="hs-identifier hs-var">evaluateCekNoEmit</span></a></span><span> </span><span class="annot"><span class="annottext">MachineParameters CekMachineCosts CekValue uni fun
</span><a href="#local-6989586621681135153"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><a href="../../../../ghc/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&gt;=&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall val a err.
(ReadKnown val a, AsUnliftingError err, AsEvaluationFailure err) =&gt;
val -&gt; Either (ErrorWithCause err val) a
</span><a href="PlutusCore.Builtin.KnownType.html#readKnownSelf"><span class="hs-identifier hs-var">readKnownSelf</span></a></span><span>
</span><span id="line-210"></span></pre></body></html>
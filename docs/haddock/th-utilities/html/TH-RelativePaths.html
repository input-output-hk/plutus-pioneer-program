<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>TH.RelativePaths</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">th-utilities-0.2.5.0: Collection of useful functions for use with Template Haskell</span><ul class="links" id="page-menu"><li><a href="src/TH.RelativePaths.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">TH.RelativePaths</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides Template Haskell utilities for loading files
 based on paths relative to the root of your Cabal package.</p><p>Normally when building a cabal package, GHC is run with its current
 directory set at the package's root directory. This allows using
 relative paths to refer to files. However, this becomes problematic
 when you want to load modules from multiple projects, such as when
 using &quot;stack ghci&quot;.</p><p>This solves the problem by getting the current module's filepath from
 TH via <code><a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#v:location" title="Language.Haskell.TH.Syntax">location</a></code>. It then searches upwards in the directory tree for
 a .cabal file, and makes the provided path relative to the folder
 it's in.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:qReadFileBS">qReadFileBS</a> :: <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="../../bytestring/html/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><a href="#v:qReadFileLBS">qReadFileLBS</a> :: <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="../../bytestring/html/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></li><li class="src short"><a href="#v:qReadFileText">qReadFileText</a> :: <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="../../text/html/Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:qReadFileLazyText">qReadFileLazyText</a> :: <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="../../text/html/Data-Text-Lazy.html#t:Text" title="Data.Text.Lazy">Text</a></li><li class="src short"><a href="#v:qReadFileString">qReadFileString</a> :: <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="../../ghc/html/libraries/base-4.16.3.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:withCabalPackageWorkDir">withCabalPackageWorkDir</a> :: <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> a -&gt; <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> a</li><li class="src short"><a href="#v:pathRelativeToCabalPackage">pathRelativeToCabalPackage</a> :: <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></li><li class="src short"><a href="#v:findCabalFile">findCabalFile</a> :: <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../../ghc/html/libraries/base-4.16.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:qReadFileBS" class="def">qReadFileBS</a> :: <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="../../bytestring/html/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/TH.RelativePaths.html#qReadFileBS" class="link">Source</a> <a href="#v:qReadFileBS" class="selflink">#</a></p><div class="doc"><p>Reads a file as a strict ByteString. The path is specified relative
 to the package's root directory, and <code>addDependentfile</code> is invoked on
 the target file.</p></div></div><div class="top"><p class="src"><a id="v:qReadFileLBS" class="def">qReadFileLBS</a> :: <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="../../bytestring/html/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="src/TH.RelativePaths.html#qReadFileLBS" class="link">Source</a> <a href="#v:qReadFileLBS" class="selflink">#</a></p><div class="doc"><p>Reads a file as a lazy ByteString. The path is specified relative
 to the package's root directory, and <code>addDependentfile</code> is invoked on
 the target file.</p></div></div><div class="top"><p class="src"><a id="v:qReadFileText" class="def">qReadFileText</a> :: <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="../../text/html/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/TH.RelativePaths.html#qReadFileText" class="link">Source</a> <a href="#v:qReadFileText" class="selflink">#</a></p><div class="doc"><p>Reads a file as a strict Text. The path is specified relative
 to the package's root directory, and <code>addDependentfile</code> is invoked on
 the target file.</p></div></div><div class="top"><p class="src"><a id="v:qReadFileLazyText" class="def">qReadFileLazyText</a> :: <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="../../text/html/Data-Text-Lazy.html#t:Text" title="Data.Text.Lazy">Text</a> <a href="src/TH.RelativePaths.html#qReadFileLazyText" class="link">Source</a> <a href="#v:qReadFileLazyText" class="selflink">#</a></p><div class="doc"><p>Reads a file as a lazy Text. The path is specified relative
 to the package's root directory, and <code>addDependentfile</code> is invoked on
 the target file.</p></div></div><div class="top"><p class="src"><a id="v:qReadFileString" class="def">qReadFileString</a> :: <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="../../ghc/html/libraries/base-4.16.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/TH.RelativePaths.html#qReadFileString" class="link">Source</a> <a href="#v:qReadFileString" class="selflink">#</a></p><div class="doc"><p>Reads a file as a String. The path is specified relative
 to the package's root directory, and <code>addDependentfile</code> is invoked on
 the target file.</p></div></div><div class="top"><p class="src"><a id="v:withCabalPackageWorkDir" class="def">withCabalPackageWorkDir</a> :: <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> a -&gt; <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> a <a href="src/TH.RelativePaths.html#withCabalPackageWorkDir" class="link">Source</a> <a href="#v:withCabalPackageWorkDir" class="selflink">#</a></p><div class="doc"><p>Runs the <code><a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a></code> action, temporarily setting the current working
 directory to the root of the cabal package.</p></div></div><div class="top"><p class="src"><a id="v:pathRelativeToCabalPackage" class="def">pathRelativeToCabalPackage</a> :: <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../../ghc/html/libraries/template-haskell-2.18.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> <a href="src/TH.RelativePaths.html#pathRelativeToCabalPackage" class="link">Source</a> <a href="#v:pathRelativeToCabalPackage" class="selflink">#</a></p><div class="doc"><p>This utility takes a path that's relative to your package's cabal
 file, and resolves it to an absolute location.</p><p>Note that this utility does _not_ invoke <code>qAddDependentFile</code>.</p></div></div><div class="top"><p class="src"><a id="v:findCabalFile" class="def">findCabalFile</a> :: <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../../ghc/html/libraries/base-4.16.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../../ghc/html/libraries/base-4.16.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>) <a href="src/TH.RelativePaths.html#findCabalFile" class="link">Source</a> <a href="#v:findCabalFile" class="selflink">#</a></p><div class="doc"><p>Given the path to a file or directory, search parent directories
 for a .cabal file.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>
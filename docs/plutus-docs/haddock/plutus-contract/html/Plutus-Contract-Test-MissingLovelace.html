<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Plutus.Contract.Test.MissingLovelace</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">plutus-contract-1.1.0.0</span><ul class="links" id="page-menu"><li><a href="src/Plutus.Contract.Test.MissingLovelace.html">Source</a></li><li><a href="../../share/doc/index.html">Contents</a></li><li><a href="../../share/doc/doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Plutus.Contract.Test.MissingLovelace</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:calculateDelta">calculateDelta</a> :: <a href="../../plutus-chain-index-core/html/Plutus-ChainIndex-Tx.html#t:Value" title="Plutus.ChainIndex.Tx">Value</a> -&gt; <a href="../../plutus-ledger/html/Ledger-Ada.html#t:Ada" title="Ledger.Ada">Ada</a> -&gt; <a href="../../plutus-ledger/html/Ledger-Ada.html#t:Ada" title="Ledger.Ada">Ada</a> -&gt; [<a href="../../plutus-ledger/html/Ledger-Ada.html#t:Ada" title="Ledger.Ada">Ada</a>] -&gt; <a href="../../plutus-chain-index-core/html/Plutus-ChainIndex-Tx.html#t:Value" title="Plutus.ChainIndex.Tx">Value</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:calculateDelta" class="def">calculateDelta</a> <a href="src/Plutus.Contract.Test.MissingLovelace.html#calculateDelta" class="link">Source</a> <a href="#v:calculateDelta" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../../plutus-chain-index-core/html/Plutus-ChainIndex-Tx.html#t:Value" title="Plutus.ChainIndex.Tx">Value</a></td><td class="doc"><p>Expected delta of the test</p></td></tr><tr><td class="src">-&gt; <a href="../../plutus-ledger/html/Ledger-Ada.html#t:Ada" title="Ledger.Ada">Ada</a></td><td class="doc"><p>Initial value of the wallet before the test</p></td></tr><tr><td class="src">-&gt; <a href="../../plutus-ledger/html/Ledger-Ada.html#t:Ada" title="Ledger.Ada">Ada</a></td><td class="doc"><p>Final value of the wallet after the test</p></td></tr><tr><td class="src">-&gt; [<a href="../../plutus-ledger/html/Ledger-Ada.html#t:Ada" title="Ledger.Ada">Ada</a>]</td><td class="doc"><p>Missing lovelace costs of outputs from <code>AdjustingUnbalancedTx</code> logs</p></td></tr><tr><td class="src">-&gt; <a href="../../plutus-chain-index-core/html/Plutus-ChainIndex-Tx.html#t:Value" title="Plutus.ChainIndex.Tx">Value</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Returns the calculated delta between initial and final values. Might be false positive.</p><p>The tests check if a wallet's funds are equal to some expected value at the end.
 Unfortunately, because of the adjustion of transactions, the outputs' costs change
 and it's hard to track these changes in the tests layer.</p><p>This function tries to check if the difference between final and initial values (<code>realDelta</code>)
 is a result of combination of operations between output's costs and the expected delta.</p><p>There is a risk when expected delta has only ada part and expected delta /= realDelta
 and realDelta is divisible by some delta from deltas, then we will return realDelta's ada.
 Which means that the test will pass but without strong confidence in wallets' funds consistency.
 For example, we expected -n, but there is n among deltas and realDelta is n,
 it is divisible by n, then the test will pass. So please be careful.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>
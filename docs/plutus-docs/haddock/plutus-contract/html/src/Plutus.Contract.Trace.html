<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes    #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds              #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass         #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric          #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies     #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts       #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances      #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE FunctionalDependencies #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase             #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns         #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE NumericUnderscores     #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings      #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes             #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell        #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications       #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies           #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators          #-}</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- | A trace is a sequence of actions by simulated wallets that can be run</span><span>
</span><span id="line-19"></span><span class="hs-comment">--   on the mockchain. This module contains the functions needed to build</span><span>
</span><span id="line-20"></span><span class="hs-comment">--   traces.</span><span>
</span><span id="line-21"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Plutus.Contract.Trace</span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#TraceError"><span class="hs-identifier">TraceError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#EndpointError"><span class="hs-identifier">EndpointError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#AsTraceError"><span class="hs-identifier">AsTraceError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#toNotifyError"><span class="hs-identifier">toNotifyError</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Handle contract requests</span></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#handleAdjustUnbalancedTx"><span class="hs-identifier">handleAdjustUnbalancedTx</span></a></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#handleSlotNotifications"><span class="hs-identifier">handleSlotNotifications</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#handleTimeNotifications"><span class="hs-identifier">handleTimeNotifications</span></a></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#handleOwnAddressesQueries"><span class="hs-identifier">handleOwnAddressesQueries</span></a></span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#handleCurrentNodeClientSlotQueries"><span class="hs-identifier">handleCurrentNodeClientSlotQueries</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#handleCurrentChainIndexSlotQueries"><span class="hs-identifier">handleCurrentChainIndexSlotQueries</span></a></span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#handleCurrentTimeQueries"><span class="hs-identifier">handleCurrentTimeQueries</span></a></span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#handleCurrentNodeClientTimeRangeQueries"><span class="hs-identifier">handleCurrentNodeClientTimeRangeQueries</span></a></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#handleTimeToSlotConversions"><span class="hs-identifier">handleTimeToSlotConversions</span></a></span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#handleUnbalancedTransactions"><span class="hs-identifier">handleUnbalancedTransactions</span></a></span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#handlePendingTransactions"><span class="hs-identifier">handlePendingTransactions</span></a></span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#handleChainIndexQueries"><span class="hs-identifier">handleChainIndexQueries</span></a></span><span>
</span><span id="line-39"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#handleOwnInstanceIdQueries"><span class="hs-identifier">handleOwnInstanceIdQueries</span></a></span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#handleYieldedUnbalancedTx"><span class="hs-identifier">handleYieldedUnbalancedTx</span></a></span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#handleGetParams"><span class="hs-identifier">handleGetParams</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Initial distributions of emulated chains</span></span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#InitialDistribution"><span class="hs-identifier">InitialDistribution</span></a></span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#defaultDist"><span class="hs-identifier">defaultDist</span></a></span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#defaultDistFor"><span class="hs-identifier">defaultDistFor</span></a></span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Wallets</span></span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier">EM.Wallet</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#mockWalletAddress"><span class="hs-identifier">EM.mockWalletAddress</span></a></span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#mockWalletPaymentPubKey"><span class="hs-identifier">EM.mockWalletPaymentPubKey</span></a></span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#mockWalletPaymentPubKeyHash"><span class="hs-identifier">EM.mockWalletPaymentPubKeyHash</span></a></span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#knownWallets"><span class="hs-identifier">EM.knownWallets</span></a></span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#knownWallet"><span class="hs-identifier">EM.knownWallet</span></a></span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">Control.Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">makeClassyPrisms</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">preview</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Member</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">Control.Monad.Freer.Extras.Log</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">LogMessage</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">LogMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">LogObserve</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer.Reader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Reader</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">Data.Aeson.Types</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">JSON</span></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Generics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier">Prettyprinter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier">Pretty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier">pretty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-operator">(&lt;+&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html"><span class="hs-identifier">Plutus.Contract.Effects</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier">PABReq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier">PABResp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html"><span class="hs-identifier">Plutus.Contract.Effects</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">E</span></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html"><span class="hs-identifier">Plutus.Contract.Trace.RequestHandler</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier">RequestHandler</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.LogMessages.html#RequestHandlerLogMsg"><span class="hs-identifier">RequestHandlerLogMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier">generalise</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html"><span class="hs-identifier">Plutus.Contract.Trace.RequestHandler</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">RequestHandler</span></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Ada</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ada</span></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Value</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">Value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-chain-index-core/html/src"><span class="hs-identifier">Plutus.ChainIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-chain-index-core/html/src"><span class="hs-identifier">ChainIndexQueryEffect</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Effects.html"><span class="hs-identifier">Wallet.Effects</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Effects.html#NodeClientEffect"><span class="hs-identifier">NodeClientEffect</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Effects.html#WalletEffect"><span class="hs-identifier">WalletEffect</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.html"><span class="hs-identifier">Wallet.Emulator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier">Wallet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.html"><span class="hs-identifier">Wallet.Emulator</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">EM</span></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Types.html"><span class="hs-identifier">Wallet.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Types.html#ContractInstanceId"><span class="hs-identifier">ContractInstanceId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Types.html#EndpointDescription"><span class="hs-identifier">EndpointDescription</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Types.html#NotificationError"><span class="hs-identifier">NotificationError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Types.html#EndpointNotAvailable"><span class="hs-identifier">EndpointNotAvailable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span id="local-6989586621680829198"><span id="local-6989586621680829199"></span></span><span class="hs-keyword">data</span><span> </span><span id="EndpointError"><span class="annot"><a href="Plutus.Contract.Trace.html#EndpointError"><span class="hs-identifier hs-var">EndpointError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-82"></span><span>    </span><span id="EndpointNotActive"><span class="annot"><a href="Plutus.Contract.Trace.html#EndpointNotActive"><span class="hs-identifier hs-var">EndpointNotActive</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Wallet.Types.html#EndpointDescription"><span class="hs-identifier hs-type">EndpointDescription</span></a></span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680829193"><span id="local-6989586621680829195"><span class="annot"><span class="annottext">EndpointError -&gt; EndpointError -&gt; Bool
(EndpointError -&gt; EndpointError -&gt; Bool)
-&gt; (EndpointError -&gt; EndpointError -&gt; Bool) -&gt; Eq EndpointError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: EndpointError -&gt; EndpointError -&gt; Bool
$c/= :: EndpointError -&gt; EndpointError -&gt; Bool
== :: EndpointError -&gt; EndpointError -&gt; Bool
$c== :: EndpointError -&gt; EndpointError -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680829186"><span id="local-6989586621680829188"><span id="local-6989586621680829190"><span class="annot"><span class="annottext">Int -&gt; EndpointError -&gt; ShowS
[EndpointError] -&gt; ShowS
EndpointError -&gt; String
(Int -&gt; EndpointError -&gt; ShowS)
-&gt; (EndpointError -&gt; String)
-&gt; ([EndpointError] -&gt; ShowS)
-&gt; Show EndpointError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [EndpointError] -&gt; ShowS
$cshowList :: [EndpointError] -&gt; ShowS
show :: EndpointError -&gt; String
$cshow :: EndpointError -&gt; String
showsPrec :: Int -&gt; EndpointError -&gt; ShowS
$cshowsPrec :: Int -&gt; EndpointError -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. EndpointError -&gt; Rep EndpointError x)
-&gt; (forall x. Rep EndpointError x -&gt; EndpointError)
-&gt; Generic EndpointError
forall x. Rep EndpointError x -&gt; EndpointError
forall x. EndpointError -&gt; Rep EndpointError x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep EndpointError x -&gt; EndpointError
$cfrom :: forall x. EndpointError -&gt; Rep EndpointError x
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680829174"><span id="local-6989586621680829176"><span id="local-6989586621680829178"><span id="local-6989586621680829180"><span class="annot"><span class="annottext">[EndpointError] -&gt; Encoding
[EndpointError] -&gt; Value
EndpointError -&gt; Encoding
EndpointError -&gt; Value
(EndpointError -&gt; Value)
-&gt; (EndpointError -&gt; Encoding)
-&gt; ([EndpointError] -&gt; Value)
-&gt; ([EndpointError] -&gt; Encoding)
-&gt; ToJSON EndpointError
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [EndpointError] -&gt; Encoding
$ctoEncodingList :: [EndpointError] -&gt; Encoding
toJSONList :: [EndpointError] -&gt; Value
$ctoJSONList :: [EndpointError] -&gt; Value
toEncoding :: EndpointError -&gt; Encoding
$ctoEncoding :: EndpointError -&gt; Encoding
toJSON :: EndpointError -&gt; Value
$ctoJSON :: EndpointError -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">JSON.ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680829169"><span id="local-6989586621680829171"><span class="annot"><span class="annottext">Value -&gt; Parser [EndpointError]
Value -&gt; Parser EndpointError
(Value -&gt; Parser EndpointError)
-&gt; (Value -&gt; Parser [EndpointError]) -&gt; FromJSON EndpointError
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [EndpointError]
$cparseJSONList :: Value -&gt; Parser [EndpointError]
parseJSON :: Value -&gt; Parser EndpointError
$cparseJSON :: Value -&gt; Parser EndpointError
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">JSON.FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680829165"><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#EndpointError"><span class="hs-identifier hs-type">EndpointError</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-87"></span><span>    </span><span id="local-6989586621680829163"><span class="annot"><span class="annottext">pretty :: EndpointError -&gt; Doc ann
</span><a href="#local-6989586621680829163"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-88"></span><span>        </span><span class="annot"><a href="Plutus.Contract.Trace.html#EndpointNotActive"><span class="hs-identifier hs-type">EndpointNotActive</span></a></span><span> </span><span id="local-6989586621680829162"><span class="annot"><span class="annottext">Maybe Wallet
</span><a href="#local-6989586621680829162"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621680829161"><span class="annot"><span class="annottext">EndpointDescription
</span><a href="#local-6989586621680829161"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-89"></span><span>            </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;Endpoint not active:&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Wallet -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Wallet
</span><a href="#local-6989586621680829162"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">EndpointDescription -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">EndpointDescription
</span><a href="#local-6989586621680829161"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="annot"><a href="Plutus.Contract.Trace.html#toNotifyError"><span class="hs-identifier hs-type">toNotifyError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Types.html#ContractInstanceId"><span class="hs-identifier hs-type">ContractInstanceId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#EndpointError"><span class="hs-identifier hs-type">EndpointError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Types.html#NotificationError"><span class="hs-identifier hs-type">NotificationError</span></a></span><span>
</span><span id="line-92"></span><span id="toNotifyError"><span class="annot"><span class="annottext">toNotifyError :: ContractInstanceId -&gt; EndpointError -&gt; NotificationError
</span><a href="Plutus.Contract.Trace.html#toNotifyError"><span class="hs-identifier hs-var hs-var">toNotifyError</span></a></span></span><span> </span><span id="local-6989586621680829160"><span class="annot"><span class="annottext">ContractInstanceId
</span><a href="#local-6989586621680829160"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><a href="Plutus.Contract.Trace.html#EndpointNotActive"><span class="hs-identifier hs-type">EndpointNotActive</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Wallet
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680829159"><span class="annot"><span class="annottext">EndpointDescription
</span><a href="#local-6989586621680829159"><span class="hs-identifier hs-var">e</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ContractInstanceId -&gt; EndpointDescription -&gt; NotificationError
</span><a href="Wallet.Types.html#EndpointNotAvailable"><span class="hs-identifier hs-var">EndpointNotAvailable</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceId
</span><a href="#local-6989586621680829160"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">EndpointDescription
</span><a href="#local-6989586621680829159"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-comment">-- | Error produced while running a trace. Either a contract-specific</span><span>
</span><span id="line-96"></span><span class="hs-comment">--   error (of type 'e'), or an 'EM.AssertionError' from the emulator.</span><span>
</span><span id="line-97"></span><span class="hs-keyword">data</span><span> </span><span id="TraceError"><span class="annot"><a href="Plutus.Contract.Trace.html#TraceError"><span class="hs-identifier hs-var">TraceError</span></a></span></span><span> </span><span id="local-6989586621680829249"><span class="annot"><a href="#local-6989586621680829249"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-98"></span><span>    </span><span id="TraceAssertionError"><span class="annot"><a href="Plutus.Contract.Trace.html#TraceAssertionError"><span class="hs-identifier hs-var">TraceAssertionError</span></a></span></span><span> </span><span class="annot"><a href="Plutus.Contract.Error.html#AssertionError"><span class="hs-identifier hs-type">EM.AssertionError</span></a></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="TContractError"><span class="annot"><a href="Plutus.Contract.Trace.html#TContractError"><span class="hs-identifier hs-var">TContractError</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621680829249"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="HookError"><span class="annot"><a href="Plutus.Contract.Trace.html#HookError"><span class="hs-identifier hs-var">HookError</span></a></span></span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#EndpointError"><span class="hs-identifier hs-type">EndpointError</span></a></span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680829152"><span id="local-6989586621680829154"><span class="annot"><span class="annottext">TraceError e -&gt; TraceError e -&gt; Bool
(TraceError e -&gt; TraceError e -&gt; Bool)
-&gt; (TraceError e -&gt; TraceError e -&gt; Bool) -&gt; Eq (TraceError e)
forall e. Eq e =&gt; TraceError e -&gt; TraceError e -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: TraceError e -&gt; TraceError e -&gt; Bool
$c/= :: forall e. Eq e =&gt; TraceError e -&gt; TraceError e -&gt; Bool
== :: TraceError e -&gt; TraceError e -&gt; Bool
$c== :: forall e. Eq e =&gt; TraceError e -&gt; TraceError e -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680829146"><span id="local-6989586621680829148"><span id="local-6989586621680829150"><span class="annot"><span class="annottext">Int -&gt; TraceError e -&gt; ShowS
[TraceError e] -&gt; ShowS
TraceError e -&gt; String
(Int -&gt; TraceError e -&gt; ShowS)
-&gt; (TraceError e -&gt; String)
-&gt; ([TraceError e] -&gt; ShowS)
-&gt; Show (TraceError e)
forall e. Show e =&gt; Int -&gt; TraceError e -&gt; ShowS
forall e. Show e =&gt; [TraceError e] -&gt; ShowS
forall e. Show e =&gt; TraceError e -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [TraceError e] -&gt; ShowS
$cshowList :: forall e. Show e =&gt; [TraceError e] -&gt; ShowS
show :: TraceError e -&gt; String
$cshow :: forall e. Show e =&gt; TraceError e -&gt; String
showsPrec :: Int -&gt; TraceError e -&gt; ShowS
$cshowsPrec :: forall e. Show e =&gt; Int -&gt; TraceError e -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-keyword">type</span><span> </span><span id="InitialDistribution"><span class="annot"><a href="Plutus.Contract.Trace.html#InitialDistribution"><span class="hs-identifier hs-var">InitialDistribution</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span id="local-6989586621680829145"><span class="annot"><a href="Plutus.Contract.Trace.html#handleSlotNotifications"><span class="hs-identifier hs-type">handleSlotNotifications</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829145"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.LogMessages.html#RequestHandlerLogMsg"><span class="hs-identifier hs-type">RequestHandlerLogMsg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829145"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Effects.html#NodeClientEffect"><span class="hs-identifier hs-type">NodeClientEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829145"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier hs-type">RequestHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829145"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span></span><span>
</span><span id="line-111"></span><span id="handleSlotNotifications"><span class="annot"><span class="annottext">handleSlotNotifications :: RequestHandler effs PABReq PABResp
</span><a href="Plutus.Contract.Trace.html#handleSlotNotifications"><span class="hs-identifier hs-var hs-var">handleSlotNotifications</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe Slot)
-&gt; (Slot -&gt; PABResp)
-&gt; RequestHandler effs Slot Slot
-&gt; RequestHandler effs PABReq PABResp
forall (effs :: [* -&gt; *]) req req' resp resp'.
(req' -&gt; Maybe req)
-&gt; (resp -&gt; resp')
-&gt; RequestHandler effs req resp
-&gt; RequestHandler effs req' resp'
</span><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier hs-var">generalise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First Slot) PABReq Slot -&gt; PABReq -&gt; Maybe Slot
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First Slot) PABReq Slot
Prism' PABReq Slot
</span><a href="Plutus.Contract.Effects.html#_AwaitSlotReq"><span class="hs-identifier hs-var">E._AwaitSlotReq</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Slot -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#AwaitSlotResp"><span class="hs-identifier hs-var">E.AwaitSlotResp</span></a></span><span> </span><span class="annot"><span class="annottext">RequestHandler effs Slot Slot
forall (effs :: [* -&gt; *]).
(Member NodeClientEffect effs,
 Member (LogObserve (LogMessage Text)) effs,
 Member (LogMsg RequestHandlerLogMsg) effs) =&gt;
RequestHandler effs Slot Slot
</span><a href="Plutus.Contract.Trace.RequestHandler.html#handleSlotNotifications"><span class="hs-identifier hs-var">RequestHandler.handleSlotNotifications</span></a></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span id="local-6989586621680829141"><span class="annot"><a href="Plutus.Contract.Trace.html#handleTimeNotifications"><span class="hs-identifier hs-type">handleTimeNotifications</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829141"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.LogMessages.html#RequestHandlerLogMsg"><span class="hs-identifier hs-type">RequestHandlerLogMsg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829141"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Effects.html#NodeClientEffect"><span class="hs-identifier hs-type">NodeClientEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829141"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier hs-type">RequestHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829141"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span></span><span>
</span><span id="line-120"></span><span id="handleTimeNotifications"><span class="annot"><span class="annottext">handleTimeNotifications :: RequestHandler effs PABReq PABResp
</span><a href="Plutus.Contract.Trace.html#handleTimeNotifications"><span class="hs-identifier hs-var hs-var">handleTimeNotifications</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-121"></span><span>    </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe POSIXTime)
-&gt; (POSIXTime -&gt; PABResp)
-&gt; RequestHandler effs POSIXTime POSIXTime
-&gt; RequestHandler effs PABReq PABResp
forall (effs :: [* -&gt; *]) req req' resp resp'.
(req' -&gt; Maybe req)
-&gt; (resp -&gt; resp')
-&gt; RequestHandler effs req resp
-&gt; RequestHandler effs req' resp'
</span><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier hs-var">generalise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First POSIXTime) PABReq POSIXTime
-&gt; PABReq -&gt; Maybe POSIXTime
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First POSIXTime) PABReq POSIXTime
Prism' PABReq POSIXTime
</span><a href="Plutus.Contract.Effects.html#_AwaitTimeReq"><span class="hs-identifier hs-var">E._AwaitTimeReq</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">POSIXTime -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#AwaitTimeResp"><span class="hs-identifier hs-var">E.AwaitTimeResp</span></a></span><span> </span><span class="annot"><span class="annottext">RequestHandler effs POSIXTime POSIXTime
forall (effs :: [* -&gt; *]).
(Member NodeClientEffect effs,
 Member (LogObserve (LogMessage Text)) effs,
 Member (LogMsg RequestHandlerLogMsg) effs) =&gt;
RequestHandler effs POSIXTime POSIXTime
</span><a href="Plutus.Contract.Trace.RequestHandler.html#handleTimeNotifications"><span class="hs-identifier hs-var">RequestHandler.handleTimeNotifications</span></a></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span id="local-6989586621680829137"><span class="annot"><a href="Plutus.Contract.Trace.html#handleCurrentNodeClientSlotQueries"><span class="hs-identifier hs-type">handleCurrentNodeClientSlotQueries</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829137"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Effects.html#NodeClientEffect"><span class="hs-identifier hs-type">NodeClientEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829137"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier hs-type">RequestHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829137"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span></span><span>
</span><span id="line-128"></span><span id="handleCurrentNodeClientSlotQueries"><span class="annot"><span class="annottext">handleCurrentNodeClientSlotQueries :: RequestHandler effs PABReq PABResp
</span><a href="Plutus.Contract.Trace.html#handleCurrentNodeClientSlotQueries"><span class="hs-identifier hs-var hs-var">handleCurrentNodeClientSlotQueries</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-129"></span><span>    </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe ())
-&gt; (Slot -&gt; PABResp)
-&gt; RequestHandler effs () Slot
-&gt; RequestHandler effs PABReq PABResp
forall (effs :: [* -&gt; *]) req req' resp resp'.
(req' -&gt; Maybe req)
-&gt; (resp -&gt; resp')
-&gt; RequestHandler effs req resp
-&gt; RequestHandler effs req' resp'
</span><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier hs-var">generalise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First ()) PABReq () -&gt; PABReq -&gt; Maybe ()
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First ()) PABReq ()
Prism' PABReq ()
</span><a href="Plutus.Contract.Effects.html#_CurrentNodeClientSlotReq"><span class="hs-identifier hs-var">E._CurrentNodeClientSlotReq</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Slot -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#CurrentNodeClientSlotResp"><span class="hs-identifier hs-var">E.CurrentNodeClientSlotResp</span></a></span><span> </span><span class="annot"><span class="annottext">RequestHandler effs () Slot
forall (effs :: [* -&gt; *]) a.
(Member NodeClientEffect effs,
 Member (LogObserve (LogMessage Text)) effs) =&gt;
RequestHandler effs a Slot
</span><a href="Plutus.Contract.Trace.RequestHandler.html#handleCurrentNodeClientSlot"><span class="hs-identifier hs-var">RequestHandler.handleCurrentNodeClientSlot</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span id="local-6989586621680829133"><span class="annot"><a href="Plutus.Contract.Trace.html#handleCurrentChainIndexSlotQueries"><span class="hs-identifier hs-type">handleCurrentChainIndexSlotQueries</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829133"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-chain-index-core/html/src"><span class="hs-identifier hs-type">ChainIndexQueryEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829133"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier hs-type">RequestHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829133"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span></span><span>
</span><span id="line-136"></span><span id="handleCurrentChainIndexSlotQueries"><span class="annot"><span class="annottext">handleCurrentChainIndexSlotQueries :: RequestHandler effs PABReq PABResp
</span><a href="Plutus.Contract.Trace.html#handleCurrentChainIndexSlotQueries"><span class="hs-identifier hs-var hs-var">handleCurrentChainIndexSlotQueries</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-137"></span><span>    </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe ())
-&gt; (Slot -&gt; PABResp)
-&gt; RequestHandler effs () Slot
-&gt; RequestHandler effs PABReq PABResp
forall (effs :: [* -&gt; *]) req req' resp resp'.
(req' -&gt; Maybe req)
-&gt; (resp -&gt; resp')
-&gt; RequestHandler effs req resp
-&gt; RequestHandler effs req' resp'
</span><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier hs-var">generalise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First ()) PABReq () -&gt; PABReq -&gt; Maybe ()
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First ()) PABReq ()
Prism' PABReq ()
</span><a href="Plutus.Contract.Effects.html#_CurrentChainIndexSlotReq"><span class="hs-identifier hs-var">E._CurrentChainIndexSlotReq</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Slot -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#CurrentChainIndexSlotResp"><span class="hs-identifier hs-var">E.CurrentChainIndexSlotResp</span></a></span><span> </span><span class="annot"><span class="annottext">RequestHandler effs () Slot
forall (effs :: [* -&gt; *]) a.
(Member (LogObserve (LogMessage Text)) effs,
 Member ChainIndexQueryEffect effs) =&gt;
RequestHandler effs a Slot
</span><a href="Plutus.Contract.Trace.RequestHandler.html#handleCurrentChainIndexSlot"><span class="hs-identifier hs-var">RequestHandler.handleCurrentChainIndexSlot</span></a></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span id="local-6989586621680829129"><span class="annot"><a href="Plutus.Contract.Trace.html#handleCurrentTimeQueries"><span class="hs-identifier hs-type">handleCurrentTimeQueries</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829129"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Effects.html#NodeClientEffect"><span class="hs-identifier hs-type">NodeClientEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829129"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier hs-type">RequestHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829129"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span></span><span>
</span><span id="line-144"></span><span id="handleCurrentTimeQueries"><span class="annot"><span class="annottext">handleCurrentTimeQueries :: RequestHandler effs PABReq PABResp
</span><a href="Plutus.Contract.Trace.html#handleCurrentTimeQueries"><span class="hs-identifier hs-var hs-var">handleCurrentTimeQueries</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-145"></span><span>    </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe ())
-&gt; (POSIXTime -&gt; PABResp)
-&gt; RequestHandler effs () POSIXTime
-&gt; RequestHandler effs PABReq PABResp
forall (effs :: [* -&gt; *]) req req' resp resp'.
(req' -&gt; Maybe req)
-&gt; (resp -&gt; resp')
-&gt; RequestHandler effs req resp
-&gt; RequestHandler effs req' resp'
</span><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier hs-var">generalise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First ()) PABReq () -&gt; PABReq -&gt; Maybe ()
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First ()) PABReq ()
Prism' PABReq ()
</span><a href="Plutus.Contract.Effects.html#_CurrentTimeReq"><span class="hs-identifier hs-var">E._CurrentTimeReq</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">POSIXTime -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#CurrentTimeResp"><span class="hs-identifier hs-var">E.CurrentTimeResp</span></a></span><span> </span><span class="annot"><span class="annottext">RequestHandler effs () POSIXTime
forall (effs :: [* -&gt; *]) a.
(Member NodeClientEffect effs,
 Member (LogObserve (LogMessage Text)) effs) =&gt;
RequestHandler effs a POSIXTime
</span><a href="Plutus.Contract.Trace.RequestHandler.html#handleCurrentTime"><span class="hs-identifier hs-var">RequestHandler.handleCurrentTime</span></a></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span id="local-6989586621680829125"><span class="annot"><a href="Plutus.Contract.Trace.html#handleCurrentNodeClientTimeRangeQueries"><span class="hs-identifier hs-type">handleCurrentNodeClientTimeRangeQueries</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829125"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Effects.html#NodeClientEffect"><span class="hs-identifier hs-type">NodeClientEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829125"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier hs-type">RequestHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829125"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span></span><span>
</span><span id="line-152"></span><span id="handleCurrentNodeClientTimeRangeQueries"><span class="annot"><span class="annottext">handleCurrentNodeClientTimeRangeQueries :: RequestHandler effs PABReq PABResp
</span><a href="Plutus.Contract.Trace.html#handleCurrentNodeClientTimeRangeQueries"><span class="hs-identifier hs-var hs-var">handleCurrentNodeClientTimeRangeQueries</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe ())
-&gt; ((POSIXTime, POSIXTime) -&gt; PABResp)
-&gt; RequestHandler effs () (POSIXTime, POSIXTime)
-&gt; RequestHandler effs PABReq PABResp
forall (effs :: [* -&gt; *]) req req' resp resp'.
(req' -&gt; Maybe req)
-&gt; (resp -&gt; resp')
-&gt; RequestHandler effs req resp
-&gt; RequestHandler effs req' resp'
</span><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier hs-var">generalise</span></a></span><span>
</span><span id="line-154"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First ()) PABReq () -&gt; PABReq -&gt; Maybe ()
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First ()) PABReq ()
Prism' PABReq ()
</span><a href="Plutus.Contract.Effects.html#_CurrentNodeClientTimeRangeReq"><span class="hs-identifier hs-var">E._CurrentNodeClientTimeRangeReq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>        </span><span class="annot"><span class="annottext">(POSIXTime, POSIXTime) -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#CurrentNodeClientTimeRangeResp"><span class="hs-identifier hs-var">E.CurrentNodeClientTimeRangeResp</span></a></span><span>
</span><span id="line-156"></span><span>        </span><span class="annot"><span class="annottext">RequestHandler effs () (POSIXTime, POSIXTime)
forall (effs :: [* -&gt; *]) a.
(Member NodeClientEffect effs,
 Member (LogObserve (LogMessage Text)) effs) =&gt;
RequestHandler effs a (POSIXTime, POSIXTime)
</span><a href="Plutus.Contract.Trace.RequestHandler.html#handleCurrentNodeClientTimeRange"><span class="hs-identifier hs-var">RequestHandler.handleCurrentNodeClientTimeRange</span></a></span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span id="local-6989586621680829121"><span class="annot"><a href="Plutus.Contract.Trace.html#handleTimeToSlotConversions"><span class="hs-identifier hs-type">handleTimeToSlotConversions</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829121"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-160"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Effects.html#NodeClientEffect"><span class="hs-identifier hs-type">NodeClientEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829121"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier hs-type">RequestHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829121"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span></span><span>
</span><span id="line-163"></span><span id="handleTimeToSlotConversions"><span class="annot"><span class="annottext">handleTimeToSlotConversions :: RequestHandler effs PABReq PABResp
</span><a href="Plutus.Contract.Trace.html#handleTimeToSlotConversions"><span class="hs-identifier hs-var hs-var">handleTimeToSlotConversions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-164"></span><span>    </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe POSIXTimeRange)
-&gt; (SlotRange -&gt; PABResp)
-&gt; RequestHandler effs POSIXTimeRange SlotRange
-&gt; RequestHandler effs PABReq PABResp
forall (effs :: [* -&gt; *]) req req' resp resp'.
(req' -&gt; Maybe req)
-&gt; (resp -&gt; resp')
-&gt; RequestHandler effs req resp
-&gt; RequestHandler effs req' resp'
</span><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier hs-var">generalise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First POSIXTimeRange) PABReq POSIXTimeRange
-&gt; PABReq -&gt; Maybe POSIXTimeRange
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First POSIXTimeRange) PABReq POSIXTimeRange
Prism' PABReq POSIXTimeRange
</span><a href="Plutus.Contract.Effects.html#_PosixTimeRangeToContainedSlotRangeReq"><span class="hs-identifier hs-var">E._PosixTimeRangeToContainedSlotRangeReq</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either SlotConversionError SlotRange -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#PosixTimeRangeToContainedSlotRangeResp"><span class="hs-identifier hs-var">E.PosixTimeRangeToContainedSlotRangeResp</span></a></span><span> </span><span class="annot"><span class="annottext">(Either SlotConversionError SlotRange -&gt; PABResp)
-&gt; (SlotRange -&gt; Either SlotConversionError SlotRange)
-&gt; SlotRange
-&gt; PABResp
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">SlotRange -&gt; Either SlotConversionError SlotRange
forall a b. b -&gt; Either a b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RequestHandler effs POSIXTimeRange SlotRange
forall (effs :: [* -&gt; *]).
(Member NodeClientEffect effs,
 Member (LogObserve (LogMessage Text)) effs) =&gt;
RequestHandler effs POSIXTimeRange SlotRange
</span><a href="Plutus.Contract.Trace.RequestHandler.html#handleTimeToSlotConversions"><span class="hs-identifier hs-var">RequestHandler.handleTimeToSlotConversions</span></a></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span id="local-6989586621680829116"><span class="annot"><a href="Plutus.Contract.Trace.html#handleUnbalancedTransactions"><span class="hs-identifier hs-type">handleUnbalancedTransactions</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829116"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.LogMessages.html#RequestHandlerLogMsg"><span class="hs-identifier hs-type">RequestHandlerLogMsg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829116"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Effects.html#WalletEffect"><span class="hs-identifier hs-type">WalletEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829116"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier hs-type">RequestHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829116"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span></span><span>
</span><span id="line-172"></span><span id="handleUnbalancedTransactions"><span class="annot"><span class="annottext">handleUnbalancedTransactions :: RequestHandler effs PABReq PABResp
</span><a href="Plutus.Contract.Trace.html#handleUnbalancedTransactions"><span class="hs-identifier hs-var hs-var">handleUnbalancedTransactions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-173"></span><span>    </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe UnbalancedTx)
-&gt; (Either WalletAPIError CardanoTx -&gt; PABResp)
-&gt; RequestHandler
     effs UnbalancedTx (Either WalletAPIError CardanoTx)
-&gt; RequestHandler effs PABReq PABResp
forall (effs :: [* -&gt; *]) req req' resp resp'.
(req' -&gt; Maybe req)
-&gt; (resp -&gt; resp')
-&gt; RequestHandler effs req resp
-&gt; RequestHandler effs req' resp'
</span><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier hs-var">generalise</span></a></span><span>
</span><span id="line-174"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First UnbalancedTx) PABReq UnbalancedTx
-&gt; PABReq -&gt; Maybe UnbalancedTx
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First UnbalancedTx) PABReq UnbalancedTx
Prism' PABReq UnbalancedTx
</span><a href="Plutus.Contract.Effects.html#_BalanceTxReq"><span class="hs-identifier hs-var">E._BalanceTxReq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BalanceTxResponse -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#BalanceTxResp"><span class="hs-identifier hs-var">E.BalanceTxResp</span></a></span><span> </span><span class="annot"><span class="annottext">(BalanceTxResponse -&gt; PABResp)
-&gt; (Either WalletAPIError CardanoTx -&gt; BalanceTxResponse)
-&gt; Either WalletAPIError CardanoTx
-&gt; PABResp
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(WalletAPIError -&gt; BalanceTxResponse)
-&gt; (CardanoTx -&gt; BalanceTxResponse)
-&gt; Either WalletAPIError CardanoTx
-&gt; BalanceTxResponse
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="annot"><span class="annottext">WalletAPIError -&gt; BalanceTxResponse
</span><a href="Plutus.Contract.Effects.html#BalanceTxFailed"><span class="hs-identifier hs-var">E.BalanceTxFailed</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx -&gt; BalanceTxResponse
</span><a href="Plutus.Contract.Effects.html#BalanceTxSuccess"><span class="hs-identifier hs-var">E.BalanceTxSuccess</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>        </span><span class="annot"><span class="annottext">RequestHandler effs UnbalancedTx (Either WalletAPIError CardanoTx)
forall (effs :: [* -&gt; *]).
(Member WalletEffect effs,
 Member (LogObserve (LogMessage Text)) effs,
 Member (LogMsg RequestHandlerLogMsg) effs) =&gt;
RequestHandler effs UnbalancedTx (Either WalletAPIError CardanoTx)
</span><a href="Plutus.Contract.Trace.RequestHandler.html#handleUnbalancedTransactions"><span class="hs-identifier hs-var">RequestHandler.handleUnbalancedTransactions</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="hs-comment">-- | Submit the wallet's pending transactions to the blockchain.</span><span>
</span><span id="line-179"></span><span id="local-6989586621680829109"><span class="annot"><a href="Plutus.Contract.Trace.html#handlePendingTransactions"><span class="hs-identifier hs-type">handlePendingTransactions</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-180"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829109"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.LogMessages.html#RequestHandlerLogMsg"><span class="hs-identifier hs-type">RequestHandlerLogMsg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829109"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Effects.html#WalletEffect"><span class="hs-identifier hs-type">WalletEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829109"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier hs-type">RequestHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829109"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span></span><span>
</span><span id="line-185"></span><span id="handlePendingTransactions"><span class="annot"><span class="annottext">handlePendingTransactions :: RequestHandler effs PABReq PABResp
</span><a href="Plutus.Contract.Trace.html#handlePendingTransactions"><span class="hs-identifier hs-var hs-var">handlePendingTransactions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe CardanoTx)
-&gt; (Either WalletAPIError CardanoTx -&gt; PABResp)
-&gt; RequestHandler effs CardanoTx (Either WalletAPIError CardanoTx)
-&gt; RequestHandler effs PABReq PABResp
forall (effs :: [* -&gt; *]) req req' resp resp'.
(req' -&gt; Maybe req)
-&gt; (resp -&gt; resp')
-&gt; RequestHandler effs req resp
-&gt; RequestHandler effs req' resp'
</span><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier hs-var">generalise</span></a></span><span>
</span><span id="line-187"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First CardanoTx) PABReq CardanoTx
-&gt; PABReq -&gt; Maybe CardanoTx
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First CardanoTx) PABReq CardanoTx
Prism' PABReq CardanoTx
</span><a href="Plutus.Contract.Effects.html#_WriteBalancedTxReq"><span class="hs-identifier hs-var">E._WriteBalancedTxReq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WriteBalancedTxResponse -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#WriteBalancedTxResp"><span class="hs-identifier hs-var">E.WriteBalancedTxResp</span></a></span><span> </span><span class="annot"><span class="annottext">(WriteBalancedTxResponse -&gt; PABResp)
-&gt; (Either WalletAPIError CardanoTx -&gt; WriteBalancedTxResponse)
-&gt; Either WalletAPIError CardanoTx
-&gt; PABResp
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(WalletAPIError -&gt; WriteBalancedTxResponse)
-&gt; (CardanoTx -&gt; WriteBalancedTxResponse)
-&gt; Either WalletAPIError CardanoTx
-&gt; WriteBalancedTxResponse
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="annot"><span class="annottext">WalletAPIError -&gt; WriteBalancedTxResponse
</span><a href="Plutus.Contract.Effects.html#WriteBalancedTxFailed"><span class="hs-identifier hs-var">E.WriteBalancedTxFailed</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx -&gt; WriteBalancedTxResponse
</span><a href="Plutus.Contract.Effects.html#WriteBalancedTxSuccess"><span class="hs-identifier hs-var">E.WriteBalancedTxSuccess</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>        </span><span class="annot"><span class="annottext">RequestHandler effs CardanoTx (Either WalletAPIError CardanoTx)
forall (effs :: [* -&gt; *]).
(Member WalletEffect effs,
 Member (LogObserve (LogMessage Text)) effs,
 Member (LogMsg RequestHandlerLogMsg) effs) =&gt;
RequestHandler effs CardanoTx (Either WalletAPIError CardanoTx)
</span><a href="Plutus.Contract.Trace.RequestHandler.html#handlePendingTransactions"><span class="hs-identifier hs-var">RequestHandler.handlePendingTransactions</span></a></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span id="local-6989586621680829103"><span class="annot"><a href="Plutus.Contract.Trace.html#handleChainIndexQueries"><span class="hs-identifier hs-type">handleChainIndexQueries</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829103"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-chain-index-core/html/src"><span class="hs-identifier hs-type">ChainIndexQueryEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829103"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier hs-type">RequestHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829103"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span></span><span>
</span><span id="line-196"></span><span id="handleChainIndexQueries"><span class="annot"><span class="annottext">handleChainIndexQueries :: RequestHandler effs PABReq PABResp
</span><a href="Plutus.Contract.Trace.html#handleChainIndexQueries"><span class="hs-identifier hs-var hs-var">handleChainIndexQueries</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-197"></span><span>    </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe ChainIndexQuery)
-&gt; (ChainIndexResponse -&gt; PABResp)
-&gt; RequestHandler effs ChainIndexQuery ChainIndexResponse
-&gt; RequestHandler effs PABReq PABResp
forall (effs :: [* -&gt; *]) req req' resp resp'.
(req' -&gt; Maybe req)
-&gt; (resp -&gt; resp')
-&gt; RequestHandler effs req resp
-&gt; RequestHandler effs req' resp'
</span><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier hs-var">generalise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First ChainIndexQuery) PABReq ChainIndexQuery
-&gt; PABReq -&gt; Maybe ChainIndexQuery
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First ChainIndexQuery) PABReq ChainIndexQuery
Prism' PABReq ChainIndexQuery
</span><a href="Plutus.Contract.Effects.html#_ChainIndexQueryReq"><span class="hs-identifier hs-var">E._ChainIndexQueryReq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>               </span><span class="annot"><span class="annottext">ChainIndexResponse -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#ChainIndexQueryResp"><span class="hs-identifier hs-var">E.ChainIndexQueryResp</span></a></span><span>
</span><span id="line-199"></span><span>               </span><span class="annot"><span class="annottext">RequestHandler effs ChainIndexQuery ChainIndexResponse
forall (effs :: [* -&gt; *]).
(Member (LogObserve (LogMessage Text)) effs,
 Member ChainIndexQueryEffect effs) =&gt;
RequestHandler effs ChainIndexQuery ChainIndexResponse
</span><a href="Plutus.Contract.Trace.RequestHandler.html#handleChainIndexQueries"><span class="hs-identifier hs-var">RequestHandler.handleChainIndexQueries</span></a></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span id="local-6989586621680829099"><span class="annot"><a href="Plutus.Contract.Trace.html#handleOwnAddressesQueries"><span class="hs-identifier hs-type">handleOwnAddressesQueries</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829099"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Effects.html#WalletEffect"><span class="hs-identifier hs-type">WalletEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829099"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier hs-type">RequestHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829099"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span></span><span>
</span><span id="line-206"></span><span id="handleOwnAddressesQueries"><span class="annot"><span class="annottext">handleOwnAddressesQueries :: RequestHandler effs PABReq PABResp
</span><a href="Plutus.Contract.Trace.html#handleOwnAddressesQueries"><span class="hs-identifier hs-var hs-var">handleOwnAddressesQueries</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-207"></span><span>    </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe ())
-&gt; (NonEmpty CardanoAddress -&gt; PABResp)
-&gt; RequestHandler effs () (NonEmpty CardanoAddress)
-&gt; RequestHandler effs PABReq PABResp
forall (effs :: [* -&gt; *]) req req' resp resp'.
(req' -&gt; Maybe req)
-&gt; (resp -&gt; resp')
-&gt; RequestHandler effs req resp
-&gt; RequestHandler effs req' resp'
</span><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier hs-var">generalise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First ()) PABReq () -&gt; PABReq -&gt; Maybe ()
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First ()) PABReq ()
Prism' PABReq ()
</span><a href="Plutus.Contract.Effects.html#_OwnAddressesReq"><span class="hs-identifier hs-var">E._OwnAddressesReq</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmpty CardanoAddress -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#OwnAddressesResp"><span class="hs-identifier hs-var">E.OwnAddressesResp</span></a></span><span> </span><span class="annot"><span class="annottext">RequestHandler effs () (NonEmpty CardanoAddress)
forall a (effs :: [* -&gt; *]).
(Member WalletEffect effs,
 Member (LogObserve (LogMessage Text)) effs) =&gt;
RequestHandler effs a (NonEmpty CardanoAddress)
</span><a href="Plutus.Contract.Trace.RequestHandler.html#handleOwnAddresses"><span class="hs-identifier hs-var">RequestHandler.handleOwnAddresses</span></a></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span id="local-6989586621680829095"><span class="annot"><a href="Plutus.Contract.Trace.html#handleOwnInstanceIdQueries"><span class="hs-identifier hs-type">handleOwnInstanceIdQueries</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829095"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Reader</span></a></span><span> </span><span class="annot"><a href="Wallet.Types.html#ContractInstanceId"><span class="hs-identifier hs-type">ContractInstanceId</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829095"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-212"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier hs-type">RequestHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829095"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span></span><span>
</span><span id="line-214"></span><span id="handleOwnInstanceIdQueries"><span class="annot"><span class="annottext">handleOwnInstanceIdQueries :: RequestHandler effs PABReq PABResp
</span><a href="Plutus.Contract.Trace.html#handleOwnInstanceIdQueries"><span class="hs-identifier hs-var hs-var">handleOwnInstanceIdQueries</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe ())
-&gt; (ContractInstanceId -&gt; PABResp)
-&gt; RequestHandler effs () ContractInstanceId
-&gt; RequestHandler effs PABReq PABResp
forall (effs :: [* -&gt; *]) req req' resp resp'.
(req' -&gt; Maybe req)
-&gt; (resp -&gt; resp')
-&gt; RequestHandler effs req resp
-&gt; RequestHandler effs req' resp'
</span><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier hs-var">generalise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First ()) PABReq () -&gt; PABReq -&gt; Maybe ()
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First ()) PABReq ()
Prism' PABReq ()
</span><a href="Plutus.Contract.Effects.html#_OwnContractInstanceIdReq"><span class="hs-identifier hs-var">E._OwnContractInstanceIdReq</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ContractInstanceId -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#OwnContractInstanceIdResp"><span class="hs-identifier hs-var">E.OwnContractInstanceIdResp</span></a></span><span> </span><span class="annot"><span class="annottext">RequestHandler effs () ContractInstanceId
forall (effs :: [* -&gt; *]) a.
(Member (LogObserve (LogMessage Text)) effs,
 Member (Reader ContractInstanceId) effs) =&gt;
RequestHandler effs a ContractInstanceId
</span><a href="Plutus.Contract.Trace.RequestHandler.html#handleOwnInstanceIdQueries"><span class="hs-identifier hs-var">RequestHandler.handleOwnInstanceIdQueries</span></a></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span id="local-6989586621680829091"><span class="annot"><a href="Plutus.Contract.Trace.html#handleYieldedUnbalancedTx"><span class="hs-identifier hs-type">handleYieldedUnbalancedTx</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-218"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829091"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Effects.html#WalletEffect"><span class="hs-identifier hs-type">WalletEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829091"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-220"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier hs-type">RequestHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829091"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span></span><span>
</span><span id="line-222"></span><span id="handleYieldedUnbalancedTx"><span class="annot"><span class="annottext">handleYieldedUnbalancedTx :: RequestHandler effs PABReq PABResp
</span><a href="Plutus.Contract.Trace.html#handleYieldedUnbalancedTx"><span class="hs-identifier hs-var hs-var">handleYieldedUnbalancedTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe UnbalancedTx)
-&gt; (() -&gt; PABResp)
-&gt; RequestHandler effs UnbalancedTx ()
-&gt; RequestHandler effs PABReq PABResp
forall (effs :: [* -&gt; *]) req req' resp resp'.
(req' -&gt; Maybe req)
-&gt; (resp -&gt; resp')
-&gt; RequestHandler effs req resp
-&gt; RequestHandler effs req' resp'
</span><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier hs-var">generalise</span></a></span><span>
</span><span id="line-224"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First UnbalancedTx) PABReq UnbalancedTx
-&gt; PABReq -&gt; Maybe UnbalancedTx
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First UnbalancedTx) PABReq UnbalancedTx
Prism' PABReq UnbalancedTx
</span><a href="Plutus.Contract.Effects.html#_YieldUnbalancedTxReq"><span class="hs-identifier hs-var">E._YieldUnbalancedTxReq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>        </span><span class="annot"><span class="annottext">() -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#YieldUnbalancedTxResp"><span class="hs-identifier hs-var">E.YieldUnbalancedTxResp</span></a></span><span>
</span><span id="line-226"></span><span>        </span><span class="annot"><span class="annottext">RequestHandler effs UnbalancedTx ()
forall (effs :: [* -&gt; *]).
(Member WalletEffect effs,
 Member (LogObserve (LogMessage Text)) effs) =&gt;
RequestHandler effs UnbalancedTx ()
</span><a href="Plutus.Contract.Trace.RequestHandler.html#handleYieldedUnbalancedTx"><span class="hs-identifier hs-var">RequestHandler.handleYieldedUnbalancedTx</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span id="local-6989586621680829087"><span class="annot"><a href="Plutus.Contract.Trace.html#handleAdjustUnbalancedTx"><span class="hs-identifier hs-type">handleAdjustUnbalancedTx</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-229"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829087"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-230"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.LogMessages.html#RequestHandlerLogMsg"><span class="hs-identifier hs-type">RequestHandlerLogMsg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829087"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-231"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Effects.html#NodeClientEffect"><span class="hs-identifier hs-type">NodeClientEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829087"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier hs-type">RequestHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829087"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span></span><span>
</span><span id="line-234"></span><span id="handleAdjustUnbalancedTx"><span class="annot"><span class="annottext">handleAdjustUnbalancedTx :: RequestHandler effs PABReq PABResp
</span><a href="Plutus.Contract.Trace.html#handleAdjustUnbalancedTx"><span class="hs-identifier hs-var hs-var">handleAdjustUnbalancedTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-235"></span><span>    </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe UnbalancedTx)
-&gt; (Either ToCardanoError UnbalancedTx -&gt; PABResp)
-&gt; RequestHandler
     effs UnbalancedTx (Either ToCardanoError UnbalancedTx)
-&gt; RequestHandler effs PABReq PABResp
forall (effs :: [* -&gt; *]) req req' resp resp'.
(req' -&gt; Maybe req)
-&gt; (resp -&gt; resp')
-&gt; RequestHandler effs req resp
-&gt; RequestHandler effs req' resp'
</span><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier hs-var">generalise</span></a></span><span>
</span><span id="line-236"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First UnbalancedTx) PABReq UnbalancedTx
-&gt; PABReq -&gt; Maybe UnbalancedTx
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First UnbalancedTx) PABReq UnbalancedTx
Prism' PABReq UnbalancedTx
</span><a href="Plutus.Contract.Effects.html#_AdjustUnbalancedTxReq"><span class="hs-identifier hs-var">E._AdjustUnbalancedTxReq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>        </span><span class="annot"><span class="annottext">Either ToCardanoError UnbalancedTx -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#AdjustUnbalancedTxResp"><span class="hs-identifier hs-var">E.AdjustUnbalancedTxResp</span></a></span><span>
</span><span id="line-238"></span><span>        </span><span class="annot"><span class="annottext">RequestHandler
  effs UnbalancedTx (Either ToCardanoError UnbalancedTx)
forall (effs :: [* -&gt; *]).
(Member (LogObserve (LogMessage Text)) effs,
 Member (LogMsg RequestHandlerLogMsg) effs,
 Member NodeClientEffect effs) =&gt;
RequestHandler
  effs UnbalancedTx (Either ToCardanoError UnbalancedTx)
</span><a href="Plutus.Contract.Trace.RequestHandler.html#handleAdjustUnbalancedTx"><span class="hs-identifier hs-var">RequestHandler.handleAdjustUnbalancedTx</span></a></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span id="local-6989586621680829083"><span class="annot"><a href="Plutus.Contract.Trace.html#handleGetParams"><span class="hs-identifier hs-type">handleGetParams</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680829083"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Effects.html#NodeClientEffect"><span class="hs-identifier hs-type">NodeClientEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829083"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.RequestHandler.html#RequestHandler"><span class="hs-identifier hs-type">RequestHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829083"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span></span><span>
</span><span id="line-245"></span><span id="handleGetParams"><span class="annot"><span class="annottext">handleGetParams :: RequestHandler effs PABReq PABResp
</span><a href="Plutus.Contract.Trace.html#handleGetParams"><span class="hs-identifier hs-var hs-var">handleGetParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-246"></span><span>    </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe ())
-&gt; (Params -&gt; PABResp)
-&gt; RequestHandler effs () Params
-&gt; RequestHandler effs PABReq PABResp
forall (effs :: [* -&gt; *]) req req' resp resp'.
(req' -&gt; Maybe req)
-&gt; (resp -&gt; resp')
-&gt; RequestHandler effs req resp
-&gt; RequestHandler effs req' resp'
</span><a href="Plutus.Contract.Trace.RequestHandler.html#generalise"><span class="hs-identifier hs-var">generalise</span></a></span><span>
</span><span id="line-247"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First ()) PABReq () -&gt; PABReq -&gt; Maybe ()
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First ()) PABReq ()
Prism' PABReq ()
</span><a href="Plutus.Contract.Effects.html#_GetParamsReq"><span class="hs-identifier hs-var">E._GetParamsReq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>        </span><span class="annot"><span class="annottext">Params -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#GetParamsResp"><span class="hs-identifier hs-var">E.GetParamsResp</span></a></span><span>
</span><span id="line-249"></span><span>        </span><span class="annot"><span class="annottext">RequestHandler effs () Params
forall (effs :: [* -&gt; *]).
(Member (LogObserve (LogMessage Text)) effs,
 Member NodeClientEffect effs) =&gt;
RequestHandler effs () Params
</span><a href="Plutus.Contract.Trace.RequestHandler.html#handleGetParams"><span class="hs-identifier hs-var">RequestHandler.handleGetParams</span></a></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="annot"><a href="Plutus.Contract.Trace.html#defaultDist"><span class="hs-identifier hs-type">defaultDist</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#InitialDistribution"><span class="hs-identifier hs-type">InitialDistribution</span></a></span><span>
</span><span id="line-252"></span><span id="defaultDist"><span class="annot"><span class="annottext">defaultDist :: InitialDistribution
</span><a href="Plutus.Contract.Trace.html#defaultDist"><span class="hs-identifier hs-var hs-var">defaultDist</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Wallet] -&gt; InitialDistribution
</span><a href="Plutus.Contract.Trace.html#defaultDistFor"><span class="hs-identifier hs-var">defaultDistFor</span></a></span><span> </span><span class="annot"><span class="annottext">[Wallet]
</span><a href="Wallet.Emulator.Wallet.html#knownWallets"><span class="hs-identifier hs-var">EM.knownWallets</span></a></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="annot"><a href="Plutus.Contract.Trace.html#defaultDistFor"><span class="hs-identifier hs-type">defaultDistFor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">EM.Wallet</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Trace.html#InitialDistribution"><span class="hs-identifier hs-type">InitialDistribution</span></a></span><span>
</span><span id="line-255"></span><span id="defaultDistFor"><span class="annot"><span class="annottext">defaultDistFor :: [Wallet] -&gt; InitialDistribution
</span><a href="Plutus.Contract.Trace.html#defaultDistFor"><span class="hs-identifier hs-var hs-var">defaultDistFor</span></a></span></span><span> </span><span id="local-6989586621680829079"><span class="annot"><span class="annottext">[Wallet]
</span><a href="#local-6989586621680829079"><span class="hs-identifier hs-var">wallets</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Wallet, Value)] -&gt; InitialDistribution
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-var">Map.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([(Wallet, Value)] -&gt; InitialDistribution)
-&gt; [(Wallet, Value)] -&gt; InitialDistribution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Wallet] -&gt; [Value] -&gt; [(Wallet, Value)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[Wallet]
</span><a href="#local-6989586621680829079"><span class="hs-identifier hs-var">wallets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; [Value]
forall a. a -&gt; [a]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">repeat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Value
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Ada.lovelaceValueOf</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100_000_000</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span id="_HookError"><span id="_TContractError"><span id="_TraceAssertionError"><span id="_TraceError"><span id="local-6989586621680829065"><span id="local-6989586621680829067"><span id="local-6989586621680829069"><span id="local-6989586621680829071"><span id="local-6989586621680829073"><span id="local-6989586621680829074"><span id="local-6989586621680829075"><span id="AsTraceError"><span id="local-6989586621680829249"><span id="local-6989586621680829251"><span class="hs-identifier">makeClassyPrisms</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">TraceError</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span id="local-6989586621680829059"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680829056"><span class="annot"><a href="Plutus.Contract.Error.html#AsAssertionError"><span class="hs-identifier hs-type">EM.AsAssertionError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Trace.html#TraceError"><span class="hs-identifier hs-type">TraceError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680829059"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-260"></span><span>    </span><span id="local-6989586621680829054"><span class="annot"><span class="annottext">_AssertionError :: p AssertionError (f AssertionError)
-&gt; p (TraceError e) (f (TraceError e))
</span><a href="Plutus.Contract.Error.html#_AssertionError"><span class="hs-identifier hs-var hs-var hs-var hs-var">_AssertionError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">p AssertionError (f AssertionError)
-&gt; p (TraceError e) (f (TraceError e))
forall r e. AsTraceError r e =&gt; Prism' r AssertionError
</span><a href="Plutus.Contract.Trace.html#_TraceAssertionError"><span class="hs-identifier hs-var">_TraceAssertionError</span></a></span></span><span>
</span><span id="line-261"></span></pre></body></html>
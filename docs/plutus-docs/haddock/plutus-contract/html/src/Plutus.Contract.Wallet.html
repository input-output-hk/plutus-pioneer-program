<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BlockArguments     #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds          #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass     #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts   #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances  #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase         #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE MonoLocalBinds     #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns     #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings  #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes         #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications   #-}</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- | Turn 'UnbalancedTx' values into transactions using the</span><span>
</span><span id="line-14"></span><span class="hs-comment">--   wallet API.</span><span>
</span><span id="line-15"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Plutus.Contract.Wallet</span><span class="hs-special">(</span><span>
</span><span id="line-16"></span><span>      </span><span class="annot"><a href="Wallet.Effects.html#balanceTx"><span class="hs-identifier">balanceTx</span></a></span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#handleTx"><span class="hs-identifier">handleTx</span></a></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Effects.html#yieldUnbalancedTx"><span class="hs-identifier">yieldUnbalancedTx</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#getUnspentOutput"><span class="hs-identifier">getUnspentOutput</span></a></span><span>
</span><span id="line-20"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.API.html#signTxAndSubmit"><span class="hs-identifier">WAPI.signTxAndSubmit</span></a></span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Exporting transactions</span></span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTx"><span class="hs-identifier">ExportTx</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxInput"><span class="hs-identifier">ExportTxInput</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxRedeemer"><span class="hs-identifier">ExportTxRedeemer</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#export"><span class="hs-keyword">export</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier">Cardano.Api</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">Cardano.Node.Emulator.Params</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">Params</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">emulatorPParams</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">pNetworkId</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">Cardano.Node.Emulator.Validation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">CardanoLedgerError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">makeTransactionBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Applicative</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(&lt;|&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(&gt;=&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">Control.Monad.Error.Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">throwing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Eff</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Member</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Error</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">throwError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">FromJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">parseJSON</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">Object</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">ToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">toJSON</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">Value</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">String</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">object</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">withObject</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator">(.:)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator">(.=)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Data.Aeson.Extras</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">JSON</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">Data.Aeson.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">Parser</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">parseFail</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Bifunctor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Bifunctor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">bimap</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">first</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">mapMaybe</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/vpm50j3dwjzfg00shy71mwawvv796qgi-openapi3-lib-openapi3-3.2.3-haddock-doc/share/doc/openapi3/html/src"><span class="hs-identifier">Data.OpenApi</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OpenApi</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Typeable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Void</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Void</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Generics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">DCert</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">Redeemer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">StakingCredential</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">toPlutusAddress</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">txRedeemers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">ScriptPurpose</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Ada</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ada</span></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier">Ledger.Constraints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier">UnbalancedTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier">UnbalancedCardanoTx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier">UnbalancedEmulatorTx</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier">mustPayToAddress</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">CardanoTx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">TxId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">TxId</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">TxOutRef</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">getCardanoTxInputs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">txInRef</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Tx.CardanoAPI</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">fromPlutusIndex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Value</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">currencyMPSHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-chain-index-core/html/src"><span class="hs-identifier">Plutus.Contract.CardanoAPI</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CardanoAPI</span></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Error.html"><span class="hs-identifier">Plutus.Contract.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Error.html#AsContractError"><span class="hs-identifier">AsContractError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Error.html#_OtherContractError"><span class="hs-identifier">_OtherContractError</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Request.html"><span class="hs-identifier">Plutus.Contract.Request</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Contract</span></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html"><span class="hs-identifier">Plutus.Contract.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Types.html#Contract"><span class="hs-identifier">Contract</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">Plutus.V1.Ledger.Api</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Plutus</span></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">Plutus.V1.Ledger.Scripts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">MintingPolicyHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier">PlutusTx</span></a></span><span> </span><span class="hs-keyword">qualified</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.API.html"><span class="hs-identifier">Wallet.API</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">WAPI</span></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Effects.html"><span class="hs-identifier">Wallet.Effects</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Effects.html#WalletEffect"><span class="hs-identifier">WalletEffect</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Effects.html#balanceTx"><span class="hs-identifier">balanceTx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Effects.html#yieldUnbalancedTx"><span class="hs-identifier">yieldUnbalancedTx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.Error.html"><span class="hs-identifier">Wallet.Emulator.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.Error.html#WalletAPIError"><span class="hs-identifier">WalletAPIError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-comment">{- Note [Submitting transactions from Plutus contracts]

'UnbalancedTx' is the type of transactions that meet some set of constraints
(produced by 'Ledger.Constraints.OffChain.mkTx'), but can't be submitted to
the ledger yet because they may not be balanced and they lack signatures and
fee payments. To turn an 'UnbalancedTx' value into a valid transaction that can
be submitted to the network, the contract backend needs to

* Balance it.
  If the total value of 'txInputs' + the 'txMint' field is
  greater than the total value of 'txOutputs', then one or more public key
  outputs need to be added. How many and what addresses they are is up
  to the wallet (probably configurable).
  If the total balance 'txInputs' + the 'txMint' field is less than
  the total value of 'txOutputs', then one or more public key inputs need
  to be added (and potentially some outputs for the change).

* Compute fees.
  Once the final size of the transaction is known, the fees for the transaction
  can be computed. The transaction fee needs to be paid for with additional
  inputs so I assume that this step and the previous step will be combined.

  Also note that even if the 'UnbalancedTx' that we get from the contract
  endpoint happens to be balanced already, we still need to add fees to it. So
  we can't skip the balancing &amp; fee computation step.

  Balancing and coin selection will eventually be performed by the wallet
  backend.

* Sign it.
  The signing process needs to provide signatures for all public key
  inputs in the balanced transaction.

-}</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-comment">-- | Balance an unabalanced transaction, sign it, and submit</span><span>
</span><span id="line-103"></span><span class="hs-comment">--   it to the chain in the context of a wallet.</span><span>
</span><span id="line-104"></span><span id="local-6989586621680826423"><span class="annot"><a href="Plutus.Contract.Wallet.html#handleTx"><span class="hs-identifier hs-type">handleTx</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Effects.html#WalletEffect"><span class="hs-identifier hs-type">WalletEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680826423"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Error.html#WalletAPIError"><span class="hs-identifier hs-type">WalletAPIError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680826423"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-type">UnbalancedTx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680826423"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">CardanoTx</span></a></span></span><span>
</span><span id="line-109"></span><span id="handleTx"><span class="annot"><span class="annottext">handleTx :: UnbalancedTx -&gt; Eff effs CardanoTx
</span><a href="Plutus.Contract.Wallet.html#handleTx"><span class="hs-identifier hs-var hs-var">handleTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnbalancedTx -&gt; Eff effs (Either WalletAPIError CardanoTx)
forall (effs :: [* -&gt; *]).
Member WalletEffect effs =&gt;
UnbalancedTx -&gt; Eff effs (Either WalletAPIError CardanoTx)
</span><a href="Wallet.Effects.html#balanceTx"><span class="hs-identifier hs-var">balanceTx</span></a></span><span> </span><span class="annot"><span class="annottext">(UnbalancedTx -&gt; Eff effs (Either WalletAPIError CardanoTx))
-&gt; (Either WalletAPIError CardanoTx -&gt; Eff effs CardanoTx)
-&gt; UnbalancedTx
-&gt; Eff effs CardanoTx
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;=&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(WalletAPIError -&gt; Eff effs CardanoTx)
-&gt; (CardanoTx -&gt; Eff effs CardanoTx)
-&gt; Either WalletAPIError CardanoTx
-&gt; Eff effs CardanoTx
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="annot"><span class="annottext">WalletAPIError -&gt; Eff effs CardanoTx
forall e (effs :: [* -&gt; *]) a.
Member (Error e) effs =&gt;
e -&gt; Eff effs a
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx -&gt; Eff effs CardanoTx
forall (effs :: [* -&gt; *]).
Member WalletEffect effs =&gt;
CardanoTx -&gt; Eff effs CardanoTx
</span><a href="Wallet.API.html#signTxAndSubmit"><span class="hs-identifier hs-var">WAPI.signTxAndSubmit</span></a></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-comment">-- | Get an unspent output belonging to the wallet.</span><span>
</span><span id="line-112"></span><span id="local-6989586621680826419"><span id="local-6989586621680826420"><span id="local-6989586621680826421"><span class="annot"><a href="Plutus.Contract.Wallet.html#getUnspentOutput"><span class="hs-identifier hs-type">getUnspentOutput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Contract.Error.html#AsContractError"><span class="hs-identifier hs-type">AsContractError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680826421"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html#Contract"><span class="hs-identifier hs-type">Contract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680826420"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680826419"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680826421"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">TxOutRef</span></a></span></span></span></span><span>
</span><span id="line-113"></span><span id="getUnspentOutput"><span class="annot"><span class="annottext">getUnspentOutput :: Contract w s e TxOutRef
</span><a href="Plutus.Contract.Wallet.html#getUnspentOutput"><span class="hs-identifier hs-var hs-var">getUnspentOutput</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-114"></span><span>    </span><span id="local-6989586621680826418"><span class="annot"><span class="annottext">CardanoAddress
</span><a href="#local-6989586621680826418"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Contract w s e CardanoAddress
forall w (s :: Row *) e.
AsContractError e =&gt;
Contract w s e CardanoAddress
</span><a href="Plutus.Contract.Request.html#ownAddress"><span class="hs-identifier hs-var">Contract.ownAddress</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680826416"><span class="annot"><span class="annottext">constraints :: TxConstraints Void Void
</span><a href="#local-6989586621680826416"><span class="hs-identifier hs-var hs-var">constraints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Address -&gt; Value -&gt; TxConstraints Void Void
forall i o. Address -&gt; Value -&gt; TxConstraints i o
</span><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-var">mustPayToAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoAddress -&gt; Address
forall era. AddressInEra era -&gt; Address
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">toPlutusAddress</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoAddress
</span><a href="#local-6989586621680826418"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Value
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Ada.lovelaceValueOf</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>    </span><span id="local-6989586621680826414"><span class="annot"><span class="annottext">UnbalancedTx
</span><a href="#local-6989586621680826414"><span class="hs-identifier hs-var">utx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ScriptLookups Void
-&gt; TxConstraints (RedeemerType Void) (DatumType Void)
-&gt; Contract w s e UnbalancedTx
forall a w (s :: Row *) e.
(ToData (RedeemerType a), FromData (DatumType a),
 ToData (DatumType a), AsContractError e) =&gt;
ScriptLookups a
-&gt; TxConstraints (RedeemerType a) (DatumType a)
-&gt; Contract w s e UnbalancedTx
</span><a href="Plutus.Contract.Request.html#mkTxConstraints"><span class="hs-identifier hs-var">Contract.mkTxConstraints</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Void</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptLookups Void
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">TxConstraints Void Void
TxConstraints (RedeemerType Void) (DatumType Void)
</span><a href="#local-6989586621680826416"><span class="hs-identifier hs-var">constraints</span></a></span><span>
</span><span id="line-117"></span><span>    </span><span id="local-6989586621680826412"><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680826412"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UnbalancedTx -&gt; Contract w s e UnbalancedTx
forall w (s :: Row *) e.
AsContractError e =&gt;
UnbalancedTx -&gt; Contract w s e UnbalancedTx
</span><a href="Plutus.Contract.Request.html#adjustUnbalancedTx"><span class="hs-identifier hs-var">Contract.adjustUnbalancedTx</span></a></span><span> </span><span class="annot"><span class="annottext">UnbalancedTx
</span><a href="#local-6989586621680826414"><span class="hs-identifier hs-var">utx</span></a></span><span> </span><span class="annot"><span class="annottext">Contract w s e UnbalancedTx
-&gt; (UnbalancedTx -&gt; Contract w s e CardanoTx)
-&gt; Contract w s e CardanoTx
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">UnbalancedTx -&gt; Contract w s e CardanoTx
forall w (s :: Row *) e.
AsContractError e =&gt;
UnbalancedTx -&gt; Contract w s e CardanoTx
</span><a href="Plutus.Contract.Request.html#balanceTx"><span class="hs-identifier hs-var">Contract.balanceTx</span></a></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CardanoTx -&gt; [TxIn]
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">getCardanoTxInputs</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680826412"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-119"></span><span>        </span><span id="local-6989586621680826409"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621680826409"><span class="hs-identifier hs-var">inp</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxOutRef -&gt; Contract w s e TxOutRef
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOutRef -&gt; Contract w s e TxOutRef)
-&gt; TxOutRef -&gt; Contract w s e TxOutRef
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; TxOutRef
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var hs-var">txInRef</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621680826409"><span class="hs-identifier hs-var">inp</span></a></span><span>
</span><span id="line-120"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AReview e Text -&gt; Text -&gt; Contract w s e TxOutRef
forall e (m :: * -&gt; *) t x.
MonadError e m =&gt;
AReview e t -&gt; t -&gt; m x
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">throwing</span></a></span><span> </span><span class="annot"><span class="annottext">AReview e Text
forall r. AsContractError r =&gt; Prism' r Text
</span><a href="Plutus.Contract.Error.html#_OtherContractError"><span class="hs-identifier hs-var">_OtherContractError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Balanced transaction has no inputs&quot;</span></span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="hs-keyword">data</span><span> </span><span id="ExportTxRedeemerPurpose"><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxRedeemerPurpose"><span class="hs-identifier hs-var">ExportTxRedeemerPurpose</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Spending"><span class="annot"><a href="Plutus.Contract.Wallet.html#Spending"><span class="hs-identifier hs-var">Spending</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Minting"><span class="annot"><a href="Plutus.Contract.Wallet.html#Minting"><span class="hs-identifier hs-var">Minting</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Rewarding"><span class="annot"><a href="Plutus.Contract.Wallet.html#Rewarding"><span class="hs-identifier hs-var">Rewarding</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Certifying"><span class="annot"><a href="Plutus.Contract.Wallet.html#Certifying"><span class="hs-identifier hs-var">Certifying</span></a></span></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680826398"><span id="local-6989586621680826400"><span id="local-6989586621680826402"><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxRedeemerPurpose"><span class="hs-identifier hs-type">ExportTxRedeemerPurpose</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-125"></span><span>    </span><span id="local-6989586621680826396"><span class="annot"><span class="annottext">toJSON :: ExportTxRedeemerPurpose -&gt; Value
</span><a href="#local-6989586621680826396"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-126"></span><span>        </span><span class="annot"><span class="annottext">ExportTxRedeemerPurpose
</span><a href="Plutus.Contract.Wallet.html#Spending"><span class="hs-identifier hs-var">Spending</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">String</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;spending&quot;</span></span><span>
</span><span id="line-127"></span><span>        </span><span class="annot"><span class="annottext">ExportTxRedeemerPurpose
</span><a href="Plutus.Contract.Wallet.html#Minting"><span class="hs-identifier hs-var">Minting</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">String</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;minting&quot;</span></span><span>
</span><span id="line-128"></span><span>        </span><span class="annot"><span class="annottext">ExportTxRedeemerPurpose
</span><a href="Plutus.Contract.Wallet.html#Rewarding"><span class="hs-identifier hs-var">Rewarding</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">String</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;rewarding&quot;</span></span><span>
</span><span id="line-129"></span><span>        </span><span class="annot"><span class="annottext">ExportTxRedeemerPurpose
</span><a href="Plutus.Contract.Wallet.html#Certifying"><span class="hs-identifier hs-var">Certifying</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">String</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;certifying&quot;</span></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span id="local-6989586621680826394"><span id="local-6989586621680826395"></span></span><span class="hs-keyword">data</span><span> </span><span id="ExportTxRedeemer"><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxRedeemer"><span class="hs-identifier hs-var">ExportTxRedeemer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-132"></span><span>    </span><span id="SpendingRedeemer"><span class="annot"><a href="Plutus.Contract.Wallet.html#SpendingRedeemer"><span class="hs-identifier hs-var">SpendingRedeemer</span></a></span></span><span class="hs-special">{</span><span> </span><span id="redeemer"><span class="annot"><span class="annottext">ExportTxRedeemer -&gt; Redeemer
</span><a href="Plutus.Contract.Wallet.html#redeemer"><span class="hs-identifier hs-var hs-var">redeemer</span></a></span></span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Plutus.Redeemer</span></a></span><span class="hs-special">,</span><span> </span><span id="redeemerOutRef"><span class="annot"><span class="annottext">ExportTxRedeemer -&gt; TxOutRef
</span><a href="Plutus.Contract.Wallet.html#redeemerOutRef"><span class="hs-identifier hs-var hs-var">redeemerOutRef</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">TxOutRef</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="MintingRedeemer"><span class="annot"><a href="Plutus.Contract.Wallet.html#MintingRedeemer"><span class="hs-identifier hs-var">MintingRedeemer</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="redeemer"><span class="annot"><a href="Plutus.Contract.Wallet.html#redeemer"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Plutus.Redeemer</span></a></span><span class="hs-special">,</span><span> </span><span id="redeemerPolicyId"><span class="annot"><span class="annottext">ExportTxRedeemer -&gt; MintingPolicyHash
</span><a href="Plutus.Contract.Wallet.html#redeemerPolicyId"><span class="hs-identifier hs-var hs-var">redeemerPolicyId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">MintingPolicyHash</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="RewardingRedeemer"><span class="annot"><a href="Plutus.Contract.Wallet.html#RewardingRedeemer"><span class="hs-identifier hs-var">RewardingRedeemer</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="redeemer"><span class="annot"><a href="Plutus.Contract.Wallet.html#redeemer"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Plutus.Redeemer</span></a></span><span class="hs-special">,</span><span> </span><span id="redeemerStakingCredential"><span class="annot"><span class="annottext">ExportTxRedeemer -&gt; StakingCredential
</span><a href="Plutus.Contract.Wallet.html#redeemerStakingCredential"><span class="hs-identifier hs-var hs-var">redeemerStakingCredential</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">StakingCredential</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="CertifyingRedeemer"><span class="annot"><a href="Plutus.Contract.Wallet.html#CertifyingRedeemer"><span class="hs-identifier hs-var">CertifyingRedeemer</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="redeemer"><span class="annot"><a href="Plutus.Contract.Wallet.html#redeemer"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Plutus.Redeemer</span></a></span><span class="hs-special">,</span><span> </span><span id="redeemerDCert"><span class="annot"><span class="annottext">ExportTxRedeemer -&gt; DCert
</span><a href="Plutus.Contract.Wallet.html#redeemerDCert"><span class="hs-identifier hs-var hs-var">redeemerDCert</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680826381"><span id="local-6989586621680826383"><span class="annot"><span class="annottext">ExportTxRedeemer -&gt; ExportTxRedeemer -&gt; Bool
(ExportTxRedeemer -&gt; ExportTxRedeemer -&gt; Bool)
-&gt; (ExportTxRedeemer -&gt; ExportTxRedeemer -&gt; Bool)
-&gt; Eq ExportTxRedeemer
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ExportTxRedeemer -&gt; ExportTxRedeemer -&gt; Bool
$c/= :: ExportTxRedeemer -&gt; ExportTxRedeemer -&gt; Bool
== :: ExportTxRedeemer -&gt; ExportTxRedeemer -&gt; Bool
$c== :: ExportTxRedeemer -&gt; ExportTxRedeemer -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826374"><span id="local-6989586621680826376"><span id="local-6989586621680826378"><span class="annot"><span class="annottext">Int -&gt; ExportTxRedeemer -&gt; ShowS
[ExportTxRedeemer] -&gt; ShowS
ExportTxRedeemer -&gt; String
(Int -&gt; ExportTxRedeemer -&gt; ShowS)
-&gt; (ExportTxRedeemer -&gt; String)
-&gt; ([ExportTxRedeemer] -&gt; ShowS)
-&gt; Show ExportTxRedeemer
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ExportTxRedeemer] -&gt; ShowS
$cshowList :: [ExportTxRedeemer] -&gt; ShowS
show :: ExportTxRedeemer -&gt; String
$cshow :: ExportTxRedeemer -&gt; String
showsPrec :: Int -&gt; ExportTxRedeemer -&gt; ShowS
$cshowsPrec :: Int -&gt; ExportTxRedeemer -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. ExportTxRedeemer -&gt; Rep ExportTxRedeemer x)
-&gt; (forall x. Rep ExportTxRedeemer x -&gt; ExportTxRedeemer)
-&gt; Generic ExportTxRedeemer
forall x. Rep ExportTxRedeemer x -&gt; ExportTxRedeemer
forall x. ExportTxRedeemer -&gt; Rep ExportTxRedeemer x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep ExportTxRedeemer x -&gt; ExportTxRedeemer
$cfrom :: forall x. ExportTxRedeemer -&gt; Rep ExportTxRedeemer x
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680826367"><span class="annot"><span class="annottext">Typeable ExportTxRedeemer
Typeable ExportTxRedeemer
-&gt; (Proxy ExportTxRedeemer
    -&gt; Declare (Definitions Schema) NamedSchema)
-&gt; ToSchema ExportTxRedeemer
Proxy ExportTxRedeemer -&gt; Declare (Definitions Schema) NamedSchema
forall a.
Typeable a
-&gt; (Proxy a -&gt; Declare (Definitions Schema) NamedSchema)
-&gt; ToSchema a
declareNamedSchema :: Proxy ExportTxRedeemer -&gt; Declare (Definitions Schema) NamedSchema
$cdeclareNamedSchema :: Proxy ExportTxRedeemer -&gt; Declare (Definitions Schema) NamedSchema
$cp1ToSchema :: Typeable ExportTxRedeemer
</span><a href="../file:///nix/store/vpm50j3dwjzfg00shy71mwawvv796qgi-openapi3-lib-openapi3-3.2.3-haddock-doc/share/doc/openapi3/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">OpenApi.ToSchema</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680826363"><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxRedeemer"><span class="hs-identifier hs-type">ExportTxRedeemer</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-140"></span><span>    </span><span id="local-6989586621680826361"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser ExportTxRedeemer
</span><a href="#local-6989586621680826361"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span id="local-6989586621680826360"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680826360"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#parseSpendingRedeemer"><span class="hs-identifier hs-var">parseSpendingRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680826360"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Parser ExportTxRedeemer
-&gt; Parser ExportTxRedeemer -&gt; Parser ExportTxRedeemer
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#parseMintingRedeemer"><span class="hs-identifier hs-var">parseMintingRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680826360"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Parser ExportTxRedeemer
-&gt; Parser ExportTxRedeemer -&gt; Parser ExportTxRedeemer
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#parseRewardingRedeemer"><span class="hs-identifier hs-var">parseRewardingRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680826360"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Parser ExportTxRedeemer
-&gt; Parser ExportTxRedeemer -&gt; Parser ExportTxRedeemer
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#parseCertifyingRedeemer"><span class="hs-identifier hs-var">parseCertifyingRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680826360"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="annot"><a href="Plutus.Contract.Wallet.html#parseSpendingRedeemer"><span class="hs-identifier hs-type">parseSpendingRedeemer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxRedeemer"><span class="hs-identifier hs-type">ExportTxRedeemer</span></a></span><span>
</span><span id="line-143"></span><span id="parseSpendingRedeemer"><span class="annot"><span class="annottext">parseSpendingRedeemer :: Value -&gt; Parser ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#parseSpendingRedeemer"><span class="hs-identifier hs-var hs-var">parseSpendingRedeemer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser ExportTxRedeemer)
-&gt; Value
-&gt; Parser ExportTxRedeemer
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">withObject</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Redeemer&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser ExportTxRedeemer)
 -&gt; Value -&gt; Parser ExportTxRedeemer)
-&gt; (Object -&gt; Parser ExportTxRedeemer)
-&gt; Value
-&gt; Parser ExportTxRedeemer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680826355"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826355"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-145"></span><span>        </span><span id="local-6989586621680826354"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826354"><span class="hs-identifier hs-var">inputObj</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826355"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Object
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;input&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">Object</span></a></span><span>
</span><span id="line-146"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680826353"><span class="annot"><span class="annottext">txOutRefParse :: Parser TxOutRef
</span><a href="#local-6989586621680826353"><span class="hs-identifier hs-var hs-var">txOutRefParse</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxId -&gt; Integer -&gt; TxOutRef
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var">Plutus.TxOutRef</span></a></span><span> </span><span class="annot"><span class="annottext">(TxId -&gt; Integer -&gt; TxOutRef)
-&gt; Parser TxId -&gt; Parser (Integer -&gt; TxOutRef)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinByteString -&gt; TxId
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var">TxId</span></a></span><span> </span><span class="annot"><span class="annottext">(BuiltinByteString -&gt; TxId)
-&gt; Parser BuiltinByteString -&gt; Parser TxId
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826354"><span class="hs-identifier hs-var">inputObj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser BuiltinByteString
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;id&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>                                            </span><span class="annot"><span class="annottext">Parser (Integer -&gt; TxOutRef) -&gt; Parser Integer -&gt; Parser TxOutRef
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826354"><span class="hs-identifier hs-var">inputObj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Integer
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;index&quot;</span></span><span>
</span><span id="line-148"></span><span>        </span><span class="annot"><span class="annottext">Redeemer -&gt; TxOutRef -&gt; ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#SpendingRedeemer"><span class="hs-identifier hs-var">SpendingRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">(Redeemer -&gt; TxOutRef -&gt; ExportTxRedeemer)
-&gt; Parser Redeemer -&gt; Parser (TxOutRef -&gt; ExportTxRedeemer)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Parser Redeemer
</span><a href="Plutus.Contract.Wallet.html#parseRedeemerData"><span class="hs-identifier hs-var">parseRedeemerData</span></a></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826355"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Parser (TxOutRef -&gt; ExportTxRedeemer)
-&gt; Parser TxOutRef -&gt; Parser ExportTxRedeemer
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Parser TxOutRef
</span><a href="#local-6989586621680826353"><span class="hs-identifier hs-var">txOutRefParse</span></a></span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="annot"><a href="Plutus.Contract.Wallet.html#parseMintingRedeemer"><span class="hs-identifier hs-type">parseMintingRedeemer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxRedeemer"><span class="hs-identifier hs-type">ExportTxRedeemer</span></a></span><span>
</span><span id="line-151"></span><span id="parseMintingRedeemer"><span class="annot"><span class="annottext">parseMintingRedeemer :: Value -&gt; Parser ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#parseMintingRedeemer"><span class="hs-identifier hs-var hs-var">parseMintingRedeemer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser ExportTxRedeemer)
-&gt; Value
-&gt; Parser ExportTxRedeemer
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">withObject</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Redeemer&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser ExportTxRedeemer)
 -&gt; Value -&gt; Parser ExportTxRedeemer)
-&gt; (Object -&gt; Parser ExportTxRedeemer)
-&gt; Value
-&gt; Parser ExportTxRedeemer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680826349"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826349"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Redeemer -&gt; MintingPolicyHash -&gt; ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#MintingRedeemer"><span class="hs-identifier hs-var">MintingRedeemer</span></a></span><span>
</span><span id="line-153"></span><span>        </span><span class="annot"><span class="annottext">(Redeemer -&gt; MintingPolicyHash -&gt; ExportTxRedeemer)
-&gt; Parser Redeemer
-&gt; Parser (MintingPolicyHash -&gt; ExportTxRedeemer)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Parser Redeemer
</span><a href="Plutus.Contract.Wallet.html#parseRedeemerData"><span class="hs-identifier hs-var">parseRedeemerData</span></a></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826349"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-154"></span><span>        </span><span class="annot"><span class="annottext">Parser (MintingPolicyHash -&gt; ExportTxRedeemer)
-&gt; Parser MintingPolicyHash -&gt; Parser ExportTxRedeemer
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826349"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser MintingPolicyHash
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;policy_id&quot;</span></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-comment">-- TODO</span><span>
</span><span id="line-157"></span><span class="annot"><a href="Plutus.Contract.Wallet.html#parseRewardingRedeemer"><span class="hs-identifier hs-type">parseRewardingRedeemer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxRedeemer"><span class="hs-identifier hs-type">ExportTxRedeemer</span></a></span><span>
</span><span id="line-158"></span><span id="parseRewardingRedeemer"><span class="annot"><span class="annottext">parseRewardingRedeemer :: Value -&gt; Parser ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#parseRewardingRedeemer"><span class="hs-identifier hs-var hs-var">parseRewardingRedeemer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Value -&gt; Parser ExportTxRedeemer
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unimplemented rewarding redeemer parsing.&quot;</span></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="hs-comment">-- TODO</span><span>
</span><span id="line-161"></span><span class="annot"><a href="Plutus.Contract.Wallet.html#parseCertifyingRedeemer"><span class="hs-identifier hs-type">parseCertifyingRedeemer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxRedeemer"><span class="hs-identifier hs-type">ExportTxRedeemer</span></a></span><span>
</span><span id="line-162"></span><span id="parseCertifyingRedeemer"><span class="annot"><span class="annottext">parseCertifyingRedeemer :: Value -&gt; Parser ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#parseCertifyingRedeemer"><span class="hs-identifier hs-var hs-var">parseCertifyingRedeemer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Value -&gt; Parser ExportTxRedeemer
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unimplemented certifying redeemer parsing.&quot;</span></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="annot"><a href="Plutus.Contract.Wallet.html#parseRedeemerData"><span class="hs-identifier hs-type">parseRedeemerData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">Object</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Plutus.Redeemer</span></a></span><span>
</span><span id="line-165"></span><span id="parseRedeemerData"><span class="annot"><span class="annottext">parseRedeemerData :: Object -&gt; Parser Redeemer
</span><a href="Plutus.Contract.Wallet.html#parseRedeemerData"><span class="hs-identifier hs-var hs-var">parseRedeemerData</span></a></span></span><span> </span><span id="local-6989586621680826347"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826347"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-166"></span><span>    </span><span class="annot"><span class="annottext">(JSONViaSerialise Data -&gt; Redeemer)
-&gt; Parser (JSONViaSerialise Data) -&gt; Parser Redeemer
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">JSON.JSONViaSerialise</span></a></span><span> </span><span id="local-6989586621680826345"><span class="annot"><span class="annottext">Data
</span><a href="#local-6989586621680826345"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Redeemer
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var">Plutus.Redeemer</span></a></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Redeemer) -&gt; BuiltinData -&gt; Redeemer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Data -&gt; BuiltinData
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">PlutusTx.dataToBuiltinData</span></a></span><span> </span><span class="annot"><span class="annottext">Data
</span><a href="#local-6989586621680826345"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826347"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (JSONViaSerialise Data)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;data&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680826336"><span id="local-6989586621680826338"><span id="local-6989586621680826340"><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxRedeemer"><span class="hs-identifier hs-type">ExportTxRedeemer</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-170"></span><span>    </span><span id="local-6989586621680826335"><span class="annot"><span class="annottext">toJSON :: ExportTxRedeemer -&gt; Value
</span><a href="#local-6989586621680826335"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#SpendingRedeemer"><span class="hs-identifier hs-type">SpendingRedeemer</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">redeemer :: ExportTxRedeemer -&gt; Redeemer
</span><a href="Plutus.Contract.Wallet.html#redeemer"><span class="hs-identifier hs-var">redeemer</span></a></span><span class="hs-glyph">=</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Plutus.Redeemer</span></a></span><span> </span><span id="local-6989586621680826334"><span class="annot"><span class="annottext">BuiltinData
</span><a href="#local-6989586621680826334"><span class="hs-identifier hs-var">dt</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">redeemerOutRef :: ExportTxRedeemer -&gt; TxOutRef
</span><a href="Plutus.Contract.Wallet.html#redeemerOutRef"><span class="hs-identifier hs-var">redeemerOutRef</span></a></span><span class="hs-glyph">=</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Plutus.TxOutRef</span></a></span><span class="hs-special">{</span><span id="local-6989586621680826333"><span class="annot"><span class="annottext">TxId
txOutRefId :: TxOutRef -&gt; TxId
txOutRefId :: TxId
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var hs-var">Plutus.txOutRefId</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826331"><span class="annot"><span class="annottext">Integer
txOutRefIdx :: TxOutRef -&gt; Integer
txOutRefIdx :: Integer
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var hs-var">Plutus.txOutRefIdx</span></a></span></span><span class="hs-special">}</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-171"></span><span>        </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">object</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;purpose&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; ExportTxRedeemerPurpose -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">ExportTxRedeemerPurpose
</span><a href="Plutus.Contract.Wallet.html#Spending"><span class="hs-identifier hs-var">Spending</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;data&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; JSONViaSerialise Data -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Data -&gt; JSONViaSerialise Data
forall a. a -&gt; JSONViaSerialise a
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">JSON.JSONViaSerialise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinData -&gt; Data
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">PlutusTx.builtinDataToData</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinData
</span><a href="#local-6989586621680826334"><span class="hs-identifier hs-var">dt</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;input&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">object</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;id&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; BuiltinByteString -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">TxId -&gt; BuiltinByteString
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var hs-var">Plutus.getTxId</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621680826333"><span class="hs-identifier hs-var">txOutRefId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;index&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Integer -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680826331"><span class="hs-identifier hs-var">txOutRefIdx</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-172"></span><span>    </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">toJSON</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#MintingRedeemer"><span class="hs-identifier hs-type">MintingRedeemer</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">redeemer :: ExportTxRedeemer -&gt; Redeemer
</span><a href="Plutus.Contract.Wallet.html#redeemer"><span class="hs-identifier hs-var">redeemer</span></a></span><span class="hs-glyph">=</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Plutus.Redeemer</span></a></span><span> </span><span id="local-6989586621680826327"><span class="annot"><span class="annottext">BuiltinData
</span><a href="#local-6989586621680826327"><span class="hs-identifier hs-var">dt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826326"><span class="annot"><span class="annottext">MintingPolicyHash
redeemerPolicyId :: MintingPolicyHash
redeemerPolicyId :: ExportTxRedeemer -&gt; MintingPolicyHash
</span><a href="#local-6989586621680826326"><span class="hs-identifier hs-var hs-var">redeemerPolicyId</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-173"></span><span>        </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">object</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;purpose&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; ExportTxRedeemerPurpose -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">ExportTxRedeemerPurpose
</span><a href="Plutus.Contract.Wallet.html#Minting"><span class="hs-identifier hs-var">Minting</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;data&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; JSONViaSerialise Data -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Data -&gt; JSONViaSerialise Data
forall a. a -&gt; JSONViaSerialise a
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">JSON.JSONViaSerialise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinData -&gt; Data
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">PlutusTx.builtinDataToData</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinData
</span><a href="#local-6989586621680826327"><span class="hs-identifier hs-var">dt</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;policy_id&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; MintingPolicyHash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">MintingPolicyHash
</span><a href="#local-6989586621680826326"><span class="hs-identifier hs-var">redeemerPolicyId</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-comment">-- TODO</span><span>
</span><span id="line-175"></span><span>    </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">toJSON</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#RewardingRedeemer"><span class="hs-identifier hs-type">RewardingRedeemer</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Value
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unimplemented rewarding redeemer encoding.&quot;</span></span><span>
</span><span id="line-176"></span><span>    </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">toJSON</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#CertifyingRedeemer"><span class="hs-identifier hs-type">CertifyingRedeemer</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Value
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unimplemented certifying redeemer encoding.&quot;</span></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="hs-comment">-- | Partial transaction that can be balanced by the wallet backend.</span><span>
</span><span id="line-179"></span><span id="local-6989586621680826324"><span id="local-6989586621680826325"></span></span><span class="hs-keyword">data</span><span> </span><span id="ExportTx"><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTx"><span class="hs-identifier hs-var">ExportTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-180"></span><span>        </span><span id="ExportTx"><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTx"><span class="hs-identifier hs-var">ExportTx</span></a></span></span><span>
</span><span id="line-181"></span><span>            </span><span class="hs-special">{</span><span> </span><span id="partialTx"><span class="annot"><span class="annottext">ExportTx -&gt; Tx BabbageEra
</span><a href="Plutus.Contract.Wallet.html#partialTx"><span class="hs-identifier hs-var hs-var">partialTx</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.Tx</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.BabbageEra</span></a></span><span> </span><span class="hs-comment">-- ^ The transaction itself</span><span>
</span><span id="line-182"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="lookups"><span class="annot"><span class="annottext">ExportTx -&gt; [ExportTxInput]
</span><a href="Plutus.Contract.Wallet.html#lookups"><span class="hs-identifier hs-var hs-var">lookups</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxInput"><span class="hs-identifier hs-type">ExportTxInput</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ The tx outputs for all inputs spent by the partial tx</span><span>
</span><span id="line-183"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="redeemers"><span class="annot"><span class="annottext">ExportTx -&gt; [ExportTxRedeemer]
</span><a href="Plutus.Contract.Wallet.html#redeemers"><span class="hs-identifier hs-var hs-var">redeemers</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxRedeemer"><span class="hs-identifier hs-type">ExportTxRedeemer</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-184"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680826316"><span id="local-6989586621680826318"><span class="annot"><span class="annottext">ExportTx -&gt; ExportTx -&gt; Bool
(ExportTx -&gt; ExportTx -&gt; Bool)
-&gt; (ExportTx -&gt; ExportTx -&gt; Bool) -&gt; Eq ExportTx
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ExportTx -&gt; ExportTx -&gt; Bool
$c/= :: ExportTx -&gt; ExportTx -&gt; Bool
== :: ExportTx -&gt; ExportTx -&gt; Bool
$c== :: ExportTx -&gt; ExportTx -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826310"><span id="local-6989586621680826312"><span id="local-6989586621680826314"><span class="annot"><span class="annottext">Int -&gt; ExportTx -&gt; ShowS
[ExportTx] -&gt; ShowS
ExportTx -&gt; String
(Int -&gt; ExportTx -&gt; ShowS)
-&gt; (ExportTx -&gt; String) -&gt; ([ExportTx] -&gt; ShowS) -&gt; Show ExportTx
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ExportTx] -&gt; ShowS
$cshowList :: [ExportTx] -&gt; ShowS
show :: ExportTx -&gt; String
$cshow :: ExportTx -&gt; String
showsPrec :: Int -&gt; ExportTx -&gt; ShowS
$cshowsPrec :: Int -&gt; ExportTx -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. ExportTx -&gt; Rep ExportTx x)
-&gt; (forall x. Rep ExportTx x -&gt; ExportTx) -&gt; Generic ExportTx
forall x. Rep ExportTx x -&gt; ExportTx
forall x. ExportTx -&gt; Rep ExportTx x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep ExportTx x -&gt; ExportTx
$cfrom :: forall x. ExportTx -&gt; Rep ExportTx x
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680826305"><span class="annot"><span class="annottext">Typeable ExportTx
Typeable ExportTx
-&gt; (Proxy ExportTx -&gt; Declare (Definitions Schema) NamedSchema)
-&gt; ToSchema ExportTx
Proxy ExportTx -&gt; Declare (Definitions Schema) NamedSchema
forall a.
Typeable a
-&gt; (Proxy a -&gt; Declare (Definitions Schema) NamedSchema)
-&gt; ToSchema a
declareNamedSchema :: Proxy ExportTx -&gt; Declare (Definitions Schema) NamedSchema
$cdeclareNamedSchema :: Proxy ExportTx -&gt; Declare (Definitions Schema) NamedSchema
$cp1ToSchema :: Typeable ExportTx
</span><a href="#local-6989586621680826305"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">OpenApi.ToSchema</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680826302"><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTx"><span class="hs-identifier hs-type">ExportTx</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-189"></span><span>  </span><span id="local-6989586621680826301"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser ExportTx
</span><a href="#local-6989586621680826301"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Object -&gt; Parser ExportTx) -&gt; Value -&gt; Parser ExportTx
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">withObject</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ExportTx&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser ExportTx) -&gt; Value -&gt; Parser ExportTx)
-&gt; (Object -&gt; Parser ExportTx) -&gt; Value -&gt; Parser ExportTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680826300"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826300"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tx BabbageEra -&gt; [ExportTxInput] -&gt; [ExportTxRedeemer] -&gt; ExportTx
</span><a href="Plutus.Contract.Wallet.html#ExportTx"><span class="hs-identifier hs-var">ExportTx</span></a></span><span>
</span><span id="line-190"></span><span>      </span><span class="annot"><span class="annottext">(Tx BabbageEra
 -&gt; [ExportTxInput] -&gt; [ExportTxRedeemer] -&gt; ExportTx)
-&gt; Parser (Tx BabbageEra)
-&gt; Parser ([ExportTxInput] -&gt; [ExportTxRedeemer] -&gt; ExportTx)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Parser (Tx BabbageEra)
</span><a href="#local-6989586621680826299"><span class="hs-identifier hs-var">parsePartialTx</span></a></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826300"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-191"></span><span>      </span><span class="annot"><span class="annottext">Parser ([ExportTxInput] -&gt; [ExportTxRedeemer] -&gt; ExportTx)
-&gt; Parser [ExportTxInput]
-&gt; Parser ([ExportTxRedeemer] -&gt; ExportTx)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826300"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [ExportTxInput]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;inputs&quot;</span></span><span>
</span><span id="line-192"></span><span>      </span><span class="annot"><span class="annottext">Parser ([ExportTxRedeemer] -&gt; ExportTx)
-&gt; Parser [ExportTxRedeemer] -&gt; Parser ExportTx
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826300"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [ExportTxRedeemer]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;redeemers&quot;</span></span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-194"></span><span>      </span><span id="local-6989586621680826299"><span class="annot"><span class="annottext">parsePartialTx :: Object -&gt; Parser (Tx BabbageEra)
</span><a href="#local-6989586621680826299"><span class="hs-identifier hs-var hs-var">parsePartialTx</span></a></span></span><span> </span><span id="local-6989586621680826298"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826298"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-195"></span><span>        </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826298"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;transaction&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text
-&gt; (Text -&gt; Parser (Tx BabbageEra)) -&gt; Parser (Tx BabbageEra)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680826297"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680826297"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-196"></span><span>          </span><span class="annot"><span class="annottext">(String -&gt; Parser (Tx BabbageEra))
-&gt; (Tx BabbageEra -&gt; Parser (Tx BabbageEra))
-&gt; Either String (Tx BabbageEra)
-&gt; Parser (Tx BabbageEra)
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser (Tx BabbageEra)
forall a. String -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">parseFail</span></a></span><span> </span><span class="annot"><span class="annottext">Tx BabbageEra -&gt; Parser (Tx BabbageEra)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Either String (Tx BabbageEra) -&gt; Parser (Tx BabbageEra))
-&gt; Either String (Tx BabbageEra) -&gt; Parser (Tx BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either String ByteString
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">JSON.tryDecode</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680826297"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-197"></span><span>                              </span><span class="annot"><span class="annottext">Either String ByteString
-&gt; (ByteString -&gt; Either String (Tx BabbageEra))
-&gt; Either String (Tx BabbageEra)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(DecoderError -&gt; String)
-&gt; Either DecoderError (Tx BabbageEra)
-&gt; Either String (Tx BabbageEra)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">DecoderError -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">(Either DecoderError (Tx BabbageEra)
 -&gt; Either String (Tx BabbageEra))
-&gt; (ByteString -&gt; Either DecoderError (Tx BabbageEra))
-&gt; ByteString
-&gt; Either String (Tx BabbageEra)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">AsType (Tx BabbageEra)
-&gt; ByteString -&gt; Either DecoderError (Tx BabbageEra)
forall a.
SerialiseAsCBOR a =&gt;
AsType a -&gt; ByteString -&gt; Either DecoderError a
</span><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-var">C.deserialiseFromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AsType BabbageEra -&gt; AsType (Tx BabbageEra)
forall era. AsType era -&gt; AsType (Tx era)
</span><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-var">C.AsTx</span></a></span><span> </span><span class="annot"><span class="annottext">AsType BabbageEra
</span><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-var">C.AsBabbageEra</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="hs-comment">-- IMPORTANT: The JSON produced here needs to match the schema expected by</span><span>
</span><span id="line-200"></span><span class="hs-comment">-- https://input-output-hk.github.io/cardano-wallet/api/edge/#operation/balanceTransaction</span><span>
</span><span id="line-201"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680826284"><span id="local-6989586621680826286"><span id="local-6989586621680826288"><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTx"><span class="hs-identifier hs-type">ExportTx</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-202"></span><span>    </span><span id="local-6989586621680826283"><span class="annot"><span class="annottext">toJSON :: ExportTx -&gt; Value
</span><a href="#local-6989586621680826283"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTx"><span class="hs-identifier hs-type">ExportTx</span></a></span><span class="hs-special">{</span><span id="local-6989586621680826282"><span class="annot"><span class="annottext">Tx BabbageEra
partialTx :: Tx BabbageEra
partialTx :: ExportTx -&gt; Tx BabbageEra
</span><a href="#local-6989586621680826282"><span class="hs-identifier hs-var hs-var">partialTx</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826281"><span class="annot"><span class="annottext">[ExportTxInput]
lookups :: [ExportTxInput]
lookups :: ExportTx -&gt; [ExportTxInput]
</span><a href="#local-6989586621680826281"><span class="hs-identifier hs-var hs-var">lookups</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826280"><span class="annot"><span class="annottext">[ExportTxRedeemer]
redeemers :: [ExportTxRedeemer]
redeemers :: ExportTx -&gt; [ExportTxRedeemer]
</span><a href="#local-6989586621680826280"><span class="hs-identifier hs-var hs-var">redeemers</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-203"></span><span>        </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">object</span></a></span><span>
</span><span id="line-204"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;transaction&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">JSON.encodeByteString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tx BabbageEra -&gt; ByteString
forall a. SerialiseAsCBOR a =&gt; a -&gt; ByteString
</span><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-var">C.serialiseToCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Tx BabbageEra
</span><a href="#local-6989586621680826282"><span class="hs-identifier hs-var">partialTx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;inputs&quot;</span></span><span>      </span><span class="annot"><span class="annottext">Key -&gt; [ExportTxInput] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">[ExportTxInput]
</span><a href="#local-6989586621680826281"><span class="hs-identifier hs-var">lookups</span></a></span><span>
</span><span id="line-206"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;redeemers&quot;</span></span><span>   </span><span class="annot"><span class="annottext">Key -&gt; [ExportTxRedeemer] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">[ExportTxRedeemer]
</span><a href="#local-6989586621680826280"><span class="hs-identifier hs-var">redeemers</span></a></span><span>
</span><span id="line-207"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span id="local-6989586621680826276"><span id="local-6989586621680826277"></span></span><span class="hs-keyword">data</span><span> </span><span id="ExportTxInput"><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxInput"><span class="hs-identifier hs-var">ExportTxInput</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-210"></span><span>    </span><span id="ExportTxInput"><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxInput"><span class="hs-identifier hs-var">ExportTxInput</span></a></span></span><span>
</span><span id="line-211"></span><span>        </span><span class="hs-special">{</span><span> </span><span id="etxiId"><span class="annot"><span class="annottext">ExportTxInput -&gt; TxId
</span><a href="Plutus.Contract.Wallet.html#etxiId"><span class="hs-identifier hs-var hs-var">etxiId</span></a></span></span><span>               </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.TxId</span></a></span><span>
</span><span id="line-212"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="etxiTxIx"><span class="annot"><span class="annottext">ExportTxInput -&gt; TxIx
</span><a href="Plutus.Contract.Wallet.html#etxiTxIx"><span class="hs-identifier hs-var hs-var">etxiTxIx</span></a></span></span><span>             </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.TxIx</span></a></span><span>
</span><span id="line-213"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="etxiAddress"><span class="annot"><span class="annottext">ExportTxInput -&gt; CardanoAddress
</span><a href="Plutus.Contract.Wallet.html#etxiAddress"><span class="hs-identifier hs-var hs-var">etxiAddress</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.AddressInEra</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.BabbageEra</span></a></span><span>
</span><span id="line-214"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="etxiLovelaceQuantity"><span class="annot"><span class="annottext">ExportTxInput -&gt; Lovelace
</span><a href="Plutus.Contract.Wallet.html#etxiLovelaceQuantity"><span class="hs-identifier hs-var hs-var">etxiLovelaceQuantity</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.Lovelace</span></a></span><span>
</span><span id="line-215"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="etxiDatumHash"><span class="annot"><span class="annottext">ExportTxInput -&gt; Maybe (Hash ScriptData)
</span><a href="Plutus.Contract.Wallet.html#etxiDatumHash"><span class="hs-identifier hs-var hs-var">etxiDatumHash</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.Hash</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.ScriptData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="etxiAssets"><span class="annot"><span class="annottext">ExportTxInput -&gt; [(PolicyId, AssetName, Quantity)]
</span><a href="Plutus.Contract.Wallet.html#etxiAssets"><span class="hs-identifier hs-var hs-var">etxiAssets</span></a></span></span><span>           </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.PolicyId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.AssetName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.Quantity</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-217"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-218"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680826265"><span id="local-6989586621680826267"><span class="annot"><span class="annottext">ExportTxInput -&gt; ExportTxInput -&gt; Bool
(ExportTxInput -&gt; ExportTxInput -&gt; Bool)
-&gt; (ExportTxInput -&gt; ExportTxInput -&gt; Bool) -&gt; Eq ExportTxInput
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ExportTxInput -&gt; ExportTxInput -&gt; Bool
$c/= :: ExportTxInput -&gt; ExportTxInput -&gt; Bool
== :: ExportTxInput -&gt; ExportTxInput -&gt; Bool
$c== :: ExportTxInput -&gt; ExportTxInput -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826259"><span id="local-6989586621680826261"><span id="local-6989586621680826263"><span class="annot"><span class="annottext">Int -&gt; ExportTxInput -&gt; ShowS
[ExportTxInput] -&gt; ShowS
ExportTxInput -&gt; String
(Int -&gt; ExportTxInput -&gt; ShowS)
-&gt; (ExportTxInput -&gt; String)
-&gt; ([ExportTxInput] -&gt; ShowS)
-&gt; Show ExportTxInput
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ExportTxInput] -&gt; ShowS
$cshowList :: [ExportTxInput] -&gt; ShowS
show :: ExportTxInput -&gt; String
$cshow :: ExportTxInput -&gt; String
showsPrec :: Int -&gt; ExportTxInput -&gt; ShowS
$cshowsPrec :: Int -&gt; ExportTxInput -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. ExportTxInput -&gt; Rep ExportTxInput x)
-&gt; (forall x. Rep ExportTxInput x -&gt; ExportTxInput)
-&gt; Generic ExportTxInput
forall x. Rep ExportTxInput x -&gt; ExportTxInput
forall x. ExportTxInput -&gt; Rep ExportTxInput x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep ExportTxInput x -&gt; ExportTxInput
$cfrom :: forall x. ExportTxInput -&gt; Rep ExportTxInput x
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680826254"><span class="annot"><span class="annottext">Typeable ExportTxInput
Typeable ExportTxInput
-&gt; (Proxy ExportTxInput
    -&gt; Declare (Definitions Schema) NamedSchema)
-&gt; ToSchema ExportTxInput
Proxy ExportTxInput -&gt; Declare (Definitions Schema) NamedSchema
forall a.
Typeable a
-&gt; (Proxy a -&gt; Declare (Definitions Schema) NamedSchema)
-&gt; ToSchema a
declareNamedSchema :: Proxy ExportTxInput -&gt; Declare (Definitions Schema) NamedSchema
$cdeclareNamedSchema :: Proxy ExportTxInput -&gt; Declare (Definitions Schema) NamedSchema
$cp1ToSchema :: Typeable ExportTxInput
</span><a href="#local-6989586621680826254"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">OpenApi.ToSchema</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680826251"><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxInput"><span class="hs-identifier hs-type">ExportTxInput</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-222"></span><span>    </span><span id="local-6989586621680826250"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser ExportTxInput
</span><a href="#local-6989586621680826250"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser ExportTxInput)
-&gt; Value
-&gt; Parser ExportTxInput
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">withObject</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ExportTxInput&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser ExportTxInput) -&gt; Value -&gt; Parser ExportTxInput)
-&gt; (Object -&gt; Parser ExportTxInput)
-&gt; Value
-&gt; Parser ExportTxInput
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680826249"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826249"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxId
-&gt; TxIx
-&gt; CardanoAddress
-&gt; Lovelace
-&gt; Maybe (Hash ScriptData)
-&gt; [(PolicyId, AssetName, Quantity)]
-&gt; ExportTxInput
</span><a href="Plutus.Contract.Wallet.html#ExportTxInput"><span class="hs-identifier hs-var">ExportTxInput</span></a></span><span>
</span><span id="line-223"></span><span>        </span><span class="annot"><span class="annottext">(TxId
 -&gt; TxIx
 -&gt; CardanoAddress
 -&gt; Lovelace
 -&gt; Maybe (Hash ScriptData)
 -&gt; [(PolicyId, AssetName, Quantity)]
 -&gt; ExportTxInput)
-&gt; Parser TxId
-&gt; Parser
     (TxIx
      -&gt; CardanoAddress
      -&gt; Lovelace
      -&gt; Maybe (Hash ScriptData)
      -&gt; [(PolicyId, AssetName, Quantity)]
      -&gt; ExportTxInput)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826249"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser TxId
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;id&quot;</span></span><span>
</span><span id="line-224"></span><span>        </span><span class="annot"><span class="annottext">Parser
  (TxIx
   -&gt; CardanoAddress
   -&gt; Lovelace
   -&gt; Maybe (Hash ScriptData)
   -&gt; [(PolicyId, AssetName, Quantity)]
   -&gt; ExportTxInput)
-&gt; Parser TxIx
-&gt; Parser
     (CardanoAddress
      -&gt; Lovelace
      -&gt; Maybe (Hash ScriptData)
      -&gt; [(PolicyId, AssetName, Quantity)]
      -&gt; ExportTxInput)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826249"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser TxIx
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;index&quot;</span></span><span>
</span><span id="line-225"></span><span>        </span><span class="annot"><span class="annottext">Parser
  (CardanoAddress
   -&gt; Lovelace
   -&gt; Maybe (Hash ScriptData)
   -&gt; [(PolicyId, AssetName, Quantity)]
   -&gt; ExportTxInput)
-&gt; Parser CardanoAddress
-&gt; Parser
     (Lovelace
      -&gt; Maybe (Hash ScriptData)
      -&gt; [(PolicyId, AssetName, Quantity)]
      -&gt; ExportTxInput)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Parser CardanoAddress
</span><a href="#local-6989586621680826248"><span class="hs-identifier hs-var">parseAddress</span></a></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826249"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-226"></span><span>        </span><span class="annot"><span class="annottext">Parser
  (Lovelace
   -&gt; Maybe (Hash ScriptData)
   -&gt; [(PolicyId, AssetName, Quantity)]
   -&gt; ExportTxInput)
-&gt; Parser Lovelace
-&gt; Parser
     (Maybe (Hash ScriptData)
      -&gt; [(PolicyId, AssetName, Quantity)] -&gt; ExportTxInput)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826249"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Object
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;amount&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Object -&gt; (Object -&gt; Parser Lovelace) -&gt; Parser Lovelace
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680826247"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826247"><span class="hs-identifier hs-var">amountField</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826247"><span class="hs-identifier hs-var">amountField</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Lovelace
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;quantity&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>        </span><span class="annot"><span class="annottext">Parser
  (Maybe (Hash ScriptData)
   -&gt; [(PolicyId, AssetName, Quantity)] -&gt; ExportTxInput)
-&gt; Parser (Maybe (Hash ScriptData))
-&gt; Parser ([(PolicyId, AssetName, Quantity)] -&gt; ExportTxInput)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826249"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (Maybe (Hash ScriptData))
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;datum&quot;</span></span><span>
</span><span id="line-228"></span><span>        </span><span class="annot"><span class="annottext">Parser ([(PolicyId, AssetName, Quantity)] -&gt; ExportTxInput)
-&gt; Parser [(PolicyId, AssetName, Quantity)] -&gt; Parser ExportTxInput
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826249"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Object]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;assets&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser [Object]
-&gt; ([Object] -&gt; Parser [(PolicyId, AssetName, Quantity)])
-&gt; Parser [(PolicyId, AssetName, Quantity)]
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">(Object -&gt; Parser (PolicyId, AssetName, Quantity))
-&gt; [Object] -&gt; Parser [(PolicyId, AssetName, Quantity)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Parser (PolicyId, AssetName, Quantity)
</span><a href="#local-6989586621680826245"><span class="hs-identifier hs-var">parseAsset</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-230"></span><span>          </span><span id="local-6989586621680826248"><span class="annot"><span class="annottext">parseAddress :: Object -&gt; Parser CardanoAddress
</span><a href="#local-6989586621680826248"><span class="hs-identifier hs-var hs-var">parseAddress</span></a></span></span><span> </span><span id="local-6989586621680826244"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826244"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-231"></span><span>              </span><span id="local-6989586621680826243"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680826243"><span class="hs-identifier hs-var">addressField</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826244"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;address&quot;</span></span><span>
</span><span id="line-232"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680826242"><span class="annot"><span class="annottext">deserialisedAddr :: Maybe CardanoAddress
</span><a href="#local-6989586621680826242"><span class="hs-identifier hs-var hs-var">deserialisedAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AsType CardanoAddress -&gt; Text -&gt; Maybe CardanoAddress
forall addr.
SerialiseAddress addr =&gt;
AsType addr -&gt; Text -&gt; Maybe addr
</span><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-var">C.deserialiseAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AsType BabbageEra -&gt; AsType CardanoAddress
forall era. AsType era -&gt; AsType (AddressInEra era)
</span><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-var">C.AsAddressInEra</span></a></span><span> </span><span class="annot"><span class="annottext">AsType BabbageEra
</span><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-var">C.AsBabbageEra</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680826243"><span class="hs-identifier hs-var">addressField</span></a></span><span>
</span><span id="line-233"></span><span>              </span><span class="annot"><span class="annottext">Parser CardanoAddress
-&gt; (CardanoAddress -&gt; Parser CardanoAddress)
-&gt; Maybe CardanoAddress
-&gt; Parser CardanoAddress
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Parser CardanoAddress
forall a. String -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">parseFail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Failed to deserialise address field&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CardanoAddress -&gt; Parser CardanoAddress
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe CardanoAddress
</span><a href="#local-6989586621680826242"><span class="hs-identifier hs-var">deserialisedAddr</span></a></span><span>
</span><span id="line-234"></span><span>          </span><span class="annot"><a href="#local-6989586621680826245"><span class="hs-identifier hs-type">parseAsset</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">Object</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.PolicyId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.AssetName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.Quantity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>          </span><span id="local-6989586621680826245"><span class="annot"><span class="annottext">parseAsset :: Object -&gt; Parser (PolicyId, AssetName, Quantity)
</span><a href="#local-6989586621680826245"><span class="hs-identifier hs-var hs-var">parseAsset</span></a></span></span><span> </span><span id="local-6989586621680826238"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826238"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-236"></span><span>              </span><span id="local-6989586621680826237"><span class="annot"><span class="annottext">PolicyId
</span><a href="#local-6989586621680826237"><span class="hs-identifier hs-var">policyId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826238"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser PolicyId
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;policy_id&quot;</span></span><span>
</span><span id="line-237"></span><span>              </span><span id="local-6989586621680826236"><span class="annot"><span class="annottext">AssetName
</span><a href="#local-6989586621680826236"><span class="hs-identifier hs-var">assetName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826238"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser AssetName
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;asset_name&quot;</span></span><span>
</span><span id="line-238"></span><span>              </span><span id="local-6989586621680826235"><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621680826235"><span class="hs-identifier hs-var">qty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680826238"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Quantity
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;quantity&quot;</span></span><span>
</span><span id="line-239"></span><span>              </span><span class="annot"><span class="annottext">(PolicyId, AssetName, Quantity)
-&gt; Parser (PolicyId, AssetName, Quantity)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PolicyId
</span><a href="#local-6989586621680826237"><span class="hs-identifier hs-var">policyId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AssetName
</span><a href="#local-6989586621680826236"><span class="hs-identifier hs-var">assetName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621680826235"><span class="hs-identifier hs-var">qty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680826228"><span id="local-6989586621680826230"><span id="local-6989586621680826232"><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxInput"><span class="hs-identifier hs-type">ExportTxInput</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-242"></span><span>    </span><span id="local-6989586621680826227"><span class="annot"><span class="annottext">toJSON :: ExportTxInput -&gt; Value
</span><a href="#local-6989586621680826227"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxInput"><span class="hs-identifier hs-type">ExportTxInput</span></a></span><span class="hs-special">{</span><span id="local-6989586621680826226"><span class="annot"><span class="annottext">TxId
etxiId :: TxId
etxiId :: ExportTxInput -&gt; TxId
</span><a href="#local-6989586621680826226"><span class="hs-identifier hs-var hs-var">etxiId</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826225"><span class="annot"><span class="annottext">TxIx
etxiTxIx :: TxIx
etxiTxIx :: ExportTxInput -&gt; TxIx
</span><a href="#local-6989586621680826225"><span class="hs-identifier hs-var hs-var">etxiTxIx</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826224"><span class="annot"><span class="annottext">Lovelace
etxiLovelaceQuantity :: Lovelace
etxiLovelaceQuantity :: ExportTxInput -&gt; Lovelace
</span><a href="#local-6989586621680826224"><span class="hs-identifier hs-var hs-var">etxiLovelaceQuantity</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826223"><span class="annot"><span class="annottext">Maybe (Hash ScriptData)
etxiDatumHash :: Maybe (Hash ScriptData)
etxiDatumHash :: ExportTxInput -&gt; Maybe (Hash ScriptData)
</span><a href="#local-6989586621680826223"><span class="hs-identifier hs-var hs-var">etxiDatumHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826222"><span class="annot"><span class="annottext">[(PolicyId, AssetName, Quantity)]
etxiAssets :: [(PolicyId, AssetName, Quantity)]
etxiAssets :: ExportTxInput -&gt; [(PolicyId, AssetName, Quantity)]
</span><a href="#local-6989586621680826222"><span class="hs-identifier hs-var hs-var">etxiAssets</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826221"><span class="annot"><span class="annottext">CardanoAddress
etxiAddress :: CardanoAddress
etxiAddress :: ExportTxInput -&gt; CardanoAddress
</span><a href="#local-6989586621680826221"><span class="hs-identifier hs-var hs-var">etxiAddress</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-243"></span><span>        </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">object</span></a></span><span>
</span><span id="line-244"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;id&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; TxId -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621680826226"><span class="hs-identifier hs-var">etxiId</span></a></span><span>
</span><span id="line-245"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;index&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; TxIx -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">TxIx
</span><a href="#local-6989586621680826225"><span class="hs-identifier hs-var">etxiTxIx</span></a></span><span>
</span><span id="line-246"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;address&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoAddress -&gt; Text
forall addr. SerialiseAddress addr =&gt; addr -&gt; Text
</span><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-var">C.serialiseAddress</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoAddress
</span><a href="#local-6989586621680826221"><span class="hs-identifier hs-var">etxiAddress</span></a></span><span>
</span><span id="line-247"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;amount&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">object</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;quantity&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Lovelace -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621680826224"><span class="hs-identifier hs-var">etxiLovelaceQuantity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;unit&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lovelace&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-248"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;datum&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Maybe (Hash ScriptData) -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Hash ScriptData)
</span><a href="#local-6989586621680826223"><span class="hs-identifier hs-var">etxiDatumHash</span></a></span><span>
</span><span id="line-249"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;assets&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">((PolicyId, AssetName, Quantity) -&gt; Value)
-&gt; [(PolicyId, AssetName, Quantity)] -&gt; [Value]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680826219"><span class="annot"><span class="annottext">PolicyId
</span><a href="#local-6989586621680826219"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826218"><span class="annot"><span class="annottext">AssetName
</span><a href="#local-6989586621680826218"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826217"><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621680826217"><span class="hs-identifier hs-var">q</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">object</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;policy_id&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; PolicyId -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">PolicyId
</span><a href="#local-6989586621680826219"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;asset_name&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; AssetName -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">AssetName
</span><a href="#local-6989586621680826218"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;quantity&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Quantity -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621680826217"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(PolicyId, AssetName, Quantity)]
</span><a href="#local-6989586621680826222"><span class="hs-identifier hs-var">etxiAssets</span></a></span><span>
</span><span id="line-250"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="annot"><a href="Plutus.Contract.Wallet.html#export"><span class="hs-keyword hs-type">export</span></a></span><span>
</span><span id="line-253"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">Params</span></a></span><span>
</span><span id="line-254"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-type">UnbalancedTx</span></a></span><span>
</span><span id="line-255"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">CardanoLedgerError</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTx"><span class="hs-identifier hs-type">ExportTx</span></a></span><span>
</span><span id="line-256"></span><span id="export"><span class="annot"><span class="annottext">export :: Params -&gt; UnbalancedTx -&gt; Either CardanoLedgerError ExportTx
</span><a href="Plutus.Contract.Wallet.html#export"><span class="hs-keyword hs-var hs-var">export</span></a></span></span><span> </span><span id="local-6989586621680826216"><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621680826216"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-type">UnbalancedEmulatorTx</span></a></span><span> </span><span id="local-6989586621680826215"><span class="annot"><span class="annottext">Tx
</span><a href="#local-6989586621680826215"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621680826214"><span class="annot"><span class="annottext">Set PaymentPubKeyHash
</span><a href="#local-6989586621680826214"><span class="hs-identifier hs-var">sigs</span></a></span></span><span> </span><span id="local-6989586621680826213"><span class="annot"><span class="annottext">Map TxOutRef TxOut
</span><a href="#local-6989586621680826213"><span class="hs-identifier hs-var">utxos</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680826212"><span class="annot"><span class="annottext">requiredSigners :: [PaymentPubKeyHash]
</span><a href="#local-6989586621680826212"><span class="hs-identifier hs-var hs-var">requiredSigners</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set PaymentPubKeyHash -&gt; [PaymentPubKeyHash]
forall a. Set a -&gt; [a]
</span><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Set PaymentPubKeyHash
</span><a href="#local-6989586621680826214"><span class="hs-identifier hs-var">sigs</span></a></span><span>
</span><span id="line-258"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Tx BabbageEra -&gt; [ExportTxInput] -&gt; [ExportTxRedeemer] -&gt; ExportTx
</span><a href="Plutus.Contract.Wallet.html#ExportTx"><span class="hs-identifier hs-var">ExportTx</span></a></span><span>
</span><span id="line-259"></span><span>        </span><span class="annot"><span class="annottext">(Tx BabbageEra
 -&gt; [ExportTxInput] -&gt; [ExportTxRedeemer] -&gt; ExportTx)
-&gt; Either CardanoLedgerError (Tx BabbageEra)
-&gt; Either
     CardanoLedgerError
     ([ExportTxInput] -&gt; [ExportTxRedeemer] -&gt; ExportTx)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; CardanoLedgerError)
-&gt; (TxBody BabbageEra -&gt; Tx BabbageEra)
-&gt; Either ToCardanoError (TxBody BabbageEra)
-&gt; Either CardanoLedgerError (Tx BabbageEra)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">bimap</span></a></span><span> </span><span class="annot"><span class="annottext">ToCardanoError -&gt; CardanoLedgerError
forall a b. b -&gt; Either a b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[KeyWitness BabbageEra] -&gt; TxBody BabbageEra -&gt; Tx BabbageEra
forall era. [KeyWitness era] -&gt; TxBody era -&gt; Tx era
</span><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-var">C.makeSignedTransaction</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NetworkId
-&gt; PParams (BabbageEra StandardCrypto)
-&gt; [PaymentPubKeyHash]
-&gt; Tx
-&gt; Either ToCardanoError (TxBody BabbageEra)
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">CardanoAPI.toCardanoTxBody</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Params -&gt; NetworkId
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var hs-var">pNetworkId</span></a></span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621680826216"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Params -&gt; PParams (BabbageEra StandardCrypto)
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var hs-var">emulatorPParams</span></a></span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621680826216"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PaymentPubKeyHash]
</span><a href="#local-6989586621680826212"><span class="hs-identifier hs-var">requiredSigners</span></a></span><span> </span><span class="annot"><span class="annottext">Tx
</span><a href="#local-6989586621680826215"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>        </span><span class="annot"><span class="annottext">Either
  CardanoLedgerError
  ([ExportTxInput] -&gt; [ExportTxRedeemer] -&gt; ExportTx)
-&gt; Either CardanoLedgerError [ExportTxInput]
-&gt; Either CardanoLedgerError ([ExportTxRedeemer] -&gt; ExportTx)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; CardanoLedgerError)
-&gt; Either ToCardanoError [ExportTxInput]
-&gt; Either CardanoLedgerError [ExportTxInput]
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">ToCardanoError -&gt; CardanoLedgerError
forall a b. b -&gt; Either a b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map TxOutRef TxOut -&gt; Either ToCardanoError [ExportTxInput]
</span><a href="Plutus.Contract.Wallet.html#mkInputs"><span class="hs-identifier hs-var">mkInputs</span></a></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxOut
</span><a href="#local-6989586621680826213"><span class="hs-identifier hs-var">utxos</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>        </span><span class="annot"><span class="annottext">Either CardanoLedgerError ([ExportTxRedeemer] -&gt; ExportTx)
-&gt; Either CardanoLedgerError [ExportTxRedeemer]
-&gt; Either CardanoLedgerError ExportTx
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[ExportTxRedeemer] -&gt; Either CardanoLedgerError [ExportTxRedeemer]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tx -&gt; [ExportTxRedeemer]
</span><a href="Plutus.Contract.Wallet.html#mkRedeemers"><span class="hs-identifier hs-var">mkRedeemers</span></a></span><span> </span><span class="annot"><span class="annottext">Tx
</span><a href="#local-6989586621680826215"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span class="annot"><a href="Plutus.Contract.Wallet.html#export"><span class="hs-keyword hs-var">export</span></a></span><span> </span><span id="local-6989586621680826206"><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621680826206"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-type">UnbalancedCardanoTx</span></a></span><span> </span><span id="local-6989586621680826205"><span class="annot"><span class="annottext">CardanoBuildTx
</span><a href="#local-6989586621680826205"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621680826204"><span class="annot"><span class="annottext">Map TxOutRef TxOut
</span><a href="#local-6989586621680826204"><span class="hs-identifier hs-var">utxos</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680826203"><span class="annot"><span class="annottext">fromCardanoTx :: CardanoBuildTx -&gt; Either CardanoLedgerError (TxBody BabbageEra)
</span><a href="#local-6989586621680826203"><span class="hs-identifier hs-var hs-var">fromCardanoTx</span></a></span></span><span> </span><span id="local-6989586621680826202"><span class="annot"><span class="annottext">CardanoBuildTx
</span><a href="#local-6989586621680826202"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-264"></span><span>            </span><span id="local-6989586621680826201"><span class="annot"><span class="annottext">UTxO (BabbageEra StandardCrypto)
</span><a href="#local-6989586621680826201"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UtxoIndex
-&gt; Either CardanoLedgerError (UTxO (BabbageEra StandardCrypto))
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">fromPlutusIndex</span></a></span><span> </span><span class="annot"><span class="annottext">(UtxoIndex
 -&gt; Either CardanoLedgerError (UTxO (BabbageEra StandardCrypto)))
-&gt; UtxoIndex
-&gt; Either CardanoLedgerError (UTxO (BabbageEra StandardCrypto))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxOut -&gt; UtxoIndex
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">P.UtxoIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxOut
</span><a href="#local-6989586621680826204"><span class="hs-identifier hs-var">utxos</span></a></span><span>
</span><span id="line-265"></span><span>            </span><span class="annot"><span class="annottext">Params
-&gt; UTxO (BabbageEra StandardCrypto)
-&gt; CardanoBuildTx
-&gt; Either CardanoLedgerError (TxBody BabbageEra)
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var">makeTransactionBody</span></a></span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621680826206"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO (BabbageEra StandardCrypto)
</span><a href="#local-6989586621680826201"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoBuildTx
</span><a href="#local-6989586621680826202"><span class="hs-identifier hs-var">ctx</span></a></span><span>
</span><span id="line-266"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Tx BabbageEra -&gt; [ExportTxInput] -&gt; [ExportTxRedeemer] -&gt; ExportTx
</span><a href="Plutus.Contract.Wallet.html#ExportTx"><span class="hs-identifier hs-var">ExportTx</span></a></span><span>
</span><span id="line-267"></span><span>        </span><span class="annot"><span class="annottext">(Tx BabbageEra
 -&gt; [ExportTxInput] -&gt; [ExportTxRedeemer] -&gt; ExportTx)
-&gt; Either CardanoLedgerError (Tx BabbageEra)
-&gt; Either
     CardanoLedgerError
     ([ExportTxInput] -&gt; [ExportTxRedeemer] -&gt; ExportTx)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(TxBody BabbageEra -&gt; Tx BabbageEra)
-&gt; Either CardanoLedgerError (TxBody BabbageEra)
-&gt; Either CardanoLedgerError (Tx BabbageEra)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[KeyWitness BabbageEra] -&gt; TxBody BabbageEra -&gt; Tx BabbageEra
forall era. [KeyWitness era] -&gt; TxBody era -&gt; Tx era
</span><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-var">C.makeSignedTransaction</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoBuildTx -&gt; Either CardanoLedgerError (TxBody BabbageEra)
</span><a href="#local-6989586621680826203"><span class="hs-identifier hs-var">fromCardanoTx</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoBuildTx
</span><a href="#local-6989586621680826205"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>        </span><span class="annot"><span class="annottext">Either
  CardanoLedgerError
  ([ExportTxInput] -&gt; [ExportTxRedeemer] -&gt; ExportTx)
-&gt; Either CardanoLedgerError [ExportTxInput]
-&gt; Either CardanoLedgerError ([ExportTxRedeemer] -&gt; ExportTx)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; CardanoLedgerError)
-&gt; Either ToCardanoError [ExportTxInput]
-&gt; Either CardanoLedgerError [ExportTxInput]
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">ToCardanoError -&gt; CardanoLedgerError
forall a b. b -&gt; Either a b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map TxOutRef TxOut -&gt; Either ToCardanoError [ExportTxInput]
</span><a href="Plutus.Contract.Wallet.html#mkInputs"><span class="hs-identifier hs-var">mkInputs</span></a></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxOut
</span><a href="#local-6989586621680826204"><span class="hs-identifier hs-var">utxos</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span>        </span><span class="annot"><span class="annottext">Either CardanoLedgerError ([ExportTxRedeemer] -&gt; ExportTx)
-&gt; Either CardanoLedgerError [ExportTxRedeemer]
-&gt; Either CardanoLedgerError ExportTx
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[ExportTxRedeemer] -&gt; Either CardanoLedgerError [ExportTxRedeemer]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span class="annot"><a href="Plutus.Contract.Wallet.html#mkInputs"><span class="hs-identifier hs-type">mkInputs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Plutus.TxOutRef</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">P.TxOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">CardanoAPI.ToCardanoError</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxInput"><span class="hs-identifier hs-type">ExportTxInput</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-272"></span><span id="mkInputs"><span class="annot"><span class="annottext">mkInputs :: Map TxOutRef TxOut -&gt; Either ToCardanoError [ExportTxInput]
</span><a href="Plutus.Contract.Wallet.html#mkInputs"><span class="hs-identifier hs-var hs-var">mkInputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((TxOutRef, TxOut) -&gt; Either ToCardanoError ExportTxInput)
-&gt; [(TxOutRef, TxOut)] -&gt; Either ToCardanoError [ExportTxInput]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TxOutRef -&gt; TxOut -&gt; Either ToCardanoError ExportTxInput)
-&gt; (TxOutRef, TxOut) -&gt; Either ToCardanoError ExportTxInput
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef -&gt; TxOut -&gt; Either ToCardanoError ExportTxInput
</span><a href="Plutus.Contract.Wallet.html#toExportTxInput"><span class="hs-identifier hs-var">toExportTxInput</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(TxOutRef, TxOut)] -&gt; Either ToCardanoError [ExportTxInput])
-&gt; (Map TxOutRef TxOut -&gt; [(TxOutRef, TxOut)])
-&gt; Map TxOutRef TxOut
-&gt; Either ToCardanoError [ExportTxInput]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxOut -&gt; [(TxOutRef, TxOut)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-var">Map.toList</span></a></span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="annot"><a href="Plutus.Contract.Wallet.html#toExportTxInput"><span class="hs-identifier hs-type">toExportTxInput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Plutus.TxOutRef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">P.TxOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">CardanoAPI.ToCardanoError</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxInput"><span class="hs-identifier hs-type">ExportTxInput</span></a></span><span>
</span><span id="line-275"></span><span id="toExportTxInput"><span class="annot"><span class="annottext">toExportTxInput :: TxOutRef -&gt; TxOut -&gt; Either ToCardanoError ExportTxInput
</span><a href="Plutus.Contract.Wallet.html#toExportTxInput"><span class="hs-identifier hs-var hs-var">toExportTxInput</span></a></span></span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Plutus.TxOutRef</span></a></span><span class="hs-special">{</span><span id="local-6989586621680826195"><span class="annot"><span class="annottext">TxId
txOutRefId :: TxId
txOutRefId :: TxOutRef -&gt; TxId
</span><a href="#local-6989586621680826195"><span class="hs-identifier hs-var hs-var">Plutus.txOutRefId</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826194"><span class="annot"><span class="annottext">Integer
txOutRefIdx :: Integer
txOutRefIdx :: TxOutRef -&gt; Integer
</span><a href="#local-6989586621680826194"><span class="hs-identifier hs-var hs-var">Plutus.txOutRefIdx</span></a></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621680826193"><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621680826193"><span class="hs-identifier hs-var">txOut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-276"></span><span>    </span><span id="local-6989586621680826192"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680826192"><span class="hs-identifier hs-var">cardanoValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Either ToCardanoError Value
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">CardanoAPI.toCardanoValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOut -&gt; Value
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">P.txOutValue</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621680826193"><span class="hs-identifier hs-var">txOut</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680826189"><span class="annot"><span class="annottext">otherQuantities :: [(PolicyId, AssetName, Quantity)]
</span><a href="#local-6989586621680826189"><span class="hs-identifier hs-var hs-var">otherQuantities</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((AssetId, Quantity) -&gt; Maybe (PolicyId, AssetName, Quantity))
-&gt; [(AssetId, Quantity)] -&gt; [(PolicyId, AssetName, Quantity)]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mapMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">C.AssetId</span></a></span><span> </span><span id="local-6989586621680826187"><span class="annot"><span class="annottext">PolicyId
</span><a href="#local-6989586621680826187"><span class="hs-identifier hs-var">policyId</span></a></span></span><span> </span><span id="local-6989586621680826186"><span class="annot"><span class="annottext">AssetName
</span><a href="#local-6989586621680826186"><span class="hs-identifier hs-var">assetName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680826185"><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621680826185"><span class="hs-identifier hs-var">quantity</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(PolicyId, AssetName, Quantity)
-&gt; Maybe (PolicyId, AssetName, Quantity)
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PolicyId
</span><a href="#local-6989586621680826187"><span class="hs-identifier hs-var">policyId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AssetName
</span><a href="#local-6989586621680826186"><span class="hs-identifier hs-var">assetName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621680826185"><span class="hs-identifier hs-var">quantity</span></a></span><span class="hs-special">)</span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(AssetId, Quantity)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (PolicyId, AssetName, Quantity)
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(AssetId, Quantity)] -&gt; [(PolicyId, AssetName, Quantity)])
-&gt; [(AssetId, Quantity)] -&gt; [(PolicyId, AssetName, Quantity)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; [(AssetId, Quantity)]
</span><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-var">C.valueToList</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680826192"><span class="hs-identifier hs-var">cardanoValue</span></a></span><span>
</span><span id="line-278"></span><span>    </span><span class="annot"><span class="annottext">TxId
-&gt; TxIx
-&gt; CardanoAddress
-&gt; Lovelace
-&gt; Maybe (Hash ScriptData)
-&gt; [(PolicyId, AssetName, Quantity)]
-&gt; ExportTxInput
</span><a href="Plutus.Contract.Wallet.html#ExportTxInput"><span class="hs-identifier hs-var">ExportTxInput</span></a></span><span>
</span><span id="line-279"></span><span>        </span><span class="annot"><span class="annottext">(TxId
 -&gt; TxIx
 -&gt; CardanoAddress
 -&gt; Lovelace
 -&gt; Maybe (Hash ScriptData)
 -&gt; [(PolicyId, AssetName, Quantity)]
 -&gt; ExportTxInput)
-&gt; Either ToCardanoError TxId
-&gt; Either
     ToCardanoError
     (TxIx
      -&gt; CardanoAddress
      -&gt; Lovelace
      -&gt; Maybe (Hash ScriptData)
      -&gt; [(PolicyId, AssetName, Quantity)]
      -&gt; ExportTxInput)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TxId -&gt; Either ToCardanoError TxId
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">CardanoAPI.toCardanoTxId</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621680826195"><span class="hs-identifier hs-var">txOutRefId</span></a></span><span>
</span><span id="line-280"></span><span>        </span><span class="annot"><span class="annottext">Either
  ToCardanoError
  (TxIx
   -&gt; CardanoAddress
   -&gt; Lovelace
   -&gt; Maybe (Hash ScriptData)
   -&gt; [(PolicyId, AssetName, Quantity)]
   -&gt; ExportTxInput)
-&gt; Either ToCardanoError TxIx
-&gt; Either
     ToCardanoError
     (CardanoAddress
      -&gt; Lovelace
      -&gt; Maybe (Hash ScriptData)
      -&gt; [(PolicyId, AssetName, Quantity)]
      -&gt; ExportTxInput)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TxIx -&gt; Either ToCardanoError TxIx
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; TxIx
</span><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-var">C.TxIx</span></a></span><span> </span><span class="annot"><span class="annottext">(Word -&gt; TxIx) -&gt; Word -&gt; TxIx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Word
forall a. Num a =&gt; Integer -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromInteger</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680826194"><span class="hs-identifier hs-var">txOutRefIdx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>        </span><span class="annot"><span class="annottext">Either
  ToCardanoError
  (CardanoAddress
   -&gt; Lovelace
   -&gt; Maybe (Hash ScriptData)
   -&gt; [(PolicyId, AssetName, Quantity)]
   -&gt; ExportTxInput)
-&gt; Either ToCardanoError CardanoAddress
-&gt; Either
     ToCardanoError
     (Lovelace
      -&gt; Maybe (Hash ScriptData)
      -&gt; [(PolicyId, AssetName, Quantity)]
      -&gt; ExportTxInput)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoAddress -&gt; Either ToCardanoError CardanoAddress
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOut -&gt; CardanoAddress
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">P.txOutAddress</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621680826193"><span class="hs-identifier hs-var">txOut</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>        </span><span class="annot"><span class="annottext">Either
  ToCardanoError
  (Lovelace
   -&gt; Maybe (Hash ScriptData)
   -&gt; [(PolicyId, AssetName, Quantity)]
   -&gt; ExportTxInput)
-&gt; Either ToCardanoError Lovelace
-&gt; Either
     ToCardanoError
     (Maybe (Hash ScriptData)
      -&gt; [(PolicyId, AssetName, Quantity)] -&gt; ExportTxInput)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace -&gt; Either ToCardanoError Lovelace
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Lovelace
</span><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-var">C.selectLovelace</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680826192"><span class="hs-identifier hs-var">cardanoValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>        </span><span class="annot"><span class="annottext">Either
  ToCardanoError
  (Maybe (Hash ScriptData)
   -&gt; [(PolicyId, AssetName, Quantity)] -&gt; ExportTxInput)
-&gt; Either ToCardanoError (Maybe (Hash ScriptData))
-&gt; Either
     ToCardanoError ([(PolicyId, AssetName, Quantity)] -&gt; ExportTxInput)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Either ToCardanoError (Hash ScriptData))
-&gt; Either ToCardanoError (Maybe (Hash ScriptData))
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">sequence</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatumHash -&gt; Either ToCardanoError (Hash ScriptData)
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">CardanoAPI.toCardanoScriptDataHash</span></a></span><span> </span><span class="annot"><span class="annottext">(DatumHash -&gt; Either ToCardanoError (Hash ScriptData))
-&gt; Maybe DatumHash
-&gt; Maybe (Either ToCardanoError (Hash ScriptData))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; Maybe DatumHash
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">P.txOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621680826193"><span class="hs-identifier hs-var">txOut</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>        </span><span class="annot"><span class="annottext">Either
  ToCardanoError ([(PolicyId, AssetName, Quantity)] -&gt; ExportTxInput)
-&gt; Either ToCardanoError [(PolicyId, AssetName, Quantity)]
-&gt; Either ToCardanoError ExportTxInput
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[(PolicyId, AssetName, Quantity)]
-&gt; Either ToCardanoError [(PolicyId, AssetName, Quantity)]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">[(PolicyId, AssetName, Quantity)]
</span><a href="#local-6989586621680826189"><span class="hs-identifier hs-var">otherQuantities</span></a></span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span class="hs-comment">-- TODO: Here there's hidden error of script DCert missing its redeemer - this just counts as no DCert. Don't know if bad.</span><span>
</span><span id="line-287"></span><span class="hs-comment">-- TODO: Refactor with getGardanoTxRedeemers once we are ceady to move to Cardano Txs</span><span>
</span><span id="line-288"></span><span class="annot"><a href="Plutus.Contract.Wallet.html#mkRedeemers"><span class="hs-identifier hs-type">mkRedeemers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">P.Tx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxRedeemer"><span class="hs-identifier hs-type">ExportTxRedeemer</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-289"></span><span id="mkRedeemers"><span class="annot"><span class="annottext">mkRedeemers :: Tx -&gt; [ExportTxRedeemer]
</span><a href="Plutus.Contract.Wallet.html#mkRedeemers"><span class="hs-identifier hs-var hs-var">mkRedeemers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((ScriptPurpose, Redeemer) -&gt; ExportTxRedeemer)
-&gt; [(ScriptPurpose, Redeemer)] -&gt; [ExportTxRedeemer]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ScriptPurpose -&gt; Redeemer -&gt; ExportTxRedeemer)
-&gt; (ScriptPurpose, Redeemer) -&gt; ExportTxRedeemer
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptPurpose -&gt; Redeemer -&gt; ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#scriptPurposeToExportRedeemer"><span class="hs-identifier hs-var">scriptPurposeToExportRedeemer</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(ScriptPurpose, Redeemer)] -&gt; [ExportTxRedeemer])
-&gt; (Tx -&gt; [(ScriptPurpose, Redeemer)]) -&gt; Tx -&gt; [ExportTxRedeemer]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Map ScriptPurpose Redeemer -&gt; [(ScriptPurpose, Redeemer)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-var">Map.assocs</span></a></span><span> </span><span class="annot"><span class="annottext">(Map ScriptPurpose Redeemer -&gt; [(ScriptPurpose, Redeemer)])
-&gt; (Tx -&gt; Map ScriptPurpose Redeemer)
-&gt; Tx
-&gt; [(ScriptPurpose, Redeemer)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Tx -&gt; Map ScriptPurpose Redeemer
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">txRedeemers</span></a></span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="annot"><a href="Plutus.Contract.Wallet.html#scriptPurposeToExportRedeemer"><span class="hs-identifier hs-type">scriptPurposeToExportRedeemer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Ledger.ScriptPurpose</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Redeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Wallet.html#ExportTxRedeemer"><span class="hs-identifier hs-type">ExportTxRedeemer</span></a></span><span>
</span><span id="line-292"></span><span id="scriptPurposeToExportRedeemer"><span class="annot"><span class="annottext">scriptPurposeToExportRedeemer :: ScriptPurpose -&gt; Redeemer -&gt; ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#scriptPurposeToExportRedeemer"><span class="hs-identifier hs-var hs-var">scriptPurposeToExportRedeemer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Ledger.Spending</span></a></span><span> </span><span id="local-6989586621680826173"><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621680826173"><span class="hs-identifier hs-var">ref</span></a></span></span><span class="hs-special">)</span><span>     </span><span id="local-6989586621680826172"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621680826172"><span class="hs-identifier hs-var">rd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpendingRedeemer :: Redeemer -&gt; TxOutRef -&gt; ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#SpendingRedeemer"><span class="hs-identifier hs-type">SpendingRedeemer</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">redeemerOutRef :: TxOutRef
</span><a href="Plutus.Contract.Wallet.html#redeemerOutRef"><span class="hs-identifier hs-var">redeemerOutRef</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621680826173"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">redeemer :: Redeemer
</span><a href="Plutus.Contract.Wallet.html#redeemer"><span class="hs-identifier hs-var">redeemer</span></a></span><span class="hs-glyph">=</span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621680826172"><span class="hs-identifier hs-var">rd</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-293"></span><span class="annot"><a href="Plutus.Contract.Wallet.html#scriptPurposeToExportRedeemer"><span class="hs-identifier hs-var">scriptPurposeToExportRedeemer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Ledger.Minting</span></a></span><span> </span><span id="local-6989586621680826170"><span class="annot"><span class="annottext">CurrencySymbol
</span><a href="#local-6989586621680826170"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span>       </span><span id="local-6989586621680826169"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621680826169"><span class="hs-identifier hs-var">rd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MintingRedeemer :: Redeemer -&gt; MintingPolicyHash -&gt; ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#MintingRedeemer"><span class="hs-identifier hs-type">MintingRedeemer</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">redeemerPolicyId :: MintingPolicyHash
</span><a href="Plutus.Contract.Wallet.html#redeemerPolicyId"><span class="hs-identifier hs-var">redeemerPolicyId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CurrencySymbol -&gt; MintingPolicyHash
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var">currencyMPSHash</span></a></span><span> </span><span class="annot"><span class="annottext">CurrencySymbol
</span><a href="#local-6989586621680826170"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">redeemer :: Redeemer
</span><a href="Plutus.Contract.Wallet.html#redeemer"><span class="hs-identifier hs-var">redeemer</span></a></span><span class="hs-glyph">=</span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621680826169"><span class="hs-identifier hs-var">rd</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-294"></span><span class="annot"><a href="Plutus.Contract.Wallet.html#scriptPurposeToExportRedeemer"><span class="hs-identifier hs-var">scriptPurposeToExportRedeemer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Ledger.Rewarding</span></a></span><span> </span><span id="local-6989586621680826167"><span class="annot"><span class="annottext">StakingCredential
</span><a href="#local-6989586621680826167"><span class="hs-identifier hs-var">cred</span></a></span></span><span class="hs-special">)</span><span>   </span><span id="local-6989586621680826166"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621680826166"><span class="hs-identifier hs-var">rd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RewardingRedeemer :: Redeemer -&gt; StakingCredential -&gt; ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#RewardingRedeemer"><span class="hs-identifier hs-type">RewardingRedeemer</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">redeemerStakingCredential :: StakingCredential
</span><a href="Plutus.Contract.Wallet.html#redeemerStakingCredential"><span class="hs-identifier hs-var">redeemerStakingCredential</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StakingCredential
</span><a href="#local-6989586621680826167"><span class="hs-identifier hs-var">cred</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">redeemer :: Redeemer
</span><a href="Plutus.Contract.Wallet.html#redeemer"><span class="hs-identifier hs-var">redeemer</span></a></span><span class="hs-glyph">=</span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621680826166"><span class="hs-identifier hs-var">rd</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-295"></span><span class="annot"><a href="Plutus.Contract.Wallet.html#scriptPurposeToExportRedeemer"><span class="hs-identifier hs-var">scriptPurposeToExportRedeemer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Ledger.Certifying</span></a></span><span> </span><span id="local-6989586621680826164"><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621680826164"><span class="hs-identifier hs-var">dcert</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680826163"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621680826163"><span class="hs-identifier hs-var">rd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CertifyingRedeemer :: Redeemer -&gt; DCert -&gt; ExportTxRedeemer
</span><a href="Plutus.Contract.Wallet.html#CertifyingRedeemer"><span class="hs-identifier hs-type">CertifyingRedeemer</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">redeemerDCert :: DCert
</span><a href="Plutus.Contract.Wallet.html#redeemerDCert"><span class="hs-identifier hs-var">redeemerDCert</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621680826164"><span class="hs-identifier hs-var">dcert</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">redeemer :: Redeemer
</span><a href="Plutus.Contract.Wallet.html#redeemer"><span class="hs-identifier hs-var">redeemer</span></a></span><span class="hs-glyph">=</span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621680826163"><span class="hs-identifier hs-var">rd</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-296"></span></pre></body></html>
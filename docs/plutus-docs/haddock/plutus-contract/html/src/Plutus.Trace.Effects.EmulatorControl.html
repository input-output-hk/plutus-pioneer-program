<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds           #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts    #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE GADTs               #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase          #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes          #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell     #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications    #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators       #-}</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-comment">{-

An effect for inspecting &amp; changing the internal state of the emulator.

-}</span><span>
</span><span id="line-16"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Plutus.Trace.Effects.EmulatorControl</span><span class="hs-special">(</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#EmulatorControl"><span class="hs-identifier">EmulatorControl</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#setSigningProcess"><span class="hs-identifier">setSigningProcess</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#agentState"><span class="hs-identifier">agentState</span></a></span><span>
</span><span id="line-20"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#freezeContractInstance"><span class="hs-identifier">freezeContractInstance</span></a></span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#thawContractInstance"><span class="hs-identifier">thawContractInstance</span></a></span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#chainState"><span class="hs-identifier">chainState</span></a></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#getParams"><span class="hs-identifier">getParams</span></a></span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#discardWallets"><span class="hs-identifier">discardWallets</span></a></span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#handleEmulatorControl"><span class="hs-identifier">handleEmulatorControl</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#getSlotConfig"><span class="hs-identifier">getSlotConfig</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">Cardano.Node.Emulator.Chain</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">ChainState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">Cardano.Node.Emulator.Params</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">Cardano.Node.Emulator.TimeSlot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">SlotConfig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">Control.Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">over</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">view</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">void</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Eff</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Member</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="../file:///nix/store/nkim7nifcqpdb4r433zhbv94ima3fwqb-natural-transformation-lib-natural-transformation-0.4-haddock-doc/share/doc/natural-transformation/html/src"><span class="hs-operator">(~&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer.Coroutine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Yield</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Error</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer.State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">State</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">gets</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">modify</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer.TH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">makeEffect</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.ContractInstance.html"><span class="hs-identifier">Plutus.Trace.Emulator.ContractInstance</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorRuntimeError"><span class="hs-identifier">EmulatorRuntimeError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.ContractInstance.html#getThread"><span class="hs-identifier">getThread</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html"><span class="hs-identifier">Plutus.Trace.Emulator.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier">EmulatorMessage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#Freeze"><span class="hs-identifier">Freeze</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorThreads"><span class="hs-identifier">EmulatorThreads</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html"><span class="hs-identifier">Plutus.Trace.Scheduler</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#EmSystemCall"><span class="hs-identifier">EmSystemCall</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html#MessageCall"><span class="hs-identifier">MessageCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#Message"><span class="hs-identifier">Message</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html#Priority"><span class="hs-identifier">Priority</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#Normal"><span class="hs-identifier">Normal</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html#ThreadCall"><span class="hs-identifier">ThreadCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#Thaw"><span class="hs-identifier">Thaw</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html#mkSysCall"><span class="hs-identifier">mkSysCall</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.html"><span class="hs-identifier">Wallet.Emulator</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">EM</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html"><span class="hs-identifier">Wallet.Emulator.MultiAgent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier">EmulatorState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentControlEffect"><span class="hs-identifier">MultiAgentControlEffect</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#walletControlAction"><span class="hs-identifier">walletControlAction</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#walletState"><span class="hs-identifier">walletState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html"><span class="hs-identifier">Wallet.Emulator.Wallet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.Wallet.html#SigningProcess"><span class="hs-identifier">SigningProcess</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier">Wallet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#WalletState"><span class="hs-identifier">WalletState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html"><span class="hs-identifier">Wallet.Emulator.Wallet</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">W</span></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Types.html"><span class="hs-identifier">Wallet.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Types.html#ContractInstanceId"><span class="hs-identifier">ContractInstanceId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-comment">{- Note [The EmulatorControl effect]

The 'EmulatorControl' effect bundles all trace actions that deal with the
internals of the Plutus emulator, such as messing with the clock and dis-
connecting agents from the network.

All other effects defined under @Plutus.Trace.Effects@ can, in theory, be run
against a live system, ie. one running in real time with a real Goguen node and
wallet(s).

This means that if you write traces in a way that doesn't require the
'Member EmulatorControl' constraint, then it is likely that your traces will
work on a live system just as they do on the emulator. (We haven't implemented
the effect handlers for &quot;live mode&quot; yet, so it is still possible that there
are some modifications to be made)

-}</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-keyword">data</span><span> </span><span id="EmulatorControl"><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#EmulatorControl"><span class="hs-identifier hs-var">EmulatorControl</span></a></span></span><span> </span><span id="local-6989586621680832035"><span class="annot"><a href="#local-6989586621680832035"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-68"></span><span>    </span><span id="SetSigningProcess"><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#SetSigningProcess"><span class="hs-identifier hs-var">SetSigningProcess</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#SigningProcess"><span class="hs-identifier hs-type">SigningProcess</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#EmulatorControl"><span class="hs-identifier hs-type">EmulatorControl</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span>    </span><span id="AgentState"><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#AgentState"><span class="hs-identifier hs-var">AgentState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#EmulatorControl"><span class="hs-identifier hs-type">EmulatorControl</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#WalletState"><span class="hs-identifier hs-type">WalletState</span></a></span><span>
</span><span id="line-70"></span><span>    </span><span id="FreezeContractInstance"><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#FreezeContractInstance"><span class="hs-identifier hs-var">FreezeContractInstance</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Types.html#ContractInstanceId"><span class="hs-identifier hs-type">ContractInstanceId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#EmulatorControl"><span class="hs-identifier hs-type">EmulatorControl</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>    </span><span id="ThawContractInstance"><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#ThawContractInstance"><span class="hs-identifier hs-var">ThawContractInstance</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Types.html#ContractInstanceId"><span class="hs-identifier hs-type">ContractInstanceId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#EmulatorControl"><span class="hs-identifier hs-type">EmulatorControl</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span>    </span><span id="ChainState"><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#ChainState"><span class="hs-identifier hs-var">ChainState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#EmulatorControl"><span class="hs-identifier hs-type">EmulatorControl</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">ChainState</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span id="GetParams"><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#GetParams"><span class="hs-identifier hs-var">GetParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#EmulatorControl"><span class="hs-identifier hs-type">EmulatorControl</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">Params</span></a></span><span>
</span><span id="line-74"></span><span>    </span><span id="GetSlotConfig"><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#GetSlotConfig"><span class="hs-identifier hs-var">GetSlotConfig</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#EmulatorControl"><span class="hs-identifier hs-type">EmulatorControl</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">SlotConfig</span></a></span><span>
</span><span id="line-75"></span><span>    </span><span id="DiscardWallets"><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#DiscardWallets"><span class="hs-identifier hs-var">DiscardWallets</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#EmulatorControl"><span class="hs-identifier hs-type">EmulatorControl</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ Discard wallets matching the predicate.</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-comment">-- | Interpret the 'EmulatorControl' effect in the 'MultiAgentEffect' and</span><span>
</span><span id="line-78"></span><span class="hs-comment">--   scheduler system calls.</span><span>
</span><span id="line-79"></span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#handleEmulatorControl"><span class="hs-identifier hs-type">handleEmulatorControl</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680832026"><span class="annot"><a href="#local-6989586621680832026"><span class="hs-identifier hs-type">effs</span></a></span></span><span> </span><span id="local-6989586621680832025"><span class="annot"><a href="#local-6989586621680832025"><span class="hs-identifier hs-type">effs2</span></a></span></span><span> </span><span id="local-6989586621680832024"><span class="annot"><a href="#local-6989586621680832024"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorThreads"><span class="hs-identifier hs-type">EmulatorThreads</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832026"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-type">EmulatorState</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832026"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorRuntimeError"><span class="hs-identifier hs-type">EmulatorRuntimeError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832026"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentControlEffect"><span class="hs-identifier hs-type">MultiAgentControlEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832026"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#EmSystemCall"><span class="hs-identifier hs-type">EmSystemCall</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832025"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832024"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832026"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">Params</span></a></span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#EmulatorControl"><span class="hs-identifier hs-type">EmulatorControl</span></a></span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><a href="../file:///nix/store/nkim7nifcqpdb4r433zhbv94ima3fwqb-natural-transformation-lib-natural-transformation-0.4-haddock-doc/share/doc/natural-transformation/html/src"><span class="hs-operator hs-type">~&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832026"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-90"></span><span id="handleEmulatorControl"><span class="annot"><span class="annottext">handleEmulatorControl :: Params -&gt; EmulatorControl ~&gt; Eff effs
</span><a href="Plutus.Trace.Effects.EmulatorControl.html#handleEmulatorControl"><span class="hs-identifier hs-var hs-var">handleEmulatorControl</span></a></span></span><span> </span><span id="local-6989586621680832023"><span class="annot"><span class="annottext">params :: Params
</span><a href="#local-6989586621680832023"><span class="hs-identifier hs-var">params</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">Params</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">pSlotConfig :: Params -&gt; SlotConfig
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var">pSlotConfig</span></a></span><span class="hs-glyph">=</span><span id="local-6989586621680832020"><span class="annot"><span class="annottext">SlotConfig
</span><a href="#local-6989586621680832020"><span class="hs-identifier hs-var">slotCfg</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-91"></span><span>    </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#SetSigningProcess"><span class="hs-identifier hs-type">SetSigningProcess</span></a></span><span> </span><span id="local-6989586621680832019"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680832019"><span class="hs-identifier hs-var">wllt</span></a></span></span><span> </span><span id="local-6989586621680832018"><span class="annot"><span class="annottext">Maybe SigningProcess
</span><a href="#local-6989586621680832018"><span class="hs-identifier hs-var">sp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Eff EmulatedWalletControlEffects () -&gt; Eff effs ()
forall (effs :: [* -&gt; *]) r.
Member MultiAgentControlEffect effs =&gt;
Wallet -&gt; Eff EmulatedWalletControlEffects r -&gt; Eff effs r
</span><a href="Wallet.Emulator.MultiAgent.html#walletControlAction"><span class="hs-identifier hs-var">walletControlAction</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680832019"><span class="hs-identifier hs-var">wllt</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff EmulatedWalletControlEffects () -&gt; Eff effs ())
-&gt; Eff EmulatedWalletControlEffects () -&gt; Eff effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SigningProcess -&gt; Eff EmulatedWalletControlEffects ()
forall (effs :: [* -&gt; *]).
Member SigningProcessControlEffect effs =&gt;
Maybe SigningProcess -&gt; Eff effs ()
</span><a href="Wallet.Emulator.Wallet.html#setSigningProcess"><span class="hs-identifier hs-var">W.setSigningProcess</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SigningProcess
</span><a href="#local-6989586621680832018"><span class="hs-identifier hs-var">sp</span></a></span><span>
</span><span id="line-92"></span><span>    </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#AgentState"><span class="hs-identifier hs-type">AgentState</span></a></span><span> </span><span id="local-6989586621680832016"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680832016"><span class="hs-identifier hs-var">wllt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(EmulatorState -&gt; x) -&gt; Eff effs x
forall s a (effs :: [* -&gt; *]).
Member (State s) effs =&gt;
(s -&gt; a) -&gt; Eff effs a
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">gets</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-type">EmulatorState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting WalletState EmulatorState WalletState
-&gt; EmulatorState -&gt; WalletState
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; Lens' EmulatorState WalletState
</span><a href="Wallet.Emulator.MultiAgent.html#walletState"><span class="hs-identifier hs-var">walletState</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680832016"><span class="hs-identifier hs-var">wllt</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#FreezeContractInstance"><span class="hs-identifier hs-type">FreezeContractInstance</span></a></span><span> </span><span id="local-6989586621680832015"><span class="annot"><span class="annottext">ContractInstanceId
</span><a href="#local-6989586621680832015"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-94"></span><span>        </span><span id="local-6989586621680832014"><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621680832014"><span class="hs-identifier hs-var">threadId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ContractInstanceId -&gt; Eff effs ThreadId
forall (effs :: [* -&gt; *]).
(Member (State EmulatorThreads) effs,
 Member (Error EmulatorRuntimeError) effs) =&gt;
ContractInstanceId -&gt; Eff effs ThreadId
</span><a href="Plutus.Trace.Emulator.ContractInstance.html#getThread"><span class="hs-identifier hs-var">getThread</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceId
</span><a href="#local-6989586621680832015"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-95"></span><span>        </span><span class="hs-comment">-- see note [Freeze and Thaw]</span><span>
</span><span id="line-96"></span><span>        </span><span class="annot"><span class="annottext">Eff effs (Maybe EmulatorMessage) -&gt; Eff effs ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff effs (Maybe EmulatorMessage) -&gt; Eff effs ())
-&gt; Eff effs (Maybe EmulatorMessage) -&gt; Eff effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Priority
-&gt; SysCall effs2 EmulatorMessage a
-&gt; Eff effs (Maybe EmulatorMessage)
forall (effs :: [* -&gt; *]) systemEvent (effs2 :: [* -&gt; *]) a.
Member
  (Yield (EmSystemCall effs systemEvent a) (Maybe systemEvent))
  effs2 =&gt;
Priority
-&gt; SysCall effs systemEvent a -&gt; Eff effs2 (Maybe systemEvent)
</span><a href="Plutus.Trace.Scheduler.html#mkSysCall"><span class="hs-identifier hs-var">mkSysCall</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832025"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832024"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="annottext">Priority
</span><a href="Plutus.Trace.Scheduler.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MessageCall EmulatorMessage -&gt; SysCall effs2 EmulatorMessage a
forall a b. a -&gt; Either a b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(MessageCall EmulatorMessage -&gt; SysCall effs2 EmulatorMessage a)
-&gt; MessageCall EmulatorMessage -&gt; SysCall effs2 EmulatorMessage a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ThreadId -&gt; EmulatorMessage -&gt; MessageCall EmulatorMessage
forall systemEvent.
ThreadId -&gt; systemEvent -&gt; MessageCall systemEvent
</span><a href="Plutus.Trace.Scheduler.html#Message"><span class="hs-identifier hs-var">Message</span></a></span><span> </span><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621680832014"><span class="hs-identifier hs-var">threadId</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorMessage
</span><a href="Plutus.Trace.Emulator.Types.html#Freeze"><span class="hs-identifier hs-var">Freeze</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>    </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#ThawContractInstance"><span class="hs-identifier hs-type">ThawContractInstance</span></a></span><span> </span><span id="local-6989586621680832013"><span class="annot"><span class="annottext">ContractInstanceId
</span><a href="#local-6989586621680832013"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-98"></span><span>        </span><span id="local-6989586621680832012"><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621680832012"><span class="hs-identifier hs-var">threadId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ContractInstanceId -&gt; Eff effs ThreadId
forall (effs :: [* -&gt; *]).
(Member (State EmulatorThreads) effs,
 Member (Error EmulatorRuntimeError) effs) =&gt;
ContractInstanceId -&gt; Eff effs ThreadId
</span><a href="Plutus.Trace.Emulator.ContractInstance.html#getThread"><span class="hs-identifier hs-var">getThread</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceId
</span><a href="#local-6989586621680832013"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-99"></span><span>        </span><span class="hs-comment">-- see note [Freeze and Thaw]</span><span>
</span><span id="line-100"></span><span>        </span><span class="annot"><span class="annottext">Eff effs (Maybe EmulatorMessage) -&gt; Eff effs ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff effs (Maybe EmulatorMessage) -&gt; Eff effs ())
-&gt; Eff effs (Maybe EmulatorMessage) -&gt; Eff effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Priority
-&gt; SysCall effs2 EmulatorMessage a
-&gt; Eff effs (Maybe EmulatorMessage)
forall (effs :: [* -&gt; *]) systemEvent (effs2 :: [* -&gt; *]) a.
Member
  (Yield (EmSystemCall effs systemEvent a) (Maybe systemEvent))
  effs2 =&gt;
Priority
-&gt; SysCall effs systemEvent a -&gt; Eff effs2 (Maybe systemEvent)
</span><a href="Plutus.Trace.Scheduler.html#mkSysCall"><span class="hs-identifier hs-var">mkSysCall</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832025"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832024"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="annottext">Priority
</span><a href="Plutus.Trace.Scheduler.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ThreadCall effs2 EmulatorMessage a
-&gt; SysCall effs2 EmulatorMessage a
forall a b. b -&gt; Either a b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(ThreadCall effs2 EmulatorMessage a
 -&gt; SysCall effs2 EmulatorMessage a)
-&gt; ThreadCall effs2 EmulatorMessage a
-&gt; SysCall effs2 EmulatorMessage a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ThreadId -&gt; ThreadCall effs2 EmulatorMessage a
forall (effs :: [* -&gt; *]) systemEvent a.
ThreadId -&gt; ThreadCall effs systemEvent a
</span><a href="Plutus.Trace.Scheduler.html#Thaw"><span class="hs-identifier hs-var">Thaw</span></a></span><span> </span><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621680832012"><span class="hs-identifier hs-var">threadId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><span class="annottext">EmulatorControl x
</span><a href="Plutus.Trace.Effects.EmulatorControl.html#ChainState"><span class="hs-identifier hs-var">ChainState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(EmulatorState -&gt; x) -&gt; Eff effs x
forall s a (effs :: [* -&gt; *]).
Member (State s) effs =&gt;
(s -&gt; a) -&gt; Eff effs a
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">gets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting ChainState EmulatorState ChainState
-&gt; EmulatorState -&gt; ChainState
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="annot"><span class="annottext">Getting ChainState EmulatorState ChainState
Lens' EmulatorState ChainState
</span><a href="Wallet.Emulator.MultiAgent.html#chainState"><span class="hs-identifier hs-var">EM.chainState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>    </span><span class="annot"><span class="annottext">EmulatorControl x
</span><a href="Plutus.Trace.Effects.EmulatorControl.html#GetParams"><span class="hs-identifier hs-var">GetParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Params -&gt; Eff effs Params
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621680832023"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-103"></span><span>    </span><span class="annot"><span class="annottext">EmulatorControl x
</span><a href="Plutus.Trace.Effects.EmulatorControl.html#GetSlotConfig"><span class="hs-identifier hs-var">GetSlotConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SlotConfig -&gt; Eff effs SlotConfig
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">SlotConfig
</span><a href="#local-6989586621680832020"><span class="hs-identifier hs-var">slotCfg</span></a></span><span>
</span><span id="line-104"></span><span>    </span><span class="annot"><a href="Plutus.Trace.Effects.EmulatorControl.html#DiscardWallets"><span class="hs-identifier hs-type">DiscardWallets</span></a></span><span> </span><span id="local-6989586621680832010"><span class="annot"><span class="annottext">Wallet -&gt; Bool
</span><a href="#local-6989586621680832010"><span class="hs-identifier hs-var">discard</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (effs :: [* -&gt; *]).
Member (State EmulatorState) effs =&gt;
(EmulatorState -&gt; EmulatorState) -&gt; Eff effs ()
forall s (effs :: [* -&gt; *]).
Member (State s) effs =&gt;
(s -&gt; s) -&gt; Eff effs ()
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">modify</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-type">EmulatorState</span></a></span><span> </span><span class="annot"><span class="annottext">((EmulatorState -&gt; EmulatorState) -&gt; Eff effs ())
-&gt; (EmulatorState -&gt; EmulatorState) -&gt; Eff effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter
  EmulatorState
  EmulatorState
  (Map Wallet WalletState)
  (Map Wallet WalletState)
-&gt; (Map Wallet WalletState -&gt; Map Wallet WalletState)
-&gt; EmulatorState
-&gt; EmulatorState
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">over</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter
  EmulatorState
  EmulatorState
  (Map Wallet WalletState)
  (Map Wallet WalletState)
Lens' EmulatorState (Map Wallet WalletState)
</span><a href="Wallet.Emulator.MultiAgent.html#walletStates"><span class="hs-identifier hs-var">EM.walletStates</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Wallet -&gt; WalletState -&gt; Bool)
-&gt; Map Wallet WalletState -&gt; Map Wallet WalletState
forall k a. (k -&gt; a -&gt; Bool) -&gt; Map k a -&gt; Map k a
</span><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-var">Map.filterWithKey</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680832007"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680832007"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="annot"><span class="annottext">WalletState
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Bool
</span><a href="#local-6989586621680832010"><span class="hs-identifier hs-var">discard</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680832007"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span id="local-6989586621680831998"><span id="local-6989586621680831999"><span id="local-6989586621680832000"><span id="local-6989586621680832001"><span id="local-6989586621680832002"><span id="local-6989586621680832003"><span id="local-6989586621680832004"><span id="local-6989586621680832005"><span id="getSlotConfig"><span id="discardWallets"><span id="getParams"><span id="chainState"><span id="thawContractInstance"><span id="freezeContractInstance"><span id="agentState"><span id="setSigningProcess"><span class="hs-identifier">makeEffect</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">EmulatorControl</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-107"></span></pre></body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds     #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds           #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass      #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric       #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies  #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts    #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE GADTs               #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase          #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns      #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings   #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes          #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell     #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications    #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies        #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators       #-}</span><span>
</span><span id="line-17"></span><span class="hs-comment">{-

An effect for starting contract instances and calling endpoints on them.

-}</span><span>
</span><span id="line-22"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Plutus.Trace.Effects.RunContract</span><span class="hs-special">(</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#RunContract"><span class="hs-identifier">RunContract</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#StartContract"><span class="hs-identifier">StartContract</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#ContractConstraints"><span class="hs-identifier">ContractConstraints</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceTag"><span class="hs-identifier">ContractInstanceTag</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#activateContract"><span class="hs-identifier">activateContract</span></a></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#activateContractWallet"><span class="hs-identifier">activateContractWallet</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#callEndpoint"><span class="hs-identifier">callEndpoint</span></a></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#getContractState"><span class="hs-identifier">getContractState</span></a></span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#activeEndpoints"><span class="hs-identifier">activeEndpoints</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#observableState"><span class="hs-identifier">observableState</span></a></span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#walletInstanceTag"><span class="hs-identifier">walletInstanceTag</span></a></span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#handleRunContract"><span class="hs-identifier">handleRunContract</span></a></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#handleStartContract"><span class="hs-identifier">handleStartContract</span></a></span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#startContractThread"><span class="hs-identifier">startContractThread</span></a></span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier">Cardano.Api</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier">NetworkId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">Control.Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">preview</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">void</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Eff</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Member</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">interpret</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">send</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="../file:///nix/store/nkim7nifcqpdb4r433zhbv94ima3fwqb-natural-transformation-lib-natural-transformation-0.4-haddock-doc/share/doc/natural-transformation/html/src"><span class="hs-operator">(~&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer.Coroutine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Yield</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Error</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">throwError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">Control.Monad.Freer.Extras.Log</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">LogMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">logError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">mapLog</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer.Reader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Reader</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">ask</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer.State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">State</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer.TH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">makeEffect</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">JSON</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">mapMaybe</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/wjz55miww0csfph9nxy2109hrj7ylva5-profunctors-lib-profunctors-5.6-haddock-doc/share/doc/profunctors/html/src"><span class="hs-identifier">Data.Profunctor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/wjz55miww0csfph9nxy2109hrj7ylva5-profunctors-lib-profunctors-5.6-haddock-doc/share/doc/profunctors/html/src"><span class="hs-identifier">Profunctor</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/g8vgm61qs4g5v6yyv8hvi8bm9dvsf9sa-row-types-lib-row-types-1.0.1.2-haddock-doc/share/doc/row-types/html/src"><span class="hs-identifier">Data.Row.Internal</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">V</span></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.TypeLits</span></a></span><span> </span><span class="hs-keyword">qualified</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.html"><span class="hs-identifier">Plutus.Contract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Types.html#Contract"><span class="hs-identifier">Contract</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Request.html#HasEndpoint"><span class="hs-identifier">HasEndpoint</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html"><span class="hs-identifier">Plutus.Contract.Effects</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Effects.html#ActiveEndpoint"><span class="hs-identifier">ActiveEndpoint</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier">PABResp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Effects.html#ExposeEndpointResp"><span class="hs-identifier">ExposeEndpointResp</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#_ExposeEndpointReq"><span class="hs-identifier">_ExposeEndpointReq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Resumable.html"><span class="hs-identifier">Plutus.Contract.Resumable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Resumable.html#Request"><span class="hs-identifier">Request</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Resumable.html#rqRequest"><span class="hs-identifier">rqRequest</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Resumable.html#Requests"><span class="hs-identifier">Requests</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Schema.html"><span class="hs-identifier">Plutus.Contract.Schema</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Schema.html#Input"><span class="hs-identifier">Input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Schema.html#Output"><span class="hs-identifier">Output</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html"><span class="hs-identifier">Plutus.Contract.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Types.html#IsContract"><span class="hs-identifier">IsContract</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html#ResumableResult"><span class="hs-identifier">ResumableResult</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.ContractInstanceId.html"><span class="hs-identifier">Plutus.Trace.Effects.ContractInstanceId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Effects.ContractInstanceId.html#ContractInstanceIdEff"><span class="hs-identifier">ContractInstanceIdEff</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.ContractInstanceId.html#nextId"><span class="hs-identifier">nextId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.ContractInstance.html"><span class="hs-identifier">Plutus.Trace.Emulator.ContractInstance</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.ContractInstance.html#contractThread"><span class="hs-identifier">contractThread</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.ContractInstance.html#getThread"><span class="hs-identifier">getThread</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html"><span class="hs-identifier">Plutus.Trace.Emulator.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractHandle"><span class="hs-identifier">ContractHandle</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceState"><span class="hs-identifier">ContractInstanceState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceTag"><span class="hs-identifier">ContractInstanceTag</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>                                    </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier">EmulatorMessage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceStateRequest"><span class="hs-identifier">ContractInstanceStateRequest</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceStateResponse"><span class="hs-identifier">ContractInstanceStateResponse</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EndpointCall"><span class="hs-identifier">EndpointCall</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>                                    </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorRuntimeError"><span class="hs-identifier">EmulatorRuntimeError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorJSONDecodingError"><span class="hs-identifier">EmulatorJSONDecodingError</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorThreads"><span class="hs-identifier">EmulatorThreads</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>                                    </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#UserThreadMsg"><span class="hs-identifier">UserThreadMsg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#UserThreadErr"><span class="hs-identifier">UserThreadErr</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#walletInstanceTag"><span class="hs-identifier">walletInstanceTag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html"><span class="hs-identifier">Plutus.Trace.Scheduler</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#AgentSystemCall"><span class="hs-identifier">AgentSystemCall</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html#EmSystemCall"><span class="hs-identifier">EmSystemCall</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html#MessageCall"><span class="hs-identifier">MessageCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#Message"><span class="hs-identifier">Message</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html#Priority"><span class="hs-identifier">Priority</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Tag.html#Tag"><span class="hs-identifier">Tag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html#ThreadId"><span class="hs-identifier">ThreadId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html#fork"><span class="hs-identifier">fork</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>                               </span><span class="annot"><a href="Plutus.Trace.Scheduler.html#mkSysCall"><span class="hs-identifier">mkSysCall</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html#sleep"><span class="hs-identifier">sleep</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html"><span class="hs-identifier">Wallet.Emulator.MultiAgent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier">EmulatorEvent'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffect"><span class="hs-identifier">MultiAgentEffect</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#handleMultiAgentEffects"><span class="hs-identifier">handleMultiAgentEffects</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html"><span class="hs-identifier">Wallet.Emulator.Wallet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier">Wallet</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Types.html"><span class="hs-identifier">Wallet.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Types.html#EndpointDescription"><span class="hs-identifier">EndpointDescription</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Types.html#EndpointValue"><span class="hs-identifier">EndpointValue</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-keyword">type</span><span> </span><span id="ContractConstraints"><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#ContractConstraints"><span class="hs-identifier hs-var">ContractConstraints</span></a></span></span><span> </span><span id="local-6989586621680832264"><span class="annot"><a href="#local-6989586621680832264"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/g8vgm61qs4g5v6yyv8hvi8bm9dvsf9sa-row-types-lib-row-types-1.0.1.2-haddock-doc/share/doc/row-types/html/src"><span class="hs-identifier hs-type">V.Forall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832264"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/g8vgm61qs4g5v6yyv8hvi8bm9dvsf9sa-row-types-lib-row-types-1.0.1.2-haddock-doc/share/doc/row-types/html/src"><span class="hs-identifier hs-type">V.Unconstrained1</span></a></span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/g8vgm61qs4g5v6yyv8hvi8bm9dvsf9sa-row-types-lib-row-types-1.0.1.2-haddock-doc/share/doc/row-types/html/src"><span class="hs-identifier hs-type">V.Forall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Schema.html#Input"><span class="hs-identifier hs-type">Input</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832264"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/g8vgm61qs4g5v6yyv8hvi8bm9dvsf9sa-row-types-lib-row-types-1.0.1.2-haddock-doc/share/doc/row-types/html/src"><span class="hs-identifier hs-type">V.Unconstrained1</span></a></span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/g8vgm61qs4g5v6yyv8hvi8bm9dvsf9sa-row-types-lib-row-types-1.0.1.2-haddock-doc/share/doc/row-types/html/src"><span class="hs-identifier hs-type">V.AllUniqueLabels</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Schema.html#Input"><span class="hs-identifier hs-type">Input</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832264"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/g8vgm61qs4g5v6yyv8hvi8bm9dvsf9sa-row-types-lib-row-types-1.0.1.2-haddock-doc/share/doc/row-types/html/src"><span class="hs-identifier hs-type">V.AllUniqueLabels</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832264"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/g8vgm61qs4g5v6yyv8hvi8bm9dvsf9sa-row-types-lib-row-types-1.0.1.2-haddock-doc/share/doc/row-types/html/src"><span class="hs-identifier hs-type">V.Forall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Schema.html#Input"><span class="hs-identifier hs-type">Input</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832264"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.FromJSON</span></a></span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/g8vgm61qs4g5v6yyv8hvi8bm9dvsf9sa-row-types-lib-row-types-1.0.1.2-haddock-doc/share/doc/row-types/html/src"><span class="hs-identifier hs-type">V.Forall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Schema.html#Input"><span class="hs-identifier hs-type">Input</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832264"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/g8vgm61qs4g5v6yyv8hvi8bm9dvsf9sa-row-types-lib-row-types-1.0.1.2-haddock-doc/share/doc/row-types/html/src"><span class="hs-identifier hs-type">V.Forall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832264"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.FromJSON</span></a></span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/g8vgm61qs4g5v6yyv8hvi8bm9dvsf9sa-row-types-lib-row-types-1.0.1.2-haddock-doc/share/doc/row-types/html/src"><span class="hs-identifier hs-type">V.Forall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832264"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-comment">-- | Start a Plutus contract (client side)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">data</span><span> </span><span id="StartContract"><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#StartContract"><span class="hs-identifier hs-var">StartContract</span></a></span></span><span> </span><span id="local-6989586621680832260"><span class="annot"><a href="#local-6989586621680832260"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-86"></span><span>    </span><span id="local-6989586621680832255"><span id="local-6989586621680832256"><span id="local-6989586621680832257"><span id="local-6989586621680832258"><span id="local-6989586621680832259"><span id="ActivateContract"><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#ActivateContract"><span class="hs-identifier hs-var">ActivateContract</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Types.html#IsContract"><span class="hs-identifier hs-type">IsContract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832259"><span class="hs-identifier hs-type">contract</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#ContractConstraints"><span class="hs-identifier hs-type">ContractConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832258"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832257"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.FromJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832257"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832257"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832256"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832256"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.FromJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832256"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680832259"><span class="hs-identifier hs-type">contract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832256"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832258"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832257"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832255"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceTag"><span class="hs-identifier hs-type">ContractInstanceTag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#StartContract"><span class="hs-identifier hs-type">StartContract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractHandle"><span class="hs-identifier hs-type">ContractHandle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832256"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832258"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832257"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span id="activateContract"><span id="local-6989586621680832537"><span id="local-6989586621680832538"><span id="local-6989586621680832540"><span id="local-6989586621680832541"><span id="local-6989586621680832543"><span id="local-6989586621680832589"><span class="hs-identifier">makeEffect</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">StartContract</span></span></span></span></span></span></span></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="hs-comment">-- | Run a Plutus contract (client side)</span><span>
</span><span id="line-91"></span><span class="hs-keyword">data</span><span> </span><span id="RunContract"><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#RunContract"><span class="hs-identifier hs-var">RunContract</span></a></span></span><span> </span><span id="local-6989586621680832253"><span class="annot"><a href="#local-6989586621680832253"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-92"></span><span>    </span><span id="CallEndpointP"><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#CallEndpointP"><span class="hs-identifier hs-var">CallEndpointP</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680832251"><span class="annot"><a href="#local-6989586621680832251"><span class="hs-identifier hs-type">l</span></a></span></span><span> </span><span id="local-6989586621680832250"><span class="annot"><a href="#local-6989586621680832250"><span class="hs-identifier hs-type">ep</span></a></span></span><span> </span><span id="local-6989586621680832249"><span class="annot"><a href="#local-6989586621680832249"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680832248"><span class="annot"><a href="#local-6989586621680832248"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680832247"><span class="annot"><a href="#local-6989586621680832247"><span class="hs-identifier hs-type">e</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#ContractConstraints"><span class="hs-identifier hs-type">ContractConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832248"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Request.html#HasEndpoint"><span class="hs-identifier hs-type">HasEndpoint</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832251"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832250"><span class="hs-identifier hs-type">ep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832248"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832250"><span class="hs-identifier hs-type">ep</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832251"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractHandle"><span class="hs-identifier hs-type">ContractHandle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832249"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832248"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832247"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680832250"><span class="hs-identifier hs-type">ep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#RunContract"><span class="hs-identifier hs-type">RunContract</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>    </span><span id="GetContractState"><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#GetContractState"><span class="hs-identifier hs-var">GetContractState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680832245"><span class="annot"><a href="#local-6989586621680832245"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680832244"><span class="annot"><a href="#local-6989586621680832244"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680832243"><span class="annot"><a href="#local-6989586621680832243"><span class="hs-identifier hs-type">e</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#ContractConstraints"><span class="hs-identifier hs-type">ContractConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832244"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.FromJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832243"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.FromJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832245"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832245"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractHandle"><span class="hs-identifier hs-type">ContractHandle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832245"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832244"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832243"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#RunContract"><span class="hs-identifier hs-type">RunContract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceState"><span class="hs-identifier hs-type">ContractInstanceState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832245"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832244"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832243"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span id="callEndpointP"><span id="getContractState"><span id="local-6989586621680832320"><span id="local-6989586621680832321"><span id="local-6989586621680832322"><span id="local-6989586621680832551"><span id="local-6989586621680832552"><span id="local-6989586621680832555"><span id="local-6989586621680832556"><span id="local-6989586621680832558"><span id="local-6989586621680832570"><span id="local-6989586621680832577"><span class="hs-identifier">makeEffect</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">RunContract</span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="hs-comment">-- | Call an endpoint on a contract instance.</span><span>
</span><span id="line-98"></span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#callEndpoint"><span class="hs-identifier hs-type">callEndpoint</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680832241"><span class="annot"><a href="#local-6989586621680832241"><span class="hs-identifier hs-type">l</span></a></span></span><span> </span><span id="local-6989586621680832240"><span class="annot"><a href="#local-6989586621680832240"><span class="hs-identifier hs-type">ep</span></a></span></span><span> </span><span id="local-6989586621680832239"><span class="annot"><a href="#local-6989586621680832239"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680832238"><span class="annot"><a href="#local-6989586621680832238"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680832237"><span class="annot"><a href="#local-6989586621680832237"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621680832236"><span class="annot"><a href="#local-6989586621680832236"><span class="hs-identifier hs-type">effs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832240"><span class="hs-identifier hs-type">ep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#ContractConstraints"><span class="hs-identifier hs-type">ContractConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832238"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Request.html#HasEndpoint"><span class="hs-identifier hs-type">HasEndpoint</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832241"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832240"><span class="hs-identifier hs-type">ep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832238"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#RunContract"><span class="hs-identifier hs-type">RunContract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832236"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractHandle"><span class="hs-identifier hs-type">ContractHandle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832239"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832238"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832237"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680832240"><span class="hs-identifier hs-type">ep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832236"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span id="callEndpoint"><span class="annot"><span class="annottext">callEndpoint :: ContractHandle w s e -&gt; ep -&gt; Eff effs ()
</span><a href="Plutus.Trace.Effects.RunContract.html#callEndpoint"><span class="hs-identifier hs-var hs-var">callEndpoint</span></a></span></span><span> </span><span id="local-6989586621680832235"><span class="annot"><span class="annottext">ContractHandle w s e
</span><a href="#local-6989586621680832235"><span class="hs-identifier hs-var">hdl</span></a></span></span><span> </span><span id="local-6989586621680832234"><span class="annot"><span class="annottext">ep
</span><a href="#local-6989586621680832234"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy l -&gt; ContractHandle w s e -&gt; ep -&gt; Eff effs ()
forall (l :: Symbol) ep w (s :: Row *) e (effs :: [* -&gt; *]).
(ContractConstraints s, HasEndpoint l ep s, ToJSON ep,
 Member RunContract effs) =&gt;
Proxy l -&gt; ContractHandle w s e -&gt; ep -&gt; Eff effs ()
</span><a href="Plutus.Trace.Effects.RunContract.html#callEndpointP"><span class="hs-identifier hs-var">callEndpointP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy l
forall k (t :: k). Proxy t
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832241"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ContractHandle w s e
</span><a href="#local-6989586621680832235"><span class="hs-identifier hs-var">hdl</span></a></span><span> </span><span class="annot"><span class="annottext">ep
</span><a href="#local-6989586621680832234"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-comment">-- | Like 'activateContract', but using 'walletInstanceTag' for the tag.</span><span>
</span><span id="line-104"></span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#activateContractWallet"><span class="hs-identifier hs-type">activateContractWallet</span></a></span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680832232"><span class="annot"><a href="#local-6989586621680832232"><span class="hs-identifier hs-type">contract</span></a></span></span><span> </span><span id="local-6989586621680832231"><span class="annot"><a href="#local-6989586621680832231"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680832230"><span class="annot"><a href="#local-6989586621680832230"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680832229"><span class="annot"><a href="#local-6989586621680832229"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621680832228"><span class="annot"><a href="#local-6989586621680832228"><span class="hs-identifier hs-type">effs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html#IsContract"><span class="hs-identifier hs-type">IsContract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832232"><span class="hs-identifier hs-type">contract</span></a></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#ContractConstraints"><span class="hs-identifier hs-type">ContractConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832230"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832229"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832229"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.FromJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832229"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832231"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.FromJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832231"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#StartContract"><span class="hs-identifier hs-type">StartContract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832228"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832231"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680832232"><span class="hs-identifier hs-type">contract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832231"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832230"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832229"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832228"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractHandle"><span class="hs-identifier hs-type">ContractHandle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832231"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832230"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832229"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span id="activateContractWallet"><span class="annot"><span class="annottext">activateContractWallet :: Wallet -&gt; contract w s e () -&gt; Eff effs (ContractHandle w s e)
</span><a href="Plutus.Trace.Effects.RunContract.html#activateContractWallet"><span class="hs-identifier hs-var hs-var">activateContractWallet</span></a></span></span><span> </span><span id="local-6989586621680832227"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680832227"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621680832226"><span class="annot"><span class="annottext">contract w s e ()
</span><a href="#local-6989586621680832226"><span class="hs-identifier hs-var">contract</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Wallet
-&gt; contract w s e ()
-&gt; ContractInstanceTag
-&gt; Eff effs (ContractHandle w s e)
forall (contract :: * -&gt; Row * -&gt; * -&gt; * -&gt; *) (s :: Row *) e w a
       (effs :: [* -&gt; *]).
(IsContract contract, ContractConstraints s, Show e, FromJSON e,
 ToJSON e, ToJSON w, Monoid w, FromJSON w,
 Member StartContract effs) =&gt;
Wallet
-&gt; contract w s e a
-&gt; ContractInstanceTag
-&gt; Eff effs (ContractHandle w s e)
</span><a href="Plutus.Trace.Effects.RunContract.html#activateContract"><span class="hs-identifier hs-var">activateContract</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680832227"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">contract w s e ()
</span><a href="#local-6989586621680832226"><span class="hs-identifier hs-var">contract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; ContractInstanceTag
</span><a href="Plutus.Trace.Emulator.Types.html#walletInstanceTag"><span class="hs-identifier hs-var">walletInstanceTag</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680832227"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-comment">-- | Handle the 'RunContract' effect by running each contract instance in an</span><span>
</span><span id="line-122"></span><span class="hs-comment">--   emulator thread.</span><span>
</span><span id="line-123"></span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#handleRunContract"><span class="hs-identifier hs-type">handleRunContract</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680832225"><span class="annot"><a href="#local-6989586621680832225"><span class="hs-identifier hs-type">effs</span></a></span></span><span> </span><span id="local-6989586621680832224"><span class="annot"><a href="#local-6989586621680832224"><span class="hs-identifier hs-type">effs2</span></a></span></span><span> </span><span id="local-6989586621680832223"><span class="annot"><a href="#local-6989586621680832223"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorThreads"><span class="hs-identifier hs-type">EmulatorThreads</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832224"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorRuntimeError"><span class="hs-identifier hs-type">EmulatorRuntimeError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832224"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorRuntimeError"><span class="hs-identifier hs-type">EmulatorRuntimeError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832225"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832225"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorThreads"><span class="hs-identifier hs-type">EmulatorThreads</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832225"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Reader</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html#ThreadId"><span class="hs-identifier hs-type">ThreadId</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832225"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#EmSystemCall"><span class="hs-identifier hs-type">EmSystemCall</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832224"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832223"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832225"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#RunContract"><span class="hs-identifier hs-type">RunContract</span></a></span><span>
</span><span id="line-133"></span><span>    </span><span class="annot"><a href="../file:///nix/store/nkim7nifcqpdb4r433zhbv94ima3fwqb-natural-transformation-lib-natural-transformation-0.4-haddock-doc/share/doc/natural-transformation/html/src"><span class="hs-operator hs-type">~&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832225"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-134"></span><span id="handleRunContract"><span class="annot"><span class="annottext">handleRunContract :: RunContract ~&gt; Eff effs
</span><a href="Plutus.Trace.Effects.RunContract.html#handleRunContract"><span class="hs-identifier hs-var hs-var">handleRunContract</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-135"></span><span>    </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#CallEndpointP"><span class="hs-identifier hs-type">CallEndpointP</span></a></span><span> </span><span id="local-6989586621680832222"><span class="annot"><span class="annottext">Proxy l
</span><a href="#local-6989586621680832222"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621680832221"><span class="annot"><span class="annottext">ContractHandle w s e
</span><a href="#local-6989586621680832221"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621680832220"><span class="annot"><span class="annottext">ep
</span><a href="#local-6989586621680832220"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy l -&gt; ContractHandle w s e -&gt; ep -&gt; Eff effs ()
forall w (s :: Row *) (l :: Symbol) e ep (effs :: [* -&gt; *])
       (effs2 :: [* -&gt; *]) a.
(HasEndpoint l ep s, ToJSON ep,
 Member (State EmulatorThreads) effs2,
 Member (Error EmulatorRuntimeError) effs2,
 Member
   (Yield
      (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage))
   effs) =&gt;
Proxy l -&gt; ContractHandle w s e -&gt; ep -&gt; Eff effs ()
</span><a href="Plutus.Trace.Effects.RunContract.html#handleCallEndpoint"><span class="hs-identifier hs-var">handleCallEndpoint</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832225"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832224"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832223"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy l
</span><a href="#local-6989586621680832222"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">ContractHandle w s e
</span><a href="#local-6989586621680832221"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ep
</span><a href="#local-6989586621680832220"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-136"></span><span>    </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#GetContractState"><span class="hs-identifier hs-type">GetContractState</span></a></span><span> </span><span id="local-6989586621680832218"><span class="annot"><span class="annottext">ContractHandle w s e
</span><a href="#local-6989586621680832218"><span class="hs-identifier hs-var">hdl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-137"></span><span>        </span><span class="annot"><span class="annottext">(LogMsg UserThreadMsg ~&gt; Eff effs)
-&gt; Eff (LogMsg UserThreadMsg : effs) ~&gt; Eff effs
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(UserThreadMsg -&gt; EmulatorEvent')
-&gt; LogMsg UserThreadMsg ~&gt; Eff effs
forall a b (effs :: [* -&gt; *]).
Member (LogMsg b) effs =&gt;
(a -&gt; b) -&gt; LogMsg a ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">mapLog</span></a></span><span> </span><span class="annot"><span class="annottext">UserThreadMsg -&gt; EmulatorEvent'
</span><a href="Wallet.Emulator.MultiAgent.html#UserThreadEvent"><span class="hs-identifier hs-var">UserThreadEvent</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>            </span><span class="annot"><span class="annottext">(Eff (LogMsg UserThreadMsg : effs) (ContractInstanceState w s e ())
 -&gt; Eff effs (ContractInstanceState w s e ()))
-&gt; Eff
     (LogMsg UserThreadMsg : effs) (ContractInstanceState w s e ())
-&gt; Eff effs (ContractInstanceState w s e ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ContractHandle w s e
-&gt; Eff
     (LogMsg UserThreadMsg : effs) (ContractInstanceState w s e ())
forall w (s :: Row *) e (effs :: [* -&gt; *]) (effs2 :: [* -&gt; *]) a.
(Member (State EmulatorThreads) effs,
 Member
   (Yield
      (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage))
   effs,
 Member (Reader ThreadId) effs,
 Member (Error EmulatorRuntimeError) effs, FromJSON e, FromJSON w,
 Member (LogMsg UserThreadMsg) effs) =&gt;
ContractHandle w s e -&gt; Eff effs (ContractInstanceState w s e ())
</span><a href="Plutus.Trace.Effects.RunContract.html#handleGetContractState"><span class="hs-identifier hs-var">handleGetContractState</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#UserThreadMsg"><span class="hs-identifier hs-type">UserThreadMsg</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621680832225"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832224"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832223"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="annottext">ContractHandle w s e
</span><a href="#local-6989586621680832218"><span class="hs-identifier hs-var">hdl</span></a></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-comment">-- | Handle the 'StartContract' effect by starting each contract instance in an</span><span>
</span><span id="line-141"></span><span class="hs-comment">--   emulator thread.</span><span>
</span><span id="line-142"></span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#handleStartContract"><span class="hs-identifier hs-type">handleStartContract</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680832215"><span class="annot"><a href="#local-6989586621680832215"><span class="hs-identifier hs-type">effs</span></a></span></span><span> </span><span id="local-6989586621680832214"><span class="annot"><a href="#local-6989586621680832214"><span class="hs-identifier hs-type">effs2</span></a></span></span><span> </span><span id="local-6989586621680832213"><span class="annot"><a href="#local-6989586621680832213"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorThreads"><span class="hs-identifier hs-type">EmulatorThreads</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832214"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorRuntimeError"><span class="hs-identifier hs-type">EmulatorRuntimeError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832214"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffect"><span class="hs-identifier hs-type">MultiAgentEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832214"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832214"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-147"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.ContractInstanceId.html#ContractInstanceIdEff"><span class="hs-identifier hs-type">ContractInstanceIdEff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832215"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#EmSystemCall"><span class="hs-identifier hs-type">EmSystemCall</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832214"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832213"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832215"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">NetworkId</span></a></span><span>
</span><span id="line-151"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#StartContract"><span class="hs-identifier hs-type">StartContract</span></a></span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><a href="../file:///nix/store/nkim7nifcqpdb4r433zhbv94ima3fwqb-natural-transformation-lib-natural-transformation-0.4-haddock-doc/share/doc/natural-transformation/html/src"><span class="hs-operator hs-type">~&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832215"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-153"></span><span id="handleStartContract"><span class="annot"><span class="annottext">handleStartContract :: NetworkId -&gt; StartContract ~&gt; Eff effs
</span><a href="Plutus.Trace.Effects.RunContract.html#handleStartContract"><span class="hs-identifier hs-var hs-var">handleStartContract</span></a></span></span><span> </span><span id="local-6989586621680832212"><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621680832212"><span class="hs-identifier hs-var">networkId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-154"></span><span>    </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#ActivateContract"><span class="hs-identifier hs-type">ActivateContract</span></a></span><span> </span><span id="local-6989586621680832211"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680832211"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621680832210"><span class="annot"><span class="annottext">contract w s e a
</span><a href="#local-6989586621680832210"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680832209"><span class="annot"><span class="annottext">ContractInstanceTag
</span><a href="#local-6989586621680832209"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NetworkId
-&gt; Wallet
-&gt; ContractInstanceTag
-&gt; Contract w s e ()
-&gt; Eff effs (ContractHandle w s e)
forall w (s :: Row *) e (effs :: [* -&gt; *]) (effs2 :: [* -&gt; *]) a.
(ContractConstraints s, Member ContractInstanceIdEff effs,
 Member (State EmulatorThreads) effs2,
 Member MultiAgentEffect effs2,
 Member (Error EmulatorRuntimeError) effs2,
 Member (LogMsg EmulatorEvent') effs2,
 Member
   (Yield
      (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage))
   effs,
 Show e, ToJSON e, ToJSON w, Monoid w) =&gt;
NetworkId
-&gt; Wallet
-&gt; ContractInstanceTag
-&gt; Contract w s e ()
-&gt; Eff effs (ContractHandle w s e)
</span><a href="Plutus.Trace.Effects.RunContract.html#handleActivate"><span class="hs-identifier hs-var">handleActivate</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832215"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832214"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832213"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621680832212"><span class="hs-identifier hs-var">networkId</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680832211"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceTag
</span><a href="#local-6989586621680832209"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Contract w s e a -&gt; Contract w s e ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">contract w s e a -&gt; Contract w s e a
forall (c :: * -&gt; Row * -&gt; * -&gt; * -&gt; *) w (s :: Row *) e a.
IsContract c =&gt;
c w s e a -&gt; Contract w s e a
</span><a href="Plutus.Contract.Types.html#toContract"><span class="hs-identifier hs-var">toContract</span></a></span><span> </span><span class="annot"><span class="annottext">contract w s e a
</span><a href="#local-6989586621680832210"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#handleGetContractState"><span class="hs-identifier hs-type">handleGetContractState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680832492"><span class="annot"><a href="#local-6989586621680832492"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680832491"><span class="annot"><a href="#local-6989586621680832491"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680832493"><span class="annot"><a href="#local-6989586621680832493"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621680832498"><span class="annot"><a href="#local-6989586621680832498"><span class="hs-identifier hs-type">effs</span></a></span></span><span> </span><span id="local-6989586621680832497"><span class="annot"><a href="#local-6989586621680832497"><span class="hs-identifier hs-type">effs2</span></a></span></span><span> </span><span id="local-6989586621680832496"><span class="annot"><a href="#local-6989586621680832496"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorThreads"><span class="hs-identifier hs-type">EmulatorThreads</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832498"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#EmSystemCall"><span class="hs-identifier hs-type">EmSystemCall</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832497"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832496"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832498"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-160"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Reader</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html#ThreadId"><span class="hs-identifier hs-type">ThreadId</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832498"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorRuntimeError"><span class="hs-identifier hs-type">EmulatorRuntimeError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832498"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.FromJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832493"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.FromJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832492"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-164"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#UserThreadMsg"><span class="hs-identifier hs-type">UserThreadMsg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832498"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-165"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractHandle"><span class="hs-identifier hs-type">ContractHandle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832492"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832491"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832493"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832498"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceState"><span class="hs-identifier hs-type">ContractInstanceState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832492"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832491"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832493"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span id="handleGetContractState"><span class="annot"><span class="annottext">handleGetContractState :: ContractHandle w s e -&gt; Eff effs (ContractInstanceState w s e ())
</span><a href="Plutus.Trace.Effects.RunContract.html#handleGetContractState"><span class="hs-identifier hs-var hs-var">handleGetContractState</span></a></span></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractHandle"><span class="hs-identifier hs-type">ContractHandle</span></a></span><span class="hs-special">{</span><span id="local-6989586621680832205"><span class="annot"><span class="annottext">ContractInstanceId
chInstanceId :: forall w (s :: Row *) e. ContractHandle w s e -&gt; ContractInstanceId
chInstanceId :: ContractInstanceId
</span><a href="Plutus.Trace.Emulator.Types.html#chInstanceId"><span class="hs-identifier hs-var hs-var">chInstanceId</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-169"></span><span>    </span><span id="local-6989586621680832203"><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621680832203"><span class="hs-identifier hs-var">ownId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (effs :: [* -&gt; *]).
Member (Reader ThreadId) effs =&gt;
Eff effs ThreadId
forall r (effs :: [* -&gt; *]). Member (Reader r) effs =&gt; Eff effs r
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">ask</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#ThreadId"><span class="hs-identifier hs-type">ThreadId</span></a></span><span>
</span><span id="line-170"></span><span>    </span><span id="local-6989586621680832202"><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621680832202"><span class="hs-identifier hs-var">threadId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ContractInstanceId -&gt; Eff effs ThreadId
forall (effs :: [* -&gt; *]).
(Member (State EmulatorThreads) effs,
 Member (Error EmulatorRuntimeError) effs) =&gt;
ContractInstanceId -&gt; Eff effs ThreadId
</span><a href="Plutus.Trace.Emulator.ContractInstance.html#getThread"><span class="hs-identifier hs-var">getThread</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceId
</span><a href="#local-6989586621680832205"><span class="hs-identifier hs-var">chInstanceId</span></a></span><span>
</span><span id="line-171"></span><span>    </span><span class="annot"><span class="annottext">Eff effs (Maybe EmulatorMessage) -&gt; Eff effs ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff effs (Maybe EmulatorMessage) -&gt; Eff effs ())
-&gt; Eff effs (Maybe EmulatorMessage) -&gt; Eff effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Priority
-&gt; SysCall effs2 EmulatorMessage a
-&gt; Eff effs (Maybe EmulatorMessage)
forall (effs :: [* -&gt; *]) systemEvent (effs2 :: [* -&gt; *]) a.
Member
  (Yield (EmSystemCall effs systemEvent a) (Maybe systemEvent))
  effs2 =&gt;
Priority
-&gt; SysCall effs systemEvent a -&gt; Eff effs2 (Maybe systemEvent)
</span><a href="Plutus.Trace.Scheduler.html#mkSysCall"><span class="hs-identifier hs-var">mkSysCall</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832497"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832496"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="annottext">Priority
</span><a href="Plutus.Trace.Scheduler.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MessageCall EmulatorMessage -&gt; SysCall effs2 EmulatorMessage a
forall a b. a -&gt; Either a b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(MessageCall EmulatorMessage -&gt; SysCall effs2 EmulatorMessage a)
-&gt; MessageCall EmulatorMessage -&gt; SysCall effs2 EmulatorMessage a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ThreadId -&gt; EmulatorMessage -&gt; MessageCall EmulatorMessage
forall systemEvent.
ThreadId -&gt; systemEvent -&gt; MessageCall systemEvent
</span><a href="Plutus.Trace.Scheduler.html#Message"><span class="hs-identifier hs-var">Message</span></a></span><span> </span><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621680832202"><span class="hs-identifier hs-var">threadId</span></a></span><span> </span><span class="annot"><span class="annottext">(EmulatorMessage -&gt; MessageCall EmulatorMessage)
-&gt; EmulatorMessage -&gt; MessageCall EmulatorMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ThreadId -&gt; EmulatorMessage
</span><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceStateRequest"><span class="hs-identifier hs-var">ContractInstanceStateRequest</span></a></span><span> </span><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621680832203"><span class="hs-identifier hs-var">ownId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680832200"><span class="annot"><span class="annottext">checkResponse :: Maybe EmulatorMessage -&gt; Eff effs (ContractInstanceState w s e ())
</span><a href="#local-6989586621680832200"><span class="hs-identifier hs-var hs-var">checkResponse</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-174"></span><span>            </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceStateResponse"><span class="hs-identifier hs-type">ContractInstanceStateResponse</span></a></span><span> </span><span id="local-6989586621680832199"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680832199"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-175"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Result (ContractInstanceState w s e ())
forall a. FromJSON a =&gt; Value -&gt; Result a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">JSON.fromJSON</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceState"><span class="hs-identifier hs-type">ContractInstanceState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832492"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832491"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832493"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680832199"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-176"></span><span>                    </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.Error</span></a></span><span> </span><span id="local-6989586621680832196"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680832196"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-177"></span><span>                        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680832195"><span class="annot"><span class="annottext">msg :: EmulatorRuntimeError
</span><a href="#local-6989586621680832195"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Value -&gt; EmulatorRuntimeError
</span><a href="Plutus.Trace.Emulator.Types.html#EmulatorJSONDecodingError"><span class="hs-identifier hs-var">EmulatorJSONDecodingError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680832196"><span class="hs-identifier hs-var">e'</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680832199"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-178"></span><span>                        </span><span class="annot"><span class="annottext">UserThreadMsg -&gt; Eff effs ()
forall a (effs :: [* -&gt; *]).
Member (LogMsg a) effs =&gt;
a -&gt; Eff effs ()
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">logError</span></a></span><span> </span><span class="annot"><span class="annottext">(UserThreadMsg -&gt; Eff effs ()) -&gt; UserThreadMsg -&gt; Eff effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorRuntimeError -&gt; UserThreadMsg
</span><a href="Plutus.Trace.Emulator.Types.html#UserThreadErr"><span class="hs-identifier hs-var">UserThreadErr</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorRuntimeError
</span><a href="#local-6989586621680832195"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-179"></span><span>                        </span><span class="annot"><span class="annottext">EmulatorRuntimeError -&gt; Eff effs (ContractInstanceState w s e ())
forall e (effs :: [* -&gt; *]) a.
Member (Error e) effs =&gt;
e -&gt; Eff effs a
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorRuntimeError
</span><a href="#local-6989586621680832195"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-180"></span><span>                    </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.Success</span></a></span><span> </span><span id="local-6989586621680832193"><span class="annot"><span class="annottext">ContractInstanceState w s e ()
</span><a href="#local-6989586621680832193"><span class="hs-identifier hs-var">event'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ContractInstanceState w s e ()
-&gt; Eff effs (ContractInstanceState w s e ())
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceState w s e ()
</span><a href="#local-6989586621680832193"><span class="hs-identifier hs-var">event'</span></a></span><span>
</span><span id="line-181"></span><span>            </span><span class="annot"><span class="annottext">Maybe EmulatorMessage
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Priority -&gt; Eff effs (Maybe EmulatorMessage)
forall (effs :: [* -&gt; *]) systemEvent (effs2 :: [* -&gt; *]) a.
Member
  (Yield (EmSystemCall effs systemEvent a) (Maybe systemEvent))
  effs2 =&gt;
Priority -&gt; Eff effs2 (Maybe systemEvent)
</span><a href="Plutus.Trace.Scheduler.html#sleep"><span class="hs-identifier hs-var">sleep</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832497"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832496"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="annottext">Priority
</span><a href="Plutus.Trace.Scheduler.html#Sleeping"><span class="hs-identifier hs-var">Sleeping</span></a></span><span> </span><span class="annot"><span class="annottext">Eff effs (Maybe EmulatorMessage)
-&gt; (Maybe EmulatorMessage
    -&gt; Eff effs (ContractInstanceState w s e ()))
-&gt; Eff effs (ContractInstanceState w s e ())
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EmulatorMessage -&gt; Eff effs (ContractInstanceState w s e ())
</span><a href="#local-6989586621680832200"><span class="hs-identifier hs-var">checkResponse</span></a></span><span>
</span><span id="line-182"></span><span>    </span><span class="annot"><span class="annottext">Priority -&gt; Eff effs (Maybe EmulatorMessage)
forall (effs :: [* -&gt; *]) systemEvent (effs2 :: [* -&gt; *]) a.
Member
  (Yield (EmSystemCall effs systemEvent a) (Maybe systemEvent))
  effs2 =&gt;
Priority -&gt; Eff effs2 (Maybe systemEvent)
</span><a href="Plutus.Trace.Scheduler.html#sleep"><span class="hs-identifier hs-var">sleep</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832497"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832496"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="annottext">Priority
</span><a href="Plutus.Trace.Scheduler.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Eff effs (Maybe EmulatorMessage)
-&gt; (Maybe EmulatorMessage
    -&gt; Eff effs (ContractInstanceState w s e ()))
-&gt; Eff effs (ContractInstanceState w s e ())
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EmulatorMessage -&gt; Eff effs (ContractInstanceState w s e ())
</span><a href="#local-6989586621680832200"><span class="hs-identifier hs-var">checkResponse</span></a></span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#handleActivate"><span class="hs-identifier hs-type">handleActivate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680832474"><span class="annot"><a href="#local-6989586621680832474"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680832481"><span class="annot"><a href="#local-6989586621680832481"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680832475"><span class="annot"><a href="#local-6989586621680832475"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621680832479"><span class="annot"><a href="#local-6989586621680832479"><span class="hs-identifier hs-type">effs</span></a></span></span><span> </span><span id="local-6989586621680832478"><span class="annot"><a href="#local-6989586621680832478"><span class="hs-identifier hs-type">effs2</span></a></span></span><span> </span><span id="local-6989586621680832476"><span class="annot"><a href="#local-6989586621680832476"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#ContractConstraints"><span class="hs-identifier hs-type">ContractConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832481"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.ContractInstanceId.html#ContractInstanceIdEff"><span class="hs-identifier hs-type">ContractInstanceIdEff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832479"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorThreads"><span class="hs-identifier hs-type">EmulatorThreads</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832478"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-188"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffect"><span class="hs-identifier hs-type">MultiAgentEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832478"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-189"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorRuntimeError"><span class="hs-identifier hs-type">EmulatorRuntimeError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832478"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832478"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#EmSystemCall"><span class="hs-identifier hs-type">EmSystemCall</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832478"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832476"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832479"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832475"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832475"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832474"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832474"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r16vjy39pj2p47ag6d6qd397xdpngrlp-cardano-api-lib-cardano-api-1.35.4-haddock-doc/share/doc/cardano-api/html/src"><span class="hs-identifier hs-type">NetworkId</span></a></span><span>
</span><span id="line-198"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span>
</span><span id="line-199"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceTag"><span class="hs-identifier hs-type">ContractInstanceTag</span></a></span><span>
</span><span id="line-200"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html#Contract"><span class="hs-identifier hs-type">Contract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832474"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832481"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832475"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832479"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractHandle"><span class="hs-identifier hs-type">ContractHandle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832474"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832481"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832475"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span id="handleActivate"><span class="annot"><span class="annottext">handleActivate :: NetworkId
-&gt; Wallet
-&gt; ContractInstanceTag
-&gt; Contract w s e ()
-&gt; Eff effs (ContractHandle w s e)
</span><a href="Plutus.Trace.Effects.RunContract.html#handleActivate"><span class="hs-identifier hs-var hs-var">handleActivate</span></a></span></span><span> </span><span id="local-6989586621680832191"><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621680832191"><span class="hs-identifier hs-var">networkId</span></a></span></span><span> </span><span id="local-6989586621680832190"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680832190"><span class="hs-identifier hs-var">wllt</span></a></span></span><span> </span><span id="local-6989586621680832189"><span class="annot"><span class="annottext">ContractInstanceTag
</span><a href="#local-6989586621680832189"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span id="local-6989586621680832188"><span class="annot"><span class="annottext">Contract w s e ()
</span><a href="#local-6989586621680832188"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-203"></span><span>    </span><span id="local-6989586621680832187"><span class="annot"><span class="annottext">ContractInstanceId
</span><a href="#local-6989586621680832187"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Eff effs ContractInstanceId
forall (effs :: [* -&gt; *]).
Member ContractInstanceIdEff effs =&gt;
Eff effs ContractInstanceId
</span><a href="Plutus.Trace.Effects.ContractInstanceId.html#nextId"><span class="hs-identifier hs-var">nextId</span></a></span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680832186"><span class="annot"><span class="annottext">handle :: ContractHandle w s e
</span><a href="#local-6989586621680832186"><span class="hs-identifier hs-var hs-var">handle</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ContractHandle :: forall w (s :: Row *) e.
Contract w s e ()
-&gt; ContractInstanceId
-&gt; ContractInstanceTag
-&gt; NetworkId
-&gt; ContractHandle w s e
</span><a href="Plutus.Trace.Emulator.Types.html#ContractHandle"><span class="hs-identifier hs-type">ContractHandle</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">chContract :: Contract w s e ()
</span><a href="Plutus.Trace.Emulator.Types.html#chContract"><span class="hs-identifier hs-var">chContract</span></a></span><span class="hs-glyph">=</span><span class="annot"><span class="annottext">Contract w s e ()
</span><a href="#local-6989586621680832188"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">chInstanceId :: ContractInstanceId
</span><a href="Plutus.Trace.Emulator.Types.html#chInstanceId"><span class="hs-identifier hs-var">chInstanceId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ContractInstanceId
</span><a href="#local-6989586621680832187"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">chInstanceTag :: ContractInstanceTag
</span><a href="Plutus.Trace.Emulator.Types.html#chInstanceTag"><span class="hs-identifier hs-var">chInstanceTag</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ContractInstanceTag
</span><a href="#local-6989586621680832189"><span class="hs-identifier hs-var">tag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">chNetworkId :: NetworkId
</span><a href="Plutus.Trace.Emulator.Types.html#chNetworkId"><span class="hs-identifier hs-var">chNetworkId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621680832191"><span class="hs-identifier hs-var">networkId</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-205"></span><span>    </span><span class="annot"><span class="annottext">Eff effs (Maybe EmulatorMessage) -&gt; Eff effs ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff effs (Maybe EmulatorMessage) -&gt; Eff effs ())
-&gt; Eff effs (Maybe EmulatorMessage) -&gt; Eff effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; ContractHandle w s e -&gt; Eff effs (Maybe EmulatorMessage)
forall w (s :: Row *) e (effs :: [* -&gt; *]) (effs2 :: [* -&gt; *]) a.
(Member
   (Yield
      (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage))
   effs,
 Member (State EmulatorThreads) effs2,
 Member MultiAgentEffect effs2,
 Member (Error EmulatorRuntimeError) effs2,
 Member (LogMsg EmulatorEvent') effs2, ContractConstraints s,
 Show e, ToJSON e, ToJSON w, Monoid w) =&gt;
Wallet -&gt; ContractHandle w s e -&gt; Eff effs (Maybe EmulatorMessage)
</span><a href="Plutus.Trace.Effects.RunContract.html#startContractThread"><span class="hs-identifier hs-var">startContractThread</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832474"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832481"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832475"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832479"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832478"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832476"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680832190"><span class="hs-identifier hs-var">wllt</span></a></span><span> </span><span class="annot"><span class="annottext">ContractHandle w s e
</span><a href="#local-6989586621680832186"><span class="hs-identifier hs-var">handle</span></a></span><span>
</span><span id="line-206"></span><span>    </span><span class="annot"><span class="annottext">ContractHandle w s e -&gt; Eff effs (ContractHandle w s e)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">ContractHandle w s e
</span><a href="#local-6989586621680832186"><span class="hs-identifier hs-var">handle</span></a></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#runningContractInstanceTag"><span class="hs-identifier hs-type">runningContractInstanceTag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Trace.Tag.html#Tag"><span class="hs-identifier hs-type">Tag</span></a></span><span>
</span><span id="line-209"></span><span id="runningContractInstanceTag"><span class="annot"><span class="annottext">runningContractInstanceTag :: Tag
</span><a href="Plutus.Trace.Effects.RunContract.html#runningContractInstanceTag"><span class="hs-identifier hs-var hs-var">runningContractInstanceTag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tag
</span><span class="hs-string">&quot;contract instance&quot;</span></span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span class="hs-comment">-- | Start a new thread for a contract instance (given by the handle).</span><span>
</span><span id="line-212"></span><span class="hs-comment">--   The thread runs in the context of the wallet.</span><span>
</span><span id="line-213"></span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#startContractThread"><span class="hs-identifier hs-type">startContractThread</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-214"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680832415"><span class="annot"><a href="#local-6989586621680832415"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680832417"><span class="annot"><a href="#local-6989586621680832417"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680832416"><span class="annot"><a href="#local-6989586621680832416"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621680832418"><span class="annot"><a href="#local-6989586621680832418"><span class="hs-identifier hs-type">effs</span></a></span></span><span> </span><span id="local-6989586621680832420"><span class="annot"><a href="#local-6989586621680832420"><span class="hs-identifier hs-type">effs2</span></a></span></span><span> </span><span id="local-6989586621680832419"><span class="annot"><a href="#local-6989586621680832419"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-215"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#EmSystemCall"><span class="hs-identifier hs-type">EmSystemCall</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832420"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832419"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832418"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-216"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorThreads"><span class="hs-identifier hs-type">EmulatorThreads</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832420"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-217"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffect"><span class="hs-identifier hs-type">MultiAgentEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832420"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-218"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorRuntimeError"><span class="hs-identifier hs-type">EmulatorRuntimeError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832420"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832420"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-220"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#ContractConstraints"><span class="hs-identifier hs-type">ContractConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832417"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832416"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-222"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832416"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-223"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832415"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832415"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-225"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span>
</span><span id="line-227"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractHandle"><span class="hs-identifier hs-type">ContractHandle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832415"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832417"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832416"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-228"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832418"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span id="startContractThread"><span class="annot"><span class="annottext">startContractThread :: Wallet -&gt; ContractHandle w s e -&gt; Eff effs (Maybe EmulatorMessage)
</span><a href="Plutus.Trace.Effects.RunContract.html#startContractThread"><span class="hs-identifier hs-var hs-var">startContractThread</span></a></span></span><span> </span><span id="local-6989586621680832181"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680832181"><span class="hs-identifier hs-var">wallet</span></a></span></span><span> </span><span id="local-6989586621680832180"><span class="annot"><span class="annottext">ContractHandle w s e
</span><a href="#local-6989586621680832180"><span class="hs-identifier hs-var">handle</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-230"></span><span>    </span><span class="annot"><span class="annottext">Tag
-&gt; Priority
-&gt; Eff
     (Reader ThreadId
        : Yield
            (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
        : effs2)
     ()
-&gt; Eff effs (Maybe EmulatorMessage)
forall (effs :: [* -&gt; *]) systemEvent (effs2 :: [* -&gt; *]) a.
Member
  (Yield (EmSystemCall effs systemEvent a) (Maybe systemEvent))
  effs2 =&gt;
Tag
-&gt; Priority
-&gt; Eff
     (Reader ThreadId
        : Yield (EmSystemCall effs systemEvent a) (Maybe systemEvent)
        : effs)
     ()
-&gt; Eff effs2 (Maybe systemEvent)
</span><a href="Plutus.Trace.Scheduler.html#fork"><span class="hs-identifier hs-var">fork</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832420"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832419"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="annottext">Tag
</span><a href="Plutus.Trace.Effects.RunContract.html#runningContractInstanceTag"><span class="hs-identifier hs-var">runningContractInstanceTag</span></a></span><span> </span><span class="annot"><span class="annottext">Priority
</span><a href="Plutus.Trace.Scheduler.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span>
</span><span id="line-231"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
 ~&gt; Eff
      (Reader ThreadId
         : Yield
             (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
         : effs2))
-&gt; Eff
     (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
        : Reader ThreadId
        : Yield
            (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
        : effs2)
   ~&gt; Eff
        (Reader ThreadId
           : Yield
               (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
           : effs2)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Member
  (Yield
     (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage))
  (Reader ThreadId
     : Yield
         (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
     : effs2) =&gt;
Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage) x
-&gt; Eff
     (Reader ThreadId
        : Yield
            (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
        : effs2)
     x
forall (effs :: [* -&gt; *]) (effs2 :: [* -&gt; *]) c a.
Member
  (Yield
     (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage))
  effs =&gt;
Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage) c
-&gt; Eff effs c
</span><a href="Plutus.Trace.Effects.RunContract.html#mapYieldEm"><span class="hs-identifier hs-var">mapYieldEm</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832420"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832419"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span>            </span><span class="annot"><span class="annottext">(Eff
   (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
      : Reader ThreadId
      : Yield
          (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
      : effs2)
   ()
 -&gt; Eff
      (Reader ThreadId
         : Yield
             (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
         : effs2)
      ())
-&gt; Eff
     (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
        : Reader ThreadId
        : Yield
            (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
        : effs2)
     ()
-&gt; Eff
     (Reader ThreadId
        : Yield
            (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
        : effs2)
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
-&gt; Eff
     (EmulatedWalletEffects'
        (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
           : Reader ThreadId
           : Yield
               (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
           : effs2))
   ~&gt; Eff
        (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
           : Reader ThreadId
           : Yield
               (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
           : effs2)
forall (effs :: [* -&gt; *]).
Member MultiAgentEffect effs =&gt;
Wallet -&gt; Eff (EmulatedWalletEffects' effs) ~&gt; Eff effs
</span><a href="Wallet.Emulator.MultiAgent.html#handleMultiAgentEffects"><span class="hs-identifier hs-var">handleMultiAgentEffects</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680832181"><span class="hs-identifier hs-var">wallet</span></a></span><span>
</span><span id="line-233"></span><span>            </span><span class="annot"><span class="annottext">(Eff
   (EmulatedWalletEffects'
      (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
         : Reader ThreadId
         : Yield
             (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
         : effs2))
   ()
 -&gt; Eff
      (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
         : Reader ThreadId
         : Yield
             (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
         : effs2)
      ())
-&gt; Eff
     (EmulatedWalletEffects'
        (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
           : Reader ThreadId
           : Yield
               (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
           : effs2))
     ()
-&gt; Eff
     (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
        : Reader ThreadId
        : Yield
            (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
        : effs2)
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(LogMsg ContractInstanceLog
 ~&gt; Eff
      (EmulatedWalletEffects'
         (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
            : Reader ThreadId
            : Yield
                (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
            : effs2)))
-&gt; Eff
     (LogMsg ContractInstanceLog
        : EmulatedWalletEffects'
            (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
               : Reader ThreadId
               : Yield
                   (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
               : effs2))
   ~&gt; Eff
        (EmulatedWalletEffects'
           (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
              : Reader ThreadId
              : Yield
                  (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
              : effs2))
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ContractInstanceLog -&gt; EmulatorEvent')
-&gt; LogMsg ContractInstanceLog
   ~&gt; Eff
        (EmulatedWalletEffects'
           (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
              : Reader ThreadId
              : Yield
                  (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
              : effs2))
forall a b (effs :: [* -&gt; *]).
Member (LogMsg b) effs =&gt;
(a -&gt; b) -&gt; LogMsg a ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">mapLog</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceLog -&gt; EmulatorEvent'
</span><a href="Wallet.Emulator.MultiAgent.html#InstanceEvent"><span class="hs-identifier hs-var">InstanceEvent</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-234"></span><span>            </span><span class="annot"><span class="annottext">(Eff
   (LogMsg ContractInstanceLog
      : EmulatedWalletEffects'
          (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
             : Reader ThreadId
             : Yield
                 (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
             : effs2))
   ()
 -&gt; Eff
      (EmulatedWalletEffects'
         (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
            : Reader ThreadId
            : Yield
                (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
            : effs2))
      ())
-&gt; Eff
     (LogMsg ContractInstanceLog
        : EmulatedWalletEffects'
            (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
               : Reader ThreadId
               : Yield
                   (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
               : effs2))
     ()
-&gt; Eff
     (EmulatedWalletEffects'
        (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
           : Reader ThreadId
           : Yield
               (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
           : effs2))
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ContractHandle w s e
-&gt; Eff
     (LogMsg ContractInstanceLog
        : EmulatedWalletEffects'
            (Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage)
               : Reader ThreadId
               : Yield
                   (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
               : effs2))
     ()
forall w (s :: Row *) e (effs :: [* -&gt; *]).
(Member (State EmulatorThreads) effs,
 Member (Error EmulatorRuntimeError) effs, ContractConstraints s,
 Show e, ToJSON e, ToJSON w, Monoid w) =&gt;
ContractHandle w s e -&gt; Eff (EmulatorAgentThreadEffs effs) ()
</span><a href="Plutus.Trace.Emulator.ContractInstance.html#contractThread"><span class="hs-identifier hs-var">contractThread</span></a></span><span> </span><span class="annot"><span class="annottext">ContractHandle w s e
</span><a href="#local-6989586621680832180"><span class="hs-identifier hs-var">handle</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#mapYieldEm"><span class="hs-identifier hs-type">mapYieldEm</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-237"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680832399"><span class="annot"><a href="#local-6989586621680832399"><span class="hs-identifier hs-type">effs</span></a></span></span><span> </span><span id="local-6989586621680832401"><span class="annot"><a href="#local-6989586621680832401"><span class="hs-identifier hs-type">effs2</span></a></span></span><span> </span><span id="local-6989586621680832398"><span class="annot"><a href="#local-6989586621680832398"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span id="local-6989586621680832400"><span class="annot"><a href="#local-6989586621680832400"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-238"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#EmSystemCall"><span class="hs-identifier hs-type">EmSystemCall</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832401"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832400"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832399"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#AgentSystemCall"><span class="hs-identifier hs-type">AgentSystemCall</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832398"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-240"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832399"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832398"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-241"></span><span id="mapYieldEm"><span class="annot"><span class="annottext">mapYieldEm :: Yield (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage) c
-&gt; Eff effs c
</span><a href="Plutus.Trace.Effects.RunContract.html#mapYieldEm"><span class="hs-identifier hs-var hs-var">mapYieldEm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(AgentSystemCall EmulatorMessage
 -&gt; EmSystemCall effs2 EmulatorMessage a)
-&gt; (Maybe EmulatorMessage -&gt; Maybe EmulatorMessage)
-&gt; Yield
     (AgentSystemCall EmulatorMessage) (Maybe EmulatorMessage) c
-&gt; Eff effs c
forall a a' b b' (effs :: [* -&gt; *]) c.
Member (Yield a' b') effs =&gt;
(a -&gt; a') -&gt; (b' -&gt; b) -&gt; Yield a b c -&gt; Eff effs c
</span><a href="Plutus.Trace.Effects.RunContract.html#mapYield"><span class="hs-identifier hs-var">mapYield</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#EmSystemCall"><span class="hs-identifier hs-type">EmSystemCall</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832401"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832400"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(MessageCall EmulatorMessage
 -&gt; Either
      (MessageCall EmulatorMessage) (ThreadCall effs2 EmulatorMessage a))
-&gt; AgentSystemCall EmulatorMessage
-&gt; EmSystemCall effs2 EmulatorMessage a
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">MessageCall EmulatorMessage
-&gt; Either
     (MessageCall EmulatorMessage) (ThreadCall effs2 EmulatorMessage a)
forall a b. a -&gt; Either a b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe EmulatorMessage -&gt; Maybe EmulatorMessage
forall a. a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="hs-comment">-- | Handle a @Yield a b@ with a @Yield a' b'@ effect.</span><span>
</span><span id="line-244"></span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#mapYield"><span class="hs-identifier hs-type">mapYield</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680832380"><span class="annot"><a href="#local-6989586621680832380"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680832383"><span class="annot"><a href="#local-6989586621680832383"><span class="hs-identifier hs-type">a'</span></a></span></span><span> </span><span id="local-6989586621680832379"><span class="annot"><a href="#local-6989586621680832379"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621680832382"><span class="annot"><a href="#local-6989586621680832382"><span class="hs-identifier hs-type">b'</span></a></span></span><span> </span><span id="local-6989586621680832381"><span class="annot"><a href="#local-6989586621680832381"><span class="hs-identifier hs-type">effs</span></a></span></span><span> </span><span id="local-6989586621680832378"><span class="annot"><a href="#local-6989586621680832378"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832383"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832382"><span class="hs-identifier hs-type">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832381"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-247"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680832380"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680832383"><span class="hs-identifier hs-type">a'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680832382"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680832379"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832380"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832379"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832378"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-250"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832381"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832378"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-251"></span><span id="mapYield"><span class="annot"><span class="annottext">mapYield :: (a -&gt; a') -&gt; (b' -&gt; b) -&gt; Yield a b c -&gt; Eff effs c
</span><a href="Plutus.Trace.Effects.RunContract.html#mapYield"><span class="hs-identifier hs-var hs-var">mapYield</span></a></span></span><span> </span><span id="local-6989586621680832175"><span class="annot"><span class="annottext">a -&gt; a'
</span><a href="#local-6989586621680832175"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680832174"><span class="annot"><span class="annottext">b' -&gt; b
</span><a href="#local-6989586621680832174"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-252"></span><span>    </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span id="local-6989586621680832172"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680832172"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680832171"><span class="annot"><span class="annottext">b -&gt; c
</span><a href="#local-6989586621680832171"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (effs :: [* -&gt; *]) a.
Member (Yield a' b') effs =&gt;
Yield a' b' a -&gt; Eff effs a
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]) a.
Member eff effs =&gt;
eff a -&gt; Eff effs a
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">send</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832383"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832382"><span class="hs-identifier hs-type">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Yield a' b' c -&gt; Eff effs c) -&gt; Yield a' b' c -&gt; Eff effs c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">a' -&gt; (b' -&gt; c) -&gt; Yield a' b' c
forall a b c. a -&gt; (b -&gt; c) -&gt; Yield a b c
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">Yield</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; a'
</span><a href="#local-6989586621680832175"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680832172"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(b' -&gt; b) -&gt; (b -&gt; c) -&gt; b' -&gt; c
forall (p :: * -&gt; * -&gt; *) a b c.
Profunctor p =&gt;
(a -&gt; b) -&gt; p b c -&gt; p a c
</span><a href="../file:///nix/store/wjz55miww0csfph9nxy2109hrj7ylva5-profunctors-lib-profunctors-5.6-haddock-doc/share/doc/profunctors/html/src"><span class="hs-identifier hs-var">lmap</span></a></span><span> </span><span class="annot"><span class="annottext">b' -&gt; b
</span><a href="#local-6989586621680832174"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; c
</span><a href="#local-6989586621680832171"><span class="hs-identifier hs-var">cont</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#handleCallEndpoint"><span class="hs-identifier hs-type">handleCallEndpoint</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680832515"><span class="annot"><a href="#local-6989586621680832515"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680832526"><span class="annot"><a href="#local-6989586621680832526"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680832528"><span class="annot"><a href="#local-6989586621680832528"><span class="hs-identifier hs-type">l</span></a></span></span><span> </span><span id="local-6989586621680832514"><span class="annot"><a href="#local-6989586621680832514"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621680832527"><span class="annot"><a href="#local-6989586621680832527"><span class="hs-identifier hs-type">ep</span></a></span></span><span> </span><span id="local-6989586621680832516"><span class="annot"><a href="#local-6989586621680832516"><span class="hs-identifier hs-type">effs</span></a></span></span><span> </span><span id="local-6989586621680832523"><span class="annot"><a href="#local-6989586621680832523"><span class="hs-identifier hs-type">effs2</span></a></span></span><span> </span><span id="local-6989586621680832519"><span class="annot"><a href="#local-6989586621680832519"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-255"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Plutus.Contract.Request.html#HasEndpoint"><span class="hs-identifier hs-type">HasEndpoint</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832528"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832527"><span class="hs-identifier hs-type">ep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832526"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-256"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832527"><span class="hs-identifier hs-type">ep</span></a></span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorThreads"><span class="hs-identifier hs-type">EmulatorThreads</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832523"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-258"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorRuntimeError"><span class="hs-identifier hs-type">EmulatorRuntimeError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832523"><span class="hs-identifier hs-type">effs2</span></a></span><span>
</span><span id="line-259"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#EmSystemCall"><span class="hs-identifier hs-type">EmSystemCall</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832523"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832519"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680832516"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832528"><span class="hs-identifier hs-type">l</span></a></span><span>
</span><span id="line-262"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractHandle"><span class="hs-identifier hs-type">ContractHandle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832515"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832526"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832514"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680832527"><span class="hs-identifier hs-type">ep</span></a></span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832516"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span id="handleCallEndpoint"><span class="annot"><span class="annottext">handleCallEndpoint :: Proxy l -&gt; ContractHandle w s e -&gt; ep -&gt; Eff effs ()
</span><a href="Plutus.Trace.Effects.RunContract.html#handleCallEndpoint"><span class="hs-identifier hs-var hs-var">handleCallEndpoint</span></a></span></span><span> </span><span id="local-6989586621680832169"><span class="annot"><span class="annottext">Proxy l
</span><a href="#local-6989586621680832169"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractHandle"><span class="hs-identifier hs-type">ContractHandle</span></a></span><span class="hs-special">{</span><span id="local-6989586621680832168"><span class="annot"><span class="annottext">ContractInstanceId
chInstanceId :: ContractInstanceId
chInstanceId :: forall w (s :: Row *) e. ContractHandle w s e -&gt; ContractInstanceId
</span><a href="#local-6989586621680832168"><span class="hs-identifier hs-var hs-var">chInstanceId</span></a></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621680832167"><span class="annot"><span class="annottext">ep
</span><a href="#local-6989586621680832167"><span class="hs-identifier hs-var">ep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-266"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680832166"><span class="annot"><span class="annottext">epJson :: Value
</span><a href="#local-6989586621680832166"><span class="hs-identifier hs-var hs-var">epJson</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PABResp -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">JSON.toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">(PABResp -&gt; Value) -&gt; PABResp -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EndpointDescription -&gt; EndpointValue Value -&gt; PABResp
</span><a href="Plutus.Contract.Effects.html#ExposeEndpointResp"><span class="hs-identifier hs-var">ExposeEndpointResp</span></a></span><span> </span><span class="annot"><span class="annottext">EndpointDescription
</span><a href="#local-6989586621680832164"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">(EndpointValue Value -&gt; PABResp) -&gt; EndpointValue Value -&gt; PABResp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; EndpointValue Value
forall a. a -&gt; EndpointValue a
</span><a href="Wallet.Types.html#EndpointValue"><span class="hs-identifier hs-var">EndpointValue</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; EndpointValue Value) -&gt; Value -&gt; EndpointValue Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ep -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">JSON.toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">ep
</span><a href="#local-6989586621680832167"><span class="hs-identifier hs-var">ep</span></a></span><span>
</span><span id="line-267"></span><span>        </span><span id="local-6989586621680832164"><span class="annot"><span class="annottext">description :: EndpointDescription
</span><a href="#local-6989586621680832164"><span class="hs-identifier hs-var hs-var">description</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; EndpointDescription
</span><a href="Wallet.Types.html#EndpointDescription"><span class="hs-identifier hs-var">EndpointDescription</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; EndpointDescription) -&gt; String -&gt; EndpointDescription
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy l -&gt; String
forall (n :: Symbol) (proxy :: Symbol -&gt; *).
KnownSymbol n =&gt;
proxy n -&gt; String
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">GHC.TypeLits.symbolVal</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy l
</span><a href="#local-6989586621680832169"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-268"></span><span>        </span><span id="local-6989586621680832160"><span class="annot"><span class="annottext">thr :: Eff
  (Reader ThreadId
     : Yield
         (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
     : effs2)
  ()
</span><a href="#local-6989586621680832160"><span class="hs-identifier hs-var hs-var">thr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-269"></span><span>            </span><span id="local-6989586621680832159"><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621680832159"><span class="hs-identifier hs-var">threadId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ContractInstanceId
-&gt; Eff
     (Reader ThreadId
        : Yield
            (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
        : effs2)
     ThreadId
forall (effs :: [* -&gt; *]).
(Member (State EmulatorThreads) effs,
 Member (Error EmulatorRuntimeError) effs) =&gt;
ContractInstanceId -&gt; Eff effs ThreadId
</span><a href="Plutus.Trace.Emulator.ContractInstance.html#getThread"><span class="hs-identifier hs-var">getThread</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceId
</span><a href="#local-6989586621680832168"><span class="hs-identifier hs-var">chInstanceId</span></a></span><span>
</span><span id="line-270"></span><span>            </span><span id="local-6989586621680832158"><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621680832158"><span class="hs-identifier hs-var">ownId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (effs :: [* -&gt; *]).
Member (Reader ThreadId) effs =&gt;
Eff effs ThreadId
forall r (effs :: [* -&gt; *]). Member (Reader r) effs =&gt; Eff effs r
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">ask</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Plutus.Trace.Scheduler.html#ThreadId"><span class="hs-identifier hs-type">ThreadId</span></a></span><span>
</span><span id="line-271"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (Reader ThreadId
     : Yield
         (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
     : effs2)
  (Maybe EmulatorMessage)
-&gt; Eff
     (Reader ThreadId
        : Yield
            (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
        : effs2)
     ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff
   (Reader ThreadId
      : Yield
          (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
      : effs2)
   (Maybe EmulatorMessage)
 -&gt; Eff
      (Reader ThreadId
         : Yield
             (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
         : effs2)
      ())
-&gt; Eff
     (Reader ThreadId
        : Yield
            (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
        : effs2)
     (Maybe EmulatorMessage)
-&gt; Eff
     (Reader ThreadId
        : Yield
            (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
        : effs2)
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Priority
-&gt; SysCall effs2 EmulatorMessage a
-&gt; Eff
     (Reader ThreadId
        : Yield
            (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
        : effs2)
     (Maybe EmulatorMessage)
forall (effs :: [* -&gt; *]) systemEvent (effs2 :: [* -&gt; *]) a.
Member
  (Yield (EmSystemCall effs systemEvent a) (Maybe systemEvent))
  effs2 =&gt;
Priority
-&gt; SysCall effs systemEvent a -&gt; Eff effs2 (Maybe systemEvent)
</span><a href="Plutus.Trace.Scheduler.html#mkSysCall"><span class="hs-identifier hs-var">mkSysCall</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832523"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832519"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="annottext">Priority
</span><a href="Plutus.Trace.Scheduler.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MessageCall EmulatorMessage -&gt; SysCall effs2 EmulatorMessage a
forall a b. a -&gt; Either a b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(MessageCall EmulatorMessage -&gt; SysCall effs2 EmulatorMessage a)
-&gt; MessageCall EmulatorMessage -&gt; SysCall effs2 EmulatorMessage a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ThreadId -&gt; EmulatorMessage -&gt; MessageCall EmulatorMessage
forall systemEvent.
ThreadId -&gt; systemEvent -&gt; MessageCall systemEvent
</span><a href="Plutus.Trace.Scheduler.html#Message"><span class="hs-identifier hs-var">Message</span></a></span><span> </span><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621680832159"><span class="hs-identifier hs-var">threadId</span></a></span><span> </span><span class="annot"><span class="annottext">(EmulatorMessage -&gt; MessageCall EmulatorMessage)
-&gt; EmulatorMessage -&gt; MessageCall EmulatorMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ThreadId -&gt; EndpointDescription -&gt; Value -&gt; EmulatorMessage
</span><a href="Plutus.Trace.Emulator.Types.html#EndpointCall"><span class="hs-identifier hs-var">EndpointCall</span></a></span><span> </span><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621680832158"><span class="hs-identifier hs-var">ownId</span></a></span><span> </span><span class="annot"><span class="annottext">EndpointDescription
</span><a href="#local-6989586621680832164"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680832166"><span class="hs-identifier hs-var">epJson</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span>    </span><span class="annot"><span class="annottext">Eff effs (Maybe EmulatorMessage) -&gt; Eff effs ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff effs (Maybe EmulatorMessage) -&gt; Eff effs ())
-&gt; Eff effs (Maybe EmulatorMessage) -&gt; Eff effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tag
-&gt; Priority
-&gt; Eff
     (Reader ThreadId
        : Yield
            (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
        : effs2)
     ()
-&gt; Eff effs (Maybe EmulatorMessage)
forall (effs :: [* -&gt; *]) systemEvent (effs2 :: [* -&gt; *]) a.
Member
  (Yield (EmSystemCall effs systemEvent a) (Maybe systemEvent))
  effs2 =&gt;
Tag
-&gt; Priority
-&gt; Eff
     (Reader ThreadId
        : Yield (EmSystemCall effs systemEvent a) (Maybe systemEvent)
        : effs)
     ()
-&gt; Eff effs2 (Maybe systemEvent)
</span><a href="Plutus.Trace.Scheduler.html#fork"><span class="hs-identifier hs-var">fork</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832523"><span class="hs-identifier hs-type">effs2</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatorMessage"><span class="hs-identifier hs-type">EmulatorMessage</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680832519"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="annottext">Tag
</span><a href="Plutus.Trace.Effects.RunContract.html#callEndpointTag"><span class="hs-identifier hs-var">callEndpointTag</span></a></span><span> </span><span class="annot"><span class="annottext">Priority
</span><a href="Plutus.Trace.Scheduler.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Eff
  (Reader ThreadId
     : Yield
         (EmSystemCall effs2 EmulatorMessage a) (Maybe EmulatorMessage)
     : effs2)
  ()
</span><a href="#local-6989586621680832160"><span class="hs-identifier hs-var">thr</span></a></span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="hs-comment">-- | Get the active endpoints of a contract instance.</span><span>
</span><span id="line-275"></span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#activeEndpoints"><span class="hs-identifier hs-type">activeEndpoints</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680832156"><span class="annot"><a href="#local-6989586621680832156"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680832155"><span class="annot"><a href="#local-6989586621680832155"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680832154"><span class="annot"><a href="#local-6989586621680832154"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621680832153"><span class="annot"><a href="#local-6989586621680832153"><span class="hs-identifier hs-type">effs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#RunContract"><span class="hs-identifier hs-type">RunContract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832153"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#ContractConstraints"><span class="hs-identifier hs-type">ContractConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832155"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-278"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.FromJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832154"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-279"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.FromJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832156"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-280"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832156"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-281"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractHandle"><span class="hs-identifier hs-type">ContractHandle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832156"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832155"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832154"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-283"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832153"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutus.Contract.Effects.html#ActiveEndpoint"><span class="hs-identifier hs-type">ActiveEndpoint</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-284"></span><span id="activeEndpoints"><span class="annot"><span class="annottext">activeEndpoints :: ContractHandle w s e -&gt; Eff effs [ActiveEndpoint]
</span><a href="Plutus.Trace.Effects.RunContract.html#activeEndpoints"><span class="hs-identifier hs-var hs-var">activeEndpoints</span></a></span></span><span> </span><span id="local-6989586621680832152"><span class="annot"><span class="annottext">ContractHandle w s e
</span><a href="#local-6989586621680832152"><span class="hs-identifier hs-var">hdl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-285"></span><span>    </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceState"><span class="hs-identifier hs-type">ContractInstanceState</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">instContractState :: forall w (s :: Row *) e a.
ContractInstanceState w s e a
-&gt; ResumableResult w e PABResp PABReq a
</span><a href="Plutus.Trace.Emulator.Types.html#instContractState"><span class="hs-identifier hs-var">instContractState</span></a></span><span class="hs-glyph">=</span><span class="annot"><a href="Plutus.Contract.Types.html#ResumableResult"><span class="hs-identifier hs-type">ResumableResult</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">_requests :: forall w e i o a. ResumableResult w e i o a -&gt; Requests o
</span><a href="Plutus.Contract.Types.html#_requests"><span class="hs-identifier hs-var">_requests</span></a></span><span class="hs-glyph">=</span><span class="annot"><a href="Plutus.Contract.Resumable.html#Requests"><span class="hs-identifier hs-type">Requests</span></a></span><span> </span><span id="local-6989586621680832146"><span class="annot"><span class="annottext">[Request PABReq]
</span><a href="#local-6989586621680832146"><span class="hs-identifier hs-var">rq</span></a></span></span><span class="hs-special">}</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ContractHandle w s e -&gt; Eff effs (ContractInstanceState w s e ())
forall w (s :: Row *) e (effs :: [* -&gt; *]).
(ContractConstraints s, FromJSON e, FromJSON w, ToJSON w,
 Member RunContract effs) =&gt;
ContractHandle w s e -&gt; Eff effs (ContractInstanceState w s e ())
</span><a href="Plutus.Trace.Effects.RunContract.html#getContractState"><span class="hs-identifier hs-var">getContractState</span></a></span><span> </span><span class="annot"><span class="annottext">ContractHandle w s e
</span><a href="#local-6989586621680832152"><span class="hs-identifier hs-var">hdl</span></a></span><span>
</span><span id="line-286"></span><span>    </span><span class="annot"><span class="annottext">[ActiveEndpoint] -&gt; Eff effs [ActiveEndpoint]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span>
</span><span id="line-287"></span><span>        </span><span class="annot"><span class="annottext">([ActiveEndpoint] -&gt; Eff effs [ActiveEndpoint])
-&gt; [ActiveEndpoint] -&gt; Eff effs [ActiveEndpoint]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Request PABReq -&gt; Maybe ActiveEndpoint)
-&gt; [Request PABReq] -&gt; [ActiveEndpoint]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mapMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First ActiveEndpoint) PABReq ActiveEndpoint
-&gt; PABReq -&gt; Maybe ActiveEndpoint
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First ActiveEndpoint) PABReq ActiveEndpoint
Prism' PABReq ActiveEndpoint
</span><a href="Plutus.Contract.Effects.html#_ExposeEndpointReq"><span class="hs-identifier hs-var">_ExposeEndpointReq</span></a></span><span> </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe ActiveEndpoint)
-&gt; (Request PABReq -&gt; PABReq)
-&gt; Request PABReq
-&gt; Maybe ActiveEndpoint
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Request PABReq -&gt; PABReq
forall o. Request o -&gt; o
</span><a href="Plutus.Contract.Resumable.html#rqRequest"><span class="hs-identifier hs-var hs-var">rqRequest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>        </span><span class="annot"><span class="annottext">([Request PABReq] -&gt; [ActiveEndpoint])
-&gt; [Request PABReq] -&gt; [ActiveEndpoint]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Request PABReq]
</span><a href="#local-6989586621680832146"><span class="hs-identifier hs-var">rq</span></a></span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span class="hs-comment">-- | Get the observable state @w@ of a contract instance.</span><span>
</span><span id="line-291"></span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#observableState"><span class="hs-identifier hs-type">observableState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680832144"><span class="annot"><a href="#local-6989586621680832144"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680832143"><span class="annot"><a href="#local-6989586621680832143"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680832142"><span class="annot"><a href="#local-6989586621680832142"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621680832141"><span class="annot"><a href="#local-6989586621680832141"><span class="hs-identifier hs-type">effs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#RunContract"><span class="hs-identifier hs-type">RunContract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832141"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-293"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#ContractConstraints"><span class="hs-identifier hs-type">ContractConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832143"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-294"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.FromJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832142"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.FromJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832144"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-296"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832144"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-297"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-298"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractHandle"><span class="hs-identifier hs-type">ContractHandle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832144"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832143"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832142"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832141"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680832144"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-299"></span><span id="observableState"><span class="annot"><span class="annottext">observableState :: ContractHandle w s e -&gt; Eff effs w
</span><a href="Plutus.Trace.Effects.RunContract.html#observableState"><span class="hs-identifier hs-var hs-var">observableState</span></a></span></span><span> </span><span id="local-6989586621680832140"><span class="annot"><span class="annottext">ContractHandle w s e
</span><a href="#local-6989586621680832140"><span class="hs-identifier hs-var">hdl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-300"></span><span>    </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceState"><span class="hs-identifier hs-type">ContractInstanceState</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">instContractState :: forall w (s :: Row *) e a.
ContractInstanceState w s e a
-&gt; ResumableResult w e PABResp PABReq a
</span><a href="Plutus.Trace.Emulator.Types.html#instContractState"><span class="hs-identifier hs-var">instContractState</span></a></span><span class="hs-glyph">=</span><span class="annot"><a href="Plutus.Contract.Types.html#ResumableResult"><span class="hs-identifier hs-type">ResumableResult</span></a></span><span class="hs-special">{</span><span id="local-6989586621680832139"><span class="annot"><span class="annottext">w
_observableState :: forall w e i o a. ResumableResult w e i o a -&gt; w
_observableState :: w
</span><a href="Plutus.Contract.Types.html#_observableState"><span class="hs-identifier hs-var hs-var">_observableState</span></a></span></span><span class="hs-special">}</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ContractHandle w s e -&gt; Eff effs (ContractInstanceState w s e ())
forall w (s :: Row *) e (effs :: [* -&gt; *]).
(ContractConstraints s, FromJSON e, FromJSON w, ToJSON w,
 Member RunContract effs) =&gt;
ContractHandle w s e -&gt; Eff effs (ContractInstanceState w s e ())
</span><a href="Plutus.Trace.Effects.RunContract.html#getContractState"><span class="hs-identifier hs-var">getContractState</span></a></span><span> </span><span class="annot"><span class="annottext">ContractHandle w s e
</span><a href="#local-6989586621680832140"><span class="hs-identifier hs-var">hdl</span></a></span><span>
</span><span id="line-301"></span><span>    </span><span class="annot"><span class="annottext">w -&gt; Eff effs w
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621680832139"><span class="hs-identifier hs-var">_observableState</span></a></span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="annot"><a href="Plutus.Trace.Effects.RunContract.html#callEndpointTag"><span class="hs-identifier hs-type">callEndpointTag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Trace.Tag.html#Tag"><span class="hs-identifier hs-type">Tag</span></a></span><span>
</span><span id="line-304"></span><span id="callEndpointTag"><span class="annot"><span class="annottext">callEndpointTag :: Tag
</span><a href="Plutus.Trace.Effects.RunContract.html#callEndpointTag"><span class="hs-identifier hs-var hs-var">callEndpointTag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tag
</span><span class="hs-string">&quot;call endpoint&quot;</span></span><span>
</span><span id="line-305"></span></pre></body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds          #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts   #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase         #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE MonoLocalBinds     #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes         #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications   #-}</span><span>
</span><span id="line-8"></span><span class="hs-comment">{-
This module provides a list of folds over the emulator event stream. To apply
the folds in this module to a stream of events, use
'Wallet.Emulator.Stream.foldEmulatorStreamM'. See note [Emulator event stream].

-}</span><span>
</span><span id="line-14"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Wallet.Emulator.Folds</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier">EmulatorEventFold</span></a></span><span>
</span><span id="line-16"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFoldM"><span class="hs-identifier">EmulatorEventFoldM</span></a></span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorFoldErr"><span class="hs-identifier">EmulatorFoldErr</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#describeError"><span class="hs-identifier">describeError</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Folds for contract instances</span></span><span>
</span><span id="line-20"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#instanceState"><span class="hs-identifier">instanceState</span></a></span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#instanceRequests"><span class="hs-identifier">instanceRequests</span></a></span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#instanceResponses"><span class="hs-identifier">instanceResponses</span></a></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#instanceOutcome"><span class="hs-identifier">instanceOutcome</span></a></span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#instanceTransactions"><span class="hs-identifier">instanceTransactions</span></a></span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#Outcome"><span class="hs-identifier">Outcome</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#instanceLog"><span class="hs-identifier">instanceLog</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#instanceAccumState"><span class="hs-identifier">instanceAccumState</span></a></span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Folds for transactions and the UTXO set</span></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#chainEvents"><span class="hs-identifier">chainEvents</span></a></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#failedTransactions"><span class="hs-identifier">failedTransactions</span></a></span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#validatedTransactions"><span class="hs-identifier">validatedTransactions</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#utxoAtAddress"><span class="hs-identifier">utxoAtAddress</span></a></span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#valueAtAddress"><span class="hs-identifier">valueAtAddress</span></a></span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Folds for individual wallets (emulated agents)</span></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#walletFunds"><span class="hs-identifier">walletFunds</span></a></span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#walletFees"><span class="hs-identifier">walletFees</span></a></span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#walletTxBalanceEvents"><span class="hs-identifier">walletTxBalanceEvents</span></a></span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#walletsAdjustedTxEvents"><span class="hs-identifier">walletsAdjustedTxEvents</span></a></span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Folds that are used in the Playground</span></span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#annotatedBlockchain"><span class="hs-identifier">annotatedBlockchain</span></a></span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#blockchain"><span class="hs-identifier">blockchain</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#emulatorLog"><span class="hs-identifier">emulatorLog</span></a></span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#userLog"><span class="hs-identifier">userLog</span></a></span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Etc.</span></span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#renderLines"><span class="hs-identifier">renderLines</span></a></span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#preMapMaybeM"><span class="hs-identifier">preMapMaybeM</span></a></span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#preMapMaybe"><span class="hs-identifier">preMapMaybe</span></a></span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#postMapM"><span class="hs-identifier">postMapM</span></a></span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#mkTxLogs"><span class="hs-identifier">mkTxLogs</span></a></span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">Cardano.Node.Emulator.Chain</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">ChainEvent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">SlotAdd</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">TxnValidate</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">TxnValidationFail</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">_TxnValidate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>                                    </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">_TxnValidationFail</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Applicative</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(&lt;|&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier">Control.Foldl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier">Fold</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier">FoldM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier">FoldM</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier">Control.Foldl</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">Control.Lens</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">Empty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">Fold</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(&gt;=&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Eff</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Member</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Error</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">throwError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">JSON</span></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">toList</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">mapMaybe</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Block</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">CardanoAddress</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">OnChainTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Invalid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Valid</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">TxId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Ada</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ada</span></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.AddressMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">UtxoMap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.AddressMap</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">AM</span></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier">Ledger.Constraints.OffChain</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier">UnbalancedTx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">ValidationError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">ValidationPhase</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Phase1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Phase2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">CardanoTx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">getCardanoTxFee</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">txOutValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Value</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">Value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.html"><span class="hs-identifier">Plutus.Contract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Types.html#Contract"><span class="hs-identifier">Contract</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html"><span class="hs-identifier">Plutus.Contract.Effects</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier">PABReq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier">PABResp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#_BalanceTxReq"><span class="hs-identifier">_BalanceTxReq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Request.html"><span class="hs-identifier">Plutus.Contract.Request</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Request.html#MkTxLog"><span class="hs-identifier">MkTxLog</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Resumable.html"><span class="hs-identifier">Plutus.Contract.Resumable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Resumable.html#Request"><span class="hs-identifier">Request</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Resumable.html#Response"><span class="hs-identifier">Response</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Resumable.html"><span class="hs-identifier">Plutus.Contract.Resumable</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><a href="../file:///nix/store/6p2pkhdhfwn3hikcgkfa1fypa32c7wqs-ghc-lib-ghc-8.10.7-haddock-doc/share/doc/ghc/html/src"><span class="hs-identifier">State</span></a></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html"><span class="hs-identifier">Plutus.Contract.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Types.html#ResumableResult"><span class="hs-identifier">ResumableResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Types.html#_finalState"><span class="hs-identifier">_finalState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html#_observableState"><span class="hs-identifier">_observableState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html#_requests"><span class="hs-identifier">_requests</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.ContractInstance.html"><span class="hs-identifier">Plutus.Trace.Emulator.ContractInstance</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceState"><span class="hs-identifier">ContractInstanceState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#addEventInstanceState"><span class="hs-identifier">addEventInstanceState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#emptyInstanceState"><span class="hs-identifier">emptyInstanceState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>                                               </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#instContractState"><span class="hs-identifier">instContractState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#instEvents"><span class="hs-identifier">instEvents</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#instHandlersHistory"><span class="hs-identifier">instHandlersHistory</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html"><span class="hs-identifier">Plutus.Trace.Emulator.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceLog"><span class="hs-identifier">ContractInstanceLog</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceMsg"><span class="hs-identifier">ContractInstanceMsg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractLog"><span class="hs-identifier">ContractLog</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceTag"><span class="hs-identifier">ContractInstanceTag</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>                                    </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#UserThreadMsg"><span class="hs-identifier">UserThreadMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#_HandledRequest"><span class="hs-identifier">_HandledRequest</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#cilMessage"><span class="hs-identifier">cilMessage</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#cilTag"><span class="hs-identifier">cilTag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#toInstanceState"><span class="hs-identifier">toInstanceState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier">Prettyprinter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier">defaultLayoutOptions</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier">layoutPretty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier">vsep</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier">Prettyprinter.Render.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier">renderStrict</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.LogMessages.html"><span class="hs-identifier">Wallet.Emulator.LogMessages</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.LogMessages.html#_AdjustingUnbalancedTx"><span class="hs-identifier">_AdjustingUnbalancedTx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.LogMessages.html#_BalancingUnbalancedTx"><span class="hs-identifier">_BalancingUnbalancedTx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.LogMessages.html#_ValidationFailed"><span class="hs-identifier">_ValidationFailed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html"><span class="hs-identifier">Wallet.Emulator.MultiAgent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent"><span class="hs-identifier">EmulatorEvent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorTimeEvent"><span class="hs-identifier">EmulatorTimeEvent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#chainEvent"><span class="hs-identifier">chainEvent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#eteEvent"><span class="hs-identifier">eteEvent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#instanceEvent"><span class="hs-identifier">instanceEvent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>                                   </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#userThreadEvent"><span class="hs-identifier">userThreadEvent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#walletClientEvent"><span class="hs-identifier">walletClientEvent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#walletEvent%27"><span class="hs-identifier">walletEvent'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.NodeClient.html"><span class="hs-identifier">Wallet.Emulator.NodeClient</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.NodeClient.html#_TxSubmit"><span class="hs-identifier">_TxSubmit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html"><span class="hs-identifier">Wallet.Emulator.Wallet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier">Wallet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#_RequestHandlerLog"><span class="hs-identifier">_RequestHandlerLog</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#_TxBalanceLog"><span class="hs-identifier">_TxBalanceLog</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#mockWalletAddress"><span class="hs-identifier">mockWalletAddress</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Rollup.html"><span class="hs-identifier">Wallet.Rollup</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Rollup</span></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Rollup.Types.html"><span class="hs-identifier">Wallet.Rollup.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Rollup.Types.html#AnnotatedTx"><span class="hs-identifier">AnnotatedTx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-keyword">type</span><span> </span><span id="EmulatorEventFold"><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-var">EmulatorEventFold</span></a></span></span><span> </span><span id="local-6989586621680831077"><span class="annot"><a href="#local-6989586621680831077"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent"><span class="hs-identifier hs-type">EmulatorEvent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831077"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="hs-comment">-- | A fold over emulator events that can fail with 'EmulatorFoldErr'</span><span>
</span><span id="line-98"></span><span class="hs-keyword">type</span><span> </span><span id="EmulatorEventFoldM"><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFoldM"><span class="hs-identifier hs-var">EmulatorEventFoldM</span></a></span></span><span> </span><span id="local-6989586621680831076"><span class="annot"><a href="#local-6989586621680831076"><span class="hs-identifier hs-type">effs</span></a></span></span><span> </span><span id="local-6989586621680831075"><span class="annot"><a href="#local-6989586621680831075"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831076"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent"><span class="hs-identifier hs-type">EmulatorEvent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831075"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-comment">-- | Transactions that failed to validate, in the given validation phase (if specified).</span><span>
</span><span id="line-101"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#failedTransactions"><span class="hs-identifier hs-type">failedTransactions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">ValidationPhase</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-type">EmulatorEventFold</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">TxId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">CardanoTx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">ValidationError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-102"></span><span id="failedTransactions"><span class="annot"><span class="annottext">failedTransactions :: Maybe ValidationPhase
-&gt; EmulatorEventFold
     [(TxId, CardanoTx, ValidationError, Value, [Text])]
</span><a href="Wallet.Emulator.Folds.html#failedTransactions"><span class="hs-identifier hs-var hs-var">failedTransactions</span></a></span></span><span> </span><span id="local-6989586621680831074"><span class="annot"><span class="annottext">Maybe ValidationPhase
</span><a href="#local-6989586621680831074"><span class="hs-identifier hs-var">phase</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EmulatorTimeEvent EmulatorEvent'
 -&gt; Maybe (TxId, CardanoTx, ValidationError, Value, [Text]))
-&gt; Fold
     (TxId, CardanoTx, ValidationError, Value, [Text])
     [(TxId, CardanoTx, ValidationError, Value, [Text])]
-&gt; EmulatorEventFold
     [(TxId, CardanoTx, ValidationError, Value, [Text])]
forall a b r. (a -&gt; Maybe b) -&gt; Fold b r -&gt; Fold a r
</span><a href="Wallet.Emulator.Folds.html#preMapMaybe"><span class="hs-identifier hs-var">preMapMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EmulatorTimeEvent EmulatorEvent'
-&gt; Maybe
     (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text])
</span><a href="#local-6989586621680831073"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(EmulatorTimeEvent EmulatorEvent'
 -&gt; Maybe
      (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
-&gt; ((ValidationPhase, TxId, CardanoTx, ValidationError, Value,
     [Text])
    -&gt; Maybe (TxId, CardanoTx, ValidationError, Value, [Text]))
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Maybe (TxId, CardanoTx, ValidationError, Value, [Text])
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;=&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ValidationPhase
-&gt; (ValidationPhase, TxId, CardanoTx, ValidationError, Value,
    [Text])
-&gt; Maybe (TxId, CardanoTx, ValidationError, Value, [Text])
forall a a b c d e.
Eq a =&gt;
Maybe a -&gt; (a, a, b, c, d, e) -&gt; Maybe (a, b, c, d, e)
</span><a href="#local-6989586621680831072"><span class="hs-identifier hs-var">filterPhase</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ValidationPhase
</span><a href="#local-6989586621680831074"><span class="hs-identifier hs-var">phase</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Fold
  (TxId, CardanoTx, ValidationError, Value, [Text])
  [(TxId, CardanoTx, ValidationError, Value, [Text])]
forall a. Fold a [a]
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">L.list</span></a></span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-104"></span><span>        </span><span id="local-6989586621680831073"><span class="annot"><span class="annottext">f :: EmulatorTimeEvent EmulatorEvent'
-&gt; Maybe
     (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text])
</span><a href="#local-6989586621680831073"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680831070"><span class="annot"><span class="annottext">EmulatorTimeEvent EmulatorEvent'
</span><a href="#local-6989586621680831070"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Getting
  (First
     (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
  (EmulatorTimeEvent EmulatorEvent')
  (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text])
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Maybe
     (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text])
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EmulatorEvent'
 -&gt; Const
      (First
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
      EmulatorEvent')
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Const
     (First
        (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
     (EmulatorTimeEvent EmulatorEvent')
forall e1 e2.
Lens (EmulatorTimeEvent e1) (EmulatorTimeEvent e2) e1 e2
</span><a href="Wallet.Emulator.MultiAgent.html#eteEvent"><span class="hs-identifier hs-var">eteEvent</span></a></span><span> </span><span class="annot"><span class="annottext">((EmulatorEvent'
  -&gt; Const
       (First
          (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
       EmulatorEvent')
 -&gt; EmulatorTimeEvent EmulatorEvent'
 -&gt; Const
      (First
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
      (EmulatorTimeEvent EmulatorEvent'))
-&gt; (((ValidationPhase, TxId, CardanoTx, ValidationError, Value,
      [Text])
     -&gt; Const
          (First
             (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
          (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
    -&gt; EmulatorEvent'
    -&gt; Const
         (First
            (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
         EmulatorEvent')
-&gt; Getting
     (First
        (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
     (EmulatorTimeEvent EmulatorEvent')
     (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainEvent
 -&gt; Const
      (First
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
      ChainEvent)
-&gt; EmulatorEvent'
-&gt; Const
     (First
        (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
     EmulatorEvent'
Prism' EmulatorEvent' ChainEvent
</span><a href="Wallet.Emulator.MultiAgent.html#chainEvent"><span class="hs-identifier hs-var">chainEvent</span></a></span><span> </span><span class="annot"><span class="annottext">((ChainEvent
  -&gt; Const
       (First
          (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
       ChainEvent)
 -&gt; EmulatorEvent'
 -&gt; Const
      (First
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
      EmulatorEvent')
-&gt; (((ValidationPhase, TxId, CardanoTx, ValidationError, Value,
      [Text])
     -&gt; Const
          (First
             (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
          (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
    -&gt; ChainEvent
    -&gt; Const
         (First
            (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
         ChainEvent)
-&gt; ((ValidationPhase, TxId, CardanoTx, ValidationError, Value,
     [Text])
    -&gt; Const
         (First
            (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
-&gt; EmulatorEvent'
-&gt; Const
     (First
        (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
     EmulatorEvent'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text])
 -&gt; Const
      (First
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
      (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
-&gt; ChainEvent
-&gt; Const
     (First
        (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
     ChainEvent
Prism'
  ChainEvent
  (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text])
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var">_TxnValidationFail</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EmulatorTimeEvent EmulatorEvent'
</span><a href="#local-6989586621680831070"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-105"></span><span>          </span><span class="annot"><span class="annottext">Maybe
  (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text])
-&gt; Maybe
     (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text])
-&gt; Maybe
     (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text])
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (First
     (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
  (EmulatorTimeEvent EmulatorEvent')
  (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text])
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Maybe
     (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text])
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EmulatorEvent'
 -&gt; Const
      (First
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
      EmulatorEvent')
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Const
     (First
        (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
     (EmulatorTimeEvent EmulatorEvent')
forall e1 e2.
Lens (EmulatorTimeEvent e1) (EmulatorTimeEvent e2) e1 e2
</span><a href="Wallet.Emulator.MultiAgent.html#eteEvent"><span class="hs-identifier hs-var">eteEvent</span></a></span><span> </span><span class="annot"><span class="annottext">((EmulatorEvent'
  -&gt; Const
       (First
          (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
       EmulatorEvent')
 -&gt; EmulatorTimeEvent EmulatorEvent'
 -&gt; Const
      (First
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
      (EmulatorTimeEvent EmulatorEvent'))
-&gt; (((ValidationPhase, TxId, CardanoTx, ValidationError, Value,
      [Text])
     -&gt; Const
          (First
             (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
          (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
    -&gt; EmulatorEvent'
    -&gt; Const
         (First
            (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
         EmulatorEvent')
-&gt; Getting
     (First
        (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
     (EmulatorTimeEvent EmulatorEvent')
     (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((Wallet, WalletEvent)
 -&gt; Const
      (First
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
      (Wallet, WalletEvent))
-&gt; EmulatorEvent'
-&gt; Const
     (First
        (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
     EmulatorEvent'
Prism' EmulatorEvent' (Wallet, WalletEvent)
</span><a href="Wallet.Emulator.MultiAgent.html#walletEvent%27"><span class="hs-identifier hs-var">walletEvent'</span></a></span><span> </span><span class="annot"><span class="annottext">(((Wallet, WalletEvent)
  -&gt; Const
       (First
          (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
       (Wallet, WalletEvent))
 -&gt; EmulatorEvent'
 -&gt; Const
      (First
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
      EmulatorEvent')
-&gt; (((ValidationPhase, TxId, CardanoTx, ValidationError, Value,
      [Text])
     -&gt; Const
          (First
             (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
          (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
    -&gt; (Wallet, WalletEvent)
    -&gt; Const
         (First
            (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
         (Wallet, WalletEvent))
-&gt; ((ValidationPhase, TxId, CardanoTx, ValidationError, Value,
     [Text])
    -&gt; Const
         (First
            (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
-&gt; EmulatorEvent'
-&gt; Const
     (First
        (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
     EmulatorEvent'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(WalletEvent
 -&gt; Const
      (First
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
      WalletEvent)
-&gt; (Wallet, WalletEvent)
-&gt; Const
     (First
        (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
     (Wallet, WalletEvent)
forall s t a b. Field2 s t a b =&gt; Lens s t a b
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">_2</span></a></span><span> </span><span class="annot"><span class="annottext">((WalletEvent
  -&gt; Const
       (First
          (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
       WalletEvent)
 -&gt; (Wallet, WalletEvent)
 -&gt; Const
      (First
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
      (Wallet, WalletEvent))
-&gt; (((ValidationPhase, TxId, CardanoTx, ValidationError, Value,
      [Text])
     -&gt; Const
          (First
             (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
          (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
    -&gt; WalletEvent
    -&gt; Const
         (First
            (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
         WalletEvent)
-&gt; ((ValidationPhase, TxId, CardanoTx, ValidationError, Value,
     [Text])
    -&gt; Const
         (First
            (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
-&gt; (Wallet, WalletEvent)
-&gt; Const
     (First
        (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
     (Wallet, WalletEvent)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(TxBalanceMsg
 -&gt; Const
      (First
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
      TxBalanceMsg)
-&gt; WalletEvent
-&gt; Const
     (First
        (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
     WalletEvent
Prism' WalletEvent TxBalanceMsg
</span><a href="Wallet.Emulator.Wallet.html#_TxBalanceLog"><span class="hs-identifier hs-var">_TxBalanceLog</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBalanceMsg
  -&gt; Const
       (First
          (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
       TxBalanceMsg)
 -&gt; WalletEvent
 -&gt; Const
      (First
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
      WalletEvent)
-&gt; (((ValidationPhase, TxId, CardanoTx, ValidationError, Value,
      [Text])
     -&gt; Const
          (First
             (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
          (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
    -&gt; TxBalanceMsg
    -&gt; Const
         (First
            (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
         TxBalanceMsg)
-&gt; ((ValidationPhase, TxId, CardanoTx, ValidationError, Value,
     [Text])
    -&gt; Const
         (First
            (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
-&gt; WalletEvent
-&gt; Const
     (First
        (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
     WalletEvent
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text])
 -&gt; Const
      (First
         (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
      (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
-&gt; TxBalanceMsg
-&gt; Const
     (First
        (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text]))
     TxBalanceMsg
Prism'
  TxBalanceMsg
  (ValidationPhase, TxId, CardanoTx, ValidationError, Value, [Text])
</span><a href="Wallet.Emulator.LogMessages.html#_ValidationFailed"><span class="hs-identifier hs-var">_ValidationFailed</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EmulatorTimeEvent EmulatorEvent'
</span><a href="#local-6989586621680831070"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-106"></span><span>        </span><span id="local-6989586621680831072"><span class="annot"><span class="annottext">filterPhase :: Maybe a -&gt; (a, a, b, c, d, e) -&gt; Maybe (a, b, c, d, e)
</span><a href="#local-6989586621680831072"><span class="hs-identifier hs-var hs-var">filterPhase</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680831066"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680831066"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680831065"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680831065"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680831064"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621680831064"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680831063"><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621680831063"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680831062"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621680831062"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, b, c, d, e) -&gt; Maybe (a, b, c, d, e)
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680831066"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680831065"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621680831064"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621680831063"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621680831062"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>        </span><span class="annot"><a href="#local-6989586621680831072"><span class="hs-identifier hs-var">filterPhase</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680831061"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680831061"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680831060"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680831060"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680831059"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680831059"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680831058"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680831058"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680831057"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621680831057"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680831056"><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621680831056"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680831055"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621680831055"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680831061"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680831060"><span class="hs-identifier hs-var">p'</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(a, b, c, d, e) -&gt; Maybe (a, b, c, d, e)
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680831059"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680831058"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621680831057"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621680831056"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621680831055"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe (a, b, c, d, e)
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-comment">-- | Transactions that were validated</span><span>
</span><span id="line-110"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#validatedTransactions"><span class="hs-identifier hs-type">validatedTransactions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-type">EmulatorEventFold</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">TxId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">CardanoTx</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-111"></span><span id="validatedTransactions"><span class="annot"><span class="annottext">validatedTransactions :: EmulatorEventFold [(TxId, CardanoTx, [Text])]
</span><a href="Wallet.Emulator.Folds.html#validatedTransactions"><span class="hs-identifier hs-var hs-var">validatedTransactions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EmulatorTimeEvent EmulatorEvent'
 -&gt; Maybe (TxId, CardanoTx, [Text]))
-&gt; Fold (TxId, CardanoTx, [Text]) [(TxId, CardanoTx, [Text])]
-&gt; EmulatorEventFold [(TxId, CardanoTx, [Text])]
forall a b r. (a -&gt; Maybe b) -&gt; Fold b r -&gt; Fold a r
</span><a href="Wallet.Emulator.Folds.html#preMapMaybe"><span class="hs-identifier hs-var">preMapMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting
  (First (TxId, CardanoTx, [Text]))
  (EmulatorTimeEvent EmulatorEvent')
  (TxId, CardanoTx, [Text])
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Maybe (TxId, CardanoTx, [Text])
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EmulatorEvent'
 -&gt; Const (First (TxId, CardanoTx, [Text])) EmulatorEvent')
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Const
     (First (TxId, CardanoTx, [Text]))
     (EmulatorTimeEvent EmulatorEvent')
forall e1 e2.
Lens (EmulatorTimeEvent e1) (EmulatorTimeEvent e2) e1 e2
</span><a href="Wallet.Emulator.MultiAgent.html#eteEvent"><span class="hs-identifier hs-var">eteEvent</span></a></span><span> </span><span class="annot"><span class="annottext">((EmulatorEvent'
  -&gt; Const (First (TxId, CardanoTx, [Text])) EmulatorEvent')
 -&gt; EmulatorTimeEvent EmulatorEvent'
 -&gt; Const
      (First (TxId, CardanoTx, [Text]))
      (EmulatorTimeEvent EmulatorEvent'))
-&gt; (((TxId, CardanoTx, [Text])
     -&gt; Const
          (First (TxId, CardanoTx, [Text])) (TxId, CardanoTx, [Text]))
    -&gt; EmulatorEvent'
    -&gt; Const (First (TxId, CardanoTx, [Text])) EmulatorEvent')
-&gt; Getting
     (First (TxId, CardanoTx, [Text]))
     (EmulatorTimeEvent EmulatorEvent')
     (TxId, CardanoTx, [Text])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainEvent -&gt; Const (First (TxId, CardanoTx, [Text])) ChainEvent)
-&gt; EmulatorEvent'
-&gt; Const (First (TxId, CardanoTx, [Text])) EmulatorEvent'
Prism' EmulatorEvent' ChainEvent
</span><a href="Wallet.Emulator.MultiAgent.html#chainEvent"><span class="hs-identifier hs-var">chainEvent</span></a></span><span> </span><span class="annot"><span class="annottext">((ChainEvent -&gt; Const (First (TxId, CardanoTx, [Text])) ChainEvent)
 -&gt; EmulatorEvent'
 -&gt; Const (First (TxId, CardanoTx, [Text])) EmulatorEvent')
-&gt; (((TxId, CardanoTx, [Text])
     -&gt; Const
          (First (TxId, CardanoTx, [Text])) (TxId, CardanoTx, [Text]))
    -&gt; ChainEvent
    -&gt; Const (First (TxId, CardanoTx, [Text])) ChainEvent)
-&gt; ((TxId, CardanoTx, [Text])
    -&gt; Const
         (First (TxId, CardanoTx, [Text])) (TxId, CardanoTx, [Text]))
-&gt; EmulatorEvent'
-&gt; Const (First (TxId, CardanoTx, [Text])) EmulatorEvent'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((TxId, CardanoTx, [Text])
 -&gt; Const
      (First (TxId, CardanoTx, [Text])) (TxId, CardanoTx, [Text]))
-&gt; ChainEvent -&gt; Const (First (TxId, CardanoTx, [Text])) ChainEvent
Prism' ChainEvent (TxId, CardanoTx, [Text])
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var">_TxnValidate</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Fold (TxId, CardanoTx, [Text]) [(TxId, CardanoTx, [Text])]
forall a. Fold a [a]
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">L.list</span></a></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-comment">-- | Unbalanced transactions that are sent to the wallet for balancing</span><span>
</span><span id="line-114"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#walletTxBalanceEvents"><span class="hs-identifier hs-type">walletTxBalanceEvents</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-type">EmulatorEventFold</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-type">UnbalancedTx</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-115"></span><span id="walletTxBalanceEvents"><span class="annot"><span class="annottext">walletTxBalanceEvents :: EmulatorEventFold [UnbalancedTx]
</span><a href="Wallet.Emulator.Folds.html#walletTxBalanceEvents"><span class="hs-identifier hs-var hs-var">walletTxBalanceEvents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EmulatorTimeEvent EmulatorEvent' -&gt; Maybe UnbalancedTx)
-&gt; Fold UnbalancedTx [UnbalancedTx]
-&gt; EmulatorEventFold [UnbalancedTx]
forall a b r. (a -&gt; Maybe b) -&gt; Fold b r -&gt; Fold a r
</span><a href="Wallet.Emulator.Folds.html#preMapMaybe"><span class="hs-identifier hs-var">preMapMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting
  (First UnbalancedTx)
  (EmulatorTimeEvent EmulatorEvent')
  UnbalancedTx
-&gt; EmulatorTimeEvent EmulatorEvent' -&gt; Maybe UnbalancedTx
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EmulatorEvent' -&gt; Const (First UnbalancedTx) EmulatorEvent')
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Const (First UnbalancedTx) (EmulatorTimeEvent EmulatorEvent')
forall e1 e2.
Lens (EmulatorTimeEvent e1) (EmulatorTimeEvent e2) e1 e2
</span><a href="Wallet.Emulator.MultiAgent.html#eteEvent"><span class="hs-identifier hs-var">eteEvent</span></a></span><span> </span><span class="annot"><span class="annottext">((EmulatorEvent' -&gt; Const (First UnbalancedTx) EmulatorEvent')
 -&gt; EmulatorTimeEvent EmulatorEvent'
 -&gt; Const (First UnbalancedTx) (EmulatorTimeEvent EmulatorEvent'))
-&gt; ((UnbalancedTx -&gt; Const (First UnbalancedTx) UnbalancedTx)
    -&gt; EmulatorEvent' -&gt; Const (First UnbalancedTx) EmulatorEvent')
-&gt; Getting
     (First UnbalancedTx)
     (EmulatorTimeEvent EmulatorEvent')
     UnbalancedTx
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((Wallet, WalletEvent)
 -&gt; Const (First UnbalancedTx) (Wallet, WalletEvent))
-&gt; EmulatorEvent' -&gt; Const (First UnbalancedTx) EmulatorEvent'
Prism' EmulatorEvent' (Wallet, WalletEvent)
</span><a href="Wallet.Emulator.MultiAgent.html#walletEvent%27"><span class="hs-identifier hs-var">walletEvent'</span></a></span><span> </span><span class="annot"><span class="annottext">(((Wallet, WalletEvent)
  -&gt; Const (First UnbalancedTx) (Wallet, WalletEvent))
 -&gt; EmulatorEvent' -&gt; Const (First UnbalancedTx) EmulatorEvent')
-&gt; ((UnbalancedTx -&gt; Const (First UnbalancedTx) UnbalancedTx)
    -&gt; (Wallet, WalletEvent)
    -&gt; Const (First UnbalancedTx) (Wallet, WalletEvent))
-&gt; (UnbalancedTx -&gt; Const (First UnbalancedTx) UnbalancedTx)
-&gt; EmulatorEvent'
-&gt; Const (First UnbalancedTx) EmulatorEvent'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(WalletEvent -&gt; Const (First UnbalancedTx) WalletEvent)
-&gt; (Wallet, WalletEvent)
-&gt; Const (First UnbalancedTx) (Wallet, WalletEvent)
forall s t a b. Field2 s t a b =&gt; Lens s t a b
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">_2</span></a></span><span> </span><span class="annot"><span class="annottext">((WalletEvent -&gt; Const (First UnbalancedTx) WalletEvent)
 -&gt; (Wallet, WalletEvent)
 -&gt; Const (First UnbalancedTx) (Wallet, WalletEvent))
-&gt; ((UnbalancedTx -&gt; Const (First UnbalancedTx) UnbalancedTx)
    -&gt; WalletEvent -&gt; Const (First UnbalancedTx) WalletEvent)
-&gt; (UnbalancedTx -&gt; Const (First UnbalancedTx) UnbalancedTx)
-&gt; (Wallet, WalletEvent)
-&gt; Const (First UnbalancedTx) (Wallet, WalletEvent)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(TxBalanceMsg -&gt; Const (First UnbalancedTx) TxBalanceMsg)
-&gt; WalletEvent -&gt; Const (First UnbalancedTx) WalletEvent
Prism' WalletEvent TxBalanceMsg
</span><a href="Wallet.Emulator.Wallet.html#_TxBalanceLog"><span class="hs-identifier hs-var">_TxBalanceLog</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBalanceMsg -&gt; Const (First UnbalancedTx) TxBalanceMsg)
 -&gt; WalletEvent -&gt; Const (First UnbalancedTx) WalletEvent)
-&gt; ((UnbalancedTx -&gt; Const (First UnbalancedTx) UnbalancedTx)
    -&gt; TxBalanceMsg -&gt; Const (First UnbalancedTx) TxBalanceMsg)
-&gt; (UnbalancedTx -&gt; Const (First UnbalancedTx) UnbalancedTx)
-&gt; WalletEvent
-&gt; Const (First UnbalancedTx) WalletEvent
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(UnbalancedTx -&gt; Const (First UnbalancedTx) UnbalancedTx)
-&gt; TxBalanceMsg -&gt; Const (First UnbalancedTx) TxBalanceMsg
Prism' TxBalanceMsg UnbalancedTx
</span><a href="Wallet.Emulator.LogMessages.html#_BalancingUnbalancedTx"><span class="hs-identifier hs-var">_BalancingUnbalancedTx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Fold UnbalancedTx [UnbalancedTx]
forall a. Fold a [a]
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">L.list</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="hs-comment">-- | Min lovelace of 'txOut's from adjusted unbalanced transactions for all wallets</span><span>
</span><span id="line-118"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#walletsAdjustedTxEvents"><span class="hs-identifier hs-type">walletsAdjustedTxEvents</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-type">EmulatorEventFold</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">Ada.Ada</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-119"></span><span id="walletsAdjustedTxEvents"><span class="annot"><span class="annottext">walletsAdjustedTxEvents :: EmulatorEventFold [Ada]
</span><a href="Wallet.Emulator.Folds.html#walletsAdjustedTxEvents"><span class="hs-identifier hs-var hs-var">walletsAdjustedTxEvents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Ada -&gt; [Ada]
forall a. Set a -&gt; [a]
</span><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">(Set Ada -&gt; [Ada]) -&gt; ([[Ada]] -&gt; Set Ada) -&gt; [[Ada]] -&gt; [Ada]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Ada] -&gt; Set Ada
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([Ada] -&gt; Set Ada) -&gt; ([[Ada]] -&gt; [Ada]) -&gt; [[Ada]] -&gt; Set Ada
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[[Ada]] -&gt; [Ada]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">concat</span></a></span><span> </span><span class="annot"><span class="annottext">([[Ada]] -&gt; [Ada])
-&gt; Fold (EmulatorTimeEvent EmulatorEvent') [[Ada]]
-&gt; EmulatorEventFold [Ada]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(EmulatorTimeEvent EmulatorEvent' -&gt; Maybe [Ada])
-&gt; Fold [Ada] [[Ada]]
-&gt; Fold (EmulatorTimeEvent EmulatorEvent') [[Ada]]
forall a b r. (a -&gt; Maybe b) -&gt; Fold b r -&gt; Fold a r
</span><a href="Wallet.Emulator.Folds.html#preMapMaybe"><span class="hs-identifier hs-var">preMapMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First [Ada]) (EmulatorTimeEvent EmulatorEvent') [Ada]
-&gt; EmulatorTimeEvent EmulatorEvent' -&gt; Maybe [Ada]
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EmulatorEvent' -&gt; Const (First [Ada]) EmulatorEvent')
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Const (First [Ada]) (EmulatorTimeEvent EmulatorEvent')
forall e1 e2.
Lens (EmulatorTimeEvent e1) (EmulatorTimeEvent e2) e1 e2
</span><a href="Wallet.Emulator.MultiAgent.html#eteEvent"><span class="hs-identifier hs-var">eteEvent</span></a></span><span> </span><span class="annot"><span class="annottext">((EmulatorEvent' -&gt; Const (First [Ada]) EmulatorEvent')
 -&gt; EmulatorTimeEvent EmulatorEvent'
 -&gt; Const (First [Ada]) (EmulatorTimeEvent EmulatorEvent'))
-&gt; (([Ada] -&gt; Const (First [Ada]) [Ada])
    -&gt; EmulatorEvent' -&gt; Const (First [Ada]) EmulatorEvent')
-&gt; Getting (First [Ada]) (EmulatorTimeEvent EmulatorEvent') [Ada]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((Wallet, WalletEvent)
 -&gt; Const (First [Ada]) (Wallet, WalletEvent))
-&gt; EmulatorEvent' -&gt; Const (First [Ada]) EmulatorEvent'
Prism' EmulatorEvent' (Wallet, WalletEvent)
</span><a href="Wallet.Emulator.MultiAgent.html#walletEvent%27"><span class="hs-identifier hs-var">walletEvent'</span></a></span><span> </span><span class="annot"><span class="annottext">(((Wallet, WalletEvent)
  -&gt; Const (First [Ada]) (Wallet, WalletEvent))
 -&gt; EmulatorEvent' -&gt; Const (First [Ada]) EmulatorEvent')
-&gt; (([Ada] -&gt; Const (First [Ada]) [Ada])
    -&gt; (Wallet, WalletEvent)
    -&gt; Const (First [Ada]) (Wallet, WalletEvent))
-&gt; ([Ada] -&gt; Const (First [Ada]) [Ada])
-&gt; EmulatorEvent'
-&gt; Const (First [Ada]) EmulatorEvent'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(WalletEvent -&gt; Const (First [Ada]) WalletEvent)
-&gt; (Wallet, WalletEvent)
-&gt; Const (First [Ada]) (Wallet, WalletEvent)
forall s t a b. Field2 s t a b =&gt; Lens s t a b
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">_2</span></a></span><span> </span><span class="annot"><span class="annottext">((WalletEvent -&gt; Const (First [Ada]) WalletEvent)
 -&gt; (Wallet, WalletEvent)
 -&gt; Const (First [Ada]) (Wallet, WalletEvent))
-&gt; (([Ada] -&gt; Const (First [Ada]) [Ada])
    -&gt; WalletEvent -&gt; Const (First [Ada]) WalletEvent)
-&gt; ([Ada] -&gt; Const (First [Ada]) [Ada])
-&gt; (Wallet, WalletEvent)
-&gt; Const (First [Ada]) (Wallet, WalletEvent)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(RequestHandlerLogMsg -&gt; Const (First [Ada]) RequestHandlerLogMsg)
-&gt; WalletEvent -&gt; Const (First [Ada]) WalletEvent
Prism' WalletEvent RequestHandlerLogMsg
</span><a href="Wallet.Emulator.Wallet.html#_RequestHandlerLog"><span class="hs-identifier hs-var">_RequestHandlerLog</span></a></span><span> </span><span class="annot"><span class="annottext">((RequestHandlerLogMsg -&gt; Const (First [Ada]) RequestHandlerLogMsg)
 -&gt; WalletEvent -&gt; Const (First [Ada]) WalletEvent)
-&gt; (([Ada] -&gt; Const (First [Ada]) [Ada])
    -&gt; RequestHandlerLogMsg
    -&gt; Const (First [Ada]) RequestHandlerLogMsg)
-&gt; ([Ada] -&gt; Const (First [Ada]) [Ada])
-&gt; WalletEvent
-&gt; Const (First [Ada]) WalletEvent
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">([Ada] -&gt; Const (First [Ada]) [Ada])
-&gt; RequestHandlerLogMsg -&gt; Const (First [Ada]) RequestHandlerLogMsg
Prism' RequestHandlerLogMsg [Ada]
</span><a href="Wallet.Emulator.LogMessages.html#_AdjustingUnbalancedTx"><span class="hs-identifier hs-var">_AdjustingUnbalancedTx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Fold [Ada] [[Ada]]
forall a. Fold a [a]
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">L.list</span></a></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#mkTxLogs"><span class="hs-identifier hs-type">mkTxLogs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-type">EmulatorEventFold</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutus.Contract.Request.html#MkTxLog"><span class="hs-identifier hs-type">MkTxLog</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-122"></span><span id="mkTxLogs"><span class="annot"><span class="annottext">mkTxLogs :: EmulatorEventFold [MkTxLog]
</span><a href="Wallet.Emulator.Folds.html#mkTxLogs"><span class="hs-identifier hs-var hs-var">mkTxLogs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621680831050"><span class="hs-identifier hs-type">getTxLogEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceMsg"><span class="hs-identifier hs-type">ContractInstanceMsg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Request.html#MkTxLog"><span class="hs-identifier hs-type">MkTxLog</span></a></span><span>
</span><span id="line-124"></span><span>        </span><span id="local-6989586621680831050"><span class="annot"><span class="annottext">getTxLogEvent :: ContractInstanceMsg -&gt; Maybe MkTxLog
</span><a href="#local-6989586621680831050"><span class="hs-identifier hs-var hs-var">getTxLogEvent</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractLog"><span class="hs-identifier hs-type">ContractLog</span></a></span><span> </span><span id="local-6989586621680831049"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680831049"><span class="hs-identifier hs-var">vl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Result MkTxLog
forall a. FromJSON a =&gt; Value -&gt; Result a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">JSON.fromJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680831049"><span class="hs-identifier hs-var">vl</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-125"></span><span>            </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.Error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe MkTxLog
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-126"></span><span>            </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.Success</span></a></span><span> </span><span id="local-6989586621680831045"><span class="annot"><span class="annottext">MkTxLog
</span><a href="#local-6989586621680831045"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MkTxLog -&gt; Maybe MkTxLog
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">MkTxLog
</span><a href="#local-6989586621680831045"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-127"></span><span>        </span><span class="annot"><a href="#local-6989586621680831050"><span class="hs-identifier hs-var">getTxLogEvent</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceMsg
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe MkTxLog
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span>        </span><span class="annot"><a href="#local-6989586621680831044"><span class="hs-identifier hs-type">flt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent"><span class="hs-identifier hs-type">EmulatorEvent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Request.html#MkTxLog"><span class="hs-identifier hs-type">MkTxLog</span></a></span><span>
</span><span id="line-130"></span><span>        </span><span id="local-6989586621680831044"><span class="annot"><span class="annottext">flt :: EmulatorTimeEvent EmulatorEvent' -&gt; Maybe MkTxLog
</span><a href="#local-6989586621680831044"><span class="hs-identifier hs-var hs-var">flt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EmulatorTimeEvent ContractInstanceLog -&gt; ContractInstanceMsg)
-&gt; Maybe (EmulatorTimeEvent ContractInstanceLog)
-&gt; Maybe ContractInstanceMsg
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting
  ContractInstanceMsg
  (EmulatorTimeEvent ContractInstanceLog)
  ContractInstanceMsg
-&gt; EmulatorTimeEvent ContractInstanceLog -&gt; ContractInstanceMsg
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ContractInstanceLog
 -&gt; Const ContractInstanceMsg ContractInstanceLog)
-&gt; EmulatorTimeEvent ContractInstanceLog
-&gt; Const
     ContractInstanceMsg (EmulatorTimeEvent ContractInstanceLog)
forall e1 e2.
Lens (EmulatorTimeEvent e1) (EmulatorTimeEvent e2) e1 e2
</span><a href="Wallet.Emulator.MultiAgent.html#eteEvent"><span class="hs-identifier hs-var">eteEvent</span></a></span><span> </span><span class="annot"><span class="annottext">((ContractInstanceLog
  -&gt; Const ContractInstanceMsg ContractInstanceLog)
 -&gt; EmulatorTimeEvent ContractInstanceLog
 -&gt; Const
      ContractInstanceMsg (EmulatorTimeEvent ContractInstanceLog))
-&gt; ((ContractInstanceMsg
     -&gt; Const ContractInstanceMsg ContractInstanceMsg)
    -&gt; ContractInstanceLog
    -&gt; Const ContractInstanceMsg ContractInstanceLog)
-&gt; Getting
     ContractInstanceMsg
     (EmulatorTimeEvent ContractInstanceLog)
     ContractInstanceMsg
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ContractInstanceMsg
 -&gt; Const ContractInstanceMsg ContractInstanceMsg)
-&gt; ContractInstanceLog
-&gt; Const ContractInstanceMsg ContractInstanceLog
Lens' ContractInstanceLog ContractInstanceMsg
</span><a href="Plutus.Trace.Emulator.Types.html#cilMessage"><span class="hs-identifier hs-var">cilMessage</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (EmulatorTimeEvent ContractInstanceLog)
 -&gt; Maybe ContractInstanceMsg)
-&gt; (EmulatorTimeEvent EmulatorEvent'
    -&gt; Maybe (EmulatorTimeEvent ContractInstanceLog))
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Maybe ContractInstanceMsg
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(EmulatorEvent' -&gt; Maybe ContractInstanceLog)
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Maybe (EmulatorTimeEvent ContractInstanceLog)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting
  (First ContractInstanceLog) EmulatorEvent' ContractInstanceLog
-&gt; EmulatorEvent' -&gt; Maybe ContractInstanceLog
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (First ContractInstanceLog) EmulatorEvent' ContractInstanceLog
Prism' EmulatorEvent' ContractInstanceLog
</span><a href="Wallet.Emulator.MultiAgent.html#instanceEvent"><span class="hs-identifier hs-var">instanceEvent</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(EmulatorTimeEvent EmulatorEvent' -&gt; Maybe ContractInstanceMsg)
-&gt; (ContractInstanceMsg -&gt; Maybe MkTxLog)
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Maybe MkTxLog
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;=&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceMsg -&gt; Maybe MkTxLog
</span><a href="#local-6989586621680831050"><span class="hs-identifier hs-var">getTxLogEvent</span></a></span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(EmulatorTimeEvent EmulatorEvent' -&gt; Maybe MkTxLog)
-&gt; Fold MkTxLog [MkTxLog] -&gt; EmulatorEventFold [MkTxLog]
forall a b r. (a -&gt; Maybe b) -&gt; Fold b r -&gt; Fold a r
</span><a href="Wallet.Emulator.Folds.html#preMapMaybe"><span class="hs-identifier hs-var">preMapMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorTimeEvent EmulatorEvent' -&gt; Maybe MkTxLog
</span><a href="#local-6989586621680831044"><span class="hs-identifier hs-var">flt</span></a></span><span> </span><span class="annot"><span class="annottext">Fold MkTxLog [MkTxLog]
forall a. Fold a [a]
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">L.list</span></a></span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-comment">-- | The state of a contract instance, recovered from the emulator log.</span><span>
</span><span id="line-134"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#instanceState"><span class="hs-identifier hs-type">instanceState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680831310"><span class="annot"><a href="#local-6989586621680831310"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680831309"><span class="annot"><a href="#local-6989586621680831309"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680831308"><span class="annot"><a href="#local-6989586621680831308"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621680831307"><span class="annot"><a href="#local-6989586621680831307"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680831311"><span class="annot"><a href="#local-6989586621680831311"><span class="hs-identifier hs-type">effs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorFoldErr"><span class="hs-identifier hs-type">EmulatorFoldErr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680831311"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831310"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-138"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html#Contract"><span class="hs-identifier hs-type">Contract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831310"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831309"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831308"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831307"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceTag"><span class="hs-identifier hs-type">ContractInstanceTag</span></a></span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFoldM"><span class="hs-identifier hs-type">EmulatorEventFoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831311"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceState"><span class="hs-identifier hs-type">ContractInstanceState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831310"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831309"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831308"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831307"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span id="instanceState"><span class="annot"><span class="annottext">instanceState :: Contract w s e a
-&gt; ContractInstanceTag
-&gt; EmulatorEventFoldM effs (Maybe (ContractInstanceState w s e a))
</span><a href="Wallet.Emulator.Folds.html#instanceState"><span class="hs-identifier hs-var hs-var">instanceState</span></a></span></span><span> </span><span id="local-6989586621680831041"><span class="annot"><span class="annottext">Contract w s e a
</span><a href="#local-6989586621680831041"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621680831040"><span class="annot"><span class="annottext">ContractInstanceTag
</span><a href="#local-6989586621680831040"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621680831039"><span class="hs-identifier hs-type">flt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent"><span class="hs-identifier hs-type">EmulatorEvent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Resumable.html#Response"><span class="hs-identifier hs-type">Response</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.Value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>        </span><span id="local-6989586621680831039"><span class="annot"><span class="annottext">flt :: EmulatorTimeEvent EmulatorEvent' -&gt; Maybe (Response Value)
</span><a href="#local-6989586621680831039"><span class="hs-identifier hs-var hs-var">flt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Getting
  (First (Response Value))
  (EmulatorTimeEvent EmulatorEvent')
  (Response Value)
-&gt; EmulatorTimeEvent EmulatorEvent' -&gt; Maybe (Response Value)
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EmulatorEvent' -&gt; Const (First (Response Value)) EmulatorEvent')
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Const
     (First (Response Value)) (EmulatorTimeEvent EmulatorEvent')
forall e1 e2.
Lens (EmulatorTimeEvent e1) (EmulatorTimeEvent e2) e1 e2
</span><a href="Wallet.Emulator.MultiAgent.html#eteEvent"><span class="hs-identifier hs-var">eteEvent</span></a></span><span> </span><span class="annot"><span class="annottext">((EmulatorEvent' -&gt; Const (First (Response Value)) EmulatorEvent')
 -&gt; EmulatorTimeEvent EmulatorEvent'
 -&gt; Const
      (First (Response Value)) (EmulatorTimeEvent EmulatorEvent'))
-&gt; ((Response Value
     -&gt; Const (First (Response Value)) (Response Value))
    -&gt; EmulatorEvent' -&gt; Const (First (Response Value)) EmulatorEvent')
-&gt; Getting
     (First (Response Value))
     (EmulatorTimeEvent EmulatorEvent')
     (Response Value)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ContractInstanceLog
 -&gt; Const (First (Response Value)) ContractInstanceLog)
-&gt; EmulatorEvent' -&gt; Const (First (Response Value)) EmulatorEvent'
Prism' EmulatorEvent' ContractInstanceLog
</span><a href="Wallet.Emulator.MultiAgent.html#instanceEvent"><span class="hs-identifier hs-var">instanceEvent</span></a></span><span> </span><span class="annot"><span class="annottext">((ContractInstanceLog
  -&gt; Const (First (Response Value)) ContractInstanceLog)
 -&gt; EmulatorEvent' -&gt; Const (First (Response Value)) EmulatorEvent')
-&gt; ((Response Value
     -&gt; Const (First (Response Value)) (Response Value))
    -&gt; ContractInstanceLog
    -&gt; Const (First (Response Value)) ContractInstanceLog)
-&gt; (Response Value
    -&gt; Const (First (Response Value)) (Response Value))
-&gt; EmulatorEvent'
-&gt; Const (First (Response Value)) EmulatorEvent'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ContractInstanceLog -&gt; Bool)
-&gt; Optic'
     (-&gt;)
     (Const (First (Response Value)))
     ContractInstanceLog
     ContractInstanceLog
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) a.
(Choice p, Applicative f) =&gt;
(a -&gt; Bool) -&gt; Optic' p f a a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">filtered</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ContractInstanceTag -&gt; ContractInstanceTag -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">(==)</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceTag
</span><a href="#local-6989586621680831040"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">(ContractInstanceTag -&gt; Bool)
-&gt; (ContractInstanceLog -&gt; ContractInstanceTag)
-&gt; ContractInstanceLog
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting ContractInstanceTag ContractInstanceLog ContractInstanceTag
-&gt; ContractInstanceLog -&gt; ContractInstanceTag
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="annot"><span class="annottext">Getting ContractInstanceTag ContractInstanceLog ContractInstanceTag
Lens' ContractInstanceLog ContractInstanceTag
</span><a href="Plutus.Trace.Emulator.Types.html#cilTag"><span class="hs-identifier hs-var">cilTag</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Optic'
  (-&gt;)
  (Const (First (Response Value)))
  ContractInstanceLog
  ContractInstanceLog
-&gt; ((Response Value
     -&gt; Const (First (Response Value)) (Response Value))
    -&gt; ContractInstanceLog
    -&gt; Const (First (Response Value)) ContractInstanceLog)
-&gt; (Response Value
    -&gt; Const (First (Response Value)) (Response Value))
-&gt; ContractInstanceLog
-&gt; Const (First (Response Value)) ContractInstanceLog
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ContractInstanceMsg
 -&gt; Const (First (Response Value)) ContractInstanceMsg)
-&gt; ContractInstanceLog
-&gt; Const (First (Response Value)) ContractInstanceLog
Lens' ContractInstanceLog ContractInstanceMsg
</span><a href="Plutus.Trace.Emulator.Types.html#cilMessage"><span class="hs-identifier hs-var">cilMessage</span></a></span><span> </span><span class="annot"><span class="annottext">((ContractInstanceMsg
  -&gt; Const (First (Response Value)) ContractInstanceMsg)
 -&gt; ContractInstanceLog
 -&gt; Const (First (Response Value)) ContractInstanceLog)
-&gt; ((Response Value
     -&gt; Const (First (Response Value)) (Response Value))
    -&gt; ContractInstanceMsg
    -&gt; Const (First (Response Value)) ContractInstanceMsg)
-&gt; (Response Value
    -&gt; Const (First (Response Value)) (Response Value))
-&gt; ContractInstanceLog
-&gt; Const (First (Response Value)) ContractInstanceLog
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Response Value -&gt; Const (First (Response Value)) (Response Value))
-&gt; ContractInstanceMsg
-&gt; Const (First (Response Value)) ContractInstanceMsg
Prism' ContractInstanceMsg (Response Value)
</span><a href="Plutus.Trace.Emulator.Types.html#_HandledRequest"><span class="hs-identifier hs-var">_HandledRequest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>        </span><span class="annot"><a href="#local-6989586621680831037"><span class="hs-identifier hs-type">decode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680831346"><span class="annot"><a href="#local-6989586621680831346"><span class="hs-identifier hs-type">effs'</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorFoldErr"><span class="hs-identifier hs-type">EmulatorFoldErr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680831346"><span class="hs-identifier hs-type">effs'</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent"><span class="hs-identifier hs-type">EmulatorEvent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831346"><span class="hs-identifier hs-type">effs'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Resumable.html#Response"><span class="hs-identifier hs-type">Response</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>        </span><span id="local-6989586621680831037"><span class="annot"><span class="annottext">decode :: EmulatorTimeEvent EmulatorEvent'
-&gt; Eff effs' (Maybe (Response PABResp))
</span><a href="#local-6989586621680831037"><span class="hs-identifier hs-var hs-var">decode</span></a></span></span><span> </span><span id="local-6989586621680831036"><span class="annot"><span class="annottext">EmulatorTimeEvent EmulatorEvent'
</span><a href="#local-6989586621680831036"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-147"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EmulatorTimeEvent EmulatorEvent' -&gt; Maybe (Response Value)
</span><a href="#local-6989586621680831039"><span class="hs-identifier hs-var">flt</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorTimeEvent EmulatorEvent'
</span><a href="#local-6989586621680831036"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-148"></span><span>                </span><span class="annot"><span class="annottext">Maybe (Response Value)
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Response PABResp) -&gt; Eff effs' (Maybe (Response PABResp))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Response PABResp)
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-149"></span><span>                </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680831035"><span class="annot"><span class="annottext">Response Value
</span><a href="#local-6989586621680831035"><span class="hs-identifier hs-var">response</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Result PABResp)
-&gt; Response Value -&gt; Result (Response PABResp)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FromJSON PABResp =&gt; Value -&gt; Result PABResp
forall a. FromJSON a =&gt; Value -&gt; Result a
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var">JSON.fromJSON</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Response Value
</span><a href="#local-6989586621680831035"><span class="hs-identifier hs-var">response</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-150"></span><span>                    </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.Error</span></a></span><span> </span><span id="local-6989586621680831034"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680831034"><span class="hs-identifier hs-var">e'</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EmulatorFoldErr -&gt; Eff effs' (Maybe (Response PABResp))
forall e (effs :: [* -&gt; *]) a.
Member (Error e) effs =&gt;
e -&gt; Eff effs a
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="annot"><span class="annottext">(EmulatorFoldErr -&gt; Eff effs' (Maybe (Response PABResp)))
-&gt; EmulatorFoldErr -&gt; Eff effs' (Maybe (Response PABResp))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Response Value -&gt; EmulatorFoldErr
</span><a href="Wallet.Emulator.Folds.html#InstanceStateJSONDecodingError"><span class="hs-identifier hs-var">InstanceStateJSONDecodingError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680831034"><span class="hs-identifier hs-var">e'</span></a></span><span> </span><span class="annot"><span class="annottext">Response Value
</span><a href="#local-6989586621680831035"><span class="hs-identifier hs-var">response</span></a></span><span>
</span><span id="line-151"></span><span>                    </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.Success</span></a></span><span> </span><span id="local-6989586621680831032"><span class="annot"><span class="annottext">Response PABResp
</span><a href="#local-6989586621680831032"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Response PABResp) -&gt; Eff effs' (Maybe (Response PABResp))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Response PABResp -&gt; Maybe (Response PABResp)
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Response PABResp
</span><a href="#local-6989586621680831032"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(EmulatorTimeEvent EmulatorEvent'
 -&gt; Eff effs (Maybe (Response PABResp)))
-&gt; FoldM
     (Eff effs)
     (Response PABResp)
     (Maybe (ContractInstanceState w s e a))
-&gt; EmulatorEventFoldM effs (Maybe (ContractInstanceState w s e a))
forall (m :: * -&gt; *) a b r.
Monad m =&gt;
(a -&gt; m (Maybe b)) -&gt; FoldM m b r -&gt; FoldM m a r
</span><a href="Wallet.Emulator.Folds.html#preMapMaybeM"><span class="hs-identifier hs-var">preMapMaybeM</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorTimeEvent EmulatorEvent'
-&gt; Eff effs (Maybe (Response PABResp))
forall (effs' :: [* -&gt; *]).
Member (Error EmulatorFoldErr) effs' =&gt;
EmulatorTimeEvent EmulatorEvent'
-&gt; Eff effs' (Maybe (Response PABResp))
</span><a href="#local-6989586621680831037"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">(FoldM
   (Eff effs)
   (Response PABResp)
   (Maybe (ContractInstanceState w s e a))
 -&gt; EmulatorEventFoldM effs (Maybe (ContractInstanceState w s e a)))
-&gt; FoldM
     (Eff effs)
     (Response PABResp)
     (Maybe (ContractInstanceState w s e a))
-&gt; EmulatorEventFoldM effs (Maybe (ContractInstanceState w s e a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Fold (Response PABResp) (Maybe (ContractInstanceState w s e a))
-&gt; FoldM
     (Eff effs)
     (Response PABResp)
     (Maybe (ContractInstanceState w s e a))
forall (m :: * -&gt; *) a b. Monad m =&gt; Fold a b -&gt; FoldM m a b
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">L.generalize</span></a></span><span> </span><span class="annot"><span class="annottext">(Fold (Response PABResp) (Maybe (ContractInstanceState w s e a))
 -&gt; FoldM
      (Eff effs)
      (Response PABResp)
      (Maybe (ContractInstanceState w s e a)))
-&gt; Fold (Response PABResp) (Maybe (ContractInstanceState w s e a))
-&gt; FoldM
     (Eff effs)
     (Response PABResp)
     (Maybe (ContractInstanceState w s e a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (ContractInstanceStateInternal w s e a)
 -&gt; Response PABResp
 -&gt; Maybe (ContractInstanceStateInternal w s e a))
-&gt; Maybe (ContractInstanceStateInternal w s e a)
-&gt; (Maybe (ContractInstanceStateInternal w s e a)
    -&gt; Maybe (ContractInstanceState w s e a))
-&gt; Fold (Response PABResp) (Maybe (ContractInstanceState w s e a))
forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680831030"><span class="annot"><span class="annottext">Maybe (ContractInstanceStateInternal w s e a)
</span><a href="#local-6989586621680831030"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680831029"><span class="annot"><span class="annottext">Response PABResp
</span><a href="#local-6989586621680831029"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (ContractInstanceStateInternal w s e a)
</span><a href="#local-6989586621680831030"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (ContractInstanceStateInternal w s e a)
-&gt; (ContractInstanceStateInternal w s e a
    -&gt; Maybe (ContractInstanceStateInternal w s e a))
-&gt; Maybe (ContractInstanceStateInternal w s e a)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Response PABResp
-&gt; ContractInstanceStateInternal w s e a
-&gt; Maybe (ContractInstanceStateInternal w s e a)
forall w (s :: Row *) e a.
Monoid w =&gt;
Response PABResp
-&gt; ContractInstanceStateInternal w s e a
-&gt; Maybe (ContractInstanceStateInternal w s e a)
</span><a href="Plutus.Trace.Emulator.Types.html#addEventInstanceState"><span class="hs-identifier hs-var">addEventInstanceState</span></a></span><span> </span><span class="annot"><span class="annottext">Response PABResp
</span><a href="#local-6989586621680831029"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ContractInstanceStateInternal w s e a
-&gt; Maybe (ContractInstanceStateInternal w s e a)
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(ContractInstanceStateInternal w s e a
 -&gt; Maybe (ContractInstanceStateInternal w s e a))
-&gt; ContractInstanceStateInternal w s e a
-&gt; Maybe (ContractInstanceStateInternal w s e a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Contract w s e a -&gt; ContractInstanceStateInternal w s e a
forall w (s :: Row *) e a.
Monoid w =&gt;
Contract w s e a -&gt; ContractInstanceStateInternal w s e a
</span><a href="Plutus.Trace.Emulator.Types.html#emptyInstanceState"><span class="hs-identifier hs-var">emptyInstanceState</span></a></span><span> </span><span class="annot"><span class="annottext">Contract w s e a
</span><a href="#local-6989586621680831041"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ContractInstanceStateInternal w s e a
 -&gt; ContractInstanceState w s e a)
-&gt; Maybe (ContractInstanceStateInternal w s e a)
-&gt; Maybe (ContractInstanceState w s e a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceStateInternal w s e a
-&gt; ContractInstanceState w s e a
forall w (s :: Row *) e a.
ContractInstanceStateInternal w s e a
-&gt; ContractInstanceState w s e a
</span><a href="Plutus.Trace.Emulator.Types.html#toInstanceState"><span class="hs-identifier hs-var">toInstanceState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-comment">-- | The list of open requests of the contract instance at its latest iteration</span><span>
</span><span id="line-156"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#instanceRequests"><span class="hs-identifier hs-type">instanceRequests</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680831028"><span class="annot"><a href="#local-6989586621680831028"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680831027"><span class="annot"><a href="#local-6989586621680831027"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680831026"><span class="annot"><a href="#local-6989586621680831026"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621680831025"><span class="annot"><a href="#local-6989586621680831025"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680831024"><span class="annot"><a href="#local-6989586621680831024"><span class="hs-identifier hs-type">effs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorFoldErr"><span class="hs-identifier hs-type">EmulatorFoldErr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680831024"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831028"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-160"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html#Contract"><span class="hs-identifier hs-type">Contract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831028"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831027"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831026"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831025"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceTag"><span class="hs-identifier hs-type">ContractInstanceTag</span></a></span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFoldM"><span class="hs-identifier hs-type">EmulatorEventFoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831024"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutus.Contract.Resumable.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABReq"><span class="hs-identifier hs-type">PABReq</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-164"></span><span id="instanceRequests"><span class="annot"><span class="annottext">instanceRequests :: Contract w s e a
-&gt; ContractInstanceTag -&gt; EmulatorEventFoldM effs [Request PABReq]
</span><a href="Wallet.Emulator.Folds.html#instanceRequests"><span class="hs-identifier hs-var hs-var">instanceRequests</span></a></span></span><span> </span><span id="local-6989586621680831023"><span class="annot"><span class="annottext">Contract w s e a
</span><a href="#local-6989586621680831023"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (ContractInstanceState w s e a) -&gt; [Request PABReq])
-&gt; FoldM
     (Eff effs)
     (EmulatorTimeEvent EmulatorEvent')
     (Maybe (ContractInstanceState w s e a))
-&gt; EmulatorEventFoldM effs [Request PABReq]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (ContractInstanceState w s e a) -&gt; [Request PABReq]
forall w (s :: Row *) e a.
Maybe (ContractInstanceState w s e a) -&gt; [Request PABReq]
</span><a href="#local-6989586621680831022"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">(FoldM
   (Eff effs)
   (EmulatorTimeEvent EmulatorEvent')
   (Maybe (ContractInstanceState w s e a))
 -&gt; EmulatorEventFoldM effs [Request PABReq])
-&gt; (ContractInstanceTag
    -&gt; FoldM
         (Eff effs)
         (EmulatorTimeEvent EmulatorEvent')
         (Maybe (ContractInstanceState w s e a)))
-&gt; ContractInstanceTag
-&gt; EmulatorEventFoldM effs [Request PABReq]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Contract w s e a
-&gt; ContractInstanceTag
-&gt; FoldM
     (Eff effs)
     (EmulatorTimeEvent EmulatorEvent')
     (Maybe (ContractInstanceState w s e a))
forall w (s :: Row *) e a (effs :: [* -&gt; *]).
(Member (Error EmulatorFoldErr) effs, Monoid w) =&gt;
Contract w s e a
-&gt; ContractInstanceTag
-&gt; EmulatorEventFoldM effs (Maybe (ContractInstanceState w s e a))
</span><a href="Wallet.Emulator.Folds.html#instanceState"><span class="hs-identifier hs-var">instanceState</span></a></span><span> </span><span class="annot"><span class="annottext">Contract w s e a
</span><a href="#local-6989586621680831023"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-165"></span><span>    </span><span id="local-6989586621680831022"><span class="annot"><span class="annottext">g :: Maybe (ContractInstanceState w s e a) -&gt; [Request PABReq]
</span><a href="#local-6989586621680831022"><span class="hs-identifier hs-var hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Request PABReq]
-&gt; (ContractInstanceState w s e a -&gt; [Request PABReq])
-&gt; Maybe (ContractInstanceState w s e a)
-&gt; [Request PABReq]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Requests PABReq -&gt; [Request PABReq]
forall o. Requests o -&gt; [Request o]
</span><a href="Plutus.Contract.Resumable.html#unRequests"><span class="hs-identifier hs-var hs-var">State.unRequests</span></a></span><span> </span><span class="annot"><span class="annottext">(Requests PABReq -&gt; [Request PABReq])
-&gt; (ContractInstanceState w s e a -&gt; Requests PABReq)
-&gt; ContractInstanceState w s e a
-&gt; [Request PABReq]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ResumableResult w e PABResp PABReq a -&gt; Requests PABReq
forall w e i o a. ResumableResult w e i o a -&gt; Requests o
</span><a href="Plutus.Contract.Types.html#_requests"><span class="hs-identifier hs-var hs-var">_requests</span></a></span><span> </span><span class="annot"><span class="annottext">(ResumableResult w e PABResp PABReq a -&gt; Requests PABReq)
-&gt; (ContractInstanceState w s e a
    -&gt; ResumableResult w e PABResp PABReq a)
-&gt; ContractInstanceState w s e a
-&gt; Requests PABReq
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceState w s e a
-&gt; ResumableResult w e PABResp PABReq a
forall w (s :: Row *) e a.
ContractInstanceState w s e a
-&gt; ResumableResult w e PABResp PABReq a
</span><a href="Plutus.Trace.Emulator.Types.html#instContractState"><span class="hs-identifier hs-var hs-var">instContractState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span class="hs-comment">-- | The unbalanced transactions generated by the contract instance.</span><span>
</span><span id="line-168"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#instanceTransactions"><span class="hs-identifier hs-type">instanceTransactions</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680831019"><span class="annot"><a href="#local-6989586621680831019"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680831018"><span class="annot"><a href="#local-6989586621680831018"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680831017"><span class="annot"><a href="#local-6989586621680831017"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621680831016"><span class="annot"><a href="#local-6989586621680831016"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680831015"><span class="annot"><a href="#local-6989586621680831015"><span class="hs-identifier hs-type">effs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorFoldErr"><span class="hs-identifier hs-type">EmulatorFoldErr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680831015"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-171"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831019"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html#Contract"><span class="hs-identifier hs-type">Contract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831019"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831018"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831017"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831016"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceTag"><span class="hs-identifier hs-type">ContractInstanceTag</span></a></span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFoldM"><span class="hs-identifier hs-type">EmulatorEventFoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831015"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-type">UnbalancedTx</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-176"></span><span id="instanceTransactions"><span class="annot"><span class="annottext">instanceTransactions :: Contract w s e a
-&gt; ContractInstanceTag -&gt; EmulatorEventFoldM effs [UnbalancedTx]
</span><a href="Wallet.Emulator.Folds.html#instanceTransactions"><span class="hs-identifier hs-var hs-var">instanceTransactions</span></a></span></span><span> </span><span id="local-6989586621680831014"><span class="annot"><span class="annottext">Contract w s e a
</span><a href="#local-6989586621680831014"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (ContractInstanceState w s e a) -&gt; [UnbalancedTx])
-&gt; FoldM
     (Eff effs)
     (EmulatorTimeEvent EmulatorEvent')
     (Maybe (ContractInstanceState w s e a))
-&gt; EmulatorEventFoldM effs [UnbalancedTx]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (ContractInstanceState w s e a) -&gt; [UnbalancedTx]
</span><a href="#local-6989586621680831013"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">(FoldM
   (Eff effs)
   (EmulatorTimeEvent EmulatorEvent')
   (Maybe (ContractInstanceState w s e a))
 -&gt; EmulatorEventFoldM effs [UnbalancedTx])
-&gt; (ContractInstanceTag
    -&gt; FoldM
         (Eff effs)
         (EmulatorTimeEvent EmulatorEvent')
         (Maybe (ContractInstanceState w s e a)))
-&gt; ContractInstanceTag
-&gt; EmulatorEventFoldM effs [UnbalancedTx]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Contract w s e a
-&gt; ContractInstanceTag
-&gt; FoldM
     (Eff effs)
     (EmulatorTimeEvent EmulatorEvent')
     (Maybe (ContractInstanceState w s e a))
forall w (s :: Row *) e a (effs :: [* -&gt; *]).
(Member (Error EmulatorFoldErr) effs, Monoid w) =&gt;
Contract w s e a
-&gt; ContractInstanceTag
-&gt; EmulatorEventFoldM effs (Maybe (ContractInstanceState w s e a))
</span><a href="Wallet.Emulator.Folds.html#instanceState"><span class="hs-identifier hs-var">instanceState</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680831019"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680831018"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680831017"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680831016"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680831015"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><span class="annottext">Contract w s e a
</span><a href="#local-6989586621680831014"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-177"></span><span>    </span><span class="annot"><a href="#local-6989586621680831013"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceState"><span class="hs-identifier hs-type">ContractInstanceState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831019"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831018"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831017"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831016"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-type">UnbalancedTx</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-178"></span><span>    </span><span id="local-6989586621680831013"><span class="annot"><span class="annottext">g :: Maybe (ContractInstanceState w s e a) -&gt; [UnbalancedTx]
</span><a href="#local-6989586621680831013"><span class="hs-identifier hs-var hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[UnbalancedTx]
-&gt; (ContractInstanceState w s e a -&gt; [UnbalancedTx])
-&gt; Maybe (ContractInstanceState w s e a)
-&gt; [UnbalancedTx]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Request PABReq -&gt; Maybe UnbalancedTx)
-&gt; [Request PABReq] -&gt; [UnbalancedTx]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mapMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First UnbalancedTx) PABReq UnbalancedTx
-&gt; PABReq -&gt; Maybe UnbalancedTx
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First UnbalancedTx) PABReq UnbalancedTx
Prism' PABReq UnbalancedTx
</span><a href="Plutus.Contract.Effects.html#_BalanceTxReq"><span class="hs-identifier hs-var">_BalanceTxReq</span></a></span><span> </span><span class="annot"><span class="annottext">(PABReq -&gt; Maybe UnbalancedTx)
-&gt; (Request PABReq -&gt; PABReq)
-&gt; Request PABReq
-&gt; Maybe UnbalancedTx
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Request PABReq -&gt; PABReq
forall o. Request o -&gt; o
</span><a href="Plutus.Contract.Resumable.html#rqRequest"><span class="hs-identifier hs-var hs-var">State.rqRequest</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Request PABReq] -&gt; [UnbalancedTx])
-&gt; (ContractInstanceState w s e a -&gt; [Request PABReq])
-&gt; ContractInstanceState w s e a
-&gt; [UnbalancedTx]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[[Request PABReq]] -&gt; [Request PABReq]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">concat</span></a></span><span> </span><span class="annot"><span class="annottext">([[Request PABReq]] -&gt; [Request PABReq])
-&gt; (ContractInstanceState w s e a -&gt; [[Request PABReq]])
-&gt; ContractInstanceState w s e a
-&gt; [Request PABReq]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Seq [Request PABReq] -&gt; [[Request PABReq]]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">(Seq [Request PABReq] -&gt; [[Request PABReq]])
-&gt; (ContractInstanceState w s e a -&gt; Seq [Request PABReq])
-&gt; ContractInstanceState w s e a
-&gt; [[Request PABReq]]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceState w s e a -&gt; Seq [Request PABReq]
forall w (s :: Row *) e a.
ContractInstanceState w s e a -&gt; Seq [Request PABReq]
</span><a href="Plutus.Trace.Emulator.Types.html#instHandlersHistory"><span class="hs-identifier hs-var hs-var">instHandlersHistory</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="hs-comment">-- | The reponses received by the contract instance</span><span>
</span><span id="line-182"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#instanceResponses"><span class="hs-identifier hs-type">instanceResponses</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680831011"><span class="annot"><a href="#local-6989586621680831011"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680831010"><span class="annot"><a href="#local-6989586621680831010"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680831009"><span class="annot"><a href="#local-6989586621680831009"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621680831008"><span class="annot"><a href="#local-6989586621680831008"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680831007"><span class="annot"><a href="#local-6989586621680831007"><span class="hs-identifier hs-type">effs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-184"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorFoldErr"><span class="hs-identifier hs-type">EmulatorFoldErr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680831007"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831011"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html#Contract"><span class="hs-identifier hs-type">Contract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831011"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831010"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831009"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831008"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-188"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceTag"><span class="hs-identifier hs-type">ContractInstanceTag</span></a></span><span>
</span><span id="line-189"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFoldM"><span class="hs-identifier hs-type">EmulatorEventFoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831007"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutus.Contract.Resumable.html#Response"><span class="hs-identifier hs-type">Response</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Effects.html#PABResp"><span class="hs-identifier hs-type">PABResp</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-190"></span><span id="instanceResponses"><span class="annot"><span class="annottext">instanceResponses :: Contract w s e a
-&gt; ContractInstanceTag
-&gt; EmulatorEventFoldM effs [Response PABResp]
</span><a href="Wallet.Emulator.Folds.html#instanceResponses"><span class="hs-identifier hs-var hs-var">instanceResponses</span></a></span></span><span> </span><span id="local-6989586621680831006"><span class="annot"><span class="annottext">Contract w s e a
</span><a href="#local-6989586621680831006"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (ContractInstanceState w s e a) -&gt; [Response PABResp])
-&gt; FoldM
     (Eff effs)
     (EmulatorTimeEvent EmulatorEvent')
     (Maybe (ContractInstanceState w s e a))
-&gt; EmulatorEventFoldM effs [Response PABResp]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Response PABResp]
-&gt; (ContractInstanceState w s e a -&gt; [Response PABResp])
-&gt; Maybe (ContractInstanceState w s e a)
-&gt; [Response PABResp]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Seq (Response PABResp) -&gt; [Response PABResp]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">(Seq (Response PABResp) -&gt; [Response PABResp])
-&gt; (ContractInstanceState w s e a -&gt; Seq (Response PABResp))
-&gt; ContractInstanceState w s e a
-&gt; [Response PABResp]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceState w s e a -&gt; Seq (Response PABResp)
forall w (s :: Row *) e a.
ContractInstanceState w s e a -&gt; Seq (Response PABResp)
</span><a href="Plutus.Trace.Emulator.Types.html#instEvents"><span class="hs-identifier hs-var hs-var">instEvents</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FoldM
   (Eff effs)
   (EmulatorTimeEvent EmulatorEvent')
   (Maybe (ContractInstanceState w s e a))
 -&gt; EmulatorEventFoldM effs [Response PABResp])
-&gt; (ContractInstanceTag
    -&gt; FoldM
         (Eff effs)
         (EmulatorTimeEvent EmulatorEvent')
         (Maybe (ContractInstanceState w s e a)))
-&gt; ContractInstanceTag
-&gt; EmulatorEventFoldM effs [Response PABResp]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Contract w s e a
-&gt; ContractInstanceTag
-&gt; FoldM
     (Eff effs)
     (EmulatorTimeEvent EmulatorEvent')
     (Maybe (ContractInstanceState w s e a))
forall w (s :: Row *) e a (effs :: [* -&gt; *]).
(Member (Error EmulatorFoldErr) effs, Monoid w) =&gt;
Contract w s e a
-&gt; ContractInstanceTag
-&gt; EmulatorEventFoldM effs (Maybe (ContractInstanceState w s e a))
</span><a href="Wallet.Emulator.Folds.html#instanceState"><span class="hs-identifier hs-var">instanceState</span></a></span><span> </span><span class="annot"><span class="annottext">Contract w s e a
</span><a href="#local-6989586621680831006"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="hs-comment">-- | Accumulated state of the contract instance</span><span>
</span><span id="line-193"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#instanceAccumState"><span class="hs-identifier hs-type">instanceAccumState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680831005"><span class="annot"><a href="#local-6989586621680831005"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680831004"><span class="annot"><a href="#local-6989586621680831004"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680831003"><span class="annot"><a href="#local-6989586621680831003"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621680831002"><span class="annot"><a href="#local-6989586621680831002"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680831001"><span class="annot"><a href="#local-6989586621680831001"><span class="hs-identifier hs-type">effs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorFoldErr"><span class="hs-identifier hs-type">EmulatorFoldErr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680831001"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831005"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html#Contract"><span class="hs-identifier hs-type">Contract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831005"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831004"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831003"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831002"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-199"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceTag"><span class="hs-identifier hs-type">ContractInstanceTag</span></a></span><span>
</span><span id="line-200"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFoldM"><span class="hs-identifier hs-type">EmulatorEventFoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831001"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831005"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-201"></span><span id="instanceAccumState"><span class="annot"><span class="annottext">instanceAccumState :: Contract w s e a
-&gt; ContractInstanceTag -&gt; EmulatorEventFoldM effs w
</span><a href="Wallet.Emulator.Folds.html#instanceAccumState"><span class="hs-identifier hs-var hs-var">instanceAccumState</span></a></span></span><span> </span><span id="local-6989586621680831000"><span class="annot"><span class="annottext">Contract w s e a
</span><a href="#local-6989586621680831000"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (ContractInstanceState w s e a) -&gt; w)
-&gt; FoldM
     (Eff effs)
     (EmulatorTimeEvent EmulatorEvent')
     (Maybe (ContractInstanceState w s e a))
-&gt; EmulatorEventFoldM effs w
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">w
-&gt; (ContractInstanceState w s e a -&gt; w)
-&gt; Maybe (ContractInstanceState w s e a)
-&gt; w
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">w
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ResumableResult w e PABResp PABReq a -&gt; w
forall w e i o a. ResumableResult w e i o a -&gt; w
</span><a href="Plutus.Contract.Types.html#_observableState"><span class="hs-identifier hs-var hs-var">_observableState</span></a></span><span> </span><span class="annot"><span class="annottext">(ResumableResult w e PABResp PABReq a -&gt; w)
-&gt; (ContractInstanceState w s e a
    -&gt; ResumableResult w e PABResp PABReq a)
-&gt; ContractInstanceState w s e a
-&gt; w
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceState w s e a
-&gt; ResumableResult w e PABResp PABReq a
forall w (s :: Row *) e a.
ContractInstanceState w s e a
-&gt; ResumableResult w e PABResp PABReq a
</span><a href="Plutus.Trace.Emulator.Types.html#instContractState"><span class="hs-identifier hs-var hs-var">instContractState</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FoldM
   (Eff effs)
   (EmulatorTimeEvent EmulatorEvent')
   (Maybe (ContractInstanceState w s e a))
 -&gt; EmulatorEventFoldM effs w)
-&gt; (ContractInstanceTag
    -&gt; FoldM
         (Eff effs)
         (EmulatorTimeEvent EmulatorEvent')
         (Maybe (ContractInstanceState w s e a)))
-&gt; ContractInstanceTag
-&gt; EmulatorEventFoldM effs w
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Contract w s e a
-&gt; ContractInstanceTag
-&gt; FoldM
     (Eff effs)
     (EmulatorTimeEvent EmulatorEvent')
     (Maybe (ContractInstanceState w s e a))
forall w (s :: Row *) e a (effs :: [* -&gt; *]).
(Member (Error EmulatorFoldErr) effs, Monoid w) =&gt;
Contract w s e a
-&gt; ContractInstanceTag
-&gt; EmulatorEventFoldM effs (Maybe (ContractInstanceState w s e a))
</span><a href="Wallet.Emulator.Folds.html#instanceState"><span class="hs-identifier hs-var">instanceState</span></a></span><span> </span><span class="annot"><span class="annottext">Contract w s e a
</span><a href="#local-6989586621680831000"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span class="hs-comment">-- | The log messages produced by the contract instance.</span><span>
</span><span id="line-204"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#instanceLog"><span class="hs-identifier hs-type">instanceLog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceTag"><span class="hs-identifier hs-type">ContractInstanceTag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-type">EmulatorEventFold</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorTimeEvent"><span class="hs-identifier hs-type">EmulatorTimeEvent</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceLog"><span class="hs-identifier hs-type">ContractInstanceLog</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-205"></span><span id="instanceLog"><span class="annot"><span class="annottext">instanceLog :: ContractInstanceTag
-&gt; EmulatorEventFold [EmulatorTimeEvent ContractInstanceLog]
</span><a href="Wallet.Emulator.Folds.html#instanceLog"><span class="hs-identifier hs-var hs-var">instanceLog</span></a></span></span><span> </span><span id="local-6989586621680830999"><span class="annot"><span class="annottext">ContractInstanceTag
</span><a href="#local-6989586621680830999"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621680830998"><span class="hs-identifier hs-type">flt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent"><span class="hs-identifier hs-type">EmulatorEvent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorTimeEvent"><span class="hs-identifier hs-type">EmulatorTimeEvent</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceLog"><span class="hs-identifier hs-type">ContractInstanceLog</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>        </span><span id="local-6989586621680830998"><span class="annot"><span class="annottext">flt :: EmulatorTimeEvent EmulatorEvent'
-&gt; Maybe (EmulatorTimeEvent ContractInstanceLog)
</span><a href="#local-6989586621680830998"><span class="hs-identifier hs-var hs-var">flt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EmulatorEvent' -&gt; Maybe ContractInstanceLog)
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Maybe (EmulatorTimeEvent ContractInstanceLog)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting
  (First ContractInstanceLog) EmulatorEvent' ContractInstanceLog
-&gt; EmulatorEvent' -&gt; Maybe ContractInstanceLog
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting
  (First ContractInstanceLog) EmulatorEvent' ContractInstanceLog
Prism' EmulatorEvent' ContractInstanceLog
</span><a href="Wallet.Emulator.MultiAgent.html#instanceEvent"><span class="hs-identifier hs-var">instanceEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (First ContractInstanceLog) EmulatorEvent' ContractInstanceLog
-&gt; ((ContractInstanceLog
     -&gt; Const (First ContractInstanceLog) ContractInstanceLog)
    -&gt; ContractInstanceLog
    -&gt; Const (First ContractInstanceLog) ContractInstanceLog)
-&gt; Getting
     (First ContractInstanceLog) EmulatorEvent' ContractInstanceLog
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ContractInstanceLog -&gt; Bool)
-&gt; (ContractInstanceLog
    -&gt; Const (First ContractInstanceLog) ContractInstanceLog)
-&gt; ContractInstanceLog
-&gt; Const (First ContractInstanceLog) ContractInstanceLog
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) a.
(Choice p, Applicative f) =&gt;
(a -&gt; Bool) -&gt; Optic' p f a a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">filtered</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ContractInstanceTag -&gt; ContractInstanceTag -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">(==)</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceTag
</span><a href="#local-6989586621680830999"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">(ContractInstanceTag -&gt; Bool)
-&gt; (ContractInstanceLog -&gt; ContractInstanceTag)
-&gt; ContractInstanceLog
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting ContractInstanceTag ContractInstanceLog ContractInstanceTag
-&gt; ContractInstanceLog -&gt; ContractInstanceTag
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="annot"><span class="annottext">Getting ContractInstanceTag ContractInstanceLog ContractInstanceTag
Lens' ContractInstanceLog ContractInstanceTag
</span><a href="Plutus.Trace.Emulator.Types.html#cilTag"><span class="hs-identifier hs-var">cilTag</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(EmulatorTimeEvent EmulatorEvent'
 -&gt; Maybe (EmulatorTimeEvent ContractInstanceLog))
-&gt; Fold
     (EmulatorTimeEvent ContractInstanceLog)
     [EmulatorTimeEvent ContractInstanceLog]
-&gt; EmulatorEventFold [EmulatorTimeEvent ContractInstanceLog]
forall a b r. (a -&gt; Maybe b) -&gt; Fold b r -&gt; Fold a r
</span><a href="Wallet.Emulator.Folds.html#preMapMaybe"><span class="hs-identifier hs-var">preMapMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorTimeEvent EmulatorEvent'
-&gt; Maybe (EmulatorTimeEvent ContractInstanceLog)
</span><a href="#local-6989586621680830998"><span class="hs-identifier hs-var">flt</span></a></span><span> </span><span class="annot"><span class="annottext">Fold
  (EmulatorTimeEvent ContractInstanceLog)
  [EmulatorTimeEvent ContractInstanceLog]
forall a. Fold a [a]
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">L.list</span></a></span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="hs-comment">-- | Log and error messages produced by the main (user) thread in the emulator</span><span>
</span><span id="line-211"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#userLog"><span class="hs-identifier hs-type">userLog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-type">EmulatorEventFold</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorTimeEvent"><span class="hs-identifier hs-type">EmulatorTimeEvent</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#UserThreadMsg"><span class="hs-identifier hs-type">UserThreadMsg</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-212"></span><span id="userLog"><span class="annot"><span class="annottext">userLog :: EmulatorEventFold [EmulatorTimeEvent UserThreadMsg]
</span><a href="Wallet.Emulator.Folds.html#userLog"><span class="hs-identifier hs-var hs-var">userLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621680830997"><span class="hs-identifier hs-type">flt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent"><span class="hs-identifier hs-type">EmulatorEvent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorTimeEvent"><span class="hs-identifier hs-type">EmulatorTimeEvent</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#UserThreadMsg"><span class="hs-identifier hs-type">UserThreadMsg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>        </span><span id="local-6989586621680830997"><span class="annot"><span class="annottext">flt :: EmulatorTimeEvent EmulatorEvent'
-&gt; Maybe (EmulatorTimeEvent UserThreadMsg)
</span><a href="#local-6989586621680830997"><span class="hs-identifier hs-var hs-var">flt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EmulatorEvent' -&gt; Maybe UserThreadMsg)
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Maybe (EmulatorTimeEvent UserThreadMsg)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First UserThreadMsg) EmulatorEvent' UserThreadMsg
-&gt; EmulatorEvent' -&gt; Maybe UserThreadMsg
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First UserThreadMsg) EmulatorEvent' UserThreadMsg
Prism' EmulatorEvent' UserThreadMsg
</span><a href="Wallet.Emulator.MultiAgent.html#userThreadEvent"><span class="hs-identifier hs-var">userThreadEvent</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(EmulatorTimeEvent EmulatorEvent'
 -&gt; Maybe (EmulatorTimeEvent UserThreadMsg))
-&gt; Fold
     (EmulatorTimeEvent UserThreadMsg) [EmulatorTimeEvent UserThreadMsg]
-&gt; EmulatorEventFold [EmulatorTimeEvent UserThreadMsg]
forall a b r. (a -&gt; Maybe b) -&gt; Fold b r -&gt; Fold a r
</span><a href="Wallet.Emulator.Folds.html#preMapMaybe"><span class="hs-identifier hs-var">preMapMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorTimeEvent EmulatorEvent'
-&gt; Maybe (EmulatorTimeEvent UserThreadMsg)
</span><a href="#local-6989586621680830997"><span class="hs-identifier hs-var">flt</span></a></span><span> </span><span class="annot"><span class="annottext">Fold
  (EmulatorTimeEvent UserThreadMsg) [EmulatorTimeEvent UserThreadMsg]
forall a. Fold a [a]
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">L.list</span></a></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="hs-keyword">data</span><span> </span><span id="Outcome"><span class="annot"><a href="Wallet.Emulator.Folds.html#Outcome"><span class="hs-identifier hs-var">Outcome</span></a></span></span><span> </span><span id="local-6989586621680831254"><span class="annot"><a href="#local-6989586621680831254"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621680831253"><span class="annot"><a href="#local-6989586621680831253"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-218"></span><span>    </span><span id="Done"><span class="annot"><a href="Wallet.Emulator.Folds.html#Done"><span class="hs-identifier hs-var">Done</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621680831253"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-comment">-- ^ The contract finished without errors and produced a result</span><span>
</span><span id="line-220"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="NotDone"><span class="annot"><a href="Wallet.Emulator.Folds.html#NotDone"><span class="hs-identifier hs-var">NotDone</span></a></span></span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-comment">-- ^ The contract is waiting for more input.</span><span>
</span><span id="line-222"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Failed"><span class="annot"><a href="Wallet.Emulator.Folds.html#Failed"><span class="hs-identifier hs-var">Failed</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621680831254"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-223"></span><span>    </span><span class="hs-comment">-- ^ The contract failed with an error.</span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680830990"><span id="local-6989586621680830992"><span class="annot"><span class="annottext">Outcome e a -&gt; Outcome e a -&gt; Bool
(Outcome e a -&gt; Outcome e a -&gt; Bool)
-&gt; (Outcome e a -&gt; Outcome e a -&gt; Bool) -&gt; Eq (Outcome e a)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall e a. (Eq a, Eq e) =&gt; Outcome e a -&gt; Outcome e a -&gt; Bool
/= :: Outcome e a -&gt; Outcome e a -&gt; Bool
$c/= :: forall e a. (Eq a, Eq e) =&gt; Outcome e a -&gt; Outcome e a -&gt; Bool
== :: Outcome e a -&gt; Outcome e a -&gt; Bool
$c== :: forall e a. (Eq a, Eq e) =&gt; Outcome e a -&gt; Outcome e a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680830983"><span id="local-6989586621680830985"><span id="local-6989586621680830987"><span class="annot"><span class="annottext">Int -&gt; Outcome e a -&gt; ShowS
[Outcome e a] -&gt; ShowS
Outcome e a -&gt; String
(Int -&gt; Outcome e a -&gt; ShowS)
-&gt; (Outcome e a -&gt; String)
-&gt; ([Outcome e a] -&gt; ShowS)
-&gt; Show (Outcome e a)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall e a. (Show a, Show e) =&gt; Int -&gt; Outcome e a -&gt; ShowS
forall e a. (Show a, Show e) =&gt; [Outcome e a] -&gt; ShowS
forall e a. (Show a, Show e) =&gt; Outcome e a -&gt; String
showList :: [Outcome e a] -&gt; ShowS
$cshowList :: forall e a. (Show a, Show e) =&gt; [Outcome e a] -&gt; ShowS
show :: Outcome e a -&gt; String
$cshow :: forall e a. (Show a, Show e) =&gt; Outcome e a -&gt; String
showsPrec :: Int -&gt; Outcome e a -&gt; ShowS
$cshowsPrec :: forall e a. (Show a, Show e) =&gt; Int -&gt; Outcome e a -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span id="local-6989586621680831243"><span id="local-6989586621680831244"><span id="local-6989586621680831245"><span id="local-6989586621680831246"><span id="local-6989586621680831247"><span class="annot"><a href="Wallet.Emulator.Folds.html#fromResumableResult"><span class="hs-identifier hs-type">fromResumableResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html#ResumableResult"><span class="hs-identifier hs-type">ResumableResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831247"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831246"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831245"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831244"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831243"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#Outcome"><span class="hs-identifier hs-type">Outcome</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831246"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831243"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span><span>
</span><span id="line-227"></span><span id="fromResumableResult"><span class="annot"><span class="annottext">fromResumableResult :: ResumableResult w e i o a -&gt; Outcome e a
</span><a href="Wallet.Emulator.Folds.html#fromResumableResult"><span class="hs-identifier hs-var hs-var">fromResumableResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(e -&gt; Outcome e a)
-&gt; (Maybe a -&gt; Outcome e a) -&gt; Either e (Maybe a) -&gt; Outcome e a
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; Outcome e a
forall e a. e -&gt; Outcome e a
</span><a href="Wallet.Emulator.Folds.html#Failed"><span class="hs-identifier hs-var">Failed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Outcome e a -&gt; (a -&gt; Outcome e a) -&gt; Maybe a -&gt; Outcome e a
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Outcome e a
forall e a. Outcome e a
</span><a href="Wallet.Emulator.Folds.html#NotDone"><span class="hs-identifier hs-var">NotDone</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Outcome e a
forall e a. a -&gt; Outcome e a
</span><a href="Wallet.Emulator.Folds.html#Done"><span class="hs-identifier hs-var">Done</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either e (Maybe a) -&gt; Outcome e a)
-&gt; (ResumableResult w e i o a -&gt; Either e (Maybe a))
-&gt; ResumableResult w e i o a
-&gt; Outcome e a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ResumableResult w e i o a -&gt; Either e (Maybe a)
forall w e i o a. ResumableResult w e i o a -&gt; Either e (Maybe a)
</span><a href="Plutus.Contract.Types.html#_finalState"><span class="hs-identifier hs-var hs-var">_finalState</span></a></span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span class="hs-comment">-- | The final state of the instance</span><span>
</span><span id="line-230"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#instanceOutcome"><span class="hs-identifier hs-type">instanceOutcome</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-231"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680830979"><span class="annot"><a href="#local-6989586621680830979"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680830978"><span class="annot"><a href="#local-6989586621680830978"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621680830977"><span class="annot"><a href="#local-6989586621680830977"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621680830976"><span class="annot"><a href="#local-6989586621680830976"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680830975"><span class="annot"><a href="#local-6989586621680830975"><span class="hs-identifier hs-type">effs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorFoldErr"><span class="hs-identifier hs-type">EmulatorFoldErr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680830975"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-233"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830979"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-234"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contract.Types.html#Contract"><span class="hs-identifier hs-type">Contract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830979"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830978"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830977"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830976"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-236"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceTag"><span class="hs-identifier hs-type">ContractInstanceTag</span></a></span><span>
</span><span id="line-237"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFoldM"><span class="hs-identifier hs-type">EmulatorEventFoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830975"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.Folds.html#Outcome"><span class="hs-identifier hs-type">Outcome</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830977"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830976"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span id="instanceOutcome"><span class="annot"><span class="annottext">instanceOutcome :: Contract w s e a
-&gt; ContractInstanceTag -&gt; EmulatorEventFoldM effs (Outcome e a)
</span><a href="Wallet.Emulator.Folds.html#instanceOutcome"><span class="hs-identifier hs-var hs-var">instanceOutcome</span></a></span></span><span> </span><span id="local-6989586621680830974"><span class="annot"><span class="annottext">Contract w s e a
</span><a href="#local-6989586621680830974"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-239"></span><span>    </span><span class="annot"><span class="annottext">(Maybe (ContractInstanceState w s e a) -&gt; Outcome e a)
-&gt; FoldM
     (Eff effs)
     (EmulatorTimeEvent EmulatorEvent')
     (Maybe (ContractInstanceState w s e a))
-&gt; EmulatorEventFoldM effs (Outcome e a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Outcome e a
-&gt; (ContractInstanceState w s e a -&gt; Outcome e a)
-&gt; Maybe (ContractInstanceState w s e a)
-&gt; Outcome e a
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Outcome e a
forall e a. Outcome e a
</span><a href="Wallet.Emulator.Folds.html#NotDone"><span class="hs-identifier hs-var">NotDone</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ResumableResult w e PABResp PABReq a -&gt; Outcome e a
forall w e i o a. ResumableResult w e i o a -&gt; Outcome e a
</span><a href="Wallet.Emulator.Folds.html#fromResumableResult"><span class="hs-identifier hs-var">fromResumableResult</span></a></span><span> </span><span class="annot"><span class="annottext">(ResumableResult w e PABResp PABReq a -&gt; Outcome e a)
-&gt; (ContractInstanceState w s e a
    -&gt; ResumableResult w e PABResp PABReq a)
-&gt; ContractInstanceState w s e a
-&gt; Outcome e a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceState w s e a
-&gt; ResumableResult w e PABResp PABReq a
forall w (s :: Row *) e a.
ContractInstanceState w s e a
-&gt; ResumableResult w e PABResp PABReq a
</span><a href="Plutus.Trace.Emulator.Types.html#instContractState"><span class="hs-identifier hs-var hs-var">instContractState</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FoldM
   (Eff effs)
   (EmulatorTimeEvent EmulatorEvent')
   (Maybe (ContractInstanceState w s e a))
 -&gt; EmulatorEventFoldM effs (Outcome e a))
-&gt; (ContractInstanceTag
    -&gt; FoldM
         (Eff effs)
         (EmulatorTimeEvent EmulatorEvent')
         (Maybe (ContractInstanceState w s e a)))
-&gt; ContractInstanceTag
-&gt; EmulatorEventFoldM effs (Outcome e a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Contract w s e a
-&gt; ContractInstanceTag
-&gt; FoldM
     (Eff effs)
     (EmulatorTimeEvent EmulatorEvent')
     (Maybe (ContractInstanceState w s e a))
forall w (s :: Row *) e a (effs :: [* -&gt; *]).
(Member (Error EmulatorFoldErr) effs, Monoid w) =&gt;
Contract w s e a
-&gt; ContractInstanceTag
-&gt; EmulatorEventFoldM effs (Maybe (ContractInstanceState w s e a))
</span><a href="Wallet.Emulator.Folds.html#instanceState"><span class="hs-identifier hs-var">instanceState</span></a></span><span> </span><span class="annot"><span class="annottext">Contract w s e a
</span><a href="#local-6989586621680830974"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="hs-comment">-- | Unspent outputs at an address</span><span>
</span><span id="line-242"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#utxoAtAddress"><span class="hs-identifier hs-type">utxoAtAddress</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">CardanoAddress</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-type">EmulatorEventFold</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">UtxoMap</span></a></span><span>
</span><span id="line-243"></span><span id="utxoAtAddress"><span class="annot"><span class="annottext">utxoAtAddress :: CardanoAddress -&gt; EmulatorEventFold UtxoMap
</span><a href="Wallet.Emulator.Folds.html#utxoAtAddress"><span class="hs-identifier hs-var hs-var">utxoAtAddress</span></a></span></span><span> </span><span id="local-6989586621680830973"><span class="annot"><span class="annottext">CardanoAddress
</span><a href="#local-6989586621680830973"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-244"></span><span>    </span><span class="annot"><span class="annottext">(EmulatorTimeEvent EmulatorEvent' -&gt; Maybe ChainEvent)
-&gt; Fold ChainEvent UtxoMap -&gt; EmulatorEventFold UtxoMap
forall a b r. (a -&gt; Maybe b) -&gt; Fold b r -&gt; Fold a r
</span><a href="Wallet.Emulator.Folds.html#preMapMaybe"><span class="hs-identifier hs-var">preMapMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting
  (First ChainEvent) (EmulatorTimeEvent EmulatorEvent') ChainEvent
-&gt; EmulatorTimeEvent EmulatorEvent' -&gt; Maybe ChainEvent
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent')
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Const (First ChainEvent) (EmulatorTimeEvent EmulatorEvent')
forall e1 e2.
Lens (EmulatorTimeEvent e1) (EmulatorTimeEvent e2) e1 e2
</span><a href="Wallet.Emulator.MultiAgent.html#eteEvent"><span class="hs-identifier hs-var">eteEvent</span></a></span><span> </span><span class="annot"><span class="annottext">((EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent')
 -&gt; EmulatorTimeEvent EmulatorEvent'
 -&gt; Const (First ChainEvent) (EmulatorTimeEvent EmulatorEvent'))
-&gt; ((ChainEvent -&gt; Const (First ChainEvent) ChainEvent)
    -&gt; EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent')
-&gt; Getting
     (First ChainEvent) (EmulatorTimeEvent EmulatorEvent') ChainEvent
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainEvent -&gt; Const (First ChainEvent) ChainEvent)
-&gt; EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent'
Prism' EmulatorEvent' ChainEvent
</span><a href="Wallet.Emulator.MultiAgent.html#chainEvent"><span class="hs-identifier hs-var">chainEvent</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>    </span><span class="annot"><span class="annottext">(Fold ChainEvent UtxoMap -&gt; EmulatorEventFold UtxoMap)
-&gt; Fold ChainEvent UtxoMap -&gt; EmulatorEventFold UtxoMap
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(AddressMap -&gt; ChainEvent -&gt; AddressMap)
-&gt; AddressMap -&gt; (AddressMap -&gt; UtxoMap) -&gt; Fold ChainEvent UtxoMap
forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ChainEvent -&gt; AddressMap -&gt; AddressMap)
-&gt; AddressMap -&gt; ChainEvent -&gt; AddressMap
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">ChainEvent -&gt; AddressMap -&gt; AddressMap
</span><a href="#local-6989586621680830971"><span class="hs-identifier hs-var">step</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoAddress -&gt; AddressMap -&gt; AddressMap
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">AM.addAddress</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoAddress
</span><a href="#local-6989586621680830973"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">AddressMap
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting UtxoMap AddressMap UtxoMap -&gt; AddressMap -&gt; UtxoMap
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoAddress -&gt; Lens' AddressMap UtxoMap
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">AM.fundsAt</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoAddress
</span><a href="#local-6989586621680830973"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-247"></span><span>        </span><span id="local-6989586621680830971"><span class="annot"><span class="annottext">step :: ChainEvent -&gt; AddressMap -&gt; AddressMap
</span><a href="#local-6989586621680830971"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-248"></span><span>            </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">TxnValidate</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680830968"><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680830968"><span class="hs-identifier hs-var">txn</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OnChainTx -&gt; AddressMap -&gt; AddressMap
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">AM.updateAddresses</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoTx -&gt; OnChainTx
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Valid</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680830968"><span class="hs-identifier hs-var">txn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>            </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">TxnValidationFail</span></a></span><span> </span><span class="annot"><span class="annottext">ValidationPhase
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Phase2</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680830966"><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680830966"><span class="hs-identifier hs-var">txn</span></a></span></span><span> </span><span class="annot"><span class="annottext">ValidationError
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OnChainTx -&gt; AddressMap -&gt; AddressMap
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">AM.updateAddresses</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoTx -&gt; OnChainTx
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Invalid</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680830966"><span class="hs-identifier hs-var">txn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>            </span><span class="annot"><span class="annottext">ChainEvent
</span><span class="hs-identifier">_</span></span><span>                                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AddressMap -&gt; AddressMap
forall a. a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="hs-comment">-- | The total value of unspent outputs at an address</span><span>
</span><span id="line-253"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#valueAtAddress"><span class="hs-identifier hs-type">valueAtAddress</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">CardanoAddress</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-type">EmulatorEventFold</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span>
</span><span id="line-254"></span><span id="valueAtAddress"><span class="annot"><span class="annottext">valueAtAddress :: CardanoAddress -&gt; EmulatorEventFold Value
</span><a href="Wallet.Emulator.Folds.html#valueAtAddress"><span class="hs-identifier hs-var hs-var">valueAtAddress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UtxoMap -&gt; Value)
-&gt; EmulatorEventFold UtxoMap -&gt; EmulatorEventFold Value
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((CardanoTx, TxOut) -&gt; Value) -&gt; UtxoMap -&gt; Value
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">foldMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOut -&gt; Value
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">txOutValue</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOut -&gt; Value)
-&gt; ((CardanoTx, TxOut) -&gt; TxOut) -&gt; (CardanoTx, TxOut) -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(CardanoTx, TxOut) -&gt; TxOut
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(EmulatorEventFold UtxoMap -&gt; EmulatorEventFold Value)
-&gt; (CardanoAddress -&gt; EmulatorEventFold UtxoMap)
-&gt; CardanoAddress
-&gt; EmulatorEventFold Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoAddress -&gt; EmulatorEventFold UtxoMap
</span><a href="Wallet.Emulator.Folds.html#utxoAtAddress"><span class="hs-identifier hs-var">utxoAtAddress</span></a></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span class="hs-comment">-- | The funds belonging to a wallet</span><span>
</span><span id="line-257"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#walletFunds"><span class="hs-identifier hs-type">walletFunds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-type">EmulatorEventFold</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span>
</span><span id="line-258"></span><span id="walletFunds"><span class="annot"><span class="annottext">walletFunds :: Wallet -&gt; EmulatorEventFold Value
</span><a href="Wallet.Emulator.Folds.html#walletFunds"><span class="hs-identifier hs-var hs-var">walletFunds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CardanoAddress -&gt; EmulatorEventFold Value
</span><a href="Wallet.Emulator.Folds.html#valueAtAddress"><span class="hs-identifier hs-var">valueAtAddress</span></a></span><span> </span><span class="annot"><span class="annottext">(CardanoAddress -&gt; EmulatorEventFold Value)
-&gt; (Wallet -&gt; CardanoAddress) -&gt; Wallet -&gt; EmulatorEventFold Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; CardanoAddress
</span><a href="Wallet.Emulator.Wallet.html#mockWalletAddress"><span class="hs-identifier hs-var">mockWalletAddress</span></a></span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span class="hs-comment">-- | The fees paid by a wallet</span><span>
</span><span id="line-261"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#walletFees"><span class="hs-identifier hs-type">walletFees</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-type">EmulatorEventFold</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span>
</span><span id="line-262"></span><span id="walletFees"><span class="annot"><span class="annottext">walletFees :: Wallet -&gt; EmulatorEventFold Value
</span><a href="Wallet.Emulator.Folds.html#walletFees"><span class="hs-identifier hs-var hs-var">walletFees</span></a></span></span><span> </span><span id="local-6989586621680830963"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680830963"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map TxId Value
-&gt; [(TxId, CardanoTx, [Text])]
-&gt; [(TxId, CardanoTx, ValidationError, Value, [Text])]
-&gt; Value
forall k (t :: * -&gt; *) (t :: * -&gt; *) a c b c e.
(Ord k, Foldable t, Foldable t) =&gt;
Map k a -&gt; t (k, CardanoTx, c) -&gt; t (k, b, c, Value, e) -&gt; Value
</span><a href="#local-6989586621680830962"><span class="hs-identifier hs-var">fees</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxId Value
 -&gt; [(TxId, CardanoTx, [Text])]
 -&gt; [(TxId, CardanoTx, ValidationError, Value, [Text])]
 -&gt; Value)
-&gt; Fold (EmulatorTimeEvent EmulatorEvent') (Map TxId Value)
-&gt; Fold
     (EmulatorTimeEvent EmulatorEvent')
     ([(TxId, CardanoTx, [Text])]
      -&gt; [(TxId, CardanoTx, ValidationError, Value, [Text])] -&gt; Value)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Fold (EmulatorTimeEvent EmulatorEvent') (Map TxId Value)
</span><a href="#local-6989586621680830961"><span class="hs-identifier hs-var">walletSubmittedFees</span></a></span><span> </span><span class="annot"><span class="annottext">Fold
  (EmulatorTimeEvent EmulatorEvent')
  ([(TxId, CardanoTx, [Text])]
   -&gt; [(TxId, CardanoTx, ValidationError, Value, [Text])] -&gt; Value)
-&gt; EmulatorEventFold [(TxId, CardanoTx, [Text])]
-&gt; Fold
     (EmulatorTimeEvent EmulatorEvent')
     ([(TxId, CardanoTx, ValidationError, Value, [Text])] -&gt; Value)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorEventFold [(TxId, CardanoTx, [Text])]
</span><a href="Wallet.Emulator.Folds.html#validatedTransactions"><span class="hs-identifier hs-var">validatedTransactions</span></a></span><span> </span><span class="annot"><span class="annottext">Fold
  (EmulatorTimeEvent EmulatorEvent')
  ([(TxId, CardanoTx, ValidationError, Value, [Text])] -&gt; Value)
-&gt; EmulatorEventFold
     [(TxId, CardanoTx, ValidationError, Value, [Text])]
-&gt; EmulatorEventFold Value
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ValidationPhase
-&gt; EmulatorEventFold
     [(TxId, CardanoTx, ValidationError, Value, [Text])]
</span><a href="Wallet.Emulator.Folds.html#failedTransactions"><span class="hs-identifier hs-var">failedTransactions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ValidationPhase -&gt; Maybe ValidationPhase
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ValidationPhase
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Phase2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-264"></span><span>        </span><span id="local-6989586621680830962"><span class="annot"><span class="annottext">fees :: Map k a -&gt; t (k, CardanoTx, c) -&gt; t (k, b, c, Value, e) -&gt; Value
</span><a href="#local-6989586621680830962"><span class="hs-identifier hs-var hs-var">fees</span></a></span></span><span> </span><span id="local-6989586621680830960"><span class="annot"><span class="annottext">Map k a
</span><a href="#local-6989586621680830960"><span class="hs-identifier hs-var">submitted</span></a></span></span><span> </span><span id="local-6989586621680830959"><span class="annot"><span class="annottext">t (k, CardanoTx, c)
</span><a href="#local-6989586621680830959"><span class="hs-identifier hs-var">txsV</span></a></span></span><span> </span><span id="local-6989586621680830958"><span class="annot"><span class="annottext">t (k, b, c, Value, e)
</span><a href="#local-6989586621680830958"><span class="hs-identifier hs-var">txsF</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-265"></span><span>            </span><span class="annot"><span class="annottext">((k, CardanoTx, c) -&gt; k)
-&gt; ((k, CardanoTx, c) -&gt; Value)
-&gt; Map k a
-&gt; t (k, CardanoTx, c)
-&gt; Value
forall (t :: * -&gt; *) m k t a.
(Foldable t, Monoid m, Ord k) =&gt;
(t -&gt; k) -&gt; (t -&gt; m) -&gt; Map k a -&gt; t t -&gt; m
</span><a href="#local-6989586621680830957"><span class="hs-identifier hs-var">findFees</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680830956"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621680830956"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621680830956"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">k
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680830955"><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680830955"><span class="hs-identifier hs-var">tx</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CardanoTx -&gt; Value
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">getCardanoTxFee</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680830955"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map k a
</span><a href="#local-6989586621680830960"><span class="hs-identifier hs-var">submitted</span></a></span><span> </span><span class="annot"><span class="annottext">t (k, CardanoTx, c)
</span><a href="#local-6989586621680830959"><span class="hs-identifier hs-var">txsV</span></a></span><span>
</span><span id="line-266"></span><span>            </span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Value
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-267"></span><span>            </span><span class="annot"><span class="annottext">((k, b, c, Value, e) -&gt; k)
-&gt; ((k, b, c, Value, e) -&gt; Value)
-&gt; Map k a
-&gt; t (k, b, c, Value, e)
-&gt; Value
forall (t :: * -&gt; *) m k t a.
(Foldable t, Monoid m, Ord k) =&gt;
(t -&gt; k) -&gt; (t -&gt; m) -&gt; Map k a -&gt; t t -&gt; m
</span><a href="#local-6989586621680830957"><span class="hs-identifier hs-var">findFees</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680830954"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621680830954"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">e
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621680830954"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">k
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680830953"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680830953"><span class="hs-identifier hs-var">collateral</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">e
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680830953"><span class="hs-identifier hs-var">collateral</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map k a
</span><a href="#local-6989586621680830960"><span class="hs-identifier hs-var">submitted</span></a></span><span> </span><span class="annot"><span class="annottext">t (k, b, c, Value, e)
</span><a href="#local-6989586621680830958"><span class="hs-identifier hs-var">txsF</span></a></span><span>
</span><span id="line-268"></span><span>        </span><span id="local-6989586621680830957"><span class="annot"><span class="annottext">findFees :: (t -&gt; k) -&gt; (t -&gt; m) -&gt; Map k a -&gt; t t -&gt; m
</span><a href="#local-6989586621680830957"><span class="hs-identifier hs-var hs-var">findFees</span></a></span></span><span> </span><span id="local-6989586621680830952"><span class="annot"><span class="annottext">t -&gt; k
</span><a href="#local-6989586621680830952"><span class="hs-identifier hs-var">getId</span></a></span></span><span> </span><span id="local-6989586621680830951"><span class="annot"><span class="annottext">t -&gt; m
</span><a href="#local-6989586621680830951"><span class="hs-identifier hs-var">getFees</span></a></span></span><span> </span><span id="local-6989586621680830950"><span class="annot"><span class="annottext">Map k a
</span><a href="#local-6989586621680830950"><span class="hs-identifier hs-var">submitted</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(t -&gt; m) -&gt; t t -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">foldMap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680830949"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680830949"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">k -&gt; Map k a -&gt; Bool
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-var">Map.member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; k
</span><a href="#local-6989586621680830952"><span class="hs-identifier hs-var">getId</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680830949"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map k a
</span><a href="#local-6989586621680830950"><span class="hs-identifier hs-var">submitted</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">t -&gt; m
</span><a href="#local-6989586621680830951"><span class="hs-identifier hs-var">getFees</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680830949"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">m
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span>        </span><span id="local-6989586621680830961"><span class="annot"><span class="annottext">walletSubmittedFees :: Fold (EmulatorTimeEvent EmulatorEvent') (Map TxId Value)
</span><a href="#local-6989586621680830961"><span class="hs-identifier hs-var hs-var">walletSubmittedFees</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Handler (EmulatorTimeEvent EmulatorEvent') (TxId, Value)
-&gt; Fold (TxId, Value) (Map TxId Value)
-&gt; Fold (EmulatorTimeEvent EmulatorEvent') (Map TxId Value)
forall a b r. Handler a b -&gt; Fold b r -&gt; Fold a r
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">L.handles</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EmulatorEvent' -&gt; Const (Dual (Endo x)) EmulatorEvent')
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Const (Dual (Endo x)) (EmulatorTimeEvent EmulatorEvent')
forall e1 e2.
Lens (EmulatorTimeEvent e1) (EmulatorTimeEvent e2) e1 e2
</span><a href="Wallet.Emulator.MultiAgent.html#eteEvent"><span class="hs-identifier hs-var">eteEvent</span></a></span><span> </span><span class="annot"><span class="annottext">((EmulatorEvent' -&gt; Const (Dual (Endo x)) EmulatorEvent')
 -&gt; EmulatorTimeEvent EmulatorEvent'
 -&gt; Const (Dual (Endo x)) (EmulatorTimeEvent EmulatorEvent'))
-&gt; (((TxId, Value) -&gt; Const (Dual (Endo x)) (TxId, Value))
    -&gt; EmulatorEvent' -&gt; Const (Dual (Endo x)) EmulatorEvent')
-&gt; ((TxId, Value) -&gt; Const (Dual (Endo x)) (TxId, Value))
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Const (Dual (Endo x)) (EmulatorTimeEvent EmulatorEvent')
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Prism' EmulatorEvent' NodeClientEvent
</span><a href="Wallet.Emulator.MultiAgent.html#walletClientEvent"><span class="hs-identifier hs-var">walletClientEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680830963"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">((NodeClientEvent -&gt; Const (Dual (Endo x)) NodeClientEvent)
 -&gt; EmulatorEvent' -&gt; Const (Dual (Endo x)) EmulatorEvent')
-&gt; (((TxId, Value) -&gt; Const (Dual (Endo x)) (TxId, Value))
    -&gt; NodeClientEvent -&gt; Const (Dual (Endo x)) NodeClientEvent)
-&gt; ((TxId, Value) -&gt; Const (Dual (Endo x)) (TxId, Value))
-&gt; EmulatorEvent'
-&gt; Const (Dual (Endo x)) EmulatorEvent'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((TxId, Value) -&gt; Const (Dual (Endo x)) (TxId, Value))
-&gt; NodeClientEvent -&gt; Const (Dual (Endo x)) NodeClientEvent
Iso' NodeClientEvent (TxId, Value)
</span><a href="Wallet.Emulator.NodeClient.html#_TxSubmit"><span class="hs-identifier hs-var">_TxSubmit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Fold (TxId, Value) (Map TxId Value)
forall a b. Ord a =&gt; Fold (a, b) (Map a b)
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">L.map</span></a></span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span class="hs-comment">-- | Annotate the transactions that were validated by the node</span><span>
</span><span id="line-272"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#annotatedBlockchain"><span class="hs-identifier hs-type">annotatedBlockchain</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-type">EmulatorEventFold</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Wallet.Rollup.Types.html#AnnotatedTx"><span class="hs-identifier hs-type">AnnotatedTx</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-273"></span><span id="annotatedBlockchain"><span class="annot"><span class="annottext">annotatedBlockchain :: EmulatorEventFold [[AnnotatedTx]]
</span><a href="Wallet.Emulator.Folds.html#annotatedBlockchain"><span class="hs-identifier hs-var hs-var">annotatedBlockchain</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-274"></span><span>    </span><span class="annot"><span class="annottext">(EmulatorTimeEvent EmulatorEvent' -&gt; Maybe ChainEvent)
-&gt; Fold ChainEvent [[AnnotatedTx]]
-&gt; EmulatorEventFold [[AnnotatedTx]]
forall a b r. (a -&gt; Maybe b) -&gt; Fold b r -&gt; Fold a r
</span><a href="Wallet.Emulator.Folds.html#preMapMaybe"><span class="hs-identifier hs-var">preMapMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting
  (First ChainEvent) (EmulatorTimeEvent EmulatorEvent') ChainEvent
-&gt; EmulatorTimeEvent EmulatorEvent' -&gt; Maybe ChainEvent
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent')
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Const (First ChainEvent) (EmulatorTimeEvent EmulatorEvent')
forall e1 e2.
Lens (EmulatorTimeEvent e1) (EmulatorTimeEvent e2) e1 e2
</span><a href="Wallet.Emulator.MultiAgent.html#eteEvent"><span class="hs-identifier hs-var">eteEvent</span></a></span><span> </span><span class="annot"><span class="annottext">((EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent')
 -&gt; EmulatorTimeEvent EmulatorEvent'
 -&gt; Const (First ChainEvent) (EmulatorTimeEvent EmulatorEvent'))
-&gt; ((ChainEvent -&gt; Const (First ChainEvent) ChainEvent)
    -&gt; EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent')
-&gt; Getting
     (First ChainEvent) (EmulatorTimeEvent EmulatorEvent') ChainEvent
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainEvent -&gt; Const (First ChainEvent) ChainEvent)
-&gt; EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent'
Prism' EmulatorEvent' ChainEvent
</span><a href="Wallet.Emulator.MultiAgent.html#chainEvent"><span class="hs-identifier hs-var">chainEvent</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>    </span><span class="annot"><span class="annottext">(Fold ChainEvent [[AnnotatedTx]]
 -&gt; EmulatorEventFold [[AnnotatedTx]])
-&gt; Fold ChainEvent [[AnnotatedTx]]
-&gt; EmulatorEventFold [[AnnotatedTx]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(RollupState -&gt; ChainEvent -&gt; RollupState)
-&gt; RollupState
-&gt; (RollupState -&gt; [[AnnotatedTx]])
-&gt; Fold ChainEvent [[AnnotatedTx]]
forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">RollupState -&gt; ChainEvent -&gt; RollupState
</span><a href="Wallet.Rollup.html#handleChainEvent"><span class="hs-identifier hs-var">Rollup.handleChainEvent</span></a></span><span> </span><span class="annot"><span class="annottext">RollupState
</span><a href="Wallet.Rollup.html#initialState"><span class="hs-identifier hs-var">Rollup.initialState</span></a></span><span> </span><span class="annot"><span class="annottext">RollupState -&gt; [[AnnotatedTx]]
</span><a href="Wallet.Rollup.html#getAnnotatedTransactions"><span class="hs-identifier hs-var">Rollup.getAnnotatedTransactions</span></a></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="hs-comment">-- | All chain events emitted by the node</span><span>
</span><span id="line-278"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#chainEvents"><span class="hs-identifier hs-type">chainEvents</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-type">EmulatorEventFold</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">ChainEvent</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-279"></span><span id="chainEvents"><span class="annot"><span class="annottext">chainEvents :: EmulatorEventFold [ChainEvent]
</span><a href="Wallet.Emulator.Folds.html#chainEvents"><span class="hs-identifier hs-var hs-var">chainEvents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EmulatorTimeEvent EmulatorEvent' -&gt; Maybe ChainEvent)
-&gt; Fold ChainEvent [ChainEvent] -&gt; EmulatorEventFold [ChainEvent]
forall a b r. (a -&gt; Maybe b) -&gt; Fold b r -&gt; Fold a r
</span><a href="Wallet.Emulator.Folds.html#preMapMaybe"><span class="hs-identifier hs-var">preMapMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting
  (First ChainEvent) (EmulatorTimeEvent EmulatorEvent') ChainEvent
-&gt; EmulatorTimeEvent EmulatorEvent' -&gt; Maybe ChainEvent
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent')
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Const (First ChainEvent) (EmulatorTimeEvent EmulatorEvent')
forall e1 e2.
Lens (EmulatorTimeEvent e1) (EmulatorTimeEvent e2) e1 e2
</span><a href="Wallet.Emulator.MultiAgent.html#eteEvent"><span class="hs-identifier hs-var">eteEvent</span></a></span><span> </span><span class="annot"><span class="annottext">((EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent')
 -&gt; EmulatorTimeEvent EmulatorEvent'
 -&gt; Const (First ChainEvent) (EmulatorTimeEvent EmulatorEvent'))
-&gt; ((ChainEvent -&gt; Const (First ChainEvent) ChainEvent)
    -&gt; EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent')
-&gt; Getting
     (First ChainEvent) (EmulatorTimeEvent EmulatorEvent') ChainEvent
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainEvent -&gt; Const (First ChainEvent) ChainEvent)
-&gt; EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent'
Prism' EmulatorEvent' ChainEvent
</span><a href="Wallet.Emulator.MultiAgent.html#chainEvent"><span class="hs-identifier hs-var">chainEvent</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Fold ChainEvent [ChainEvent]
forall a. Fold a [a]
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">L.list</span></a></span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span class="hs-comment">-- | All transactions that happened during the simulation</span><span>
</span><span id="line-282"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#blockchain"><span class="hs-identifier hs-type">blockchain</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-type">EmulatorEventFold</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">Block</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-283"></span><span id="blockchain"><span class="annot"><span class="annottext">blockchain :: EmulatorEventFold [Block]
</span><a href="Wallet.Emulator.Folds.html#blockchain"><span class="hs-identifier hs-var hs-var">blockchain</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-284"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680830942"><span class="annot"><span class="annottext">step :: (Block, [Block]) -&gt; ChainEvent -&gt; (Block, [Block])
</span><a href="#local-6989586621680830942"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680830941"><span class="annot"><span class="annottext">Block
</span><a href="#local-6989586621680830941"><span class="hs-identifier hs-var">currentBlock</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680830940"><span class="annot"><span class="annottext">[Block]
</span><a href="#local-6989586621680830940"><span class="hs-identifier hs-var">otherBlocks</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-285"></span><span>            </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">SlotAdd</span></a></span><span> </span><span class="annot"><span class="annottext">Slot
</span><span class="hs-identifier">_</span></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Block
</span><a href="#local-6989586621680830941"><span class="hs-identifier hs-var">currentBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Block -&gt; [Block] -&gt; [Block]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[Block]
</span><a href="#local-6989586621680830940"><span class="hs-identifier hs-var">otherBlocks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>            </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">TxnValidate</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680830939"><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680830939"><span class="hs-identifier hs-var">txn</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoTx -&gt; OnChainTx
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Valid</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680830939"><span class="hs-identifier hs-var">txn</span></a></span><span> </span><span class="annot"><span class="annottext">OnChainTx -&gt; Block -&gt; Block
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">Block
</span><a href="#local-6989586621680830941"><span class="hs-identifier hs-var">currentBlock</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Block]
</span><a href="#local-6989586621680830940"><span class="hs-identifier hs-var">otherBlocks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>            </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">TxnValidationFail</span></a></span><span> </span><span class="annot"><span class="annottext">ValidationPhase
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Phase1</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><span class="hs-identifier">_</span></span><span>   </span><span class="annot"><span class="annottext">ValidationError
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Block
</span><a href="#local-6989586621680830941"><span class="hs-identifier hs-var">currentBlock</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Block]
</span><a href="#local-6989586621680830940"><span class="hs-identifier hs-var">otherBlocks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>            </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">TxnValidationFail</span></a></span><span> </span><span class="annot"><span class="annottext">ValidationPhase
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Phase2</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680830938"><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680830938"><span class="hs-identifier hs-var">txn</span></a></span></span><span> </span><span class="annot"><span class="annottext">ValidationError
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoTx -&gt; OnChainTx
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Invalid</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680830938"><span class="hs-identifier hs-var">txn</span></a></span><span> </span><span class="annot"><span class="annottext">OnChainTx -&gt; Block -&gt; Block
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">Block
</span><a href="#local-6989586621680830941"><span class="hs-identifier hs-var">currentBlock</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Block]
</span><a href="#local-6989586621680830940"><span class="hs-identifier hs-var">otherBlocks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span>        </span><span id="local-6989586621680830937"><span class="annot"><span class="annottext">initial :: ([a], [a])
</span><a href="#local-6989586621680830937"><span class="hs-identifier hs-var hs-var">initial</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-290"></span><span>        </span><span id="local-6989586621680830936"><span class="annot"><span class="annottext">extract :: (a, [a]) -&gt; [a]
</span><a href="#local-6989586621680830936"><span class="hs-identifier hs-var hs-var">extract</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680830935"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680830935"><span class="hs-identifier hs-var">currentBlock</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680830934"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680830934"><span class="hs-identifier hs-var">otherBlocks</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-291"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680830935"><span class="hs-identifier hs-var">currentBlock</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; [a] -&gt; [a]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680830934"><span class="hs-identifier hs-var">otherBlocks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(EmulatorTimeEvent EmulatorEvent' -&gt; Maybe ChainEvent)
-&gt; Fold ChainEvent [Block] -&gt; EmulatorEventFold [Block]
forall a b r. (a -&gt; Maybe b) -&gt; Fold b r -&gt; Fold a r
</span><a href="Wallet.Emulator.Folds.html#preMapMaybe"><span class="hs-identifier hs-var">preMapMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting
  (First ChainEvent) (EmulatorTimeEvent EmulatorEvent') ChainEvent
-&gt; EmulatorTimeEvent EmulatorEvent' -&gt; Maybe ChainEvent
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent')
-&gt; EmulatorTimeEvent EmulatorEvent'
-&gt; Const (First ChainEvent) (EmulatorTimeEvent EmulatorEvent')
forall e1 e2.
Lens (EmulatorTimeEvent e1) (EmulatorTimeEvent e2) e1 e2
</span><a href="Wallet.Emulator.MultiAgent.html#eteEvent"><span class="hs-identifier hs-var">eteEvent</span></a></span><span> </span><span class="annot"><span class="annottext">((EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent')
 -&gt; EmulatorTimeEvent EmulatorEvent'
 -&gt; Const (First ChainEvent) (EmulatorTimeEvent EmulatorEvent'))
-&gt; ((ChainEvent -&gt; Const (First ChainEvent) ChainEvent)
    -&gt; EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent')
-&gt; Getting
     (First ChainEvent) (EmulatorTimeEvent EmulatorEvent') ChainEvent
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainEvent -&gt; Const (First ChainEvent) ChainEvent)
-&gt; EmulatorEvent' -&gt; Const (First ChainEvent) EmulatorEvent'
Prism' EmulatorEvent' ChainEvent
</span><a href="Wallet.Emulator.MultiAgent.html#chainEvent"><span class="hs-identifier hs-var">chainEvent</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-293"></span><span>        </span><span class="annot"><span class="annottext">(Fold ChainEvent [Block] -&gt; EmulatorEventFold [Block])
-&gt; Fold ChainEvent [Block] -&gt; EmulatorEventFold [Block]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">((Block, [Block]) -&gt; ChainEvent -&gt; (Block, [Block]))
-&gt; (Block, [Block])
-&gt; ((Block, [Block]) -&gt; [Block])
-&gt; Fold ChainEvent [Block]
forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">(Block, [Block]) -&gt; ChainEvent -&gt; (Block, [Block])
</span><a href="#local-6989586621680830942"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">(Block, [Block])
forall a a. ([a], [a])
</span><a href="#local-6989586621680830937"><span class="hs-identifier hs-var">initial</span></a></span><span> </span><span class="annot"><span class="annottext">(Block, [Block]) -&gt; [Block]
forall a. (a, [a]) -&gt; [a]
</span><a href="#local-6989586621680830936"><span class="hs-identifier hs-var">extract</span></a></span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span class="hs-comment">-- | The list of all emulator events</span><span>
</span><span id="line-296"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#emulatorLog"><span class="hs-identifier hs-type">emulatorLog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorEventFold"><span class="hs-identifier hs-type">EmulatorEventFold</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent"><span class="hs-identifier hs-type">EmulatorEvent</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-297"></span><span id="emulatorLog"><span class="annot"><span class="annottext">emulatorLog :: EmulatorEventFold [EmulatorTimeEvent EmulatorEvent']
</span><a href="Wallet.Emulator.Folds.html#emulatorLog"><span class="hs-identifier hs-var hs-var">emulatorLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EmulatorEventFold [EmulatorTimeEvent EmulatorEvent']
forall a. Fold a [a]
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">L.list</span></a></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="hs-comment">-- | Pretty-print each element into a new line.</span><span>
</span><span id="line-300"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#renderLines"><span class="hs-identifier hs-type">renderLines</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680830933"><span class="annot"><a href="#local-6989586621680830933"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830933"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830933"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-301"></span><span id="renderLines"><span class="annot"><span class="annottext">renderLines :: Fold a Text
</span><a href="Wallet.Emulator.Folds.html#renderLines"><span class="hs-identifier hs-var hs-var">renderLines</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-302"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680830932"><span class="annot"><span class="annottext">rnd :: Doc ann -&gt; Text
</span><a href="#local-6989586621680830932"><span class="hs-identifier hs-var hs-var">rnd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleDocStream ann -&gt; Text
forall ann. SimpleDocStream ann -&gt; Text
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">renderStrict</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleDocStream ann -&gt; Text)
-&gt; (Doc ann -&gt; SimpleDocStream ann) -&gt; Doc ann -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutOptions -&gt; Doc ann -&gt; SimpleDocStream ann
forall ann. LayoutOptions -&gt; Doc ann -&gt; SimpleDocStream ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">layoutPretty</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutOptions
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">defaultLayoutOptions</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-303"></span><span>    </span><span class="annot"><span class="annottext">(a -&gt; Doc Any)
-&gt; ([Doc Any] -&gt; Text) -&gt; Fold (Doc Any) [Doc Any] -&gt; Fold a Text
forall (p :: * -&gt; * -&gt; *) a b c d.
Profunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p b c -&gt; p a d
</span><a href="../file:///nix/store/wjz55miww0csfph9nxy2109hrj7ylva5-profunctors-lib-profunctors-5.6-haddock-doc/share/doc/profunctors/html/src"><span class="hs-identifier hs-var">dimap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Doc Any
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc Any -&gt; Text
forall ann. Doc ann -&gt; Text
</span><a href="#local-6989586621680830932"><span class="hs-identifier hs-var">rnd</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc Any -&gt; Text) -&gt; ([Doc Any] -&gt; Doc Any) -&gt; [Doc Any] -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Doc Any] -&gt; Doc Any
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">vsep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Fold (Doc Any) [Doc Any]
forall a. Fold a [a]
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">L.list</span></a></span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="hs-comment">-- | An effectful 'Data.Maybe.mapMaybe' for 'FoldM'.</span><span>
</span><span id="line-306"></span><span id="local-6989586621680831347"><span id="local-6989586621680831348"><span id="local-6989586621680831349"><span id="local-6989586621680831350"><span class="annot"><a href="Wallet.Emulator.Folds.html#preMapMaybeM"><span class="hs-identifier hs-type">preMapMaybeM</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-307"></span><span>    </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831350"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-308"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680831349"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680831350"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831348"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831350"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831348"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831347"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-310"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831350"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831349"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831347"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span><span>
</span><span id="line-311"></span><span id="preMapMaybeM"><span class="annot"><span class="annottext">preMapMaybeM :: (a -&gt; m (Maybe b)) -&gt; FoldM m b r -&gt; FoldM m a r
</span><a href="Wallet.Emulator.Folds.html#preMapMaybeM"><span class="hs-identifier hs-var hs-var">preMapMaybeM</span></a></span></span><span> </span><span id="local-6989586621680830929"><span class="annot"><span class="annottext">a -&gt; m (Maybe b)
</span><a href="#local-6989586621680830929"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621680830928"><span class="annot"><span class="annottext">x -&gt; b -&gt; m x
</span><a href="#local-6989586621680830928"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621680830927"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621680830927"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621680830926"><span class="annot"><span class="annottext">x -&gt; m r
</span><a href="#local-6989586621680830926"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m r) -&gt; FoldM m a r
forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621680830925"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621680830927"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; m r
</span><a href="#local-6989586621680830926"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-312"></span><span>    </span><span id="local-6989586621680830925"><span class="annot"><span class="annottext">step' :: x -&gt; a -&gt; m x
</span><a href="#local-6989586621680830925"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span id="local-6989586621680830924"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680830924"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680830923"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680830923"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-313"></span><span>        </span><span id="local-6989586621680830922"><span class="annot"><span class="annottext">Maybe b
</span><a href="#local-6989586621680830922"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">a -&gt; m (Maybe b)
</span><a href="#local-6989586621680830929"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680830923"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-314"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe b
</span><a href="#local-6989586621680830922"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-315"></span><span>            </span><span class="annot"><span class="annottext">Maybe b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">x -&gt; m x
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680830924"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-316"></span><span>            </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680830921"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680830921"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">x -&gt; b -&gt; m x
</span><a href="#local-6989586621680830928"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680830924"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680830921"><span class="hs-identifier hs-var">a'</span></a></span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span class="hs-comment">-- | 'Data.Maybe.mapMaybe' for 'Fold'.</span><span>
</span><span id="line-319"></span><span id="local-6989586621680831450"><span id="local-6989586621680831451"><span id="local-6989586621680831452"><span class="annot"><a href="Wallet.Emulator.Folds.html#preMapMaybe"><span class="hs-identifier hs-type">preMapMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680831452"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831451"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831451"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831450"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831452"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680831450"><span class="hs-identifier hs-type">r</span></a></span></span></span></span><span>
</span><span id="line-320"></span><span id="preMapMaybe"><span class="annot"><span class="annottext">preMapMaybe :: (a -&gt; Maybe b) -&gt; Fold b r -&gt; Fold a r
</span><a href="Wallet.Emulator.Folds.html#preMapMaybe"><span class="hs-identifier hs-var hs-var">preMapMaybe</span></a></span></span><span> </span><span id="local-6989586621680830920"><span class="annot"><span class="annottext">a -&gt; Maybe b
</span><a href="#local-6989586621680830920"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621680830919"><span class="annot"><span class="annottext">x -&gt; b -&gt; x
</span><a href="#local-6989586621680830919"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621680830918"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680830918"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621680830917"><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621680830917"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; r) -&gt; Fold a r
forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621680830916"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680830918"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621680830917"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-321"></span><span>    </span><span id="local-6989586621680830916"><span class="annot"><span class="annottext">step' :: x -&gt; a -&gt; x
</span><a href="#local-6989586621680830916"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span id="local-6989586621680830915"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680830915"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680830914"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680830914"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe b
</span><a href="#local-6989586621680830920"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680830914"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-322"></span><span>        </span><span class="annot"><span class="annottext">Maybe b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680830915"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-323"></span><span>        </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680830913"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680830913"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">x -&gt; b -&gt; x
</span><a href="#local-6989586621680830919"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621680830915"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680830913"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span class="hs-comment">-- | Effectfully map the result of a 'FoldM'</span><span>
</span><span id="line-326"></span><span id="local-6989586621680830909"><span id="local-6989586621680830910"><span id="local-6989586621680830911"><span id="local-6989586621680830912"><span class="annot"><a href="Wallet.Emulator.Folds.html#postMapM"><span class="hs-identifier hs-type">postMapM</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-327"></span><span>    </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830912"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-328"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680830911"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680830912"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830910"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-329"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830912"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830909"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830911"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-330"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830912"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830909"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680830910"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span><span>
</span><span id="line-331"></span><span id="postMapM"><span class="annot"><span class="annottext">postMapM :: (b -&gt; m c) -&gt; FoldM m a b -&gt; FoldM m a c
</span><a href="Wallet.Emulator.Folds.html#postMapM"><span class="hs-identifier hs-var hs-var">postMapM</span></a></span></span><span> </span><span id="local-6989586621680830908"><span class="annot"><span class="annottext">b -&gt; m c
</span><a href="#local-6989586621680830908"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621680830907"><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621680830907"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621680830906"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621680830906"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621680830905"><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621680830905"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m c) -&gt; FoldM m a c
forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="../file:///nix/store/x2wlc4pzn9czb22sf65hrxm8lv8917aj-foldl-lib-foldl-1.4.13-haddock-doc/share/doc/foldl/html/src"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621680830907"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621680830906"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621680830905"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">(x -&gt; m b) -&gt; (b -&gt; m c) -&gt; x -&gt; m c
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;=&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; m c
</span><a href="#local-6989586621680830908"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span class="hs-keyword">data</span><span> </span><span id="EmulatorFoldErr"><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorFoldErr"><span class="hs-identifier hs-var">EmulatorFoldErr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-334"></span><span>    </span><span id="InstanceStateJSONDecodingError"><span class="annot"><a href="Wallet.Emulator.Folds.html#InstanceStateJSONDecodingError"><span class="hs-identifier hs-var">InstanceStateJSONDecodingError</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Resumable.html#Response"><span class="hs-identifier hs-type">Response</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">JSON.Value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-335"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680830901"><span id="local-6989586621680830903"><span class="annot"><span class="annottext">EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool
(EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool)
-&gt; (EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool)
-&gt; Eq EmulatorFoldErr
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool
$c/= :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool
== :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool
$c== :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680830886"><span id="local-6989586621680830888"><span id="local-6989586621680830890"><span id="local-6989586621680830892"><span id="local-6989586621680830894"><span id="local-6989586621680830896"><span id="local-6989586621680830898"><span class="annot"><span class="annottext">Eq EmulatorFoldErr
Eq EmulatorFoldErr
-&gt; (EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Ordering)
-&gt; (EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool)
-&gt; (EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool)
-&gt; (EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool)
-&gt; (EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool)
-&gt; (EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; EmulatorFoldErr)
-&gt; (EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; EmulatorFoldErr)
-&gt; Ord EmulatorFoldErr
EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool
EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Ordering
EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; EmulatorFoldErr
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; EmulatorFoldErr
$cmin :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; EmulatorFoldErr
max :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; EmulatorFoldErr
$cmax :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; EmulatorFoldErr
&gt;= :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool
$c&gt;= :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool
&gt; :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool
$c&gt; :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool
&lt;= :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool
$c&lt;= :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool
&lt; :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool
$c&lt; :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Bool
compare :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Ordering
$ccompare :: EmulatorFoldErr -&gt; EmulatorFoldErr -&gt; Ordering
$cp1Ord :: Eq EmulatorFoldErr
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680830879"><span id="local-6989586621680830881"><span id="local-6989586621680830883"><span class="annot"><span class="annottext">Int -&gt; EmulatorFoldErr -&gt; ShowS
[EmulatorFoldErr] -&gt; ShowS
EmulatorFoldErr -&gt; String
(Int -&gt; EmulatorFoldErr -&gt; ShowS)
-&gt; (EmulatorFoldErr -&gt; String)
-&gt; ([EmulatorFoldErr] -&gt; ShowS)
-&gt; Show EmulatorFoldErr
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [EmulatorFoldErr] -&gt; ShowS
$cshowList :: [EmulatorFoldErr] -&gt; ShowS
show :: EmulatorFoldErr -&gt; String
$cshow :: EmulatorFoldErr -&gt; String
showsPrec :: Int -&gt; EmulatorFoldErr -&gt; ShowS
$cshowsPrec :: Int -&gt; EmulatorFoldErr -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span class="hs-comment">-- | A human-readable explanation of the error, to be included in the logs.</span><span>
</span><span id="line-338"></span><span class="annot"><a href="Wallet.Emulator.Folds.html#describeError"><span class="hs-identifier hs-type">describeError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Folds.html#EmulatorFoldErr"><span class="hs-identifier hs-type">EmulatorFoldErr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-339"></span><span id="describeError"><span class="annot"><span class="annottext">describeError :: EmulatorFoldErr -&gt; String
</span><a href="Wallet.Emulator.Folds.html#describeError"><span class="hs-identifier hs-var hs-var">describeError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-340"></span><span>    </span><span class="annot"><a href="Wallet.Emulator.Folds.html#InstanceStateJSONDecodingError"><span class="hs-identifier hs-type">InstanceStateJSONDecodingError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Response Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unwords</span></a></span><span>
</span><span id="line-341"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Failed to decode a 'Response JSON.Value'.&quot;</span></span><span>
</span><span id="line-342"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The event is probably for a different 'Contract'.&quot;</span></span><span>
</span><span id="line-343"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;This is often caused by having multiple contract instances share the same 'ContractInstanceTag' (for example, when  using 'activateContractWallet' repeatedly on the same wallet).&quot;</span></span><span>
</span><span id="line-344"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;To fix this, use 'activateContract' with a unique 'ContractInstanceTag' per instance.&quot;</span></span><span>
</span><span id="line-345"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-346"></span></pre></body></html>
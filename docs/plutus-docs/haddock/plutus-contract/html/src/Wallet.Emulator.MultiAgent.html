<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ConstraintKinds       #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds             #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass        #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies    #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts      #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances     #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE GADTs                 #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase            #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns        #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings     #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE Rank2Types            #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell       #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE TupleSections         #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications      #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators         #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-overlapping-patterns #-}</span><span>
</span><span id="line-18"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Wallet.Emulator.MultiAgent</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">Control.Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">AReview</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">Getter</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">Lens'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">Prism'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">anon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">at</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">folded</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">makeLenses</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">prism'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">reversed</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">review</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">to</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">unto</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>                     </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">view</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(&amp;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-operator">(.~)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-operator">(^.)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-operator">(^..)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">join</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Eff</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Member</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Members</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">interpret</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">send</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">subsume</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="../file:///nix/store/nkim7nifcqpdb4r433zhbv94ima3fwqb-natural-transformation-lib-natural-transformation-0.4-haddock-doc/share/doc/natural-transformation/html/src"><span class="hs-operator">(~&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Error</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">throwError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">Control.Monad.Freer.Extras.Log</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">LogMessage</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">LogMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">LogObserve</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">handleObserveLog</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">mapLog</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">Control.Monad.Freer.Extras.Modify</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">handleZoomedState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">raiseEnd</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">writeIntoState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">Control.Monad.Freer.State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">State</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier">get</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">FromJSON</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">ToJSON</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/snd5q6v3qrq7cdxpn9nlwg98vvy50j53-data-default-lib-data-default-0.7.1.1-haddock-doc/share/doc/data-default/html/src"><span class="hs-identifier">Data.Default</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/ibwdmf5kswrsjw9gmzksnspzzk6vivp5-data-default-class-lib-data-default-class-0.1.2.0-haddock-doc/share/doc/data-default-class/html/src"><span class="hs-identifier">def</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">fromMaybe</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Text.Extras.html"><span class="hs-identifier">Data.Text.Extras</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Text.Extras.html#tshow"><span class="hs-identifier">tshow</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Generics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier">Prettyprinter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier">pretty</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier">colon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-operator">(&lt;+&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">Cardano.Node.Emulator.Chain</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Chain</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">Cardano.Node.Emulator.Params</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">Params</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier">Cardano.Node.Emulator.Validation</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><a href="../file:///nix/store/060c917ifnxxqp0dw4bnd10flh56ficy-validation-selective-lib-validation-selective-0.1.0.2-haddock-doc/share/doc/validation-selective/html/src"><span class="hs-identifier">Validation</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">fold</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">to</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Ada</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ada</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.AddressMap</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">AM</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.CardanoWallet</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CW</span></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Index</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Index</span></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Tx.CardanoAPI</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">fromPlutusIndex</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">toCardanoTxOut</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Value</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Value</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-chain-index-core/html/src"><span class="hs-identifier">Plutus.ChainIndex.Emulator</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ChainIndex</span></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Contract.Error.html"><span class="hs-identifier">Plutus.Contract.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Error.html#AssertionError"><span class="hs-identifier">AssertionError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contract.Error.html#GenericAssertion"><span class="hs-identifier">GenericAssertion</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html"><span class="hs-identifier">Plutus.Trace.Emulator.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceLog"><span class="hs-identifier">ContractInstanceLog</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatedWalletEffects"><span class="hs-identifier">EmulatedWalletEffects</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatedWalletEffects%27"><span class="hs-identifier">EmulatedWalletEffects'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#UserThreadMsg"><span class="hs-identifier">UserThreadMsg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html"><span class="hs-identifier">Plutus.Trace.Scheduler</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Scheduler</span></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">Plutus.V2.Ledger.Tx</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">V2</span></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.API.html"><span class="hs-identifier">Wallet.API</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">WAPI</span></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.LogMessages.html"><span class="hs-identifier">Wallet.Emulator.LogMessages</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.LogMessages.html#RequestHandlerLogMsg"><span class="hs-identifier">RequestHandlerLogMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.LogMessages.html#TxBalanceMsg"><span class="hs-identifier">TxBalanceMsg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.NodeClient.html"><span class="hs-identifier">Wallet.Emulator.NodeClient</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NC</span></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html"><span class="hs-identifier">Wallet.Emulator.Wallet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier">Wallet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html"><span class="hs-identifier">Wallet.Emulator.Wallet</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><a href="Wallet.html"><span class="hs-identifier">Wallet</span></a></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-comment">-- | Assertions which will be checked during execution of the emulator.</span><span>
</span><span id="line-61"></span><span class="hs-keyword">data</span><span> </span><span id="Assertion"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#Assertion"><span class="hs-identifier hs-var">Assertion</span></a></span></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="IsValidated"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#IsValidated"><span class="hs-identifier hs-var">IsValidated</span></a></span></span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">CardanoTx</span></a></span><span> </span><span class="hs-comment">-- ^ Assert that the given transaction is validated.</span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="OwnFundsEqual"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#OwnFundsEqual"><span class="hs-identifier hs-var">OwnFundsEqual</span></a></span></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-comment">-- ^ Assert that the funds belonging to a wallet's public-key address are equal to a value.</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="hs-comment">-- | An event with a timestamp measured in emulator time</span><span>
</span><span id="line-66"></span><span class="hs-comment">--   (currently: 'Slot')</span><span>
</span><span id="line-67"></span><span id="local-6989586621680828435"><span id="local-6989586621680828436"></span></span><span class="hs-keyword">data</span><span> </span><span id="EmulatorTimeEvent"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorTimeEvent"><span class="hs-identifier hs-var">EmulatorTimeEvent</span></a></span></span><span> </span><span id="local-6989586621680828799"><span class="annot"><a href="#local-6989586621680828799"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-68"></span><span>    </span><span id="EmulatorTimeEvent"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorTimeEvent"><span class="hs-identifier hs-var">EmulatorTimeEvent</span></a></span></span><span>
</span><span id="line-69"></span><span>        </span><span class="hs-special">{</span><span> </span><span id="_eteEmulatorTime"><span class="annot"><span class="annottext">EmulatorTimeEvent e -&gt; Slot
</span><a href="Wallet.Emulator.MultiAgent.html#_eteEmulatorTime"><span class="hs-identifier hs-var hs-var">_eteEmulatorTime</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">Slot</span></a></span><span>
</span><span id="line-70"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="_eteEvent"><span class="annot"><span class="annottext">EmulatorTimeEvent e -&gt; e
</span><a href="Wallet.Emulator.MultiAgent.html#_eteEvent"><span class="hs-identifier hs-var hs-var">_eteEvent</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680828799"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-71"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680828428"><span id="local-6989586621680828430"><span class="annot"><span class="annottext">EmulatorTimeEvent e -&gt; EmulatorTimeEvent e -&gt; Bool
(EmulatorTimeEvent e -&gt; EmulatorTimeEvent e -&gt; Bool)
-&gt; (EmulatorTimeEvent e -&gt; EmulatorTimeEvent e -&gt; Bool)
-&gt; Eq (EmulatorTimeEvent e)
forall e.
Eq e =&gt;
EmulatorTimeEvent e -&gt; EmulatorTimeEvent e -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: EmulatorTimeEvent e -&gt; EmulatorTimeEvent e -&gt; Bool
$c/= :: forall e.
Eq e =&gt;
EmulatorTimeEvent e -&gt; EmulatorTimeEvent e -&gt; Bool
== :: EmulatorTimeEvent e -&gt; EmulatorTimeEvent e -&gt; Bool
$c== :: forall e.
Eq e =&gt;
EmulatorTimeEvent e -&gt; EmulatorTimeEvent e -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680828421"><span id="local-6989586621680828423"><span id="local-6989586621680828425"><span class="annot"><span class="annottext">Int -&gt; EmulatorTimeEvent e -&gt; ShowS
[EmulatorTimeEvent e] -&gt; ShowS
EmulatorTimeEvent e -&gt; String
(Int -&gt; EmulatorTimeEvent e -&gt; ShowS)
-&gt; (EmulatorTimeEvent e -&gt; String)
-&gt; ([EmulatorTimeEvent e] -&gt; ShowS)
-&gt; Show (EmulatorTimeEvent e)
forall e. Show e =&gt; Int -&gt; EmulatorTimeEvent e -&gt; ShowS
forall e. Show e =&gt; [EmulatorTimeEvent e] -&gt; ShowS
forall e. Show e =&gt; EmulatorTimeEvent e -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [EmulatorTimeEvent e] -&gt; ShowS
$cshowList :: forall e. Show e =&gt; [EmulatorTimeEvent e] -&gt; ShowS
show :: EmulatorTimeEvent e -&gt; String
$cshow :: forall e. Show e =&gt; EmulatorTimeEvent e -&gt; String
showsPrec :: Int -&gt; EmulatorTimeEvent e -&gt; ShowS
$cshowsPrec :: forall e. Show e =&gt; Int -&gt; EmulatorTimeEvent e -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. EmulatorTimeEvent e -&gt; Rep (EmulatorTimeEvent e) x)
-&gt; (forall x. Rep (EmulatorTimeEvent e) x -&gt; EmulatorTimeEvent e)
-&gt; Generic (EmulatorTimeEvent e)
forall x. Rep (EmulatorTimeEvent e) x -&gt; EmulatorTimeEvent e
forall x. EmulatorTimeEvent e -&gt; Rep (EmulatorTimeEvent e) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall e x. Rep (EmulatorTimeEvent e) x -&gt; EmulatorTimeEvent e
forall e x. EmulatorTimeEvent e -&gt; Rep (EmulatorTimeEvent e) x
$cto :: forall e x. Rep (EmulatorTimeEvent e) x -&gt; EmulatorTimeEvent e
$cfrom :: forall e x. EmulatorTimeEvent e -&gt; Rep (EmulatorTimeEvent e) x
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680828413"><span id="local-6989586621680828415"><span class="annot"><span class="annottext">a -&gt; EmulatorTimeEvent b -&gt; EmulatorTimeEvent a
(a -&gt; b) -&gt; EmulatorTimeEvent a -&gt; EmulatorTimeEvent b
(forall a b.
 (a -&gt; b) -&gt; EmulatorTimeEvent a -&gt; EmulatorTimeEvent b)
-&gt; (forall a b. a -&gt; EmulatorTimeEvent b -&gt; EmulatorTimeEvent a)
-&gt; Functor EmulatorTimeEvent
forall a b. a -&gt; EmulatorTimeEvent b -&gt; EmulatorTimeEvent a
forall a b. (a -&gt; b) -&gt; EmulatorTimeEvent a -&gt; EmulatorTimeEvent b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; EmulatorTimeEvent b -&gt; EmulatorTimeEvent a
$c&lt;$ :: forall a b. a -&gt; EmulatorTimeEvent b -&gt; EmulatorTimeEvent a
fmap :: (a -&gt; b) -&gt; EmulatorTimeEvent a -&gt; EmulatorTimeEvent b
$cfmap :: forall a b. (a -&gt; b) -&gt; EmulatorTimeEvent a -&gt; EmulatorTimeEvent b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680828378"><span id="local-6989586621680828380"><span id="local-6989586621680828382"><span id="local-6989586621680828384"><span id="local-6989586621680828386"><span id="local-6989586621680828388"><span id="local-6989586621680828390"><span id="local-6989586621680828392"><span id="local-6989586621680828394"><span id="local-6989586621680828396"><span id="local-6989586621680828398"><span id="local-6989586621680828400"><span id="local-6989586621680828402"><span id="local-6989586621680828404"><span id="local-6989586621680828406"><span id="local-6989586621680828408"><span id="local-6989586621680828410"><span class="annot"><span class="annottext">EmulatorTimeEvent a -&gt; Bool
(a -&gt; m) -&gt; EmulatorTimeEvent a -&gt; m
(a -&gt; b -&gt; b) -&gt; b -&gt; EmulatorTimeEvent a -&gt; b
(forall m. Monoid m =&gt; EmulatorTimeEvent m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; EmulatorTimeEvent a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; EmulatorTimeEvent a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; EmulatorTimeEvent a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; EmulatorTimeEvent a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; EmulatorTimeEvent a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; EmulatorTimeEvent a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; EmulatorTimeEvent a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; EmulatorTimeEvent a -&gt; a)
-&gt; (forall a. EmulatorTimeEvent a -&gt; [a])
-&gt; (forall a. EmulatorTimeEvent a -&gt; Bool)
-&gt; (forall a. EmulatorTimeEvent a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; EmulatorTimeEvent a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; EmulatorTimeEvent a -&gt; a)
-&gt; (forall a. Ord a =&gt; EmulatorTimeEvent a -&gt; a)
-&gt; (forall a. Num a =&gt; EmulatorTimeEvent a -&gt; a)
-&gt; (forall a. Num a =&gt; EmulatorTimeEvent a -&gt; a)
-&gt; Foldable EmulatorTimeEvent
forall a. Eq a =&gt; a -&gt; EmulatorTimeEvent a -&gt; Bool
forall a. Num a =&gt; EmulatorTimeEvent a -&gt; a
forall a. Ord a =&gt; EmulatorTimeEvent a -&gt; a
forall m. Monoid m =&gt; EmulatorTimeEvent m -&gt; m
forall a. EmulatorTimeEvent a -&gt; Bool
forall a. EmulatorTimeEvent a -&gt; Int
forall a. EmulatorTimeEvent a -&gt; [a]
forall a. (a -&gt; a -&gt; a) -&gt; EmulatorTimeEvent a -&gt; a
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; EmulatorTimeEvent a -&gt; m
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; EmulatorTimeEvent a -&gt; b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; EmulatorTimeEvent a -&gt; b
forall (t :: * -&gt; *).
(forall m. Monoid m =&gt; t m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. t a -&gt; [a])
-&gt; (forall a. t a -&gt; Bool)
-&gt; (forall a. t a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; t a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; Foldable t
product :: EmulatorTimeEvent a -&gt; a
$cproduct :: forall a. Num a =&gt; EmulatorTimeEvent a -&gt; a
sum :: EmulatorTimeEvent a -&gt; a
$csum :: forall a. Num a =&gt; EmulatorTimeEvent a -&gt; a
minimum :: EmulatorTimeEvent a -&gt; a
$cminimum :: forall a. Ord a =&gt; EmulatorTimeEvent a -&gt; a
maximum :: EmulatorTimeEvent a -&gt; a
$cmaximum :: forall a. Ord a =&gt; EmulatorTimeEvent a -&gt; a
elem :: a -&gt; EmulatorTimeEvent a -&gt; Bool
$celem :: forall a. Eq a =&gt; a -&gt; EmulatorTimeEvent a -&gt; Bool
length :: EmulatorTimeEvent a -&gt; Int
$clength :: forall a. EmulatorTimeEvent a -&gt; Int
null :: EmulatorTimeEvent a -&gt; Bool
$cnull :: forall a. EmulatorTimeEvent a -&gt; Bool
toList :: EmulatorTimeEvent a -&gt; [a]
$ctoList :: forall a. EmulatorTimeEvent a -&gt; [a]
foldl1 :: (a -&gt; a -&gt; a) -&gt; EmulatorTimeEvent a -&gt; a
$cfoldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; EmulatorTimeEvent a -&gt; a
foldr1 :: (a -&gt; a -&gt; a) -&gt; EmulatorTimeEvent a -&gt; a
$cfoldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; EmulatorTimeEvent a -&gt; a
foldl' :: (b -&gt; a -&gt; b) -&gt; b -&gt; EmulatorTimeEvent a -&gt; b
$cfoldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; EmulatorTimeEvent a -&gt; b
foldl :: (b -&gt; a -&gt; b) -&gt; b -&gt; EmulatorTimeEvent a -&gt; b
$cfoldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; EmulatorTimeEvent a -&gt; b
foldr' :: (a -&gt; b -&gt; b) -&gt; b -&gt; EmulatorTimeEvent a -&gt; b
$cfoldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; EmulatorTimeEvent a -&gt; b
foldr :: (a -&gt; b -&gt; b) -&gt; b -&gt; EmulatorTimeEvent a -&gt; b
$cfoldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; EmulatorTimeEvent a -&gt; b
foldMap' :: (a -&gt; m) -&gt; EmulatorTimeEvent a -&gt; m
$cfoldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; EmulatorTimeEvent a -&gt; m
foldMap :: (a -&gt; m) -&gt; EmulatorTimeEvent a -&gt; m
$cfoldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; EmulatorTimeEvent a -&gt; m
fold :: EmulatorTimeEvent m -&gt; m
$cfold :: forall m. Monoid m =&gt; EmulatorTimeEvent m -&gt; m
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Foldable</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680828367"><span id="local-6989586621680828369"><span id="local-6989586621680828371"><span id="local-6989586621680828373"><span class="annot"><span class="annottext">Functor EmulatorTimeEvent
Foldable EmulatorTimeEvent
Functor EmulatorTimeEvent
-&gt; Foldable EmulatorTimeEvent
-&gt; (forall (f :: * -&gt; *) a b.
    Applicative f =&gt;
    (a -&gt; f b) -&gt; EmulatorTimeEvent a -&gt; f (EmulatorTimeEvent b))
-&gt; (forall (f :: * -&gt; *) a.
    Applicative f =&gt;
    EmulatorTimeEvent (f a) -&gt; f (EmulatorTimeEvent a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; EmulatorTimeEvent a -&gt; m (EmulatorTimeEvent b))
-&gt; (forall (m :: * -&gt; *) a.
    Monad m =&gt;
    EmulatorTimeEvent (m a) -&gt; m (EmulatorTimeEvent a))
-&gt; Traversable EmulatorTimeEvent
(a -&gt; f b) -&gt; EmulatorTimeEvent a -&gt; f (EmulatorTimeEvent b)
forall (t :: * -&gt; *).
Functor t
-&gt; Foldable t
-&gt; (forall (f :: * -&gt; *) a b.
    Applicative f =&gt;
    (a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (forall (f :: * -&gt; *) a. Applicative f =&gt; t (f a) -&gt; f (t a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; t a -&gt; m (t b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; t (m a) -&gt; m (t a))
-&gt; Traversable t
forall (m :: * -&gt; *) a.
Monad m =&gt;
EmulatorTimeEvent (m a) -&gt; m (EmulatorTimeEvent a)
forall (f :: * -&gt; *) a.
Applicative f =&gt;
EmulatorTimeEvent (f a) -&gt; f (EmulatorTimeEvent a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; EmulatorTimeEvent a -&gt; m (EmulatorTimeEvent b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; EmulatorTimeEvent a -&gt; f (EmulatorTimeEvent b)
sequence :: EmulatorTimeEvent (m a) -&gt; m (EmulatorTimeEvent a)
$csequence :: forall (m :: * -&gt; *) a.
Monad m =&gt;
EmulatorTimeEvent (m a) -&gt; m (EmulatorTimeEvent a)
mapM :: (a -&gt; m b) -&gt; EmulatorTimeEvent a -&gt; m (EmulatorTimeEvent b)
$cmapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; EmulatorTimeEvent a -&gt; m (EmulatorTimeEvent b)
sequenceA :: EmulatorTimeEvent (f a) -&gt; f (EmulatorTimeEvent a)
$csequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
EmulatorTimeEvent (f a) -&gt; f (EmulatorTimeEvent a)
traverse :: (a -&gt; f b) -&gt; EmulatorTimeEvent a -&gt; f (EmulatorTimeEvent b)
$ctraverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; EmulatorTimeEvent a -&gt; f (EmulatorTimeEvent b)
$cp2Traversable :: Foldable EmulatorTimeEvent
$cp1Traversable :: Functor EmulatorTimeEvent
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Traversable</span></a></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680828358"><span id="local-6989586621680828360"><span id="local-6989586621680828362"><span id="local-6989586621680828364"><span class="annot"><span class="annottext">[EmulatorTimeEvent e] -&gt; Encoding
[EmulatorTimeEvent e] -&gt; Value
EmulatorTimeEvent e -&gt; Encoding
EmulatorTimeEvent e -&gt; Value
(EmulatorTimeEvent e -&gt; Value)
-&gt; (EmulatorTimeEvent e -&gt; Encoding)
-&gt; ([EmulatorTimeEvent e] -&gt; Value)
-&gt; ([EmulatorTimeEvent e] -&gt; Encoding)
-&gt; ToJSON (EmulatorTimeEvent e)
forall e. ToJSON e =&gt; [EmulatorTimeEvent e] -&gt; Encoding
forall e. ToJSON e =&gt; [EmulatorTimeEvent e] -&gt; Value
forall e. ToJSON e =&gt; EmulatorTimeEvent e -&gt; Encoding
forall e. ToJSON e =&gt; EmulatorTimeEvent e -&gt; Value
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [EmulatorTimeEvent e] -&gt; Encoding
$ctoEncodingList :: forall e. ToJSON e =&gt; [EmulatorTimeEvent e] -&gt; Encoding
toJSONList :: [EmulatorTimeEvent e] -&gt; Value
$ctoJSONList :: forall e. ToJSON e =&gt; [EmulatorTimeEvent e] -&gt; Value
toEncoding :: EmulatorTimeEvent e -&gt; Encoding
$ctoEncoding :: forall e. ToJSON e =&gt; EmulatorTimeEvent e -&gt; Encoding
toJSON :: EmulatorTimeEvent e -&gt; Value
$ctoJSON :: forall e. ToJSON e =&gt; EmulatorTimeEvent e -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680828353"><span id="local-6989586621680828355"><span class="annot"><span class="annottext">Value -&gt; Parser [EmulatorTimeEvent e]
Value -&gt; Parser (EmulatorTimeEvent e)
(Value -&gt; Parser (EmulatorTimeEvent e))
-&gt; (Value -&gt; Parser [EmulatorTimeEvent e])
-&gt; FromJSON (EmulatorTimeEvent e)
forall e. FromJSON e =&gt; Value -&gt; Parser [EmulatorTimeEvent e]
forall e. FromJSON e =&gt; Value -&gt; Parser (EmulatorTimeEvent e)
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [EmulatorTimeEvent e]
$cparseJSONList :: forall e. FromJSON e =&gt; Value -&gt; Parser [EmulatorTimeEvent e]
parseJSON :: Value -&gt; Parser (EmulatorTimeEvent e)
$cparseJSON :: forall e. FromJSON e =&gt; Value -&gt; Parser (EmulatorTimeEvent e)
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span id="eteEvent"><span id="eteEmulatorTime"><span id="local-6989586621680828351"><span id="local-6989586621680828799"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">EmulatorTimeEvent</span></span></span></span></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span id="local-6989586621680828348"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680828345"><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828348"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorTimeEvent"><span class="hs-identifier hs-type">EmulatorTimeEvent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828348"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-78"></span><span>    </span><span id="local-6989586621680828343"><span class="annot"><span class="annottext">pretty :: EmulatorTimeEvent e -&gt; Doc ann
</span><a href="#local-6989586621680828343"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorTimeEvent"><span class="hs-identifier hs-type">EmulatorTimeEvent</span></a></span><span class="hs-special">{</span><span id="local-6989586621680828342"><span class="annot"><span class="annottext">Slot
_eteEmulatorTime :: Slot
_eteEmulatorTime :: forall e. EmulatorTimeEvent e -&gt; Slot
</span><a href="#local-6989586621680828342"><span class="hs-identifier hs-var hs-var">_eteEmulatorTime</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680828341"><span class="annot"><span class="annottext">e
_eteEvent :: e
_eteEvent :: forall e. EmulatorTimeEvent e -&gt; e
</span><a href="#local-6989586621680828341"><span class="hs-identifier hs-var hs-var">_eteEvent</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-79"></span><span>        </span><span class="annot"><span class="annottext">Slot -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621680828342"><span class="hs-identifier hs-var">_eteEmulatorTime</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621680828341"><span class="hs-identifier hs-var">_eteEvent</span></a></span></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span id="local-6989586621680828340"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#emulatorTimeEvent"><span class="hs-identifier hs-type">emulatorTimeEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">Slot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">Prism'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorTimeEvent"><span class="hs-identifier hs-type">EmulatorTimeEvent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828340"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680828340"><span class="hs-identifier hs-type">e</span></a></span></span><span>
</span><span id="line-82"></span><span id="emulatorTimeEvent"><span class="annot"><span class="annottext">emulatorTimeEvent :: Slot -&gt; Prism' (EmulatorTimeEvent e) e
</span><a href="Wallet.Emulator.MultiAgent.html#emulatorTimeEvent"><span class="hs-identifier hs-var hs-var">emulatorTimeEvent</span></a></span></span><span> </span><span id="local-6989586621680828338"><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621680828338"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(e -&gt; EmulatorTimeEvent e)
-&gt; (EmulatorTimeEvent e -&gt; Maybe e)
-&gt; Prism' (EmulatorTimeEvent e) e
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">prism'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Slot -&gt; e -&gt; EmulatorTimeEvent e
forall e. Slot -&gt; e -&gt; EmulatorTimeEvent e
</span><a href="Wallet.Emulator.MultiAgent.html#EmulatorTimeEvent"><span class="hs-identifier hs-var">EmulatorTimeEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621680828338"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorTimeEvent"><span class="hs-identifier hs-type">EmulatorTimeEvent</span></a></span><span> </span><span id="local-6989586621680828337"><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621680828337"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680828336"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621680828336"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621680828337"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Slot -&gt; Slot -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621680828338"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">e -&gt; Maybe e
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621680828336"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EmulatorTimeEvent e
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe e
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-comment">-- | Events produced by the blockchain emulator.</span><span>
</span><span id="line-85"></span><span id="local-6989586621680828334"><span id="local-6989586621680828335"></span></span><span class="hs-keyword">data</span><span> </span><span id="EmulatorEvent%27"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-var">EmulatorEvent'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-86"></span><span>    </span><span id="ChainEvent"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#ChainEvent"><span class="hs-identifier hs-var">ChainEvent</span></a></span></span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">Chain.ChainEvent</span></a></span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ClientEvent"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#ClientEvent"><span class="hs-identifier hs-var">ClientEvent</span></a></span></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.NodeClient.html#NodeClientEvent"><span class="hs-identifier hs-type">NC.NodeClientEvent</span></a></span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="WalletEvent"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#WalletEvent"><span class="hs-identifier hs-var">WalletEvent</span></a></span></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#WalletEvent"><span class="hs-identifier hs-type">Wallet.WalletEvent</span></a></span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ChainIndexEvent"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#ChainIndexEvent"><span class="hs-identifier hs-var">ChainIndexEvent</span></a></span></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-chain-index-core/html/src"><span class="hs-identifier hs-type">ChainIndex.ChainIndexLog</span></a></span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="SchedulerEvent"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#SchedulerEvent"><span class="hs-identifier hs-var">SchedulerEvent</span></a></span></span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html#SchedulerLog"><span class="hs-identifier hs-type">Scheduler.SchedulerLog</span></a></span><span>
</span><span id="line-91"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="InstanceEvent"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#InstanceEvent"><span class="hs-identifier hs-var">InstanceEvent</span></a></span></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceLog"><span class="hs-identifier hs-type">ContractInstanceLog</span></a></span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="UserThreadEvent"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#UserThreadEvent"><span class="hs-identifier hs-var">UserThreadEvent</span></a></span></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#UserThreadMsg"><span class="hs-identifier hs-type">UserThreadMsg</span></a></span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680828323"><span id="local-6989586621680828325"><span class="annot"><span class="annottext">EmulatorEvent' -&gt; EmulatorEvent' -&gt; Bool
(EmulatorEvent' -&gt; EmulatorEvent' -&gt; Bool)
-&gt; (EmulatorEvent' -&gt; EmulatorEvent' -&gt; Bool) -&gt; Eq EmulatorEvent'
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: EmulatorEvent' -&gt; EmulatorEvent' -&gt; Bool
$c/= :: EmulatorEvent' -&gt; EmulatorEvent' -&gt; Bool
== :: EmulatorEvent' -&gt; EmulatorEvent' -&gt; Bool
$c== :: EmulatorEvent' -&gt; EmulatorEvent' -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680828317"><span id="local-6989586621680828319"><span id="local-6989586621680828321"><span class="annot"><span class="annottext">Int -&gt; EmulatorEvent' -&gt; ShowS
[EmulatorEvent'] -&gt; ShowS
EmulatorEvent' -&gt; String
(Int -&gt; EmulatorEvent' -&gt; ShowS)
-&gt; (EmulatorEvent' -&gt; String)
-&gt; ([EmulatorEvent'] -&gt; ShowS)
-&gt; Show EmulatorEvent'
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [EmulatorEvent'] -&gt; ShowS
$cshowList :: [EmulatorEvent'] -&gt; ShowS
show :: EmulatorEvent' -&gt; String
$cshow :: EmulatorEvent' -&gt; String
showsPrec :: Int -&gt; EmulatorEvent' -&gt; ShowS
$cshowsPrec :: Int -&gt; EmulatorEvent' -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. EmulatorEvent' -&gt; Rep EmulatorEvent' x)
-&gt; (forall x. Rep EmulatorEvent' x -&gt; EmulatorEvent')
-&gt; Generic EmulatorEvent'
forall x. Rep EmulatorEvent' x -&gt; EmulatorEvent'
forall x. EmulatorEvent' -&gt; Rep EmulatorEvent' x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep EmulatorEvent' x -&gt; EmulatorEvent'
$cfrom :: forall x. EmulatorEvent' -&gt; Rep EmulatorEvent' x
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680828307"><span id="local-6989586621680828309"><span id="local-6989586621680828311"><span id="local-6989586621680828313"><span class="annot"><span class="annottext">[EmulatorEvent'] -&gt; Encoding
[EmulatorEvent'] -&gt; Value
EmulatorEvent' -&gt; Encoding
EmulatorEvent' -&gt; Value
(EmulatorEvent' -&gt; Value)
-&gt; (EmulatorEvent' -&gt; Encoding)
-&gt; ([EmulatorEvent'] -&gt; Value)
-&gt; ([EmulatorEvent'] -&gt; Encoding)
-&gt; ToJSON EmulatorEvent'
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [EmulatorEvent'] -&gt; Encoding
$ctoEncodingList :: [EmulatorEvent'] -&gt; Encoding
toJSONList :: [EmulatorEvent'] -&gt; Value
$ctoJSONList :: [EmulatorEvent'] -&gt; Value
toEncoding :: EmulatorEvent' -&gt; Encoding
$ctoEncoding :: EmulatorEvent' -&gt; Encoding
toJSON :: EmulatorEvent' -&gt; Value
$ctoJSON :: EmulatorEvent' -&gt; Value
</span><a href="#local-6989586621680828307"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680828303"><span id="local-6989586621680828305"><span class="annot"><span class="annottext">Value -&gt; Parser [EmulatorEvent']
Value -&gt; Parser EmulatorEvent'
(Value -&gt; Parser EmulatorEvent')
-&gt; (Value -&gt; Parser [EmulatorEvent']) -&gt; FromJSON EmulatorEvent'
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [EmulatorEvent']
$cparseJSONList :: Value -&gt; Parser [EmulatorEvent']
parseJSON :: Value -&gt; Parser EmulatorEvent'
$cparseJSON :: Value -&gt; Parser EmulatorEvent'
</span><a href="#local-6989586621680828303"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680828300"><span class="annot"><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-97"></span><span>    </span><span id="local-6989586621680828299"><span class="annot"><span class="annottext">pretty :: EmulatorEvent' -&gt; Doc ann
</span><a href="#local-6989586621680828299"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-98"></span><span>        </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#ClientEvent"><span class="hs-identifier hs-type">ClientEvent</span></a></span><span> </span><span id="local-6989586621680828298"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828298"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621680828297"><span class="annot"><span class="annottext">NodeClientEvent
</span><a href="#local-6989586621680828297"><span class="hs-identifier hs-var">e</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828298"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NodeClientEvent -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">NodeClientEvent
</span><a href="#local-6989586621680828297"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-99"></span><span>        </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#ChainEvent"><span class="hs-identifier hs-type">ChainEvent</span></a></span><span> </span><span id="local-6989586621680828296"><span class="annot"><span class="annottext">ChainEvent
</span><a href="#local-6989586621680828296"><span class="hs-identifier hs-var">e</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ChainEvent -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">ChainEvent
</span><a href="#local-6989586621680828296"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-100"></span><span>        </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#WalletEvent"><span class="hs-identifier hs-type">WalletEvent</span></a></span><span> </span><span id="local-6989586621680828295"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828295"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621680828294"><span class="annot"><span class="annottext">WalletEvent
</span><a href="#local-6989586621680828294"><span class="hs-identifier hs-var">e</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828295"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">WalletEvent -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">WalletEvent
</span><a href="#local-6989586621680828294"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-101"></span><span>        </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#ChainIndexEvent"><span class="hs-identifier hs-type">ChainIndexEvent</span></a></span><span> </span><span id="local-6989586621680828293"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828293"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621680828292"><span class="annot"><span class="annottext">ChainIndexLog
</span><a href="#local-6989586621680828292"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828293"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann
forall ann. Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ChainIndexLog -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">ChainIndexLog
</span><a href="#local-6989586621680828292"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-102"></span><span>        </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#SchedulerEvent"><span class="hs-identifier hs-type">SchedulerEvent</span></a></span><span> </span><span id="local-6989586621680828291"><span class="annot"><span class="annottext">SchedulerLog
</span><a href="#local-6989586621680828291"><span class="hs-identifier hs-var">e</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SchedulerLog -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">SchedulerLog
</span><a href="#local-6989586621680828291"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-103"></span><span>        </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#InstanceEvent"><span class="hs-identifier hs-type">InstanceEvent</span></a></span><span> </span><span id="local-6989586621680828290"><span class="annot"><span class="annottext">ContractInstanceLog
</span><a href="#local-6989586621680828290"><span class="hs-identifier hs-var">e</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ContractInstanceLog -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceLog
</span><a href="#local-6989586621680828290"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-104"></span><span>        </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#UserThreadEvent"><span class="hs-identifier hs-type">UserThreadEvent</span></a></span><span> </span><span id="local-6989586621680828289"><span class="annot"><span class="annottext">UserThreadMsg
</span><a href="#local-6989586621680828289"><span class="hs-identifier hs-var">e</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UserThreadMsg -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/sbv9pqjhqdwa0bq7cll6wmzgwjf0al3r-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">UserThreadMsg
</span><a href="#local-6989586621680828289"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="hs-keyword">type</span><span> </span><span id="EmulatorEvent"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent"><span class="hs-identifier hs-var">EmulatorEvent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorTimeEvent"><span class="hs-identifier hs-type">EmulatorTimeEvent</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#chainEvent"><span class="hs-identifier hs-type">chainEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">Prism'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">Chain.ChainEvent</span></a></span><span>
</span><span id="line-109"></span><span id="chainEvent"><span class="annot"><span class="annottext">chainEvent :: p ChainEvent (f ChainEvent) -&gt; p EmulatorEvent' (f EmulatorEvent')
</span><a href="Wallet.Emulator.MultiAgent.html#chainEvent"><span class="hs-identifier hs-var hs-var">chainEvent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ChainEvent -&gt; EmulatorEvent')
-&gt; (EmulatorEvent' -&gt; Maybe ChainEvent)
-&gt; Prism EmulatorEvent' EmulatorEvent' ChainEvent ChainEvent
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">prism'</span></a></span><span> </span><span class="annot"><span class="annottext">ChainEvent -&gt; EmulatorEvent'
</span><a href="Wallet.Emulator.MultiAgent.html#ChainEvent"><span class="hs-identifier hs-var">ChainEvent</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#ChainEvent"><span class="hs-identifier hs-type">ChainEvent</span></a></span><span> </span><span id="local-6989586621680828287"><span class="annot"><span class="annottext">ChainEvent
</span><a href="#local-6989586621680828287"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ChainEvent -&gt; Maybe ChainEvent
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ChainEvent
</span><a href="#local-6989586621680828287"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EmulatorEvent'
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ChainEvent
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#walletClientEvent"><span class="hs-identifier hs-type">walletClientEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">Prism'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.NodeClient.html#NodeClientEvent"><span class="hs-identifier hs-type">NC.NodeClientEvent</span></a></span><span>
</span><span id="line-112"></span><span id="walletClientEvent"><span class="annot"><span class="annottext">walletClientEvent :: Wallet -&gt; Prism' EmulatorEvent' NodeClientEvent
</span><a href="Wallet.Emulator.MultiAgent.html#walletClientEvent"><span class="hs-identifier hs-var hs-var">walletClientEvent</span></a></span></span><span> </span><span id="local-6989586621680828285"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828285"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NodeClientEvent -&gt; EmulatorEvent')
-&gt; (EmulatorEvent' -&gt; Maybe NodeClientEvent)
-&gt; Prism' EmulatorEvent' NodeClientEvent
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">prism'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; NodeClientEvent -&gt; EmulatorEvent'
</span><a href="Wallet.Emulator.MultiAgent.html#ClientEvent"><span class="hs-identifier hs-var">ClientEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828285"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#ClientEvent"><span class="hs-identifier hs-type">ClientEvent</span></a></span><span> </span><span id="local-6989586621680828284"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828284"><span class="hs-identifier hs-var">w'</span></a></span></span><span> </span><span id="local-6989586621680828283"><span class="annot"><span class="annottext">NodeClientEvent
</span><a href="#local-6989586621680828283"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828285"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Wallet -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828284"><span class="hs-identifier hs-var">w'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NodeClientEvent -&gt; Maybe NodeClientEvent
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">NodeClientEvent
</span><a href="#local-6989586621680828283"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EmulatorEvent'
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe NodeClientEvent
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#walletEvent"><span class="hs-identifier hs-type">walletEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">Prism'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#WalletEvent"><span class="hs-identifier hs-type">Wallet.WalletEvent</span></a></span><span>
</span><span id="line-115"></span><span id="walletEvent"><span class="annot"><span class="annottext">walletEvent :: Wallet -&gt; Prism' EmulatorEvent' WalletEvent
</span><a href="Wallet.Emulator.MultiAgent.html#walletEvent"><span class="hs-identifier hs-var hs-var">walletEvent</span></a></span></span><span> </span><span id="local-6989586621680828281"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828281"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(WalletEvent -&gt; EmulatorEvent')
-&gt; (EmulatorEvent' -&gt; Maybe WalletEvent)
-&gt; Prism' EmulatorEvent' WalletEvent
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">prism'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; WalletEvent -&gt; EmulatorEvent'
</span><a href="Wallet.Emulator.MultiAgent.html#WalletEvent"><span class="hs-identifier hs-var">WalletEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828281"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#WalletEvent"><span class="hs-identifier hs-type">WalletEvent</span></a></span><span> </span><span id="local-6989586621680828280"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828280"><span class="hs-identifier hs-var">w'</span></a></span></span><span> </span><span id="local-6989586621680828279"><span class="annot"><span class="annottext">WalletEvent
</span><a href="#local-6989586621680828279"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828281"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Wallet -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828280"><span class="hs-identifier hs-var">w'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WalletEvent -&gt; Maybe WalletEvent
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WalletEvent
</span><a href="#local-6989586621680828279"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EmulatorEvent'
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe WalletEvent
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#walletEvent%27"><span class="hs-identifier hs-type">walletEvent'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">Prism'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#WalletEvent"><span class="hs-identifier hs-type">Wallet.WalletEvent</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span id="walletEvent%27"><span class="annot"><span class="annottext">walletEvent' :: p (Wallet, WalletEvent) (f (Wallet, WalletEvent))
-&gt; p EmulatorEvent' (f EmulatorEvent')
</span><a href="Wallet.Emulator.MultiAgent.html#walletEvent%27"><span class="hs-identifier hs-var hs-var">walletEvent'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Wallet, WalletEvent) -&gt; EmulatorEvent')
-&gt; (EmulatorEvent' -&gt; Maybe (Wallet, WalletEvent))
-&gt; Prism
     EmulatorEvent'
     EmulatorEvent'
     (Wallet, WalletEvent)
     (Wallet, WalletEvent)
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">prism'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Wallet -&gt; WalletEvent -&gt; EmulatorEvent')
-&gt; (Wallet, WalletEvent) -&gt; EmulatorEvent'
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; WalletEvent -&gt; EmulatorEvent'
</span><a href="Wallet.Emulator.MultiAgent.html#WalletEvent"><span class="hs-identifier hs-var">WalletEvent</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#WalletEvent"><span class="hs-identifier hs-type">WalletEvent</span></a></span><span> </span><span id="local-6989586621680828276"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828276"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621680828275"><span class="annot"><span class="annottext">WalletEvent
</span><a href="#local-6989586621680828275"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Wallet, WalletEvent) -&gt; Maybe (Wallet, WalletEvent)
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828276"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WalletEvent
</span><a href="#local-6989586621680828275"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EmulatorEvent'
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Wallet, WalletEvent)
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#chainIndexEvent"><span class="hs-identifier hs-type">chainIndexEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">Prism'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-chain-index-core/html/src"><span class="hs-identifier hs-type">ChainIndex.ChainIndexLog</span></a></span><span>
</span><span id="line-121"></span><span id="chainIndexEvent"><span class="annot"><span class="annottext">chainIndexEvent :: Wallet -&gt; Prism' EmulatorEvent' ChainIndexLog
</span><a href="Wallet.Emulator.MultiAgent.html#chainIndexEvent"><span class="hs-identifier hs-var hs-var">chainIndexEvent</span></a></span></span><span> </span><span id="local-6989586621680828273"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828273"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ChainIndexLog -&gt; EmulatorEvent')
-&gt; (EmulatorEvent' -&gt; Maybe ChainIndexLog)
-&gt; Prism' EmulatorEvent' ChainIndexLog
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">prism'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; ChainIndexLog -&gt; EmulatorEvent'
</span><a href="Wallet.Emulator.MultiAgent.html#ChainIndexEvent"><span class="hs-identifier hs-var">ChainIndexEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828273"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#ChainIndexEvent"><span class="hs-identifier hs-type">ChainIndexEvent</span></a></span><span> </span><span id="local-6989586621680828272"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828272"><span class="hs-identifier hs-var">w'</span></a></span></span><span> </span><span id="local-6989586621680828271"><span class="annot"><span class="annottext">ChainIndexLog
</span><a href="#local-6989586621680828271"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828273"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Wallet -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828272"><span class="hs-identifier hs-var">w'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ChainIndexLog -&gt; Maybe ChainIndexLog
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ChainIndexLog
</span><a href="#local-6989586621680828271"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EmulatorEvent'
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ChainIndexLog
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#schedulerEvent"><span class="hs-identifier hs-type">schedulerEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">Prism'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Scheduler.html#SchedulerLog"><span class="hs-identifier hs-type">Scheduler.SchedulerLog</span></a></span><span>
</span><span id="line-124"></span><span id="schedulerEvent"><span class="annot"><span class="annottext">schedulerEvent :: p SchedulerLog (f SchedulerLog)
-&gt; p EmulatorEvent' (f EmulatorEvent')
</span><a href="Wallet.Emulator.MultiAgent.html#schedulerEvent"><span class="hs-identifier hs-var hs-var">schedulerEvent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SchedulerLog -&gt; EmulatorEvent')
-&gt; (EmulatorEvent' -&gt; Maybe SchedulerLog)
-&gt; Prism EmulatorEvent' EmulatorEvent' SchedulerLog SchedulerLog
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">prism'</span></a></span><span> </span><span class="annot"><span class="annottext">SchedulerLog -&gt; EmulatorEvent'
</span><a href="Wallet.Emulator.MultiAgent.html#SchedulerEvent"><span class="hs-identifier hs-var">SchedulerEvent</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#SchedulerEvent"><span class="hs-identifier hs-type">SchedulerEvent</span></a></span><span> </span><span id="local-6989586621680828269"><span class="annot"><span class="annottext">SchedulerLog
</span><a href="#local-6989586621680828269"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SchedulerLog -&gt; Maybe SchedulerLog
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">SchedulerLog
</span><a href="#local-6989586621680828269"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EmulatorEvent'
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe SchedulerLog
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#instanceEvent"><span class="hs-identifier hs-type">instanceEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">Prism'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#ContractInstanceLog"><span class="hs-identifier hs-type">ContractInstanceLog</span></a></span><span>
</span><span id="line-127"></span><span id="instanceEvent"><span class="annot"><span class="annottext">instanceEvent :: p ContractInstanceLog (f ContractInstanceLog)
-&gt; p EmulatorEvent' (f EmulatorEvent')
</span><a href="Wallet.Emulator.MultiAgent.html#instanceEvent"><span class="hs-identifier hs-var hs-var">instanceEvent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ContractInstanceLog -&gt; EmulatorEvent')
-&gt; (EmulatorEvent' -&gt; Maybe ContractInstanceLog)
-&gt; Prism
     EmulatorEvent'
     EmulatorEvent'
     ContractInstanceLog
     ContractInstanceLog
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">prism'</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceLog -&gt; EmulatorEvent'
</span><a href="Wallet.Emulator.MultiAgent.html#InstanceEvent"><span class="hs-identifier hs-var">InstanceEvent</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#InstanceEvent"><span class="hs-identifier hs-type">InstanceEvent</span></a></span><span> </span><span id="local-6989586621680828267"><span class="annot"><span class="annottext">ContractInstanceLog
</span><a href="#local-6989586621680828267"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ContractInstanceLog -&gt; Maybe ContractInstanceLog
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ContractInstanceLog
</span><a href="#local-6989586621680828267"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EmulatorEvent'
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ContractInstanceLog
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#userThreadEvent"><span class="hs-identifier hs-type">userThreadEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">Prism'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#UserThreadMsg"><span class="hs-identifier hs-type">UserThreadMsg</span></a></span><span>
</span><span id="line-130"></span><span id="userThreadEvent"><span class="annot"><span class="annottext">userThreadEvent :: p UserThreadMsg (f UserThreadMsg)
-&gt; p EmulatorEvent' (f EmulatorEvent')
</span><a href="Wallet.Emulator.MultiAgent.html#userThreadEvent"><span class="hs-identifier hs-var hs-var">userThreadEvent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UserThreadMsg -&gt; EmulatorEvent')
-&gt; (EmulatorEvent' -&gt; Maybe UserThreadMsg)
-&gt; Prism EmulatorEvent' EmulatorEvent' UserThreadMsg UserThreadMsg
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">prism'</span></a></span><span> </span><span class="annot"><span class="annottext">UserThreadMsg -&gt; EmulatorEvent'
</span><a href="Wallet.Emulator.MultiAgent.html#UserThreadEvent"><span class="hs-identifier hs-var">UserThreadEvent</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#UserThreadEvent"><span class="hs-identifier hs-type">UserThreadEvent</span></a></span><span> </span><span id="local-6989586621680828265"><span class="annot"><span class="annottext">UserThreadMsg
</span><a href="#local-6989586621680828265"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UserThreadMsg -&gt; Maybe UserThreadMsg
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">UserThreadMsg
</span><a href="#local-6989586621680828265"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EmulatorEvent'
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe UserThreadMsg
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-keyword">type</span><span> </span><span id="EmulatedWalletControlEffects"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatedWalletControlEffects"><span class="hs-identifier hs-var">EmulatedWalletControlEffects</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-133"></span><span>        </span><span class="hs-special">'</span><span class="hs-special">[</span><span> </span><span class="annot"><a href="Wallet.Emulator.NodeClient.html#NodeClientControlEffect"><span class="hs-identifier hs-type">NC.NodeClientControlEffect</span></a></span><span>
</span><span id="line-134"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-chain-index-core/html/src"><span class="hs-identifier hs-type">ChainIndex.ChainIndexControlEffect</span></a></span><span>
</span><span id="line-135"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#SigningProcessControlEffect"><span class="hs-identifier hs-type">Wallet.SigningProcessControlEffect</span></a></span><span>
</span><span id="line-136"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">T.Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">T.Text</span></a></span><span>
</span><span id="line-138"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-comment">{- Note [Control effects]

Plutus contracts interact with the outside world through a number of different
effects. These effects are captured in 'EmulatedWalletEffects'. They are
supposed to be a realistic representation of the capabilities that contracts
will have in the real world, when the system is released.

In the tests we often want to simulate events that happened &quot;outside of the
contract&quot;. For example: A new block is added to the chain, or a user takes the
transaction and emails it to another person to sign, before sending it to the
node. These kinds of events cannot be expressed in 'EmulatedWalletEffects',
because it would make the emulated wallet effects unrealistic - Plutus
contracts in the real world will not have the power to decide when a new block
gets added to the chain, or to control who adds their signature to a
transaction.

But in the emulated world of our unit tests we, the contract authors, would very
much like to have this power. That is why there is a second list of emulator
effects: 'EmulatedWalletControlEffects' are the of effects that only make sense
in the emulator, but not in the real world. With 'EmulatedWalletControlEffects'
we can control the blockchain and the lines of communication between the
emulated components.

By being clear about which of our (ie. the contract authors) actions
require the full power of 'EmulatedWalletControlEffects', we can be more
confident that our contracts will run in the real world, and not just in the
test environment. That is why there are two similar but different constructors
for 'MultiAgentEffect': 'WalletAction' is used for things that we will be able
to do in the real world, and 'WalletControlAction' is for everything else.

-}</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-comment">-- | The type of actions in the emulator.</span><span>
</span><span id="line-173"></span><span class="hs-keyword">data</span><span> </span><span id="MultiAgentEffect"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffect"><span class="hs-identifier hs-var">MultiAgentEffect</span></a></span></span><span> </span><span id="local-6989586621680828264"><span class="annot"><a href="#local-6989586621680828264"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-comment">-- | A direct action performed by a wallet. Usually represents a &quot;user action&quot;, as it is</span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-comment">-- triggered externally.</span><span>
</span><span id="line-176"></span><span>    </span><span id="local-6989586621680828745"><span id="WalletAction"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#WalletAction"><span class="hs-identifier hs-var">WalletAction</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatedWalletEffects"><span class="hs-identifier hs-type">EmulatedWalletEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828745"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffect"><span class="hs-identifier hs-type">MultiAgentEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828745"><span class="hs-identifier hs-type">r</span></a></span></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="hs-keyword">data</span><span> </span><span id="MultiAgentControlEffect"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentControlEffect"><span class="hs-identifier hs-var">MultiAgentControlEffect</span></a></span></span><span> </span><span id="local-6989586621680828262"><span class="annot"><a href="#local-6989586621680828262"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-179"></span><span>    </span><span class="hs-comment">-- | An action affecting the emulated parts of a wallet (only available in emulator - see note [Control effects].)</span><span>
</span><span id="line-180"></span><span>    </span><span id="local-6989586621680828705"><span id="WalletControlAction"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#WalletControlAction"><span class="hs-identifier hs-var">WalletControlAction</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatedWalletControlEffects"><span class="hs-identifier hs-type">EmulatedWalletControlEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828705"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentControlEffect"><span class="hs-identifier hs-type">MultiAgentControlEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828705"><span class="hs-identifier hs-type">r</span></a></span></span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-comment">-- | An assertion in the event stream, which can inspect the current state.</span><span>
</span><span id="line-182"></span><span>    </span><span id="Assertion"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#Assertion"><span class="hs-identifier hs-var">Assertion</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#Assertion"><span class="hs-identifier hs-type">Assertion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentControlEffect"><span class="hs-identifier hs-type">MultiAgentControlEffect</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-comment">-- | Run an action in the context of a wallet (ie. agent)</span><span>
</span><span id="line-185"></span><span id="local-6989586621680828710"><span id="local-6989586621680828711"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#walletAction"><span class="hs-identifier hs-type">walletAction</span></a></span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffect"><span class="hs-identifier hs-type">MultiAgentEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828711"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span>
</span><span id="line-188"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatedWalletEffects"><span class="hs-identifier hs-type">EmulatedWalletEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828710"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-189"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828711"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828710"><span class="hs-identifier hs-type">r</span></a></span></span></span><span>
</span><span id="line-190"></span><span id="walletAction"><span class="annot"><span class="annottext">walletAction :: Wallet -&gt; Eff EmulatedWalletEffects r -&gt; Eff effs r
</span><a href="Wallet.Emulator.MultiAgent.html#walletAction"><span class="hs-identifier hs-var hs-var">walletAction</span></a></span></span><span> </span><span id="local-6989586621680828258"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828258"><span class="hs-identifier hs-var">wallet</span></a></span></span><span> </span><span id="local-6989586621680828257"><span class="annot"><span class="annottext">Eff EmulatedWalletEffects r
</span><a href="#local-6989586621680828257"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MultiAgentEffect r -&gt; Eff effs r
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]) a.
Member eff effs =&gt;
eff a -&gt; Eff effs a
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">send</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; Eff EmulatedWalletEffects r -&gt; MultiAgentEffect r
forall r.
Wallet -&gt; Eff EmulatedWalletEffects r -&gt; MultiAgentEffect r
</span><a href="Wallet.Emulator.MultiAgent.html#WalletAction"><span class="hs-identifier hs-var">WalletAction</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828258"><span class="hs-identifier hs-var">wallet</span></a></span><span> </span><span class="annot"><span class="annottext">Eff EmulatedWalletEffects r
</span><a href="#local-6989586621680828257"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#handleMultiAgentEffects"><span class="hs-identifier hs-type">handleMultiAgentEffects</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680828255"><span class="annot"><a href="#local-6989586621680828255"><span class="hs-identifier hs-type">effs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-194"></span><span>    </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffect"><span class="hs-identifier hs-type">MultiAgentEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828255"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatedWalletEffects%27"><span class="hs-identifier hs-type">EmulatedWalletEffects'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828255"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>    </span><span class="annot"><a href="../file:///nix/store/nkim7nifcqpdb4r433zhbv94ima3fwqb-natural-transformation-lib-natural-transformation-0.4-haddock-doc/share/doc/natural-transformation/html/src"><span class="hs-operator hs-type">~&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828255"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-198"></span><span id="handleMultiAgentEffects"><span class="annot"><span class="annottext">handleMultiAgentEffects :: Wallet -&gt; Eff (EmulatedWalletEffects' effs) ~&gt; Eff effs
</span><a href="Wallet.Emulator.MultiAgent.html#handleMultiAgentEffects"><span class="hs-identifier hs-var hs-var">handleMultiAgentEffects</span></a></span></span><span> </span><span id="local-6989586621680828254"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828254"><span class="hs-identifier hs-var">wallet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-199"></span><span>    </span><span class="annot"><span class="annottext">(LogMsg Text ~&gt; Eff effs) -&gt; Eff (LogMsg Text : effs) ~&gt; Eff effs
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; LogMsg Text ~&gt; Eff effs
forall (f :: * -&gt; *) (effs :: [* -&gt; *]).
(Member f EmulatedWalletEffects, Member MultiAgentEffect effs) =&gt;
Wallet -&gt; f ~&gt; Eff effs
</span><a href="Wallet.Emulator.MultiAgent.html#raiseWallet"><span class="hs-identifier hs-var">raiseWallet</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">T.Text</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828254"><span class="hs-identifier hs-var">wallet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>        </span><span class="annot"><span class="annottext">(Eff (LogMsg Text : effs) x -&gt; Eff effs x)
-&gt; (Eff (EmulatedWalletEffects' effs) x
    -&gt; Eff (LogMsg Text : effs) x)
-&gt; Eff (EmulatedWalletEffects' effs) x
-&gt; Eff effs x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(LogMsg TxBalanceMsg ~&gt; Eff (LogMsg Text : effs))
-&gt; Eff (LogMsg TxBalanceMsg : LogMsg Text : effs)
   ~&gt; Eff (LogMsg Text : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; LogMsg TxBalanceMsg ~&gt; Eff (LogMsg Text : effs)
forall (f :: * -&gt; *) (effs :: [* -&gt; *]).
(Member f EmulatedWalletEffects, Member MultiAgentEffect effs) =&gt;
Wallet -&gt; f ~&gt; Eff effs
</span><a href="Wallet.Emulator.MultiAgent.html#raiseWallet"><span class="hs-identifier hs-var">raiseWallet</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.LogMessages.html#TxBalanceMsg"><span class="hs-identifier hs-type">TxBalanceMsg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828254"><span class="hs-identifier hs-var">wallet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>        </span><span class="annot"><span class="annottext">(Eff (LogMsg TxBalanceMsg : LogMsg Text : effs) x
 -&gt; Eff (LogMsg Text : effs) x)
-&gt; (Eff (EmulatedWalletEffects' effs) x
    -&gt; Eff (LogMsg TxBalanceMsg : LogMsg Text : effs) x)
-&gt; Eff (EmulatedWalletEffects' effs) x
-&gt; Eff (LogMsg Text : effs) x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(LogMsg RequestHandlerLogMsg
 ~&gt; Eff (LogMsg TxBalanceMsg : LogMsg Text : effs))
-&gt; Eff
     (LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : effs)
   ~&gt; Eff (LogMsg TxBalanceMsg : LogMsg Text : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet
-&gt; LogMsg RequestHandlerLogMsg
   ~&gt; Eff (LogMsg TxBalanceMsg : LogMsg Text : effs)
forall (f :: * -&gt; *) (effs :: [* -&gt; *]).
(Member f EmulatedWalletEffects, Member MultiAgentEffect effs) =&gt;
Wallet -&gt; f ~&gt; Eff effs
</span><a href="Wallet.Emulator.MultiAgent.html#raiseWallet"><span class="hs-identifier hs-var">raiseWallet</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.LogMessages.html#RequestHandlerLogMsg"><span class="hs-identifier hs-type">RequestHandlerLogMsg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828254"><span class="hs-identifier hs-var">wallet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>        </span><span class="annot"><span class="annottext">(Eff
   (LogMsg RequestHandlerLogMsg
      : LogMsg TxBalanceMsg : LogMsg Text : effs)
   x
 -&gt; Eff (LogMsg TxBalanceMsg : LogMsg Text : effs) x)
-&gt; (Eff (EmulatedWalletEffects' effs) x
    -&gt; Eff
         (LogMsg RequestHandlerLogMsg
            : LogMsg TxBalanceMsg : LogMsg Text : effs)
         x)
-&gt; Eff (EmulatedWalletEffects' effs) x
-&gt; Eff (LogMsg TxBalanceMsg : LogMsg Text : effs) x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(LogObserve (LogMessage Text)
 ~&gt; Eff
      (LogMsg RequestHandlerLogMsg
         : LogMsg TxBalanceMsg : LogMsg Text : effs))
-&gt; Eff
     (LogObserve (LogMessage Text)
        : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
        : effs)
   ~&gt; Eff
        (LogMsg RequestHandlerLogMsg
           : LogMsg TxBalanceMsg : LogMsg Text : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet
-&gt; LogObserve (LogMessage Text)
   ~&gt; Eff
        (LogMsg RequestHandlerLogMsg
           : LogMsg TxBalanceMsg : LogMsg Text : effs)
forall (f :: * -&gt; *) (effs :: [* -&gt; *]).
(Member f EmulatedWalletEffects, Member MultiAgentEffect effs) =&gt;
Wallet -&gt; f ~&gt; Eff effs
</span><a href="Wallet.Emulator.MultiAgent.html#raiseWallet"><span class="hs-identifier hs-var">raiseWallet</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogObserve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">T.Text</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828254"><span class="hs-identifier hs-var">wallet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span>        </span><span class="annot"><span class="annottext">(Eff
   (LogObserve (LogMessage Text)
      : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
      : effs)
   x
 -&gt; Eff
      (LogMsg RequestHandlerLogMsg
         : LogMsg TxBalanceMsg : LogMsg Text : effs)
      x)
-&gt; (Eff (EmulatedWalletEffects' effs) x
    -&gt; Eff
         (LogObserve (LogMessage Text)
            : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
            : effs)
         x)
-&gt; Eff (EmulatedWalletEffects' effs) x
-&gt; Eff
     (LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : effs)
     x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainIndexQueryEffect
 ~&gt; Eff
      (LogObserve (LogMessage Text)
         : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
         : effs))
-&gt; Eff
     (ChainIndexQueryEffect
        : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : effs)
   ~&gt; Eff
        (LogObserve (LogMessage Text)
           : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
           : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet
-&gt; ChainIndexQueryEffect
   ~&gt; Eff
        (LogObserve (LogMessage Text)
           : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
           : effs)
forall (f :: * -&gt; *) (effs :: [* -&gt; *]).
(Member f EmulatedWalletEffects, Member MultiAgentEffect effs) =&gt;
Wallet -&gt; f ~&gt; Eff effs
</span><a href="Wallet.Emulator.MultiAgent.html#raiseWallet"><span class="hs-identifier hs-var">raiseWallet</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../plutus-chain-index-core/html/src"><span class="hs-identifier hs-type">ChainIndex.ChainIndexQueryEffect</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828254"><span class="hs-identifier hs-var">wallet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>        </span><span class="annot"><span class="annottext">(Eff
   (ChainIndexQueryEffect
      : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
      : LogMsg TxBalanceMsg : LogMsg Text : effs)
   x
 -&gt; Eff
      (LogObserve (LogMessage Text)
         : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
         : effs)
      x)
-&gt; (Eff (EmulatedWalletEffects' effs) x
    -&gt; Eff
         (ChainIndexQueryEffect
            : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
            : LogMsg TxBalanceMsg : LogMsg Text : effs)
         x)
-&gt; Eff (EmulatedWalletEffects' effs) x
-&gt; Eff
     (LogObserve (LogMessage Text)
        : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
        : effs)
     x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(NodeClientEffect
 ~&gt; Eff
      (ChainIndexQueryEffect
         : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
         : LogMsg TxBalanceMsg : LogMsg Text : effs))
-&gt; Eff
     (NodeClientEffect
        : ChainIndexQueryEffect : LogObserve (LogMessage Text)
        : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
        : effs)
   ~&gt; Eff
        (ChainIndexQueryEffect
           : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
           : LogMsg TxBalanceMsg : LogMsg Text : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet
-&gt; NodeClientEffect
   ~&gt; Eff
        (ChainIndexQueryEffect
           : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
           : LogMsg TxBalanceMsg : LogMsg Text : effs)
forall (f :: * -&gt; *) (effs :: [* -&gt; *]).
(Member f EmulatedWalletEffects, Member MultiAgentEffect effs) =&gt;
Wallet -&gt; f ~&gt; Eff effs
</span><a href="Wallet.Emulator.MultiAgent.html#raiseWallet"><span class="hs-identifier hs-var">raiseWallet</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Wallet.Effects.html#NodeClientEffect"><span class="hs-identifier hs-type">WAPI.NodeClientEffect</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828254"><span class="hs-identifier hs-var">wallet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>        </span><span class="annot"><span class="annottext">(Eff
   (NodeClientEffect
      : ChainIndexQueryEffect : LogObserve (LogMessage Text)
      : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
      : effs)
   x
 -&gt; Eff
      (ChainIndexQueryEffect
         : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
         : LogMsg TxBalanceMsg : LogMsg Text : effs)
      x)
-&gt; (Eff (EmulatedWalletEffects' effs) x
    -&gt; Eff
         (NodeClientEffect
            : ChainIndexQueryEffect : LogObserve (LogMessage Text)
            : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
            : effs)
         x)
-&gt; Eff (EmulatedWalletEffects' effs) x
-&gt; Eff
     (ChainIndexQueryEffect
        : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : effs)
     x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Error WalletAPIError
 ~&gt; Eff
      (NodeClientEffect
         : ChainIndexQueryEffect : LogObserve (LogMessage Text)
         : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
         : effs))
-&gt; Eff
     (Error WalletAPIError
        : NodeClientEffect : ChainIndexQueryEffect
        : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : effs)
   ~&gt; Eff
        (NodeClientEffect
           : ChainIndexQueryEffect : LogObserve (LogMessage Text)
           : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
           : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet
-&gt; Error WalletAPIError
   ~&gt; Eff
        (NodeClientEffect
           : ChainIndexQueryEffect : LogObserve (LogMessage Text)
           : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
           : effs)
forall (f :: * -&gt; *) (effs :: [* -&gt; *]).
(Member f EmulatedWalletEffects, Member MultiAgentEffect effs) =&gt;
Wallet -&gt; f ~&gt; Eff effs
</span><a href="Wallet.Emulator.MultiAgent.html#raiseWallet"><span class="hs-identifier hs-var">raiseWallet</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Error.html#WalletAPIError"><span class="hs-identifier hs-type">WAPI.WalletAPIError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828254"><span class="hs-identifier hs-var">wallet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>        </span><span class="annot"><span class="annottext">(Eff
   (Error WalletAPIError
      : NodeClientEffect : ChainIndexQueryEffect
      : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
      : LogMsg TxBalanceMsg : LogMsg Text : effs)
   x
 -&gt; Eff
      (NodeClientEffect
         : ChainIndexQueryEffect : LogObserve (LogMessage Text)
         : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
         : effs)
      x)
-&gt; (Eff (EmulatedWalletEffects' effs) x
    -&gt; Eff
         (Error WalletAPIError
            : NodeClientEffect : ChainIndexQueryEffect
            : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
            : LogMsg TxBalanceMsg : LogMsg Text : effs)
         x)
-&gt; Eff (EmulatedWalletEffects' effs) x
-&gt; Eff
     (NodeClientEffect
        : ChainIndexQueryEffect : LogObserve (LogMessage Text)
        : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
        : effs)
     x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(WalletEffect
 ~&gt; Eff
      (Error WalletAPIError
         : NodeClientEffect : ChainIndexQueryEffect
         : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
         : LogMsg TxBalanceMsg : LogMsg Text : effs))
-&gt; Eff (EmulatedWalletEffects' effs)
   ~&gt; Eff
        (Error WalletAPIError
           : NodeClientEffect : ChainIndexQueryEffect
           : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
           : LogMsg TxBalanceMsg : LogMsg Text : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet
-&gt; WalletEffect
   ~&gt; Eff
        (Error WalletAPIError
           : NodeClientEffect : ChainIndexQueryEffect
           : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
           : LogMsg TxBalanceMsg : LogMsg Text : effs)
forall (f :: * -&gt; *) (effs :: [* -&gt; *]).
(Member f EmulatedWalletEffects, Member MultiAgentEffect effs) =&gt;
Wallet -&gt; f ~&gt; Eff effs
</span><a href="Wallet.Emulator.MultiAgent.html#raiseWallet"><span class="hs-identifier hs-var">raiseWallet</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Wallet.Effects.html#WalletEffect"><span class="hs-identifier hs-type">WAPI.WalletEffect</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828254"><span class="hs-identifier hs-var">wallet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#raiseWallet"><span class="hs-identifier hs-type">raiseWallet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680828735"><span class="annot"><a href="#local-6989586621680828735"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621680828734"><span class="annot"><a href="#local-6989586621680828734"><span class="hs-identifier hs-type">effs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828735"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="Plutus.Trace.Emulator.Types.html#EmulatedWalletEffects"><span class="hs-identifier hs-type">EmulatedWalletEffects</span></a></span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffect"><span class="hs-identifier hs-type">MultiAgentEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828734"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680828735"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-214"></span><span>    </span><span class="annot"><a href="../file:///nix/store/nkim7nifcqpdb4r433zhbv94ima3fwqb-natural-transformation-lib-natural-transformation-0.4-haddock-doc/share/doc/natural-transformation/html/src"><span class="hs-operator hs-type">~&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828734"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-215"></span><span id="raiseWallet"><span class="annot"><span class="annottext">raiseWallet :: Wallet -&gt; f ~&gt; Eff effs
</span><a href="Wallet.Emulator.MultiAgent.html#raiseWallet"><span class="hs-identifier hs-var hs-var">raiseWallet</span></a></span></span><span> </span><span id="local-6989586621680828251"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828251"><span class="hs-identifier hs-var">wllt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Eff EmulatedWalletEffects x -&gt; Eff effs x
forall (effs :: [* -&gt; *]) r.
Member MultiAgentEffect effs =&gt;
Wallet -&gt; Eff EmulatedWalletEffects r -&gt; Eff effs r
</span><a href="Wallet.Emulator.MultiAgent.html#walletAction"><span class="hs-identifier hs-var">walletAction</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828251"><span class="hs-identifier hs-var">wllt</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff EmulatedWalletEffects x -&gt; Eff effs x)
-&gt; (f x -&gt; Eff EmulatedWalletEffects x) -&gt; f x -&gt; Eff effs x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">f x -&gt; Eff EmulatedWalletEffects x
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]) a.
Member eff effs =&gt;
eff a -&gt; Eff effs a
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">send</span></a></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="hs-comment">-- | Run a control action in the context of a wallet</span><span>
</span><span id="line-218"></span><span id="local-6989586621680828249"><span id="local-6989586621680828250"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#walletControlAction"><span class="hs-identifier hs-type">walletControlAction</span></a></span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentControlEffect"><span class="hs-identifier hs-type">MultiAgentControlEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828250"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatedWalletControlEffects"><span class="hs-identifier hs-type">EmulatedWalletControlEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828249"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-222"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828250"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828249"><span class="hs-identifier hs-type">r</span></a></span></span></span><span>
</span><span id="line-223"></span><span id="walletControlAction"><span class="annot"><span class="annottext">walletControlAction :: Wallet -&gt; Eff EmulatedWalletControlEffects r -&gt; Eff effs r
</span><a href="Wallet.Emulator.MultiAgent.html#walletControlAction"><span class="hs-identifier hs-var hs-var">walletControlAction</span></a></span></span><span> </span><span id="local-6989586621680828247"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828247"><span class="hs-identifier hs-var">wallet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MultiAgentControlEffect r -&gt; Eff effs r
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]) a.
Member eff effs =&gt;
eff a -&gt; Eff effs a
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">send</span></a></span><span> </span><span class="annot"><span class="annottext">(MultiAgentControlEffect r -&gt; Eff effs r)
-&gt; (Eff EmulatedWalletControlEffects r
    -&gt; MultiAgentControlEffect r)
-&gt; Eff EmulatedWalletControlEffects r
-&gt; Eff effs r
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
-&gt; Eff EmulatedWalletControlEffects r -&gt; MultiAgentControlEffect r
forall r.
Wallet
-&gt; Eff EmulatedWalletControlEffects r -&gt; MultiAgentControlEffect r
</span><a href="Wallet.Emulator.MultiAgent.html#WalletControlAction"><span class="hs-identifier hs-var">WalletControlAction</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828247"><span class="hs-identifier hs-var">wallet</span></a></span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span id="local-6989586621680828700"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#assertion"><span class="hs-identifier hs-type">assertion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentControlEffect"><span class="hs-identifier hs-type">MultiAgentControlEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828700"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#Assertion"><span class="hs-identifier hs-type">Assertion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828700"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-226"></span><span id="assertion"><span class="annot"><span class="annottext">assertion :: Assertion -&gt; Eff effs ()
</span><a href="Wallet.Emulator.MultiAgent.html#assertion"><span class="hs-identifier hs-var hs-var">assertion</span></a></span></span><span> </span><span id="local-6989586621680828245"><span class="annot"><span class="annottext">Assertion
</span><a href="#local-6989586621680828245"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MultiAgentControlEffect () -&gt; Eff effs ()
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]) a.
Member eff effs =&gt;
eff a -&gt; Eff effs a
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">send</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Assertion -&gt; MultiAgentControlEffect ()
</span><a href="Wallet.Emulator.MultiAgent.html#Assertion"><span class="hs-identifier hs-var">Assertion</span></a></span><span> </span><span class="annot"><span class="annottext">Assertion
</span><a href="#local-6989586621680828245"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-comment">-- | Issue an assertion that the funds for a given wallet have the given value.</span><span>
</span><span id="line-229"></span><span id="local-6989586621680828244"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#assertOwnFundsEq"><span class="hs-identifier hs-type">assertOwnFundsEq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentControlEffect"><span class="hs-identifier hs-type">MultiAgentControlEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828244"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828244"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-230"></span><span id="assertOwnFundsEq"><span class="annot"><span class="annottext">assertOwnFundsEq :: Wallet -&gt; Value -&gt; Eff effs ()
</span><a href="Wallet.Emulator.MultiAgent.html#assertOwnFundsEq"><span class="hs-identifier hs-var hs-var">assertOwnFundsEq</span></a></span></span><span> </span><span id="local-6989586621680828242"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828242"><span class="hs-identifier hs-var">wallet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Assertion -&gt; Eff effs ()
forall (effs :: [* -&gt; *]).
Member MultiAgentControlEffect effs =&gt;
Assertion -&gt; Eff effs ()
</span><a href="Wallet.Emulator.MultiAgent.html#assertion"><span class="hs-identifier hs-var">assertion</span></a></span><span> </span><span class="annot"><span class="annottext">(Assertion -&gt; Eff effs ())
-&gt; (Value -&gt; Assertion) -&gt; Value -&gt; Eff effs ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Value -&gt; Assertion
</span><a href="Wallet.Emulator.MultiAgent.html#OwnFundsEqual"><span class="hs-identifier hs-var">OwnFundsEqual</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828242"><span class="hs-identifier hs-var">wallet</span></a></span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="hs-comment">-- | Issue an assertion that the given transaction has been validated.</span><span>
</span><span id="line-233"></span><span id="local-6989586621680828241"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#assertIsValidated"><span class="hs-identifier hs-type">assertIsValidated</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Member</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentControlEffect"><span class="hs-identifier hs-type">MultiAgentControlEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828241"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">CardanoTx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828241"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-234"></span><span id="assertIsValidated"><span class="annot"><span class="annottext">assertIsValidated :: CardanoTx -&gt; Eff effs ()
</span><a href="Wallet.Emulator.MultiAgent.html#assertIsValidated"><span class="hs-identifier hs-var hs-var">assertIsValidated</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Assertion -&gt; Eff effs ()
forall (effs :: [* -&gt; *]).
Member MultiAgentControlEffect effs =&gt;
Assertion -&gt; Eff effs ()
</span><a href="Wallet.Emulator.MultiAgent.html#assertion"><span class="hs-identifier hs-var">assertion</span></a></span><span> </span><span class="annot"><span class="annottext">(Assertion -&gt; Eff effs ())
-&gt; (CardanoTx -&gt; Assertion) -&gt; CardanoTx -&gt; Eff effs ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx -&gt; Assertion
</span><a href="Wallet.Emulator.MultiAgent.html#IsValidated"><span class="hs-identifier hs-var">IsValidated</span></a></span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="hs-comment">-- | The state of the emulator itself.</span><span>
</span><span id="line-237"></span><span class="hs-keyword">data</span><span> </span><span id="EmulatorState"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-var">EmulatorState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EmulatorState"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-var">EmulatorState</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-238"></span><span>    </span><span id="_chainState"><span class="annot"><span class="annottext">EmulatorState -&gt; ChainState
</span><a href="Wallet.Emulator.MultiAgent.html#_chainState"><span class="hs-identifier hs-var hs-var">_chainState</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">Chain.ChainState</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- ^ Mockchain</span><span>
</span><span id="line-239"></span><span>    </span><span id="_walletStates"><span class="annot"><span class="annottext">EmulatorState -&gt; Map Wallet WalletState
</span><a href="Wallet.Emulator.MultiAgent.html#_walletStates"><span class="hs-identifier hs-var hs-var">_walletStates</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#WalletState"><span class="hs-identifier hs-type">Wallet.WalletState</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- ^ The state of each agent.</span><span>
</span><span id="line-240"></span><span>    </span><span id="_emulatorLog"><span class="annot"><span class="annottext">EmulatorState -&gt; [LogMessage EmulatorEvent]
</span><a href="Wallet.Emulator.MultiAgent.html#_emulatorLog"><span class="hs-identifier hs-var hs-var">_emulatorLog</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent"><span class="hs-identifier hs-type">EmulatorEvent</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ The emulator log messages, with the newest last.</span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680828230"><span id="local-6989586621680828232"><span id="local-6989586621680828234"><span class="annot"><span class="annottext">Int -&gt; EmulatorState -&gt; ShowS
[EmulatorState] -&gt; ShowS
EmulatorState -&gt; String
(Int -&gt; EmulatorState -&gt; ShowS)
-&gt; (EmulatorState -&gt; String)
-&gt; ([EmulatorState] -&gt; ShowS)
-&gt; Show EmulatorState
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [EmulatorState] -&gt; ShowS
$cshowList :: [EmulatorState] -&gt; ShowS
show :: EmulatorState -&gt; String
$cshow :: EmulatorState -&gt; String
showsPrec :: Int -&gt; EmulatorState -&gt; ShowS
$cshowsPrec :: Int -&gt; EmulatorState -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span id="walletStates"><span id="emulatorLog"><span id="chainState"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">EmulatorState</span></span></span></span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#walletState"><span class="hs-identifier hs-type">walletState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-type">EmulatorState</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#WalletState"><span class="hs-identifier hs-type">Wallet.WalletState</span></a></span><span>
</span><span id="line-246"></span><span id="walletState"><span class="annot"><span class="annottext">walletState :: Wallet -&gt; Lens' EmulatorState WalletState
</span><a href="Wallet.Emulator.MultiAgent.html#walletState"><span class="hs-identifier hs-var hs-var">walletState</span></a></span></span><span> </span><span id="local-6989586621680828225"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828225"><span class="hs-identifier hs-var">wallet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Map Wallet WalletState -&gt; f (Map Wallet WalletState))
-&gt; EmulatorState -&gt; f EmulatorState
Lens' EmulatorState (Map Wallet WalletState)
</span><a href="Wallet.Emulator.MultiAgent.html#walletStates"><span class="hs-identifier hs-var">walletStates</span></a></span><span> </span><span class="annot"><span class="annottext">((Map Wallet WalletState -&gt; f (Map Wallet WalletState))
 -&gt; EmulatorState -&gt; f EmulatorState)
-&gt; ((WalletState -&gt; f WalletState)
    -&gt; Map Wallet WalletState -&gt; f (Map Wallet WalletState))
-&gt; (WalletState -&gt; f WalletState)
-&gt; EmulatorState
-&gt; f EmulatorState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Index (Map Wallet WalletState)
-&gt; Lens'
     (Map Wallet WalletState) (Maybe (IxValue (Map Wallet WalletState)))
forall m. At m =&gt; Index m -&gt; Lens' m (Maybe (IxValue m))
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">at</span></a></span><span> </span><span class="annot"><span class="annottext">Index (Map Wallet WalletState)
Wallet
</span><a href="#local-6989586621680828225"><span class="hs-identifier hs-var">wallet</span></a></span><span> </span><span class="annot"><span class="annottext">((Maybe WalletState -&gt; f (Maybe WalletState))
 -&gt; Map Wallet WalletState -&gt; f (Map Wallet WalletState))
-&gt; ((WalletState -&gt; f WalletState)
    -&gt; Maybe WalletState -&gt; f (Maybe WalletState))
-&gt; (WalletState -&gt; f WalletState)
-&gt; Map Wallet WalletState
-&gt; f (Map Wallet WalletState)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">WalletState
-&gt; (WalletState -&gt; Bool) -&gt; Iso' (Maybe WalletState) WalletState
forall a. a -&gt; (a -&gt; Bool) -&gt; Iso' (Maybe a) a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">anon</span></a></span><span> </span><span class="annot"><span class="annottext">WalletState
</span><a href="#local-6989586621680828224"><span class="hs-identifier hs-var">emptyState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; WalletState -&gt; Bool
forall a b. a -&gt; b -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-247"></span><span>    </span><span id="local-6989586621680828224"><span class="annot"><span class="annottext">emptyState :: WalletState
</span><a href="#local-6989586621680828224"><span class="hs-identifier hs-var hs-var">emptyState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WalletState -&gt; Maybe WalletState -&gt; WalletState
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; WalletState
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; WalletState) -&gt; String -&gt; WalletState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;walletState: not a known wallet: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828225"><span class="hs-identifier hs-var">wallet</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; Maybe WalletState
</span><a href="Wallet.Emulator.Wallet.html#emptyWalletState"><span class="hs-identifier hs-var">Wallet.emptyWalletState</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828225"><span class="hs-identifier hs-var">wallet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="hs-comment">-- | Get the blockchain as a list of blocks, starting with the oldest (genesis)</span><span>
</span><span id="line-250"></span><span class="hs-comment">--   block.</span><span>
</span><span id="line-251"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#chainOldestFirst"><span class="hs-identifier hs-type">chainOldestFirst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-type">EmulatorState</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">Blockchain</span></a></span><span>
</span><span id="line-252"></span><span id="chainOldestFirst"><span class="annot"><span class="annottext">chainOldestFirst :: (Blockchain -&gt; f Blockchain) -&gt; EmulatorState -&gt; f EmulatorState
</span><a href="Wallet.Emulator.MultiAgent.html#chainOldestFirst"><span class="hs-identifier hs-var hs-var">chainOldestFirst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ChainState -&gt; f ChainState) -&gt; EmulatorState -&gt; f EmulatorState
Lens' EmulatorState ChainState
</span><a href="Wallet.Emulator.MultiAgent.html#chainState"><span class="hs-identifier hs-var">chainState</span></a></span><span> </span><span class="annot"><span class="annottext">((ChainState -&gt; f ChainState) -&gt; EmulatorState -&gt; f EmulatorState)
-&gt; ((Blockchain -&gt; f Blockchain) -&gt; ChainState -&gt; f ChainState)
-&gt; (Blockchain -&gt; f Blockchain)
-&gt; EmulatorState
-&gt; f EmulatorState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Blockchain -&gt; f Blockchain) -&gt; ChainState -&gt; f ChainState
Lens' ChainState Blockchain
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var">Chain.chainNewestFirst</span></a></span><span> </span><span class="annot"><span class="annottext">((Blockchain -&gt; f Blockchain) -&gt; ChainState -&gt; f ChainState)
-&gt; ((Blockchain -&gt; f Blockchain) -&gt; Blockchain -&gt; f Blockchain)
-&gt; (Blockchain -&gt; f Blockchain)
-&gt; ChainState
-&gt; f ChainState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Blockchain -&gt; f Blockchain) -&gt; Blockchain -&gt; f Blockchain
forall a. Reversing a =&gt; Iso' a a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">reversed</span></a></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#chainUtxo"><span class="hs-identifier hs-type">chainUtxo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">Getter</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-type">EmulatorState</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">AM.AddressMap</span></a></span><span>
</span><span id="line-255"></span><span id="chainUtxo"><span class="annot"><span class="annottext">chainUtxo :: (AddressMap -&gt; f AddressMap) -&gt; EmulatorState -&gt; f EmulatorState
</span><a href="Wallet.Emulator.MultiAgent.html#chainUtxo"><span class="hs-identifier hs-var hs-var">chainUtxo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ChainState -&gt; f ChainState) -&gt; EmulatorState -&gt; f EmulatorState
Lens' EmulatorState ChainState
</span><a href="Wallet.Emulator.MultiAgent.html#chainState"><span class="hs-identifier hs-var">chainState</span></a></span><span> </span><span class="annot"><span class="annottext">((ChainState -&gt; f ChainState) -&gt; EmulatorState -&gt; f EmulatorState)
-&gt; ((AddressMap -&gt; f AddressMap) -&gt; ChainState -&gt; f ChainState)
-&gt; (AddressMap -&gt; f AddressMap)
-&gt; EmulatorState
-&gt; f EmulatorState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Blockchain -&gt; f Blockchain) -&gt; ChainState -&gt; f ChainState
Lens' ChainState Blockchain
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var">Chain.chainNewestFirst</span></a></span><span> </span><span class="annot"><span class="annottext">((Blockchain -&gt; f Blockchain) -&gt; ChainState -&gt; f ChainState)
-&gt; ((AddressMap -&gt; f AddressMap) -&gt; Blockchain -&gt; f Blockchain)
-&gt; (AddressMap -&gt; f AddressMap)
-&gt; ChainState
-&gt; f ChainState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Blockchain -&gt; AddressMap)
-&gt; (AddressMap -&gt; f AddressMap) -&gt; Blockchain -&gt; f Blockchain
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Profunctor p, Contravariant f) =&gt;
(s -&gt; a) -&gt; Optic' p f s a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">Blockchain -&gt; AddressMap
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">AM.fromChain</span></a></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="hs-comment">-- | Get a map with the total value of each wallet's &quot;own funds&quot;.</span><span>
</span><span id="line-258"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#fundsDistribution"><span class="hs-identifier hs-type">fundsDistribution</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-type">EmulatorState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span>
</span><span id="line-259"></span><span id="fundsDistribution"><span class="annot"><span class="annottext">fundsDistribution :: EmulatorState -&gt; Map Wallet Value
</span><a href="Wallet.Emulator.MultiAgent.html#fundsDistribution"><span class="hs-identifier hs-var hs-var">fundsDistribution</span></a></span></span><span> </span><span id="local-6989586621680828214"><span class="annot"><span class="annottext">EmulatorState
</span><a href="#local-6989586621680828214"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680828213"><span class="annot"><span class="annottext">fullState :: AddressMap
</span><a href="#local-6989586621680828213"><span class="hs-identifier hs-var hs-var">fullState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Getting AddressMap EmulatorState AddressMap
-&gt; EmulatorState -&gt; AddressMap
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="annot"><span class="annottext">Getting AddressMap EmulatorState AddressMap
Getter EmulatorState AddressMap
</span><a href="Wallet.Emulator.MultiAgent.html#chainUtxo"><span class="hs-identifier hs-var">chainUtxo</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorState
</span><a href="#local-6989586621680828214"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-261"></span><span>        </span><span id="local-6989586621680828212"><span class="annot"><span class="annottext">wallets :: [Wallet]
</span><a href="#local-6989586621680828212"><span class="hs-identifier hs-var hs-var">wallets</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EmulatorState
</span><a href="#local-6989586621680828214"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorState
-&gt; Getting (Endo [Wallet]) EmulatorState Wallet -&gt; [Wallet]
forall s a. s -&gt; Getting (Endo [a]) s a -&gt; [a]
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-operator hs-var">^..</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Wallet WalletState
 -&gt; Const (Endo [Wallet]) (Map Wallet WalletState))
-&gt; EmulatorState -&gt; Const (Endo [Wallet]) EmulatorState
Lens' EmulatorState (Map Wallet WalletState)
</span><a href="Wallet.Emulator.MultiAgent.html#walletStates"><span class="hs-identifier hs-var">walletStates</span></a></span><span> </span><span class="annot"><span class="annottext">((Map Wallet WalletState
  -&gt; Const (Endo [Wallet]) (Map Wallet WalletState))
 -&gt; EmulatorState -&gt; Const (Endo [Wallet]) EmulatorState)
-&gt; ((Wallet -&gt; Const (Endo [Wallet]) Wallet)
    -&gt; Map Wallet WalletState
    -&gt; Const (Endo [Wallet]) (Map Wallet WalletState))
-&gt; Getting (Endo [Wallet]) EmulatorState Wallet
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Wallet WalletState -&gt; [Wallet])
-&gt; Optic'
     (-&gt;) (Const (Endo [Wallet])) (Map Wallet WalletState) [Wallet]
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Profunctor p, Contravariant f) =&gt;
(s -&gt; a) -&gt; Optic' p f s a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">Map Wallet WalletState -&gt; [Wallet]
forall k a. Map k a -&gt; [k]
</span><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-var">Map.keys</span></a></span><span> </span><span class="annot"><span class="annottext">Optic'
  (-&gt;) (Const (Endo [Wallet])) (Map Wallet WalletState) [Wallet]
-&gt; ((Wallet -&gt; Const (Endo [Wallet]) Wallet)
    -&gt; [Wallet] -&gt; Const (Endo [Wallet]) [Wallet])
-&gt; (Wallet -&gt; Const (Endo [Wallet]) Wallet)
-&gt; Map Wallet WalletState
-&gt; Const (Endo [Wallet]) (Map Wallet WalletState)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Wallet -&gt; Const (Endo [Wallet]) Wallet)
-&gt; [Wallet] -&gt; Const (Endo [Wallet]) [Wallet]
forall (f :: * -&gt; *) a. Foldable f =&gt; IndexedFold Int (f a) a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">folded</span></a></span><span>
</span><span id="line-262"></span><span>        </span><span id="local-6989586621680828210"><span class="annot"><span class="annottext">walletFunds :: [(Wallet, Value)]
</span><a href="#local-6989586621680828210"><span class="hs-identifier hs-var hs-var">walletFunds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Wallet -&gt; (Wallet, Value)) -&gt; [Wallet] -&gt; [(Wallet, Value)])
-&gt; [Wallet] -&gt; (Wallet -&gt; (Wallet, Value)) -&gt; [(Wallet, Value)]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">(Wallet -&gt; (Wallet, Value)) -&gt; [Wallet] -&gt; [(Wallet, Value)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">[Wallet]
</span><a href="#local-6989586621680828212"><span class="hs-identifier hs-var">wallets</span></a></span><span> </span><span class="annot"><span class="annottext">((Wallet -&gt; (Wallet, Value)) -&gt; [(Wallet, Value)])
-&gt; (Wallet -&gt; (Wallet, Value)) -&gt; [(Wallet, Value)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680828208"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828208"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-263"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828208"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">((CardanoTx, TxOut) -&gt; Value)
-&gt; Map TxOutRef (CardanoTx, TxOut) -&gt; Value
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">foldMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOut -&gt; Value
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">txOutValue</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOut -&gt; Value)
-&gt; ((CardanoTx, TxOut) -&gt; TxOut) -&gt; (CardanoTx, TxOut) -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(CardanoTx, TxOut) -&gt; TxOut
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Map TxOutRef (CardanoTx, TxOut) -&gt; Value)
-&gt; Map TxOutRef (CardanoTx, TxOut) -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Map TxOutRef (CardanoTx, TxOut))
  AddressMap
  (Map TxOutRef (CardanoTx, TxOut))
-&gt; AddressMap -&gt; Map TxOutRef (CardanoTx, TxOut)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoAddress
-&gt; Lens' AddressMap (Map TxOutRef (CardanoTx, TxOut))
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">AM.fundsAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; CardanoAddress
</span><a href="Wallet.Emulator.Wallet.html#mockWalletAddress"><span class="hs-identifier hs-var">Wallet.mockWalletAddress</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828208"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AddressMap
</span><a href="#local-6989586621680828213"><span class="hs-identifier hs-var">fullState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[(Wallet, Value)] -&gt; Map Wallet Value
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-var">Map.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">[(Wallet, Value)]
</span><a href="#local-6989586621680828210"><span class="hs-identifier hs-var">walletFunds</span></a></span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-comment">-- | Get the emulator log.</span><span>
</span><span id="line-267"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#emLog"><span class="hs-identifier hs-type">emLog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-type">EmulatorState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMessage</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent"><span class="hs-identifier hs-type">EmulatorEvent</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-268"></span><span id="emLog"><span class="annot"><span class="annottext">emLog :: EmulatorState -&gt; [LogMessage EmulatorEvent]
</span><a href="Wallet.Emulator.MultiAgent.html#emLog"><span class="hs-identifier hs-var hs-var">emLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Getting
  [LogMessage EmulatorEvent] EmulatorState [LogMessage EmulatorEvent]
-&gt; EmulatorState -&gt; [LogMessage EmulatorEvent]
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  [LogMessage EmulatorEvent] EmulatorState [LogMessage EmulatorEvent]
Lens' EmulatorState [LogMessage EmulatorEvent]
</span><a href="Wallet.Emulator.MultiAgent.html#emulatorLog"><span class="hs-identifier hs-var">emulatorLog</span></a></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#emptyEmulatorState"><span class="hs-identifier hs-type">emptyEmulatorState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-type">EmulatorState</span></a></span><span>
</span><span id="line-271"></span><span id="emptyEmulatorState"><span class="annot"><span class="annottext">emptyEmulatorState :: EmulatorState
</span><a href="Wallet.Emulator.MultiAgent.html#emptyEmulatorState"><span class="hs-identifier hs-var hs-var">emptyEmulatorState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EmulatorState :: ChainState
-&gt; Map Wallet WalletState
-&gt; [LogMessage EmulatorEvent]
-&gt; EmulatorState
</span><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-type">EmulatorState</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-272"></span><span>    </span><span class="annot"><span class="annottext">_chainState :: ChainState
</span><a href="Wallet.Emulator.MultiAgent.html#_chainState"><span class="hs-identifier hs-var">_chainState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ChainState
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var">Chain.emptyChainState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-273"></span><span>    </span><span class="annot"><span class="annottext">_walletStates :: Map Wallet WalletState
</span><a href="Wallet.Emulator.MultiAgent.html#_walletStates"><span class="hs-identifier hs-var">_walletStates</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Wallet WalletState
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-274"></span><span>    </span><span class="annot"><span class="annottext">_emulatorLog :: [LogMessage EmulatorEvent]
</span><a href="Wallet.Emulator.MultiAgent.html#_emulatorLog"><span class="hs-identifier hs-var">_emulatorLog</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LogMessage EmulatorEvent]
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="hs-comment">-- | Initialise the emulator state with a blockchain.</span><span>
</span><span id="line-278"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#emulatorState"><span class="hs-identifier hs-type">emulatorState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">Blockchain</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-type">EmulatorState</span></a></span><span>
</span><span id="line-279"></span><span id="emulatorState"><span class="annot"><span class="annottext">emulatorState :: Blockchain -&gt; EmulatorState
</span><a href="Wallet.Emulator.MultiAgent.html#emulatorState"><span class="hs-identifier hs-var hs-var">emulatorState</span></a></span></span><span> </span><span id="local-6989586621680828198"><span class="annot"><span class="annottext">Blockchain
</span><a href="#local-6989586621680828198"><span class="hs-identifier hs-var">bc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EmulatorState
</span><a href="Wallet.Emulator.MultiAgent.html#emptyEmulatorState"><span class="hs-identifier hs-var">emptyEmulatorState</span></a></span><span>
</span><span id="line-280"></span><span>    </span><span class="annot"><span class="annottext">EmulatorState -&gt; (EmulatorState -&gt; EmulatorState) -&gt; EmulatorState
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainState -&gt; Identity ChainState)
-&gt; EmulatorState -&gt; Identity EmulatorState
Lens' EmulatorState ChainState
</span><a href="Wallet.Emulator.MultiAgent.html#chainState"><span class="hs-identifier hs-var">chainState</span></a></span><span> </span><span class="annot"><span class="annottext">((ChainState -&gt; Identity ChainState)
 -&gt; EmulatorState -&gt; Identity EmulatorState)
-&gt; ((Blockchain -&gt; Identity Blockchain)
    -&gt; ChainState -&gt; Identity ChainState)
-&gt; (Blockchain -&gt; Identity Blockchain)
-&gt; EmulatorState
-&gt; Identity EmulatorState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Blockchain -&gt; Identity Blockchain)
-&gt; ChainState -&gt; Identity ChainState
Lens' ChainState Blockchain
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var">Chain.chainNewestFirst</span></a></span><span> </span><span class="annot"><span class="annottext">((Blockchain -&gt; Identity Blockchain)
 -&gt; EmulatorState -&gt; Identity EmulatorState)
-&gt; Blockchain -&gt; EmulatorState -&gt; EmulatorState
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Blockchain
</span><a href="#local-6989586621680828198"><span class="hs-identifier hs-var">bc</span></a></span><span>
</span><span id="line-281"></span><span>    </span><span class="annot"><span class="annottext">EmulatorState -&gt; (EmulatorState -&gt; EmulatorState) -&gt; EmulatorState
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainState -&gt; Identity ChainState)
-&gt; EmulatorState -&gt; Identity EmulatorState
Lens' EmulatorState ChainState
</span><a href="Wallet.Emulator.MultiAgent.html#chainState"><span class="hs-identifier hs-var">chainState</span></a></span><span> </span><span class="annot"><span class="annottext">((ChainState -&gt; Identity ChainState)
 -&gt; EmulatorState -&gt; Identity EmulatorState)
-&gt; ((UtxoIndex -&gt; Identity UtxoIndex)
    -&gt; ChainState -&gt; Identity ChainState)
-&gt; (UtxoIndex -&gt; Identity UtxoIndex)
-&gt; EmulatorState
-&gt; Identity EmulatorState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(UtxoIndex -&gt; Identity UtxoIndex)
-&gt; ChainState -&gt; Identity ChainState
Lens' ChainState UtxoIndex
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var">Chain.index</span></a></span><span> </span><span class="annot"><span class="annottext">((UtxoIndex -&gt; Identity UtxoIndex)
 -&gt; EmulatorState -&gt; Identity EmulatorState)
-&gt; UtxoIndex -&gt; EmulatorState -&gt; EmulatorState
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Blockchain -&gt; UtxoIndex
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Index.initialise</span></a></span><span> </span><span class="annot"><span class="annottext">Blockchain
</span><a href="#local-6989586621680828198"><span class="hs-identifier hs-var">bc</span></a></span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span class="hs-comment">-- | Initialise the emulator state with a pool of pending transactions.</span><span>
</span><span id="line-284"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#emulatorStatePool"><span class="hs-identifier hs-type">emulatorStatePool</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">Chain.TxPool</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-type">EmulatorState</span></a></span><span>
</span><span id="line-285"></span><span id="emulatorStatePool"><span class="annot"><span class="annottext">emulatorStatePool :: TxPool -&gt; EmulatorState
</span><a href="Wallet.Emulator.MultiAgent.html#emulatorStatePool"><span class="hs-identifier hs-var hs-var">emulatorStatePool</span></a></span></span><span> </span><span id="local-6989586621680828194"><span class="annot"><span class="annottext">TxPool
</span><a href="#local-6989586621680828194"><span class="hs-identifier hs-var">tp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EmulatorState
</span><a href="Wallet.Emulator.MultiAgent.html#emptyEmulatorState"><span class="hs-identifier hs-var">emptyEmulatorState</span></a></span><span>
</span><span id="line-286"></span><span>    </span><span class="annot"><span class="annottext">EmulatorState -&gt; (EmulatorState -&gt; EmulatorState) -&gt; EmulatorState
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainState -&gt; Identity ChainState)
-&gt; EmulatorState -&gt; Identity EmulatorState
Lens' EmulatorState ChainState
</span><a href="Wallet.Emulator.MultiAgent.html#chainState"><span class="hs-identifier hs-var">chainState</span></a></span><span> </span><span class="annot"><span class="annottext">((ChainState -&gt; Identity ChainState)
 -&gt; EmulatorState -&gt; Identity EmulatorState)
-&gt; ((TxPool -&gt; Identity TxPool)
    -&gt; ChainState -&gt; Identity ChainState)
-&gt; (TxPool -&gt; Identity TxPool)
-&gt; EmulatorState
-&gt; Identity EmulatorState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(TxPool -&gt; Identity TxPool) -&gt; ChainState -&gt; Identity ChainState
Lens' ChainState TxPool
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var">Chain.txPool</span></a></span><span> </span><span class="annot"><span class="annottext">((TxPool -&gt; Identity TxPool)
 -&gt; EmulatorState -&gt; Identity EmulatorState)
-&gt; TxPool -&gt; EmulatorState -&gt; EmulatorState
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxPool
</span><a href="#local-6989586621680828194"><span class="hs-identifier hs-var">tp</span></a></span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span class="hs-comment">{- Note [Creating wallets with multiple outputs]

Every transaction needs a collateral input, which is a wallet output that gets spent
when the transaction fails to validate on chain (phase 2 validation). This output is required
to be an Ada-only output. To make sure we always have an Ada-only output available during emulation,
we create 10 Ada-only outputs per wallet here.
-}</span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span class="hs-comment">-- | Initialise the emulator state with a single pending transaction that</span><span>
</span><span id="line-297"></span><span class="hs-comment">--   creates the initial distribution of funds to public key addresses.</span><span>
</span><span id="line-298"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#emulatorStateInitialDist"><span class="hs-identifier hs-type">emulatorStateInitialDist</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">Params</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">PaymentPubKeyHash</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">ToCardanoError</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-type">EmulatorState</span></a></span><span>
</span><span id="line-299"></span><span id="emulatorStateInitialDist"><span class="annot"><span class="annottext">emulatorStateInitialDist :: Params
-&gt; Map PaymentPubKeyHash Value
-&gt; Either ToCardanoError EmulatorState
</span><a href="Wallet.Emulator.MultiAgent.html#emulatorStateInitialDist"><span class="hs-identifier hs-var hs-var">emulatorStateInitialDist</span></a></span></span><span> </span><span id="local-6989586621680828191"><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621680828191"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621680828190"><span class="annot"><span class="annottext">Map PaymentPubKeyHash Value
</span><a href="#local-6989586621680828190"><span class="hs-identifier hs-var">mp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-300"></span><span>    </span><span id="local-6989586621680828189"><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621680828189"><span class="hs-identifier hs-var">minAdaEmptyTxOut</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either ToCardanoError Ada
</span><a href="#local-6989586621680828188"><span class="hs-identifier hs-var">mMinAdaTxOut</span></a></span><span>
</span><span id="line-301"></span><span>    </span><span id="local-6989586621680828187"><span class="annot"><span class="annottext">[TxOut CtxTx BabbageEra]
</span><a href="#local-6989586621680828187"><span class="hs-identifier hs-var">outs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TxOut -&gt; Either ToCardanoError (TxOut CtxTx BabbageEra))
-&gt; [TxOut] -&gt; Either ToCardanoError [TxOut CtxTx BabbageEra]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NetworkId
-&gt; TxOut -&gt; Either ToCardanoError (TxOut CtxTx BabbageEra)
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">toCardanoTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">(NetworkId
 -&gt; TxOut -&gt; Either ToCardanoError (TxOut CtxTx BabbageEra))
-&gt; NetworkId
-&gt; TxOut
-&gt; Either ToCardanoError (TxOut CtxTx BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Params -&gt; NetworkId
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var hs-var">pNetworkId</span></a></span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621680828191"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([TxOut] -&gt; Either ToCardanoError [TxOut CtxTx BabbageEra])
-&gt; [TxOut] -&gt; Either ToCardanoError [TxOut CtxTx BabbageEra]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map PaymentPubKeyHash Value -&gt; [(PaymentPubKeyHash, Value)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Map PaymentPubKeyHash Value
</span><a href="#local-6989586621680828190"><span class="hs-identifier hs-var">mp</span></a></span><span> </span><span class="annot"><span class="annottext">[(PaymentPubKeyHash, Value)]
-&gt; ((PaymentPubKeyHash, Value) -&gt; [TxOut]) -&gt; [TxOut]
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Ada -&gt; (PaymentPubKeyHash, Value) -&gt; [TxOut]
</span><a href="#local-6989586621680828183"><span class="hs-identifier hs-var">mkOutputs</span></a></span><span> </span><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621680828189"><span class="hs-identifier hs-var">minAdaEmptyTxOut</span></a></span><span>
</span><span id="line-302"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680828182"><span class="annot"><span class="annottext">tx :: Tx
</span><a href="#local-6989586621680828182"><span class="hs-identifier hs-var hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-303"></span><span>           </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">txOutputs :: [TxOut]
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">txOutputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxOut CtxTx BabbageEra -&gt; TxOut
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">TxOut</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOut CtxTx BabbageEra -&gt; TxOut)
-&gt; [TxOut CtxTx BabbageEra] -&gt; [TxOut]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[TxOut CtxTx BabbageEra]
</span><a href="#local-6989586621680828187"><span class="hs-identifier hs-var">outs</span></a></span><span>
</span><span id="line-304"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txMint :: Value
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">txMint</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map PaymentPubKeyHash Value -&gt; Value
forall (t :: * -&gt; *) m. (Foldable t, Monoid m) =&gt; t m -&gt; m
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fold</span></a></span><span> </span><span class="annot"><span class="annottext">Map PaymentPubKeyHash Value
</span><a href="#local-6989586621680828190"><span class="hs-identifier hs-var">mp</span></a></span><span>
</span><span id="line-305"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txValidRange :: SlotRange
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">txValidRange</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotRange
</span><a href="Wallet.API.html#defaultSlotRange"><span class="hs-identifier hs-var">WAPI.defaultSlotRange</span></a></span><span>
</span><span id="line-306"></span><span>           </span><span class="hs-special">}</span><span>
</span><span id="line-307"></span><span>        </span><span id="local-6989586621680828175"><span class="annot"><span class="annottext">cUtxoIndex :: UTxO (BabbageEra StandardCrypto)
</span><a href="#local-6989586621680828175"><span class="hs-identifier hs-var hs-var">cUtxoIndex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Either ValidationErrorInPhase ToCardanoError
 -&gt; UTxO (BabbageEra StandardCrypto))
-&gt; (UTxO (BabbageEra StandardCrypto)
    -&gt; UTxO (BabbageEra StandardCrypto))
-&gt; Either
     (Either ValidationErrorInPhase ToCardanoError)
     (UTxO (BabbageEra StandardCrypto))
-&gt; UTxO (BabbageEra StandardCrypto)
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; UTxO (BabbageEra StandardCrypto)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; UTxO (BabbageEra StandardCrypto))
-&gt; (Either ValidationErrorInPhase ToCardanoError -&gt; String)
-&gt; Either ValidationErrorInPhase ToCardanoError
-&gt; UTxO (BabbageEra StandardCrypto)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either ValidationErrorInPhase ToCardanoError -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UTxO (BabbageEra StandardCrypto)
-&gt; UTxO (BabbageEra StandardCrypto)
forall a. a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">(Either
   (Either ValidationErrorInPhase ToCardanoError)
   (UTxO (BabbageEra StandardCrypto))
 -&gt; UTxO (BabbageEra StandardCrypto))
-&gt; Either
     (Either ValidationErrorInPhase ToCardanoError)
     (UTxO (BabbageEra StandardCrypto))
-&gt; UTxO (BabbageEra StandardCrypto)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UtxoIndex
-&gt; Either
     (Either ValidationErrorInPhase ToCardanoError)
     (UTxO (BabbageEra StandardCrypto))
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">fromPlutusIndex</span></a></span><span> </span><span class="annot"><span class="annottext">UtxoIndex
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-308"></span><span>        </span><span id="local-6989586621680828172"><span class="annot"><span class="annottext">cTx :: CardanoTx
</span><a href="#local-6989586621680828172"><span class="hs-identifier hs-var hs-var">cTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Params
-&gt; UTxO (BabbageEra StandardCrypto)
-&gt; Tx
-&gt; Map PaymentPubKey PaymentPrivateKey
-&gt; CardanoTx
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var">Validation.fromPlutusTxSigned</span></a></span><span> </span><span class="annot"><span class="annottext">Params
forall a. Default a =&gt; a
</span><a href="../file:///nix/store/ibwdmf5kswrsjw9gmzksnspzzk6vivp5-data-default-class-lib-data-default-class-0.1.2.0-haddock-doc/share/doc/data-default-class/html/src"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO (BabbageEra StandardCrypto)
</span><a href="#local-6989586621680828175"><span class="hs-identifier hs-var">cUtxoIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Tx
</span><a href="#local-6989586621680828182"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">Map PaymentPubKey PaymentPrivateKey
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">CW.knownPaymentKeys</span></a></span><span>
</span><span id="line-309"></span><span>    </span><span class="annot"><span class="annottext">EmulatorState -&gt; Either ToCardanoError EmulatorState
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(EmulatorState -&gt; Either ToCardanoError EmulatorState)
-&gt; EmulatorState -&gt; Either ToCardanoError EmulatorState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxPool -&gt; EmulatorState
</span><a href="Wallet.Emulator.MultiAgent.html#emulatorStatePool"><span class="hs-identifier hs-var">emulatorStatePool</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680828172"><span class="hs-identifier hs-var">cTx</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-310"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-311"></span><span>        </span><span class="hs-comment">-- we start with an empty TxOut and we adjust it to be sure that the containted Adas fit the size</span><span>
</span><span id="line-312"></span><span>        </span><span class="hs-comment">-- of the TxOut</span><span>
</span><span id="line-313"></span><span>        </span><span id="local-6989586621680828188"><span class="annot"><span class="annottext">mMinAdaTxOut :: Either ToCardanoError Ada
</span><a href="#local-6989586621680828188"><span class="hs-identifier hs-var hs-var">mMinAdaTxOut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-314"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680828169"><span class="annot"><span class="annottext">k :: PaymentPubKeyHash
</span><a href="#local-6989586621680828169"><span class="hs-identifier hs-var hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PaymentPubKeyHash, Value) -&gt; PaymentPubKeyHash
forall a b. (a, b) -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">((PaymentPubKeyHash, Value) -&gt; PaymentPubKeyHash)
-&gt; (PaymentPubKeyHash, Value) -&gt; PaymentPubKeyHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(PaymentPubKeyHash, Value)] -&gt; (PaymentPubKeyHash, Value)
forall a. [a] -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">([(PaymentPubKeyHash, Value)] -&gt; (PaymentPubKeyHash, Value))
-&gt; [(PaymentPubKeyHash, Value)] -&gt; (PaymentPubKeyHash, Value)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map PaymentPubKeyHash Value -&gt; [(PaymentPubKeyHash, Value)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../file:///nix/store/5giw0zbshrdz1qlvzc0csv9mspljr1ax-containers-lib-containers-0.6.5.1-haddock-doc/share/doc/containers/html/src"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Map PaymentPubKeyHash Value
</span><a href="#local-6989586621680828190"><span class="hs-identifier hs-var">mp</span></a></span><span>
</span><span id="line-315"></span><span>          </span><span id="local-6989586621680828167"><span class="annot"><span class="annottext">TxOut CtxTx BabbageEra
</span><a href="#local-6989586621680828167"><span class="hs-identifier hs-var">emptyTxOut</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NetworkId
-&gt; TxOut -&gt; Either ToCardanoError (TxOut CtxTx BabbageEra)
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">toCardanoTxOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Params -&gt; NetworkId
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var hs-var">pNetworkId</span></a></span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621680828191"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TxOut -&gt; Either ToCardanoError (TxOut CtxTx BabbageEra))
-&gt; TxOut -&gt; Either ToCardanoError (TxOut CtxTx BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PaymentPubKeyHash -&gt; Value -&gt; TxOut
</span><a href="#local-6989586621680828166"><span class="hs-identifier hs-var">mkOutput</span></a></span><span> </span><span class="annot"><span class="annottext">PaymentPubKeyHash
</span><a href="#local-6989586621680828169"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Value
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-316"></span><span>          </span><span class="annot"><span class="annottext">Ada -&gt; Either ToCardanoError Ada
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Ada -&gt; Either ToCardanoError Ada)
-&gt; Ada -&gt; Either ToCardanoError Ada
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PParams (BabbageEra StandardCrypto) -&gt; TxOut -&gt; Ada
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">minAdaTxOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Params -&gt; PParams (BabbageEra StandardCrypto)
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var hs-var">emulatorPParams</span></a></span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621680828191"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOut CtxTx BabbageEra -&gt; TxOut
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">TxOut</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut CtxTx BabbageEra
</span><a href="#local-6989586621680828167"><span class="hs-identifier hs-var">emptyTxOut</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-317"></span><span>        </span><span class="hs-comment">-- See [Creating wallets with multiple outputs]</span><span>
</span><span id="line-318"></span><span>        </span><span id="local-6989586621680828183"><span class="annot"><span class="annottext">mkOutputs :: Ada -&gt; (PaymentPubKeyHash, Value) -&gt; [TxOut]
</span><a href="#local-6989586621680828183"><span class="hs-identifier hs-var hs-var">mkOutputs</span></a></span></span><span> </span><span id="local-6989586621680828163"><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621680828163"><span class="hs-identifier hs-var">minAda</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680828162"><span class="annot"><span class="annottext">PaymentPubKeyHash
</span><a href="#local-6989586621680828162"><span class="hs-identifier hs-var">key</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680828161"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828161"><span class="hs-identifier hs-var">vl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PaymentPubKeyHash -&gt; Value -&gt; TxOut
</span><a href="#local-6989586621680828166"><span class="hs-identifier hs-var">mkOutput</span></a></span><span> </span><span class="annot"><span class="annottext">PaymentPubKeyHash
</span><a href="#local-6989586621680828162"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; TxOut) -&gt; [Value] -&gt; [TxOut]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Ada -&gt; [Value]
</span><a href="#local-6989586621680828160"><span class="hs-identifier hs-var">splitInto10</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828161"><span class="hs-identifier hs-var">vl</span></a></span><span> </span><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621680828163"><span class="hs-identifier hs-var">minAda</span></a></span><span>
</span><span id="line-319"></span><span>        </span><span id="local-6989586621680828160"><span class="annot"><span class="annottext">splitInto10 :: Value -&gt; Ada -&gt; [Value]
</span><a href="#local-6989586621680828160"><span class="hs-identifier hs-var hs-var">splitInto10</span></a></span></span><span> </span><span id="local-6989586621680828159"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828159"><span class="hs-identifier hs-var">vl</span></a></span></span><span> </span><span id="local-6989586621680828158"><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621680828158"><span class="hs-identifier hs-var">minAda</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621680828157"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Ada -&gt; Ada -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Ada
</span><span class="hs-number">1</span></span><span>
</span><span id="line-320"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828159"><span class="hs-identifier hs-var">vl</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-321"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Value -&gt; [Value]
forall a. Int -&gt; a -&gt; [a]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">replicate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ada -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621680828157"><span class="hs-identifier hs-var">count</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ada -&gt; Value
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Ada.toValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621680828153"><span class="hs-identifier hs-var">ada</span></a></span><span> </span><span class="annot"><span class="annottext">Ada -&gt; Ada -&gt; Ada
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`div`</span></a></span><span> </span><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621680828157"><span class="hs-identifier hs-var">count</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Value] -&gt; [Value] -&gt; [Value]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621680828151"><span class="hs-identifier hs-var">remainder</span></a></span><span>
</span><span id="line-322"></span><span>            </span><span class="hs-keyword">where</span><span>
</span><span id="line-323"></span><span>                </span><span id="local-6989586621680828153"><span class="annot"><span class="annottext">ada :: Ada
</span><a href="#local-6989586621680828153"><span class="hs-identifier hs-var hs-var">ada</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Bool
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Value.isAdaOnlyValue</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828159"><span class="hs-identifier hs-var">vl</span></a></span><span>
</span><span id="line-324"></span><span>                    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Ada
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Ada.fromValue</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828159"><span class="hs-identifier hs-var">vl</span></a></span><span>
</span><span id="line-325"></span><span>                    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Ada
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Ada.fromValue</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828159"><span class="hs-identifier hs-var">vl</span></a></span><span> </span><span class="annot"><span class="annottext">Ada -&gt; Ada -&gt; Ada
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621680828158"><span class="hs-identifier hs-var">minAda</span></a></span><span>
</span><span id="line-326"></span><span>                </span><span class="hs-comment">-- Make sure we don't make the outputs too small</span><span>
</span><span id="line-327"></span><span>                </span><span id="local-6989586621680828157"><span class="annot"><span class="annottext">count :: Ada
</span><a href="#local-6989586621680828157"><span class="hs-identifier hs-var hs-var">count</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ada -&gt; Ada -&gt; Ada
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">min</span></a></span><span> </span><span class="annot"><span class="annottext">Ada
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(Ada -&gt; Ada) -&gt; Ada -&gt; Ada
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621680828153"><span class="hs-identifier hs-var">ada</span></a></span><span> </span><span class="annot"><span class="annottext">Ada -&gt; Ada -&gt; Ada
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`div`</span></a></span><span> </span><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621680828158"><span class="hs-identifier hs-var">minAda</span></a></span><span>
</span><span id="line-328"></span><span>                </span><span id="local-6989586621680828151"><span class="annot"><span class="annottext">remainder :: [Value]
</span><a href="#local-6989586621680828151"><span class="hs-identifier hs-var hs-var">remainder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828159"><span class="hs-identifier hs-var">vl</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Value
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Ada -&gt; Value
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Ada.toValue</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621680828153"><span class="hs-identifier hs-var">ada</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Bool
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Value.isAdaOnlyValue</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828159"><span class="hs-identifier hs-var">vl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-329"></span><span>        </span><span id="local-6989586621680828166"><span class="annot"><span class="annottext">mkOutput :: PaymentPubKeyHash -&gt; Value -&gt; TxOut
</span><a href="#local-6989586621680828166"><span class="hs-identifier hs-var hs-var">mkOutput</span></a></span></span><span> </span><span id="local-6989586621680828146"><span class="annot"><span class="annottext">PaymentPubKeyHash
</span><a href="#local-6989586621680828146"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span id="local-6989586621680828145"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828145"><span class="hs-identifier hs-var">vl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; PubKeyHash -&gt; TxOut
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var">V2.pubKeyHashTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828145"><span class="hs-identifier hs-var">vl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PaymentPubKeyHash -&gt; PubKeyHash
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var hs-var">unPaymentPubKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">PaymentPubKeyHash
</span><a href="#local-6989586621680828146"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span class="hs-keyword">type</span><span> </span><span id="MultiAgentEffs"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffs"><span class="hs-identifier hs-var">MultiAgentEffs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-332"></span><span>    </span><span class="hs-special">'</span><span class="hs-special">[</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorState"><span class="hs-identifier hs-type">EmulatorState</span></a></span><span>
</span><span id="line-333"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-type">LogMsg</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span>
</span><span id="line-334"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Error.html#WalletAPIError"><span class="hs-identifier hs-type">WAPI.WalletAPIError</span></a></span><span>
</span><span id="line-335"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-chain-index-core/html/src"><span class="hs-identifier hs-type">ChainIndex.ChainIndexError</span></a></span><span>
</span><span id="line-336"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><a href="Plutus.Contract.Error.html#AssertionError"><span class="hs-identifier hs-type">AssertionError</span></a></span><span>
</span><span id="line-337"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">Chain.ChainEffect</span></a></span><span>
</span><span id="line-338"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-type">Chain.ChainControlEffect</span></a></span><span>
</span><span id="line-339"></span><span>     </span><span class="hs-special">]</span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#handleMultiAgentControl"><span class="hs-identifier hs-type">handleMultiAgentControl</span></a></span><span>
</span><span id="line-342"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680828139"><span class="annot"><a href="#local-6989586621680828139"><span class="hs-identifier hs-type">effs</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Members</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffs"><span class="hs-identifier hs-type">MultiAgentEffs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828139"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-343"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentControlEffect"><span class="hs-identifier hs-type">MultiAgentControlEffect</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621680828139"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/nkim7nifcqpdb4r433zhbv94ima3fwqb-natural-transformation-lib-natural-transformation-0.4-haddock-doc/share/doc/natural-transformation/html/src"><span class="hs-operator hs-type">~&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828139"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-344"></span><span id="handleMultiAgentControl"><span class="annot"><span class="annottext">handleMultiAgentControl :: Eff (MultiAgentControlEffect : effs) ~&gt; Eff effs
</span><a href="Wallet.Emulator.MultiAgent.html#handleMultiAgentControl"><span class="hs-identifier hs-var hs-var">handleMultiAgentControl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MultiAgentControlEffect ~&gt; Eff effs)
-&gt; Eff (MultiAgentControlEffect : effs) ~&gt; Eff effs
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="annot"><span class="annottext">((MultiAgentControlEffect ~&gt; Eff effs)
 -&gt; Eff (MultiAgentControlEffect : effs) ~&gt; Eff effs)
-&gt; (MultiAgentControlEffect ~&gt; Eff effs)
-&gt; Eff (MultiAgentControlEffect : effs) ~&gt; Eff effs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-345"></span><span>    </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#WalletControlAction"><span class="hs-identifier hs-type">WalletControlAction</span></a></span><span> </span><span id="local-6989586621680828138"><span class="annot"><a href="#local-6989586621680828138"><span class="hs-identifier hs-var">wallet</span></a></span></span><span> </span><span id="local-6989586621680828137"><span class="annot"><a href="#local-6989586621680828137"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-346"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-347"></span><span>            </span><span class="annot"><a href="#local-6989586621680828136"><span class="hs-identifier hs-type">p1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">AReview</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#WalletEvent"><span class="hs-identifier hs-type">Wallet.WalletEvent</span></a></span><span>
</span><span id="line-348"></span><span>            </span><span id="local-6989586621680828136"><span class="annot"><span class="annottext">p1 :: AReview EmulatorEvent' WalletEvent
</span><a href="#local-6989586621680828136"><span class="hs-identifier hs-var hs-var">p1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Prism' EmulatorEvent' WalletEvent
</span><a href="Wallet.Emulator.MultiAgent.html#walletEvent"><span class="hs-identifier hs-var">walletEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828138"><span class="hs-identifier hs-var">wallet</span></a></span><span>
</span><span id="line-349"></span><span>            </span><span class="annot"><a href="#local-6989586621680828135"><span class="hs-identifier hs-type">p2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">AReview</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.NodeClient.html#NodeClientEvent"><span class="hs-identifier hs-type">NC.NodeClientEvent</span></a></span><span>
</span><span id="line-350"></span><span>            </span><span id="local-6989586621680828135"><span class="annot"><span class="annottext">p2 :: AReview EmulatorEvent' NodeClientEvent
</span><a href="#local-6989586621680828135"><span class="hs-identifier hs-var hs-var">p2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Prism' EmulatorEvent' NodeClientEvent
</span><a href="Wallet.Emulator.MultiAgent.html#walletClientEvent"><span class="hs-identifier hs-var">walletClientEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828138"><span class="hs-identifier hs-var">wallet</span></a></span><span>
</span><span id="line-351"></span><span>            </span><span class="annot"><a href="#local-6989586621680828134"><span class="hs-identifier hs-type">p3</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">AReview</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-chain-index-core/html/src"><span class="hs-identifier hs-type">ChainIndex.ChainIndexLog</span></a></span><span>
</span><span id="line-352"></span><span>            </span><span id="local-6989586621680828134"><span class="annot"><span class="annottext">p3 :: AReview EmulatorEvent' ChainIndexLog
</span><a href="#local-6989586621680828134"><span class="hs-identifier hs-var hs-var">p3</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Prism' EmulatorEvent' ChainIndexLog
</span><a href="Wallet.Emulator.MultiAgent.html#chainIndexEvent"><span class="hs-identifier hs-var">chainIndexEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828138"><span class="hs-identifier hs-var">wallet</span></a></span><span>
</span><span id="line-353"></span><span>            </span><span class="annot"><a href="#local-6989586621680828133"><span class="hs-identifier hs-type">p4</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">AReview</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">T.Text</span></a></span><span>
</span><span id="line-354"></span><span>            </span><span id="local-6989586621680828133"><span class="annot"><span class="annottext">p4 :: AReview EmulatorEvent' Text
</span><a href="#local-6989586621680828133"><span class="hs-identifier hs-var hs-var">p4</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">Wallet -&gt; Prism' EmulatorEvent' WalletEvent
</span><a href="Wallet.Emulator.MultiAgent.html#walletEvent"><span class="hs-identifier hs-var">walletEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828138"><span class="hs-identifier hs-var">wallet</span></a></span><span> </span><span class="annot"><span class="annottext">AReview EmulatorEvent' WalletEvent
-&gt; (Tagged Text (Identity Text)
    -&gt; Tagged WalletEvent (Identity WalletEvent))
-&gt; AReview EmulatorEvent' Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Tagged Text (Identity Text)
-&gt; Tagged WalletEvent (Identity WalletEvent)
Prism' WalletEvent Text
</span><a href="Wallet.Emulator.Wallet.html#_GenericLog"><span class="hs-identifier hs-var">Wallet._GenericLog</span></a></span><span>
</span><span id="line-355"></span><span>        </span><span class="annot"><span class="annottext">Eff EmulatedWalletControlEffects x
</span><a href="#local-6989586621680828137"><span class="hs-identifier hs-var">act</span></a></span><span>
</span><span id="line-356"></span><span>            </span><span class="annot"><span class="annottext">Eff EmulatedWalletControlEffects x
-&gt; (Eff EmulatedWalletControlEffects x
    -&gt; Eff
         (NodeClientControlEffect
            : ChainIndexControlEffect : SigningProcessControlEffect
            : LogObserve (LogMessage Text) : LogMsg Text : State WalletState
            : LogMsg WalletEvent : State NodeClientState
            : LogMsg NodeClientEvent : State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (NodeClientControlEffect
        : ChainIndexControlEffect : SigningProcessControlEffect
        : LogObserve (LogMessage Text) : LogMsg Text : State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Eff EmulatedWalletControlEffects x
-&gt; Eff
     (NodeClientControlEffect
        : ChainIndexControlEffect : SigningProcessControlEffect
        : LogObserve (LogMessage Text) : LogMsg Text : State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall (effs :: [* -&gt; *]) (as :: [* -&gt; *]).
CanWeakenEnd as effs =&gt;
Eff as ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">raiseEnd</span></a></span><span>
</span><span id="line-357"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (NodeClientControlEffect
     : ChainIndexControlEffect : SigningProcessControlEffect
     : LogObserve (LogMessage Text) : LogMsg Text : State WalletState
     : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (NodeClientControlEffect
         : ChainIndexControlEffect : SigningProcessControlEffect
         : LogObserve (LogMessage Text) : LogMsg Text : State WalletState
         : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (ChainIndexControlEffect
            : SigningProcessControlEffect : LogObserve (LogMessage Text)
            : LogMsg Text : State WalletState : LogMsg WalletEvent
            : State NodeClientState : LogMsg NodeClientEvent
            : State ChainIndexEmulatorState : LogMsg ChainIndexLog
            : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
            : effs)
         x)
-&gt; Eff
     (ChainIndexControlEffect
        : SigningProcessControlEffect : LogObserve (LogMessage Text)
        : LogMsg Text : State WalletState : LogMsg WalletEvent
        : State NodeClientState : LogMsg NodeClientEvent
        : State ChainIndexEmulatorState : LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Eff
  (NodeClientControlEffect
     : ChainIndexControlEffect : SigningProcessControlEffect
     : LogObserve (LogMessage Text) : LogMsg Text : State WalletState
     : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; Eff
     (ChainIndexControlEffect
        : SigningProcessControlEffect : LogObserve (LogMessage Text)
        : LogMsg Text : State WalletState : LogMsg WalletEvent
        : State NodeClientState : LogMsg NodeClientEvent
        : State ChainIndexEmulatorState : LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
     x
forall (effs :: [* -&gt; *]).
Members NodeClientEffs effs =&gt;
Eff (NodeClientControlEffect : effs) ~&gt; Eff effs
</span><a href="Wallet.Emulator.NodeClient.html#handleNodeControl"><span class="hs-identifier hs-var">NC.handleNodeControl</span></a></span><span>
</span><span id="line-358"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (ChainIndexControlEffect
     : SigningProcessControlEffect : LogObserve (LogMessage Text)
     : LogMsg Text : State WalletState : LogMsg WalletEvent
     : State NodeClientState : LogMsg NodeClientEvent
     : State ChainIndexEmulatorState : LogMsg ChainIndexLog
     : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
     : effs)
  x
-&gt; (Eff
      (ChainIndexControlEffect
         : SigningProcessControlEffect : LogObserve (LogMessage Text)
         : LogMsg Text : State WalletState : LogMsg WalletEvent
         : State NodeClientState : LogMsg NodeClientEvent
         : State ChainIndexEmulatorState : LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs)
      x
    -&gt; Eff
         (SigningProcessControlEffect
            : LogObserve (LogMessage Text) : LogMsg Text : State WalletState
            : LogMsg WalletEvent : State NodeClientState
            : LogMsg NodeClientEvent : State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (SigningProcessControlEffect
        : LogObserve (LogMessage Text) : LogMsg Text : State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainIndexControlEffect
 ~&gt; Eff
      (SigningProcessControlEffect
         : LogObserve (LogMessage Text) : LogMsg Text : State WalletState
         : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs))
-&gt; Eff
     (ChainIndexControlEffect
        : SigningProcessControlEffect : LogObserve (LogMessage Text)
        : LogMsg Text : State WalletState : LogMsg WalletEvent
        : State NodeClientState : LogMsg NodeClientEvent
        : State ChainIndexEmulatorState : LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
   ~&gt; Eff
        (SigningProcessControlEffect
           : LogObserve (LogMessage Text) : LogMsg Text : State WalletState
           : LogMsg WalletEvent : State NodeClientState
           : LogMsg NodeClientEvent : State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="annot"><span class="annottext">forall (effs :: [* -&gt; *]).
(Member (State ChainIndexEmulatorState) effs,
 Member (Error ChainIndexError) effs,
 Member (LogMsg ChainIndexLog) effs) =&gt;
ChainIndexControlEffect ~&gt; Eff effs
ChainIndexControlEffect
~&gt; Eff
     (SigningProcessControlEffect
        : LogObserve (LogMessage Text) : LogMsg Text : State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
</span><a href="../../../../plutus-chain-index-core/html/src"><span class="hs-identifier hs-var">ChainIndex.handleControl</span></a></span><span>
</span><span id="line-359"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (SigningProcessControlEffect
     : LogObserve (LogMessage Text) : LogMsg Text : State WalletState
     : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (SigningProcessControlEffect
         : LogObserve (LogMessage Text) : LogMsg Text : State WalletState
         : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (LogObserve (LogMessage Text)
            : LogMsg Text : State WalletState : LogMsg WalletEvent
            : State NodeClientState : LogMsg NodeClientEvent
            : State ChainIndexEmulatorState : LogMsg ChainIndexLog
            : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
            : effs)
         x)
-&gt; Eff
     (LogObserve (LogMessage Text)
        : LogMsg Text : State WalletState : LogMsg WalletEvent
        : State NodeClientState : LogMsg NodeClientEvent
        : State ChainIndexEmulatorState : LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Eff
  (SigningProcessControlEffect
     : LogObserve (LogMessage Text) : LogMsg Text : State WalletState
     : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; Eff
     (LogObserve (LogMessage Text)
        : LogMsg Text : State WalletState : LogMsg WalletEvent
        : State NodeClientState : LogMsg NodeClientEvent
        : State ChainIndexEmulatorState : LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
     x
forall (effs :: [* -&gt; *]).
Members SigningProcessEffs effs =&gt;
Eff (SigningProcessControlEffect : effs) ~&gt; Eff effs
</span><a href="Wallet.Emulator.Wallet.html#handleSigningProcessControl"><span class="hs-identifier hs-var">Wallet.handleSigningProcessControl</span></a></span><span>
</span><span id="line-360"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (LogObserve (LogMessage Text)
     : LogMsg Text : State WalletState : LogMsg WalletEvent
     : State NodeClientState : LogMsg NodeClientEvent
     : State ChainIndexEmulatorState : LogMsg ChainIndexLog
     : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
     : effs)
  x
-&gt; (Eff
      (LogObserve (LogMessage Text)
         : LogMsg Text : State WalletState : LogMsg WalletEvent
         : State NodeClientState : LogMsg NodeClientEvent
         : State ChainIndexEmulatorState : LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs)
      x
    -&gt; Eff
         (LogMsg Text
            : State WalletState : LogMsg WalletEvent : State NodeClientState
            : LogMsg NodeClientEvent : State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (LogMsg Text
        : State WalletState : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Eff
  (LogObserve (LogMessage Text)
     : LogMsg Text : State WalletState : LogMsg WalletEvent
     : State NodeClientState : LogMsg NodeClientEvent
     : State ChainIndexEmulatorState : LogMsg ChainIndexLog
     : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
     : effs)
  x
-&gt; Eff
     (LogMsg Text
        : State WalletState : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall (effs :: [* -&gt; *]).
Member (LogMsg Text) effs =&gt;
Eff (LogObserve (LogMessage Text) : effs) ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">handleObserveLog</span></a></span><span>
</span><span id="line-361"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (LogMsg Text
     : State WalletState : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (LogMsg Text
         : State WalletState : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (State WalletState
            : LogMsg WalletEvent : State NodeClientState
            : LogMsg NodeClientEvent : State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(LogMsg Text
 ~&gt; Eff
      (State WalletState
         : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs))
-&gt; Eff
     (LogMsg Text
        : State WalletState : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
   ~&gt; Eff
        (State WalletState
           : LogMsg WalletEvent : State NodeClientState
           : LogMsg NodeClientEvent : State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Text -&gt; EmulatorEvent')
-&gt; LogMsg Text
   ~&gt; Eff
        (State WalletState
           : LogMsg WalletEvent : State NodeClientState
           : LogMsg NodeClientEvent : State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall a b (effs :: [* -&gt; *]).
Member (LogMsg b) effs =&gt;
(a -&gt; b) -&gt; LogMsg a ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">mapLog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AReview EmulatorEvent' Text -&gt; Text -&gt; EmulatorEvent'
forall b (m :: * -&gt; *) t. MonadReader b m =&gt; AReview t b -&gt; m t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">review</span></a></span><span> </span><span class="annot"><span class="annottext">AReview EmulatorEvent' Text
</span><a href="#local-6989586621680828133"><span class="hs-identifier hs-var">p4</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (State WalletState
     : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (State WalletState
         : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (LogMsg WalletEvent
            : State NodeClientState : LogMsg NodeClientEvent
            : State ChainIndexEmulatorState : LogMsg ChainIndexLog
            : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
            : effs)
         x)
-&gt; Eff
     (LogMsg WalletEvent
        : State NodeClientState : LogMsg NodeClientEvent
        : State ChainIndexEmulatorState : LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(State WalletState
 ~&gt; Eff
      (LogMsg WalletEvent
         : State NodeClientState : LogMsg NodeClientEvent
         : State ChainIndexEmulatorState : LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs))
-&gt; Eff
     (State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
   ~&gt; Eff
        (LogMsg WalletEvent
           : State NodeClientState : LogMsg NodeClientEvent
           : State ChainIndexEmulatorState : LogMsg ChainIndexLog
           : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
           : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' EmulatorState WalletState
-&gt; State WalletState
   ~&gt; Eff
        (LogMsg WalletEvent
           : State NodeClientState : LogMsg NodeClientEvent
           : State ChainIndexEmulatorState : LogMsg ChainIndexLog
           : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
           : effs)
forall s2 (effs :: [* -&gt; *]) s1.
Member (State s2) effs =&gt;
Lens' s2 s1 -&gt; State s1 ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">handleZoomedState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; Lens' EmulatorState WalletState
</span><a href="Wallet.Emulator.MultiAgent.html#walletState"><span class="hs-identifier hs-var">walletState</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828138"><span class="hs-identifier hs-var">wallet</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (LogMsg WalletEvent
     : State NodeClientState : LogMsg NodeClientEvent
     : State ChainIndexEmulatorState : LogMsg ChainIndexLog
     : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
     : effs)
  x
-&gt; (Eff
      (LogMsg WalletEvent
         : State NodeClientState : LogMsg NodeClientEvent
         : State ChainIndexEmulatorState : LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs)
      x
    -&gt; Eff
         (State NodeClientState
            : LogMsg NodeClientEvent : State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(LogMsg WalletEvent
 ~&gt; Eff
      (State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs))
-&gt; Eff
     (LogMsg WalletEvent
        : State NodeClientState : LogMsg NodeClientEvent
        : State ChainIndexEmulatorState : LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
   ~&gt; Eff
        (State NodeClientState
           : LogMsg NodeClientEvent : State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(WalletEvent -&gt; EmulatorEvent')
-&gt; LogMsg WalletEvent
   ~&gt; Eff
        (State NodeClientState
           : LogMsg NodeClientEvent : State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall a b (effs :: [* -&gt; *]).
Member (LogMsg b) effs =&gt;
(a -&gt; b) -&gt; LogMsg a ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">mapLog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AReview EmulatorEvent' WalletEvent -&gt; WalletEvent -&gt; EmulatorEvent'
forall b (m :: * -&gt; *) t. MonadReader b m =&gt; AReview t b -&gt; m t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">review</span></a></span><span> </span><span class="annot"><span class="annottext">AReview EmulatorEvent' WalletEvent
</span><a href="#local-6989586621680828136"><span class="hs-identifier hs-var">p1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (LogMsg NodeClientEvent
            : State ChainIndexEmulatorState : LogMsg ChainIndexLog
            : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
            : effs)
         x)
-&gt; Eff
     (LogMsg NodeClientEvent
        : State ChainIndexEmulatorState : LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(State NodeClientState
 ~&gt; Eff
      (LogMsg NodeClientEvent
         : State ChainIndexEmulatorState : LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs))
-&gt; Eff
     (State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
   ~&gt; Eff
        (LogMsg NodeClientEvent
           : State ChainIndexEmulatorState : LogMsg ChainIndexLog
           : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
           : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' EmulatorState NodeClientState
-&gt; State NodeClientState
   ~&gt; Eff
        (LogMsg NodeClientEvent
           : State ChainIndexEmulatorState : LogMsg ChainIndexLog
           : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
           : effs)
forall s2 (effs :: [* -&gt; *]) s1.
Member (State s2) effs =&gt;
Lens' s2 s1 -&gt; State s1 ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">handleZoomedState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; Lens' EmulatorState WalletState
</span><a href="Wallet.Emulator.MultiAgent.html#walletState"><span class="hs-identifier hs-var">walletState</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828138"><span class="hs-identifier hs-var">wallet</span></a></span><span> </span><span class="annot"><span class="annottext">((WalletState -&gt; f WalletState)
 -&gt; EmulatorState -&gt; f EmulatorState)
-&gt; ((NodeClientState -&gt; f NodeClientState)
    -&gt; WalletState -&gt; f WalletState)
-&gt; (NodeClientState -&gt; f NodeClientState)
-&gt; EmulatorState
-&gt; f EmulatorState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(NodeClientState -&gt; f NodeClientState)
-&gt; WalletState -&gt; f WalletState
Lens' WalletState NodeClientState
</span><a href="Wallet.Emulator.Wallet.html#nodeClient"><span class="hs-identifier hs-var">Wallet.nodeClient</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-365"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (LogMsg NodeClientEvent
     : State ChainIndexEmulatorState : LogMsg ChainIndexLog
     : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
     : effs)
  x
-&gt; (Eff
      (LogMsg NodeClientEvent
         : State ChainIndexEmulatorState : LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs)
      x
    -&gt; Eff
         (State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(LogMsg NodeClientEvent
 ~&gt; Eff
      (State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs))
-&gt; Eff
     (LogMsg NodeClientEvent
        : State ChainIndexEmulatorState : LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
   ~&gt; Eff
        (State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(NodeClientEvent -&gt; EmulatorEvent')
-&gt; LogMsg NodeClientEvent
   ~&gt; Eff
        (State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall a b (effs :: [* -&gt; *]).
Member (LogMsg b) effs =&gt;
(a -&gt; b) -&gt; LogMsg a ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">mapLog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AReview EmulatorEvent' NodeClientEvent
-&gt; NodeClientEvent -&gt; EmulatorEvent'
forall b (m :: * -&gt; *) t. MonadReader b m =&gt; AReview t b -&gt; m t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">review</span></a></span><span> </span><span class="annot"><span class="annottext">AReview EmulatorEvent' NodeClientEvent
</span><a href="#local-6989586621680828135"><span class="hs-identifier hs-var">p2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (LogMsg ChainIndexLog
            : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
            : effs)
         x)
-&gt; Eff
     (LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(State ChainIndexEmulatorState
 ~&gt; Eff
      (LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs))
-&gt; Eff
     (State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
   ~&gt; Eff
        (LogMsg ChainIndexLog
           : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
           : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' EmulatorState ChainIndexEmulatorState
-&gt; State ChainIndexEmulatorState
   ~&gt; Eff
        (LogMsg ChainIndexLog
           : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
           : effs)
forall s2 (effs :: [* -&gt; *]) s1.
Member (State s2) effs =&gt;
Lens' s2 s1 -&gt; State s1 ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">handleZoomedState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; Lens' EmulatorState WalletState
</span><a href="Wallet.Emulator.MultiAgent.html#walletState"><span class="hs-identifier hs-var">walletState</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828138"><span class="hs-identifier hs-var">wallet</span></a></span><span> </span><span class="annot"><span class="annottext">((WalletState -&gt; f WalletState)
 -&gt; EmulatorState -&gt; f EmulatorState)
-&gt; ((ChainIndexEmulatorState -&gt; f ChainIndexEmulatorState)
    -&gt; WalletState -&gt; f WalletState)
-&gt; (ChainIndexEmulatorState -&gt; f ChainIndexEmulatorState)
-&gt; EmulatorState
-&gt; f EmulatorState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainIndexEmulatorState -&gt; f ChainIndexEmulatorState)
-&gt; WalletState -&gt; f WalletState
Lens' WalletState ChainIndexEmulatorState
</span><a href="Wallet.Emulator.Wallet.html#chainIndexEmulatorState"><span class="hs-identifier hs-var">Wallet.chainIndexEmulatorState</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (LogMsg ChainIndexLog
     : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
     : effs)
  x
-&gt; (Eff
      (LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs)
      x
    -&gt; Eff
         (State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(LogMsg ChainIndexLog
 ~&gt; Eff
      (State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs))
-&gt; Eff
     (LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
   ~&gt; Eff
        (State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ChainIndexLog -&gt; EmulatorEvent')
-&gt; LogMsg ChainIndexLog
   ~&gt; Eff
        (State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall a b (effs :: [* -&gt; *]).
Member (LogMsg b) effs =&gt;
(a -&gt; b) -&gt; LogMsg a ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">mapLog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AReview EmulatorEvent' ChainIndexLog
-&gt; ChainIndexLog -&gt; EmulatorEvent'
forall b (m :: * -&gt; *) t. MonadReader b m =&gt; AReview t b -&gt; m t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">review</span></a></span><span> </span><span class="annot"><span class="annottext">AReview EmulatorEvent' ChainIndexLog
</span><a href="#local-6989586621680828134"><span class="hs-identifier hs-var">p3</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff (Writer [LogMessage EmulatorEvent] : effs) x)
-&gt; Eff (Writer [LogMessage EmulatorEvent] : effs) x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(State (Maybe SigningProcess)
 ~&gt; Eff (Writer [LogMessage EmulatorEvent] : effs))
-&gt; Eff
     (State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
   ~&gt; Eff (Writer [LogMessage EmulatorEvent] : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' EmulatorState (Maybe SigningProcess)
-&gt; State (Maybe SigningProcess)
   ~&gt; Eff (Writer [LogMessage EmulatorEvent] : effs)
forall s2 (effs :: [* -&gt; *]) s1.
Member (State s2) effs =&gt;
Lens' s2 s1 -&gt; State s1 ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">handleZoomedState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; Lens' EmulatorState WalletState
</span><a href="Wallet.Emulator.MultiAgent.html#walletState"><span class="hs-identifier hs-var">walletState</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828138"><span class="hs-identifier hs-var">wallet</span></a></span><span> </span><span class="annot"><span class="annottext">((WalletState -&gt; f WalletState)
 -&gt; EmulatorState -&gt; f EmulatorState)
-&gt; ((Maybe SigningProcess -&gt; f (Maybe SigningProcess))
    -&gt; WalletState -&gt; f WalletState)
-&gt; (Maybe SigningProcess -&gt; f (Maybe SigningProcess))
-&gt; EmulatorState
-&gt; f EmulatorState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe SigningProcess -&gt; f (Maybe SigningProcess))
-&gt; WalletState -&gt; f WalletState
Lens' WalletState (Maybe SigningProcess)
</span><a href="Wallet.Emulator.Wallet.html#signingProcess"><span class="hs-identifier hs-var">Wallet.signingProcess</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-369"></span><span>            </span><span class="annot"><span class="annottext">Eff (Writer [LogMessage EmulatorEvent] : effs) x
-&gt; (Eff (Writer [LogMessage EmulatorEvent] : effs) x -&gt; Eff effs x)
-&gt; Eff effs x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(Writer [LogMessage EmulatorEvent] ~&gt; Eff effs)
-&gt; Eff (Writer [LogMessage EmulatorEvent] : effs) ~&gt; Eff effs
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Setter' EmulatorState [LogMessage EmulatorEvent]
-&gt; Writer [LogMessage EmulatorEvent] ~&gt; Eff effs
forall s1 s2 (effs :: [* -&gt; *]).
(Monoid s1, Member (State s2) effs) =&gt;
Setter' s2 s1 -&gt; Writer s1 ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">writeIntoState</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' EmulatorState [LogMessage EmulatorEvent]
Setter' EmulatorState [LogMessage EmulatorEvent]
</span><a href="Wallet.Emulator.MultiAgent.html#emulatorLog"><span class="hs-identifier hs-var">emulatorLog</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-370"></span><span>    </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#Assertion"><span class="hs-identifier hs-type">Assertion</span></a></span><span> </span><span id="local-6989586621680828125"><span class="annot"><a href="#local-6989586621680828125"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Assertion -&gt; Eff effs ()
forall (effs :: [* -&gt; *]).
Members MultiAgentEffs effs =&gt;
Assertion -&gt; Eff effs ()
</span><a href="Wallet.Emulator.MultiAgent.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="annot"><span class="annottext">Assertion
</span><a href="#local-6989586621680828125"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#handleMultiAgent"><span class="hs-identifier hs-type">handleMultiAgent</span></a></span><span>
</span><span id="line-373"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680828122"><span class="annot"><a href="#local-6989586621680828122"><span class="hs-identifier hs-type">effs</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Members</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffs"><span class="hs-identifier hs-type">MultiAgentEffs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828122"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-374"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffect"><span class="hs-identifier hs-type">MultiAgentEffect</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621680828122"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/nkim7nifcqpdb4r433zhbv94ima3fwqb-natural-transformation-lib-natural-transformation-0.4-haddock-doc/share/doc/natural-transformation/html/src"><span class="hs-operator hs-type">~&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828122"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-375"></span><span id="handleMultiAgent"><span class="annot"><span class="annottext">handleMultiAgent :: Eff (MultiAgentEffect : effs) ~&gt; Eff effs
</span><a href="Wallet.Emulator.MultiAgent.html#handleMultiAgent"><span class="hs-identifier hs-var hs-var">handleMultiAgent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MultiAgentEffect ~&gt; Eff effs)
-&gt; Eff (MultiAgentEffect : effs) ~&gt; Eff effs
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="annot"><span class="annottext">((MultiAgentEffect ~&gt; Eff effs)
 -&gt; Eff (MultiAgentEffect : effs) ~&gt; Eff effs)
-&gt; (MultiAgentEffect ~&gt; Eff effs)
-&gt; Eff (MultiAgentEffect : effs) ~&gt; Eff effs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-376"></span><span>    </span><span class="hs-comment">-- TODO: catch, log, and rethrow wallet errors?</span><span>
</span><span id="line-377"></span><span>    </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#WalletAction"><span class="hs-identifier hs-type">WalletAction</span></a></span><span> </span><span id="local-6989586621680828121"><span class="annot"><a href="#local-6989586621680828121"><span class="hs-identifier hs-var">wallet</span></a></span></span><span> </span><span id="local-6989586621680828120"><span class="annot"><a href="#local-6989586621680828120"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="hs-keyword">do</span><span>
</span><span id="line-378"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-379"></span><span>            </span><span class="annot"><a href="#local-6989586621680828119"><span class="hs-identifier hs-type">p1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">AReview</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#WalletEvent"><span class="hs-identifier hs-type">Wallet.WalletEvent</span></a></span><span>
</span><span id="line-380"></span><span>            </span><span id="local-6989586621680828119"><span class="annot"><span class="annottext">p1 :: AReview EmulatorEvent' WalletEvent
</span><a href="#local-6989586621680828119"><span class="hs-identifier hs-var hs-var">p1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Prism' EmulatorEvent' WalletEvent
</span><a href="Wallet.Emulator.MultiAgent.html#walletEvent"><span class="hs-identifier hs-var">walletEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828121"><span class="hs-identifier hs-var">wallet</span></a></span><span>
</span><span id="line-381"></span><span>            </span><span class="annot"><a href="#local-6989586621680828118"><span class="hs-identifier hs-type">p2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">AReview</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.NodeClient.html#NodeClientEvent"><span class="hs-identifier hs-type">NC.NodeClientEvent</span></a></span><span>
</span><span id="line-382"></span><span>            </span><span id="local-6989586621680828118"><span class="annot"><span class="annottext">p2 :: AReview EmulatorEvent' NodeClientEvent
</span><a href="#local-6989586621680828118"><span class="hs-identifier hs-var hs-var">p2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Prism' EmulatorEvent' NodeClientEvent
</span><a href="Wallet.Emulator.MultiAgent.html#walletClientEvent"><span class="hs-identifier hs-var">walletClientEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828121"><span class="hs-identifier hs-var">wallet</span></a></span><span>
</span><span id="line-383"></span><span>            </span><span class="annot"><a href="#local-6989586621680828117"><span class="hs-identifier hs-type">p3</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">AReview</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-chain-index-core/html/src"><span class="hs-identifier hs-type">ChainIndex.ChainIndexLog</span></a></span><span>
</span><span id="line-384"></span><span>            </span><span id="local-6989586621680828117"><span class="annot"><span class="annottext">p3 :: AReview EmulatorEvent' ChainIndexLog
</span><a href="#local-6989586621680828117"><span class="hs-identifier hs-var hs-var">p3</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Prism' EmulatorEvent' ChainIndexLog
</span><a href="Wallet.Emulator.MultiAgent.html#chainIndexEvent"><span class="hs-identifier hs-var">chainIndexEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828121"><span class="hs-identifier hs-var">wallet</span></a></span><span>
</span><span id="line-385"></span><span>            </span><span class="annot"><a href="#local-6989586621680828116"><span class="hs-identifier hs-type">p4</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">AReview</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-type">T.Text</span></a></span><span>
</span><span id="line-386"></span><span>            </span><span id="local-6989586621680828116"><span class="annot"><span class="annottext">p4 :: AReview EmulatorEvent' Text
</span><a href="#local-6989586621680828116"><span class="hs-identifier hs-var hs-var">p4</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Prism' EmulatorEvent' WalletEvent
</span><a href="Wallet.Emulator.MultiAgent.html#walletEvent"><span class="hs-identifier hs-var">walletEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828121"><span class="hs-identifier hs-var">wallet</span></a></span><span> </span><span class="annot"><span class="annottext">AReview EmulatorEvent' WalletEvent
-&gt; (Tagged Text (Identity Text)
    -&gt; Tagged WalletEvent (Identity WalletEvent))
-&gt; AReview EmulatorEvent' Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Tagged Text (Identity Text)
-&gt; Tagged WalletEvent (Identity WalletEvent)
Prism' WalletEvent Text
</span><a href="Wallet.Emulator.Wallet.html#_GenericLog"><span class="hs-identifier hs-var">Wallet._GenericLog</span></a></span><span>
</span><span id="line-387"></span><span>            </span><span class="annot"><a href="#local-6989586621680828115"><span class="hs-identifier hs-type">p5</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">AReview</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.LogMessages.html#RequestHandlerLogMsg"><span class="hs-identifier hs-type">RequestHandlerLogMsg</span></a></span><span>
</span><span id="line-388"></span><span>            </span><span id="local-6989586621680828115"><span class="annot"><span class="annottext">p5 :: AReview EmulatorEvent' RequestHandlerLogMsg
</span><a href="#local-6989586621680828115"><span class="hs-identifier hs-var hs-var">p5</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Prism' EmulatorEvent' WalletEvent
</span><a href="Wallet.Emulator.MultiAgent.html#walletEvent"><span class="hs-identifier hs-var">walletEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828121"><span class="hs-identifier hs-var">wallet</span></a></span><span> </span><span class="annot"><span class="annottext">AReview EmulatorEvent' WalletEvent
-&gt; (Tagged RequestHandlerLogMsg (Identity RequestHandlerLogMsg)
    -&gt; Tagged WalletEvent (Identity WalletEvent))
-&gt; AReview EmulatorEvent' RequestHandlerLogMsg
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Tagged RequestHandlerLogMsg (Identity RequestHandlerLogMsg)
-&gt; Tagged WalletEvent (Identity WalletEvent)
Prism' WalletEvent RequestHandlerLogMsg
</span><a href="Wallet.Emulator.Wallet.html#_RequestHandlerLog"><span class="hs-identifier hs-var">Wallet._RequestHandlerLog</span></a></span><span>
</span><span id="line-389"></span><span>            </span><span class="annot"><a href="#local-6989586621680828113"><span class="hs-identifier hs-type">p6</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">AReview</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#EmulatorEvent%27"><span class="hs-identifier hs-type">EmulatorEvent'</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.LogMessages.html#TxBalanceMsg"><span class="hs-identifier hs-type">TxBalanceMsg</span></a></span><span>
</span><span id="line-390"></span><span>            </span><span id="local-6989586621680828113"><span class="annot"><span class="annottext">p6 :: AReview EmulatorEvent' TxBalanceMsg
</span><a href="#local-6989586621680828113"><span class="hs-identifier hs-var hs-var">p6</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Prism' EmulatorEvent' WalletEvent
</span><a href="Wallet.Emulator.MultiAgent.html#walletEvent"><span class="hs-identifier hs-var">walletEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828121"><span class="hs-identifier hs-var">wallet</span></a></span><span> </span><span class="annot"><span class="annottext">AReview EmulatorEvent' WalletEvent
-&gt; (Tagged TxBalanceMsg (Identity TxBalanceMsg)
    -&gt; Tagged WalletEvent (Identity WalletEvent))
-&gt; AReview EmulatorEvent' TxBalanceMsg
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Tagged TxBalanceMsg (Identity TxBalanceMsg)
-&gt; Tagged WalletEvent (Identity WalletEvent)
Prism' WalletEvent TxBalanceMsg
</span><a href="Wallet.Emulator.Wallet.html#_TxBalanceLog"><span class="hs-identifier hs-var">Wallet._TxBalanceLog</span></a></span><span>
</span><span id="line-391"></span><span>        </span><span class="annot"><span class="annottext">Eff EmulatedWalletEffects x
</span><a href="#local-6989586621680828120"><span class="hs-identifier hs-var">act</span></a></span><span>
</span><span id="line-392"></span><span>            </span><span class="annot"><span class="annottext">Eff EmulatedWalletEffects x
-&gt; (Eff EmulatedWalletEffects x
    -&gt; Eff
         (WalletEffect
            : Error WalletAPIError : NodeClientEffect : ChainIndexQueryEffect
            : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
            : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
            : LogMsg WalletEvent : State NodeClientState
            : LogMsg NodeClientEvent : State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (WalletEffect
        : Error WalletAPIError : NodeClientEffect : ChainIndexQueryEffect
        : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Eff EmulatedWalletEffects x
-&gt; Eff
     (WalletEffect
        : Error WalletAPIError : NodeClientEffect : ChainIndexQueryEffect
        : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall (effs :: [* -&gt; *]) (as :: [* -&gt; *]).
CanWeakenEnd as effs =&gt;
Eff as ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">raiseEnd</span></a></span><span>
</span><span id="line-393"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (WalletEffect
     : Error WalletAPIError : NodeClientEffect : ChainIndexQueryEffect
     : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
     : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
     : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (WalletEffect
         : Error WalletAPIError : NodeClientEffect : ChainIndexQueryEffect
         : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
         : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
         : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (Error WalletAPIError
            : NodeClientEffect : ChainIndexQueryEffect
            : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
            : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
            : LogMsg WalletEvent : State NodeClientState
            : LogMsg NodeClientEvent : State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (Error WalletAPIError
        : NodeClientEffect : ChainIndexQueryEffect
        : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(WalletEffect
 ~&gt; Eff
      (Error WalletAPIError
         : NodeClientEffect : ChainIndexQueryEffect
         : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
         : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
         : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs))
-&gt; Eff
     (WalletEffect
        : Error WalletAPIError : NodeClientEffect : ChainIndexQueryEffect
        : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
   ~&gt; Eff
        (Error WalletAPIError
           : NodeClientEffect : ChainIndexQueryEffect
           : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
           : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
           : LogMsg WalletEvent : State NodeClientState
           : LogMsg NodeClientEvent : State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="annot"><span class="annottext">forall (effs :: [* -&gt; *]).
(Member (Error WalletAPIError) effs, Member NodeClientEffect effs,
 Member ChainIndexQueryEffect effs, Member (State WalletState) effs,
 Member (LogMsg TxBalanceMsg) effs) =&gt;
WalletEffect ~&gt; Eff effs
WalletEffect
~&gt; Eff
     (Error WalletAPIError
        : NodeClientEffect : ChainIndexQueryEffect
        : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
</span><a href="Wallet.Emulator.Wallet.html#handleWallet"><span class="hs-identifier hs-var">Wallet.handleWallet</span></a></span><span>
</span><span id="line-394"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (Error WalletAPIError
     : NodeClientEffect : ChainIndexQueryEffect
     : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
     : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
     : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (Error WalletAPIError
         : NodeClientEffect : ChainIndexQueryEffect
         : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
         : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
         : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (NodeClientEffect
            : ChainIndexQueryEffect : LogObserve (LogMessage Text)
            : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
            : State WalletState : LogMsg WalletEvent : State NodeClientState
            : LogMsg NodeClientEvent : State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (NodeClientEffect
        : ChainIndexQueryEffect : LogObserve (LogMessage Text)
        : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
        : State WalletState : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Eff
  (Error WalletAPIError
     : NodeClientEffect : ChainIndexQueryEffect
     : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
     : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
     : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; Eff
     (NodeClientEffect
        : ChainIndexQueryEffect : LogObserve (LogMessage Text)
        : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
        : State WalletState : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
Member eff effs =&gt;
Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">subsume</span></a></span><span>
</span><span id="line-395"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (NodeClientEffect
     : ChainIndexQueryEffect : LogObserve (LogMessage Text)
     : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
     : State WalletState : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (NodeClientEffect
         : ChainIndexQueryEffect : LogObserve (LogMessage Text)
         : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
         : State WalletState : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (ChainIndexQueryEffect
            : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
            : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
            : LogMsg WalletEvent : State NodeClientState
            : LogMsg NodeClientEvent : State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (ChainIndexQueryEffect
        : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Eff
  (NodeClientEffect
     : ChainIndexQueryEffect : LogObserve (LogMessage Text)
     : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
     : State WalletState : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; Eff
     (ChainIndexQueryEffect
        : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall (effs :: [* -&gt; *]).
Members NodeClientEffs effs =&gt;
Eff (NodeClientEffect : effs) ~&gt; Eff effs
</span><a href="Wallet.Emulator.NodeClient.html#handleNodeClient"><span class="hs-identifier hs-var">NC.handleNodeClient</span></a></span><span>
</span><span id="line-396"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (ChainIndexQueryEffect
     : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
     : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
     : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (ChainIndexQueryEffect
         : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
         : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
         : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (LogObserve (LogMessage Text)
            : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
            : State WalletState : LogMsg WalletEvent : State NodeClientState
            : LogMsg NodeClientEvent : State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (LogObserve (LogMessage Text)
        : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
        : State WalletState : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainIndexQueryEffect
 ~&gt; Eff
      (LogObserve (LogMessage Text)
         : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
         : State WalletState : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs))
-&gt; Eff
     (ChainIndexQueryEffect
        : LogObserve (LogMessage Text) : LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
   ~&gt; Eff
        (LogObserve (LogMessage Text)
           : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
           : State WalletState : LogMsg WalletEvent : State NodeClientState
           : LogMsg NodeClientEvent : State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="annot"><span class="annottext">forall (effs :: [* -&gt; *]).
(Member (State ChainIndexEmulatorState) effs,
 Member (Error ChainIndexError) effs,
 Member (LogMsg ChainIndexLog) effs) =&gt;
ChainIndexQueryEffect ~&gt; Eff effs
ChainIndexQueryEffect
~&gt; Eff
     (LogObserve (LogMessage Text)
        : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
        : State WalletState : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
</span><a href="../../../../plutus-chain-index-core/html/src"><span class="hs-identifier hs-var">ChainIndex.handleQuery</span></a></span><span>
</span><span id="line-397"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (LogObserve (LogMessage Text)
     : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
     : State WalletState : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (LogObserve (LogMessage Text)
         : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
         : State WalletState : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (LogMsg RequestHandlerLogMsg
            : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
            : LogMsg WalletEvent : State NodeClientState
            : LogMsg NodeClientEvent : State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Eff
  (LogObserve (LogMessage Text)
     : LogMsg RequestHandlerLogMsg : LogMsg TxBalanceMsg : LogMsg Text
     : State WalletState : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; Eff
     (LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall (effs :: [* -&gt; *]).
Member (LogMsg Text) effs =&gt;
Eff (LogObserve (LogMessage Text) : effs) ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">handleObserveLog</span></a></span><span>
</span><span id="line-398"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (LogMsg RequestHandlerLogMsg
     : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
     : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (LogMsg RequestHandlerLogMsg
         : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
         : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (LogMsg TxBalanceMsg
            : LogMsg Text : State WalletState : LogMsg WalletEvent
            : State NodeClientState : LogMsg NodeClientEvent
            : State ChainIndexEmulatorState : LogMsg ChainIndexLog
            : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
            : effs)
         x)
-&gt; Eff
     (LogMsg TxBalanceMsg
        : LogMsg Text : State WalletState : LogMsg WalletEvent
        : State NodeClientState : LogMsg NodeClientEvent
        : State ChainIndexEmulatorState : LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(LogMsg RequestHandlerLogMsg
 ~&gt; Eff
      (LogMsg TxBalanceMsg
         : LogMsg Text : State WalletState : LogMsg WalletEvent
         : State NodeClientState : LogMsg NodeClientEvent
         : State ChainIndexEmulatorState : LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs))
-&gt; Eff
     (LogMsg RequestHandlerLogMsg
        : LogMsg TxBalanceMsg : LogMsg Text : State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
   ~&gt; Eff
        (LogMsg TxBalanceMsg
           : LogMsg Text : State WalletState : LogMsg WalletEvent
           : State NodeClientState : LogMsg NodeClientEvent
           : State ChainIndexEmulatorState : LogMsg ChainIndexLog
           : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
           : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RequestHandlerLogMsg -&gt; EmulatorEvent')
-&gt; LogMsg RequestHandlerLogMsg
   ~&gt; Eff
        (LogMsg TxBalanceMsg
           : LogMsg Text : State WalletState : LogMsg WalletEvent
           : State NodeClientState : LogMsg NodeClientEvent
           : State ChainIndexEmulatorState : LogMsg ChainIndexLog
           : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
           : effs)
forall a b (effs :: [* -&gt; *]).
Member (LogMsg b) effs =&gt;
(a -&gt; b) -&gt; LogMsg a ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">mapLog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AReview EmulatorEvent' RequestHandlerLogMsg
-&gt; RequestHandlerLogMsg -&gt; EmulatorEvent'
forall b (m :: * -&gt; *) t. MonadReader b m =&gt; AReview t b -&gt; m t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">review</span></a></span><span> </span><span class="annot"><span class="annottext">AReview EmulatorEvent' RequestHandlerLogMsg
</span><a href="#local-6989586621680828115"><span class="hs-identifier hs-var">p5</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-399"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (LogMsg TxBalanceMsg
     : LogMsg Text : State WalletState : LogMsg WalletEvent
     : State NodeClientState : LogMsg NodeClientEvent
     : State ChainIndexEmulatorState : LogMsg ChainIndexLog
     : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
     : effs)
  x
-&gt; (Eff
      (LogMsg TxBalanceMsg
         : LogMsg Text : State WalletState : LogMsg WalletEvent
         : State NodeClientState : LogMsg NodeClientEvent
         : State ChainIndexEmulatorState : LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs)
      x
    -&gt; Eff
         (LogMsg Text
            : State WalletState : LogMsg WalletEvent : State NodeClientState
            : LogMsg NodeClientEvent : State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (LogMsg Text
        : State WalletState : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(LogMsg TxBalanceMsg
 ~&gt; Eff
      (LogMsg Text
         : State WalletState : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs))
-&gt; Eff
     (LogMsg TxBalanceMsg
        : LogMsg Text : State WalletState : LogMsg WalletEvent
        : State NodeClientState : LogMsg NodeClientEvent
        : State ChainIndexEmulatorState : LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
   ~&gt; Eff
        (LogMsg Text
           : State WalletState : LogMsg WalletEvent : State NodeClientState
           : LogMsg NodeClientEvent : State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TxBalanceMsg -&gt; EmulatorEvent')
-&gt; LogMsg TxBalanceMsg
   ~&gt; Eff
        (LogMsg Text
           : State WalletState : LogMsg WalletEvent : State NodeClientState
           : LogMsg NodeClientEvent : State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall a b (effs :: [* -&gt; *]).
Member (LogMsg b) effs =&gt;
(a -&gt; b) -&gt; LogMsg a ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">mapLog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AReview EmulatorEvent' TxBalanceMsg
-&gt; TxBalanceMsg -&gt; EmulatorEvent'
forall b (m :: * -&gt; *) t. MonadReader b m =&gt; AReview t b -&gt; m t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">review</span></a></span><span> </span><span class="annot"><span class="annottext">AReview EmulatorEvent' TxBalanceMsg
</span><a href="#local-6989586621680828113"><span class="hs-identifier hs-var">p6</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-400"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (LogMsg Text
     : State WalletState : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (LogMsg Text
         : State WalletState : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (State WalletState
            : LogMsg WalletEvent : State NodeClientState
            : LogMsg NodeClientEvent : State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(LogMsg Text
 ~&gt; Eff
      (State WalletState
         : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs))
-&gt; Eff
     (LogMsg Text
        : State WalletState : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
   ~&gt; Eff
        (State WalletState
           : LogMsg WalletEvent : State NodeClientState
           : LogMsg NodeClientEvent : State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Text -&gt; EmulatorEvent')
-&gt; LogMsg Text
   ~&gt; Eff
        (State WalletState
           : LogMsg WalletEvent : State NodeClientState
           : LogMsg NodeClientEvent : State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall a b (effs :: [* -&gt; *]).
Member (LogMsg b) effs =&gt;
(a -&gt; b) -&gt; LogMsg a ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">mapLog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AReview EmulatorEvent' Text -&gt; Text -&gt; EmulatorEvent'
forall b (m :: * -&gt; *) t. MonadReader b m =&gt; AReview t b -&gt; m t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">review</span></a></span><span> </span><span class="annot"><span class="annottext">AReview EmulatorEvent' Text
</span><a href="#local-6989586621680828116"><span class="hs-identifier hs-var">p4</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-401"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (State WalletState
     : LogMsg WalletEvent : State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (State WalletState
         : LogMsg WalletEvent : State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (LogMsg WalletEvent
            : State NodeClientState : LogMsg NodeClientEvent
            : State ChainIndexEmulatorState : LogMsg ChainIndexLog
            : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
            : effs)
         x)
-&gt; Eff
     (LogMsg WalletEvent
        : State NodeClientState : LogMsg NodeClientEvent
        : State ChainIndexEmulatorState : LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(State WalletState
 ~&gt; Eff
      (LogMsg WalletEvent
         : State NodeClientState : LogMsg NodeClientEvent
         : State ChainIndexEmulatorState : LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs))
-&gt; Eff
     (State WalletState
        : LogMsg WalletEvent : State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
   ~&gt; Eff
        (LogMsg WalletEvent
           : State NodeClientState : LogMsg NodeClientEvent
           : State ChainIndexEmulatorState : LogMsg ChainIndexLog
           : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
           : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' EmulatorState WalletState
-&gt; State WalletState
   ~&gt; Eff
        (LogMsg WalletEvent
           : State NodeClientState : LogMsg NodeClientEvent
           : State ChainIndexEmulatorState : LogMsg ChainIndexLog
           : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
           : effs)
forall s2 (effs :: [* -&gt; *]) s1.
Member (State s2) effs =&gt;
Lens' s2 s1 -&gt; State s1 ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">handleZoomedState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; Lens' EmulatorState WalletState
</span><a href="Wallet.Emulator.MultiAgent.html#walletState"><span class="hs-identifier hs-var">walletState</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828121"><span class="hs-identifier hs-var">wallet</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (LogMsg WalletEvent
     : State NodeClientState : LogMsg NodeClientEvent
     : State ChainIndexEmulatorState : LogMsg ChainIndexLog
     : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
     : effs)
  x
-&gt; (Eff
      (LogMsg WalletEvent
         : State NodeClientState : LogMsg NodeClientEvent
         : State ChainIndexEmulatorState : LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs)
      x
    -&gt; Eff
         (State NodeClientState
            : LogMsg NodeClientEvent : State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(LogMsg WalletEvent
 ~&gt; Eff
      (State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs))
-&gt; Eff
     (LogMsg WalletEvent
        : State NodeClientState : LogMsg NodeClientEvent
        : State ChainIndexEmulatorState : LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
   ~&gt; Eff
        (State NodeClientState
           : LogMsg NodeClientEvent : State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(WalletEvent -&gt; EmulatorEvent')
-&gt; LogMsg WalletEvent
   ~&gt; Eff
        (State NodeClientState
           : LogMsg NodeClientEvent : State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall a b (effs :: [* -&gt; *]).
Member (LogMsg b) effs =&gt;
(a -&gt; b) -&gt; LogMsg a ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">mapLog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AReview EmulatorEvent' WalletEvent -&gt; WalletEvent -&gt; EmulatorEvent'
forall b (m :: * -&gt; *) t. MonadReader b m =&gt; AReview t b -&gt; m t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">review</span></a></span><span> </span><span class="annot"><span class="annottext">AReview EmulatorEvent' WalletEvent
</span><a href="#local-6989586621680828119"><span class="hs-identifier hs-var">p1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-403"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (State NodeClientState
     : LogMsg NodeClientEvent : State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (State NodeClientState
         : LogMsg NodeClientEvent : State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (LogMsg NodeClientEvent
            : State ChainIndexEmulatorState : LogMsg ChainIndexLog
            : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
            : effs)
         x)
-&gt; Eff
     (LogMsg NodeClientEvent
        : State ChainIndexEmulatorState : LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(State NodeClientState
 ~&gt; Eff
      (LogMsg NodeClientEvent
         : State ChainIndexEmulatorState : LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs))
-&gt; Eff
     (State NodeClientState
        : LogMsg NodeClientEvent : State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
   ~&gt; Eff
        (LogMsg NodeClientEvent
           : State ChainIndexEmulatorState : LogMsg ChainIndexLog
           : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
           : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' EmulatorState NodeClientState
-&gt; State NodeClientState
   ~&gt; Eff
        (LogMsg NodeClientEvent
           : State ChainIndexEmulatorState : LogMsg ChainIndexLog
           : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
           : effs)
forall s2 (effs :: [* -&gt; *]) s1.
Member (State s2) effs =&gt;
Lens' s2 s1 -&gt; State s1 ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">handleZoomedState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; Lens' EmulatorState WalletState
</span><a href="Wallet.Emulator.MultiAgent.html#walletState"><span class="hs-identifier hs-var">walletState</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828121"><span class="hs-identifier hs-var">wallet</span></a></span><span> </span><span class="annot"><span class="annottext">((WalletState -&gt; f WalletState)
 -&gt; EmulatorState -&gt; f EmulatorState)
-&gt; ((NodeClientState -&gt; f NodeClientState)
    -&gt; WalletState -&gt; f WalletState)
-&gt; (NodeClientState -&gt; f NodeClientState)
-&gt; EmulatorState
-&gt; f EmulatorState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(NodeClientState -&gt; f NodeClientState)
-&gt; WalletState -&gt; f WalletState
Lens' WalletState NodeClientState
</span><a href="Wallet.Emulator.Wallet.html#nodeClient"><span class="hs-identifier hs-var">Wallet.nodeClient</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-404"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (LogMsg NodeClientEvent
     : State ChainIndexEmulatorState : LogMsg ChainIndexLog
     : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
     : effs)
  x
-&gt; (Eff
      (LogMsg NodeClientEvent
         : State ChainIndexEmulatorState : LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs)
      x
    -&gt; Eff
         (State ChainIndexEmulatorState
            : LogMsg ChainIndexLog : State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(LogMsg NodeClientEvent
 ~&gt; Eff
      (State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs))
-&gt; Eff
     (LogMsg NodeClientEvent
        : State ChainIndexEmulatorState : LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
   ~&gt; Eff
        (State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(NodeClientEvent -&gt; EmulatorEvent')
-&gt; LogMsg NodeClientEvent
   ~&gt; Eff
        (State ChainIndexEmulatorState
           : LogMsg ChainIndexLog : State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall a b (effs :: [* -&gt; *]).
Member (LogMsg b) effs =&gt;
(a -&gt; b) -&gt; LogMsg a ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">mapLog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AReview EmulatorEvent' NodeClientEvent
-&gt; NodeClientEvent -&gt; EmulatorEvent'
forall b (m :: * -&gt; *) t. MonadReader b m =&gt; AReview t b -&gt; m t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">review</span></a></span><span> </span><span class="annot"><span class="annottext">AReview EmulatorEvent' NodeClientEvent
</span><a href="#local-6989586621680828118"><span class="hs-identifier hs-var">p2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-405"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (State ChainIndexEmulatorState
     : LogMsg ChainIndexLog : State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (State ChainIndexEmulatorState
         : LogMsg ChainIndexLog : State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff
         (LogMsg ChainIndexLog
            : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
            : effs)
         x)
-&gt; Eff
     (LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(State ChainIndexEmulatorState
 ~&gt; Eff
      (LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs))
-&gt; Eff
     (State ChainIndexEmulatorState
        : LogMsg ChainIndexLog : State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
   ~&gt; Eff
        (LogMsg ChainIndexLog
           : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
           : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' EmulatorState ChainIndexEmulatorState
-&gt; State ChainIndexEmulatorState
   ~&gt; Eff
        (LogMsg ChainIndexLog
           : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
           : effs)
forall s2 (effs :: [* -&gt; *]) s1.
Member (State s2) effs =&gt;
Lens' s2 s1 -&gt; State s1 ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">handleZoomedState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; Lens' EmulatorState WalletState
</span><a href="Wallet.Emulator.MultiAgent.html#walletState"><span class="hs-identifier hs-var">walletState</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828121"><span class="hs-identifier hs-var">wallet</span></a></span><span> </span><span class="annot"><span class="annottext">((WalletState -&gt; f WalletState)
 -&gt; EmulatorState -&gt; f EmulatorState)
-&gt; ((ChainIndexEmulatorState -&gt; f ChainIndexEmulatorState)
    -&gt; WalletState -&gt; f WalletState)
-&gt; (ChainIndexEmulatorState -&gt; f ChainIndexEmulatorState)
-&gt; EmulatorState
-&gt; f EmulatorState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainIndexEmulatorState -&gt; f ChainIndexEmulatorState)
-&gt; WalletState -&gt; f WalletState
Lens' WalletState ChainIndexEmulatorState
</span><a href="Wallet.Emulator.Wallet.html#chainIndexEmulatorState"><span class="hs-identifier hs-var">Wallet.chainIndexEmulatorState</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-406"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (LogMsg ChainIndexLog
     : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
     : effs)
  x
-&gt; (Eff
      (LogMsg ChainIndexLog
         : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
         : effs)
      x
    -&gt; Eff
         (State (Maybe SigningProcess)
            : Writer [LogMessage EmulatorEvent] : effs)
         x)
-&gt; Eff
     (State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
     x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(LogMsg ChainIndexLog
 ~&gt; Eff
      (State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs))
-&gt; Eff
     (LogMsg ChainIndexLog
        : State (Maybe SigningProcess) : Writer [LogMessage EmulatorEvent]
        : effs)
   ~&gt; Eff
        (State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ChainIndexLog -&gt; EmulatorEvent')
-&gt; LogMsg ChainIndexLog
   ~&gt; Eff
        (State (Maybe SigningProcess)
           : Writer [LogMessage EmulatorEvent] : effs)
forall a b (effs :: [* -&gt; *]).
Member (LogMsg b) effs =&gt;
(a -&gt; b) -&gt; LogMsg a ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">mapLog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AReview EmulatorEvent' ChainIndexLog
-&gt; ChainIndexLog -&gt; EmulatorEvent'
forall b (m :: * -&gt; *) t. MonadReader b m =&gt; AReview t b -&gt; m t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">review</span></a></span><span> </span><span class="annot"><span class="annottext">AReview EmulatorEvent' ChainIndexLog
</span><a href="#local-6989586621680828117"><span class="hs-identifier hs-var">p3</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-407"></span><span>            </span><span class="annot"><span class="annottext">Eff
  (State (Maybe SigningProcess)
     : Writer [LogMessage EmulatorEvent] : effs)
  x
-&gt; (Eff
      (State (Maybe SigningProcess)
         : Writer [LogMessage EmulatorEvent] : effs)
      x
    -&gt; Eff (Writer [LogMessage EmulatorEvent] : effs) x)
-&gt; Eff (Writer [LogMessage EmulatorEvent] : effs) x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(State (Maybe SigningProcess)
 ~&gt; Eff (Writer [LogMessage EmulatorEvent] : effs))
-&gt; Eff
     (State (Maybe SigningProcess)
        : Writer [LogMessage EmulatorEvent] : effs)
   ~&gt; Eff (Writer [LogMessage EmulatorEvent] : effs)
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' EmulatorState (Maybe SigningProcess)
-&gt; State (Maybe SigningProcess)
   ~&gt; Eff (Writer [LogMessage EmulatorEvent] : effs)
forall s2 (effs :: [* -&gt; *]) s1.
Member (State s2) effs =&gt;
Lens' s2 s1 -&gt; State s1 ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">handleZoomedState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; Lens' EmulatorState WalletState
</span><a href="Wallet.Emulator.MultiAgent.html#walletState"><span class="hs-identifier hs-var">walletState</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828121"><span class="hs-identifier hs-var">wallet</span></a></span><span> </span><span class="annot"><span class="annottext">((WalletState -&gt; f WalletState)
 -&gt; EmulatorState -&gt; f EmulatorState)
-&gt; ((Maybe SigningProcess -&gt; f (Maybe SigningProcess))
    -&gt; WalletState -&gt; f WalletState)
-&gt; (Maybe SigningProcess -&gt; f (Maybe SigningProcess))
-&gt; EmulatorState
-&gt; f EmulatorState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe SigningProcess -&gt; f (Maybe SigningProcess))
-&gt; WalletState -&gt; f WalletState
Lens' WalletState (Maybe SigningProcess)
</span><a href="Wallet.Emulator.Wallet.html#signingProcess"><span class="hs-identifier hs-var">Wallet.signingProcess</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-408"></span><span>            </span><span class="annot"><span class="annottext">Eff (Writer [LogMessage EmulatorEvent] : effs) x
-&gt; (Eff (Writer [LogMessage EmulatorEvent] : effs) x -&gt; Eff effs x)
-&gt; Eff effs x
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(Writer [LogMessage EmulatorEvent] ~&gt; Eff effs)
-&gt; Eff (Writer [LogMessage EmulatorEvent] : effs) ~&gt; Eff effs
forall (eff :: * -&gt; *) (effs :: [* -&gt; *]).
(eff ~&gt; Eff effs) -&gt; Eff (eff : effs) ~&gt; Eff effs
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Setter' EmulatorState [LogMessage EmulatorEvent]
-&gt; Writer [LogMessage EmulatorEvent] ~&gt; Eff effs
forall s1 s2 (effs :: [* -&gt; *]).
(Monoid s1, Member (State s2) effs) =&gt;
Setter' s2 s1 -&gt; Writer s1 ~&gt; Eff effs
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">writeIntoState</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' EmulatorState [LogMessage EmulatorEvent]
Setter' EmulatorState [LogMessage EmulatorEvent]
</span><a href="Wallet.Emulator.MultiAgent.html#emulatorLog"><span class="hs-identifier hs-var">emulatorLog</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-409"></span><span>
</span><span id="line-410"></span><span class="hs-comment">-- | Issue an 'Assertion'.</span><span>
</span><span id="line-411"></span><span id="local-6989586621680828527"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#assert"><span class="hs-identifier hs-type">assert</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Members</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffs"><span class="hs-identifier hs-type">MultiAgentEffs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828527"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#Assertion"><span class="hs-identifier hs-type">Assertion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828527"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-412"></span><span id="assert"><span class="annot"><span class="annottext">assert :: Assertion -&gt; Eff effs ()
</span><a href="Wallet.Emulator.MultiAgent.html#assert"><span class="hs-identifier hs-var hs-var">assert</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#IsValidated"><span class="hs-identifier hs-type">IsValidated</span></a></span><span> </span><span id="local-6989586621680828108"><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680828108"><span class="hs-identifier hs-var">txn</span></a></span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CardanoTx -&gt; Eff effs ()
forall (effs :: [* -&gt; *]).
Members MultiAgentEffs effs =&gt;
CardanoTx -&gt; Eff effs ()
</span><a href="Wallet.Emulator.MultiAgent.html#isValidated"><span class="hs-identifier hs-var">isValidated</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680828108"><span class="hs-identifier hs-var">txn</span></a></span><span>
</span><span id="line-413"></span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#OwnFundsEqual"><span class="hs-identifier hs-type">OwnFundsEqual</span></a></span><span> </span><span id="local-6989586621680828106"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828106"><span class="hs-identifier hs-var">wallet</span></a></span></span><span> </span><span id="local-6989586621680828105"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828105"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Value -&gt; Eff effs ()
forall (effs :: [* -&gt; *]).
Members MultiAgentEffs effs =&gt;
Wallet -&gt; Value -&gt; Eff effs ()
</span><a href="Wallet.Emulator.MultiAgent.html#ownFundsEqual"><span class="hs-identifier hs-var">ownFundsEqual</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828106"><span class="hs-identifier hs-var">wallet</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828105"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span class="hs-comment">-- | Issue an assertion that the funds for a given wallet have the given value.</span><span>
</span><span id="line-416"></span><span id="local-6989586621680828501"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#ownFundsEqual"><span class="hs-identifier hs-type">ownFundsEqual</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Members</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffs"><span class="hs-identifier hs-type">MultiAgentEffs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828501"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Wallet.Emulator.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828501"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-417"></span><span id="ownFundsEqual"><span class="annot"><span class="annottext">ownFundsEqual :: Wallet -&gt; Value -&gt; Eff effs ()
</span><a href="Wallet.Emulator.MultiAgent.html#ownFundsEqual"><span class="hs-identifier hs-var hs-var">ownFundsEqual</span></a></span></span><span> </span><span id="local-6989586621680828103"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828103"><span class="hs-identifier hs-var">wallet</span></a></span></span><span> </span><span id="local-6989586621680828102"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828102"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-418"></span><span>    </span><span id="local-6989586621680828101"><span class="annot"><span class="annottext">EmulatorState
</span><a href="#local-6989586621680828101"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Eff effs EmulatorState
forall s (effs :: [* -&gt; *]). Member (State s) effs =&gt; Eff effs s
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-419"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680828100"><span class="annot"><span class="annottext">total :: Value
</span><a href="#local-6989586621680828100"><span class="hs-identifier hs-var hs-var">total</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((CardanoTx, TxOut) -&gt; Value)
-&gt; Map TxOutRef (CardanoTx, TxOut) -&gt; Value
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">foldMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOut -&gt; Value
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">txOutValue</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOut -&gt; Value)
-&gt; ((CardanoTx, TxOut) -&gt; TxOut) -&gt; (CardanoTx, TxOut) -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(CardanoTx, TxOut) -&gt; TxOut
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Map TxOutRef (CardanoTx, TxOut) -&gt; Value)
-&gt; Map TxOutRef (CardanoTx, TxOut) -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorState
</span><a href="#local-6989586621680828101"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorState
-&gt; Getting
     (Map TxOutRef (CardanoTx, TxOut))
     EmulatorState
     (Map TxOutRef (CardanoTx, TxOut))
-&gt; Map TxOutRef (CardanoTx, TxOut)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(AddressMap -&gt; Const (Map TxOutRef (CardanoTx, TxOut)) AddressMap)
-&gt; EmulatorState
-&gt; Const (Map TxOutRef (CardanoTx, TxOut)) EmulatorState
Getter EmulatorState AddressMap
</span><a href="Wallet.Emulator.MultiAgent.html#chainUtxo"><span class="hs-identifier hs-var">chainUtxo</span></a></span><span> </span><span class="annot"><span class="annottext">((AddressMap -&gt; Const (Map TxOutRef (CardanoTx, TxOut)) AddressMap)
 -&gt; EmulatorState
 -&gt; Const (Map TxOutRef (CardanoTx, TxOut)) EmulatorState)
-&gt; Getting
     (Map TxOutRef (CardanoTx, TxOut))
     AddressMap
     (Map TxOutRef (CardanoTx, TxOut))
-&gt; Getting
     (Map TxOutRef (CardanoTx, TxOut))
     EmulatorState
     (Map TxOutRef (CardanoTx, TxOut))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoAddress
-&gt; Lens' AddressMap (Map TxOutRef (CardanoTx, TxOut))
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">AM.fundsAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; CardanoAddress
</span><a href="Wallet.Emulator.Wallet.html#mockWalletAddress"><span class="hs-identifier hs-var">Wallet.mockWalletAddress</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828103"><span class="hs-identifier hs-var">wallet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828102"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828100"><span class="hs-identifier hs-var">total</span></a></span><span>
</span><span id="line-421"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">() -&gt; Eff effs ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-422"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">AssertionError -&gt; Eff effs ()
forall e (effs :: [* -&gt; *]) a.
Member (Error e) effs =&gt;
e -&gt; Eff effs a
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="annot"><span class="annottext">(AssertionError -&gt; Eff effs ()) -&gt; AssertionError -&gt; Eff effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; AssertionError
</span><a href="Plutus.Contract.Error.html#GenericAssertion"><span class="hs-identifier hs-var">GenericAssertion</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; AssertionError) -&gt; Text -&gt; AssertionError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-var">T.unwords</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Funds in wallet&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; Text
forall a. Show a =&gt; a -&gt; Text
</span><a href="Data.Text.Extras.html#tshow"><span class="hs-identifier hs-var">tshow</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621680828103"><span class="hs-identifier hs-var">wallet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;were&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Text
forall a. Show a =&gt; a -&gt; Text
</span><a href="Data.Text.Extras.html#tshow"><span class="hs-identifier hs-var">tshow</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828100"><span class="hs-identifier hs-var">total</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;. Expected:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Text
forall a. Show a =&gt; a -&gt; Text
</span><a href="Data.Text.Extras.html#tshow"><span class="hs-identifier hs-var">tshow</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680828102"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-423"></span><span>
</span><span id="line-424"></span><span class="hs-comment">-- | Issue an assertion that the given transaction has been validated.</span><span>
</span><span id="line-425"></span><span id="local-6989586621680828502"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#isValidated"><span class="hs-identifier hs-type">isValidated</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Members</span></a></span><span> </span><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#MultiAgentEffs"><span class="hs-identifier hs-type">MultiAgentEffs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828502"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-type">CardanoTx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-type">Eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680828502"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-426"></span><span id="isValidated"><span class="annot"><span class="annottext">isValidated :: CardanoTx -&gt; Eff effs ()
</span><a href="Wallet.Emulator.MultiAgent.html#isValidated"><span class="hs-identifier hs-var hs-var">isValidated</span></a></span></span><span> </span><span id="local-6989586621680828098"><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680828098"><span class="hs-identifier hs-var">txn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-427"></span><span>    </span><span id="local-6989586621680828097"><span class="annot"><span class="annottext">EmulatorState
</span><a href="#local-6989586621680828097"><span class="hs-identifier hs-var">emState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Eff effs EmulatorState
forall s (effs :: [* -&gt; *]). Member (State s) effs =&gt; Eff effs s
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-428"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">OnChainTx -&gt; [OnChainTx] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">notElem</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoTx -&gt; OnChainTx
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Valid</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680828098"><span class="hs-identifier hs-var">txn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Blockchain -&gt; [OnChainTx]
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">join</span></a></span><span> </span><span class="annot"><span class="annottext">(Blockchain -&gt; [OnChainTx]) -&gt; Blockchain -&gt; [OnChainTx]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorState
</span><a href="#local-6989586621680828097"><span class="hs-identifier hs-var">emState</span></a></span><span> </span><span class="annot"><span class="annottext">EmulatorState
-&gt; Getting Blockchain EmulatorState Blockchain -&gt; Blockchain
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainState -&gt; Const Blockchain ChainState)
-&gt; EmulatorState -&gt; Const Blockchain EmulatorState
Lens' EmulatorState ChainState
</span><a href="Wallet.Emulator.MultiAgent.html#chainState"><span class="hs-identifier hs-var">chainState</span></a></span><span> </span><span class="annot"><span class="annottext">((ChainState -&gt; Const Blockchain ChainState)
 -&gt; EmulatorState -&gt; Const Blockchain EmulatorState)
-&gt; ((Blockchain -&gt; Const Blockchain Blockchain)
    -&gt; ChainState -&gt; Const Blockchain ChainState)
-&gt; Getting Blockchain EmulatorState Blockchain
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Blockchain -&gt; Const Blockchain Blockchain)
-&gt; ChainState -&gt; Const Blockchain ChainState
Lens' ChainState Blockchain
</span><a href="../../../../cardano-node-emulator/html/src"><span class="hs-identifier hs-var">Chain.chainNewestFirst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-429"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">AssertionError -&gt; Eff effs ()
forall e (effs :: [* -&gt; *]) a.
Member (Error e) effs =&gt;
e -&gt; Eff effs a
</span><a href="../file:///nix/store/bvsf6n0jyy81dv6f71yfdy6shyr2f8sf-freer-simple-lib-freer-simple-1.2.1.2-haddock-doc/share/doc/freer-simple/html/src"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="annot"><span class="annottext">(AssertionError -&gt; Eff effs ()) -&gt; AssertionError -&gt; Eff effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; AssertionError
</span><a href="Plutus.Contract.Error.html#GenericAssertion"><span class="hs-identifier hs-var">GenericAssertion</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; AssertionError) -&gt; Text -&gt; AssertionError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Txn not validated: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///nix/store/71gg7bx8f4jr17lsf2w77qrjmdg3xvan-text-lib-text-1.2.4.1-haddock-doc/share/doc/text/html/src"><span class="hs-identifier hs-var">T.pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoTx -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680828098"><span class="hs-identifier hs-var">txn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-430"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">() -&gt; Eff effs ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span id="local-6989586621680828093"><span class="annot"><a href="Wallet.Emulator.MultiAgent.html#_singleton"><span class="hs-identifier hs-type">_singleton</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-type">AReview</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680828093"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680828093"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-433"></span><span id="_singleton"><span class="annot"><span class="annottext">_singleton :: AReview [a] a
</span><a href="Wallet.Emulator.MultiAgent.html#_singleton"><span class="hs-identifier hs-var hs-var">_singleton</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; [a]) -&gt; AReview [a] a
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) b t s a.
(Profunctor p, Bifunctor p, Functor f) =&gt;
(b -&gt; t) -&gt; Optic p f s t a b
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">unto</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; [a]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-434"></span></pre></body></html>
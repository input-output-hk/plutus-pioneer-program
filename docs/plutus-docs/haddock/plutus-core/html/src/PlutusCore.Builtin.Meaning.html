<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- GHC doesn't like the definition of 'makeBuiltinMeaning'.</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-redundant-constraints #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes       #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE DataKinds                 #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE ExistentialQuantification #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances         #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE FunctionalDependencies    #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE PolyKinds                 #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE StandaloneKindSignatures  #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications          #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies              #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators             #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances      #-}</span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-comment">-- DO NOT enable @StrictData@ in this file as it makes the evaluator slower (even with @~@ put in</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- 'BuiltinRuntime' in the places where it's necessary to have laziness for evaluators to work).</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">PlutusCore.Builtin.Meaning</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusPrelude.html"><span class="hs-identifier">PlutusPrelude</span></a></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Elaborate.html"><span class="hs-identifier">PlutusCore.Builtin.Elaborate</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.HasConstant.html"><span class="hs-identifier">PlutusCore.Builtin.HasConstant</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownKind.html"><span class="hs-identifier">PlutusCore.Builtin.KnownKind</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html"><span class="hs-identifier">PlutusCore.Builtin.KnownType</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownTypeAst.html"><span class="hs-identifier">PlutusCore.Builtin.KnownTypeAst</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Runtime.html"><span class="hs-identifier">PlutusCore.Builtin.Runtime</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html"><span class="hs-identifier">PlutusCore.Builtin.TypeScheme</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Core.html"><span class="hs-identifier">PlutusCore.Core</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Name.html"><span class="hs-identifier">PlutusCore.Name</span></a></span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier">Control.Monad.Except</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/array-0.5.4.0/src"><span class="hs-identifier">Data.Array</span></a></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Kind</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">GHC</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Proxy</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/7jxq3q4v9r667f1gjjg8khfgjizdjamv-some-lib-some-1.0.2-haddock-doc/share/doc/some/html/src"><span class="hs-identifier">Data.Some.GADT</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Exts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier">inline</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.TypeLits</span></a></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-comment">-- | Turn a list of Haskell types @args@ into a functional type ending in @res@.</span><span>
</span><span id="line-42"></span><span class="hs-comment">--</span><span>
</span><span id="line-43"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XDataKinds</span><span>
</span><span id="line-44"></span><span class="hs-comment">-- &gt;&gt;&gt; :kind! FoldArgs [Text, Bool] Integer</span><span>
</span><span id="line-45"></span><span class="hs-comment">-- FoldArgs [Text, Bool] Integer :: *</span><span>
</span><span id="line-46"></span><span class="hs-comment">-- = Text -&gt; Bool -&gt; Integer</span><span>
</span><span id="line-47"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="FoldArgs"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#FoldArgs"><span class="hs-identifier hs-var">FoldArgs</span></a></span></span><span> </span><span id="local-6989586621680956709"><span class="annot"><a href="#local-6989586621680956709"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span id="local-6989586621680956708"><span class="annot"><a href="#local-6989586621680956708"><span class="hs-identifier hs-type">res</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-48"></span><span>    </span><span id="FoldArgs"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#FoldArgs"><span class="hs-identifier hs-var">FoldArgs</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span>           </span><span id="local-6989586621680956707"><span class="annot"><a href="#local-6989586621680956707"><span class="hs-identifier hs-type hs-type">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680956707"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-49"></span><span>    </span><span id="FoldArgs"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#FoldArgs"><span class="hs-identifier hs-var">FoldArgs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680956706"><span class="annot"><a href="#local-6989586621680956706"><span class="hs-identifier hs-type hs-type">arg</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span id="local-6989586621680956705"><span class="annot"><a href="#local-6989586621680956705"><span class="hs-identifier hs-type hs-type">args</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680956704"><span class="annot"><a href="#local-6989586621680956704"><span class="hs-identifier hs-type hs-type">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680956706"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#FoldArgs"><span class="hs-identifier hs-type">FoldArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956705"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956704"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-comment">-- | The meaning of a built-in function consists of its type represented as a 'TypeScheme',</span><span>
</span><span id="line-52"></span><span class="hs-comment">-- its Haskell denotation and a costing function (both in uninstantiated form).</span><span>
</span><span id="line-53"></span><span class="hs-comment">--</span><span>
</span><span id="line-54"></span><span class="hs-comment">-- The 'TypeScheme' of a built-in function is used for</span><span>
</span><span id="line-55"></span><span class="hs-comment">--</span><span>
</span><span id="line-56"></span><span class="hs-comment">-- 1. computing the PLC type of the function to be used during type checking</span><span>
</span><span id="line-57"></span><span class="hs-comment">-- 2. checking equality of the expected type of an argument of a builtin and the actual one</span><span>
</span><span id="line-58"></span><span class="hs-comment">--    during evaluation, so that we can avoid unsafe-coercing</span><span>
</span><span id="line-59"></span><span class="hs-comment">--</span><span>
</span><span id="line-60"></span><span class="hs-comment">-- A costing function for a built-in function is computed from a cost model for all built-in</span><span>
</span><span id="line-61"></span><span class="hs-comment">-- functions from a certain set, hence the @cost@ parameter.</span><span>
</span><span id="line-62"></span><span class="hs-keyword">data</span><span> </span><span id="BuiltinMeaning"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#BuiltinMeaning"><span class="hs-identifier hs-var">BuiltinMeaning</span></a></span></span><span> </span><span id="local-6989586621680956743"><span class="annot"><a href="#local-6989586621680956743"><span class="hs-identifier hs-type">val</span></a></span></span><span> </span><span id="local-6989586621680956740"><span class="annot"><a href="#local-6989586621680956740"><span class="hs-identifier hs-type">cost</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680956742"><span class="annot"><a href="#local-6989586621680956742"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span id="local-6989586621680956741"><span class="annot"><a href="#local-6989586621680956741"><span class="hs-identifier hs-type">res</span></a></span></span><span class="hs-operator">.</span><span> </span><span id="BuiltinMeaning"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#BuiltinMeaning"><span class="hs-identifier hs-var">BuiltinMeaning</span></a></span></span><span>
</span><span id="line-64"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeScheme"><span class="hs-identifier hs-type">TypeScheme</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956743"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956742"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956741"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#FoldArgs"><span class="hs-identifier hs-type">FoldArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956742"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956741"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Runtime.html#BuiltinRuntimeOptions"><span class="hs-identifier hs-type">BuiltinRuntimeOptions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#Length"><span class="hs-identifier hs-type">Length</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956742"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680956743"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956740"><span class="hs-identifier hs-type">cost</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-comment">-- | A type class for \&quot;each function from a set of built-in functions has a 'BuiltinMeaning'\&quot;.</span><span>
</span><span id="line-69"></span><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Bounded</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956865"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Enum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956865"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956865"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="ToBuiltinMeaning"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#ToBuiltinMeaning"><span class="hs-identifier hs-var">ToBuiltinMeaning</span></a></span></span><span> </span><span id="local-6989586621680956866"><span class="annot"><a href="#local-6989586621680956866"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="local-6989586621680956865"><span class="annot"><a href="#local-6989586621680956865"><span class="hs-identifier hs-type">fun</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-comment">-- | The @cost@ part of 'BuiltinMeaning'.</span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="CostingPart"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#CostingPart"><span class="hs-identifier hs-var">CostingPart</span></a></span></span><span> </span><span id="local-6989586621680956866"><span class="annot"><a href="#local-6989586621680956866"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="local-6989586621680956865"><span class="annot"><a href="#local-6989586621680956865"><span class="hs-identifier hs-type">fun</span></a></span></span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-comment">-- | Get the 'BuiltinMeaning' of a built-in function.</span><span>
</span><span id="line-74"></span><span>    </span><span id="local-6989586621680956863"><span id="toBuiltinMeaning"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#toBuiltinMeaning"><span class="hs-identifier hs-type">toBuiltinMeaning</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.HasConstant.html#HasConstantIn"><span class="hs-identifier hs-type">HasConstantIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956866"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956863"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680956865"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#BuiltinMeaning"><span class="hs-identifier hs-type">BuiltinMeaning</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956863"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#CostingPart"><span class="hs-identifier hs-type">CostingPart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956866"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956865"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="hs-comment">-- | Get the type of a built-in function.</span><span>
</span><span id="line-77"></span><span id="local-6989586621680956700"><span id="local-6989586621680956701"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#typeOfBuiltinFunction"><span class="hs-identifier hs-type">typeOfBuiltinFunction</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#ToBuiltinMeaning"><span class="hs-identifier hs-type">ToBuiltinMeaning</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956701"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956700"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680956700"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956701"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-78"></span><span id="typeOfBuiltinFunction"><span class="annot"><span class="annottext">typeOfBuiltinFunction :: fun -&gt; Type TyName uni ()
</span><a href="PlutusCore.Builtin.Meaning.html#typeOfBuiltinFunction"><span class="hs-identifier hs-var hs-var">typeOfBuiltinFunction</span></a></span></span><span> </span><span id="local-6989586621680956698"><span class="annot"><span class="annottext">fun
</span><a href="#local-6989586621680956698"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">fun
-&gt; BuiltinMeaning
     (Term TyName Name uni Any ()) (CostingPart uni fun)
forall (uni :: * -&gt; *) fun val.
(ToBuiltinMeaning uni fun, HasConstantIn uni val) =&gt;
fun -&gt; BuiltinMeaning val (CostingPart uni fun)
</span><a href="PlutusCore.Builtin.Meaning.html#toBuiltinMeaning"><span class="hs-identifier hs-var">toBuiltinMeaning</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">fun
</span><a href="#local-6989586621680956698"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-79"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#BuiltinMeaning"><span class="hs-identifier hs-type">BuiltinMeaning</span></a></span><span> </span><span id="local-6989586621680956697"><span class="annot"><span class="annottext">TypeScheme (Term TyName Name uni Any ()) args res
</span><a href="#local-6989586621680956697"><span class="hs-identifier hs-var">sch</span></a></span></span><span> </span><span class="annot"><span class="annottext">FoldArgs args res
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">BuiltinRuntimeOptions
  (Length args) (Term TyName Name uni Any ()) (CostingPart uni fun)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TypeScheme (Term TyName Name uni Any ()) args res
-&gt; Type TyName (UniOf (Term TyName Name uni Any ())) ()
forall val (args :: [*]) res.
TypeScheme val args res -&gt; Type TyName (UniOf val) ()
</span><a href="PlutusCore.Builtin.TypeScheme.html#typeSchemeToType"><span class="hs-identifier hs-var">typeSchemeToType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeScheme (Term TyName Name uni Any ()) args res
</span><a href="#local-6989586621680956697"><span class="hs-identifier hs-var">sch</span></a></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-comment">{- Note [Automatic derivation of type schemes]
We use two type classes for automatic derivation of type schemes: 'KnownMonotype' and
'KnownPolytype'. The terminology is due to https://en.wikipedia.org/wiki/Hindley%E2%80%93Milner_type_system#The_Hindley%E2%80%93Milner_type_system

'KnownMonotype' and 'KnownPolytype' are responsible for deriving monomorphic and polymorphic types,
respectively. 'KnownMonotype' turns every argument that the Haskell denotation of a builtin
receives into a 'TypeSchemeArrow'. We extract the arguments from the type of the Haskell denotation
using the 'GetArgs' type family. 'KnownPolytype' turns every bound variable into a 'TypeSchemeAll'.
We extract variables from the type of the Haskell denotation using the 'ToBinds' type family
(in particular, see the @ToBinds (TypeScheme val args res)@ type instances). Variables are
collected in the order that they appear in (i.e. just like in Haskell). For example, processing
a type signature like

    const
        :: ( a ~ Opaque val (TyVarRep ('TyNameRep &quot;a&quot; 0))
           , b ~ Opaque val (TyVarRep ('TyNameRep &quot;b&quot; 1))
           )
        =&gt; b -&gt; a -&gt; b

with 'ToBinds' results in the following list of bindings:

    '[ 'Some ('TyNameRep &quot;b&quot; 1), 'Some ('TyNameRep &quot;a&quot; 0) ]

Higher-kinded type variables are fully supported.

The implementations of the 'KnownMonotype' and 'KnownPolytype' classes are structured in an
inference-friendly manner:

1. we compute @args@ using a type family ('GetArgs') in order to dispatch on the list of
   arguments of a built-in function in a way that doesn't force us to introduce overlapping
   instances
2. the @a -&gt; res@ dependency allows us not to compute @res@ using a type family like with @args@
3. the @args res -&gt; a@ dependency allows us not to mention @a@ in the type of 'knownMonotype'

Polymorphic built-in functions are handled via automatic specialization of all Haskell type
variables as types representing PLC type variables, as long as each Haskell variable appears as a
left argument to @(-&gt;)@ and is not buried somewhere inside (i.e. automatic derivation can handle
neither @f a@, @ListRep a@, nor @f Int@. Nor is @a -&gt; b@ allowed to the left of an @(-&gt;)@.
Where all lower-case names are Haskell type variables). We'll call functions having such types
&quot;simply-polymorphic&quot;. See the docs of 'EnumerateFromTo' for details.

The end result is that the user only has to specify the type of the denotation of a built-in
function and the 'TypeScheme' of the built-in function will be derived automatically. And in the
monomorphic and simply-polymorphic cases no types need to be specified at all.
-}</span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="hs-comment">-- | Compute the length of a type-level list.</span><span>
</span><span id="line-128"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#Length"><span class="hs-identifier hs-type">Length</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680956695"><span class="annot"><a href="#local-6989586621680956695"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680956695"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Runtime.html#Peano"><span class="hs-identifier hs-type">Peano</span></a></span><span>
</span><span id="line-129"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="Length"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#Length"><span class="hs-identifier hs-var">Length</span></a></span></span><span> </span><span id="local-6989586621680956694"><span class="annot"><a href="#local-6989586621680956694"><span class="hs-identifier hs-type">xs</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-130"></span><span>    </span><span id="Length"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#Length"><span class="hs-identifier hs-var">Length</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="PlutusCore.Builtin.Runtime.html#Z"><span class="hs-identifier hs-type">Z</span></a></span><span>
</span><span id="line-131"></span><span>    </span><span id="Length"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#Length"><span class="hs-identifier hs-var">Length</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span id="local-6989586621680956693"><span class="annot"><a href="#local-6989586621680956693"><span class="hs-identifier hs-type hs-type">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="PlutusCore.Builtin.Runtime.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#Length"><span class="hs-identifier hs-type">Length</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956693"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-comment">-- | Chop a function type to get a list of its argument types.</span><span>
</span><span id="line-134"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#GetArgs"><span class="hs-identifier hs-type">GetArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">GHC.Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">GHC.Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-135"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="GetArgs"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#GetArgs"><span class="hs-identifier hs-var">GetArgs</span></a></span></span><span> </span><span id="local-6989586621680956691"><span class="annot"><a href="#local-6989586621680956691"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-136"></span><span>    </span><span id="GetArgs"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#GetArgs"><span class="hs-identifier hs-var">GetArgs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680956690"><span class="annot"><a href="#local-6989586621680956690"><span class="hs-identifier hs-type hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621680956689"><span class="annot"><a href="#local-6989586621680956689"><span class="hs-identifier hs-type hs-type">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680956690"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#GetArgs"><span class="hs-identifier hs-type">GetArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956689"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-137"></span><span>    </span><span id="GetArgs"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#GetArgs"><span class="hs-identifier hs-var">GetArgs</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="hs-comment">-- | A class that allows us to derive a monotype for a builtin.</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- We could've easily computed a 'RuntimeScheme' from a 'TypeScheme' but not statically (due to</span><span>
</span><span id="line-141"></span><span class="hs-comment">-- unfolding not working for recursive functions and 'TypeScheme' is recursive, i.e. the conversion</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- can only be a recursive function), and so it would cause us to retain a lot of</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- evaluation-irrelevant stuff in the constructors of 'TypeScheme', which makes it much harder to</span><span>
</span><span id="line-144"></span><span class="hs-comment">-- read the Core. Technically speaking, we could convert a 'TypeScheme' to a 'RuntimeScheme'</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- statically if we changed the definition of 'TypeScheme' and made it a singleton, but then the</span><span>
</span><span id="line-146"></span><span class="hs-comment">-- conversion function would have to become a class anyway and we'd just replicate what we have here,</span><span>
</span><span id="line-147"></span><span class="hs-comment">-- except in a much more complicated way.</span><span>
</span><span id="line-148"></span><span class="hs-comment">-- It's also more efficient to generate 'RuntimeScheme's directly, but that shouldn't really matter, -- given that they computed only once and cached afterwards.</span><span>
</span><span id="line-149"></span><span class="hs-comment">--</span><span>
</span><span id="line-150"></span><span class="hs-comment">-- Similarly, we could've computed 'toImmediateF' and 'toDeferredF' from a 'TypeScheme' but not</span><span>
</span><span id="line-151"></span><span class="hs-comment">-- statically again, and that would break inlining and basically all the optimization.</span><span>
</span><span id="line-152"></span><span class="hs-keyword">class</span><span> </span><span id="KnownMonotype"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#KnownMonotype"><span class="hs-identifier hs-var">KnownMonotype</span></a></span></span><span> </span><span id="local-6989586621680956843"><span class="annot"><a href="#local-6989586621680956843"><span class="hs-identifier hs-type">val</span></a></span></span><span> </span><span id="local-6989586621680956842"><span class="annot"><a href="#local-6989586621680956842"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span id="local-6989586621680956841"><span class="annot"><a href="#local-6989586621680956841"><span class="hs-identifier hs-type">res</span></a></span></span><span> </span><span id="local-6989586621680956840"><span class="annot"><a href="#local-6989586621680956840"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="#local-6989586621680956842"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956841"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680956840"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680956840"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680956841"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-153"></span><span>    </span><span id="knownMonotype"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#knownMonotype"><span class="hs-identifier hs-type">knownMonotype</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeScheme"><span class="hs-identifier hs-type">TypeScheme</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956843"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956842"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956841"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-154"></span><span>    </span><span id="knownMonoruntime"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#knownMonoruntime"><span class="hs-identifier hs-type">knownMonoruntime</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Runtime.html#RuntimeScheme"><span class="hs-identifier hs-type">RuntimeScheme</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#Length"><span class="hs-identifier hs-type">Length</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956842"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-comment">-- | Convert the denotation of a builtin to its runtime counterpart with immediate unlifting.</span><span>
</span><span id="line-157"></span><span>    </span><span id="toImmediateF"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#toImmediateF"><span class="hs-identifier hs-type">toImmediateF</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#FoldArgs"><span class="hs-identifier hs-type">FoldArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956842"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956841"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Runtime.html#ToRuntimeDenotationType"><span class="hs-identifier hs-type">ToRuntimeDenotationType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956843"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#Length"><span class="hs-identifier hs-type">Length</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956842"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-comment">-- | Convert the denotation of a builtin to its runtime counterpart with deferred unlifting.</span><span>
</span><span id="line-160"></span><span>    </span><span class="hs-comment">-- The argument is in 'ReadKnownM', because that's what deferred unlifting amounts to:</span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-comment">-- passing the action returning the builtin application around until full saturation, which is</span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-comment">-- when the action actually gets run.</span><span>
</span><span id="line-163"></span><span>    </span><span id="toDeferredF"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#toDeferredF"><span class="hs-identifier hs-type">toDeferredF</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnownM"><span class="hs-identifier hs-type">ReadKnownM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#FoldArgs"><span class="hs-identifier hs-type">FoldArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956842"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956841"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Runtime.html#ToRuntimeDenotationType"><span class="hs-identifier hs-type">ToRuntimeDenotationType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956843"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#Length"><span class="hs-identifier hs-type">Length</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956842"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="hs-comment">-- | Once we've run out of term-level arguments, we return a 'TypeSchemeResult'.</span><span>
</span><span id="line-166"></span><span id="local-6989586621680956682"><span id="local-6989586621680956683"><span id="local-6989586621680956684"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680956684"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956683"><span class="hs-identifier hs-type">res'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownTypeAst.html#KnownTypeAst"><span class="hs-identifier hs-type">KnownTypeAst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956682"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680956684"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnown"><span class="hs-identifier hs-type">MakeKnown</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956682"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956684"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-167"></span><span>            </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#KnownMonotype"><span class="hs-identifier hs-type">KnownMonotype</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956682"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680956684"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956683"><span class="hs-identifier hs-type">res'</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-168"></span><span>    </span><span id="local-6989586621680956676"><span class="annot"><span class="annottext">knownMonotype :: TypeScheme val '[] res
</span><a href="#local-6989586621680956676"><span class="hs-identifier hs-var hs-var hs-var hs-var">knownMonotype</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeScheme val '[] res
forall val res.
(KnownTypeAst (UniOf val) res, MakeKnown val res) =&gt;
TypeScheme val '[] res
</span><a href="PlutusCore.Builtin.TypeScheme.html#TypeSchemeResult"><span class="hs-identifier hs-var">TypeSchemeResult</span></a></span><span>
</span><span id="line-169"></span><span>    </span><span id="local-6989586621680956674"><span class="annot"><span class="annottext">knownMonoruntime :: RuntimeScheme (Length '[])
</span><a href="#local-6989586621680956674"><span class="hs-identifier hs-var hs-var hs-var hs-var">knownMonoruntime</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RuntimeScheme 'Z
RuntimeScheme (Length '[])
</span><a href="PlutusCore.Builtin.Runtime.html#RuntimeSchemeResult"><span class="hs-identifier hs-var">RuntimeSchemeResult</span></a></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span>    </span><span id="local-6989586621680956672"><span class="annot"><span class="annottext">toImmediateF :: FoldArgs '[] res -&gt; ToRuntimeDenotationType val (Length '[])
</span><a href="#local-6989586621680956672"><span class="hs-identifier hs-var hs-var hs-var hs-var">toImmediateF</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; res' -&gt; MakeKnownM () val
forall (uni :: * -&gt; *) val a cause.
MakeKnownIn uni val a =&gt;
Maybe cause -&gt; a -&gt; MakeKnownM cause val
</span><a href="PlutusCore.Builtin.KnownType.html#makeKnown"><span class="hs-identifier hs-var">makeKnown</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Maybe ()
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#toImmediateF"><span class="hs-pragma hs-type">toImmediateF</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-comment">-- For deferred unlifting we need to lift the 'ReadKnownM' action into 'MakeKnownM',</span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-comment">-- hence 'liftEither'.</span><span>
</span><span id="line-176"></span><span>    </span><span id="local-6989586621680956670"><span class="annot"><span class="annottext">toDeferredF :: ReadKnownM () (FoldArgs '[] res)
-&gt; ToRuntimeDenotationType val (Length '[])
</span><a href="#local-6989586621680956670"><span class="hs-identifier hs-var hs-var hs-var hs-var">toDeferredF</span></a></span></span><span> </span><span id="local-6989586621680956669"><span class="annot"><span class="annottext">ReadKnownM () (FoldArgs '[] res)
</span><a href="#local-6989586621680956669"><span class="hs-identifier hs-var">getRes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either (ErrorWithCause KnownTypeError ()) res'
-&gt; ExceptT (ErrorWithCause KnownTypeError ()) Emitter res'
forall e (m :: * -&gt; *) a. MonadError e m =&gt; Either e a -&gt; m a
</span><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier hs-var">liftEither</span></a></span><span> </span><span class="annot"><span class="annottext">Either (ErrorWithCause KnownTypeError ()) res'
ReadKnownM () (FoldArgs '[] res)
</span><a href="#local-6989586621680956669"><span class="hs-identifier hs-var">getRes</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT (ErrorWithCause KnownTypeError ()) Emitter res'
-&gt; (res' -&gt; MakeKnownM () val) -&gt; MakeKnownM () val
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; res' -&gt; MakeKnownM () val
forall (uni :: * -&gt; *) val a cause.
MakeKnownIn uni val a =&gt;
Maybe cause -&gt; a -&gt; MakeKnownM cause val
</span><a href="PlutusCore.Builtin.KnownType.html#makeKnown"><span class="hs-identifier hs-var">makeKnown</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Maybe ()
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#toDeferredF"><span class="hs-pragma hs-type">toDeferredF</span></a></span><span> </span><span class="hs-pragma">#-}</span></span></span></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="hs-comment">-- | Every term-level argument becomes as 'TypeSchemeArrow'.</span><span>
</span><span id="line-180"></span><span id="local-6989586621680956663"><span id="local-6989586621680956664"><span id="local-6989586621680956665"><span id="local-6989586621680956666"><span id="local-6989586621680956667"><span class="hs-keyword">instance</span><span>
</span><span id="line-181"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownTypeAst.html#KnownTypeAst"><span class="hs-identifier hs-type">KnownTypeAst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956667"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680956666"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnown"><span class="hs-identifier hs-type">MakeKnown</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956667"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956666"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnown"><span class="hs-identifier hs-type">ReadKnown</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956667"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956666"><span class="hs-identifier hs-type">arg</span></a></span><span>
</span><span id="line-182"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#KnownMonotype"><span class="hs-identifier hs-type">KnownMonotype</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956667"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956665"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956664"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956663"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-183"></span><span>        </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#KnownMonotype"><span class="hs-identifier hs-type">KnownMonotype</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956667"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680956666"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621680956665"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680956664"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680956666"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680956663"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-184"></span><span>    </span><span id="local-6989586621680956658"><span class="annot"><span class="annottext">knownMonotype :: TypeScheme val (arg : args) res
</span><a href="#local-6989586621680956658"><span class="hs-identifier hs-var hs-var hs-var hs-var">knownMonotype</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeScheme val args res -&gt; TypeScheme val (arg : args) res
forall val arg (args :: [*]) res.
(KnownTypeAst (UniOf val) arg, MakeKnown val arg,
 ReadKnown val arg) =&gt;
TypeScheme val args res -&gt; TypeScheme val (arg : args) res
</span><a href="PlutusCore.Builtin.TypeScheme.html#TypeSchemeArrow"><span class="hs-identifier hs-var">TypeSchemeArrow</span></a></span><span> </span><span class="annot"><span class="annottext">TypeScheme val args res
forall k val (args :: [*]) res (a :: k).
KnownMonotype val args res a =&gt;
TypeScheme val args res
</span><a href="PlutusCore.Builtin.Meaning.html#knownMonotype"><span class="hs-identifier hs-var">knownMonotype</span></a></span><span>
</span><span id="line-185"></span><span>    </span><span id="local-6989586621680956656"><span class="annot"><span class="annottext">knownMonoruntime :: RuntimeScheme (Length (arg : args))
</span><a href="#local-6989586621680956656"><span class="hs-identifier hs-var hs-var hs-var hs-var">knownMonoruntime</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RuntimeScheme (Length args) -&gt; RuntimeScheme ('S (Length args))
forall (n :: Peano). RuntimeScheme n -&gt; RuntimeScheme ('S n)
</span><a href="PlutusCore.Builtin.Runtime.html#RuntimeSchemeArrow"><span class="hs-identifier hs-var">RuntimeSchemeArrow</span></a></span><span> </span><span class="annot"><span class="annottext">(RuntimeScheme (Length args) -&gt; RuntimeScheme ('S (Length args)))
-&gt; RuntimeScheme (Length args) -&gt; RuntimeScheme ('S (Length args))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a.
KnownMonotype val args res a =&gt;
RuntimeScheme (Length args)
forall k val (args :: [*]) res (a :: k).
KnownMonotype val args res a =&gt;
RuntimeScheme (Length args)
</span><a href="PlutusCore.Builtin.Meaning.html#knownMonoruntime"><span class="hs-identifier hs-var">knownMonoruntime</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956667"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956665"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956664"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-comment">-- Unlift, then recurse.</span><span>
</span><span id="line-188"></span><span>    </span><span id="local-6989586621680956654"><span class="annot"><span class="annottext">toImmediateF :: FoldArgs (arg : args) res
-&gt; ToRuntimeDenotationType val (Length (arg : args))
</span><a href="#local-6989586621680956654"><span class="hs-identifier hs-var hs-var hs-var hs-var">toImmediateF</span></a></span></span><span> </span><span id="local-6989586621680956653"><span class="annot"><span class="annottext">FoldArgs (arg : args) res
</span><a href="#local-6989586621680956653"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(arg -&gt; ToRuntimeDenotationType val (Length args))
-&gt; Either (ErrorWithCause KnownTypeError ()) arg
-&gt; Either
     (ErrorWithCause KnownTypeError ())
     (ToRuntimeDenotationType val (Length args))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a.
KnownMonotype val args res a =&gt;
FoldArgs args res -&gt; ToRuntimeDenotationType val (Length args)
forall k val (args :: [*]) res (a :: k).
KnownMonotype val args res a =&gt;
FoldArgs args res -&gt; ToRuntimeDenotationType val (Length args)
</span><a href="PlutusCore.Builtin.Meaning.html#toImmediateF"><span class="hs-identifier hs-var">toImmediateF</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956667"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956665"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956664"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="annot"><span class="annottext">(FoldArgs args res -&gt; ToRuntimeDenotationType val (Length args))
-&gt; (arg -&gt; FoldArgs args res)
-&gt; arg
-&gt; ToRuntimeDenotationType val (Length args)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FoldArgs (arg : args) res
arg -&gt; FoldArgs args res
</span><a href="#local-6989586621680956653"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either (ErrorWithCause KnownTypeError ()) arg
 -&gt; Either
      (ErrorWithCause KnownTypeError ())
      (ToRuntimeDenotationType val (Length args)))
-&gt; (val -&gt; Either (ErrorWithCause KnownTypeError ()) arg)
-&gt; val
-&gt; Either
     (ErrorWithCause KnownTypeError ())
     (ToRuntimeDenotationType val (Length args))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; val -&gt; Either (ErrorWithCause KnownTypeError ()) arg
forall (uni :: * -&gt; *) val a cause.
ReadKnownIn uni val a =&gt;
Maybe cause -&gt; val -&gt; ReadKnownM cause a
</span><a href="PlutusCore.Builtin.KnownType.html#readKnown"><span class="hs-identifier hs-var">readKnown</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Maybe ()
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#toImmediateF"><span class="hs-pragma hs-type">toImmediateF</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-comment">-- Grow the builtin application within the received action and recurse on the result.</span><span>
</span><span id="line-192"></span><span>    </span><span id="local-6989586621680956650"><span class="annot"><span class="annottext">toDeferredF :: ReadKnownM () (FoldArgs (arg : args) res)
-&gt; ToRuntimeDenotationType val (Length (arg : args))
</span><a href="#local-6989586621680956650"><span class="hs-identifier hs-var hs-var hs-var hs-var">toDeferredF</span></a></span></span><span> </span><span id="local-6989586621680956649"><span class="annot"><span class="annottext">ReadKnownM () (FoldArgs (arg : args) res)
</span><a href="#local-6989586621680956649"><span class="hs-identifier hs-var">getF</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680956648"><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621680956648"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-193"></span><span>        </span><span class="hs-comment">-- The bang is very important: without it GHC thinks that the argument may not be needed in</span><span>
</span><span id="line-194"></span><span>        </span><span class="hs-comment">-- the end and so creates a thunk for it, which is not only unnecessary allocation, but also</span><span>
</span><span id="line-195"></span><span>        </span><span class="hs-comment">-- prevents things from being unboxed. So ironically computing the unlifted value strictly</span><span>
</span><span id="line-196"></span><span>        </span><span class="hs-comment">-- is the best way of doing deferred unlifting. All this means that while the resulting</span><span>
</span><span id="line-197"></span><span>        </span><span class="hs-comment">-- 'Either' is only handled upon full saturation and any evaluation failure is only</span><span>
</span><span id="line-198"></span><span>        </span><span class="hs-comment">-- registered when the whole builtin application is evaluated, a Haskell exception will</span><span>
</span><span id="line-199"></span><span>        </span><span class="hs-comment">-- occur the same way as with immediate unlifting. It shouldn't matter though, because a</span><span>
</span><span id="line-200"></span><span>        </span><span class="hs-comment">-- builtin is not supposed to throw an exception at any stage, that would be a bug regardless</span><span>
</span><span id="line-201"></span><span>        </span><span class="hs-comment">-- of how unlifting is aligned.</span><span>
</span><span id="line-202"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-203"></span><span>        </span><span class="hs-comment">-- 'pure' signifies that no failure can occur at this point.</span><span>
</span><span id="line-204"></span><span>        </span><span class="annot"><span class="annottext">ToRuntimeDenotationType val (Length args)
-&gt; Either
     (ErrorWithCause KnownTypeError ())
     (ToRuntimeDenotationType val (Length args))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(ToRuntimeDenotationType val (Length args)
 -&gt; Either
      (ErrorWithCause KnownTypeError ())
      (ToRuntimeDenotationType val (Length args)))
-&gt; (Either (ErrorWithCause KnownTypeError ()) (FoldArgs args res)
    -&gt; ToRuntimeDenotationType val (Length args))
-&gt; Either (ErrorWithCause KnownTypeError ()) (FoldArgs args res)
-&gt; Either
     (ErrorWithCause KnownTypeError ())
     (ToRuntimeDenotationType val (Length args))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a.
KnownMonotype val args res a =&gt;
Either (ErrorWithCause KnownTypeError ()) (FoldArgs args res)
-&gt; ToRuntimeDenotationType val (Length args)
forall k val (args :: [*]) res (a :: k).
KnownMonotype val args res a =&gt;
ReadKnownM () (FoldArgs args res)
-&gt; ToRuntimeDenotationType val (Length args)
</span><a href="PlutusCore.Builtin.Meaning.html#toDeferredF"><span class="hs-identifier hs-var">toDeferredF</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956667"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956665"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956664"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (ErrorWithCause KnownTypeError ()) (FoldArgs args res)
 -&gt; Either
      (ErrorWithCause KnownTypeError ())
      (ToRuntimeDenotationType val (Length args)))
-&gt; Either (ErrorWithCause KnownTypeError ()) (FoldArgs args res)
-&gt; Either
     (ErrorWithCause KnownTypeError ())
     (ToRuntimeDenotationType val (Length args))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ReadKnownM () (FoldArgs (arg : args) res)
Either
  (ErrorWithCause KnownTypeError ()) (arg -&gt; FoldArgs args res)
</span><a href="#local-6989586621680956649"><span class="hs-identifier hs-var">getF</span></a></span><span> </span><span class="annot"><span class="annottext">Either
  (ErrorWithCause KnownTypeError ()) (arg -&gt; FoldArgs args res)
-&gt; Either (ErrorWithCause KnownTypeError ()) arg
-&gt; Either (ErrorWithCause KnownTypeError ()) (FoldArgs args res)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; val -&gt; Either (ErrorWithCause KnownTypeError ()) arg
forall (uni :: * -&gt; *) val a cause.
ReadKnownIn uni val a =&gt;
Maybe cause -&gt; val -&gt; ReadKnownM cause a
</span><a href="PlutusCore.Builtin.KnownType.html#readKnown"><span class="hs-identifier hs-var">readKnown</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Maybe ()
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621680956648"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#toDeferredF"><span class="hs-pragma hs-type">toDeferredF</span></a></span><span> </span><span class="hs-pragma">#-}</span></span></span></span></span></span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="hs-comment">-- | A class that allows us to derive a polytype for a builtin.</span><span>
</span><span id="line-208"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#KnownMonotype"><span class="hs-identifier hs-type">KnownMonotype</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956776"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956775"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956774"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956773"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-209"></span><span>        </span><span id="KnownPolytype"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#KnownPolytype"><span class="hs-identifier hs-var">KnownPolytype</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680956772"><span class="annot"><a href="#local-6989586621680956772"><span class="hs-identifier hs-type">binds</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/7jxq3q4v9r667f1gjjg8khfgjizdjamv-some-lib-some-1.0.2-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">Some</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#TyNameRep"><span class="hs-identifier hs-type">TyNameRep</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span id="local-6989586621680956776"><span class="annot"><a href="#local-6989586621680956776"><span class="hs-identifier hs-type">val</span></a></span></span><span> </span><span id="local-6989586621680956775"><span class="annot"><a href="#local-6989586621680956775"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span id="local-6989586621680956774"><span class="annot"><a href="#local-6989586621680956774"><span class="hs-identifier hs-type">res</span></a></span></span><span> </span><span id="local-6989586621680956773"><span class="annot"><a href="#local-6989586621680956773"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="#local-6989586621680956775"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956774"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680956773"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680956773"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680956774"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-210"></span><span>    </span><span id="knownPolytype"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#knownPolytype"><span class="hs-identifier hs-type">knownPolytype</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.TypeScheme.html#TypeScheme"><span class="hs-identifier hs-type">TypeScheme</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956776"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956775"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956774"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-211"></span><span>    </span><span id="knownPolyruntime"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#knownPolyruntime"><span class="hs-identifier hs-type">knownPolyruntime</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Runtime.html#RuntimeScheme"><span class="hs-identifier hs-type">RuntimeScheme</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#Length"><span class="hs-identifier hs-type">Length</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956775"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="hs-comment">-- | Once we've run out of type-level arguments, we start handling term-level ones.</span><span>
</span><span id="line-214"></span><span id="local-6989586621680956641"><span id="local-6989586621680956642"><span id="local-6989586621680956643"><span id="local-6989586621680956644"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#KnownMonotype"><span class="hs-identifier hs-type">KnownMonotype</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956644"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956643"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956642"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956641"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#KnownPolytype"><span class="hs-identifier hs-type">KnownPolytype</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680956644"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956643"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956642"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956641"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-215"></span><span>    </span><span id="local-6989586621680956636"><span class="annot"><span class="annottext">knownPolytype :: TypeScheme val args res
</span><a href="#local-6989586621680956636"><span class="hs-identifier hs-var hs-var hs-var hs-var">knownPolytype</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeScheme val args res
forall k val (args :: [*]) res (a :: k).
KnownMonotype val args res a =&gt;
TypeScheme val args res
</span><a href="PlutusCore.Builtin.Meaning.html#knownMonotype"><span class="hs-identifier hs-var">knownMonotype</span></a></span><span>
</span><span id="line-216"></span><span>    </span><span id="local-6989586621680956635"><span class="annot"><span class="annottext">knownPolyruntime :: RuntimeScheme (Length args)
</span><a href="#local-6989586621680956635"><span class="hs-identifier hs-var hs-var hs-var hs-var">knownPolyruntime</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (a :: k).
KnownMonotype val args res a =&gt;
RuntimeScheme (Length args)
forall k val (args :: [*]) res (a :: k).
KnownMonotype val args res a =&gt;
RuntimeScheme (Length args)
</span><a href="PlutusCore.Builtin.Meaning.html#knownMonoruntime"><span class="hs-identifier hs-var">knownMonoruntime</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956644"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956643"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956642"><span class="hs-identifier hs-type">res</span></a></span></span></span></span></span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span class="hs-comment">-- Here we unpack an existentially packed @kind@ and constrain it afterwards!</span><span>
</span><span id="line-219"></span><span class="hs-comment">-- So promoted existentials are true sigmas! If we were at the term level, we'd have to pack</span><span>
</span><span id="line-220"></span><span class="hs-comment">-- @kind@ along with the @KnownKind kind@ constraint, otherwise when we unpack the existential,</span><span>
</span><span id="line-221"></span><span class="hs-comment">-- all information is lost and we can't do anything with @kind@.</span><span>
</span><span id="line-222"></span><span class="hs-comment">-- | Every type-level argument becomes a 'TypeSchemeAll'.</span><span>
</span><span id="line-223"></span><span id="local-6989586621680956627"><span id="local-6989586621680956628"><span id="local-6989586621680956629"><span id="local-6989586621680956630"><span id="local-6989586621680956631"><span id="local-6989586621680956632"><span id="local-6989586621680956633"><span id="local-6989586621680956634"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">KnownSymbol</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956634"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">KnownNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956633"><span class="hs-identifier hs-type">uniq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownKind.html#KnownKind"><span class="hs-identifier hs-type">KnownKind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956632"><span class="hs-identifier hs-type">kind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#KnownPolytype"><span class="hs-identifier hs-type">KnownPolytype</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956631"><span class="hs-identifier hs-type">binds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956630"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956629"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956628"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956627"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-224"></span><span>            </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#KnownPolytype"><span class="hs-identifier hs-type">KnownPolytype</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/7jxq3q4v9r667f1gjjg8khfgjizdjamv-some-lib-some-1.0.2-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#TyNameRep"><span class="hs-identifier hs-type">TyNameRep</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956632"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956634"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956633"><span class="hs-identifier hs-type">uniq</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621680956631"><span class="hs-identifier hs-type">binds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680956630"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956629"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956628"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956627"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-225"></span><span>    </span><span id="local-6989586621680956623"><span class="annot"><span class="annottext">knownPolytype :: TypeScheme val args res
</span><a href="#local-6989586621680956623"><span class="hs-identifier hs-var hs-var hs-var hs-var">knownPolytype</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy '(name, uniq, kind)
-&gt; TypeScheme val args res -&gt; TypeScheme val args res
forall (text :: Symbol) (uniq :: Nat) kind val (args :: [*]) res.
(KnownSymbol text, KnownNat uniq, KnownKind kind) =&gt;
Proxy '(text, uniq, kind)
-&gt; TypeScheme val args res -&gt; TypeScheme val args res
</span><a href="PlutusCore.Builtin.TypeScheme.html#TypeSchemeAll"><span class="hs-identifier hs-var">TypeSchemeAll</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956634"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956633"><span class="hs-identifier hs-type">uniq</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956632"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy '(name, uniq, kind)
forall k (t :: k). Proxy t
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeScheme val args res -&gt; TypeScheme val args res)
-&gt; TypeScheme val args res -&gt; TypeScheme val args res
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall val (args :: [*]) res (a :: k).
KnownPolytype binds val args res a =&gt;
TypeScheme val args res
forall k (binds :: [Some TyNameRep]) val (args :: [*]) res
       (a :: k).
KnownPolytype binds val args res a =&gt;
TypeScheme val args res
</span><a href="PlutusCore.Builtin.Meaning.html#knownPolytype"><span class="hs-identifier hs-var">knownPolytype</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956631"><span class="hs-identifier hs-type">binds</span></a></span><span>
</span><span id="line-226"></span><span>    </span><span id="local-6989586621680956620"><span class="annot"><span class="annottext">knownPolyruntime :: RuntimeScheme (Length args)
</span><a href="#local-6989586621680956620"><span class="hs-identifier hs-var hs-var hs-var hs-var">knownPolyruntime</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RuntimeScheme (Length args) -&gt; RuntimeScheme (Length args)
forall (n :: Peano). RuntimeScheme n -&gt; RuntimeScheme n
</span><a href="PlutusCore.Builtin.Runtime.html#RuntimeSchemeAll"><span class="hs-identifier hs-var">RuntimeSchemeAll</span></a></span><span> </span><span class="annot"><span class="annottext">(RuntimeScheme (Length args) -&gt; RuntimeScheme (Length args))
-&gt; RuntimeScheme (Length args) -&gt; RuntimeScheme (Length args)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (a :: k).
KnownPolytype binds val args res a =&gt;
RuntimeScheme (Length args)
forall k (binds :: [Some TyNameRep]) val (args :: [*]) res
       (a :: k).
KnownPolytype binds val args res a =&gt;
RuntimeScheme (Length args)
</span><a href="PlutusCore.Builtin.Meaning.html#knownPolyruntime"><span class="hs-identifier hs-var">knownPolyruntime</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956631"><span class="hs-identifier hs-type">binds</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956630"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956629"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956628"><span class="hs-identifier hs-type">res</span></a></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-comment">-- See Note [Automatic derivation of type schemes]</span><span>
</span><span id="line-229"></span><span class="hs-comment">-- | Construct the meaning for a built-in function by automatically deriving its</span><span>
</span><span id="line-230"></span><span class="hs-comment">-- 'TypeScheme', given</span><span>
</span><span id="line-231"></span><span class="hs-comment">--</span><span>
</span><span id="line-232"></span><span class="hs-comment">-- 1. the denotation of the builtin</span><span>
</span><span id="line-233"></span><span class="hs-comment">-- 2. an uninstantiated costing function</span><span>
</span><span id="line-234"></span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#makeBuiltinMeaning"><span class="hs-identifier hs-type">makeBuiltinMeaning</span></a></span><span>
</span><span id="line-235"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680956617"><span class="annot"><a href="#local-6989586621680956617"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680956616"><span class="annot"><a href="#local-6989586621680956616"><span class="hs-identifier hs-type">val</span></a></span></span><span> </span><span id="local-6989586621680956615"><span class="annot"><a href="#local-6989586621680956615"><span class="hs-identifier hs-type">cost</span></a></span></span><span> </span><span id="local-6989586621680956614"><span class="annot"><a href="#local-6989586621680956614"><span class="hs-identifier hs-type">binds</span></a></span></span><span> </span><span id="local-6989586621680956613"><span class="annot"><a href="#local-6989586621680956613"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span id="local-6989586621680956612"><span class="annot"><a href="#local-6989586621680956612"><span class="hs-identifier hs-type">res</span></a></span></span><span> </span><span id="local-6989586621680956611"><span class="annot"><a href="#local-6989586621680956611"><span class="hs-identifier hs-type">j</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-236"></span><span>       </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="#local-6989586621680956614"><span class="hs-identifier hs-type">binds</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownTypeAst.html#ToBinds"><span class="hs-identifier hs-type">ToBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956617"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680956613"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#GetArgs"><span class="hs-identifier hs-type">GetArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956617"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680956617"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#FoldArgs"><span class="hs-identifier hs-type">FoldArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956613"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956612"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-237"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Elaborate.html#ElaborateFromTo"><span class="hs-identifier hs-type">ElaborateFromTo</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="annot"><a href="#local-6989586621680956611"><span class="hs-identifier hs-type">j</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956616"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956617"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#KnownPolytype"><span class="hs-identifier hs-type">KnownPolytype</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956614"><span class="hs-identifier hs-type">binds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956616"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956613"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956612"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956617"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-238"></span><span>       </span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680956617"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680956615"><span class="hs-identifier hs-type">cost</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Runtime.html#ToCostingType"><span class="hs-identifier hs-type">ToCostingType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#Length"><span class="hs-identifier hs-type">Length</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956613"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#BuiltinMeaning"><span class="hs-identifier hs-type">BuiltinMeaning</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956616"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956615"><span class="hs-identifier hs-type">cost</span></a></span><span>
</span><span id="line-240"></span><span id="makeBuiltinMeaning"><span class="annot"><span class="annottext">makeBuiltinMeaning :: a
-&gt; (cost -&gt; ToCostingType (Length args)) -&gt; BuiltinMeaning val cost
</span><a href="PlutusCore.Builtin.Meaning.html#makeBuiltinMeaning"><span class="hs-identifier hs-var hs-var">makeBuiltinMeaning</span></a></span></span><span> </span><span id="local-6989586621680956608"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680956608"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680956607"><span class="annot"><span class="annottext">cost -&gt; ToCostingType (Length args)
</span><a href="#local-6989586621680956607"><span class="hs-identifier hs-var">toExF</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-241"></span><span>    </span><span class="annot"><span class="annottext">TypeScheme val args res
-&gt; FoldArgs args res
-&gt; BuiltinRuntimeOptions (Length args) val cost
-&gt; BuiltinMeaning val cost
forall val cost (args :: [*]) res.
TypeScheme val args res
-&gt; FoldArgs args res
-&gt; BuiltinRuntimeOptions (Length args) val cost
-&gt; BuiltinMeaning val cost
</span><a href="PlutusCore.Builtin.Meaning.html#BuiltinMeaning"><span class="hs-identifier hs-var">BuiltinMeaning</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a.
KnownPolytype binds val args res a =&gt;
TypeScheme val args res
forall k (binds :: [Some TyNameRep]) val (args :: [*]) res
       (a :: k).
KnownPolytype binds val args res a =&gt;
TypeScheme val args res
</span><a href="PlutusCore.Builtin.Meaning.html#knownPolytype"><span class="hs-identifier hs-var">knownPolytype</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956614"><span class="hs-identifier hs-type">binds</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956616"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956613"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956612"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
FoldArgs args res
</span><a href="#local-6989586621680956608"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(BuiltinRuntimeOptions (Length args) val cost
 -&gt; BuiltinMeaning val cost)
-&gt; BuiltinRuntimeOptions (Length args) val cost
-&gt; BuiltinMeaning val cost
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-242"></span><span>        </span><span class="annot"><span class="annottext">BuiltinRuntimeOptions :: forall (n :: Peano) val cost.
RuntimeScheme n
-&gt; ToRuntimeDenotationType val n
-&gt; ToRuntimeDenotationType val n
-&gt; (cost -&gt; ToCostingType n)
-&gt; BuiltinRuntimeOptions n val cost
</span><a href="PlutusCore.Builtin.Runtime.html#BuiltinRuntimeOptions"><span class="hs-identifier hs-type">BuiltinRuntimeOptions</span></a></span><span>
</span><span id="line-243"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_broRuntimeScheme :: RuntimeScheme (Length args)
</span><a href="PlutusCore.Builtin.Runtime.html#_broRuntimeScheme"><span class="hs-identifier hs-var">_broRuntimeScheme</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
KnownPolytype binds val args res a =&gt;
RuntimeScheme (Length args)
forall k (binds :: [Some TyNameRep]) val (args :: [*]) res
       (a :: k).
KnownPolytype binds val args res a =&gt;
RuntimeScheme (Length args)
</span><a href="PlutusCore.Builtin.Meaning.html#knownPolyruntime"><span class="hs-identifier hs-var">knownPolyruntime</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956614"><span class="hs-identifier hs-type">binds</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956616"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956613"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956612"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-244"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_broImmediateF :: ToRuntimeDenotationType val (Length args)
</span><a href="PlutusCore.Builtin.Runtime.html#_broImmediateF"><span class="hs-identifier hs-var">_broImmediateF</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FoldArgs args res -&gt; ToRuntimeDenotationType val (Length args)
forall k val (args :: [*]) res (a :: k).
KnownMonotype val args res a =&gt;
FoldArgs args res -&gt; ToRuntimeDenotationType val (Length args)
</span><a href="PlutusCore.Builtin.Meaning.html#toImmediateF"><span class="hs-identifier hs-var">toImmediateF</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956616"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956613"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956612"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="annot"><span class="annottext">a
FoldArgs args res
</span><a href="#local-6989586621680956608"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-245"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_broDeferredF :: ToRuntimeDenotationType val (Length args)
</span><a href="PlutusCore.Builtin.Runtime.html#_broDeferredF"><span class="hs-identifier hs-var">_broDeferredF</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
KnownMonotype val args res a =&gt;
ReadKnownM () (FoldArgs args res)
-&gt; ToRuntimeDenotationType val (Length args)
forall k val (args :: [*]) res (a :: k).
KnownMonotype val args res a =&gt;
ReadKnownM () (FoldArgs args res)
-&gt; ToRuntimeDenotationType val (Length args)
</span><a href="PlutusCore.Builtin.Meaning.html#toDeferredF"><span class="hs-identifier hs-var">toDeferredF</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956616"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956613"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680956612"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="annot"><span class="annottext">(ReadKnownM () (FoldArgs args res)
 -&gt; ToRuntimeDenotationType val (Length args))
-&gt; ReadKnownM () (FoldArgs args res)
-&gt; ToRuntimeDenotationType val (Length args)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Either (ErrorWithCause KnownTypeError ()) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680956608"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-246"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_broToExF :: cost -&gt; ToCostingType (Length args)
</span><a href="PlutusCore.Builtin.Runtime.html#_broToExF"><span class="hs-identifier hs-var">_broToExF</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">cost -&gt; ToCostingType (Length args)
</span><a href="#local-6989586621680956607"><span class="hs-identifier hs-var">toExF</span></a></span><span>
</span><span id="line-247"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-248"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#makeBuiltinMeaning"><span class="hs-pragma hs-type">makeBuiltinMeaning</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="hs-comment">-- | Convert a 'BuiltinMeaning' to a 'BuiltinRuntime' given an 'UnliftingMode' and a cost model.</span><span>
</span><span id="line-251"></span><span id="local-6989586621680956718"><span id="local-6989586621680956719"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#toBuiltinRuntime"><span class="hs-identifier hs-type">toBuiltinRuntime</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Runtime.html#UnliftingMode"><span class="hs-identifier hs-type">UnliftingMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680956719"><span class="hs-identifier hs-type">cost</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#BuiltinMeaning"><span class="hs-identifier hs-type">BuiltinMeaning</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956718"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956719"><span class="hs-identifier hs-type">cost</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Runtime.html#BuiltinRuntime"><span class="hs-identifier hs-type">BuiltinRuntime</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956718"><span class="hs-identifier hs-type">val</span></a></span></span></span><span>
</span><span id="line-252"></span><span id="toBuiltinRuntime"><span class="annot"><span class="annottext">toBuiltinRuntime :: UnliftingMode
-&gt; cost -&gt; BuiltinMeaning val cost -&gt; BuiltinRuntime val
</span><a href="PlutusCore.Builtin.Meaning.html#toBuiltinRuntime"><span class="hs-identifier hs-var hs-var">toBuiltinRuntime</span></a></span></span><span> </span><span id="local-6989586621680956600"><span class="annot"><span class="annottext">UnliftingMode
</span><a href="#local-6989586621680956600"><span class="hs-identifier hs-var">unlMode</span></a></span></span><span> </span><span id="local-6989586621680956599"><span class="annot"><span class="annottext">cost
</span><a href="#local-6989586621680956599"><span class="hs-identifier hs-var">cost</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#BuiltinMeaning"><span class="hs-identifier hs-type">BuiltinMeaning</span></a></span><span> </span><span class="annot"><span class="annottext">TypeScheme val args res
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FoldArgs args res
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680956598"><span class="annot"><span class="annottext">BuiltinRuntimeOptions (Length args) val cost
</span><a href="#local-6989586621680956598"><span class="hs-identifier hs-var">runtimeOpts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-253"></span><span>    </span><span class="annot"><span class="annottext">UnliftingMode
-&gt; cost
-&gt; BuiltinRuntimeOptions (Length args) val cost
-&gt; BuiltinRuntime val
forall cost (n :: Peano) val.
UnliftingMode
-&gt; cost -&gt; BuiltinRuntimeOptions n val cost -&gt; BuiltinRuntime val
</span><a href="PlutusCore.Builtin.Runtime.html#fromBuiltinRuntimeOptions"><span class="hs-identifier hs-var">fromBuiltinRuntimeOptions</span></a></span><span> </span><span class="annot"><span class="annottext">UnliftingMode
</span><a href="#local-6989586621680956600"><span class="hs-identifier hs-var">unlMode</span></a></span><span> </span><span class="annot"><span class="annottext">cost
</span><a href="#local-6989586621680956599"><span class="hs-identifier hs-var">cost</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinRuntimeOptions (Length args) val cost
</span><a href="#local-6989586621680956598"><span class="hs-identifier hs-var">runtimeOpts</span></a></span><span>
</span><span id="line-254"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#toBuiltinRuntime"><span class="hs-pragma hs-type">toBuiltinRuntime</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span class="hs-comment">-- See Note [Inlining meanings of builtins].</span><span>
</span><span id="line-257"></span><span class="hs-comment">-- | Calculate runtime info for all built-in functions given denotations of builtins</span><span>
</span><span id="line-258"></span><span class="hs-comment">-- and a cost model.</span><span>
</span><span id="line-259"></span><span id="local-6989586621680956593"><span id="local-6989586621680956594"><span id="local-6989586621680956595"><span id="local-6989586621680956596"><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#toBuiltinsRuntime"><span class="hs-identifier hs-type">toBuiltinsRuntime</span></a></span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680956596"><span class="hs-identifier hs-type">cost</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#CostingPart"><span class="hs-identifier hs-type">CostingPart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956595"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956594"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.HasConstant.html#HasConstantIn"><span class="hs-identifier hs-type">HasConstantIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956595"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956593"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#ToBuiltinMeaning"><span class="hs-identifier hs-type">ToBuiltinMeaning</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956595"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956594"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Runtime.html#UnliftingMode"><span class="hs-identifier hs-type">UnliftingMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680956596"><span class="hs-identifier hs-type">cost</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Runtime.html#BuiltinsRuntime"><span class="hs-identifier hs-type">BuiltinsRuntime</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956594"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956593"><span class="hs-identifier hs-type">val</span></a></span></span></span></span></span><span>
</span><span id="line-262"></span><span id="toBuiltinsRuntime"><span class="annot"><span class="annottext">toBuiltinsRuntime :: UnliftingMode -&gt; cost -&gt; BuiltinsRuntime fun val
</span><a href="PlutusCore.Builtin.Meaning.html#toBuiltinsRuntime"><span class="hs-identifier hs-var hs-var">toBuiltinsRuntime</span></a></span></span><span> </span><span id="local-6989586621680956591"><span class="annot"><span class="annottext">UnliftingMode
</span><a href="#local-6989586621680956591"><span class="hs-identifier hs-var">unlMode</span></a></span></span><span> </span><span id="local-6989586621680956590"><span class="annot"><span class="annottext">cost
</span><a href="#local-6989586621680956590"><span class="hs-identifier hs-var">cost</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680956589"><span class="annot"><span class="annottext">arr :: Array fun (BuiltinRuntime val)
</span><a href="#local-6989586621680956589"><span class="hs-identifier hs-var hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(fun -&gt; BuiltinRuntime val) -&gt; Array fun (BuiltinRuntime val)
forall i a. (Bounded i, Enum i, Ix i) =&gt; (i -&gt; a) -&gt; Array i a
</span><a href="PlutusPrelude.html#tabulateArray"><span class="hs-identifier hs-var">tabulateArray</span></a></span><span> </span><span class="annot"><span class="annottext">((fun -&gt; BuiltinRuntime val) -&gt; Array fun (BuiltinRuntime val))
-&gt; (fun -&gt; BuiltinRuntime val) -&gt; Array fun (BuiltinRuntime val)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UnliftingMode
-&gt; cost -&gt; BuiltinMeaning val cost -&gt; BuiltinRuntime val
forall cost val.
UnliftingMode
-&gt; cost -&gt; BuiltinMeaning val cost -&gt; BuiltinRuntime val
</span><a href="PlutusCore.Builtin.Meaning.html#toBuiltinRuntime"><span class="hs-identifier hs-var">toBuiltinRuntime</span></a></span><span> </span><span class="annot"><span class="annottext">UnliftingMode
</span><a href="#local-6989586621680956591"><span class="hs-identifier hs-var">unlMode</span></a></span><span> </span><span class="annot"><span class="annottext">cost
</span><a href="#local-6989586621680956590"><span class="hs-identifier hs-var">cost</span></a></span><span> </span><span class="annot"><span class="annottext">(BuiltinMeaning val cost -&gt; BuiltinRuntime val)
-&gt; (fun -&gt; BuiltinMeaning val cost) -&gt; fun -&gt; BuiltinRuntime val
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(fun -&gt; BuiltinMeaning val cost) -&gt; fun -&gt; BuiltinMeaning val cost
forall a. a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">inline</span></a></span><span> </span><span class="annot"><span class="annottext">fun -&gt; BuiltinMeaning val cost
forall (uni :: * -&gt; *) fun val.
(ToBuiltinMeaning uni fun, HasConstantIn uni val) =&gt;
fun -&gt; BuiltinMeaning val (CostingPart uni fun)
</span><a href="PlutusCore.Builtin.Meaning.html#toBuiltinMeaning"><span class="hs-identifier hs-var">toBuiltinMeaning</span></a></span><span>
</span><span id="line-264"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="hs-comment">-- Force array elements to WHNF</span><span>
</span><span id="line-265"></span><span>        </span><span class="annot"><span class="annottext">(BuiltinRuntime val
 -&gt; BuiltinsRuntime fun val -&gt; BuiltinsRuntime fun val)
-&gt; BuiltinsRuntime fun val
-&gt; Array fun (BuiltinRuntime val)
-&gt; BuiltinsRuntime fun val
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinRuntime val
-&gt; BuiltinsRuntime fun val -&gt; BuiltinsRuntime fun val
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">seq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array fun (BuiltinRuntime val) -&gt; BuiltinsRuntime fun val
forall fun val.
Array fun (BuiltinRuntime val) -&gt; BuiltinsRuntime fun val
</span><a href="PlutusCore.Builtin.Runtime.html#BuiltinsRuntime"><span class="hs-identifier hs-var">BuiltinsRuntime</span></a></span><span> </span><span class="annot"><span class="annottext">Array fun (BuiltinRuntime val)
</span><a href="#local-6989586621680956589"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Array fun (BuiltinRuntime val)
</span><a href="#local-6989586621680956589"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-266"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Meaning.html#toBuiltinsRuntime"><span class="hs-pragma hs-type">toBuiltinsRuntime</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-267"></span></pre></body></html>
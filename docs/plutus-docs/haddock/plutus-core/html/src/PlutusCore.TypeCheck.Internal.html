<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- | The internal module of the type checker that defines the actual algorithms,</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- but not the user-facing API.</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-comment">-- 'makeLenses' produces an unused lens.</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-unused-binds #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances      #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE FunctionalDependencies #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings      #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell        #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications       #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators          #-}</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">PlutusCore.TypeCheck.Internal</span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-comment">-- export all because a lot are used by the pir-typechecker</span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.html"><span class="hs-identifier">PlutusCore.Builtin</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Core.html"><span class="hs-identifier">PlutusCore.Core</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Error.html"><span class="hs-identifier">PlutusCore.Error</span></a></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.MkPlc.html"><span class="hs-identifier">PlutusCore.MkPlc</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Name.html"><span class="hs-identifier">PlutusCore.Name</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Normalize.Internal.html"><span class="hs-identifier">PlutusCore.Normalize.Internal</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Norm</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Quote.html"><span class="hs-identifier">PlutusCore.Quote</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Rename.html"><span class="hs-identifier">PlutusCore.Rename</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusPrelude.html"><span class="hs-identifier">PlutusPrelude</span></a></span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">Control.Lens</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">Control.Monad.Error.Lens</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier">Control.Monad.Except</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier">Control.Monad.Reader</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/array-0.5.4.0/src"><span class="hs-identifier">Data.Array</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Universe.html"><span class="hs-identifier">Universe</span></a></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-comment">{- Note [Global uniqueness]
WARNING: type inference/checking works under the assumption that the global uniqueness condition
is satisfied. The invariant is not checked, enforced or automatically fulfilled. So you must ensure
that the global uniqueness condition is satisfied before calling 'inferTypeM' or 'checkTypeM'.

The invariant is preserved. In future we will enforce the invariant.
-}</span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-comment">{- Note [Notation]
We write type rules in the bidirectional style.

[infer| G !- x : a] -- means that the inferred type of 'x' in the context 'G' is 'a'.
'a' is not necessary a varible, e.g. [infer| G !- fun : dom -&gt; cod] is fine too.
It reads as follows: &quot;infer the type of 'fun' in the context 'G', check that it's functional and
bind the 'dom' variable to the domain and the 'cod' variable to the codomain of this type&quot;.

Analogously, [infer| G !- t :: k] means that the inferred kind of 't' in the context 'G' is 'k'.
The [infer| G !- x : a] judgement appears in conclusions in the clauses of the 'inferTypeM'
function.

[check| G !- x : a] -- check that the type of 'x' in the context 'G' is 'a'.
Since Plutus Core is a fully elaborated language, this amounts to inferring the type of 'x' and
checking that it's equal to 'a'.

Analogously, [check| G !- t :: k] means &quot;check that the kind of 't' in the context 'G' is 'k'&quot;.
The [check| G !- x : a] judgement appears in the conclusion in the sole clause of
the 'checkTypeM' function.

The equality check is denoted as &quot;a ~ b&quot;.

We use unified contexts in rules, i.e. a context can carry type variables as well as term variables.

The &quot;NORM a&quot; notation reads as &quot;normalize 'a'&quot;.

The &quot;a ~&gt; b&quot; notations reads as &quot;normalize 'a' to 'b'&quot;.

Functions that can fail start with either @infer@ or @check@ prefixes,
functions that cannot fail looks like this:

    kindOfBuiltinType
    typeOfBuiltinFunction
-}</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-comment">-- ######################</span><span>
</span><span id="line-79"></span><span class="hs-comment">-- ## Type definitions ##</span><span>
</span><span id="line-80"></span><span class="hs-comment">-- ######################</span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="hs-comment">-- | Mapping from 'Builtin's to their 'Type's.</span><span>
</span><span id="line-83"></span><span class="hs-keyword">newtype</span><span> </span><span id="BuiltinTypes"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#BuiltinTypes"><span class="hs-identifier hs-var">BuiltinTypes</span></a></span></span><span> </span><span id="local-6989586621680957100"><span class="annot"><a href="#local-6989586621680957100"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="local-6989586621680957099"><span class="annot"><a href="#local-6989586621680957099"><span class="hs-identifier hs-type">fun</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BuiltinTypes"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#BuiltinTypes"><span class="hs-identifier hs-var">BuiltinTypes</span></a></span></span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-comment">-- We need to kind check types of all built-in functions before proceeding to type checking a</span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-comment">-- program, so when we do that we don't have any normalized types of built-in functions yet</span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-comment">-- (as normalization has to be preceded by kind/type checking, which is the very thing that</span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-comment">-- we are up to). And since both kind and type checking run in the same 'TypeCheckM' monad,</span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-comment">-- we do need to provide a 'BuiltinTypes' argument, even though we know that at kind checking</span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-comment">-- time no built-in function can be encountered (as those live at the value level, not the type</span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-comment">-- one). So we could wrap an empty 'Array' with 'BuiltinTypes' but how to construct an empty</span><span>
</span><span id="line-91"></span><span>    </span><span class="hs-comment">-- array? This works:</span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-comment">--     listArray (maxBound, minBound) []</span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-comment">-- but only when 'maxBound' is not equal to 'minBound' (and both exist). Which sucks.</span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-comment">-- So we use 'Nothing' to say &quot;no builtins&quot;. It's sufficient and doesn't complicate anything.</span><span>
</span><span id="line-98"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unBuiltinTypes"><span class="annot"><span class="annottext">BuiltinTypes uni fun
-&gt; Maybe (Array fun (Dupable (Normalized (Type TyName uni ()))))
</span><a href="PlutusCore.TypeCheck.Internal.html#unBuiltinTypes"><span class="hs-identifier hs-var hs-var">unBuiltinTypes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957099"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Rename.html#Dupable"><span class="hs-identifier hs-type">Dupable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-type">Normalized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957100"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="hs-keyword">type</span><span> </span><span id="TyVarKinds"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TyVarKinds"><span class="hs-identifier hs-var">TyVarKinds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="PlutusCore.Name.html#UniqueMap"><span class="hs-identifier hs-type">UniqueMap</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TypeUnique"><span class="hs-identifier hs-type">TypeUnique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span class="hs-keyword">type</span><span> </span><span id="VarTypes"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#VarTypes"><span class="hs-identifier hs-var">VarTypes</span></a></span></span><span> </span><span id="local-6989586621680957096"><span class="annot"><a href="#local-6989586621680957096"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="PlutusCore.Name.html#UniqueMap"><span class="hs-identifier hs-type">UniqueMap</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TermUnique"><span class="hs-identifier hs-type">TermUnique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Rename.html#Dupable"><span class="hs-identifier hs-type">Dupable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-type">Normalized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957096"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="hs-comment">-- | Configuration of the type checker.</span><span>
</span><span id="line-105"></span><span class="hs-keyword">newtype</span><span> </span><span id="TypeCheckConfig"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckConfig"><span class="hs-identifier hs-var">TypeCheckConfig</span></a></span></span><span> </span><span id="local-6989586621680957438"><span class="annot"><a href="#local-6989586621680957438"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="local-6989586621680957437"><span class="annot"><a href="#local-6989586621680957437"><span class="hs-identifier hs-type">fun</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TypeCheckConfig"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckConfig"><span class="hs-identifier hs-var">TypeCheckConfig</span></a></span></span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="_tccBuiltinTypes"><span class="annot"><span class="annottext">TypeCheckConfig uni fun -&gt; BuiltinTypes uni fun
</span><a href="PlutusCore.TypeCheck.Internal.html#_tccBuiltinTypes"><span class="hs-identifier hs-var hs-var">_tccBuiltinTypes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#BuiltinTypes"><span class="hs-identifier hs-type">BuiltinTypes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957438"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957437"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-108"></span><span id="tccBuiltinTypes"><span id="typeCheckConfig"><span id="local-6989586621680957089"><span id="local-6989586621680957091"><span id="local-6989586621680957093"><span id="HasTypeCheckConfig"><span id="local-6989586621680957435"><span id="local-6989586621680957437"><span id="local-6989586621680957438"><span class="hs-identifier">makeClassy</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">TypeCheckConfig</span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-comment">-- | The environment that the type checker runs in.</span><span>
</span><span id="line-111"></span><span class="hs-keyword">data</span><span> </span><span id="TypeCheckEnv"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckEnv"><span class="hs-identifier hs-var">TypeCheckEnv</span></a></span></span><span> </span><span id="local-6989586621680957370"><span class="annot"><a href="#local-6989586621680957370"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="local-6989586621680957369"><span class="annot"><a href="#local-6989586621680957369"><span class="hs-identifier hs-type">fun</span></a></span></span><span> </span><span id="local-6989586621680957371"><span class="annot"><a href="#local-6989586621680957371"><span class="hs-identifier hs-type">cfg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TypeCheckEnv"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckEnv"><span class="hs-identifier hs-var">TypeCheckEnv</span></a></span></span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="_tceTypeCheckConfig"><span class="annot"><span class="annottext">TypeCheckEnv uni fun cfg -&gt; cfg
</span><a href="PlutusCore.TypeCheck.Internal.html#_tceTypeCheckConfig"><span class="hs-identifier hs-var hs-var">_tceTypeCheckConfig</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680957371"><span class="hs-identifier hs-type">cfg</span></a></span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_tceTyVarKinds"><span class="annot"><span class="annottext">TypeCheckEnv uni fun cfg -&gt; TyVarKinds
</span><a href="PlutusCore.TypeCheck.Internal.html#_tceTyVarKinds"><span class="hs-identifier hs-var hs-var">_tceTyVarKinds</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TyVarKinds"><span class="hs-identifier hs-type">TyVarKinds</span></a></span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_tceVarTypes"><span class="annot"><span class="annottext">TypeCheckEnv uni fun cfg -&gt; VarTypes uni
</span><a href="PlutusCore.TypeCheck.Internal.html#_tceVarTypes"><span class="hs-identifier hs-var hs-var">_tceVarTypes</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#VarTypes"><span class="hs-identifier hs-type">VarTypes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957370"><span class="hs-identifier hs-type">uni</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-116"></span><span id="tceVarTypes"><span id="tceTypeCheckConfig"><span id="tceTyVarKinds"><span id="local-6989586621680957294"><span id="local-6989586621680957295"><span id="local-6989586621680957331"><span id="local-6989586621680957332"><span id="local-6989586621680957349"><span id="local-6989586621680957369"><span id="local-6989586621680957370"><span id="local-6989586621680957371"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">TypeCheckEnv</span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-comment">-- | The type checking monad that the type checker runs in.</span><span>
</span><span id="line-119"></span><span class="hs-comment">-- In contains a 'TypeCheckEnv' and allows to throw 'TypeError's.</span><span>
</span><span id="line-120"></span><span class="hs-keyword">type</span><span> </span><span id="TypeCheckM"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-var">TypeCheckM</span></a></span></span><span> </span><span id="local-6989586621680957078"><span class="annot"><a href="#local-6989586621680957078"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="local-6989586621680957077"><span class="annot"><a href="#local-6989586621680957077"><span class="hs-identifier hs-type">fun</span></a></span></span><span> </span><span id="local-6989586621680957076"><span class="annot"><a href="#local-6989586621680957076"><span class="hs-identifier hs-type">cfg</span></a></span></span><span> </span><span id="local-6989586621680957075"><span class="annot"><a href="#local-6989586621680957075"><span class="hs-identifier hs-type">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/8r01jj9dl6h1x2byph07y6wxfb3ysd8c-transformers-lib-transformers-0.5.6.2-haddock-doc/share/doc/transformers/html/src"><span class="hs-identifier hs-type">ReaderT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckEnv"><span class="hs-identifier hs-type">TypeCheckEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957078"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957077"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957076"><span class="hs-identifier hs-type">cfg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/8r01jj9dl6h1x2byph07y6wxfb3ysd8c-transformers-lib-transformers-0.5.6.2-haddock-doc/share/doc/transformers/html/src"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957075"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Quote.html#Quote"><span class="hs-identifier hs-type">Quote</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="hs-comment">-- #########################</span><span>
</span><span id="line-123"></span><span class="hs-comment">-- ## Auxiliary functions ##</span><span>
</span><span id="line-124"></span><span class="hs-comment">-- #########################</span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="hs-comment">-- | Run a 'TypeCheckM' computation by supplying a 'TypeCheckConfig' to it.</span><span>
</span><span id="line-128"></span><span id="local-6989586621680957069"><span id="local-6989586621680957070"><span id="local-6989586621680957071"><span id="local-6989586621680957072"><span id="local-6989586621680957073"><span id="local-6989586621680957074"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#runTypeCheckM"><span class="hs-identifier hs-type">runTypeCheckM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier hs-type">MonadError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957074"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957073"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Quote.html#MonadQuote"><span class="hs-identifier hs-type">MonadQuote</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957073"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680957072"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957071"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957070"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957072"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957074"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957069"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680957073"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957069"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span></span><span>
</span><span id="line-129"></span><span id="runTypeCheckM"><span class="annot"><span class="annottext">runTypeCheckM :: cfg -&gt; TypeCheckM uni fun cfg err a -&gt; m a
</span><a href="PlutusCore.TypeCheck.Internal.html#runTypeCheckM"><span class="hs-identifier hs-var hs-var">runTypeCheckM</span></a></span></span><span> </span><span id="local-6989586621680957067"><span class="annot"><span class="annottext">cfg
</span><a href="#local-6989586621680957067"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621680957066"><span class="annot"><span class="annottext">TypeCheckM uni fun cfg err a
</span><a href="#local-6989586621680957066"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-130"></span><span>    </span><span class="annot"><span class="annottext">Either err a -&gt; m a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; Either e a -&gt; m a
</span><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier hs-var">liftEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either err a -&gt; m a) -&gt; m (Either err a) -&gt; m a
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Quote (Either err a) -&gt; m (Either err a)
forall (m :: * -&gt; *) a. MonadQuote m =&gt; Quote a -&gt; m a
</span><a href="PlutusCore.Quote.html#liftQuote"><span class="hs-identifier hs-var">liftQuote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExceptT err Quote a -&gt; Quote (Either err a)
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><a href="../file:///nix/store/8r01jj9dl6h1x2byph07y6wxfb3ysd8c-transformers-lib-transformers-0.5.6.2-haddock-doc/share/doc/transformers/html/src"><span class="hs-identifier hs-var">runExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT err Quote a -&gt; Quote (Either err a))
-&gt; ExceptT err Quote a -&gt; Quote (Either err a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TypeCheckM uni fun cfg err a
-&gt; TypeCheckEnv uni fun cfg -&gt; ExceptT err Quote a
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><a href="../file:///nix/store/8r01jj9dl6h1x2byph07y6wxfb3ysd8c-transformers-lib-transformers-0.5.6.2-haddock-doc/share/doc/transformers/html/src"><span class="hs-identifier hs-var hs-var">runReaderT</span></a></span><span> </span><span class="annot"><span class="annottext">TypeCheckM uni fun cfg err a
</span><a href="#local-6989586621680957066"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeCheckEnv uni fun cfg
forall (uni :: * -&gt; *) fun. TypeCheckEnv uni fun cfg
</span><a href="#local-6989586621680957060"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-131"></span><span>        </span><span id="local-6989586621680957060"><span class="annot"><span class="annottext">env :: TypeCheckEnv uni fun cfg
</span><a href="#local-6989586621680957060"><span class="hs-identifier hs-var hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">cfg -&gt; TyVarKinds -&gt; VarTypes uni -&gt; TypeCheckEnv uni fun cfg
forall (uni :: * -&gt; *) fun cfg.
cfg -&gt; TyVarKinds -&gt; VarTypes uni -&gt; TypeCheckEnv uni fun cfg
</span><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckEnv"><span class="hs-identifier hs-var">TypeCheckEnv</span></a></span><span> </span><span class="annot"><span class="annottext">cfg
</span><a href="#local-6989586621680957067"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarKinds
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">VarTypes uni
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-comment">-- | Extend the context of a 'TypeCheckM' computation with a kinded variable.</span><span>
</span><span id="line-134"></span><span id="local-6989586621680957215"><span id="local-6989586621680957216"><span id="local-6989586621680957217"><span id="local-6989586621680957218"><span id="local-6989586621680957219"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#withTyVar"><span class="hs-identifier hs-type">withTyVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957219"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957218"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957217"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957216"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957215"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957219"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957218"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957217"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957216"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957215"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span><span>
</span><span id="line-135"></span><span id="withTyVar"><span class="annot"><span class="annottext">withTyVar :: TyName
-&gt; Kind ()
-&gt; TypeCheckM uni fun cfg err a
-&gt; TypeCheckM uni fun cfg err a
</span><a href="PlutusCore.TypeCheck.Internal.html#withTyVar"><span class="hs-identifier hs-var hs-var">withTyVar</span></a></span></span><span> </span><span id="local-6989586621680957058"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680957058"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TypeCheckEnv uni fun cfg -&gt; TypeCheckEnv uni fun cfg)
-&gt; TypeCheckM uni fun cfg err a -&gt; TypeCheckM uni fun cfg err a
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; r) -&gt; m a -&gt; m a
</span><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier hs-var">local</span></a></span><span> </span><span class="annot"><span class="annottext">((TypeCheckEnv uni fun cfg -&gt; TypeCheckEnv uni fun cfg)
 -&gt; TypeCheckM uni fun cfg err a -&gt; TypeCheckM uni fun cfg err a)
-&gt; (Kind ()
    -&gt; TypeCheckEnv uni fun cfg -&gt; TypeCheckEnv uni fun cfg)
-&gt; Kind ()
-&gt; TypeCheckM uni fun cfg err a
-&gt; TypeCheckM uni fun cfg err a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter
  (TypeCheckEnv uni fun cfg)
  (TypeCheckEnv uni fun cfg)
  TyVarKinds
  TyVarKinds
-&gt; (TyVarKinds -&gt; TyVarKinds)
-&gt; TypeCheckEnv uni fun cfg
-&gt; TypeCheckEnv uni fun cfg
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">over</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter
  (TypeCheckEnv uni fun cfg)
  (TypeCheckEnv uni fun cfg)
  TyVarKinds
  TyVarKinds
forall (uni :: * -&gt; *) fun cfg fun.
Lens
  (TypeCheckEnv uni fun cfg)
  (TypeCheckEnv uni fun cfg)
  TyVarKinds
  TyVarKinds
</span><a href="PlutusCore.TypeCheck.Internal.html#tceTyVarKinds"><span class="hs-identifier hs-var">tceTyVarKinds</span></a></span><span> </span><span class="annot"><span class="annottext">((TyVarKinds -&gt; TyVarKinds)
 -&gt; TypeCheckEnv uni fun cfg -&gt; TypeCheckEnv uni fun cfg)
-&gt; (Kind () -&gt; TyVarKinds -&gt; TyVarKinds)
-&gt; Kind ()
-&gt; TypeCheckEnv uni fun cfg
-&gt; TypeCheckEnv uni fun cfg
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TyName -&gt; Kind () -&gt; TyVarKinds -&gt; TyVarKinds
forall name unique a.
HasUnique name unique =&gt;
name -&gt; a -&gt; UniqueMap unique a -&gt; UniqueMap unique a
</span><a href="PlutusCore.Name.html#insertByName"><span class="hs-identifier hs-var">insertByName</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680957058"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-comment">-- | Look up the type of a built-in function.</span><span>
</span><span id="line-138"></span><span id="local-6989586621680957150"><span id="local-6989586621680957151"><span id="local-6989586621680957152"><span id="local-6989586621680957153"><span id="local-6989586621680957154"><span id="local-6989586621680957155"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#lookupBuiltinM"><span class="hs-identifier hs-type">lookupBuiltinM</span></a></span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Error.html#AsTypeError"><span class="hs-identifier hs-type">AsTypeError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957155"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957154"><span class="hs-identifier hs-type">term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957153"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957152"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957151"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#HasTypeCheckConfig"><span class="hs-identifier hs-type">HasTypeCheckConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957150"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957153"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957152"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957152"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680957151"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680957152"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957153"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957152"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957150"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957155"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-type">Normalized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957153"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-141"></span><span id="lookupBuiltinM"><span class="annot"><span class="annottext">lookupBuiltinM :: ann
-&gt; fun
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#lookupBuiltinM"><span class="hs-identifier hs-var hs-var">lookupBuiltinM</span></a></span></span><span> </span><span id="local-6989586621680957052"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680957052"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680957051"><span class="annot"><span class="annottext">fun
</span><a href="#local-6989586621680957051"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-142"></span><span>    </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#BuiltinTypes"><span class="hs-identifier hs-type">BuiltinTypes</span></a></span><span> </span><span id="local-6989586621680957050"><span class="annot"><span class="annottext">Maybe (Array fun (Dupable (Normalized (Type TyName uni ()))))
</span><a href="#local-6989586621680957050"><span class="hs-identifier hs-var">mayArr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Getting
  (BuiltinTypes uni fun)
  (TypeCheckEnv uni fun cfg)
  (BuiltinTypes uni fun)
-&gt; ReaderT
     (TypeCheckEnv uni fun cfg)
     (ExceptT err Quote)
     (BuiltinTypes uni fun)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="annot"><span class="annottext">(Getting
   (BuiltinTypes uni fun)
   (TypeCheckEnv uni fun cfg)
   (BuiltinTypes uni fun)
 -&gt; ReaderT
      (TypeCheckEnv uni fun cfg)
      (ExceptT err Quote)
      (BuiltinTypes uni fun))
-&gt; Getting
     (BuiltinTypes uni fun)
     (TypeCheckEnv uni fun cfg)
     (BuiltinTypes uni fun)
-&gt; ReaderT
     (TypeCheckEnv uni fun cfg)
     (ExceptT err Quote)
     (BuiltinTypes uni fun)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(cfg -&gt; Const (BuiltinTypes uni fun) cfg)
-&gt; TypeCheckEnv uni fun cfg
-&gt; Const (BuiltinTypes uni fun) (TypeCheckEnv uni fun cfg)
forall (uni :: * -&gt; *) fun cfg fun cfg.
Lens (TypeCheckEnv uni fun cfg) (TypeCheckEnv uni fun cfg) cfg cfg
</span><a href="PlutusCore.TypeCheck.Internal.html#tceTypeCheckConfig"><span class="hs-identifier hs-var">tceTypeCheckConfig</span></a></span><span> </span><span class="annot"><span class="annottext">((cfg -&gt; Const (BuiltinTypes uni fun) cfg)
 -&gt; TypeCheckEnv uni fun cfg
 -&gt; Const (BuiltinTypes uni fun) (TypeCheckEnv uni fun cfg))
-&gt; ((BuiltinTypes uni fun
     -&gt; Const (BuiltinTypes uni fun) (BuiltinTypes uni fun))
    -&gt; cfg -&gt; Const (BuiltinTypes uni fun) cfg)
-&gt; Getting
     (BuiltinTypes uni fun)
     (TypeCheckEnv uni fun cfg)
     (BuiltinTypes uni fun)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(BuiltinTypes uni fun
 -&gt; Const (BuiltinTypes uni fun) (BuiltinTypes uni fun))
-&gt; cfg -&gt; Const (BuiltinTypes uni fun) cfg
forall c (uni :: * -&gt; *) fun.
HasTypeCheckConfig c uni fun =&gt;
Lens' c (BuiltinTypes uni fun)
</span><a href="PlutusCore.TypeCheck.Internal.html#tccBuiltinTypes"><span class="hs-identifier hs-var">tccBuiltinTypes</span></a></span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Array fun (Dupable (Normalized (Type TyName uni ()))))
</span><a href="#local-6989586621680957050"><span class="hs-identifier hs-var">mayArr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Array fun (Dupable (Normalized (Type TyName uni ()))))
-&gt; (Array fun (Dupable (Normalized (Type TyName uni ())))
    -&gt; Maybe (Dupable (Normalized (Type TyName uni ()))))
-&gt; Maybe (Dupable (Normalized (Type TyName uni ())))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (First (Dupable (Normalized (Type TyName uni ()))))
  (Array fun (Dupable (Normalized (Type TyName uni ()))))
  (Dupable (Normalized (Type TyName uni ())))
-&gt; Array fun (Dupable (Normalized (Type TyName uni ())))
-&gt; Maybe (Dupable (Normalized (Type TyName uni ())))
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index (Array fun (Dupable (Normalized (Type TyName uni ()))))
-&gt; Traversal'
     (Array fun (Dupable (Normalized (Type TyName uni ()))))
     (IxValue (Array fun (Dupable (Normalized (Type TyName uni ())))))
forall m. Ixed m =&gt; Index m -&gt; Traversal' m (IxValue m)
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="annot"><span class="annottext">fun
Index (Array fun (Dupable (Normalized (Type TyName uni ()))))
</span><a href="#local-6989586621680957051"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-144"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Dupable (Normalized (Type TyName uni ())))
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError term uni fun ann)
-&gt; TypeError term uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall e (m :: * -&gt; *) t x.
MonadError e m =&gt;
AReview e t -&gt; t -&gt; m x
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">throwing</span></a></span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError term uni fun ann)
forall r term (uni :: * -&gt; *) fun ann.
AsTypeError r term uni fun ann =&gt;
Prism' r (TypeError term uni fun ann)
</span><a href="PlutusCore.Error.html#_TypeError"><span class="hs-identifier hs-var">_TypeError</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeError term uni fun ann
 -&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ())))
-&gt; TypeError term uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ann -&gt; fun -&gt; TypeError term uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann -&gt; fun -&gt; TypeError term uni fun ann
</span><a href="PlutusCore.Error.html#UnknownBuiltinFunctionE"><span class="hs-identifier hs-var">UnknownBuiltinFunctionE</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680957052"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">fun
</span><a href="#local-6989586621680957051"><span class="hs-identifier hs-var">fun</span></a></span><span>
</span><span id="line-145"></span><span>        </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680957043"><span class="annot"><span class="annottext">Dupable (Normalized (Type TyName uni ()))
</span><a href="#local-6989586621680957043"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Dupable (Normalized (Type TyName uni ()))
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) a.
(MonadQuote m, Rename a) =&gt;
Dupable a -&gt; m a
</span><a href="PlutusCore.Rename.html#liftDupable"><span class="hs-identifier hs-var">liftDupable</span></a></span><span> </span><span class="annot"><span class="annottext">Dupable (Normalized (Type TyName uni ()))
</span><a href="#local-6989586621680957043"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span class="hs-comment">-- | Extend the context of a 'TypeCheckM' computation with a typed variable.</span><span>
</span><span id="line-148"></span><span id="local-6989586621680957131"><span id="local-6989586621680957132"><span id="local-6989586621680957133"><span id="local-6989586621680957134"><span id="local-6989586621680957135"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#withVar"><span class="hs-identifier hs-type">withVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-type">Normalized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957135"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957135"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957134"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957133"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957132"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957131"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957135"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957134"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957133"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957132"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957131"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span><span>
</span><span id="line-149"></span><span id="withVar"><span class="annot"><span class="annottext">withVar :: Name
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err a
-&gt; TypeCheckM uni fun cfg err a
</span><a href="PlutusCore.TypeCheck.Internal.html#withVar"><span class="hs-identifier hs-var hs-var">withVar</span></a></span></span><span> </span><span id="local-6989586621680957040"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680957040"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TypeCheckEnv uni fun cfg -&gt; TypeCheckEnv uni fun cfg)
-&gt; TypeCheckM uni fun cfg err a -&gt; TypeCheckM uni fun cfg err a
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; r) -&gt; m a -&gt; m a
</span><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier hs-var">local</span></a></span><span> </span><span class="annot"><span class="annottext">((TypeCheckEnv uni fun cfg -&gt; TypeCheckEnv uni fun cfg)
 -&gt; TypeCheckM uni fun cfg err a -&gt; TypeCheckM uni fun cfg err a)
-&gt; (Normalized (Type TyName uni ())
    -&gt; TypeCheckEnv uni fun cfg -&gt; TypeCheckEnv uni fun cfg)
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err a
-&gt; TypeCheckM uni fun cfg err a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter
  (TypeCheckEnv uni fun cfg)
  (TypeCheckEnv uni fun cfg)
  (VarTypes uni)
  (VarTypes uni)
-&gt; (VarTypes uni -&gt; VarTypes uni)
-&gt; TypeCheckEnv uni fun cfg
-&gt; TypeCheckEnv uni fun cfg
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">over</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter
  (TypeCheckEnv uni fun cfg)
  (TypeCheckEnv uni fun cfg)
  (VarTypes uni)
  (VarTypes uni)
forall (uni :: * -&gt; *) fun cfg (uni :: * -&gt; *) fun.
Lens
  (TypeCheckEnv uni fun cfg)
  (TypeCheckEnv uni fun cfg)
  (VarTypes uni)
  (VarTypes uni)
</span><a href="PlutusCore.TypeCheck.Internal.html#tceVarTypes"><span class="hs-identifier hs-var">tceVarTypes</span></a></span><span> </span><span class="annot"><span class="annottext">((VarTypes uni -&gt; VarTypes uni)
 -&gt; TypeCheckEnv uni fun cfg -&gt; TypeCheckEnv uni fun cfg)
-&gt; (Normalized (Type TyName uni ())
    -&gt; VarTypes uni -&gt; VarTypes uni)
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckEnv uni fun cfg
-&gt; TypeCheckEnv uni fun cfg
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Dupable (Normalized (Type TyName uni ()))
-&gt; VarTypes uni
-&gt; VarTypes uni
forall name unique a.
HasUnique name unique =&gt;
name -&gt; a -&gt; UniqueMap unique a -&gt; UniqueMap unique a
</span><a href="PlutusCore.Name.html#insertByName"><span class="hs-identifier hs-var">insertByName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680957040"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(Dupable (Normalized (Type TyName uni ()))
 -&gt; VarTypes uni -&gt; VarTypes uni)
-&gt; (Normalized (Type TyName uni ())
    -&gt; Dupable (Normalized (Type TyName uni ())))
-&gt; Normalized (Type TyName uni ())
-&gt; VarTypes uni
-&gt; VarTypes uni
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
-&gt; Dupable (Normalized (Type TyName uni ()))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-comment">-- | Look up a type variable in the current context.</span><span>
</span><span id="line-152"></span><span id="local-6989586621680957222"><span id="local-6989586621680957223"><span id="local-6989586621680957224"><span id="local-6989586621680957225"><span id="local-6989586621680957226"><span id="local-6989586621680957227"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#lookupTyVarM"><span class="hs-identifier hs-type">lookupTyVarM</span></a></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Error.html#AsTypeError"><span class="hs-identifier hs-type">AsTypeError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957227"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957226"><span class="hs-identifier hs-type">term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957225"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957224"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957223"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680957223"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957225"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957224"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957222"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957227"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-155"></span><span id="lookupTyVarM"><span class="annot"><span class="annottext">lookupTyVarM :: ann -&gt; TyName -&gt; TypeCheckM uni fun cfg err (Kind ())
</span><a href="PlutusCore.TypeCheck.Internal.html#lookupTyVarM"><span class="hs-identifier hs-var hs-var">lookupTyVarM</span></a></span></span><span> </span><span id="local-6989586621680957038"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680957038"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680957037"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680957037"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-156"></span><span>    </span><span id="local-6989586621680957036"><span class="annot"><span class="annottext">Maybe (Kind ())
</span><a href="#local-6989586621680957036"><span class="hs-identifier hs-var">mayKind</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TypeCheckEnv uni fun cfg -&gt; Maybe (Kind ()))
-&gt; ReaderT
     (TypeCheckEnv uni fun cfg) (ExceptT err Quote) (Maybe (Kind ()))
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier hs-var">asks</span></a></span><span> </span><span class="annot"><span class="annottext">((TypeCheckEnv uni fun cfg -&gt; Maybe (Kind ()))
 -&gt; ReaderT
      (TypeCheckEnv uni fun cfg) (ExceptT err Quote) (Maybe (Kind ())))
-&gt; (TypeCheckEnv uni fun cfg -&gt; Maybe (Kind ()))
-&gt; ReaderT
     (TypeCheckEnv uni fun cfg) (ExceptT err Quote) (Maybe (Kind ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TyName -&gt; TyVarKinds -&gt; Maybe (Kind ())
forall name unique a.
HasUnique name unique =&gt;
name -&gt; UniqueMap unique a -&gt; Maybe a
</span><a href="PlutusCore.Name.html#lookupName"><span class="hs-identifier hs-var">lookupName</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680957037"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(TyVarKinds -&gt; Maybe (Kind ()))
-&gt; (TypeCheckEnv uni fun cfg -&gt; TyVarKinds)
-&gt; TypeCheckEnv uni fun cfg
-&gt; Maybe (Kind ())
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TypeCheckEnv uni fun cfg -&gt; TyVarKinds
forall (uni :: * -&gt; *) fun cfg.
TypeCheckEnv uni fun cfg -&gt; TyVarKinds
</span><a href="PlutusCore.TypeCheck.Internal.html#_tceTyVarKinds"><span class="hs-identifier hs-var hs-var">_tceTyVarKinds</span></a></span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Kind ())
</span><a href="#local-6989586621680957036"><span class="hs-identifier hs-var">mayKind</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-158"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Kind ())
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError term uni fun ann)
-&gt; TypeError term uni fun ann
-&gt; TypeCheckM uni fun cfg err (Kind ())
forall e (m :: * -&gt; *) t x.
MonadError e m =&gt;
AReview e t -&gt; t -&gt; m x
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">throwing</span></a></span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError term uni fun ann)
forall r term (uni :: * -&gt; *) fun ann.
AsTypeError r term uni fun ann =&gt;
Prism' r (TypeError term uni fun ann)
</span><a href="PlutusCore.Error.html#_TypeError"><span class="hs-identifier hs-var">_TypeError</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeError term uni fun ann
 -&gt; TypeCheckM uni fun cfg err (Kind ()))
-&gt; TypeError term uni fun ann
-&gt; TypeCheckM uni fun cfg err (Kind ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ann -&gt; TyName -&gt; TypeError term uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann -&gt; TyName -&gt; TypeError term uni fun ann
</span><a href="PlutusCore.Error.html#FreeTypeVariableE"><span class="hs-identifier hs-var">FreeTypeVariableE</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680957038"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680957037"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-159"></span><span>        </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680957032"><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680957032"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Kind () -&gt; TypeCheckM uni fun cfg err (Kind ())
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680957032"><span class="hs-identifier hs-var">kind</span></a></span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span class="hs-comment">-- | Look up a term variable in the current context.</span><span>
</span><span id="line-162"></span><span id="local-6989586621680957144"><span id="local-6989586621680957145"><span id="local-6989586621680957146"><span id="local-6989586621680957147"><span id="local-6989586621680957148"><span id="local-6989586621680957149"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#lookupVarM"><span class="hs-identifier hs-type">lookupVarM</span></a></span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Error.html#AsTypeError"><span class="hs-identifier hs-type">AsTypeError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957149"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957148"><span class="hs-identifier hs-type">term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957147"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957146"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957145"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-164"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680957145"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957147"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957146"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957144"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957149"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-type">Normalized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957147"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-165"></span><span id="lookupVarM"><span class="annot"><span class="annottext">lookupVarM :: ann
-&gt; Name
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#lookupVarM"><span class="hs-identifier hs-var hs-var">lookupVarM</span></a></span></span><span> </span><span id="local-6989586621680957030"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680957030"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680957029"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680957029"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-166"></span><span>    </span><span id="local-6989586621680957028"><span class="annot"><span class="annottext">Maybe (Dupable (Normalized (Type TyName uni ())))
</span><a href="#local-6989586621680957028"><span class="hs-identifier hs-var">mayTy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TypeCheckEnv uni fun cfg
 -&gt; Maybe (Dupable (Normalized (Type TyName uni ()))))
-&gt; ReaderT
     (TypeCheckEnv uni fun cfg)
     (ExceptT err Quote)
     (Maybe (Dupable (Normalized (Type TyName uni ()))))
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier hs-var">asks</span></a></span><span> </span><span class="annot"><span class="annottext">((TypeCheckEnv uni fun cfg
  -&gt; Maybe (Dupable (Normalized (Type TyName uni ()))))
 -&gt; ReaderT
      (TypeCheckEnv uni fun cfg)
      (ExceptT err Quote)
      (Maybe (Dupable (Normalized (Type TyName uni ())))))
-&gt; (TypeCheckEnv uni fun cfg
    -&gt; Maybe (Dupable (Normalized (Type TyName uni ()))))
-&gt; ReaderT
     (TypeCheckEnv uni fun cfg)
     (ExceptT err Quote)
     (Maybe (Dupable (Normalized (Type TyName uni ()))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; UniqueMap TermUnique (Dupable (Normalized (Type TyName uni ())))
-&gt; Maybe (Dupable (Normalized (Type TyName uni ())))
forall name unique a.
HasUnique name unique =&gt;
name -&gt; UniqueMap unique a -&gt; Maybe a
</span><a href="PlutusCore.Name.html#lookupName"><span class="hs-identifier hs-var">lookupName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680957029"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(UniqueMap TermUnique (Dupable (Normalized (Type TyName uni ())))
 -&gt; Maybe (Dupable (Normalized (Type TyName uni ()))))
-&gt; (TypeCheckEnv uni fun cfg
    -&gt; UniqueMap
         TermUnique (Dupable (Normalized (Type TyName uni ()))))
-&gt; TypeCheckEnv uni fun cfg
-&gt; Maybe (Dupable (Normalized (Type TyName uni ())))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TypeCheckEnv uni fun cfg
-&gt; UniqueMap TermUnique (Dupable (Normalized (Type TyName uni ())))
forall (uni :: * -&gt; *) fun cfg.
TypeCheckEnv uni fun cfg -&gt; VarTypes uni
</span><a href="PlutusCore.TypeCheck.Internal.html#_tceVarTypes"><span class="hs-identifier hs-var hs-var">_tceVarTypes</span></a></span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Dupable (Normalized (Type TyName uni ())))
</span><a href="#local-6989586621680957028"><span class="hs-identifier hs-var">mayTy</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-168"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Dupable (Normalized (Type TyName uni ())))
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError term uni fun ann)
-&gt; TypeError term uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall e (m :: * -&gt; *) t x.
MonadError e m =&gt;
AReview e t -&gt; t -&gt; m x
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">throwing</span></a></span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError term uni fun ann)
forall r term (uni :: * -&gt; *) fun ann.
AsTypeError r term uni fun ann =&gt;
Prism' r (TypeError term uni fun ann)
</span><a href="PlutusCore.Error.html#_TypeError"><span class="hs-identifier hs-var">_TypeError</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeError term uni fun ann
 -&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ())))
-&gt; TypeError term uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ann -&gt; Name -&gt; TypeError term uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann -&gt; Name -&gt; TypeError term uni fun ann
</span><a href="PlutusCore.Error.html#FreeVariableE"><span class="hs-identifier hs-var">FreeVariableE</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680957030"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680957029"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-169"></span><span>        </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680957026"><span class="annot"><span class="annottext">Dupable (Normalized (Type TyName uni ()))
</span><a href="#local-6989586621680957026"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Dupable (Normalized (Type TyName uni ()))
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) a.
(MonadQuote m, Rename a) =&gt;
Dupable a -&gt; m a
</span><a href="PlutusCore.Rename.html#liftDupable"><span class="hs-identifier hs-var">liftDupable</span></a></span><span> </span><span class="annot"><span class="annottext">Dupable (Normalized (Type TyName uni ()))
</span><a href="#local-6989586621680957026"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="hs-comment">-- #############</span><span>
</span><span id="line-172"></span><span class="hs-comment">-- ## Dummies ##</span><span>
</span><span id="line-173"></span><span class="hs-comment">-- #############</span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#dummyUnique"><span class="hs-identifier hs-type">dummyUnique</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span>
</span><span id="line-176"></span><span id="dummyUnique"><span class="annot"><span class="annottext">dummyUnique :: Unique
</span><a href="PlutusCore.TypeCheck.Internal.html#dummyUnique"><span class="hs-identifier hs-var hs-var">dummyUnique</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Unique
</span><a href="PlutusCore.Name.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#dummyTyName"><span class="hs-identifier hs-type">dummyTyName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span>
</span><span id="line-179"></span><span id="dummyTyName"><span class="annot"><span class="annottext">dummyTyName :: TyName
</span><a href="PlutusCore.TypeCheck.Internal.html#dummyTyName"><span class="hs-identifier hs-var hs-var">dummyTyName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; TyName
</span><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-var">TyName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Unique -&gt; Name
</span><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-var">Name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;*&quot;</span></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="PlutusCore.TypeCheck.Internal.html#dummyUnique"><span class="hs-identifier hs-var">dummyUnique</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#dummyKind"><span class="hs-identifier hs-type">dummyKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span id="dummyKind"><span class="annot"><span class="annottext">dummyKind :: Kind ()
</span><a href="PlutusCore.TypeCheck.Internal.html#dummyKind"><span class="hs-identifier hs-var hs-var">dummyKind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span id="local-6989586621680957119"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#dummyType"><span class="hs-identifier hs-type">dummyType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957119"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-185"></span><span id="dummyType"><span class="annot"><span class="annottext">dummyType :: Type TyName uni ()
</span><a href="PlutusCore.TypeCheck.Internal.html#dummyType"><span class="hs-identifier hs-var hs-var">dummyType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; TyName -&gt; Type TyName uni ()
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyVar"><span class="hs-identifier hs-var">TyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="PlutusCore.TypeCheck.Internal.html#dummyTyName"><span class="hs-identifier hs-var">dummyTyName</span></a></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-comment">-- ########################</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- ## Type normalization ##</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- ########################</span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="hs-comment">-- | Normalize a 'Type'.</span><span>
</span><span id="line-192"></span><span id="local-6989586621680957173"><span id="local-6989586621680957174"><span id="local-6989586621680957175"><span id="local-6989586621680957176"><span id="local-6989586621680957177"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#normalizeTypeM"><span class="hs-identifier hs-type">normalizeTypeM</span></a></span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Universe.Core.html#HasUniApply"><span class="hs-identifier hs-type">HasUniApply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957177"><span class="hs-identifier hs-type">uni</span></a></span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957177"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957176"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957177"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957175"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957174"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957173"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-type">Normalized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957177"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957176"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-196"></span><span id="normalizeTypeM"><span class="annot"><span class="annottext">normalizeTypeM :: Type TyName uni ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ann))
</span><a href="PlutusCore.TypeCheck.Internal.html#normalizeTypeM"><span class="hs-identifier hs-var hs-var">normalizeTypeM</span></a></span></span><span> </span><span id="local-6989586621680957015"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680957015"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NormalizeTypeT
  (ReaderT (TypeCheckEnv uni fun cfg) (ExceptT err Quote))
  TyName
  uni
  ann
  (Normalized (Type TyName uni ann))
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ann))
forall (m :: * -&gt; *) tyname (uni :: * -&gt; *) ann a.
NormalizeTypeT m tyname uni ann a -&gt; m a
</span><a href="PlutusCore.Normalize.Internal.html#runNormalizeTypeM"><span class="hs-identifier hs-var">Norm.runNormalizeTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">(NormalizeTypeT
   (ReaderT (TypeCheckEnv uni fun cfg) (ExceptT err Quote))
   TyName
   uni
   ann
   (Normalized (Type TyName uni ann))
 -&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ann)))
-&gt; NormalizeTypeT
     (ReaderT (TypeCheckEnv uni fun cfg) (ExceptT err Quote))
     TyName
     uni
     ann
     (Normalized (Type TyName uni ann))
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ann))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
-&gt; NormalizeTypeT
     (ReaderT (TypeCheckEnv uni fun cfg) (ExceptT err Quote))
     TyName
     uni
     ann
     (Normalized (Type TyName uni ann))
forall tyname (m :: * -&gt; *) (uni :: * -&gt; *) ann.
(HasUnique tyname TypeUnique, MonadQuote m, HasUniApply uni) =&gt;
Type tyname uni ann
-&gt; NormalizeTypeT
     m tyname uni ann (Normalized (Type tyname uni ann))
</span><a href="PlutusCore.Normalize.Internal.html#normalizeTypeM"><span class="hs-identifier hs-var">Norm.normalizeTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680957015"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="hs-comment">-- | Substitute a type for a variable in a type and normalize the result.</span><span>
</span><span id="line-199"></span><span id="local-6989586621680957115"><span id="local-6989586621680957116"><span id="local-6989586621680957117"><span id="local-6989586621680957118"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#substNormalizeTypeM"><span class="hs-identifier hs-type">substNormalizeTypeM</span></a></span><span>
</span><span id="line-200"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Universe.Core.html#HasUniApply"><span class="hs-identifier hs-type">HasUniApply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957118"><span class="hs-identifier hs-type">uni</span></a></span><span>
</span><span id="line-201"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-type">Normalized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957118"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ @ty@</span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span>                           </span><span class="hs-comment">-- ^ @name@</span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957118"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>               </span><span class="hs-comment">-- ^ @body@</span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957118"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957117"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957116"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957115"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-type">Normalized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957118"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-205"></span><span id="substNormalizeTypeM"><span class="annot"><span class="annottext">substNormalizeTypeM :: Normalized (Type TyName uni ())
-&gt; TyName
-&gt; Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#substNormalizeTypeM"><span class="hs-identifier hs-var hs-var">substNormalizeTypeM</span></a></span></span><span> </span><span id="local-6989586621680957011"><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680957011"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680957010"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680957010"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680957009"><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680957009"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NormalizeTypeT
  (ReaderT (TypeCheckEnv uni fun cfg) (ExceptT err Quote))
  TyName
  uni
  ()
  (Normalized (Type TyName uni ()))
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (m :: * -&gt; *) tyname (uni :: * -&gt; *) ann a.
NormalizeTypeT m tyname uni ann a -&gt; m a
</span><a href="PlutusCore.Normalize.Internal.html#runNormalizeTypeM"><span class="hs-identifier hs-var">Norm.runNormalizeTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">(NormalizeTypeT
   (ReaderT (TypeCheckEnv uni fun cfg) (ExceptT err Quote))
   TyName
   uni
   ()
   (Normalized (Type TyName uni ()))
 -&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ())))
-&gt; NormalizeTypeT
     (ReaderT (TypeCheckEnv uni fun cfg) (ExceptT err Quote))
     TyName
     uni
     ()
     (Normalized (Type TyName uni ()))
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
-&gt; TyName
-&gt; Type TyName uni ()
-&gt; NormalizeTypeT
     (ReaderT (TypeCheckEnv uni fun cfg) (ExceptT err Quote))
     TyName
     uni
     ()
     (Normalized (Type TyName uni ()))
forall tyname (m :: * -&gt; *) (uni :: * -&gt; *) ann.
(HasUnique tyname TypeUnique, MonadQuote m, HasUniApply uni) =&gt;
Normalized (Type tyname uni ann)
-&gt; tyname
-&gt; Type tyname uni ann
-&gt; NormalizeTypeT
     m tyname uni ann (Normalized (Type tyname uni ann))
</span><a href="PlutusCore.Normalize.Internal.html#substNormalizeTypeM"><span class="hs-identifier hs-var">Norm.substNormalizeTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680957011"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680957010"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680957009"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="hs-comment">-- ###################</span><span>
</span><span id="line-208"></span><span class="hs-comment">-- ## Kind checking ##</span><span>
</span><span id="line-209"></span><span class="hs-comment">-- ###################</span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span class="hs-comment">-- | Infer the kind of a type.</span><span>
</span><span id="line-212"></span><span id="local-6989586621680957206"><span id="local-6989586621680957207"><span id="local-6989586621680957208"><span id="local-6989586621680957209"><span id="local-6989586621680957210"><span id="local-6989586621680957211"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferKindM"><span class="hs-identifier hs-type">inferKindM</span></a></span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Error.html#AsTypeError"><span class="hs-identifier hs-type">AsTypeError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957211"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957210"><span class="hs-identifier hs-type">term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957209"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957208"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957207"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownKind.html#ToKind"><span class="hs-identifier hs-type">ToKind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957209"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957209"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957207"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957209"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957208"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957206"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957211"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-comment">-- b :: k</span><span>
</span><span id="line-217"></span><span class="hs-comment">-- ------------------------</span><span>
</span><span id="line-218"></span><span class="hs-comment">-- [infer| G !- con b :: k]</span><span>
</span><span id="line-219"></span><span id="inferKindM"><span class="annot"><span class="annottext">inferKindM :: Type TyName uni ann -&gt; TypeCheckM uni fun cfg err (Kind ())
</span><a href="PlutusCore.TypeCheck.Internal.html#inferKindM"><span class="hs-identifier hs-var hs-var">inferKindM</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyBuiltin"><span class="hs-identifier hs-type">TyBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span id="local-6989586621680957004"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680957004"><span class="hs-identifier hs-var">uni</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-220"></span><span>    </span><span class="annot"><span class="annottext">Kind () -&gt; TypeCheckM uni fun cfg err (Kind ())
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind () -&gt; TypeCheckM uni fun cfg err (Kind ()))
-&gt; Kind () -&gt; TypeCheckM uni fun cfg err (Kind ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a) -&gt; Kind ()
forall k (uni :: * -&gt; *) (a :: k).
ToKind uni =&gt;
uni (Esc a) -&gt; Kind ()
</span><a href="PlutusCore.Builtin.KnownKind.html#kindOfBuiltinType"><span class="hs-identifier hs-var">kindOfBuiltinType</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680957004"><span class="hs-identifier hs-var">uni</span></a></span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="hs-comment">-- [infer| G !- v :: k]</span><span>
</span><span id="line-223"></span><span class="hs-comment">-- ------------------------</span><span>
</span><span id="line-224"></span><span class="hs-comment">-- [infer| G !- var v :: k]</span><span>
</span><span id="line-225"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferKindM"><span class="hs-identifier hs-var">inferKindM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span id="local-6989586621680957002"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680957002"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680957001"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680957001"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span>
</span><span id="line-226"></span><span>    </span><span class="annot"><span class="annottext">ann -&gt; TyName -&gt; TypeCheckM uni fun cfg err (Kind ())
forall err term (uni :: * -&gt; *) fun ann cfg.
AsTypeError err term uni fun ann =&gt;
ann -&gt; TyName -&gt; TypeCheckM uni fun cfg err (Kind ())
</span><a href="PlutusCore.TypeCheck.Internal.html#lookupTyVarM"><span class="hs-identifier hs-var">lookupTyVarM</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680957002"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680957001"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-comment">-- [infer| G , n :: dom !- body :: cod]</span><span>
</span><span id="line-229"></span><span class="hs-comment">-- -------------------------------------------------</span><span>
</span><span id="line-230"></span><span class="hs-comment">-- [infer| G !- (\(n :: dom) -&gt; body) :: dom -&gt; cod]</span><span>
</span><span id="line-231"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferKindM"><span class="hs-identifier hs-var">inferKindM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyLam"><span class="hs-identifier hs-type">TyLam</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680956999"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680956999"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680956998"><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680956998"><span class="hs-identifier hs-var">dom</span></a></span></span><span> </span><span id="local-6989586621680956997"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956997"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680956996"><span class="annot"><span class="annottext">dom_ :: Kind ()
</span><a href="#local-6989586621680956996"><span class="hs-identifier hs-var hs-var">dom_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind ann -&gt; Kind ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680956998"><span class="hs-identifier hs-var">dom</span></a></span><span>
</span><span id="line-233"></span><span>    </span><span class="annot"><span class="annottext">TyName
-&gt; Kind ()
-&gt; TypeCheckM uni fun cfg err (Kind ())
-&gt; TypeCheckM uni fun cfg err (Kind ())
forall (uni :: * -&gt; *) fun cfg err a.
TyName
-&gt; Kind ()
-&gt; TypeCheckM uni fun cfg err a
-&gt; TypeCheckM uni fun cfg err a
</span><a href="PlutusCore.TypeCheck.Internal.html#withTyVar"><span class="hs-identifier hs-var">withTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680956999"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956996"><span class="hs-identifier hs-var">dom_</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeCheckM uni fun cfg err (Kind ())
 -&gt; TypeCheckM uni fun cfg err (Kind ()))
-&gt; TypeCheckM uni fun cfg err (Kind ())
-&gt; TypeCheckM uni fun cfg err (Kind ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; Kind () -&gt; Kind () -&gt; Kind ()
forall ann. ann -&gt; Kind ann -&gt; Kind ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#KindArrow"><span class="hs-identifier hs-var">KindArrow</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956996"><span class="hs-identifier hs-var">dom_</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind () -&gt; Kind ())
-&gt; TypeCheckM uni fun cfg err (Kind ())
-&gt; TypeCheckM uni fun cfg err (Kind ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; TypeCheckM uni fun cfg err (Kind ())
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
Type TyName uni ann -&gt; TypeCheckM uni fun cfg err (Kind ())
</span><a href="PlutusCore.TypeCheck.Internal.html#inferKindM"><span class="hs-identifier hs-var">inferKindM</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956997"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="hs-comment">-- [infer| G !- fun :: dom -&gt; cod]    [check| G !- arg :: dom]</span><span>
</span><span id="line-236"></span><span class="hs-comment">-- -----------------------------------------------------------</span><span>
</span><span id="line-237"></span><span class="hs-comment">-- [infer| G !- fun arg :: cod]</span><span>
</span><span id="line-238"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferKindM"><span class="hs-identifier hs-var">inferKindM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyApp"><span class="hs-identifier hs-type">TyApp</span></a></span><span> </span><span id="local-6989586621680956991"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956991"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680956990"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956990"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621680956989"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956989"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-239"></span><span>    </span><span id="local-6989586621680956988"><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956988"><span class="hs-identifier hs-var">funKind</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; TypeCheckM uni fun cfg err (Kind ())
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
Type TyName uni ann -&gt; TypeCheckM uni fun cfg err (Kind ())
</span><a href="PlutusCore.TypeCheck.Internal.html#inferKindM"><span class="hs-identifier hs-var">inferKindM</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956990"><span class="hs-identifier hs-var">fun</span></a></span><span>
</span><span id="line-240"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956988"><span class="hs-identifier hs-var">funKind</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-241"></span><span>        </span><span class="annot"><a href="PlutusCore.Core.Type.html#KindArrow"><span class="hs-identifier hs-type">KindArrow</span></a></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680956987"><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956987"><span class="hs-identifier hs-var">dom</span></a></span></span><span> </span><span id="local-6989586621680956986"><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956986"><span class="hs-identifier hs-var">cod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-242"></span><span>            </span><span class="annot"><span class="annottext">ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
</span><a href="PlutusCore.TypeCheck.Internal.html#checkKindM"><span class="hs-identifier hs-var">checkKindM</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956991"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956989"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956987"><span class="hs-identifier hs-var">dom</span></a></span><span>
</span><span id="line-243"></span><span>            </span><span class="annot"><span class="annottext">Kind () -&gt; TypeCheckM uni fun cfg err (Kind ())
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956986"><span class="hs-identifier hs-var">cod</span></a></span><span>
</span><span id="line-244"></span><span>        </span><span class="annot"><span class="annottext">Kind ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError term uni fun ann)
-&gt; TypeError term uni fun ann
-&gt; TypeCheckM uni fun cfg err (Kind ())
forall e (m :: * -&gt; *) t x.
MonadError e m =&gt;
AReview e t -&gt; t -&gt; m x
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">throwing</span></a></span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError term uni fun ann)
forall r term (uni :: * -&gt; *) fun ann.
AsTypeError r term uni fun ann =&gt;
Prism' r (TypeError term uni fun ann)
</span><a href="PlutusCore.Error.html#_TypeError"><span class="hs-identifier hs-var">_TypeError</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeError term uni fun ann
 -&gt; TypeCheckM uni fun cfg err (Kind ()))
-&gt; TypeError term uni fun ann
-&gt; TypeCheckM uni fun cfg err (Kind ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ann
-&gt; Type TyName uni ()
-&gt; Kind ()
-&gt; Kind ()
-&gt; TypeError term uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann
-&gt; Type TyName uni ()
-&gt; Kind ()
-&gt; Kind ()
-&gt; TypeError term uni fun ann
</span><a href="PlutusCore.Error.html#KindMismatch"><span class="hs-identifier hs-var">KindMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956991"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956990"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Kind () -&gt; Kind () -&gt; Kind ()
forall ann. ann -&gt; Kind ann -&gt; Kind ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#KindArrow"><span class="hs-identifier hs-var">KindArrow</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="PlutusCore.TypeCheck.Internal.html#dummyKind"><span class="hs-identifier hs-var">dummyKind</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="PlutusCore.TypeCheck.Internal.html#dummyKind"><span class="hs-identifier hs-var">dummyKind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956988"><span class="hs-identifier hs-var">funKind</span></a></span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span class="hs-comment">-- [check| G !- a :: *]    [check| G !- b :: *]</span><span>
</span><span id="line-247"></span><span class="hs-comment">-- --------------------------------------------</span><span>
</span><span id="line-248"></span><span class="hs-comment">-- [infer| G !- a -&gt; b :: *]</span><span>
</span><span id="line-249"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferKindM"><span class="hs-identifier hs-var">inferKindM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyFun"><span class="hs-identifier hs-type">TyFun</span></a></span><span> </span><span id="local-6989586621680956982"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956982"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680956981"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956981"><span class="hs-identifier hs-var">dom</span></a></span></span><span> </span><span id="local-6989586621680956980"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956980"><span class="hs-identifier hs-var">cod</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-250"></span><span>    </span><span class="annot"><span class="annottext">ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
</span><a href="PlutusCore.TypeCheck.Internal.html#checkKindM"><span class="hs-identifier hs-var">checkKindM</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956982"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956981"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind () -&gt; TypeCheckM uni fun cfg err ())
-&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>    </span><span class="annot"><span class="annottext">ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
</span><a href="PlutusCore.TypeCheck.Internal.html#checkKindM"><span class="hs-identifier hs-var">checkKindM</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956982"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956980"><span class="hs-identifier hs-var">cod</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind () -&gt; TypeCheckM uni fun cfg err ())
-&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>    </span><span class="annot"><span class="annottext">Kind () -&gt; TypeCheckM uni fun cfg err (Kind ())
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind () -&gt; TypeCheckM uni fun cfg err (Kind ()))
-&gt; Kind () -&gt; TypeCheckM uni fun cfg err (Kind ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-comment">-- [check| G , n :: k !- body :: *]</span><span>
</span><span id="line-255"></span><span class="hs-comment">-- ---------------------------------------</span><span>
</span><span id="line-256"></span><span class="hs-comment">-- [infer| G !- (all (n :: k). body) :: *]</span><span>
</span><span id="line-257"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferKindM"><span class="hs-identifier hs-var">inferKindM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyForall"><span class="hs-identifier hs-type">TyForall</span></a></span><span> </span><span id="local-6989586621680956978"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956978"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680956977"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680956977"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680956976"><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680956976"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621680956975"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956975"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-258"></span><span>    </span><span class="annot"><span class="annottext">TyName
-&gt; Kind ()
-&gt; TypeCheckM uni fun cfg err ()
-&gt; TypeCheckM uni fun cfg err ()
forall (uni :: * -&gt; *) fun cfg err a.
TyName
-&gt; Kind ()
-&gt; TypeCheckM uni fun cfg err a
-&gt; TypeCheckM uni fun cfg err a
</span><a href="PlutusCore.TypeCheck.Internal.html#withTyVar"><span class="hs-identifier hs-var">withTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680956977"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind ann -&gt; Kind ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680956976"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TypeCheckM uni fun cfg err () -&gt; TypeCheckM uni fun cfg err ())
-&gt; TypeCheckM uni fun cfg err () -&gt; TypeCheckM uni fun cfg err ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
</span><a href="PlutusCore.TypeCheck.Internal.html#checkKindM"><span class="hs-identifier hs-var">checkKindM</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956978"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956975"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>    </span><span class="annot"><span class="annottext">Kind () -&gt; TypeCheckM uni fun cfg err (Kind ())
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind () -&gt; TypeCheckM uni fun cfg err (Kind ()))
-&gt; Kind () -&gt; TypeCheckM uni fun cfg err (Kind ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="hs-comment">-- [infer| G !- arg :: k]    [check| G !- pat :: (k -&gt; *) -&gt; k -&gt; *]</span><span>
</span><span id="line-262"></span><span class="hs-comment">-- -----------------------------------------------------------------</span><span>
</span><span id="line-263"></span><span class="hs-comment">-- [infer| G !- ifix pat arg :: *]</span><span>
</span><span id="line-264"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferKindM"><span class="hs-identifier hs-var">inferKindM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyIFix"><span class="hs-identifier hs-type">TyIFix</span></a></span><span> </span><span id="local-6989586621680956973"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956973"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680956972"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956972"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621680956971"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956971"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-265"></span><span>    </span><span id="local-6989586621680956970"><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956970"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; TypeCheckM uni fun cfg err (Kind ())
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
Type TyName uni ann -&gt; TypeCheckM uni fun cfg err (Kind ())
</span><a href="PlutusCore.TypeCheck.Internal.html#inferKindM"><span class="hs-identifier hs-var">inferKindM</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956971"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><span class="annottext">ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
</span><a href="PlutusCore.TypeCheck.Internal.html#checkKindOfPatternFunctorM"><span class="hs-identifier hs-var">checkKindOfPatternFunctorM</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956973"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956972"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956970"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span class="annot"><span class="annottext">Kind () -&gt; TypeCheckM uni fun cfg err (Kind ())
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind () -&gt; TypeCheckM uni fun cfg err (Kind ()))
-&gt; Kind () -&gt; TypeCheckM uni fun cfg err (Kind ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="hs-comment">-- | Check a 'Type' against a 'Kind'.</span><span>
</span><span id="line-270"></span><span id="local-6989586621680957200"><span id="local-6989586621680957201"><span id="local-6989586621680957202"><span id="local-6989586621680957203"><span id="local-6989586621680957204"><span id="local-6989586621680957205"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#checkKindM"><span class="hs-identifier hs-type">checkKindM</span></a></span><span>
</span><span id="line-271"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Error.html#AsTypeError"><span class="hs-identifier hs-type">AsTypeError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957205"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957204"><span class="hs-identifier hs-type">term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957203"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957202"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957201"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownKind.html#ToKind"><span class="hs-identifier hs-type">ToKind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957203"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680957201"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957203"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957201"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957203"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957202"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957200"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957205"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="hs-comment">-- [infer| G !- ty : tyK]    tyK ~ k</span><span>
</span><span id="line-275"></span><span class="hs-comment">-- ---------------------------------</span><span>
</span><span id="line-276"></span><span class="hs-comment">-- [check| G !- ty : k]</span><span>
</span><span id="line-277"></span><span id="checkKindM"><span class="annot"><span class="annottext">checkKindM :: ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
</span><a href="PlutusCore.TypeCheck.Internal.html#checkKindM"><span class="hs-identifier hs-var hs-var">checkKindM</span></a></span></span><span> </span><span id="local-6989586621680956968"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956968"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680956967"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956967"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680956966"><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956966"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-278"></span><span>    </span><span id="local-6989586621680956965"><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956965"><span class="hs-identifier hs-var">tyK</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; TypeCheckM uni fun cfg err (Kind ())
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
Type TyName uni ann -&gt; TypeCheckM uni fun cfg err (Kind ())
</span><a href="PlutusCore.TypeCheck.Internal.html#inferKindM"><span class="hs-identifier hs-var">inferKindM</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956967"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><span class="annottext">Bool
-&gt; TypeCheckM uni fun cfg err () -&gt; TypeCheckM uni fun cfg err ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956965"><span class="hs-identifier hs-var">tyK</span></a></span><span> </span><span class="annot"><span class="annottext">Kind () -&gt; Kind () -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956966"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TypeCheckM uni fun cfg err () -&gt; TypeCheckM uni fun cfg err ())
-&gt; TypeCheckM uni fun cfg err () -&gt; TypeCheckM uni fun cfg err ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError term uni fun ann)
-&gt; TypeError term uni fun ann -&gt; TypeCheckM uni fun cfg err ()
forall e (m :: * -&gt; *) t x.
MonadError e m =&gt;
AReview e t -&gt; t -&gt; m x
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">throwing</span></a></span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError term uni fun ann)
forall r term (uni :: * -&gt; *) fun ann.
AsTypeError r term uni fun ann =&gt;
Prism' r (TypeError term uni fun ann)
</span><a href="PlutusCore.Error.html#_TypeError"><span class="hs-identifier hs-var">_TypeError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ann
-&gt; Type TyName uni ()
-&gt; Kind ()
-&gt; Kind ()
-&gt; TypeError term uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann
-&gt; Type TyName uni ()
-&gt; Kind ()
-&gt; Kind ()
-&gt; TypeError term uni fun ann
</span><a href="PlutusCore.Error.html#KindMismatch"><span class="hs-identifier hs-var">KindMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956968"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956967"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956966"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956965"><span class="hs-identifier hs-var">tyK</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span class="hs-comment">-- | Check that the kind of a pattern functor is @(k -&gt; *) -&gt; k -&gt; *@.</span><span>
</span><span id="line-282"></span><span id="local-6989586621680956957"><span id="local-6989586621680956958"><span id="local-6989586621680956959"><span id="local-6989586621680956960"><span id="local-6989586621680956961"><span id="local-6989586621680956962"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#checkKindOfPatternFunctorM"><span class="hs-identifier hs-type">checkKindOfPatternFunctorM</span></a></span><span>
</span><span id="line-283"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Error.html#AsTypeError"><span class="hs-identifier hs-type">AsTypeError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956962"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956961"><span class="hs-identifier hs-type">term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956960"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956959"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956958"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownKind.html#ToKind"><span class="hs-identifier hs-type">ToKind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956960"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680956958"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-285"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956960"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956958"><span class="hs-identifier hs-type">ann</span></a></span><span>  </span><span class="hs-comment">-- ^ A pattern functor.</span><span>
</span><span id="line-286"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>              </span><span class="hs-comment">-- ^ @k@.</span><span>
</span><span id="line-287"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956960"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956959"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956957"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680956962"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-288"></span><span id="checkKindOfPatternFunctorM"><span class="annot"><span class="annottext">checkKindOfPatternFunctorM :: ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
</span><a href="PlutusCore.TypeCheck.Internal.html#checkKindOfPatternFunctorM"><span class="hs-identifier hs-var hs-var">checkKindOfPatternFunctorM</span></a></span></span><span> </span><span id="local-6989586621680956956"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956956"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680956955"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956955"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621680956954"><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956954"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-289"></span><span>    </span><span class="annot"><span class="annottext">ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
</span><a href="PlutusCore.TypeCheck.Internal.html#checkKindM"><span class="hs-identifier hs-var">checkKindM</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956956"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956955"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind () -&gt; TypeCheckM uni fun cfg err ())
-&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; Kind () -&gt; Kind () -&gt; Kind ()
forall ann. ann -&gt; Kind ann -&gt; Kind ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#KindArrow"><span class="hs-identifier hs-var">KindArrow</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Kind () -&gt; Kind () -&gt; Kind ()
forall ann. ann -&gt; Kind ann -&gt; Kind ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#KindArrow"><span class="hs-identifier hs-var">KindArrow</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956954"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Kind () -&gt; Kind () -&gt; Kind ()
forall ann. ann -&gt; Kind ann -&gt; Kind ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#KindArrow"><span class="hs-identifier hs-var">KindArrow</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956954"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="hs-comment">-- ###################</span><span>
</span><span id="line-292"></span><span class="hs-comment">-- ## Type checking ##</span><span>
</span><span id="line-293"></span><span class="hs-comment">-- ###################</span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span class="hs-comment">-- | @unfoldIFixOf pat arg k = NORM (vPat (\(a :: k) -&gt; ifix vPat a) arg)@</span><span>
</span><span id="line-296"></span><span id="local-6989586621680957111"><span id="local-6989586621680957112"><span id="local-6989586621680957113"><span id="local-6989586621680957114"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#unfoldIFixOf"><span class="hs-identifier hs-type">unfoldIFixOf</span></a></span><span>
</span><span id="line-297"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Universe.Core.html#HasUniApply"><span class="hs-identifier hs-type">HasUniApply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957114"><span class="hs-identifier hs-type">uni</span></a></span><span>
</span><span id="line-298"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-type">Normalized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957114"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ @vPat@</span><span>
</span><span id="line-299"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-type">Normalized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957114"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ @vArg@</span><span>
</span><span id="line-300"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>                          </span><span class="hs-comment">-- ^ @k@</span><span>
</span><span id="line-301"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957114"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957113"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957112"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957111"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-type">Normalized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957114"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-302"></span><span id="unfoldIFixOf"><span class="annot"><span class="annottext">unfoldIFixOf :: Normalized (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; Kind ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#unfoldIFixOf"><span class="hs-identifier hs-var hs-var">unfoldIFixOf</span></a></span></span><span> </span><span id="local-6989586621680956952"><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956952"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621680956951"><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956951"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621680956950"><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956950"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680956949"><span class="annot"><span class="annottext">vPat :: Type TyName uni ()
</span><a href="#local-6989586621680956949"><span class="hs-identifier hs-var hs-var">vPat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ()) -&gt; Type TyName uni ()
forall a. Normalized a -&gt; a
</span><a href="PlutusCore.Core.Type.html#unNormalized"><span class="hs-identifier hs-var hs-var">unNormalized</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956952"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-304"></span><span>        </span><span id="local-6989586621680956947"><span class="annot"><span class="annottext">vArg :: Type TyName uni ()
</span><a href="#local-6989586621680956947"><span class="hs-identifier hs-var hs-var">vArg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ()) -&gt; Type TyName uni ()
forall a. Normalized a -&gt; a
</span><a href="PlutusCore.Core.Type.html#unNormalized"><span class="hs-identifier hs-var hs-var">unNormalized</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956951"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-305"></span><span>    </span><span id="local-6989586621680956946"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680956946"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Quote TyName
-&gt; ReaderT (TypeCheckEnv uni fun cfg) (ExceptT err Quote) TyName
forall (m :: * -&gt; *) a. MonadQuote m =&gt; Quote a -&gt; m a
</span><a href="PlutusCore.Quote.html#liftQuote"><span class="hs-identifier hs-var">liftQuote</span></a></span><span> </span><span class="annot"><span class="annottext">(Quote TyName
 -&gt; ReaderT (TypeCheckEnv uni fun cfg) (ExceptT err Quote) TyName)
-&gt; Quote TyName
-&gt; ReaderT (TypeCheckEnv uni fun cfg) (ExceptT err Quote) TyName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Quote TyName
forall (m :: * -&gt; *). MonadQuote m =&gt; Text -&gt; m TyName
</span><a href="PlutusCore.Quote.html#freshTyName"><span class="hs-identifier hs-var">freshTyName</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;a&quot;</span></span><span>
</span><span id="line-306"></span><span>    </span><span class="hs-comment">-- We need to rename @vPat@, otherwise it would be used twice below, which would break global</span><span>
</span><span id="line-307"></span><span>    </span><span class="hs-comment">-- uniqueness. Alternatively, we could use 'normalizeType' instead of 'normalizeTypeM' as the</span><span>
</span><span id="line-308"></span><span>    </span><span class="hs-comment">-- former performs renaming before doing normalization, but renaming the entire type implicitly</span><span>
</span><span id="line-309"></span><span>    </span><span class="hs-comment">-- would be less efficient than renaming a subpart of the type explicitly.</span><span>
</span><span id="line-310"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-311"></span><span>    </span><span class="hs-comment">-- Note however that breaking global uniqueness here most likely would not result in buggy</span><span>
</span><span id="line-312"></span><span>    </span><span class="hs-comment">-- behavior, see https://github.com/input-output-hk/plutus/pull/2219#issuecomment-672815272</span><span>
</span><span id="line-313"></span><span>    </span><span class="hs-comment">-- But breaking global uniqueness is a bad idea regardless.</span><span>
</span><span id="line-314"></span><span>    </span><span id="local-6989586621680956944"><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956944"><span class="hs-identifier hs-var">vPat'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
-&gt; ReaderT
     (TypeCheckEnv uni fun cfg) (ExceptT err Quote) (Type TyName uni ())
forall a (m :: * -&gt; *). (Rename a, MonadQuote m) =&gt; a -&gt; m a
</span><a href="PlutusCore.Rename.html#rename"><span class="hs-identifier hs-var">rename</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956949"><span class="hs-identifier hs-var">vPat</span></a></span><span>
</span><span id="line-315"></span><span>    </span><span class="annot"><span class="annottext">Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) ann fun cfg err.
HasUniApply uni =&gt;
Type TyName uni ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ann))
</span><a href="PlutusCore.TypeCheck.Internal.html#normalizeTypeM"><span class="hs-identifier hs-var">normalizeTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni ()
 -&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ())))
-&gt; Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-316"></span><span>        </span><span class="annot"><span class="annottext">()
-&gt; Type TyName uni () -&gt; [Type TyName uni ()] -&gt; Type TyName uni ()
forall ann tyname (uni :: * -&gt; *).
ann
-&gt; Type tyname uni ann
-&gt; [Type tyname uni ann]
-&gt; Type tyname uni ann
</span><a href="PlutusCore.MkPlc.html#mkIterTyApp"><span class="hs-identifier hs-var">mkIterTyApp</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956944"><span class="hs-identifier hs-var">vPat'</span></a></span><span>
</span><span id="line-317"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">() -&gt; TyName -&gt; Kind () -&gt; Type TyName uni () -&gt; Type TyName uni ()
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyLam"><span class="hs-identifier hs-var">TyLam</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680956946"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956950"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni () -&gt; Type TyName uni ())
-&gt; (Type TyName uni () -&gt; Type TyName uni ())
-&gt; Type TyName uni ()
-&gt; Type TyName uni ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">()
-&gt; Type TyName uni () -&gt; Type TyName uni () -&gt; Type TyName uni ()
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyIFix"><span class="hs-identifier hs-var">TyIFix</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956949"><span class="hs-identifier hs-var">vPat</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni () -&gt; Type TyName uni ())
-&gt; Type TyName uni () -&gt; Type TyName uni ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; TyName -&gt; Type TyName uni ()
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyVar"><span class="hs-identifier hs-var">TyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680956946"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-318"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956947"><span class="hs-identifier hs-var">vArg</span></a></span><span>
</span><span id="line-319"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="hs-comment">-- See the [Global uniqueness] and [Type rules] notes.</span><span>
</span><span id="line-322"></span><span class="hs-comment">-- | Synthesize the type of a term, returning a normalized type.</span><span>
</span><span id="line-323"></span><span id="local-6989586621680957126"><span id="local-6989586621680957127"><span id="local-6989586621680957128"><span id="local-6989586621680957129"><span id="local-6989586621680957130"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-type">inferTypeM</span></a></span><span>
</span><span id="line-324"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="PlutusCore.Error.html#AsTypeError"><span class="hs-identifier hs-type">AsTypeError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957130"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957129"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957128"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680957129"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957128"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957127"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownKind.html#ToKind"><span class="hs-identifier hs-type">ToKind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957129"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#HasUniApply"><span class="hs-identifier hs-type">HasUniApply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957129"><span class="hs-identifier hs-type">uni</span></a></span><span>
</span><span id="line-325"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#HasTypeCheckConfig"><span class="hs-identifier hs-type">HasTypeCheckConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957126"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957129"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957128"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/7jxq3q4v9r667f1gjjg8khfgjizdjamv-some-lib-some-1.0.2-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GEq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957129"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957128"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-326"></span><span>       </span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957129"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957128"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957127"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957129"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957128"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957126"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957130"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-type">Normalized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957129"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span class="hs-comment">-- c : vTy</span><span>
</span><span id="line-330"></span><span class="hs-comment">-- -------------------------</span><span>
</span><span id="line-331"></span><span class="hs-comment">-- [infer| G !- con c : vTy]</span><span>
</span><span id="line-332"></span><span id="inferTypeM"><span class="annot"><span class="annottext">inferTypeM :: Term TyName Name uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var hs-var">inferTypeM</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/7jxq3q4v9r667f1gjjg8khfgjizdjamv-some-lib-some-1.0.2-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span id="local-6989586621680956937"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680956937"><span class="hs-identifier hs-var">uni</span></a></span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-333"></span><span>    </span><span class="hs-comment">-- See Note [Normalization of built-in types].</span><span>
</span><span id="line-334"></span><span>    </span><span class="annot"><span class="annottext">Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) ann fun cfg err.
HasUniApply uni =&gt;
Type TyName uni ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ann))
</span><a href="PlutusCore.TypeCheck.Internal.html#normalizeTypeM"><span class="hs-identifier hs-var">normalizeTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni ()
 -&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ())))
-&gt; Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; uni (Esc a) -&gt; Type TyName uni ()
forall k (a :: k) (uni :: * -&gt; *) tyname ann.
ann -&gt; uni (Esc a) -&gt; Type tyname uni ann
</span><a href="PlutusCore.MkPlc.html#mkTyBuiltinOf"><span class="hs-identifier hs-var">mkTyBuiltinOf</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680956937"><span class="hs-identifier hs-var">uni</span></a></span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span class="hs-comment">-- [infer| G !- bi : vTy]</span><span>
</span><span id="line-337"></span><span class="hs-comment">-- ------------------------------</span><span>
</span><span id="line-338"></span><span class="hs-comment">-- [infer| G !- builtin bi : vTy]</span><span>
</span><span id="line-339"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var">inferTypeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Builtin"><span class="hs-identifier hs-type">Builtin</span></a></span><span> </span><span id="local-6989586621680956934"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956934"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680956933"><span class="annot"><span class="annottext">fun
</span><a href="#local-6989586621680956933"><span class="hs-identifier hs-var">fun</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-340"></span><span>    </span><span class="annot"><span class="annottext">ann
-&gt; fun
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, HasTypeCheckConfig cfg uni fun,
 Ix fun) =&gt;
ann
-&gt; fun
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#lookupBuiltinM"><span class="hs-identifier hs-var">lookupBuiltinM</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956934"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">fun
</span><a href="#local-6989586621680956933"><span class="hs-identifier hs-var">fun</span></a></span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="hs-comment">-- [infer| G !- v : ty]    ty ~&gt; vTy</span><span>
</span><span id="line-343"></span><span class="hs-comment">-- ---------------------------------</span><span>
</span><span id="line-344"></span><span class="hs-comment">-- [infer| G !- var v : vTy]</span><span>
</span><span id="line-345"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var">inferTypeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621680956931"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956931"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680956930"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680956930"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-346"></span><span>    </span><span class="annot"><span class="annottext">ann
-&gt; Name
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall err term (uni :: * -&gt; *) fun ann cfg.
AsTypeError err term uni fun ann =&gt;
ann
-&gt; Name
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#lookupVarM"><span class="hs-identifier hs-var">lookupVarM</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956931"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680956930"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span class="hs-comment">-- [check| G !- dom :: *]    dom ~&gt; vDom    [infer| G , n : dom !- body : vCod]</span><span>
</span><span id="line-349"></span><span class="hs-comment">-- ----------------------------------------------------------------------------</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- [infer| G !- lam n dom body : vDom -&gt; vCod]</span><span>
</span><span id="line-351"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var">inferTypeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#LamAbs"><span class="hs-identifier hs-type">LamAbs</span></a></span><span> </span><span id="local-6989586621680956928"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956928"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680956927"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680956927"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680956926"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956926"><span class="hs-identifier hs-var">dom</span></a></span></span><span> </span><span id="local-6989586621680956925"><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956925"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-352"></span><span>    </span><span class="annot"><span class="annottext">ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
</span><a href="PlutusCore.TypeCheck.Internal.html#checkKindM"><span class="hs-identifier hs-var">checkKindM</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956928"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956926"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind () -&gt; TypeCheckM uni fun cfg err ())
-&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>    </span><span id="local-6989586621680956924"><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956924"><span class="hs-identifier hs-var">vDom</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) ann fun cfg err.
HasUniApply uni =&gt;
Type TyName uni ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ann))
</span><a href="PlutusCore.TypeCheck.Internal.html#normalizeTypeM"><span class="hs-identifier hs-var">normalizeTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni ()
 -&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ())))
-&gt; Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956926"><span class="hs-identifier hs-var">dom</span></a></span><span>
</span><span id="line-354"></span><span>    </span><span class="annot"><span class="annottext">()
-&gt; Type TyName uni () -&gt; Type TyName uni () -&gt; Type TyName uni ()
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyFun"><span class="hs-identifier hs-var">TyFun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type TyName uni () -&gt; Type TyName uni () -&gt; Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
-&gt; ReaderT
     (TypeCheckEnv uni fun cfg)
     (ExceptT err Quote)
     (Normalized (Type TyName uni () -&gt; Type TyName uni ()))
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *) a b.
(Functor f1, Functor f2) =&gt;
(a -&gt; b) -&gt; f1 (f2 a) -&gt; f1 (f2 b)
</span><a href="PlutusPrelude.html#%3C%3C%24%3E%3E"><span class="hs-operator hs-var">&lt;&lt;$&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956924"><span class="hs-identifier hs-var">vDom</span></a></span><span> </span><span class="annot"><span class="annottext">ReaderT
  (TypeCheckEnv uni fun cfg)
  (ExceptT err Quote)
  (Normalized (Type TyName uni () -&gt; Type TyName uni ()))
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *) a b.
(Applicative f1, Applicative f2) =&gt;
f1 (f2 (a -&gt; b)) -&gt; f1 (f2 a) -&gt; f1 (f2 b)
</span><a href="PlutusPrelude.html#%3C%3C%2A%3E%3E"><span class="hs-operator hs-var">&lt;&lt;*&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) fun cfg err a.
Name
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err a
-&gt; TypeCheckM uni fun cfg err a
</span><a href="PlutusCore.TypeCheck.Internal.html#withVar"><span class="hs-identifier hs-var">withVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680956927"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956924"><span class="hs-identifier hs-var">vDom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall err (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err (Term TyName Name uni fun ()) uni fun ann,
 ToKind uni, HasUniApply uni, HasTypeCheckConfig cfg uni fun,
 GEq uni, Ix fun) =&gt;
Term TyName Name uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var">inferTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956925"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="hs-comment">-- [infer| G , n :: nK !- body : vBodyTy]</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- ---------------------------------------------------</span><span>
</span><span id="line-358"></span><span class="hs-comment">-- [infer| G !- abs n nK body : all (n :: nK) vBodyTy]</span><span>
</span><span id="line-359"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var">inferTypeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyAbs"><span class="hs-identifier hs-type">TyAbs</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680956920"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680956920"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680956919"><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680956919"><span class="hs-identifier hs-var">nK</span></a></span></span><span> </span><span id="local-6989586621680956918"><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956918"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-360"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680956917"><span class="annot"><span class="annottext">nK_ :: Kind ()
</span><a href="#local-6989586621680956917"><span class="hs-identifier hs-var hs-var">nK_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind ann -&gt; Kind ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680956919"><span class="hs-identifier hs-var">nK</span></a></span><span>
</span><span id="line-361"></span><span>    </span><span class="annot"><span class="annottext">() -&gt; TyName -&gt; Kind () -&gt; Type TyName uni () -&gt; Type TyName uni ()
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyForall"><span class="hs-identifier hs-var">TyForall</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680956920"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956917"><span class="hs-identifier hs-var">nK_</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni () -&gt; Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *) a b.
(Functor f1, Functor f2) =&gt;
(a -&gt; b) -&gt; f1 (f2 a) -&gt; f1 (f2 b)
</span><a href="PlutusPrelude.html#%3C%3C%24%3E%3E"><span class="hs-operator hs-var">&lt;&lt;$&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
-&gt; Kind ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) fun cfg err a.
TyName
-&gt; Kind ()
-&gt; TypeCheckM uni fun cfg err a
-&gt; TypeCheckM uni fun cfg err a
</span><a href="PlutusCore.TypeCheck.Internal.html#withTyVar"><span class="hs-identifier hs-var">withTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680956920"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956917"><span class="hs-identifier hs-var">nK_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall err (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err (Term TyName Name uni fun ()) uni fun ann,
 ToKind uni, HasUniApply uni, HasTypeCheckConfig cfg uni fun,
 GEq uni, Ix fun) =&gt;
Term TyName Name uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var">inferTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956918"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span class="hs-comment">-- [infer| G !- fun : vDom -&gt; vCod]    [check| G !- arg : vDom]</span><span>
</span><span id="line-364"></span><span class="hs-comment">-- ------------------------------------------------------------</span><span>
</span><span id="line-365"></span><span class="hs-comment">-- [infer| G !- fun arg : vCod]</span><span>
</span><span id="line-366"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var">inferTypeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621680956915"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956915"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680956914"><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956914"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621680956913"><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956913"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-367"></span><span>    </span><span id="local-6989586621680956912"><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956912"><span class="hs-identifier hs-var">vFunTy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall err (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err (Term TyName Name uni fun ()) uni fun ann,
 ToKind uni, HasUniApply uni, HasTypeCheckConfig cfg uni fun,
 GEq uni, Ix fun) =&gt;
Term TyName Name uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var">inferTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956914"><span class="hs-identifier hs-var">fun</span></a></span><span>
</span><span id="line-368"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ()) -&gt; Type TyName uni ()
forall a. Normalized a -&gt; a
</span><a href="PlutusCore.Core.Type.html#unNormalized"><span class="hs-identifier hs-var hs-var">unNormalized</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956912"><span class="hs-identifier hs-var">vFunTy</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-369"></span><span>        </span><span class="annot"><a href="PlutusCore.Core.Type.html#TyFun"><span class="hs-identifier hs-type">TyFun</span></a></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680956911"><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956911"><span class="hs-identifier hs-var">vDom</span></a></span></span><span> </span><span id="local-6989586621680956910"><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956910"><span class="hs-identifier hs-var">vCod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-370"></span><span>            </span><span class="hs-comment">-- Subparts of a normalized type, so normalized.</span><span>
</span><span id="line-371"></span><span>            </span><span class="annot"><span class="annottext">ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err ()
forall err (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err (Term TyName Name uni fun ()) uni fun ann,
 ToKind uni, HasUniApply uni, HasTypeCheckConfig cfg uni fun,
 GEq uni, Ix fun) =&gt;
ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err ()
</span><a href="PlutusCore.TypeCheck.Internal.html#checkTypeM"><span class="hs-identifier hs-var">checkTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956915"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956913"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">(Normalized (Type TyName uni ()) -&gt; TypeCheckM uni fun cfg err ())
-&gt; Normalized (Type TyName uni ()) -&gt; TypeCheckM uni fun cfg err ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni () -&gt; Normalized (Type TyName uni ())
forall a. a -&gt; Normalized a
</span><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-var">Normalized</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956911"><span class="hs-identifier hs-var">vDom</span></a></span><span>
</span><span id="line-372"></span><span>            </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Normalized (Type TyName uni ())
 -&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ())))
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni () -&gt; Normalized (Type TyName uni ())
forall a. a -&gt; Normalized a
</span><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-var">Normalized</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956910"><span class="hs-identifier hs-var">vCod</span></a></span><span>
</span><span id="line-373"></span><span>        </span><span class="annot"><span class="annottext">Type TyName uni ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError (Term TyName Name uni fun ()) uni fun ann)
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall e (m :: * -&gt; *) t x.
MonadError e m =&gt;
AReview e t -&gt; t -&gt; m x
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">throwing</span></a></span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError (Term TyName Name uni fun ()) uni fun ann)
forall r term (uni :: * -&gt; *) fun ann.
AsTypeError r term uni fun ann =&gt;
Prism' r (TypeError term uni fun ann)
</span><a href="PlutusCore.Error.html#_TypeError"><span class="hs-identifier hs-var">_TypeError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ann
-&gt; Term TyName Name uni fun ()
-&gt; Type TyName uni ()
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann
-&gt; term
-&gt; Type TyName uni ()
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError term uni fun ann
</span><a href="PlutusCore.Error.html#TypeMismatch"><span class="hs-identifier hs-var">TypeMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956915"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term TyName Name uni fun ann -&gt; Term TyName Name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956914"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">()
-&gt; Type TyName uni () -&gt; Type TyName uni () -&gt; Type TyName uni ()
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyFun"><span class="hs-identifier hs-var">TyFun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
forall (uni :: * -&gt; *). Type TyName uni ()
</span><a href="PlutusCore.TypeCheck.Internal.html#dummyType"><span class="hs-identifier hs-var">dummyType</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
forall (uni :: * -&gt; *). Type TyName uni ()
</span><a href="PlutusCore.TypeCheck.Internal.html#dummyType"><span class="hs-identifier hs-var">dummyType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956912"><span class="hs-identifier hs-var">vFunTy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span class="hs-comment">-- [infer| G !- body : all (n :: nK) vCod]    [check| G !- ty :: tyK]    ty ~&gt; vTy</span><span>
</span><span id="line-376"></span><span class="hs-comment">-- -------------------------------------------------------------------------------</span><span>
</span><span id="line-377"></span><span class="hs-comment">-- [infer| G !- body {ty} : NORM ([vTy / n] vCod)]</span><span>
</span><span id="line-378"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var">inferTypeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyInst"><span class="hs-identifier hs-type">TyInst</span></a></span><span> </span><span id="local-6989586621680956905"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956905"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680956904"><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956904"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621680956903"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956903"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-379"></span><span>    </span><span id="local-6989586621680956902"><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956902"><span class="hs-identifier hs-var">vBodyTy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall err (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err (Term TyName Name uni fun ()) uni fun ann,
 ToKind uni, HasUniApply uni, HasTypeCheckConfig cfg uni fun,
 GEq uni, Ix fun) =&gt;
Term TyName Name uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var">inferTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956904"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-380"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ()) -&gt; Type TyName uni ()
forall a. Normalized a -&gt; a
</span><a href="PlutusCore.Core.Type.html#unNormalized"><span class="hs-identifier hs-var hs-var">unNormalized</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956902"><span class="hs-identifier hs-var">vBodyTy</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-381"></span><span>        </span><span class="annot"><a href="PlutusCore.Core.Type.html#TyForall"><span class="hs-identifier hs-type">TyForall</span></a></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680956901"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680956901"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680956900"><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956900"><span class="hs-identifier hs-var">nK</span></a></span></span><span> </span><span id="local-6989586621680956899"><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956899"><span class="hs-identifier hs-var">vCod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-382"></span><span>            </span><span class="annot"><span class="annottext">ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
</span><a href="PlutusCore.TypeCheck.Internal.html#checkKindM"><span class="hs-identifier hs-var">checkKindM</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956905"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956903"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956900"><span class="hs-identifier hs-var">nK</span></a></span><span>
</span><span id="line-383"></span><span>            </span><span id="local-6989586621680956898"><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956898"><span class="hs-identifier hs-var">vTy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) ann fun cfg err.
HasUniApply uni =&gt;
Type TyName uni ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ann))
</span><a href="PlutusCore.TypeCheck.Internal.html#normalizeTypeM"><span class="hs-identifier hs-var">normalizeTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni ()
 -&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ())))
-&gt; Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956903"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-384"></span><span>            </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
-&gt; TyName
-&gt; Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) fun cfg err.
HasUniApply uni =&gt;
Normalized (Type TyName uni ())
-&gt; TyName
-&gt; Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#substNormalizeTypeM"><span class="hs-identifier hs-var">substNormalizeTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956898"><span class="hs-identifier hs-var">vTy</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680956901"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956899"><span class="hs-identifier hs-var">vCod</span></a></span><span>
</span><span id="line-385"></span><span>        </span><span class="annot"><span class="annottext">Type TyName uni ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError (Term TyName Name uni fun ()) uni fun ann)
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall e (m :: * -&gt; *) t x.
MonadError e m =&gt;
AReview e t -&gt; t -&gt; m x
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">throwing</span></a></span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError (Term TyName Name uni fun ()) uni fun ann)
forall r term (uni :: * -&gt; *) fun ann.
AsTypeError r term uni fun ann =&gt;
Prism' r (TypeError term uni fun ann)
</span><a href="PlutusCore.Error.html#_TypeError"><span class="hs-identifier hs-var">_TypeError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ann
-&gt; Term TyName Name uni fun ()
-&gt; Type TyName uni ()
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann
-&gt; term
-&gt; Type TyName uni ()
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError term uni fun ann
</span><a href="PlutusCore.Error.html#TypeMismatch"><span class="hs-identifier hs-var">TypeMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956905"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term TyName Name uni fun ann -&gt; Term TyName Name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956904"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; TyName -&gt; Kind () -&gt; Type TyName uni () -&gt; Type TyName uni ()
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyForall"><span class="hs-identifier hs-var">TyForall</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="PlutusCore.TypeCheck.Internal.html#dummyTyName"><span class="hs-identifier hs-var">dummyTyName</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="PlutusCore.TypeCheck.Internal.html#dummyKind"><span class="hs-identifier hs-var">dummyKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
forall (uni :: * -&gt; *). Type TyName uni ()
</span><a href="PlutusCore.TypeCheck.Internal.html#dummyType"><span class="hs-identifier hs-var">dummyType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956902"><span class="hs-identifier hs-var">vBodyTy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-386"></span><span>
</span><span id="line-387"></span><span class="hs-comment">-- [infer| G !- arg :: k]    [check| G !- pat :: (k -&gt; *) -&gt; k -&gt; *]    pat ~&gt; vPat    arg ~&gt; vArg</span><span>
</span><span id="line-388"></span><span class="hs-comment">-- [check| G !- term : NORM (vPat (\(a :: k) -&gt; ifix vPat a) vArg)]</span><span>
</span><span id="line-389"></span><span class="hs-comment">-- -----------------------------------------------------------------------------------------------</span><span>
</span><span id="line-390"></span><span class="hs-comment">-- [infer| G !- iwrap pat arg term : ifix vPat vArg]</span><span>
</span><span id="line-391"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var">inferTypeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#IWrap"><span class="hs-identifier hs-type">IWrap</span></a></span><span> </span><span id="local-6989586621680956896"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956896"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680956895"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956895"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621680956894"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956894"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621680956893"><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956893"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-392"></span><span>    </span><span id="local-6989586621680956892"><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956892"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; TypeCheckM uni fun cfg err (Kind ())
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
Type TyName uni ann -&gt; TypeCheckM uni fun cfg err (Kind ())
</span><a href="PlutusCore.TypeCheck.Internal.html#inferKindM"><span class="hs-identifier hs-var">inferKindM</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956894"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-393"></span><span>    </span><span class="annot"><span class="annottext">ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
</span><a href="PlutusCore.TypeCheck.Internal.html#checkKindOfPatternFunctorM"><span class="hs-identifier hs-var">checkKindOfPatternFunctorM</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956896"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956895"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956892"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-394"></span><span>    </span><span id="local-6989586621680956891"><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956891"><span class="hs-identifier hs-var">vPat</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) ann fun cfg err.
HasUniApply uni =&gt;
Type TyName uni ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ann))
</span><a href="PlutusCore.TypeCheck.Internal.html#normalizeTypeM"><span class="hs-identifier hs-var">normalizeTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni ()
 -&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ())))
-&gt; Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956895"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-395"></span><span>    </span><span id="local-6989586621680956890"><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956890"><span class="hs-identifier hs-var">vArg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) ann fun cfg err.
HasUniApply uni =&gt;
Type TyName uni ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ann))
</span><a href="PlutusCore.TypeCheck.Internal.html#normalizeTypeM"><span class="hs-identifier hs-var">normalizeTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni ()
 -&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ())))
-&gt; Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956894"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-396"></span><span>    </span><span class="annot"><span class="annottext">ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err ()
forall err (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err (Term TyName Name uni fun ()) uni fun ann,
 ToKind uni, HasUniApply uni, HasTypeCheckConfig cfg uni fun,
 GEq uni, Ix fun) =&gt;
ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err ()
</span><a href="PlutusCore.TypeCheck.Internal.html#checkTypeM"><span class="hs-identifier hs-var">checkTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956896"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956893"><span class="hs-identifier hs-var">term</span></a></span><span> </span><span class="annot"><span class="annottext">(Normalized (Type TyName uni ()) -&gt; TypeCheckM uni fun cfg err ())
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
-&gt; TypeCheckM uni fun cfg err ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; Kind ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) fun cfg err.
HasUniApply uni =&gt;
Normalized (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; Kind ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#unfoldIFixOf"><span class="hs-identifier hs-var">unfoldIFixOf</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956891"><span class="hs-identifier hs-var">vPat</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956890"><span class="hs-identifier hs-var">vArg</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956892"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-397"></span><span>    </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Normalized (Type TyName uni ())
 -&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ())))
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">()
-&gt; Type TyName uni () -&gt; Type TyName uni () -&gt; Type TyName uni ()
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyIFix"><span class="hs-identifier hs-var">TyIFix</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type TyName uni () -&gt; Type TyName uni () -&gt; Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; Normalized (Type TyName uni () -&gt; Type TyName uni ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956891"><span class="hs-identifier hs-var">vPat</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni () -&gt; Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956890"><span class="hs-identifier hs-var">vArg</span></a></span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span class="hs-comment">-- [infer| G !- term : ifix vPat vArg]    [infer| G !- vArg :: k]</span><span>
</span><span id="line-400"></span><span class="hs-comment">-- -----------------------------------------------------------------------</span><span>
</span><span id="line-401"></span><span class="hs-comment">-- [infer| G !- unwrap term : NORM (vPat (\(a :: k) -&gt; ifix vPat a) vArg)]</span><span>
</span><span id="line-402"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var">inferTypeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Unwrap"><span class="hs-identifier hs-type">Unwrap</span></a></span><span> </span><span id="local-6989586621680956888"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956888"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680956887"><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956887"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-403"></span><span>    </span><span id="local-6989586621680956886"><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956886"><span class="hs-identifier hs-var">vTermTy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall err (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err (Term TyName Name uni fun ()) uni fun ann,
 ToKind uni, HasUniApply uni, HasTypeCheckConfig cfg uni fun,
 GEq uni, Ix fun) =&gt;
Term TyName Name uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var">inferTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956887"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-404"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ()) -&gt; Type TyName uni ()
forall a. Normalized a -&gt; a
</span><a href="PlutusCore.Core.Type.html#unNormalized"><span class="hs-identifier hs-var hs-var">unNormalized</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956886"><span class="hs-identifier hs-var">vTermTy</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-405"></span><span>        </span><span class="annot"><a href="PlutusCore.Core.Type.html#TyIFix"><span class="hs-identifier hs-type">TyIFix</span></a></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680956885"><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956885"><span class="hs-identifier hs-var">vPat</span></a></span></span><span> </span><span id="local-6989586621680956884"><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956884"><span class="hs-identifier hs-var">vArg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-406"></span><span>            </span><span id="local-6989586621680956883"><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956883"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; TypeCheckM uni fun cfg err (Kind ())
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
Type TyName uni ann -&gt; TypeCheckM uni fun cfg err (Kind ())
</span><a href="PlutusCore.TypeCheck.Internal.html#inferKindM"><span class="hs-identifier hs-var">inferKindM</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni ann -&gt; TypeCheckM uni fun cfg err (Kind ()))
-&gt; Type TyName uni ann -&gt; TypeCheckM uni fun cfg err (Kind ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956888"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">ann -&gt; Type TyName uni () -&gt; Type TyName uni ann
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956884"><span class="hs-identifier hs-var">vArg</span></a></span><span>
</span><span id="line-407"></span><span>            </span><span class="hs-comment">-- Subparts of a normalized type, so normalized.</span><span>
</span><span id="line-408"></span><span>            </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; Kind ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) fun cfg err.
HasUniApply uni =&gt;
Normalized (Type TyName uni ())
-&gt; Normalized (Type TyName uni ())
-&gt; Kind ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#unfoldIFixOf"><span class="hs-identifier hs-var">unfoldIFixOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type TyName uni () -&gt; Normalized (Type TyName uni ())
forall a. a -&gt; Normalized a
</span><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-var">Normalized</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956885"><span class="hs-identifier hs-var">vPat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type TyName uni () -&gt; Normalized (Type TyName uni ())
forall a. a -&gt; Normalized a
</span><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-var">Normalized</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
</span><a href="#local-6989586621680956884"><span class="hs-identifier hs-var">vArg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind ()
</span><a href="#local-6989586621680956883"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-409"></span><span>        </span><span class="annot"><span class="annottext">Type TyName uni ()
</span><span class="hs-identifier">_</span></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError (Term TyName Name uni fun ()) uni fun ann)
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall e (m :: * -&gt; *) t x.
MonadError e m =&gt;
AReview e t -&gt; t -&gt; m x
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">throwing</span></a></span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError (Term TyName Name uni fun ()) uni fun ann)
forall r term (uni :: * -&gt; *) fun ann.
AsTypeError r term uni fun ann =&gt;
Prism' r (TypeError term uni fun ann)
</span><a href="PlutusCore.Error.html#_TypeError"><span class="hs-identifier hs-var">_TypeError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ann
-&gt; Term TyName Name uni fun ()
-&gt; Type TyName uni ()
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann
-&gt; term
-&gt; Type TyName uni ()
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError term uni fun ann
</span><a href="PlutusCore.Error.html#TypeMismatch"><span class="hs-identifier hs-var">TypeMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956888"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term TyName Name uni fun ann -&gt; Term TyName Name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956887"><span class="hs-identifier hs-var">term</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">()
-&gt; Type TyName uni () -&gt; Type TyName uni () -&gt; Type TyName uni ()
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyIFix"><span class="hs-identifier hs-var">TyIFix</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
forall (uni :: * -&gt; *). Type TyName uni ()
</span><a href="PlutusCore.TypeCheck.Internal.html#dummyType"><span class="hs-identifier hs-var">dummyType</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ()
forall (uni :: * -&gt; *). Type TyName uni ()
</span><a href="PlutusCore.TypeCheck.Internal.html#dummyType"><span class="hs-identifier hs-var">dummyType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956886"><span class="hs-identifier hs-var">vTermTy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span class="hs-comment">-- [check| G !- ty :: *]    ty ~&gt; vTy</span><span>
</span><span id="line-412"></span><span class="hs-comment">-- ----------------------------------</span><span>
</span><span id="line-413"></span><span class="hs-comment">-- [infer| G !- error ty : vTy]</span><span>
</span><span id="line-414"></span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var">inferTypeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Error"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span id="local-6989586621680956880"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956880"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680956879"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956879"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-415"></span><span>    </span><span class="annot"><span class="annottext">ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
forall err term (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err term uni fun ann, ToKind uni) =&gt;
ann
-&gt; Type TyName uni ann -&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
</span><a href="PlutusCore.TypeCheck.Internal.html#checkKindM"><span class="hs-identifier hs-var">checkKindM</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956880"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956879"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind () -&gt; TypeCheckM uni fun cfg err ())
-&gt; Kind () -&gt; TypeCheckM uni fun cfg err ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; Kind ()
forall ann. ann -&gt; Kind ann
</span><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-416"></span><span>    </span><span class="annot"><span class="annottext">Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall (uni :: * -&gt; *) ann fun cfg err.
HasUniApply uni =&gt;
Type TyName uni ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ann))
</span><a href="PlutusCore.TypeCheck.Internal.html#normalizeTypeM"><span class="hs-identifier hs-var">normalizeTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni ()
 -&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ())))
-&gt; Type TyName uni ()
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; Type TyName uni ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680956879"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span class="hs-comment">-- See the [Global uniqueness] and [Type rules] notes.</span><span>
</span><span id="line-419"></span><span class="hs-comment">-- | Check a 'Term' against a 'NormalizedType'.</span><span>
</span><span id="line-420"></span><span id="local-6989586621680957120"><span id="local-6989586621680957121"><span id="local-6989586621680957122"><span id="local-6989586621680957123"><span id="local-6989586621680957124"><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#checkTypeM"><span class="hs-identifier hs-type">checkTypeM</span></a></span><span>
</span><span id="line-421"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="PlutusCore.Error.html#AsTypeError"><span class="hs-identifier hs-type">AsTypeError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957124"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957123"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957122"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680957123"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957122"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957121"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownKind.html#ToKind"><span class="hs-identifier hs-type">ToKind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957123"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#HasUniApply"><span class="hs-identifier hs-type">HasUniApply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957123"><span class="hs-identifier hs-type">uni</span></a></span><span>
</span><span id="line-422"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#HasTypeCheckConfig"><span class="hs-identifier hs-type">HasTypeCheckConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957120"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957123"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957122"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/7jxq3q4v9r667f1gjjg8khfgjizdjamv-some-lib-some-1.0.2-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GEq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957123"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957122"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-423"></span><span>       </span><span class="hs-special">)</span><span>
</span><span id="line-424"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680957121"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-425"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957123"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957122"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957121"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-426"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Normalized"><span class="hs-identifier hs-type">Normalized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957123"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-427"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.TypeCheck.Internal.html#TypeCheckM"><span class="hs-identifier hs-type">TypeCheckM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957123"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957122"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957120"><span class="hs-identifier hs-type">cfg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680957124"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-428"></span><span>
</span><span id="line-429"></span><span class="hs-comment">-- [infer| G !- term : vTermTy]    vTermTy ~ vTy</span><span>
</span><span id="line-430"></span><span class="hs-comment">-- ---------------------------------------------</span><span>
</span><span id="line-431"></span><span class="hs-comment">-- [check| G !- term : vTy]</span><span>
</span><span id="line-432"></span><span id="checkTypeM"><span class="annot"><span class="annottext">checkTypeM :: ann
-&gt; Term TyName Name uni fun ann
-&gt; Normalized (Type TyName uni ())
-&gt; TypeCheckM uni fun cfg err ()
</span><a href="PlutusCore.TypeCheck.Internal.html#checkTypeM"><span class="hs-identifier hs-var hs-var">checkTypeM</span></a></span></span><span> </span><span id="local-6989586621680956878"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956878"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680956877"><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956877"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span id="local-6989586621680956876"><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956876"><span class="hs-identifier hs-var">vTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-433"></span><span>    </span><span id="local-6989586621680956875"><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956875"><span class="hs-identifier hs-var">vTermTy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
forall err (uni :: * -&gt; *) fun ann cfg.
(AsTypeError err (Term TyName Name uni fun ()) uni fun ann,
 ToKind uni, HasUniApply uni, HasTypeCheckConfig cfg uni fun,
 GEq uni, Ix fun) =&gt;
Term TyName Name uni fun ann
-&gt; TypeCheckM uni fun cfg err (Normalized (Type TyName uni ()))
</span><a href="PlutusCore.TypeCheck.Internal.html#inferTypeM"><span class="hs-identifier hs-var">inferTypeM</span></a></span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956877"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-434"></span><span>    </span><span class="annot"><span class="annottext">Bool
-&gt; TypeCheckM uni fun cfg err () -&gt; TypeCheckM uni fun cfg err ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956875"><span class="hs-identifier hs-var">vTermTy</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
-&gt; Normalized (Type TyName uni ()) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956876"><span class="hs-identifier hs-var">vTy</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TypeCheckM uni fun cfg err () -&gt; TypeCheckM uni fun cfg err ())
-&gt; TypeCheckM uni fun cfg err () -&gt; TypeCheckM uni fun cfg err ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError (Term TyName Name uni fun ()) uni fun ann)
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
-&gt; TypeCheckM uni fun cfg err ()
forall e (m :: * -&gt; *) t x.
MonadError e m =&gt;
AReview e t -&gt; t -&gt; m x
</span><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">throwing</span></a></span><span> </span><span class="annot"><span class="annottext">AReview err (TypeError (Term TyName Name uni fun ()) uni fun ann)
forall r term (uni :: * -&gt; *) fun ann.
AsTypeError r term uni fun ann =&gt;
Prism' r (TypeError term uni fun ann)
</span><a href="PlutusCore.Error.html#_TypeError"><span class="hs-identifier hs-var">_TypeError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ann
-&gt; Term TyName Name uni fun ()
-&gt; Type TyName uni ()
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError (Term TyName Name uni fun ()) uni fun ann
forall term (uni :: * -&gt; *) fun ann.
ann
-&gt; term
-&gt; Type TyName uni ()
-&gt; Normalized (Type TyName uni ())
-&gt; TypeError term uni fun ann
</span><a href="PlutusCore.Error.html#TypeMismatch"><span class="hs-identifier hs-var">TypeMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680956878"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term TyName Name uni fun ann -&gt; Term TyName Name uni fun ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680956877"><span class="hs-identifier hs-var">term</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Normalized (Type TyName uni ()) -&gt; Type TyName uni ()
forall a. Normalized a -&gt; a
</span><a href="PlutusCore.Core.Type.html#unNormalized"><span class="hs-identifier hs-var hs-var">unNormalized</span></a></span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956875"><span class="hs-identifier hs-var">vTermTy</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Normalized (Type TyName uni ())
</span><a href="#local-6989586621680956876"><span class="hs-identifier hs-var">vTy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-435"></span></pre></body></html>
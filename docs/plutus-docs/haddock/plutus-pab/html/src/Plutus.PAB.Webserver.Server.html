<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds             #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies    #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts      #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances     #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE MonoLocalBinds        #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns        #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings     #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE PartialTypeSignatures #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications      #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators         #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-partial-type-signatures #-}</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Plutus.PAB.Webserver.Server</span><span>
</span><span id="line-15"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#startServer"><span class="hs-identifier">startServer</span></a></span><span>
</span><span id="line-16"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#startServer%27"><span class="hs-identifier">startServer'</span></a></span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#startServerDebug"><span class="hs-identifier">startServerDebug</span></a></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#startServerDebug%27"><span class="hs-identifier">startServerDebug'</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Concurrent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">MVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">forkFinally</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">forkIO</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">newEmptyMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">putMVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Concurrent.Availability.html"><span class="hs-identifier">Control.Concurrent.Availability</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Concurrent.Availability.html#Availability"><span class="hs-identifier">Availability</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Concurrent.Availability.html#available"><span class="hs-identifier">available</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Concurrent.Availability.html#newToken"><span class="hs-identifier">newToken</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/b738x068mpk6m31fqb2w33rzbqb41k86-stm-lib-stm-2.5.0.1-haddock-doc/share/doc/stm/html/src"><span class="hs-identifier">Control.Concurrent.STM</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">STM</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">void</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">when</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier">Control.Monad.Except</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/8r01jj9dl6h1x2byph07y6wxfb3ysd8c-transformers-lib-transformers-0.5.6.2-haddock-doc/share/doc/transformers/html/src"><span class="hs-identifier">ExceptT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/8r01jj9dl6h1x2byph07y6wxfb3ysd8c-transformers-lib-transformers-0.5.6.2-haddock-doc/share/doc/transformers/html/src"><span class="hs-identifier">ExceptT</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">Control.Monad.Freer.Extras.Log</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">logInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../freer-extras/html/src"><span class="hs-identifier">logWarn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad.IO.Class</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">liftIO</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">FromJSON</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">ToJSON</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Bifunctor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">first</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/dy85hyx24kbdxbcbs19gvac43vbvvnjd-bytestring-lib-bytestring-0.10.12.0-haddock-doc/share/doc/bytestring/html/src"><span class="hs-identifier">Data.ByteString.Lazy.Char8</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LBS</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(&amp;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Monoid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Endo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Endo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">appEndo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/vpm50j3dwjzfg00shy71mwawvv796qgi-openapi3-lib-openapi3-3.2.3-haddock-doc/share/doc/openapi3/html/src"><span class="hs-identifier">Data.OpenApi.Schema</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OpenApi</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Proxy</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/h6pndxxsxmb9rv9q8mfkryl2vhbq64i9-wai-lib-wai-3.2.3-haddock-doc/share/doc/wai/html/src"><span class="hs-identifier">Network.Wai</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/h6pndxxsxmb9rv9q8mfkryl2vhbq64i9-wai-lib-wai-3.2.3-haddock-doc/share/doc/wai/html/src"><span class="hs-identifier">Middleware</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/xr1qwbfgn013dz6gycdc4wk2n2a753kz-warp-lib-warp-3.3.23-haddock-doc/share/doc/warp/html/src"><span class="hs-identifier">Network.Wai.Handler.Warp</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Warp</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/pv5hicisx621vfrfcldchw35gqhz964r-warp-tls-lib-warp-tls-3.3.4-haddock-doc/share/doc/warp-tls/html/src"><span class="hs-identifier">Network.Wai.Handler.WarpTLS</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">WarpTLS</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/zcmmqpbdpxbnbj68ijv7f0fn0zww2pq8-wai-cors-lib-wai-cors-0.2.7-haddock-doc/share/doc/wai-cors/html/src"><span class="hs-identifier">Network.Wai.Middleware.Cors</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cors</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/5qsp61phk93pjlp09b2npg3r5lfvx2fn-servant-options-lib-servant-options-0.1.0.0-haddock-doc/share/doc/servant-options/html/src"><span class="hs-identifier">Network.Wai.Middleware.Servant.Options</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cors</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.PAB.Core.html"><span class="hs-identifier">Plutus.PAB.Core</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Core.html#PABAction"><span class="hs-identifier">PABAction</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Core.html#PABRunner"><span class="hs-identifier">PABRunner</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Core.html#PABRunner"><span class="hs-identifier">PABRunner</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Core.html#runPABAction"><span class="hs-identifier">runPABAction</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.PAB.Core.html"><span class="hs-identifier">Plutus.PAB.Core</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Core</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html"><span class="hs-identifier">Plutus.PAB.Effects.Contract</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Contract</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.PAB.Monitoring.PABLogMsg.html"><span class="hs-identifier">Plutus.PAB.Monitoring.PABLogMsg</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LM</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.PAB.Simulator.html"><span class="hs-identifier">Plutus.PAB.Simulator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Simulator.html#Simulation"><span class="hs-identifier">Simulation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.PAB.Types.html"><span class="hs-identifier">Plutus.PAB.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Types.html#PABError"><span class="hs-identifier">PABError</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>                         </span><span class="annot"><a href="Plutus.PAB.Types.html#WebserverConfig"><span class="hs-identifier">WebserverConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Types.html#WebserverConfig"><span class="hs-identifier">WebserverConfig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Types.html#certificatePath"><span class="hs-identifier">certificatePath</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Types.html#endpointTimeout"><span class="hs-identifier">endpointTimeout</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Types.html#keyPath"><span class="hs-identifier">keyPath</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Types.html#permissiveCorsPolicy"><span class="hs-identifier">permissiveCorsPolicy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Types.html#staticDir"><span class="hs-identifier">staticDir</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>                         </span><span class="annot"><a href="Plutus.PAB.Types.html#baseUrl"><span class="hs-identifier">baseUrl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Types.html#defaultWebServerConfig"><span class="hs-identifier">defaultWebServerConfig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.PAB.Webserver.API.html"><span class="hs-identifier">Plutus.PAB.Webserver.API</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Webserver.API.html#API"><span class="hs-identifier">API</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Webserver.API.html#SwaggerAPI"><span class="hs-identifier">SwaggerAPI</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Webserver.API.html#WSAPI"><span class="hs-identifier">WSAPI</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.PAB.Webserver.Handler.html"><span class="hs-identifier">Plutus.PAB.Webserver.Handler</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Webserver.Handler.html#apiHandler"><span class="hs-identifier">apiHandler</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Webserver.Handler.html#swagger"><span class="hs-identifier">swagger</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.PAB.Webserver.WebSocket.html"><span class="hs-identifier">Plutus.PAB.Webserver.WebSocket</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">WS</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier">Servant</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/h6pndxxsxmb9rv9q8mfkryl2vhbq64i9-wai-lib-wai-3.2.3-haddock-doc/share/doc/wai/html/src"><span class="hs-identifier">Application</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier">Handler</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier">Handler</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-identifier">Raw</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier">ServerT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier">err500</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier">errBody</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier">hoistServer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier">serve</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>                </span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier">serveDirectoryFileServer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-operator">(:&lt;|&gt;)</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-operator">(:&lt;|&gt;)</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier">Servant</span></a></span><span> </span><span class="hs-keyword">qualified</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/1sck64pppkkmjhaxww80pwmibr51710s-servant-client-lib-servant-client-0.18.3-haddock-doc/share/doc/servant-client/html/src"><span class="hs-identifier">Servant.Client</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bp0ml9hvqnwczc48023rn371h6pzz2r6-servant-client-core-lib-servant-client-core-0.18.3-haddock-doc/share/doc/servant-client-core/html/src"><span class="hs-identifier">BaseUrl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bp0ml9hvqnwczc48023rn371h6pzz2r6-servant-client-core-lib-servant-client-core-0.18.3-haddock-doc/share/doc/servant-client-core/html/src"><span class="hs-identifier">baseUrlPort</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier">Wallet.Emulator.Wallet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier">WalletId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#asHandler"><span class="hs-identifier hs-type">asHandler</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680395837"><span class="annot"><a href="#local-6989586621680395837"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span id="local-6989586621680395836"><span class="annot"><a href="#local-6989586621680395836"><span class="hs-identifier hs-type">env</span></a></span></span><span> </span><span id="local-6989586621680395835"><span class="annot"><a href="#local-6989586621680395835"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Plutus.PAB.Core.html#PABRunner"><span class="hs-identifier hs-type">PABRunner</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395837"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395836"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.PAB.Core.html#PABAction"><span class="hs-identifier hs-type">PABAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395837"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395836"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395835"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier hs-type">Handler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395835"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-58"></span><span id="asHandler"><span class="annot"><span class="annottext">asHandler :: PABRunner t env -&gt; PABAction t env a -&gt; Handler a
</span><a href="Plutus.PAB.Webserver.Server.html#asHandler"><span class="hs-identifier hs-var hs-var">asHandler</span></a></span></span><span> </span><span class="annot"><a href="Plutus.PAB.Core.html#PABRunner"><span class="hs-identifier hs-type">PABRunner</span></a></span><span class="hs-special">{</span><span id="local-6989586621680395680"><span class="annot"><span class="annottext">forall a. PABAction t env a -&gt; IO (Either PABError a)
runPABAction :: forall a. PABAction t env a -&gt; IO (Either PABError a)
runPABAction :: forall t env.
PABRunner t env
-&gt; forall a. PABAction t env a -&gt; IO (Either PABError a)
</span><a href="#local-6989586621680395680"><span class="hs-identifier hs-var hs-var">runPABAction</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptT ServerError IO a -&gt; Handler a
forall a. ExceptT ServerError IO a -&gt; Handler a
</span><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier hs-var">Servant.Handler</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT ServerError IO a -&gt; Handler a)
-&gt; (PABAction t env a -&gt; ExceptT ServerError IO a)
-&gt; PABAction t env a
-&gt; Handler a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either ServerError a) -&gt; ExceptT ServerError IO a
forall e (m :: * -&gt; *) a. m (Either e a) -&gt; ExceptT e m a
</span><a href="../file:///nix/store/8r01jj9dl6h1x2byph07y6wxfb3ysd8c-transformers-lib-transformers-0.5.6.2-haddock-doc/share/doc/transformers/html/src"><span class="hs-identifier hs-var">ExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either ServerError a) -&gt; ExceptT ServerError IO a)
-&gt; (PABAction t env a -&gt; IO (Either ServerError a))
-&gt; PABAction t env a
-&gt; ExceptT ServerError IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Either PABError a -&gt; Either ServerError a)
-&gt; IO (Either PABError a) -&gt; IO (Either ServerError a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PABError -&gt; ServerError)
-&gt; Either PABError a -&gt; Either ServerError a
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">PABError -&gt; ServerError
</span><a href="#local-6989586621680395678"><span class="hs-identifier hs-var">mapError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO (Either PABError a) -&gt; IO (Either ServerError a))
-&gt; (PABAction t env a -&gt; IO (Either PABError a))
-&gt; PABAction t env a
-&gt; IO (Either ServerError a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PABAction t env a -&gt; IO (Either PABError a)
forall a. PABAction t env a -&gt; IO (Either PABError a)
</span><a href="#local-6989586621680395680"><span class="hs-identifier hs-var">runPABAction</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="#local-6989586621680395678"><span class="hs-identifier hs-type">mapError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.PAB.Types.html#PABError"><span class="hs-identifier hs-type">PABError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier hs-type">Servant.ServerError</span></a></span><span>
</span><span id="line-60"></span><span>    </span><span id="local-6989586621680395678"><span class="annot"><span class="annottext">mapError :: PABError -&gt; ServerError
</span><a href="#local-6989586621680395678"><span class="hs-identifier hs-var hs-var">mapError</span></a></span></span><span> </span><span id="local-6989586621680395677"><span class="annot"><span class="annottext">PABError
</span><a href="#local-6989586621680395677"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ServerError
</span><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier hs-var">Servant.err500</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">errBody :: ByteString
</span><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier hs-var">Servant.errBody</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ByteString
</span><a href="../file:///nix/store/dy85hyx24kbdxbcbs19gvac43vbvvnjd-bytestring-lib-bytestring-0.10.12.0-haddock-doc/share/doc/bytestring/html/src"><span class="hs-identifier hs-var">LBS.pack</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; ByteString) -&gt; [Char] -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PABError -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">PABError
</span><a href="#local-6989586621680395677"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-keyword">type</span><span> </span><span id="CombinedAPI"><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#CombinedAPI"><span class="hs-identifier hs-var">CombinedAPI</span></a></span></span><span> </span><span id="local-6989586621680395674"><span class="annot"><a href="#local-6989586621680395674"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#BaseCombinedAPI"><span class="hs-identifier hs-type">BaseCombinedAPI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395674"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-operator hs-type">:&lt;|&gt;</span></a></span><span> </span><span class="annot"><a href="Plutus.PAB.Webserver.API.html#SwaggerAPI"><span class="hs-identifier hs-type">SwaggerAPI</span></a></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-keyword">type</span><span> </span><span id="BaseCombinedAPI"><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#BaseCombinedAPI"><span class="hs-identifier hs-var">BaseCombinedAPI</span></a></span></span><span> </span><span id="local-6989586621680395672"><span class="annot"><a href="#local-6989586621680395672"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><a href="Plutus.PAB.Webserver.API.html#API"><span class="hs-identifier hs-type">API</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395672"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">WalletId</span></a></span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-operator hs-type">:&lt;|&gt;</span></a></span><span> </span><span class="annot"><a href="Plutus.PAB.Webserver.API.html#WSAPI"><span class="hs-identifier hs-type">WSAPI</span></a></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#app"><span class="hs-identifier hs-type">app</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680395738"><span class="annot"><a href="#local-6989586621680395738"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span id="local-6989586621680395737"><span class="annot"><a href="#local-6989586621680395737"><span class="hs-identifier hs-type">env</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395738"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395738"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#PABContract"><span class="hs-identifier hs-type">Contract.PABContract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395738"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-identifier hs-type">Servant.MimeUnrender</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-identifier hs-type">Servant.JSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395738"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/vpm50j3dwjzfg00shy71mwawvv796qgi-openapi3-lib-openapi3-3.2.3-haddock-doc/share/doc/openapi3/html/src"><span class="hs-identifier hs-type">OpenApi.ToSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395738"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-76"></span><span>    </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.PAB.Core.html#PABRunner"><span class="hs-identifier hs-type">PABRunner</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395738"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395737"><span class="hs-identifier hs-type">env</span></a></span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/h6pndxxsxmb9rv9q8mfkryl2vhbq64i9-wai-lib-wai-3.2.3-haddock-doc/share/doc/wai/html/src"><span class="hs-identifier hs-type">Application</span></a></span><span>
</span><span id="line-79"></span><span id="app"><span class="annot"><span class="annottext">app :: Maybe [Char] -&gt; PABRunner t env -&gt; Application
</span><a href="Plutus.PAB.Webserver.Server.html#app"><span class="hs-identifier hs-var hs-var">app</span></a></span></span><span> </span><span id="local-6989586621680395669"><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621680395669"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span id="local-6989586621680395668"><span class="annot"><span class="annottext">PABRunner t env
</span><a href="#local-6989586621680395668"><span class="hs-identifier hs-var">pabRunner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621680395667"><span class="hs-identifier hs-type">apiServer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier hs-type">ServerT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#CombinedAPI"><span class="hs-identifier hs-type">CombinedAPI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395738"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier hs-type">Handler</span></a></span><span>
</span><span id="line-81"></span><span>        </span><span id="local-6989586621680395667"><span class="annot"><span class="annottext">apiServer :: ServerT (CombinedAPI t) Handler
</span><a href="#local-6989586621680395667"><span class="hs-identifier hs-var hs-var">apiServer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-82"></span><span>            </span><span class="annot"><span class="annottext">Proxy (API (ContractDef t) WalletId :&lt;|&gt; WSAPI)
-&gt; (forall x. Eff (PABEffects t env) x -&gt; Handler x)
-&gt; ServerT
     (API (ContractDef t) WalletId :&lt;|&gt; WSAPI) (Eff (PABEffects t env))
-&gt; ServerT (API (ContractDef t) WalletId :&lt;|&gt; WSAPI) Handler
forall api (m :: * -&gt; *) (n :: * -&gt; *).
HasServer api '[] =&gt;
Proxy api
-&gt; (forall x. m x -&gt; n x) -&gt; ServerT api m -&gt; ServerT api n
</span><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier hs-var">Servant.hoistServer</span></a></span><span>
</span><span id="line-83"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy (API (ContractDef t) WalletId :&lt;|&gt; WSAPI)
forall k (t :: k). Proxy t
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#BaseCombinedAPI"><span class="hs-identifier hs-type">BaseCombinedAPI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395738"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PABRunner t env -&gt; PABAction t env x -&gt; Handler x
forall t env a. PABRunner t env -&gt; PABAction t env a -&gt; Handler a
</span><a href="Plutus.PAB.Webserver.Server.html#asHandler"><span class="hs-identifier hs-var">asHandler</span></a></span><span> </span><span class="annot"><span class="annottext">PABRunner t env
</span><a href="#local-6989586621680395668"><span class="hs-identifier hs-var">pabRunner</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PABAction t env ()
:&lt;|&gt; (PABAction t env (FullReport (ContractDef t))
      :&lt;|&gt; ((ContractActivationArgs (ContractDef t)
             -&gt; PABAction t env ContractInstanceId)
            :&lt;|&gt; ((ContractInstanceId
                   -&gt; PABAction t env (ContractInstanceClientState (ContractDef t))
                      :&lt;|&gt; (PABAction t env (ContractSignatureResponse (ContractDef t))
                            :&lt;|&gt; (([Char] -&gt; Value -&gt; PABAction t env ())
                                  :&lt;|&gt; PABAction t env ())))
                  :&lt;|&gt; ((WalletId
                         -&gt; Maybe Text
                         -&gt; PABAction t env [ContractInstanceClientState (ContractDef t)])
                        :&lt;|&gt; ((Maybe Text
                               -&gt; PABAction t env [ContractInstanceClientState (ContractDef t)])
                              :&lt;|&gt; PABAction
                                     t env [ContractSignatureResponse (ContractDef t)])))))
forall t env.
PABContract t =&gt;
PABAction t env ()
:&lt;|&gt; (PABAction t env (FullReport (ContractDef t))
      :&lt;|&gt; ((ContractActivationArgs (ContractDef t)
             -&gt; PABAction t env ContractInstanceId)
            :&lt;|&gt; ((ContractInstanceId
                   -&gt; PABAction t env (ContractInstanceClientState (ContractDef t))
                      :&lt;|&gt; (PABAction t env (ContractSignatureResponse (ContractDef t))
                            :&lt;|&gt; (([Char] -&gt; Value -&gt; PABAction t env ())
                                  :&lt;|&gt; PABAction t env ())))
                  :&lt;|&gt; ((WalletId
                         -&gt; Maybe Text
                         -&gt; PABAction t env [ContractInstanceClientState (ContractDef t)])
                        :&lt;|&gt; ((Maybe Text
                               -&gt; PABAction t env [ContractInstanceClientState (ContractDef t)])
                              :&lt;|&gt; PABAction
                                     t env [ContractSignatureResponse (ContractDef t)])))))
</span><a href="Plutus.PAB.Webserver.Handler.html#apiHandler"><span class="hs-identifier hs-var">apiHandler</span></a></span><span> </span><span class="annot"><span class="annottext">(PABAction t env ()
 :&lt;|&gt; (PABAction t env (FullReport (ContractDef t))
       :&lt;|&gt; ((ContractActivationArgs (ContractDef t)
              -&gt; PABAction t env ContractInstanceId)
             :&lt;|&gt; ((ContractInstanceId
                    -&gt; PABAction t env (ContractInstanceClientState (ContractDef t))
                       :&lt;|&gt; (PABAction t env (ContractSignatureResponse (ContractDef t))
                             :&lt;|&gt; (([Char] -&gt; Value -&gt; PABAction t env ())
                                   :&lt;|&gt; PABAction t env ())))
                   :&lt;|&gt; ((WalletId
                          -&gt; Maybe Text
                          -&gt; PABAction t env [ContractInstanceClientState (ContractDef t)])
                         :&lt;|&gt; ((Maybe Text
                                -&gt; PABAction t env [ContractInstanceClientState (ContractDef t)])
                               :&lt;|&gt; PABAction
                                      t env [ContractSignatureResponse (ContractDef t)]))))))
-&gt; ((ContractInstanceId -&gt; PendingConnection -&gt; PABAction t env ())
    :&lt;|&gt; (PendingConnection -&gt; PABAction t env ()))
-&gt; (PABAction t env ()
    :&lt;|&gt; (PABAction t env (FullReport (ContractDef t))
          :&lt;|&gt; ((ContractActivationArgs (ContractDef t)
                 -&gt; PABAction t env ContractInstanceId)
                :&lt;|&gt; ((ContractInstanceId
                       -&gt; PABAction t env (ContractInstanceClientState (ContractDef t))
                          :&lt;|&gt; (PABAction t env (ContractSignatureResponse (ContractDef t))
                                :&lt;|&gt; (([Char] -&gt; Value -&gt; PABAction t env ())
                                      :&lt;|&gt; PABAction t env ())))
                      :&lt;|&gt; ((WalletId
                             -&gt; Maybe Text
                             -&gt; PABAction t env [ContractInstanceClientState (ContractDef t)])
                            :&lt;|&gt; ((Maybe Text
                                   -&gt; PABAction t env [ContractInstanceClientState (ContractDef t)])
                                  :&lt;|&gt; PABAction
                                         t env [ContractSignatureResponse (ContractDef t)]))))))
   :&lt;|&gt; ((ContractInstanceId
          -&gt; PendingConnection -&gt; PABAction t env ())
         :&lt;|&gt; (PendingConnection -&gt; PABAction t env ()))
forall a b. a -&gt; b -&gt; a :&lt;|&gt; b
</span><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-operator hs-var">:&lt;|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(ContractInstanceId -&gt; PendingConnection -&gt; PABAction t env ())
:&lt;|&gt; (PendingConnection -&gt; PABAction t env ())
forall t env.
(ContractInstanceId -&gt; PendingConnection -&gt; PABAction t env ())
:&lt;|&gt; (PendingConnection -&gt; PABAction t env ())
</span><a href="Plutus.PAB.Webserver.WebSocket.html#wsHandler"><span class="hs-identifier hs-var">WS.wsHandler</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Handler ()
  :&lt;|&gt; (Handler (FullReport (ContractDef t))
        :&lt;|&gt; ((ContractActivationArgs (ContractDef t)
               -&gt; Handler ContractInstanceId)
              :&lt;|&gt; ((ContractInstanceId
                     -&gt; Handler (ContractInstanceClientState (ContractDef t))
                        :&lt;|&gt; (Handler (ContractSignatureResponse (ContractDef t))
                              :&lt;|&gt; (([Char] -&gt; Value -&gt; Handler ()) :&lt;|&gt; Handler ())))
                    :&lt;|&gt; ((WalletId
                           -&gt; Maybe Text
                           -&gt; Handler [ContractInstanceClientState (ContractDef t)])
                          :&lt;|&gt; ((Maybe Text
                                 -&gt; Handler [ContractInstanceClientState (ContractDef t)])
                                :&lt;|&gt; Handler [ContractSignatureResponse (ContractDef t)]))))))
 :&lt;|&gt; ((ContractInstanceId -&gt; PendingConnection -&gt; Handler ())
       :&lt;|&gt; (PendingConnection -&gt; Handler ())))
-&gt; (Handler Value
    :&lt;|&gt; (Handler
            (SwaggerUiHtml &quot;swagger-ui&quot; (&quot;swagger.json&quot; :&gt; Get '[JSON] Value))
          :&lt;|&gt; (Handler
                  (SwaggerUiHtml &quot;swagger-ui&quot; (&quot;swagger.json&quot; :&gt; Get '[JSON] Value))
                :&lt;|&gt; Tagged Handler Application)))
-&gt; ((Handler ()
     :&lt;|&gt; (Handler (FullReport (ContractDef t))
           :&lt;|&gt; ((ContractActivationArgs (ContractDef t)
                  -&gt; Handler ContractInstanceId)
                 :&lt;|&gt; ((ContractInstanceId
                        -&gt; Handler (ContractInstanceClientState (ContractDef t))
                           :&lt;|&gt; (Handler (ContractSignatureResponse (ContractDef t))
                                 :&lt;|&gt; (([Char] -&gt; Value -&gt; Handler ()) :&lt;|&gt; Handler ())))
                       :&lt;|&gt; ((WalletId
                              -&gt; Maybe Text
                              -&gt; Handler [ContractInstanceClientState (ContractDef t)])
                             :&lt;|&gt; ((Maybe Text
                                    -&gt; Handler [ContractInstanceClientState (ContractDef t)])
                                   :&lt;|&gt; Handler [ContractSignatureResponse (ContractDef t)]))))))
    :&lt;|&gt; ((ContractInstanceId -&gt; PendingConnection -&gt; Handler ())
          :&lt;|&gt; (PendingConnection -&gt; Handler ())))
   :&lt;|&gt; (Handler Value
         :&lt;|&gt; (Handler
                 (SwaggerUiHtml &quot;swagger-ui&quot; (&quot;swagger.json&quot; :&gt; Get '[JSON] Value))
               :&lt;|&gt; (Handler
                       (SwaggerUiHtml &quot;swagger-ui&quot; (&quot;swagger.json&quot; :&gt; Get '[JSON] Value))
                     :&lt;|&gt; Tagged Handler Application)))
forall a b. a -&gt; b -&gt; a :&lt;|&gt; b
</span><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-operator hs-var">:&lt;|&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t api (dir :: Symbol).
(Server api ~ Handler Value, ToSchema (ContractDef t)) =&gt;
Server (SwaggerSchemaUI' dir api)
forall api (dir :: Symbol).
(Server api ~ Handler Value, ToSchema (ContractDef t)) =&gt;
Server (SwaggerSchemaUI' dir api)
</span><a href="Plutus.PAB.Webserver.Handler.html#swagger"><span class="hs-identifier hs-var">swagger</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680395738"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621680395669"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-88"></span><span>        </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-89"></span><span>            </span><span class="annot"><span class="annottext">Proxy (CombinedAPI t)
-&gt; ServerT (CombinedAPI t) Handler -&gt; Application
forall api.
HasServer api '[] =&gt;
Proxy api -&gt; Server api -&gt; Application
</span><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier hs-var">Servant.serve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy (CombinedAPI t)
forall k (t :: k). Proxy t
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#CombinedAPI"><span class="hs-identifier hs-type">CombinedAPI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395738"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ServerT (CombinedAPI t) Handler
</span><a href="#local-6989586621680395667"><span class="hs-identifier hs-var">apiServer</span></a></span><span>
</span><span id="line-90"></span><span>        </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680395665"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680395665"><span class="hs-identifier hs-var">filePath</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-91"></span><span>            </span><span class="hs-keyword">let</span><span>
</span><span id="line-92"></span><span>                </span><span class="annot"><a href="#local-6989586621680395664"><span class="hs-identifier hs-type">fileServer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier hs-type">ServerT</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier hs-type">Handler</span></a></span><span>
</span><span id="line-93"></span><span>                </span><span id="local-6989586621680395664"><span class="annot"><span class="annottext">fileServer :: ServerT Raw Handler
</span><a href="#local-6989586621680395664"><span class="hs-identifier hs-var hs-var">fileServer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ServerT Raw Handler
forall (m :: * -&gt; *). [Char] -&gt; ServerT Raw m
</span><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier hs-var">serveDirectoryFileServer</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680395665"><span class="hs-identifier hs-var">filePath</span></a></span><span>
</span><span id="line-94"></span><span>            </span><span class="annot"><span class="annottext">Proxy (CombinedAPI t :&lt;|&gt; Raw)
-&gt; Server (CombinedAPI t :&lt;|&gt; Raw) -&gt; Application
forall api.
HasServer api '[] =&gt;
Proxy api -&gt; Server api -&gt; Application
</span><a href="../file:///nix/store/b04nrk4i8h9kq5glikqcildam8xwyw84-servant-server-lib-servant-server-0.18.3-haddock-doc/share/doc/servant-server/html/src"><span class="hs-identifier hs-var">Servant.serve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy (CombinedAPI t :&lt;|&gt; Raw)
forall k (t :: k). Proxy t
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#CombinedAPI"><span class="hs-identifier hs-type">CombinedAPI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395738"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-operator hs-type">:&lt;|&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-identifier hs-type">Raw</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Handler ()
  :&lt;|&gt; (Handler (FullReport (ContractDef t))
        :&lt;|&gt; ((ContractActivationArgs (ContractDef t)
               -&gt; Handler ContractInstanceId)
              :&lt;|&gt; ((ContractInstanceId
                     -&gt; Handler (ContractInstanceClientState (ContractDef t))
                        :&lt;|&gt; (Handler (ContractSignatureResponse (ContractDef t))
                              :&lt;|&gt; (([Char] -&gt; Value -&gt; Handler ()) :&lt;|&gt; Handler ())))
                    :&lt;|&gt; ((WalletId
                           -&gt; Maybe Text
                           -&gt; Handler [ContractInstanceClientState (ContractDef t)])
                          :&lt;|&gt; ((Maybe Text
                                 -&gt; Handler [ContractInstanceClientState (ContractDef t)])
                                :&lt;|&gt; Handler [ContractSignatureResponse (ContractDef t)]))))))
 :&lt;|&gt; ((ContractInstanceId -&gt; PendingConnection -&gt; Handler ())
       :&lt;|&gt; (PendingConnection -&gt; Handler ())))
:&lt;|&gt; (Handler Value
      :&lt;|&gt; (Handler
              (SwaggerUiHtml &quot;swagger-ui&quot; (&quot;swagger.json&quot; :&gt; Get '[JSON] Value))
            :&lt;|&gt; (Handler
                    (SwaggerUiHtml &quot;swagger-ui&quot; (&quot;swagger.json&quot; :&gt; Get '[JSON] Value))
                  :&lt;|&gt; Tagged Handler Application)))
ServerT (CombinedAPI t) Handler
</span><a href="#local-6989586621680395667"><span class="hs-identifier hs-var">apiServer</span></a></span><span> </span><span class="annot"><span class="annottext">(((Handler ()
   :&lt;|&gt; (Handler (FullReport (ContractDef t))
         :&lt;|&gt; ((ContractActivationArgs (ContractDef t)
                -&gt; Handler ContractInstanceId)
               :&lt;|&gt; ((ContractInstanceId
                      -&gt; Handler (ContractInstanceClientState (ContractDef t))
                         :&lt;|&gt; (Handler (ContractSignatureResponse (ContractDef t))
                               :&lt;|&gt; (([Char] -&gt; Value -&gt; Handler ()) :&lt;|&gt; Handler ())))
                     :&lt;|&gt; ((WalletId
                            -&gt; Maybe Text
                            -&gt; Handler [ContractInstanceClientState (ContractDef t)])
                           :&lt;|&gt; ((Maybe Text
                                  -&gt; Handler [ContractInstanceClientState (ContractDef t)])
                                 :&lt;|&gt; Handler [ContractSignatureResponse (ContractDef t)]))))))
  :&lt;|&gt; ((ContractInstanceId -&gt; PendingConnection -&gt; Handler ())
        :&lt;|&gt; (PendingConnection -&gt; Handler ())))
 :&lt;|&gt; (Handler Value
       :&lt;|&gt; (Handler
               (SwaggerUiHtml &quot;swagger-ui&quot; (&quot;swagger.json&quot; :&gt; Get '[JSON] Value))
             :&lt;|&gt; (Handler
                     (SwaggerUiHtml &quot;swagger-ui&quot; (&quot;swagger.json&quot; :&gt; Get '[JSON] Value))
                   :&lt;|&gt; Tagged Handler Application))))
-&gt; Tagged Handler Application
-&gt; (((Handler ()
      :&lt;|&gt; (Handler (FullReport (ContractDef t))
            :&lt;|&gt; ((ContractActivationArgs (ContractDef t)
                   -&gt; Handler ContractInstanceId)
                  :&lt;|&gt; ((ContractInstanceId
                         -&gt; Handler (ContractInstanceClientState (ContractDef t))
                            :&lt;|&gt; (Handler (ContractSignatureResponse (ContractDef t))
                                  :&lt;|&gt; (([Char] -&gt; Value -&gt; Handler ()) :&lt;|&gt; Handler ())))
                        :&lt;|&gt; ((WalletId
                               -&gt; Maybe Text
                               -&gt; Handler [ContractInstanceClientState (ContractDef t)])
                              :&lt;|&gt; ((Maybe Text
                                     -&gt; Handler [ContractInstanceClientState (ContractDef t)])
                                    :&lt;|&gt; Handler [ContractSignatureResponse (ContractDef t)]))))))
     :&lt;|&gt; ((ContractInstanceId -&gt; PendingConnection -&gt; Handler ())
           :&lt;|&gt; (PendingConnection -&gt; Handler ())))
    :&lt;|&gt; (Handler Value
          :&lt;|&gt; (Handler
                  (SwaggerUiHtml &quot;swagger-ui&quot; (&quot;swagger.json&quot; :&gt; Get '[JSON] Value))
                :&lt;|&gt; (Handler
                        (SwaggerUiHtml &quot;swagger-ui&quot; (&quot;swagger.json&quot; :&gt; Get '[JSON] Value))
                      :&lt;|&gt; Tagged Handler Application))))
   :&lt;|&gt; Tagged Handler Application
forall a b. a -&gt; b -&gt; a :&lt;|&gt; b
</span><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-operator hs-var">:&lt;|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Tagged Handler Application
ServerT Raw Handler
</span><a href="#local-6989586621680395664"><span class="hs-identifier hs-var">fileServer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="hs-comment">-- | Start the server using the config. Returns an action that shuts it down</span><span>
</span><span id="line-97"></span><span class="hs-comment">--   again, and an MVar that is filled when the webserver</span><span>
</span><span id="line-98"></span><span class="hs-comment">--   thread exits.</span><span>
</span><span id="line-99"></span><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#startServer"><span class="hs-identifier hs-type">startServer</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680395725"><span class="annot"><a href="#local-6989586621680395725"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span id="local-6989586621680395724"><span class="annot"><a href="#local-6989586621680395724"><span class="hs-identifier hs-type">env</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395725"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395725"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#PABContract"><span class="hs-identifier hs-type">Contract.PABContract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395725"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-identifier hs-type">Servant.MimeUnrender</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-identifier hs-type">Servant.JSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395725"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/vpm50j3dwjzfg00shy71mwawvv796qgi-openapi3-lib-openapi3-3.2.3-haddock-doc/share/doc/openapi3/html/src"><span class="hs-identifier hs-type">OpenApi.ToSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395725"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.PAB.Types.html#WebserverConfig"><span class="hs-identifier hs-type">WebserverConfig</span></a></span><span> </span><span class="hs-comment">-- ^ Optional file path for static assets</span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Concurrent.Availability.html#Availability"><span class="hs-identifier hs-type">Availability</span></a></span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.PAB.Core.html#PABAction"><span class="hs-identifier hs-type">PABAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395725"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395724"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MVar</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Core.html#PABAction"><span class="hs-identifier hs-type">PABAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395725"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395724"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span id="startServer"><span class="annot"><span class="annottext">startServer :: WebserverConfig
-&gt; Availability -&gt; PABAction t env (MVar (), PABAction t env ())
</span><a href="Plutus.PAB.Webserver.Server.html#startServer"><span class="hs-identifier hs-var hs-var">startServer</span></a></span></span><span> </span><span class="annot"><a href="Plutus.PAB.Types.html#WebserverConfig"><span class="hs-identifier hs-type">WebserverConfig</span></a></span><span class="hs-special">{</span><span id="local-6989586621680395663"><span class="annot"><span class="annottext">BaseUrl
baseUrl :: BaseUrl
baseUrl :: WebserverConfig -&gt; BaseUrl
</span><a href="#local-6989586621680395663"><span class="hs-identifier hs-var hs-var">baseUrl</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680395662"><span class="annot"><span class="annottext">Maybe [Char]
staticDir :: Maybe [Char]
staticDir :: WebserverConfig -&gt; Maybe [Char]
</span><a href="#local-6989586621680395662"><span class="hs-identifier hs-var hs-var">staticDir</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680395661"><span class="annot"><span class="annottext">Bool
permissiveCorsPolicy :: Bool
permissiveCorsPolicy :: WebserverConfig -&gt; Bool
</span><a href="#local-6989586621680395661"><span class="hs-identifier hs-var hs-var">permissiveCorsPolicy</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680395660"><span class="annot"><span class="annottext">Maybe Second
endpointTimeout :: Maybe Second
endpointTimeout :: WebserverConfig -&gt; Maybe Second
</span><a href="#local-6989586621680395660"><span class="hs-identifier hs-var hs-var">endpointTimeout</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680395659"><span class="annot"><span class="annottext">Maybe [Char]
certificatePath :: Maybe [Char]
certificatePath :: WebserverConfig -&gt; Maybe [Char]
</span><a href="#local-6989586621680395659"><span class="hs-identifier hs-var hs-var">certificatePath</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680395658"><span class="annot"><span class="annottext">Maybe [Char]
keyPath :: Maybe [Char]
keyPath :: WebserverConfig -&gt; Maybe [Char]
</span><a href="#local-6989586621680395658"><span class="hs-identifier hs-var hs-var">keyPath</span></a></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621680395657"><span class="annot"><span class="annottext">Availability
</span><a href="#local-6989586621680395657"><span class="hs-identifier hs-var">availability</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; PABAction t env () -&gt; PABAction t env ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680395661"><span class="hs-identifier hs-var">permissiveCorsPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">(PABAction t env () -&gt; PABAction t env ())
-&gt; PABAction t env () -&gt; PABAction t env ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-112"></span><span>      </span><span class="annot"><span class="annottext">PABMultiAgentMsg t -&gt; PABAction t env ()
forall a (effs :: [* -&gt; *]).
Member (LogMsg a) effs =&gt;
a -&gt; Eff effs ()
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">logWarn</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Monitoring.PABLogMsg.html#PABMultiAgentMsg"><span class="hs-identifier hs-type">LM.PABMultiAgentMsg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395725"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; PABMultiAgentMsg t
forall t. Text -&gt; PABMultiAgentMsg t
</span><a href="Plutus.PAB.Monitoring.PABLogMsg.html#UserLog"><span class="hs-identifier hs-var">LM.UserLog</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Warning: Using a very permissive CORS policy! *Any* website serving JavaScript can interact with these endpoints.&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><span class="annottext">[Middleware]
-&gt; Int
-&gt; Maybe TLSSettings
-&gt; Maybe [Char]
-&gt; Availability
-&gt; Int
-&gt; PABAction t env (MVar (), PABAction t env ())
forall t env.
(FromJSON (ContractDef t), ToJSON (ContractDef t), PABContract t,
 MimeUnrender JSON (ContractDef t), ToSchema (ContractDef t)) =&gt;
[Middleware]
-&gt; Int
-&gt; Maybe TLSSettings
-&gt; Maybe [Char]
-&gt; Availability
-&gt; Int
-&gt; PABAction t env (MVar (), PABAction t env ())
</span><a href="Plutus.PAB.Webserver.Server.html#startServer%27"><span class="hs-identifier hs-var">startServer'</span></a></span><span> </span><span class="annot"><span class="annottext">[Middleware]
</span><a href="#local-6989586621680395655"><span class="hs-identifier hs-var">middlewares</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BaseUrl -&gt; Int
</span><a href="../file:///nix/store/bp0ml9hvqnwczc48023rn371h6pzz2r6-servant-client-core-lib-servant-client-core-0.18.3-haddock-doc/share/doc/servant-client-core/html/src"><span class="hs-identifier hs-var hs-var">baseUrlPort</span></a></span><span> </span><span class="annot"><span class="annottext">BaseUrl
</span><a href="#local-6989586621680395663"><span class="hs-identifier hs-var">baseUrl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe TLSSettings
</span><a href="#local-6989586621680395654"><span class="hs-identifier hs-var">tlsSettings</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621680395662"><span class="hs-identifier hs-var">staticDir</span></a></span><span> </span><span class="annot"><span class="annottext">Availability
</span><a href="#local-6989586621680395657"><span class="hs-identifier hs-var">availability</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Second -&gt; Int
forall a p. (Integral a, Num p) =&gt; Maybe a -&gt; p
</span><a href="#local-6989586621680395653"><span class="hs-identifier hs-var">timeout</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Second
</span><a href="#local-6989586621680395660"><span class="hs-identifier hs-var">endpointTimeout</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-115"></span><span>        </span><span id="local-6989586621680395655"><span class="annot"><span class="annottext">middlewares :: [Middleware]
</span><a href="#local-6989586621680395655"><span class="hs-identifier hs-var hs-var">middlewares</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680395661"><span class="hs-identifier hs-var">permissiveCorsPolicy</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Middleware]
</span><a href="#local-6989586621680395652"><span class="hs-identifier hs-var">corsMiddlewares</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-116"></span><span>        </span><span id="local-6989586621680395652"><span class="annot"><span class="annottext">corsMiddlewares :: [Middleware]
</span><a href="#local-6989586621680395652"><span class="hs-identifier hs-var hs-var">corsMiddlewares</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-117"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="hs-comment">-- a custom CORS policy since 'simpleCors' doesn't support &quot;content-type&quot; header by default</span><span>
</span><span id="line-118"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680395651"><span class="annot"><span class="annottext">policy :: CorsResourcePolicy
</span><a href="#local-6989586621680395651"><span class="hs-identifier hs-var hs-var">policy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CorsResourcePolicy
</span><a href="../file:///nix/store/zcmmqpbdpxbnbj68ijv7f0fn0zww2pq8-wai-cors-lib-wai-cors-0.2.7-haddock-doc/share/doc/wai-cors/html/src"><span class="hs-identifier hs-var">Cors.simpleCorsResourcePolicy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">corsRequestHeaders :: [HeaderName]
</span><a href="../file:///nix/store/zcmmqpbdpxbnbj68ijv7f0fn0zww2pq8-wai-cors-lib-wai-cors-0.2.7-haddock-doc/share/doc/wai-cors/html/src"><span class="hs-identifier hs-var">Cors.corsRequestHeaders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-string">&quot;content-type&quot;</span></span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-119"></span><span>            </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(Request -&gt; Maybe CorsResourcePolicy) -&gt; Middleware
</span><a href="../file:///nix/store/zcmmqpbdpxbnbj68ijv7f0fn0zww2pq8-wai-cors-lib-wai-cors-0.2.7-haddock-doc/share/doc/wai-cors/html/src"><span class="hs-identifier hs-var">Cors.cors</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe CorsResourcePolicy -&gt; Request -&gt; Maybe CorsResourcePolicy
forall a b. a -&gt; b -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe CorsResourcePolicy -&gt; Request -&gt; Maybe CorsResourcePolicy)
-&gt; Maybe CorsResourcePolicy -&gt; Request -&gt; Maybe CorsResourcePolicy
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CorsResourcePolicy -&gt; Maybe CorsResourcePolicy
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">CorsResourcePolicy
</span><a href="#local-6989586621680395651"><span class="hs-identifier hs-var">policy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>            </span><span class="hs-comment">-- this middleware handles preflight OPTIONS browser requests</span><span>
</span><span id="line-121"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Proxy (API (ContractDef t) Integer) -&gt; Middleware
forall api.
(GenerateList NoContent (Foreign NoContent api),
 HasForeign NoTypes NoContent api) =&gt;
Proxy api -&gt; Middleware
</span><a href="../file:///nix/store/5qsp61phk93pjlp09b2npg3r5lfvx2fn-servant-options-lib-servant-options-0.1.0.0-haddock-doc/share/doc/servant-options/html/src"><span class="hs-identifier hs-var">Cors.provideOptions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy (API (ContractDef t) Integer)
forall k (t :: k). Proxy t
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Webserver.API.html#API"><span class="hs-identifier hs-type">API</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395725"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/integer-gmp-1.0.3.0/src"><span class="hs-identifier hs-type">Integer</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-123"></span><span>        </span><span id="local-6989586621680395654"><span class="annot"><span class="annottext">tlsSettings :: Maybe TLSSettings
</span><a href="#local-6989586621680395654"><span class="hs-identifier hs-var hs-var">tlsSettings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; TLSSettings
</span><a href="../file:///nix/store/pv5hicisx621vfrfcldchw35gqhz964r-warp-tls-lib-warp-tls-3.3.4-haddock-doc/share/doc/warp-tls/html/src"><span class="hs-identifier hs-var">WarpTLS.tlsSettings</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; [Char] -&gt; TLSSettings)
-&gt; Maybe [Char] -&gt; Maybe ([Char] -&gt; TLSSettings)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621680395659"><span class="hs-identifier hs-var">certificatePath</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ([Char] -&gt; TLSSettings) -&gt; Maybe [Char] -&gt; Maybe TLSSettings
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621680395658"><span class="hs-identifier hs-var">keyPath</span></a></span><span>
</span><span id="line-124"></span><span>        </span><span class="hs-comment">-- By default we use the normal request timeout: 30 seconds. But if</span><span>
</span><span id="line-125"></span><span>        </span><span class="hs-comment">-- someone has asked for a longer endpoint timeout, we need to set</span><span>
</span><span id="line-126"></span><span>        </span><span class="hs-comment">-- that to be the webserver timeout as well.</span><span>
</span><span id="line-127"></span><span>        </span><span id="local-6989586621680395653"><span class="annot"><span class="annottext">timeout :: Maybe a -&gt; p
</span><a href="#local-6989586621680395653"><span class="hs-identifier hs-var hs-var">timeout</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-number">30</span></span><span>
</span><span id="line-128"></span><span>        </span><span class="annot"><a href="#local-6989586621680395653"><span class="hs-identifier hs-var">timeout</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680395643"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680395643"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; p
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; p) -&gt; a -&gt; p
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">max</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680395643"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">30</span></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="hs-comment">-- | Start the server. Returns an action that shuts it down</span><span>
</span><span id="line-131"></span><span class="hs-comment">--   again, and an MVar that is filled when the webserver</span><span>
</span><span id="line-132"></span><span class="hs-comment">--   thread exits.</span><span>
</span><span id="line-133"></span><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#startServer%27"><span class="hs-identifier hs-type">startServer'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680395797"><span class="annot"><a href="#local-6989586621680395797"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span id="local-6989586621680395793"><span class="annot"><a href="#local-6989586621680395793"><span class="hs-identifier hs-type">env</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395797"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395797"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#PABContract"><span class="hs-identifier hs-type">Contract.PABContract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395797"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-138"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-identifier hs-type">Servant.MimeUnrender</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-identifier hs-type">Servant.JSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395797"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/vpm50j3dwjzfg00shy71mwawvv796qgi-openapi3-lib-openapi3-3.2.3-haddock-doc/share/doc/openapi3/html/src"><span class="hs-identifier hs-type">OpenApi.ToSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395797"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/h6pndxxsxmb9rv9q8mfkryl2vhbq64i9-wai-lib-wai-3.2.3-haddock-doc/share/doc/wai/html/src"><span class="hs-identifier hs-type">Middleware</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ Optional wai middleware</span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-comment">-- ^ Port</span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/pv5hicisx621vfrfcldchw35gqhz964r-warp-tls-lib-warp-tls-3.3.4-haddock-doc/share/doc/warp-tls/html/src"><span class="hs-identifier hs-type">WarpTLS.TLSSettings</span></a></span><span> </span><span class="hs-comment">-- ^ Optionally use HTTPS with these settings</span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-comment">-- ^ Optional file path for static assets</span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Concurrent.Availability.html#Availability"><span class="hs-identifier hs-type">Availability</span></a></span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-147"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.PAB.Core.html#PABAction"><span class="hs-identifier hs-type">PABAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395797"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395793"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MVar</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Core.html#PABAction"><span class="hs-identifier hs-type">PABAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395797"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395793"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span id="startServer%27"><span class="annot"><span class="annottext">startServer' :: [Middleware]
-&gt; Int
-&gt; Maybe TLSSettings
-&gt; Maybe [Char]
-&gt; Availability
-&gt; Int
-&gt; PABAction t env (MVar (), PABAction t env ())
</span><a href="Plutus.PAB.Webserver.Server.html#startServer%27"><span class="hs-identifier hs-var hs-var">startServer'</span></a></span></span><span> </span><span id="local-6989586621680395641"><span class="annot"><span class="annottext">[Middleware]
</span><a href="#local-6989586621680395641"><span class="hs-identifier hs-var">waiMiddlewares</span></a></span></span><span> </span><span id="local-6989586621680395640"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680395640"><span class="hs-identifier hs-var">port</span></a></span></span><span> </span><span id="local-6989586621680395639"><span class="annot"><span class="annottext">Maybe TLSSettings
</span><a href="#local-6989586621680395639"><span class="hs-identifier hs-var">tlsSettings</span></a></span></span><span> </span><span id="local-6989586621680395638"><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621680395638"><span class="hs-identifier hs-var">staticPath</span></a></span></span><span> </span><span id="local-6989586621680395637"><span class="annot"><span class="annottext">Availability
</span><a href="#local-6989586621680395637"><span class="hs-identifier hs-var">availability</span></a></span></span><span> </span><span id="local-6989586621680395636"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680395636"><span class="hs-identifier hs-var">timeout</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-149"></span><span>    </span><span id="local-6989586621680395635"><span class="annot"><span class="annottext">PABRunner t env
</span><a href="#local-6989586621680395635"><span class="hs-identifier hs-var">simRunner</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PABAction t env (PABRunner t env)
forall t env. PABAction t env (PABRunner t env)
</span><a href="Plutus.PAB.Core.html#pabRunner"><span class="hs-identifier hs-var">Core.pabRunner</span></a></span><span>
</span><span id="line-150"></span><span>    </span><span id="local-6989586621680395633"><span class="annot"><span class="annottext">TMVar ()
</span><a href="#local-6989586621680395633"><span class="hs-identifier hs-var">shutdownVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (TMVar ()) -&gt; Eff (PABEffects t env) (TMVar ())
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (TMVar ()) -&gt; Eff (PABEffects t env) (TMVar ()))
-&gt; IO (TMVar ()) -&gt; Eff (PABEffects t env) (TMVar ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">STM (TMVar ()) -&gt; IO (TMVar ())
forall a. STM a -&gt; IO a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM (TMVar ()) -&gt; IO (TMVar ()))
-&gt; STM (TMVar ()) -&gt; IO (TMVar ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">STM (TMVar ())
forall a. STM (TMVar a)
</span><a href="../file:///nix/store/b738x068mpk6m31fqb2w33rzbqb41k86-stm-lib-stm-2.5.0.1-haddock-doc/share/doc/stm/html/src"><span class="hs-identifier hs-var">STM.newEmptyTMVar</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>    </span><span id="local-6989586621680395630"><span class="annot"><span class="annottext">MVar ()
</span><a href="#local-6989586621680395630"><span class="hs-identifier hs-var">mvar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (MVar ()) -&gt; Eff (PABEffects t env) (MVar ())
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">IO (MVar ())
forall a. IO (MVar a)
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newEmptyMVar</span></a></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621680395629"><span class="hs-identifier hs-type">shutdownHandler</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>        </span><span id="local-6989586621680395629"><span class="annot"><span class="annottext">shutdownHandler :: IO () -&gt; IO ()
</span><a href="#local-6989586621680395629"><span class="hs-identifier hs-var hs-var">shutdownHandler</span></a></span></span><span> </span><span id="local-6989586621680395628"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621680395628"><span class="hs-identifier hs-var">doShutdown</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO ThreadId -&gt; IO ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(IO ThreadId -&gt; IO ()) -&gt; IO ThreadId -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO ThreadId
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">forkIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ThreadId) -&gt; IO () -&gt; IO ThreadId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-155"></span><span>            </span><span class="annot"><span class="annottext">STM () -&gt; IO ()
forall a. STM a -&gt; IO a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM () -&gt; IO ()) -&gt; STM () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar () -&gt; STM ()
forall a. TMVar a -&gt; STM a
</span><a href="../file:///nix/store/b738x068mpk6m31fqb2w33rzbqb41k86-stm-lib-stm-2.5.0.1-haddock-doc/share/doc/stm/html/src"><span class="hs-identifier hs-var">STM.takeTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar ()
</span><a href="#local-6989586621680395633"><span class="hs-identifier hs-var">shutdownVar</span></a></span><span>
</span><span id="line-156"></span><span>            </span><span class="annot"><span class="annottext">[Char] -&gt; IO ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">putStrLn</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;webserver: shutting down&quot;</span></span><span>
</span><span id="line-157"></span><span>            </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621680395628"><span class="hs-identifier hs-var">doShutdown</span></a></span><span>
</span><span id="line-158"></span><span>        </span><span class="annot"><a href="#local-6989586621680395625"><span class="hs-identifier hs-type">warpSettings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/xr1qwbfgn013dz6gycdc4wk2n2a753kz-warp-lib-warp-3.3.23-haddock-doc/share/doc/warp/html/src"><span class="hs-identifier hs-type">Warp.Settings</span></a></span><span>
</span><span id="line-159"></span><span>        </span><span id="local-6989586621680395625"><span class="annot"><span class="annottext">warpSettings :: Settings
</span><a href="#local-6989586621680395625"><span class="hs-identifier hs-var hs-var">warpSettings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="../file:///nix/store/xr1qwbfgn013dz6gycdc4wk2n2a753kz-warp-lib-warp-3.3.23-haddock-doc/share/doc/warp/html/src"><span class="hs-identifier hs-var">Warp.defaultSettings</span></a></span><span>
</span><span id="line-160"></span><span>            </span><span class="annot"><span class="annottext">Settings -&gt; (Settings -&gt; Settings) -&gt; Settings
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Settings -&gt; Settings
</span><a href="../file:///nix/store/xr1qwbfgn013dz6gycdc4wk2n2a753kz-warp-lib-warp-3.3.23-haddock-doc/share/doc/warp/html/src"><span class="hs-identifier hs-var">Warp.setPort</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680395640"><span class="hs-identifier hs-var">port</span></a></span><span>
</span><span id="line-161"></span><span>            </span><span class="annot"><span class="annottext">Settings -&gt; (Settings -&gt; Settings) -&gt; Settings
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; Settings -&gt; Settings
</span><a href="../file:///nix/store/xr1qwbfgn013dz6gycdc4wk2n2a753kz-warp-lib-warp-3.3.23-haddock-doc/share/doc/warp/html/src"><span class="hs-identifier hs-var">Warp.setInstallShutdownHandler</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
</span><a href="#local-6989586621680395629"><span class="hs-identifier hs-var">shutdownHandler</span></a></span><span>
</span><span id="line-162"></span><span>            </span><span class="annot"><span class="annottext">Settings -&gt; (Settings -&gt; Settings) -&gt; Settings
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; Settings -&gt; Settings
</span><a href="../file:///nix/store/xr1qwbfgn013dz6gycdc4wk2n2a753kz-warp-lib-warp-3.3.23-haddock-doc/share/doc/warp/html/src"><span class="hs-identifier hs-var">Warp.setBeforeMainLoop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Availability -&gt; IO ()
forall (m :: * -&gt; *). MonadIO m =&gt; Availability -&gt; m ()
</span><a href="Control.Concurrent.Availability.html#available"><span class="hs-identifier hs-var">available</span></a></span><span> </span><span class="annot"><span class="annottext">Availability
</span><a href="#local-6989586621680395637"><span class="hs-identifier hs-var">availability</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>            </span><span class="annot"><span class="annottext">Settings -&gt; (Settings -&gt; Settings) -&gt; Settings
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Settings -&gt; Settings
</span><a href="../file:///nix/store/xr1qwbfgn013dz6gycdc4wk2n2a753kz-warp-lib-warp-3.3.23-haddock-doc/share/doc/warp/html/src"><span class="hs-identifier hs-var">Warp.setTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680395636"><span class="hs-identifier hs-var">timeout</span></a></span><span>
</span><span id="line-164"></span><span>            </span><span class="annot"><span class="annottext">Settings -&gt; (Settings -&gt; Settings) -&gt; Settings
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">HostPreference -&gt; Settings -&gt; Settings
</span><a href="../file:///nix/store/xr1qwbfgn013dz6gycdc4wk2n2a753kz-warp-lib-warp-3.3.23-haddock-doc/share/doc/warp/html/src"><span class="hs-identifier hs-var">Warp.setHost</span></a></span><span> </span><span class="annot"><span class="annottext">HostPreference
</span><span class="hs-string">&quot;*6&quot;</span></span><span> </span><span class="hs-comment">-- HostIPv6@ - &quot;any IPv4 or IPv6 hostname, IPv6 preferred&quot;</span><span>
</span><span id="line-165"></span><span>        </span><span id="local-6989586621680395618"><span class="annot"><span class="annottext">middleware :: Middleware
</span><a href="#local-6989586621680395618"><span class="hs-identifier hs-var hs-var">middleware</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Endo Application -&gt; Middleware
forall a. Endo a -&gt; a -&gt; a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var">appEndo</span></a></span><span> </span><span class="annot"><span class="annottext">(Endo Application -&gt; Middleware) -&gt; Endo Application -&gt; Middleware
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Middleware -&gt; Endo Application)
-&gt; [Middleware] -&gt; Endo Application
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">foldMap</span></a></span><span> </span><span class="annot"><span class="annottext">Middleware -&gt; Endo Application
forall a. (a -&gt; a) -&gt; Endo a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Endo</span></a></span><span> </span><span class="annot"><span class="annottext">[Middleware]
</span><a href="#local-6989586621680395641"><span class="hs-identifier hs-var">waiMiddlewares</span></a></span><span>
</span><span id="line-166"></span><span>        </span><span id="local-6989586621680395616"><span class="annot"><span class="annottext">run :: Settings -&gt; Application -&gt; IO ()
</span><a href="#local-6989586621680395616"><span class="hs-identifier hs-var hs-var">run</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Settings -&gt; Application -&gt; IO ())
-&gt; (TLSSettings -&gt; Settings -&gt; Application -&gt; IO ())
-&gt; Maybe TLSSettings
-&gt; Settings
-&gt; Application
-&gt; IO ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Settings -&gt; Application -&gt; IO ()
</span><a href="../file:///nix/store/xr1qwbfgn013dz6gycdc4wk2n2a753kz-warp-lib-warp-3.3.23-haddock-doc/share/doc/warp/html/src"><span class="hs-identifier hs-var">Warp.runSettings</span></a></span><span> </span><span class="annot"><span class="annottext">TLSSettings -&gt; Settings -&gt; Application -&gt; IO ()
</span><a href="../file:///nix/store/pv5hicisx621vfrfcldchw35gqhz964r-warp-tls-lib-warp-tls-3.3.4-haddock-doc/share/doc/warp-tls/html/src"><span class="hs-identifier hs-var">WarpTLS.runTLS</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TLSSettings
</span><a href="#local-6989586621680395639"><span class="hs-identifier hs-var">tlsSettings</span></a></span><span>
</span><span id="line-167"></span><span>    </span><span class="annot"><span class="annottext">PABMultiAgentMsg t -&gt; PABAction t env ()
forall a (effs :: [* -&gt; *]).
Member (LogMsg a) effs =&gt;
a -&gt; Eff effs ()
</span><a href="../../../../freer-extras/html/src"><span class="hs-identifier hs-var">logInfo</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Monitoring.PABLogMsg.html#PABMultiAgentMsg"><span class="hs-identifier hs-type">LM.PABMultiAgentMsg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395797"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; PABMultiAgentMsg t
forall t. Int -&gt; PABMultiAgentMsg t
</span><a href="Plutus.PAB.Monitoring.PABLogMsg.html#StartingPABBackendServer"><span class="hs-identifier hs-var">LM.StartingPABBackendServer</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680395640"><span class="hs-identifier hs-var">port</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>    </span><span class="annot"><span class="annottext">Eff (PABEffects t env) ThreadId -&gt; PABAction t env ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff (PABEffects t env) ThreadId -&gt; PABAction t env ())
-&gt; Eff (PABEffects t env) ThreadId -&gt; PABAction t env ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO ThreadId -&gt; Eff (PABEffects t env) ThreadId
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO ThreadId -&gt; Eff (PABEffects t env) ThreadId)
-&gt; IO ThreadId -&gt; Eff (PABEffects t env) ThreadId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-169"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; (Either SomeException () -&gt; IO ()) -&gt; IO ThreadId
forall a. IO a -&gt; (Either SomeException a -&gt; IO ()) -&gt; IO ThreadId
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">forkFinally</span></a></span><span>
</span><span id="line-170"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Settings -&gt; Application -&gt; IO ()
</span><a href="#local-6989586621680395616"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621680395625"><span class="hs-identifier hs-var">warpSettings</span></a></span><span> </span><span class="annot"><span class="annottext">(Application -&gt; IO ()) -&gt; Application -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Middleware
</span><a href="#local-6989586621680395618"><span class="hs-identifier hs-var">middleware</span></a></span><span>
</span><span id="line-171"></span><span>               </span><span class="annot"><span class="annottext">Middleware -&gt; Middleware
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Char] -&gt; PABRunner t env -&gt; Application
forall t env.
(FromJSON (ContractDef t), ToJSON (ContractDef t), PABContract t,
 MimeUnrender JSON (ContractDef t), ToSchema (ContractDef t)) =&gt;
Maybe [Char] -&gt; PABRunner t env -&gt; Application
</span><a href="Plutus.PAB.Webserver.Server.html#app"><span class="hs-identifier hs-var">app</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621680395638"><span class="hs-identifier hs-var">staticPath</span></a></span><span> </span><span class="annot"><span class="annottext">PABRunner t env
</span><a href="#local-6989586621680395635"><span class="hs-identifier hs-var">simRunner</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>            </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Either SomeException ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MVar () -&gt; () -&gt; IO ()
forall a. MVar a -&gt; a -&gt; IO ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">putMVar</span></a></span><span> </span><span class="annot"><span class="annottext">MVar ()
</span><a href="#local-6989586621680395630"><span class="hs-identifier hs-var">mvar</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span>    </span><span class="annot"><span class="annottext">(MVar (), PABAction t env ())
-&gt; PABAction t env (MVar (), PABAction t env ())
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MVar ()
</span><a href="#local-6989586621680395630"><span class="hs-identifier hs-var">mvar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; PABAction t env ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; PABAction t env ()) -&gt; IO () -&gt; PABAction t env ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">STM () -&gt; IO ()
forall a. STM a -&gt; IO a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">STM.atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM () -&gt; IO ()) -&gt; STM () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar () -&gt; () -&gt; STM ()
forall a. TMVar a -&gt; a -&gt; STM ()
</span><a href="../file:///nix/store/b738x068mpk6m31fqb2w33rzbqb41k86-stm-lib-stm-2.5.0.1-haddock-doc/share/doc/stm/html/src"><span class="hs-identifier hs-var">STM.putTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar ()
</span><a href="#local-6989586621680395633"><span class="hs-identifier hs-var">shutdownVar</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span class="hs-comment">-- | Start the server using a default configuration for debugging.</span><span>
</span><span id="line-177"></span><span id="local-6989586621680395610"><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#startServerDebug"><span class="hs-identifier hs-type">startServerDebug</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395610"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395610"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#PABContract"><span class="hs-identifier hs-type">Contract.PABContract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395610"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-identifier hs-type">Servant.MimeUnrender</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-identifier hs-type">Servant.JSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395610"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/vpm50j3dwjzfg00shy71mwawvv796qgi-openapi3-lib-openapi3-3.2.3-haddock-doc/share/doc/openapi3/html/src"><span class="hs-identifier hs-type">OpenApi.ToSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395610"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.PAB.Simulator.html#Simulation"><span class="hs-identifier hs-type">Simulation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395610"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Simulator.html#Simulation"><span class="hs-identifier hs-type">Simulation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395610"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-185"></span><span id="startServerDebug"><span class="annot"><span class="annottext">startServerDebug :: Simulation t (Simulation t ())
</span><a href="Plutus.PAB.Webserver.Server.html#startServerDebug"><span class="hs-identifier hs-var hs-var">startServerDebug</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WebserverConfig -&gt; Simulation t (Simulation t ())
forall t.
(FromJSON (ContractDef t), ToJSON (ContractDef t), PABContract t,
 MimeUnrender JSON (ContractDef t), ToSchema (ContractDef t)) =&gt;
WebserverConfig -&gt; Simulation t (Simulation t ())
</span><a href="Plutus.PAB.Webserver.Server.html#startServerDebug%27"><span class="hs-identifier hs-var">startServerDebug'</span></a></span><span> </span><span class="annot"><span class="annottext">WebserverConfig
</span><a href="Plutus.PAB.Types.html#defaultWebServerConfig"><span class="hs-identifier hs-var">defaultWebServerConfig</span></a></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-comment">-- | Start the server using (mostly) a default configuration for debugging,</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- but allow an optional webserver config.</span><span>
</span><span id="line-189"></span><span id="local-6989586621680395731"><span class="annot"><a href="Plutus.PAB.Webserver.Server.html#startServerDebug%27"><span class="hs-identifier hs-type">startServerDebug'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395731"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395731"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#PABContract"><span class="hs-identifier hs-type">Contract.PABContract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395731"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-identifier hs-type">Servant.MimeUnrender</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/vyn800dwc7jzx9nlwjw9m6vsd46p5skc-servant-lib-servant-0.18.3-haddock-doc/share/doc/servant/html/src"><span class="hs-identifier hs-type">Servant.JSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395731"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/vpm50j3dwjzfg00shy71mwawvv796qgi-openapi3-lib-openapi3-3.2.3-haddock-doc/share/doc/openapi3/html/src"><span class="hs-identifier hs-type">OpenApi.ToSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Effects.Contract.html#ContractDef"><span class="hs-identifier hs-type">Contract.ContractDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395731"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.PAB.Types.html#WebserverConfig"><span class="hs-identifier hs-type">WebserverConfig</span></a></span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.PAB.Simulator.html#Simulation"><span class="hs-identifier hs-type">Simulation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395731"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Simulator.html#Simulation"><span class="hs-identifier hs-type">Simulation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680395731"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-198"></span><span id="startServerDebug%27"><span class="annot"><span class="annottext">startServerDebug' :: WebserverConfig -&gt; Simulation t (Simulation t ())
</span><a href="Plutus.PAB.Webserver.Server.html#startServerDebug%27"><span class="hs-identifier hs-var hs-var">startServerDebug'</span></a></span></span><span> </span><span id="local-6989586621680395609"><span class="annot"><span class="annottext">WebserverConfig
</span><a href="#local-6989586621680395609"><span class="hs-identifier hs-var">conf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-199"></span><span>    </span><span id="local-6989586621680395608"><span class="annot"><span class="annottext">Availability
</span><a href="#local-6989586621680395608"><span class="hs-identifier hs-var">tk</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Eff (PABEffects t (SimulatorState t)) Availability
forall (m :: * -&gt; *). MonadIO m =&gt; m Availability
</span><a href="Control.Concurrent.Availability.html#newToken"><span class="hs-identifier hs-var">newToken</span></a></span><span>
</span><span id="line-200"></span><span>    </span><span class="annot"><span class="annottext">(MVar (), Simulation t ()) -&gt; Simulation t ()
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((MVar (), Simulation t ()) -&gt; Simulation t ())
-&gt; Eff (PABEffects t (SimulatorState t)) (MVar (), Simulation t ())
-&gt; Simulation t (Simulation t ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">WebserverConfig
-&gt; Availability
-&gt; Eff (PABEffects t (SimulatorState t)) (MVar (), Simulation t ())
forall t env.
(FromJSON (ContractDef t), ToJSON (ContractDef t), PABContract t,
 MimeUnrender JSON (ContractDef t), ToSchema (ContractDef t)) =&gt;
WebserverConfig
-&gt; Availability -&gt; PABAction t env (MVar (), PABAction t env ())
</span><a href="Plutus.PAB.Webserver.Server.html#startServer"><span class="hs-identifier hs-var">startServer</span></a></span><span> </span><span class="annot"><span class="annottext">WebserverConfig
</span><a href="#local-6989586621680395609"><span class="hs-identifier hs-var">conf</span></a></span><span> </span><span class="annot"><span class="annottext">Availability
</span><a href="#local-6989586621680395608"><span class="hs-identifier hs-var">tk</span></a></span><span>
</span><span id="line-201"></span></pre></body></html>
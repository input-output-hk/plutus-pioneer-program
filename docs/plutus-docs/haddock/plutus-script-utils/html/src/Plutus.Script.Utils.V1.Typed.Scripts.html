<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DerivingStrategies   #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE GADTs                #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings    #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications     #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-missing-import-lists #-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Plutus.Script.Utils.V1.Typed.Scripts</span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.MonetaryPolicies.html"><span class="hs-identifier">Plutus.Script.Utils.V1.Typed.Scripts.MonetaryPolicies</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.StakeValidators.html"><span class="hs-identifier">Plutus.Script.Utils.V1.Typed.Scripts.StakeValidators</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.Validators.html"><span class="hs-identifier">Plutus.Script.Utils.V1.Typed.Scripts.Validators</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">Validator</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">MintingPolicy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">StakeValidator</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#TypedScriptTxOut"><span class="hs-identifier">TypedScriptTxOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutData"><span class="hs-identifier">tyTxOutData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutTxOut"><span class="hs-identifier">tyTxOutTxOut</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#TypedScriptTxOutRef"><span class="hs-identifier">TypedScriptTxOutRef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutRefOut"><span class="hs-identifier">tyTxOutRefOut</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutRefRef"><span class="hs-identifier">tyTxOutRefRef</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#makeTypedScriptTxOut"><span class="hs-identifier">makeTypedScriptTxOut</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#typeScriptTxOut"><span class="hs-identifier">typeScriptTxOut</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#typeScriptTxOutRef"><span class="hs-identifier">typeScriptTxOutRef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">where</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier">Control.Monad.Except</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier">MonadError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier">throwError</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Script.Utils.Scripts.html"><span class="hs-identifier">Plutus.Script.Utils.Scripts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.Scripts.html#datumHash"><span class="hs-identifier">datumHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.MonetaryPolicies.html"><span class="hs-identifier">Plutus.Script.Utils.V1.Typed.Scripts.MonetaryPolicies</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.MonetaryPolicies.html#forwardToValidator"><span class="hs-identifier">forwardToValidator</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.StakeValidators.html"><span class="hs-identifier">Plutus.Script.Utils.V1.Typed.Scripts.StakeValidators</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.StakeValidators.html#forwardToValidator"><span class="hs-identifier">forwardToValidator</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.Validators.html"><span class="hs-identifier">Plutus.Script.Utils.V1.Typed.Scripts.Validators</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">Plutus.V1.Ledger.Api</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">PubKeyCredential</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">ScriptCredential</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">Datum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">Datum</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier">FromData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">MintingPolicy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>                             </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">StakeValidator</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier">ToData</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">TxOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">TxOut</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">txOutAddress</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">txOutDatumHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">txOutValue</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>                             </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">TxOutRef</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">Validator</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">Value</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">addressCredential</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-comment">{- Note [Scripts returning Bool]
It used to be that the signal for validation failure was a script being `error`. This is nice for
the validator, since you can determine whether the script evaluation is error-or-not without having
to look at what the result actually *is* if there is one.

However, from the script author's point of view, it would be nicer to return a Bool, since
otherwise you end up doing a lot of `if realCondition then () else error ()` which is rubbish.

So we changed the result type to be Bool. But now we have to answer the question of how the
validator knows what the result value is. All *sorts* of terms can be True or False in disguise.
The easiest way to tell is by reducing it to the previous problem: apply a function which does a
pattern match and returns error in the case of False and () otherwise. Then, as before, we just
check for error in the overall evaluation.
-}</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-comment">-- | A 'TxOut' tagged by a phantom type: and the connection type of the output.</span><span>
</span><span id="line-49"></span><span class="hs-keyword">data</span><span> </span><span id="TypedScriptTxOut"><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#TypedScriptTxOut"><span class="hs-identifier hs-var">TypedScriptTxOut</span></a></span></span><span> </span><span id="local-6989586621679365877"><span class="annot"><a href="#local-6989586621679365877"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-type">FromData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.Typed.html#DatumType"><span class="hs-identifier hs-type">DatumType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365877"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-type">ToData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.Typed.html#DatumType"><span class="hs-identifier hs-type">DatumType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365877"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-50"></span><span>  </span><span id="TypedScriptTxOut"><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#TypedScriptTxOut"><span class="hs-identifier hs-var">TypedScriptTxOut</span></a></span></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="tyTxOutTxOut"><span class="annot"><span class="annottext">TypedScriptTxOut a -&gt; TxOut
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutTxOut"><span class="hs-identifier hs-var hs-var">tyTxOutTxOut</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">TxOut</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span id="tyTxOutData"><span class="annot"><span class="annottext">TypedScriptTxOut a -&gt; DatumType a
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutData"><span class="hs-identifier hs-var hs-var">tyTxOutData</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Script.Utils.Typed.html#DatumType"><span class="hs-identifier hs-type">DatumType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365877"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span id="local-6989586621679365811"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679365808"><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.Typed.html#DatumType"><span class="hs-identifier hs-type">DatumType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365811"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#TypedScriptTxOut"><span class="hs-identifier hs-type">TypedScriptTxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365811"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-56"></span><span>  </span><span id="local-6989586621679365806"><span class="annot"><span class="annottext">TypedScriptTxOut a
</span><a href="#local-6989586621679365806"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679365805"><span class="annot"><span class="annottext">== :: TypedScriptTxOut a -&gt; TypedScriptTxOut a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></a></span></span><span> </span><span id="local-6989586621679365804"><span class="annot"><span class="annottext">TypedScriptTxOut a
</span><a href="#local-6989586621679365804"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><span class="annottext">TypedScriptTxOut a -&gt; TxOut
forall a. TypedScriptTxOut a -&gt; TxOut
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutTxOut"><span class="hs-identifier hs-var hs-var">tyTxOutTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOut a
</span><a href="#local-6989586621679365806"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; TxOut -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOut a -&gt; TxOut
forall a. TypedScriptTxOut a -&gt; TxOut
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutTxOut"><span class="hs-identifier hs-var hs-var">tyTxOutTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOut a
</span><a href="#local-6989586621679365804"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-58"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOut a -&gt; DatumType a
forall a. TypedScriptTxOut a -&gt; DatumType a
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutData"><span class="hs-identifier hs-var hs-var">tyTxOutData</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOut a
</span><a href="#local-6989586621679365806"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">DatumType a -&gt; DatumType a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOut a -&gt; DatumType a
forall a. TypedScriptTxOut a -&gt; DatumType a
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutData"><span class="hs-identifier hs-var hs-var">tyTxOutData</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOut a
</span><a href="#local-6989586621679365804"><span class="hs-identifier hs-var">r</span></a></span></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-comment">-- | Create a 'TypedScriptTxOut' from a correctly-typed data script, an address, and a value.</span><span>
</span><span id="line-61"></span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#makeTypedScriptTxOut"><span class="hs-identifier hs-type">makeTypedScriptTxOut</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679365802"><span class="annot"><a href="#local-6989586621679365802"><span class="hs-identifier hs-type">out</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-type">ToData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.Typed.html#DatumType"><span class="hs-identifier hs-type">DatumType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365802"><span class="hs-identifier hs-type">out</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-type">FromData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.Typed.html#DatumType"><span class="hs-identifier hs-type">DatumType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365802"><span class="hs-identifier hs-type">out</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-64"></span><span>  </span><span class="annot"><a href="Plutus.Script.Utils.Typed.html#TypedValidator"><span class="hs-identifier hs-type">TypedValidator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365802"><span class="hs-identifier hs-type">out</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-65"></span><span>  </span><span class="annot"><a href="Plutus.Script.Utils.Typed.html#DatumType"><span class="hs-identifier hs-type">DatumType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365802"><span class="hs-identifier hs-type">out</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-66"></span><span>  </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#TypedScriptTxOut"><span class="hs-identifier hs-type">TypedScriptTxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365802"><span class="hs-identifier hs-type">out</span></a></span><span>
</span><span id="line-68"></span><span id="makeTypedScriptTxOut"><span class="annot"><span class="annottext">makeTypedScriptTxOut :: TypedValidator out
-&gt; DatumType out -&gt; Value -&gt; TypedScriptTxOut out
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#makeTypedScriptTxOut"><span class="hs-identifier hs-var hs-var">makeTypedScriptTxOut</span></a></span></span><span> </span><span id="local-6989586621679365801"><span class="annot"><span class="annottext">TypedValidator out
</span><a href="#local-6989586621679365801"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621679365800"><span class="annot"><span class="annottext">DatumType out
</span><a href="#local-6989586621679365800"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679365799"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679365799"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-69"></span><span>  </span><span class="annot"><span class="annottext">TxOut -&gt; DatumType out -&gt; TypedScriptTxOut out
forall a.
(FromData (DatumType a), ToData (DatumType a)) =&gt;
TxOut -&gt; DatumType a -&gt; TypedScriptTxOut a
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#TypedScriptTxOut"><span class="hs-identifier hs-var">TypedScriptTxOut</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679365802"><span class="hs-identifier hs-type">out</span></a></span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><span class="annottext">TxOut :: Address -&gt; Value -&gt; Maybe DatumHash -&gt; TxOut
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">TxOut</span></a></span><span>
</span><span id="line-71"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">txOutAddress :: Address
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var">txOutAddress</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypedValidator out -&gt; Address
forall a. TypedValidator a -&gt; Address
</span><a href="Plutus.Script.Utils.Typed.html#validatorAddress"><span class="hs-identifier hs-var">validatorAddress</span></a></span><span> </span><span class="annot"><span class="annottext">TypedValidator out
</span><a href="#local-6989586621679365801"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>        </span><span class="annot"><span class="annottext">txOutValue :: Value
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var">txOutValue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679365799"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>        </span><span class="annot"><span class="annottext">txOutDatumHash :: Maybe DatumHash
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var">txOutDatumHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DatumHash -&gt; Maybe DatumHash
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Datum -&gt; DatumHash
</span><a href="Plutus.Script.Utils.Scripts.html#datumHash"><span class="hs-identifier hs-var">datumHash</span></a></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; DatumHash) -&gt; Datum -&gt; DatumHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var">Datum</span></a></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; BuiltinData -&gt; Datum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DatumType out -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">toBuiltinData</span></a></span><span> </span><span class="annot"><span class="annottext">DatumType out
</span><a href="#local-6989586621679365800"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-75"></span><span>    </span><span class="annot"><span class="annottext">DatumType out
</span><a href="#local-6989586621679365800"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-comment">-- | A 'TxOutRef' tagged by a phantom type: and the connection type of the output.</span><span>
</span><span id="line-78"></span><span class="hs-keyword">data</span><span> </span><span id="TypedScriptTxOutRef"><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#TypedScriptTxOutRef"><span class="hs-identifier hs-var">TypedScriptTxOutRef</span></a></span></span><span> </span><span id="local-6989586621679365856"><span class="annot"><a href="#local-6989586621679365856"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TypedScriptTxOutRef"><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#TypedScriptTxOutRef"><span class="hs-identifier hs-var">TypedScriptTxOutRef</span></a></span></span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="tyTxOutRefRef"><span class="annot"><span class="annottext">TypedScriptTxOutRef a -&gt; TxOutRef
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutRefRef"><span class="hs-identifier hs-var hs-var">tyTxOutRefRef</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">TxOutRef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>    </span><span id="tyTxOutRefOut"><span class="annot"><span class="annottext">TypedScriptTxOutRef a -&gt; TypedScriptTxOut a
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutRefOut"><span class="hs-identifier hs-var hs-var">tyTxOutRefOut</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#TypedScriptTxOut"><span class="hs-identifier hs-type">TypedScriptTxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365856"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span id="local-6989586621679365795"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679365792"><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.Typed.html#DatumType"><span class="hs-identifier hs-type">DatumType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365795"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#TypedScriptTxOutRef"><span class="hs-identifier hs-type">TypedScriptTxOutRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365795"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-84"></span><span>  </span><span id="local-6989586621679365791"><span class="annot"><span class="annottext">TypedScriptTxOutRef a
</span><a href="#local-6989586621679365791"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679365790"><span class="annot"><span class="annottext">== :: TypedScriptTxOutRef a -&gt; TypedScriptTxOutRef a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></a></span></span><span> </span><span id="local-6989586621679365789"><span class="annot"><span class="annottext">TypedScriptTxOutRef a
</span><a href="#local-6989586621679365789"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-85"></span><span>    </span><span class="annot"><span class="annottext">TypedScriptTxOutRef a -&gt; TxOutRef
forall a. TypedScriptTxOutRef a -&gt; TxOutRef
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutRefRef"><span class="hs-identifier hs-var hs-var">tyTxOutRefRef</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOutRef a
</span><a href="#local-6989586621679365791"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef -&gt; TxOutRef -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOutRef a -&gt; TxOutRef
forall a. TypedScriptTxOutRef a -&gt; TxOutRef
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutRefRef"><span class="hs-identifier hs-var hs-var">tyTxOutRefRef</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOutRef a
</span><a href="#local-6989586621679365789"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-86"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOutRef a -&gt; TypedScriptTxOut a
forall a. TypedScriptTxOutRef a -&gt; TypedScriptTxOut a
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutRefOut"><span class="hs-identifier hs-var hs-var">tyTxOutRefOut</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOutRef a
</span><a href="#local-6989586621679365791"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOut a -&gt; TypedScriptTxOut a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOutRef a -&gt; TypedScriptTxOut a
forall a. TypedScriptTxOutRef a -&gt; TypedScriptTxOut a
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#tyTxOutRefOut"><span class="hs-identifier hs-var hs-var">tyTxOutRefOut</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOutRef a
</span><a href="#local-6989586621679365789"><span class="hs-identifier hs-var">r</span></a></span></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-comment">-- | Create a 'TypedScriptTxOut' from an existing 'TxOut' by checking the types of its parts.</span><span>
</span><span id="line-89"></span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#typeScriptTxOut"><span class="hs-identifier hs-type">typeScriptTxOut</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679365836"><span class="annot"><a href="#local-6989586621679365836"><span class="hs-identifier hs-type">out</span></a></span></span><span> </span><span id="local-6989586621679365835"><span class="annot"><a href="#local-6989586621679365835"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-type">FromData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.Typed.html#DatumType"><span class="hs-identifier hs-type">DatumType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365836"><span class="hs-identifier hs-type">out</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>    </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-type">ToData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.Typed.html#DatumType"><span class="hs-identifier hs-type">DatumType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365836"><span class="hs-identifier hs-type">out</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier hs-type">MonadError</span></a></span><span> </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.Validators.html#ConnectionError"><span class="hs-identifier hs-type">ConnectionError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365835"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-95"></span><span>  </span><span class="annot"><a href="Plutus.Script.Utils.Typed.html#TypedValidator"><span class="hs-identifier hs-type">TypedValidator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365836"><span class="hs-identifier hs-type">out</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-96"></span><span>  </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">TxOutRef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-97"></span><span>  </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-98"></span><span>  </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Datum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-99"></span><span>  </span><span class="annot"><a href="#local-6989586621679365835"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#TypedScriptTxOut"><span class="hs-identifier hs-type">TypedScriptTxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365836"><span class="hs-identifier hs-type">out</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span id="typeScriptTxOut"><span class="annot"><span class="annottext">typeScriptTxOut :: TypedValidator out
-&gt; TxOutRef -&gt; TxOut -&gt; Datum -&gt; m (TypedScriptTxOut out)
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#typeScriptTxOut"><span class="hs-identifier hs-var hs-var">typeScriptTxOut</span></a></span></span><span> </span><span id="local-6989586621679365788"><span class="annot"><span class="annottext">TypedValidator out
</span><a href="#local-6989586621679365788"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621679365787"><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679365787"><span class="hs-identifier hs-var">txOutRef</span></a></span></span><span> </span><span id="local-6989586621679365786"><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621679365786"><span class="hs-identifier hs-var">txOut</span></a></span></span><span> </span><span id="local-6989586621679365785"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679365785"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Address -&gt; Credential
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var hs-var">addressCredential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOut -&gt; Address
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var hs-var">txOutAddress</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621679365786"><span class="hs-identifier hs-var">txOut</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-102"></span><span>    </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">PubKeyCredential</span></a></span><span> </span><span class="annot"><span class="annottext">PubKeyHash
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-103"></span><span>      </span><span class="annot"><span class="annottext">ConnectionError -&gt; m (TypedScriptTxOut out)
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="annot"><span class="annottext">(ConnectionError -&gt; m (TypedScriptTxOut out))
-&gt; ConnectionError -&gt; m (TypedScriptTxOut out)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">WrongOutTypeError -&gt; ConnectionError
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.Validators.html#WrongOutType"><span class="hs-identifier hs-var">WrongOutType</span></a></span><span> </span><span class="annot"><span class="annottext">WrongOutTypeError
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.Validators.html#ExpectedScriptGotPubkey"><span class="hs-identifier hs-var">ExpectedScriptGotPubkey</span></a></span><span>
</span><span id="line-104"></span><span>    </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">ScriptCredential</span></a></span><span> </span><span id="local-6989586621679365782"><span class="annot"><span class="annottext">ValidatorHash
</span><a href="#local-6989586621679365782"><span class="hs-identifier hs-var">_vh</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-105"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; Maybe DatumHash
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var hs-var">txOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621679365786"><span class="hs-identifier hs-var">txOut</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-106"></span><span>        </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679365781"><span class="annot"><span class="annottext">DatumHash
</span><a href="#local-6989586621679365781"><span class="hs-identifier hs-var">dh</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Datum -&gt; DatumHash
</span><a href="Plutus.Script.Utils.Scripts.html#datumHash"><span class="hs-identifier hs-var">datumHash</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679365785"><span class="hs-identifier hs-var">datum</span></a></span><span> </span><span class="annot"><span class="annottext">DatumHash -&gt; DatumHash -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">DatumHash
</span><a href="#local-6989586621679365781"><span class="hs-identifier hs-var">dh</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-107"></span><span>          </span><span class="annot"><span class="annottext">TypedValidator out -&gt; Address -&gt; m ()
forall a (m :: * -&gt; *).
MonadError ConnectionError m =&gt;
TypedValidator a -&gt; Address -&gt; m ()
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.Validators.html#checkValidatorAddress"><span class="hs-identifier hs-var">checkValidatorAddress</span></a></span><span> </span><span class="annot"><span class="annottext">TypedValidator out
</span><a href="#local-6989586621679365788"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOut -&gt; Address
</span><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-var hs-var">txOutAddress</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621679365786"><span class="hs-identifier hs-var">txOut</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>          </span><span id="local-6989586621679365779"><span class="annot"><span class="annottext">DatumType out
</span><a href="#local-6989586621679365779"><span class="hs-identifier hs-var">dsVal</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TypedValidator out -&gt; Datum -&gt; m (DatumType out)
forall a (m :: * -&gt; *).
(FromData (DatumType a), MonadError ConnectionError m) =&gt;
TypedValidator a -&gt; Datum -&gt; m (DatumType a)
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.Validators.html#checkDatum"><span class="hs-identifier hs-var">checkDatum</span></a></span><span> </span><span class="annot"><span class="annottext">TypedValidator out
</span><a href="#local-6989586621679365788"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679365785"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-109"></span><span>          </span><span class="annot"><span class="annottext">TypedScriptTxOut out -&gt; m (TypedScriptTxOut out)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(TypedScriptTxOut out -&gt; m (TypedScriptTxOut out))
-&gt; TypedScriptTxOut out -&gt; m (TypedScriptTxOut out)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; DatumType out -&gt; TypedScriptTxOut out
forall a.
(FromData (DatumType a), ToData (DatumType a)) =&gt;
TxOut -&gt; DatumType a -&gt; TypedScriptTxOut a
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#TypedScriptTxOut"><span class="hs-identifier hs-var">TypedScriptTxOut</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679365836"><span class="hs-identifier hs-type">out</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621679365786"><span class="hs-identifier hs-var">txOut</span></a></span><span> </span><span class="annot"><span class="annottext">DatumType out
</span><a href="#local-6989586621679365779"><span class="hs-identifier hs-var">dsVal</span></a></span><span>
</span><span id="line-110"></span><span>        </span><span class="annot"><span class="annottext">Maybe DatumHash
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConnectionError -&gt; m (TypedScriptTxOut out)
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="annot"><span class="annottext">(ConnectionError -&gt; m (TypedScriptTxOut out))
-&gt; ConnectionError -&gt; m (TypedScriptTxOut out)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef -&gt; DatumHash -&gt; ConnectionError
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.Validators.html#NoDatum"><span class="hs-identifier hs-var">NoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679365787"><span class="hs-identifier hs-var">txOutRef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Datum -&gt; DatumHash
</span><a href="Plutus.Script.Utils.Scripts.html#datumHash"><span class="hs-identifier hs-var">datumHash</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679365785"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="hs-comment">-- | Create a 'TypedScriptTxOut' from an existing 'TxOut' by checking the types of its parts.</span><span>
</span><span id="line-113"></span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#typeScriptTxOutRef"><span class="hs-identifier hs-type">typeScriptTxOutRef</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679365776"><span class="annot"><a href="#local-6989586621679365776"><span class="hs-identifier hs-type">out</span></a></span></span><span> </span><span id="local-6989586621679365775"><span class="annot"><a href="#local-6989586621679365775"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-type">FromData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.Typed.html#DatumType"><span class="hs-identifier hs-type">DatumType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365776"><span class="hs-identifier hs-type">out</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>    </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-type">ToData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.Typed.html#DatumType"><span class="hs-identifier hs-type">DatumType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365776"><span class="hs-identifier hs-type">out</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>    </span><span class="annot"><a href="../file:///nix/store/50z9mfcyab831xv3ljzrgw24b0c22y3g-mtl-lib-mtl-2.2.2-haddock-doc/share/doc/mtl/html/src"><span class="hs-identifier hs-type">MonadError</span></a></span><span> </span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.Validators.html#ConnectionError"><span class="hs-identifier hs-type">ConnectionError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365775"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-119"></span><span>  </span><span class="annot"><a href="Plutus.Script.Utils.Typed.html#TypedValidator"><span class="hs-identifier hs-type">TypedValidator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365776"><span class="hs-identifier hs-type">out</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-120"></span><span>  </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">TxOutRef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-121"></span><span>  </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-122"></span><span>  </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Datum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-123"></span><span>  </span><span class="annot"><a href="#local-6989586621679365775"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#TypedScriptTxOutRef"><span class="hs-identifier hs-type">TypedScriptTxOutRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679365776"><span class="hs-identifier hs-type">out</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span id="typeScriptTxOutRef"><span class="annot"><span class="annottext">typeScriptTxOutRef :: TypedValidator out
-&gt; TxOutRef -&gt; TxOut -&gt; Datum -&gt; m (TypedScriptTxOutRef out)
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#typeScriptTxOutRef"><span class="hs-identifier hs-var hs-var">typeScriptTxOutRef</span></a></span></span><span> </span><span id="local-6989586621679365774"><span class="annot"><span class="annottext">TypedValidator out
</span><a href="#local-6989586621679365774"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621679365773"><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679365773"><span class="hs-identifier hs-var">txOutRef</span></a></span></span><span> </span><span id="local-6989586621679365772"><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621679365772"><span class="hs-identifier hs-var">txOut</span></a></span></span><span> </span><span id="local-6989586621679365771"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679365771"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-125"></span><span>  </span><span id="local-6989586621679365770"><span class="annot"><span class="annottext">TypedScriptTxOut out
</span><a href="#local-6989586621679365770"><span class="hs-identifier hs-var">tyOut</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TypedValidator out
-&gt; TxOutRef -&gt; TxOut -&gt; Datum -&gt; m (TypedScriptTxOut out)
forall out (m :: * -&gt; *).
(FromData (DatumType out), ToData (DatumType out),
 MonadError ConnectionError m) =&gt;
TypedValidator out
-&gt; TxOutRef -&gt; TxOut -&gt; Datum -&gt; m (TypedScriptTxOut out)
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#typeScriptTxOut"><span class="hs-identifier hs-var">typeScriptTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">TypedValidator out
</span><a href="#local-6989586621679365774"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679365773"><span class="hs-identifier hs-var">txOutRef</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621679365772"><span class="hs-identifier hs-var">txOut</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679365771"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-126"></span><span>  </span><span class="annot"><span class="annottext">TypedScriptTxOutRef out -&gt; m (TypedScriptTxOutRef out)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(TypedScriptTxOutRef out -&gt; m (TypedScriptTxOutRef out))
-&gt; TypedScriptTxOutRef out -&gt; m (TypedScriptTxOutRef out)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef -&gt; TypedScriptTxOut out -&gt; TypedScriptTxOutRef out
forall a. TxOutRef -&gt; TypedScriptTxOut a -&gt; TypedScriptTxOutRef a
</span><a href="Plutus.Script.Utils.V1.Typed.Scripts.html#TypedScriptTxOutRef"><span class="hs-identifier hs-var">TypedScriptTxOutRef</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679365773"><span class="hs-identifier hs-var">txOutRef</span></a></span><span> </span><span class="annot"><span class="annottext">TypedScriptTxOut out
</span><a href="#local-6989586621679365770"><span class="hs-identifier hs-var">tyOut</span></a></span><span>
</span><span id="line-127"></span></pre></body></html>
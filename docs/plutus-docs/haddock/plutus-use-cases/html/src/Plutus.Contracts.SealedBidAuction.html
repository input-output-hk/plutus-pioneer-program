<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds          #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass     #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric      #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DerivingVia        #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts   #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE GADTs              #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase         #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns     #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE NoImplicitPrelude  #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE NumericUnderscores #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings  #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards    #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell    #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications   #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators      #-}</span><span>
</span><span id="line-16"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Plutus.Contracts.SealedBidAuction</span><span class="hs-special">(</span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier">AuctionParams</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#BidArgs"><span class="hs-identifier">BidArgs</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#RevealArgs"><span class="hs-identifier">RevealArgs</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionError"><span class="hs-identifier">AuctionError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#BidderSchema"><span class="hs-identifier">BidderSchema</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#SellerSchema"><span class="hs-identifier">SellerSchema</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#startAuction"><span class="hs-identifier">startAuction</span></a></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#bid"><span class="hs-identifier">bid</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#reveal"><span class="hs-identifier">reveal</span></a></span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#payout"><span class="hs-identifier">payout</span></a></span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#packInteger"><span class="hs-identifier">packInteger</span></a></span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#sellerContract"><span class="hs-identifier">sellerContract</span></a></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#bidderContract"><span class="hs-identifier">bidderContract</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">Control.Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/lwkxqy8dgzjvz62gfx89dnvl9mm03scy-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier">makeClassyPrisms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">void</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">FromJSON</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier">ToJSON</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Generics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">Address</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">POSIXTime</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier">Value</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">toPlutusAddress</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Ada</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ada</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier">Ledger.Constraints</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Constraints</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier">Ledger.Constraints.TxConstraints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier">TxConstraints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier">Ledger.Constraints.ValidityInterval</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Interval</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Typed.Scripts</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Scripts</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier">Ledger.Value</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Value</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier">Plutus.Contract</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier">Plutus.Contract.Secrets</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier">Plutus.Contract.StateMachine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier">State</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier">StateMachine</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier">StateMachineClient</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Void</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier">Plutus.Contract.StateMachine</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SM</span></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier">PlutusTx</span></a></span><span> </span><span class="hs-keyword">qualified</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier">PlutusTx.Prelude</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Prelude</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Haskell</span></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-comment">{- Note [Sealed bid auction disclaimer]
   This file implements a sealed bid auction using `SecretArgument`s. In the bidding
   phase of the contract sealed bids appear hashed on the blockchain and hashed
   bids are &quot;claimed&quot; by the participants in the second phase of the auction.

   Because bids are integer lovelace values there is the faint possibility of a
   brute-force attack or lookup table attack on the bids in the bidding phase. An
   implementation intended to be deployed in the real world may consider adding a
   salt to the secret bids or using some other more sophisticated mechanism to
   avoid this attack. In other words, please don't blindly deploy this code
   without understanding the possible attack scenarios.
 -}</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span id="local-6989586621680977879"><span id="local-6989586621680977880"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="BidArgs"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#BidArgs"><span class="hs-identifier hs-var">BidArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BidArgs"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#BidArgs"><span class="hs-identifier hs-var">BidArgs</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="secretBid"><span class="annot"><span class="annottext">BidArgs -&gt; SecretArgument Integer
</span><a href="Plutus.Contracts.SealedBidAuction.html#secretBid"><span class="hs-identifier hs-var hs-var">secretBid</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">SecretArgument</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/integer-gmp-1.0.3.0/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-65"></span><span>          </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977871"><span id="local-6989586621680977873"><span id="local-6989586621680977875"><span class="annot"><span class="annottext">Int -&gt; BidArgs -&gt; ShowS
[BidArgs] -&gt; ShowS
BidArgs -&gt; String
(Int -&gt; BidArgs -&gt; ShowS)
-&gt; (BidArgs -&gt; String) -&gt; ([BidArgs] -&gt; ShowS) -&gt; Show BidArgs
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [BidArgs] -&gt; ShowS
$cshowList :: [BidArgs] -&gt; ShowS
show :: BidArgs -&gt; String
$cshow :: BidArgs -&gt; String
showsPrec :: Int -&gt; BidArgs -&gt; ShowS
$cshowsPrec :: Int -&gt; BidArgs -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Haskell.Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. BidArgs -&gt; Rep BidArgs x)
-&gt; (forall x. Rep BidArgs x -&gt; BidArgs) -&gt; Generic BidArgs
forall x. Rep BidArgs x -&gt; BidArgs
forall x. BidArgs -&gt; Rep BidArgs x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep BidArgs x -&gt; BidArgs
$cfrom :: forall x. BidArgs -&gt; Rep BidArgs x
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>          </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977859"><span id="local-6989586621680977861"><span id="local-6989586621680977863"><span id="local-6989586621680977865"><span class="annot"><span class="annottext">[BidArgs] -&gt; Encoding
[BidArgs] -&gt; Value
BidArgs -&gt; Encoding
BidArgs -&gt; Value
(BidArgs -&gt; Value)
-&gt; (BidArgs -&gt; Encoding)
-&gt; ([BidArgs] -&gt; Value)
-&gt; ([BidArgs] -&gt; Encoding)
-&gt; ToJSON BidArgs
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [BidArgs] -&gt; Encoding
$ctoEncodingList :: [BidArgs] -&gt; Encoding
toJSONList :: [BidArgs] -&gt; Value
$ctoJSONList :: [BidArgs] -&gt; Value
toEncoding :: BidArgs -&gt; Encoding
$ctoEncoding :: BidArgs -&gt; Encoding
toJSON :: BidArgs -&gt; Value
$ctoJSON :: BidArgs -&gt; Value
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977854"><span id="local-6989586621680977856"><span class="annot"><span class="annottext">Value -&gt; Parser [BidArgs]
Value -&gt; Parser BidArgs
(Value -&gt; Parser BidArgs)
-&gt; (Value -&gt; Parser [BidArgs]) -&gt; FromJSON BidArgs
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [BidArgs]
$cparseJSONList :: Value -&gt; Parser [BidArgs]
parseJSON :: Value -&gt; Parser BidArgs
$cparseJSON :: Value -&gt; Parser BidArgs
</span><a href="../file:///nix/store/2m29g1mlr4lg9v93x77b5w3l6pyhq2vj-aeson-lib-aeson-2.0.2.0-haddock-doc/share/doc/aeson/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span id="local-6989586621680977851"><span id="local-6989586621680977852"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="RevealArgs"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#RevealArgs"><span class="hs-identifier hs-var">RevealArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RevealArgs"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#RevealArgs"><span class="hs-identifier hs-var">RevealArgs</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="publicBid"><span class="annot"><span class="annottext">RevealArgs -&gt; Integer
</span><a href="Plutus.Contracts.SealedBidAuction.html#publicBid"><span class="hs-identifier hs-var hs-var">publicBid</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/integer-gmp-1.0.3.0/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-69"></span><span>          </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977843"><span id="local-6989586621680977845"><span id="local-6989586621680977847"><span class="annot"><span class="annottext">Int -&gt; RevealArgs -&gt; ShowS
[RevealArgs] -&gt; ShowS
RevealArgs -&gt; String
(Int -&gt; RevealArgs -&gt; ShowS)
-&gt; (RevealArgs -&gt; String)
-&gt; ([RevealArgs] -&gt; ShowS)
-&gt; Show RevealArgs
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [RevealArgs] -&gt; ShowS
$cshowList :: [RevealArgs] -&gt; ShowS
show :: RevealArgs -&gt; String
$cshow :: RevealArgs -&gt; String
showsPrec :: Int -&gt; RevealArgs -&gt; ShowS
$cshowsPrec :: Int -&gt; RevealArgs -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Haskell.Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. RevealArgs -&gt; Rep RevealArgs x)
-&gt; (forall x. Rep RevealArgs x -&gt; RevealArgs) -&gt; Generic RevealArgs
forall x. Rep RevealArgs x -&gt; RevealArgs
forall x. RevealArgs -&gt; Rep RevealArgs x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep RevealArgs x -&gt; RevealArgs
$cfrom :: forall x. RevealArgs -&gt; Rep RevealArgs x
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>          </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977833"><span id="local-6989586621680977835"><span id="local-6989586621680977837"><span id="local-6989586621680977839"><span class="annot"><span class="annottext">[RevealArgs] -&gt; Encoding
[RevealArgs] -&gt; Value
RevealArgs -&gt; Encoding
RevealArgs -&gt; Value
(RevealArgs -&gt; Value)
-&gt; (RevealArgs -&gt; Encoding)
-&gt; ([RevealArgs] -&gt; Value)
-&gt; ([RevealArgs] -&gt; Encoding)
-&gt; ToJSON RevealArgs
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [RevealArgs] -&gt; Encoding
$ctoEncodingList :: [RevealArgs] -&gt; Encoding
toJSONList :: [RevealArgs] -&gt; Value
$ctoJSONList :: [RevealArgs] -&gt; Value
toEncoding :: RevealArgs -&gt; Encoding
$ctoEncoding :: RevealArgs -&gt; Encoding
toJSON :: RevealArgs -&gt; Value
$ctoJSON :: RevealArgs -&gt; Value
</span><a href="#local-6989586621680977833"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977829"><span id="local-6989586621680977831"><span class="annot"><span class="annottext">Value -&gt; Parser [RevealArgs]
Value -&gt; Parser RevealArgs
(Value -&gt; Parser RevealArgs)
-&gt; (Value -&gt; Parser [RevealArgs]) -&gt; FromJSON RevealArgs
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [RevealArgs]
$cparseJSONList :: Value -&gt; Parser [RevealArgs]
parseJSON :: Value -&gt; Parser RevealArgs
$cparseJSON :: Value -&gt; Parser RevealArgs
</span><a href="#local-6989586621680977829"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">type</span><span> </span><span id="BidderSchema"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#BidderSchema"><span class="hs-identifier hs-var">BidderSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">Endpoint</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;bid&quot;</span></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#BidArgs"><span class="hs-identifier hs-type">BidArgs</span></a></span><span>
</span><span id="line-73"></span><span>                    </span><span class="annot"><a href="../file:///nix/store/g8vgm61qs4g5v6yyv8hvi8bm9dvsf9sa-row-types-lib-row-types-1.0.1.2-haddock-doc/share/doc/row-types/html/src"><span class="hs-operator hs-type">.\/</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">Endpoint</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;reveal&quot;</span></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#RevealArgs"><span class="hs-identifier hs-type">RevealArgs</span></a></span><span>
</span><span id="line-74"></span><span>                    </span><span class="annot"><a href="../file:///nix/store/g8vgm61qs4g5v6yyv8hvi8bm9dvsf9sa-row-types-lib-row-types-1.0.1.2-haddock-doc/share/doc/row-types/html/src"><span class="hs-operator hs-type">.\/</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">Endpoint</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;payout&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">type</span><span> </span><span id="SellerSchema"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#SellerSchema"><span class="hs-identifier hs-var">SellerSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">Endpoint</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;payout&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-comment">-- | Definition of an auction</span><span>
</span><span id="line-78"></span><span id="local-6989586621680977825"><span id="local-6989586621680977826"></span></span><span class="hs-keyword">data</span><span> </span><span id="AuctionParams"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier hs-var">AuctionParams</span></a></span></span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="AuctionParams"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier hs-var">AuctionParams</span></a></span></span><span>
</span><span id="line-80"></span><span>        </span><span class="hs-special">{</span><span> </span><span id="apOwner"><span class="annot"><span class="annottext">AuctionParams -&gt; Address
</span><a href="Plutus.Contracts.SealedBidAuction.html#apOwner"><span class="hs-identifier hs-var hs-var">apOwner</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Address</span></a></span><span> </span><span class="hs-comment">-- ^ Current owner of the asset. This is where the proceeds of the auction will be sent.</span><span>
</span><span id="line-81"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="apAsset"><span class="annot"><span class="annottext">AuctionParams -&gt; Value
</span><a href="Plutus.Contracts.SealedBidAuction.html#apAsset"><span class="hs-identifier hs-var hs-var">apAsset</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-comment">-- ^ The asset itself. This value is going to be locked by the auction script output.</span><span>
</span><span id="line-82"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="apEndTime"><span class="annot"><span class="annottext">AuctionParams -&gt; POSIXTime
</span><a href="Plutus.Contracts.SealedBidAuction.html#apEndTime"><span class="hs-identifier hs-var hs-var">apEndTime</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">POSIXTime</span></a></span><span> </span><span class="hs-comment">-- ^ When the time window for bidding ends.</span><span>
</span><span id="line-83"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="apPayoutTime"><span class="annot"><span class="annottext">AuctionParams -&gt; POSIXTime
</span><a href="Plutus.Contracts.SealedBidAuction.html#apPayoutTime"><span class="hs-identifier hs-var hs-var">apPayoutTime</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">POSIXTime</span></a></span><span> </span><span class="hs-comment">-- ^ When the time window for revealing your bid ends.</span><span>
</span><span id="line-84"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-85"></span><span>        </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977816"><span id="local-6989586621680977818"><span class="annot"><span class="annottext">AuctionParams -&gt; AuctionParams -&gt; Bool
(AuctionParams -&gt; AuctionParams -&gt; Bool)
-&gt; (AuctionParams -&gt; AuctionParams -&gt; Bool) -&gt; Eq AuctionParams
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: AuctionParams -&gt; AuctionParams -&gt; Bool
$c/= :: AuctionParams -&gt; AuctionParams -&gt; Bool
== :: AuctionParams -&gt; AuctionParams -&gt; Bool
$c== :: AuctionParams -&gt; AuctionParams -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Haskell.Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977809"><span id="local-6989586621680977811"><span id="local-6989586621680977813"><span class="annot"><span class="annottext">Int -&gt; AuctionParams -&gt; ShowS
[AuctionParams] -&gt; ShowS
AuctionParams -&gt; String
(Int -&gt; AuctionParams -&gt; ShowS)
-&gt; (AuctionParams -&gt; String)
-&gt; ([AuctionParams] -&gt; ShowS)
-&gt; Show AuctionParams
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [AuctionParams] -&gt; ShowS
$cshowList :: [AuctionParams] -&gt; ShowS
show :: AuctionParams -&gt; String
$cshow :: AuctionParams -&gt; String
showsPrec :: Int -&gt; AuctionParams -&gt; ShowS
$cshowsPrec :: Int -&gt; AuctionParams -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Haskell.Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. AuctionParams -&gt; Rep AuctionParams x)
-&gt; (forall x. Rep AuctionParams x -&gt; AuctionParams)
-&gt; Generic AuctionParams
forall x. Rep AuctionParams x -&gt; AuctionParams
forall x. AuctionParams -&gt; Rep AuctionParams x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep AuctionParams x -&gt; AuctionParams
$cfrom :: forall x. AuctionParams -&gt; Rep AuctionParams x
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>        </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977799"><span id="local-6989586621680977801"><span id="local-6989586621680977803"><span id="local-6989586621680977805"><span class="annot"><span class="annottext">[AuctionParams] -&gt; Encoding
[AuctionParams] -&gt; Value
AuctionParams -&gt; Encoding
AuctionParams -&gt; Value
(AuctionParams -&gt; Value)
-&gt; (AuctionParams -&gt; Encoding)
-&gt; ([AuctionParams] -&gt; Value)
-&gt; ([AuctionParams] -&gt; Encoding)
-&gt; ToJSON AuctionParams
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [AuctionParams] -&gt; Encoding
$ctoEncodingList :: [AuctionParams] -&gt; Encoding
toJSONList :: [AuctionParams] -&gt; Value
$ctoJSONList :: [AuctionParams] -&gt; Value
toEncoding :: AuctionParams -&gt; Encoding
$ctoEncoding :: AuctionParams -&gt; Encoding
toJSON :: AuctionParams -&gt; Value
$ctoJSON :: AuctionParams -&gt; Value
</span><a href="#local-6989586621680977799"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977795"><span id="local-6989586621680977797"><span class="annot"><span class="annottext">Value -&gt; Parser [AuctionParams]
Value -&gt; Parser AuctionParams
(Value -&gt; Parser AuctionParams)
-&gt; (Value -&gt; Parser [AuctionParams]) -&gt; FromJSON AuctionParams
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [AuctionParams]
$cparseJSONList :: Value -&gt; Parser [AuctionParams]
parseJSON :: Value -&gt; Parser AuctionParams
$cparseJSON :: Value -&gt; Parser AuctionParams
</span><a href="#local-6989586621680977795"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span id="local-6989586621680977791"><span id="local-6989586621680977793"><span class="hs-identifier">PlutusTx.makeLift</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">AuctionParams</span></span></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span id="local-6989586621680977785"><span id="local-6989586621680977786"></span></span><span class="hs-keyword">data</span><span> </span><span id="SealedBid"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#SealedBid"><span class="hs-identifier hs-var">SealedBid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-92"></span><span>    </span><span id="SealedBid"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#SealedBid"><span class="hs-identifier hs-var">SealedBid</span></a></span></span><span>
</span><span id="line-93"></span><span>        </span><span class="hs-special">{</span><span> </span><span id="sealedBid"><span class="annot"><span class="annottext">SealedBid -&gt; BuiltinByteString
</span><a href="Plutus.Contracts.SealedBidAuction.html#sealedBid"><span class="hs-identifier hs-var hs-var">sealedBid</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-type">BuiltinByteString</span></a></span><span>
</span><span id="line-94"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="sealedBidBidder"><span class="annot"><span class="annottext">SealedBid -&gt; Address
</span><a href="Plutus.Contracts.SealedBidAuction.html#sealedBidBidder"><span class="hs-identifier hs-var hs-var">sealedBidBidder</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Address</span></a></span><span>
</span><span id="line-95"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977778"><span id="local-6989586621680977780"><span class="annot"><span class="annottext">SealedBid -&gt; SealedBid -&gt; Bool
(SealedBid -&gt; SealedBid -&gt; Bool)
-&gt; (SealedBid -&gt; SealedBid -&gt; Bool) -&gt; Eq SealedBid
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: SealedBid -&gt; SealedBid -&gt; Bool
$c/= :: SealedBid -&gt; SealedBid -&gt; Bool
== :: SealedBid -&gt; SealedBid -&gt; Bool
$c== :: SealedBid -&gt; SealedBid -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Haskell.Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977772"><span id="local-6989586621680977774"><span id="local-6989586621680977776"><span class="annot"><span class="annottext">Int -&gt; SealedBid -&gt; ShowS
[SealedBid] -&gt; ShowS
SealedBid -&gt; String
(Int -&gt; SealedBid -&gt; ShowS)
-&gt; (SealedBid -&gt; String)
-&gt; ([SealedBid] -&gt; ShowS)
-&gt; Show SealedBid
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [SealedBid] -&gt; ShowS
$cshowList :: [SealedBid] -&gt; ShowS
show :: SealedBid -&gt; String
$cshow :: SealedBid -&gt; String
showsPrec :: Int -&gt; SealedBid -&gt; ShowS
$cshowsPrec :: Int -&gt; SealedBid -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Haskell.Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. SealedBid -&gt; Rep SealedBid x)
-&gt; (forall x. Rep SealedBid x -&gt; SealedBid) -&gt; Generic SealedBid
forall x. Rep SealedBid x -&gt; SealedBid
forall x. SealedBid -&gt; Rep SealedBid x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep SealedBid x -&gt; SealedBid
$cfrom :: forall x. SealedBid -&gt; Rep SealedBid x
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977762"><span id="local-6989586621680977764"><span id="local-6989586621680977766"><span id="local-6989586621680977768"><span class="annot"><span class="annottext">[SealedBid] -&gt; Encoding
[SealedBid] -&gt; Value
SealedBid -&gt; Encoding
SealedBid -&gt; Value
(SealedBid -&gt; Value)
-&gt; (SealedBid -&gt; Encoding)
-&gt; ([SealedBid] -&gt; Value)
-&gt; ([SealedBid] -&gt; Encoding)
-&gt; ToJSON SealedBid
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [SealedBid] -&gt; Encoding
$ctoEncodingList :: [SealedBid] -&gt; Encoding
toJSONList :: [SealedBid] -&gt; Value
$ctoJSONList :: [SealedBid] -&gt; Value
toEncoding :: SealedBid -&gt; Encoding
$ctoEncoding :: SealedBid -&gt; Encoding
toJSON :: SealedBid -&gt; Value
$ctoJSON :: SealedBid -&gt; Value
</span><a href="#local-6989586621680977762"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977758"><span id="local-6989586621680977760"><span class="annot"><span class="annottext">Value -&gt; Parser [SealedBid]
Value -&gt; Parser SealedBid
(Value -&gt; Parser SealedBid)
-&gt; (Value -&gt; Parser [SealedBid]) -&gt; FromJSON SealedBid
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [SealedBid]
$cparseJSONList :: Value -&gt; Parser [SealedBid]
parseJSON :: Value -&gt; Parser SealedBid
$cparseJSON :: Value -&gt; Parser SealedBid
</span><a href="#local-6989586621680977758"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span id="local-6989586621680977752"><span id="local-6989586621680977754"><span id="local-6989586621680977756"><span class="hs-identifier">PlutusTx.unstableMakeIsData</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">SealedBid</span></span></span></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#SealedBid"><span class="hs-identifier hs-type">SealedBid</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#SealedBid"><span class="hs-identifier hs-type">SealedBid</span></a></span><span> </span><span id="local-6989586621680977743"><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621680977743"><span class="hs-identifier hs-var">bid</span></a></span></span><span> </span><span id="local-6989586621680977742"><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621680977742"><span class="hs-identifier hs-var">bidder</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680977741"><span class="annot"><span class="annottext">== :: SealedBid -&gt; SealedBid -&gt; Bool
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#SealedBid"><span class="hs-identifier hs-type">SealedBid</span></a></span><span> </span><span id="local-6989586621680977739"><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621680977739"><span class="hs-identifier hs-var">bid'</span></a></span></span><span> </span><span id="local-6989586621680977738"><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621680977738"><span class="hs-identifier hs-var">bidder'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621680977743"><span class="hs-identifier hs-var">bid</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinByteString -&gt; BuiltinByteString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621680977739"><span class="hs-identifier hs-var">bid'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621680977742"><span class="hs-identifier hs-var">bidder</span></a></span><span> </span><span class="annot"><span class="annottext">Address -&gt; Address -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621680977738"><span class="hs-identifier hs-var">bidder'</span></a></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span id="local-6989586621680977735"><span id="local-6989586621680977736"></span></span><span class="hs-keyword">data</span><span> </span><span id="RevealedBid"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#RevealedBid"><span class="hs-identifier hs-var">RevealedBid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-105"></span><span>    </span><span id="RevealedBid"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#RevealedBid"><span class="hs-identifier hs-var">RevealedBid</span></a></span></span><span>
</span><span id="line-106"></span><span>        </span><span class="hs-special">{</span><span> </span><span id="revealedBid"><span class="annot"><span class="annottext">RevealedBid -&gt; Integer
</span><a href="Plutus.Contracts.SealedBidAuction.html#revealedBid"><span class="hs-identifier hs-var hs-var">revealedBid</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/integer-gmp-1.0.3.0/src"><span class="hs-identifier hs-type">Integer</span></a></span><span>
</span><span id="line-107"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="revealedBidBidder"><span class="annot"><span class="annottext">RevealedBid -&gt; Address
</span><a href="Plutus.Contracts.SealedBidAuction.html#revealedBidBidder"><span class="hs-identifier hs-var hs-var">revealedBidBidder</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Address</span></a></span><span>
</span><span id="line-108"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977728"><span id="local-6989586621680977730"><span class="annot"><span class="annottext">RevealedBid -&gt; RevealedBid -&gt; Bool
(RevealedBid -&gt; RevealedBid -&gt; Bool)
-&gt; (RevealedBid -&gt; RevealedBid -&gt; Bool) -&gt; Eq RevealedBid
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: RevealedBid -&gt; RevealedBid -&gt; Bool
$c/= :: RevealedBid -&gt; RevealedBid -&gt; Bool
== :: RevealedBid -&gt; RevealedBid -&gt; Bool
$c== :: RevealedBid -&gt; RevealedBid -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Haskell.Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977722"><span id="local-6989586621680977724"><span id="local-6989586621680977726"><span class="annot"><span class="annottext">Int -&gt; RevealedBid -&gt; ShowS
[RevealedBid] -&gt; ShowS
RevealedBid -&gt; String
(Int -&gt; RevealedBid -&gt; ShowS)
-&gt; (RevealedBid -&gt; String)
-&gt; ([RevealedBid] -&gt; ShowS)
-&gt; Show RevealedBid
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [RevealedBid] -&gt; ShowS
$cshowList :: [RevealedBid] -&gt; ShowS
show :: RevealedBid -&gt; String
$cshow :: RevealedBid -&gt; String
showsPrec :: Int -&gt; RevealedBid -&gt; ShowS
$cshowsPrec :: Int -&gt; RevealedBid -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Haskell.Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. RevealedBid -&gt; Rep RevealedBid x)
-&gt; (forall x. Rep RevealedBid x -&gt; RevealedBid)
-&gt; Generic RevealedBid
forall x. Rep RevealedBid x -&gt; RevealedBid
forall x. RevealedBid -&gt; Rep RevealedBid x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep RevealedBid x -&gt; RevealedBid
$cfrom :: forall x. RevealedBid -&gt; Rep RevealedBid x
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977712"><span id="local-6989586621680977714"><span id="local-6989586621680977716"><span id="local-6989586621680977718"><span class="annot"><span class="annottext">[RevealedBid] -&gt; Encoding
[RevealedBid] -&gt; Value
RevealedBid -&gt; Encoding
RevealedBid -&gt; Value
(RevealedBid -&gt; Value)
-&gt; (RevealedBid -&gt; Encoding)
-&gt; ([RevealedBid] -&gt; Value)
-&gt; ([RevealedBid] -&gt; Encoding)
-&gt; ToJSON RevealedBid
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [RevealedBid] -&gt; Encoding
$ctoEncodingList :: [RevealedBid] -&gt; Encoding
toJSONList :: [RevealedBid] -&gt; Value
$ctoJSONList :: [RevealedBid] -&gt; Value
toEncoding :: RevealedBid -&gt; Encoding
$ctoEncoding :: RevealedBid -&gt; Encoding
toJSON :: RevealedBid -&gt; Value
$ctoJSON :: RevealedBid -&gt; Value
</span><a href="#local-6989586621680977712"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977708"><span id="local-6989586621680977710"><span class="annot"><span class="annottext">Value -&gt; Parser [RevealedBid]
Value -&gt; Parser RevealedBid
(Value -&gt; Parser RevealedBid)
-&gt; (Value -&gt; Parser [RevealedBid]) -&gt; FromJSON RevealedBid
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [RevealedBid]
$cparseJSONList :: Value -&gt; Parser [RevealedBid]
parseJSON :: Value -&gt; Parser RevealedBid
$cparseJSON :: Value -&gt; Parser RevealedBid
</span><a href="#local-6989586621680977708"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span id="local-6989586621680977702"><span id="local-6989586621680977704"><span id="local-6989586621680977706"><span class="hs-identifier">PlutusTx.unstableMakeIsData</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">RevealedBid</span></span></span></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="hs-comment">-- | The states of the auction</span><span>
</span><span id="line-115"></span><span id="local-6989586621680977700"><span id="local-6989586621680977701"></span></span><span class="hs-keyword">data</span><span> </span><span id="AuctionState"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionState"><span class="hs-identifier hs-var">AuctionState</span></a></span></span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="Ongoing"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#Ongoing"><span class="hs-identifier hs-var">Ongoing</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#SealedBid"><span class="hs-identifier hs-type">SealedBid</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- Bids can be submitted.</span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="AwaitingPayout"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AwaitingPayout"><span class="hs-identifier hs-var">AwaitingPayout</span></a></span></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#RevealedBid"><span class="hs-identifier hs-type">RevealedBid</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#SealedBid"><span class="hs-identifier hs-type">SealedBid</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- The bidding is finished and we are awaiting payout</span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Finished"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#Finished"><span class="hs-identifier hs-var">Finished</span></a></span></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. AuctionState -&gt; Rep AuctionState x)
-&gt; (forall x. Rep AuctionState x -&gt; AuctionState)
-&gt; Generic AuctionState
forall x. Rep AuctionState x -&gt; AuctionState
forall x. AuctionState -&gt; Rep AuctionState x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep AuctionState x -&gt; AuctionState
$cfrom :: forall x. AuctionState -&gt; Rep AuctionState x
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977689"><span id="local-6989586621680977691"><span id="local-6989586621680977693"><span class="annot"><span class="annottext">Int -&gt; AuctionState -&gt; ShowS
[AuctionState] -&gt; ShowS
AuctionState -&gt; String
(Int -&gt; AuctionState -&gt; ShowS)
-&gt; (AuctionState -&gt; String)
-&gt; ([AuctionState] -&gt; ShowS)
-&gt; Show AuctionState
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [AuctionState] -&gt; ShowS
$cshowList :: [AuctionState] -&gt; ShowS
show :: AuctionState -&gt; String
$cshow :: AuctionState -&gt; String
showsPrec :: Int -&gt; AuctionState -&gt; ShowS
$cshowsPrec :: Int -&gt; AuctionState -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Haskell.Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977685"><span id="local-6989586621680977687"><span class="annot"><span class="annottext">AuctionState -&gt; AuctionState -&gt; Bool
(AuctionState -&gt; AuctionState -&gt; Bool)
-&gt; (AuctionState -&gt; AuctionState -&gt; Bool) -&gt; Eq AuctionState
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: AuctionState -&gt; AuctionState -&gt; Bool
$c/= :: AuctionState -&gt; AuctionState -&gt; Bool
== :: AuctionState -&gt; AuctionState -&gt; Bool
$c== :: AuctionState -&gt; AuctionState -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Haskell.Eq</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977677"><span id="local-6989586621680977679"><span id="local-6989586621680977681"><span id="local-6989586621680977683"><span class="annot"><span class="annottext">[AuctionState] -&gt; Encoding
[AuctionState] -&gt; Value
AuctionState -&gt; Encoding
AuctionState -&gt; Value
(AuctionState -&gt; Value)
-&gt; (AuctionState -&gt; Encoding)
-&gt; ([AuctionState] -&gt; Value)
-&gt; ([AuctionState] -&gt; Encoding)
-&gt; ToJSON AuctionState
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [AuctionState] -&gt; Encoding
$ctoEncodingList :: [AuctionState] -&gt; Encoding
toJSONList :: [AuctionState] -&gt; Value
$ctoJSONList :: [AuctionState] -&gt; Value
toEncoding :: AuctionState -&gt; Encoding
$ctoEncoding :: AuctionState -&gt; Encoding
toJSON :: AuctionState -&gt; Value
$ctoJSON :: AuctionState -&gt; Value
</span><a href="#local-6989586621680977677"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977673"><span id="local-6989586621680977675"><span class="annot"><span class="annottext">Value -&gt; Parser [AuctionState]
Value -&gt; Parser AuctionState
(Value -&gt; Parser AuctionState)
-&gt; (Value -&gt; Parser [AuctionState]) -&gt; FromJSON AuctionState
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [AuctionState]
$cparseJSONList :: Value -&gt; Parser [AuctionState]
parseJSON :: Value -&gt; Parser AuctionState
$cparseJSON :: Value -&gt; Parser AuctionState
</span><a href="#local-6989586621680977673"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span id="local-6989586621680977667"><span id="local-6989586621680977669"><span id="local-6989586621680977671"><span class="hs-identifier">PlutusTx.unstableMakeIsData</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">AuctionState</span></span></span></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-comment">-- | Initial 'AuctionState'. In the beginning there are no bids.</span><span>
</span><span id="line-125"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#initialState"><span class="hs-identifier hs-type">initialState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionState"><span class="hs-identifier hs-type">AuctionState</span></a></span><span>
</span><span id="line-126"></span><span id="initialState"><span class="annot"><span class="annottext">initialState :: AuctionState
</span><a href="Plutus.Contracts.SealedBidAuction.html#initialState"><span class="hs-identifier hs-var hs-var">initialState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SealedBid] -&gt; AuctionState
</span><a href="Plutus.Contracts.SealedBidAuction.html#Ongoing"><span class="hs-identifier hs-var">Ongoing</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="hs-comment">-- | Transition between auction states</span><span>
</span><span id="line-129"></span><span id="local-6989586621680977664"><span id="local-6989586621680977665"></span></span><span class="hs-keyword">data</span><span> </span><span id="AuctionInput"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionInput"><span class="hs-identifier hs-var">AuctionInput</span></a></span></span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="PlaceBid"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#PlaceBid"><span class="hs-identifier hs-var">PlaceBid</span></a></span></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#SealedBid"><span class="hs-identifier hs-type">SealedBid</span></a></span><span> </span><span class="hs-comment">-- Register a sealed bid</span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="RevealBid"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#RevealBid"><span class="hs-identifier hs-var">RevealBid</span></a></span></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#RevealedBid"><span class="hs-identifier hs-type">RevealedBid</span></a></span><span> </span><span class="hs-comment">-- Reveal a bid</span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Payout"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#Payout"><span class="hs-identifier hs-var">Payout</span></a></span></span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. AuctionInput -&gt; Rep AuctionInput x)
-&gt; (forall x. Rep AuctionInput x -&gt; AuctionInput)
-&gt; Generic AuctionInput
forall x. Rep AuctionInput x -&gt; AuctionInput
forall x. AuctionInput -&gt; Rep AuctionInput x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep AuctionInput x -&gt; AuctionInput
$cfrom :: forall x. AuctionInput -&gt; Rep AuctionInput x
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977653"><span id="local-6989586621680977655"><span id="local-6989586621680977657"><span class="annot"><span class="annottext">Int -&gt; AuctionInput -&gt; ShowS
[AuctionInput] -&gt; ShowS
AuctionInput -&gt; String
(Int -&gt; AuctionInput -&gt; ShowS)
-&gt; (AuctionInput -&gt; String)
-&gt; ([AuctionInput] -&gt; ShowS)
-&gt; Show AuctionInput
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [AuctionInput] -&gt; ShowS
$cshowList :: [AuctionInput] -&gt; ShowS
show :: AuctionInput -&gt; String
$cshow :: AuctionInput -&gt; String
showsPrec :: Int -&gt; AuctionInput -&gt; ShowS
$cshowsPrec :: Int -&gt; AuctionInput -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Haskell.Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977645"><span id="local-6989586621680977647"><span id="local-6989586621680977649"><span id="local-6989586621680977651"><span class="annot"><span class="annottext">[AuctionInput] -&gt; Encoding
[AuctionInput] -&gt; Value
AuctionInput -&gt; Encoding
AuctionInput -&gt; Value
(AuctionInput -&gt; Value)
-&gt; (AuctionInput -&gt; Encoding)
-&gt; ([AuctionInput] -&gt; Value)
-&gt; ([AuctionInput] -&gt; Encoding)
-&gt; ToJSON AuctionInput
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [AuctionInput] -&gt; Encoding
$ctoEncodingList :: [AuctionInput] -&gt; Encoding
toJSONList :: [AuctionInput] -&gt; Value
$ctoJSONList :: [AuctionInput] -&gt; Value
toEncoding :: AuctionInput -&gt; Encoding
$ctoEncoding :: AuctionInput -&gt; Encoding
toJSON :: AuctionInput -&gt; Value
$ctoJSON :: AuctionInput -&gt; Value
</span><a href="#local-6989586621680977645"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977641"><span id="local-6989586621680977643"><span class="annot"><span class="annottext">Value -&gt; Parser [AuctionInput]
Value -&gt; Parser AuctionInput
(Value -&gt; Parser AuctionInput)
-&gt; (Value -&gt; Parser [AuctionInput]) -&gt; FromJSON AuctionInput
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [AuctionInput]
$cparseJSONList :: Value -&gt; Parser [AuctionInput]
parseJSON :: Value -&gt; Parser AuctionInput
$cparseJSON :: Value -&gt; Parser AuctionInput
</span><a href="#local-6989586621680977641"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span id="local-6989586621680977635"><span id="local-6989586621680977637"><span id="local-6989586621680977639"><span class="hs-identifier">PlutusTx.unstableMakeIsData</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">AuctionInput</span></span></span></span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="hs-keyword">type</span><span> </span><span id="AuctionMachine"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionMachine"><span class="hs-identifier hs-var">AuctionMachine</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">StateMachine</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionState"><span class="hs-identifier hs-type">AuctionState</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionInput"><span class="hs-identifier hs-type">AuctionInput</span></a></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#packInteger"><span class="hs-pragma hs-type">packInteger</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-141"></span><span class="hs-comment">-- | Pack an integer into a byte string with a leading</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- sign byte in little-endian order</span><span>
</span><span id="line-143"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#packInteger"><span class="hs-identifier hs-type">packInteger</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/integer-gmp-1.0.3.0/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-type">BuiltinByteString</span></a></span><span>
</span><span id="line-144"></span><span id="packInteger"><span class="annot"><span class="annottext">packInteger :: Integer -&gt; BuiltinByteString
</span><a href="Plutus.Contracts.SealedBidAuction.html#packInteger"><span class="hs-identifier hs-var hs-var">packInteger</span></a></span></span><span> </span><span id="local-6989586621680977634"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680977634"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680977634"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; BuiltinByteString -&gt; BuiltinByteString
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">consByteString</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; BuiltinByteString -&gt; BuiltinByteString
</span><a href="#local-6989586621680977631"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Integer
forall a. AdditiveGroup a =&gt; a -&gt; a
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">negate</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680977634"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">emptyByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; BuiltinByteString -&gt; BuiltinByteString
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">consByteString</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; BuiltinByteString -&gt; BuiltinByteString
</span><a href="#local-6989586621680977631"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680977634"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">emptyByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-146"></span><span>    </span><span id="local-6989586621680977631"><span class="annot"><span class="annottext">go :: Integer -&gt; BuiltinByteString -&gt; BuiltinByteString
</span><a href="#local-6989586621680977631"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621680977628"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680977628"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680977627"><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621680977627"><span class="hs-identifier hs-var">s</span></a></span></span><span>
</span><span id="line-147"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680977628"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621680977627"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-148"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; BuiltinByteString -&gt; BuiltinByteString
</span><a href="#local-6989586621680977631"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680977628"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">`divide`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">256</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; BuiltinByteString -&gt; BuiltinByteString
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">consByteString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680977628"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">`modulo`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">256</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621680977627"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#hashInteger"><span class="hs-pragma hs-type">hashInteger</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-151"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#hashInteger"><span class="hs-identifier hs-type">hashInteger</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/integer-gmp-1.0.3.0/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-type">BuiltinByteString</span></a></span><span>
</span><span id="line-152"></span><span id="hashInteger"><span class="annot"><span class="annottext">hashInteger :: Integer -&gt; BuiltinByteString
</span><a href="Plutus.Contracts.SealedBidAuction.html#hashInteger"><span class="hs-identifier hs-var hs-var">hashInteger</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuiltinByteString -&gt; BuiltinByteString
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">sha2_256</span></a></span><span> </span><span class="annot"><span class="annottext">(BuiltinByteString -&gt; BuiltinByteString)
-&gt; (Integer -&gt; BuiltinByteString) -&gt; Integer -&gt; BuiltinByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; BuiltinByteString
</span><a href="Plutus.Contracts.SealedBidAuction.html#packInteger"><span class="hs-identifier hs-var">packInteger</span></a></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#hashSecretInteger"><span class="hs-pragma hs-type">hashSecretInteger</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-155"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#hashSecretInteger"><span class="hs-identifier hs-type">hashSecretInteger</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">Secret</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/integer-gmp-1.0.3.0/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-type">BuiltinByteString</span></a></span><span>
</span><span id="line-156"></span><span id="hashSecretInteger"><span class="annot"><span class="annottext">hashSecretInteger :: Secret Integer -&gt; BuiltinByteString
</span><a href="Plutus.Contracts.SealedBidAuction.html#hashSecretInteger"><span class="hs-identifier hs-var hs-var">hashSecretInteger</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Secret BuiltinByteString -&gt; BuiltinByteString
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">escape_sha2_256</span></a></span><span> </span><span class="annot"><span class="annottext">(Secret BuiltinByteString -&gt; BuiltinByteString)
-&gt; (Secret Integer -&gt; Secret BuiltinByteString)
-&gt; Secret Integer
-&gt; BuiltinByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; BuiltinByteString)
-&gt; Secret Integer -&gt; Secret BuiltinByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; BuiltinByteString
</span><a href="Plutus.Contracts.SealedBidAuction.html#packInteger"><span class="hs-identifier hs-var">packInteger</span></a></span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#sealBid"><span class="hs-pragma hs-type">sealBid</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-159"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#sealBid"><span class="hs-identifier hs-type">sealBid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#RevealedBid"><span class="hs-identifier hs-type">RevealedBid</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#SealedBid"><span class="hs-identifier hs-type">SealedBid</span></a></span><span>
</span><span id="line-160"></span><span id="sealBid"><span class="annot"><span class="annottext">sealBid :: RevealedBid -&gt; SealedBid
</span><a href="Plutus.Contracts.SealedBidAuction.html#sealBid"><span class="hs-identifier hs-var hs-var">sealBid</span></a></span></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#RevealedBid"><span class="hs-identifier hs-type">RevealedBid</span></a></span><span class="hs-special">{</span><span id="local-6989586621680977617"><span class="annot"><span class="annottext">Integer
revealedBid :: Integer
revealedBid :: RevealedBid -&gt; Integer
</span><a href="#local-6989586621680977617"><span class="hs-identifier hs-var hs-var">revealedBid</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977616"><span class="annot"><span class="annottext">Address
revealedBidBidder :: Address
revealedBidBidder :: RevealedBid -&gt; Address
</span><a href="#local-6989586621680977616"><span class="hs-identifier hs-var hs-var">revealedBidBidder</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuiltinByteString -&gt; Address -&gt; SealedBid
</span><a href="Plutus.Contracts.SealedBidAuction.html#SealedBid"><span class="hs-identifier hs-var">SealedBid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; BuiltinByteString
</span><a href="Plutus.Contracts.SealedBidAuction.html#hashInteger"><span class="hs-identifier hs-var">hashInteger</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680977617"><span class="hs-identifier hs-var">revealedBid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621680977616"><span class="hs-identifier hs-var">revealedBidBidder</span></a></span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#valueOfBid"><span class="hs-pragma hs-type">valueOfBid</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-163"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#valueOfBid"><span class="hs-identifier hs-type">valueOfBid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#RevealedBid"><span class="hs-identifier hs-type">RevealedBid</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span>
</span><span id="line-164"></span><span id="valueOfBid"><span class="annot"><span class="annottext">valueOfBid :: RevealedBid -&gt; Value
</span><a href="Plutus.Contracts.SealedBidAuction.html#valueOfBid"><span class="hs-identifier hs-var hs-var">valueOfBid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Value
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Ada.lovelaceValueOf</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Value)
-&gt; (RevealedBid -&gt; Integer) -&gt; RevealedBid -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid -&gt; Integer
</span><a href="Plutus.Contracts.SealedBidAuction.html#revealedBid"><span class="hs-identifier hs-var hs-var">revealedBid</span></a></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#auctionTransition"><span class="hs-pragma hs-type">auctionTransition</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-167"></span><span class="hs-comment">-- | The transitions of the auction state machine.</span><span>
</span><span id="line-168"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#auctionTransition"><span class="hs-identifier hs-type">auctionTransition</span></a></span><span>
</span><span id="line-169"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier hs-type">AuctionParams</span></a></span><span>
</span><span id="line-170"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionState"><span class="hs-identifier hs-type">AuctionState</span></a></span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionInput"><span class="hs-identifier hs-type">AuctionInput</span></a></span><span>
</span><span id="line-172"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-type">TxConstraints</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Void</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Void</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionState"><span class="hs-identifier hs-type">AuctionState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span id="auctionTransition"><span class="annot"><span class="annottext">auctionTransition :: AuctionParams
-&gt; State AuctionState
-&gt; AuctionInput
-&gt; Maybe (TxConstraints Void Void, State AuctionState)
</span><a href="Plutus.Contracts.SealedBidAuction.html#auctionTransition"><span class="hs-identifier hs-var hs-var">auctionTransition</span></a></span></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier hs-type">AuctionParams</span></a></span><span class="hs-special">{</span><span id="local-6989586621680977612"><span class="annot"><span class="annottext">Address
apOwner :: Address
apOwner :: AuctionParams -&gt; Address
</span><a href="#local-6989586621680977612"><span class="hs-identifier hs-var hs-var">apOwner</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977611"><span class="annot"><span class="annottext">Value
apAsset :: Value
apAsset :: AuctionParams -&gt; Value
</span><a href="#local-6989586621680977611"><span class="hs-identifier hs-var hs-var">apAsset</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977610"><span class="annot"><span class="annottext">POSIXTime
apEndTime :: POSIXTime
apEndTime :: AuctionParams -&gt; POSIXTime
</span><a href="#local-6989586621680977610"><span class="hs-identifier hs-var hs-var">apEndTime</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977609"><span class="annot"><span class="annottext">POSIXTime
apPayoutTime :: POSIXTime
apPayoutTime :: AuctionParams -&gt; POSIXTime
</span><a href="#local-6989586621680977609"><span class="hs-identifier hs-var hs-var">apPayoutTime</span></a></span></span><span class="hs-special">}</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">State</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">stateData :: forall s. State s -&gt; s
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">stateData</span></a></span><span class="hs-glyph">=</span><span id="local-6989586621680977606"><span class="annot"><span class="annottext">AuctionState
</span><a href="#local-6989586621680977606"><span class="hs-identifier hs-var">oldStateData</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">stateValue :: forall s. State s -&gt; Value
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">stateValue</span></a></span><span class="hs-glyph">=</span><span id="local-6989586621680977604"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680977604"><span class="hs-identifier hs-var">oldStateValue</span></a></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621680977603"><span class="annot"><span class="annottext">AuctionInput
</span><a href="#local-6989586621680977603"><span class="hs-identifier hs-var">input</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AuctionState
</span><a href="#local-6989586621680977606"><span class="hs-identifier hs-var">oldStateData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AuctionInput
</span><a href="#local-6989586621680977603"><span class="hs-identifier hs-var">input</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-comment">-- A new bid is placed, a bidder is only allowed to bid once</span><span>
</span><span id="line-176"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#Ongoing"><span class="hs-identifier hs-type">Ongoing</span></a></span><span> </span><span id="local-6989586621680977602"><span class="annot"><span class="annottext">[SealedBid]
</span><a href="#local-6989586621680977602"><span class="hs-identifier hs-var">bids</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#PlaceBid"><span class="hs-identifier hs-type">PlaceBid</span></a></span><span> </span><span id="local-6989586621680977601"><span class="annot"><span class="annottext">SealedBid
</span><a href="#local-6989586621680977601"><span class="hs-identifier hs-var">bid</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SealedBid -&gt; Address
</span><a href="Plutus.Contracts.SealedBidAuction.html#sealedBidBidder"><span class="hs-identifier hs-var hs-var">sealedBidBidder</span></a></span><span> </span><span class="annot"><span class="annottext">SealedBid
</span><a href="#local-6989586621680977601"><span class="hs-identifier hs-var">bid</span></a></span><span> </span><span class="annot"><span class="annottext">Address -&gt; [Address] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">`notElem`</span></a></span><span> </span><span class="annot"><span class="annottext">(SealedBid -&gt; Address) -&gt; [SealedBid] -&gt; [Address]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">SealedBid -&gt; Address
</span><a href="Plutus.Contracts.SealedBidAuction.html#sealedBidBidder"><span class="hs-identifier hs-var hs-var">sealedBidBidder</span></a></span><span> </span><span class="annot"><span class="annottext">[SealedBid]
</span><a href="#local-6989586621680977602"><span class="hs-identifier hs-var">bids</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-178"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977598"><span class="annot"><span class="annottext">validityTimeRange :: ValidityInterval POSIXTime
</span><a href="#local-6989586621680977598"><span class="hs-identifier hs-var hs-var">validityTimeRange</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">POSIXTime -&gt; ValidityInterval POSIXTime
forall a. a -&gt; ValidityInterval a
</span><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-var">Interval.lessThan</span></a></span><span> </span><span class="annot"><span class="annottext">(POSIXTime -&gt; ValidityInterval POSIXTime)
-&gt; POSIXTime -&gt; ValidityInterval POSIXTime
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">POSIXTime
</span><a href="#local-6989586621680977610"><span class="hs-identifier hs-var">apEndTime</span></a></span><span> </span><span class="annot"><span class="annottext">POSIXTime -&gt; POSIXTime -&gt; POSIXTime
forall a. AdditiveGroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../plutus-tx/html/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">POSIXTime
</span><span class="hs-number">1</span></span><span>
</span><span id="line-179"></span><span>            </span><span id="local-6989586621680977594"><span class="annot"><span class="annottext">constraints :: TxConstraints Void Void
</span><a href="#local-6989586621680977594"><span class="hs-identifier hs-var hs-var">constraints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ValidityInterval POSIXTime -&gt; TxConstraints Void Void
forall i o. ValidityInterval POSIXTime -&gt; TxConstraints i o
</span><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-var">Constraints.mustValidateInTimeRange</span></a></span><span> </span><span class="annot"><span class="annottext">ValidityInterval POSIXTime
</span><a href="#local-6989586621680977598"><span class="hs-identifier hs-var">validityTimeRange</span></a></span><span>
</span><span id="line-180"></span><span>            </span><span id="local-6989586621680977592"><span class="annot"><span class="annottext">newState :: State AuctionState
</span><a href="#local-6989586621680977592"><span class="hs-identifier hs-var hs-var">newState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-181"></span><span>              </span><span class="annot"><span class="annottext">State :: forall s. s -&gt; Value -&gt; State s
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">State</span></a></span><span>
</span><span id="line-182"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">stateData :: AuctionState
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">stateData</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SealedBid] -&gt; AuctionState
</span><a href="Plutus.Contracts.SealedBidAuction.html#Ongoing"><span class="hs-identifier hs-var">Ongoing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SealedBid
</span><a href="#local-6989586621680977601"><span class="hs-identifier hs-var">bid</span></a></span><span class="annot"><span class="annottext">SealedBid -&gt; [SealedBid] -&gt; [SealedBid]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span class="annot"><span class="annottext">[SealedBid]
</span><a href="#local-6989586621680977602"><span class="hs-identifier hs-var">bids</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">stateValue :: Value
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">stateValue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680977604"><span class="hs-identifier hs-var">oldStateValue</span></a></span><span>
</span><span id="line-184"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-185"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(TxConstraints Void Void, State AuctionState)
-&gt; Maybe (TxConstraints Void Void, State AuctionState)
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxConstraints Void Void
</span><a href="#local-6989586621680977594"><span class="hs-identifier hs-var">constraints</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State AuctionState
</span><a href="#local-6989586621680977592"><span class="hs-identifier hs-var">newState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-comment">-- The first bid is revealed</span><span>
</span><span id="line-188"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#Ongoing"><span class="hs-identifier hs-type">Ongoing</span></a></span><span> </span><span id="local-6989586621680977591"><span class="annot"><span class="annottext">[SealedBid]
</span><a href="#local-6989586621680977591"><span class="hs-identifier hs-var">bids</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#RevealBid"><span class="hs-identifier hs-type">RevealBid</span></a></span><span> </span><span id="local-6989586621680977590"><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977590"><span class="hs-identifier hs-var">bid</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RevealedBid -&gt; SealedBid
</span><a href="Plutus.Contracts.SealedBidAuction.html#sealBid"><span class="hs-identifier hs-var">sealBid</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977590"><span class="hs-identifier hs-var">bid</span></a></span><span> </span><span class="annot"><span class="annottext">SealedBid -&gt; [SealedBid] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[SealedBid]
</span><a href="#local-6989586621680977591"><span class="hs-identifier hs-var">bids</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-190"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977588"><span class="annot"><span class="annottext">validityTimeRange :: ValidityInterval POSIXTime
</span><a href="#local-6989586621680977588"><span class="hs-identifier hs-var hs-var">validityTimeRange</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">POSIXTime -&gt; POSIXTime -&gt; ValidityInterval POSIXTime
forall a. a -&gt; a -&gt; ValidityInterval a
</span><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-var">Interval.interval</span></a></span><span> </span><span class="annot"><span class="annottext">POSIXTime
</span><a href="#local-6989586621680977610"><span class="hs-identifier hs-var">apEndTime</span></a></span><span> </span><span class="annot"><span class="annottext">POSIXTime
</span><a href="#local-6989586621680977609"><span class="hs-identifier hs-var">apPayoutTime</span></a></span><span>
</span><span id="line-191"></span><span>            </span><span id="local-6989586621680977586"><span class="annot"><span class="annottext">constraints :: TxConstraints Void Void
</span><a href="#local-6989586621680977586"><span class="hs-identifier hs-var hs-var">constraints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ValidityInterval POSIXTime -&gt; TxConstraints Void Void
forall i o. ValidityInterval POSIXTime -&gt; TxConstraints i o
</span><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-var">Constraints.mustValidateInTimeRange</span></a></span><span> </span><span class="annot"><span class="annottext">ValidityInterval POSIXTime
</span><a href="#local-6989586621680977588"><span class="hs-identifier hs-var">validityTimeRange</span></a></span><span>
</span><span id="line-192"></span><span>            </span><span id="local-6989586621680977585"><span class="annot"><span class="annottext">newState :: State AuctionState
</span><a href="#local-6989586621680977585"><span class="hs-identifier hs-var hs-var">newState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-193"></span><span>              </span><span class="annot"><span class="annottext">State :: forall s. s -&gt; Value -&gt; State s
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">State</span></a></span><span>
</span><span id="line-194"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">stateData :: AuctionState
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">stateData</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RevealedBid -&gt; [SealedBid] -&gt; AuctionState
</span><a href="Plutus.Contracts.SealedBidAuction.html#AwaitingPayout"><span class="hs-identifier hs-var">AwaitingPayout</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977590"><span class="hs-identifier hs-var">bid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SealedBid -&gt; Bool) -&gt; [SealedBid] -&gt; [SealedBid]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SealedBid -&gt; SealedBid -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid -&gt; SealedBid
</span><a href="Plutus.Contracts.SealedBidAuction.html#sealBid"><span class="hs-identifier hs-var">sealBid</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977590"><span class="hs-identifier hs-var">bid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[SealedBid]
</span><a href="#local-6989586621680977591"><span class="hs-identifier hs-var">bids</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">stateValue :: Value
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">stateValue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680977604"><span class="hs-identifier hs-var">oldStateValue</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Value
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid -&gt; Value
</span><a href="Plutus.Contracts.SealedBidAuction.html#valueOfBid"><span class="hs-identifier hs-var">valueOfBid</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977590"><span class="hs-identifier hs-var">bid</span></a></span><span>
</span><span id="line-196"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-197"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(TxConstraints Void Void, State AuctionState)
-&gt; Maybe (TxConstraints Void Void, State AuctionState)
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxConstraints Void Void
</span><a href="#local-6989586621680977586"><span class="hs-identifier hs-var">constraints</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State AuctionState
</span><a href="#local-6989586621680977585"><span class="hs-identifier hs-var">newState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span>    </span><span class="hs-comment">-- Nobody has revealed their bid and the deadline has arrived</span><span>
</span><span id="line-200"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#Ongoing"><span class="hs-identifier hs-type">Ongoing</span></a></span><span> </span><span class="annot"><span class="annottext">[SealedBid]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AuctionInput
</span><a href="Plutus.Contracts.SealedBidAuction.html#Payout"><span class="hs-identifier hs-var">Payout</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-201"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977581"><span class="annot"><span class="annottext">constraints :: TxConstraints Void Void
</span><a href="#local-6989586621680977581"><span class="hs-identifier hs-var hs-var">constraints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ValidityInterval POSIXTime -&gt; TxConstraints Void Void
forall i o. ValidityInterval POSIXTime -&gt; TxConstraints i o
</span><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-var">Constraints.mustValidateInTimeRange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">POSIXTime -&gt; ValidityInterval POSIXTime
forall a. a -&gt; ValidityInterval a
</span><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-var">Interval.from</span></a></span><span> </span><span class="annot"><span class="annottext">POSIXTime
</span><a href="#local-6989586621680977609"><span class="hs-identifier hs-var">apPayoutTime</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>                      </span><span class="annot"><span class="annottext">TxConstraints Void Void
-&gt; TxConstraints Void Void -&gt; TxConstraints Void Void
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Address -&gt; Value -&gt; TxConstraints Void Void
forall i o. Address -&gt; Value -&gt; TxConstraints i o
</span><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-var">Constraints.mustPayToAddress</span></a></span><span> </span><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621680977612"><span class="hs-identifier hs-var">apOwner</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680977611"><span class="hs-identifier hs-var">apAsset</span></a></span><span>
</span><span id="line-203"></span><span>          </span><span id="local-6989586621680977578"><span class="annot"><span class="annottext">newState :: State AuctionState
</span><a href="#local-6989586621680977578"><span class="hs-identifier hs-var hs-var">newState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-204"></span><span>            </span><span class="annot"><span class="annottext">State :: forall s. s -&gt; Value -&gt; State s
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">State</span></a></span><span>
</span><span id="line-205"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">stateData :: AuctionState
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">stateData</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AuctionState
</span><a href="Plutus.Contracts.SealedBidAuction.html#Finished"><span class="hs-identifier hs-var">Finished</span></a></span><span>
</span><span id="line-206"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">stateValue :: Value
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">stateValue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
forall a. Monoid a =&gt; a
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-207"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-208"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(TxConstraints Void Void, State AuctionState)
-&gt; Maybe (TxConstraints Void Void, State AuctionState)
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxConstraints Void Void
</span><a href="#local-6989586621680977581"><span class="hs-identifier hs-var">constraints</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State AuctionState
</span><a href="#local-6989586621680977578"><span class="hs-identifier hs-var">newState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-comment">-- We are waiting for the payout deadine and a bid is revealed that is higher</span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-comment">-- than the current maximum bid</span><span>
</span><span id="line-212"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AwaitingPayout"><span class="hs-identifier hs-type">AwaitingPayout</span></a></span><span> </span><span id="local-6989586621680977576"><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977576"><span class="hs-identifier hs-var">highestBid</span></a></span></span><span> </span><span id="local-6989586621680977575"><span class="annot"><span class="annottext">[SealedBid]
</span><a href="#local-6989586621680977575"><span class="hs-identifier hs-var">sealedBids</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#RevealBid"><span class="hs-identifier hs-type">RevealBid</span></a></span><span> </span><span id="local-6989586621680977574"><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977574"><span class="hs-identifier hs-var">bid</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RevealedBid -&gt; Integer
</span><a href="Plutus.Contracts.SealedBidAuction.html#revealedBid"><span class="hs-identifier hs-var hs-var">revealedBid</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977574"><span class="hs-identifier hs-var">bid</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid -&gt; Integer
</span><a href="Plutus.Contracts.SealedBidAuction.html#revealedBid"><span class="hs-identifier hs-var hs-var">revealedBid</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977576"><span class="hs-identifier hs-var">highestBid</span></a></span><span>
</span><span id="line-214"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid -&gt; SealedBid
</span><a href="Plutus.Contracts.SealedBidAuction.html#sealBid"><span class="hs-identifier hs-var">sealBid</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977574"><span class="hs-identifier hs-var">bid</span></a></span><span> </span><span class="annot"><span class="annottext">SealedBid -&gt; [SealedBid] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[SealedBid]
</span><a href="#local-6989586621680977575"><span class="hs-identifier hs-var">sealedBids</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-215"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977572"><span class="annot"><span class="annottext">validityTimeRange :: ValidityInterval POSIXTime
</span><a href="#local-6989586621680977572"><span class="hs-identifier hs-var hs-var">validityTimeRange</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">POSIXTime -&gt; ValidityInterval POSIXTime
forall a. a -&gt; ValidityInterval a
</span><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-var">Interval.lessThan</span></a></span><span> </span><span class="annot"><span class="annottext">(POSIXTime -&gt; ValidityInterval POSIXTime)
-&gt; POSIXTime -&gt; ValidityInterval POSIXTime
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">POSIXTime
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">POSIXTime -&gt; POSIXTime -&gt; POSIXTime
forall a. AdditiveSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">POSIXTime
</span><a href="#local-6989586621680977609"><span class="hs-identifier hs-var">apPayoutTime</span></a></span><span>
</span><span id="line-216"></span><span>            </span><span id="local-6989586621680977570"><span class="annot"><span class="annottext">constraints :: TxConstraints Void Void
</span><a href="#local-6989586621680977570"><span class="hs-identifier hs-var hs-var">constraints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ValidityInterval POSIXTime -&gt; TxConstraints Void Void
forall i o. ValidityInterval POSIXTime -&gt; TxConstraints i o
</span><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-var">Constraints.mustValidateInTimeRange</span></a></span><span> </span><span class="annot"><span class="annottext">ValidityInterval POSIXTime
</span><a href="#local-6989586621680977572"><span class="hs-identifier hs-var">validityTimeRange</span></a></span><span>
</span><span id="line-217"></span><span>                        </span><span class="annot"><span class="annottext">TxConstraints Void Void
-&gt; TxConstraints Void Void -&gt; TxConstraints Void Void
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Address -&gt; Value -&gt; TxConstraints Void Void
forall i o. Address -&gt; Value -&gt; TxConstraints i o
</span><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-var">Constraints.mustPayToAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RevealedBid -&gt; Address
</span><a href="Plutus.Contracts.SealedBidAuction.html#revealedBidBidder"><span class="hs-identifier hs-var hs-var">revealedBidBidder</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977576"><span class="hs-identifier hs-var">highestBid</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RevealedBid -&gt; Value
</span><a href="Plutus.Contracts.SealedBidAuction.html#valueOfBid"><span class="hs-identifier hs-var">valueOfBid</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977576"><span class="hs-identifier hs-var">highestBid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>            </span><span id="local-6989586621680977569"><span class="annot"><span class="annottext">newState :: State AuctionState
</span><a href="#local-6989586621680977569"><span class="hs-identifier hs-var hs-var">newState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-219"></span><span>              </span><span class="annot"><span class="annottext">State :: forall s. s -&gt; Value -&gt; State s
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">State</span></a></span><span>
</span><span id="line-220"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">stateData :: AuctionState
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">stateData</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RevealedBid -&gt; [SealedBid] -&gt; AuctionState
</span><a href="Plutus.Contracts.SealedBidAuction.html#AwaitingPayout"><span class="hs-identifier hs-var">AwaitingPayout</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977574"><span class="hs-identifier hs-var">bid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SealedBid -&gt; Bool) -&gt; [SealedBid] -&gt; [SealedBid]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SealedBid -&gt; SealedBid -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid -&gt; SealedBid
</span><a href="Plutus.Contracts.SealedBidAuction.html#sealBid"><span class="hs-identifier hs-var">sealBid</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977574"><span class="hs-identifier hs-var">bid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[SealedBid]
</span><a href="#local-6989586621680977575"><span class="hs-identifier hs-var">sealedBids</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">stateValue :: Value
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">stateValue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Value
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Value.noAdaValue</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680977604"><span class="hs-identifier hs-var">oldStateValue</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Value
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Ada -&gt; Value
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Ada.toValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Ada
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Ada.fromValue</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680977604"><span class="hs-identifier hs-var">oldStateValue</span></a></span><span> </span><span class="annot"><span class="annottext">Ada -&gt; Ada -&gt; Ada
forall a. AdditiveGroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../plutus-tx/html/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Ada
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">Ada.lovelaceOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RevealedBid -&gt; Integer
</span><a href="Plutus.Contracts.SealedBidAuction.html#revealedBid"><span class="hs-identifier hs-var hs-var">revealedBid</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977576"><span class="hs-identifier hs-var">highestBid</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Value
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid -&gt; Value
</span><a href="Plutus.Contracts.SealedBidAuction.html#valueOfBid"><span class="hs-identifier hs-var">valueOfBid</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977574"><span class="hs-identifier hs-var">bid</span></a></span><span>
</span><span id="line-222"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-223"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(TxConstraints Void Void, State AuctionState)
-&gt; Maybe (TxConstraints Void Void, State AuctionState)
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxConstraints Void Void
</span><a href="#local-6989586621680977570"><span class="hs-identifier hs-var">constraints</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State AuctionState
</span><a href="#local-6989586621680977569"><span class="hs-identifier hs-var">newState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span>    </span><span class="hs-comment">-- At least one bid has been revealed and the payout is triggered</span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AwaitingPayout"><span class="hs-identifier hs-type">AwaitingPayout</span></a></span><span> </span><span id="local-6989586621680977564"><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977564"><span class="hs-identifier hs-var">highestBid</span></a></span></span><span> </span><span class="annot"><span class="annottext">[SealedBid]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AuctionInput
</span><a href="Plutus.Contracts.SealedBidAuction.html#Payout"><span class="hs-identifier hs-var">Payout</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-227"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977563"><span class="annot"><span class="annottext">constraints :: TxConstraints Void Void
</span><a href="#local-6989586621680977563"><span class="hs-identifier hs-var hs-var">constraints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ValidityInterval POSIXTime -&gt; TxConstraints Void Void
forall i o. ValidityInterval POSIXTime -&gt; TxConstraints i o
</span><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-var">Constraints.mustValidateInTimeRange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">POSIXTime -&gt; ValidityInterval POSIXTime
forall a. a -&gt; ValidityInterval a
</span><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-var">Interval.from</span></a></span><span> </span><span class="annot"><span class="annottext">POSIXTime
</span><a href="#local-6989586621680977609"><span class="hs-identifier hs-var">apPayoutTime</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>                      </span><span class="annot"><span class="annottext">TxConstraints Void Void
-&gt; TxConstraints Void Void -&gt; TxConstraints Void Void
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Address -&gt; Value -&gt; TxConstraints Void Void
forall i o. Address -&gt; Value -&gt; TxConstraints i o
</span><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-var">Constraints.mustPayToAddress</span></a></span><span> </span><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621680977612"><span class="hs-identifier hs-var">apOwner</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RevealedBid -&gt; Value
</span><a href="Plutus.Contracts.SealedBidAuction.html#valueOfBid"><span class="hs-identifier hs-var">valueOfBid</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977564"><span class="hs-identifier hs-var">highestBid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>                      </span><span class="annot"><span class="annottext">TxConstraints Void Void
-&gt; TxConstraints Void Void -&gt; TxConstraints Void Void
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Address -&gt; Value -&gt; TxConstraints Void Void
forall i o. Address -&gt; Value -&gt; TxConstraints i o
</span><a href="../../../../plutus-ledger-constraints/html/src"><span class="hs-identifier hs-var">Constraints.mustPayToAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RevealedBid -&gt; Address
</span><a href="Plutus.Contracts.SealedBidAuction.html#revealedBidBidder"><span class="hs-identifier hs-var hs-var">revealedBidBidder</span></a></span><span> </span><span class="annot"><span class="annottext">RevealedBid
</span><a href="#local-6989586621680977564"><span class="hs-identifier hs-var">highestBid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680977611"><span class="hs-identifier hs-var">apAsset</span></a></span><span>
</span><span id="line-230"></span><span>          </span><span id="local-6989586621680977562"><span class="annot"><span class="annottext">newState :: State AuctionState
</span><a href="#local-6989586621680977562"><span class="hs-identifier hs-var hs-var">newState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-231"></span><span>            </span><span class="annot"><span class="annottext">State :: forall s. s -&gt; Value -&gt; State s
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">State</span></a></span><span>
</span><span id="line-232"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">stateData :: AuctionState
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">stateData</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AuctionState
</span><a href="Plutus.Contracts.SealedBidAuction.html#Finished"><span class="hs-identifier hs-var">Finished</span></a></span><span>
</span><span id="line-233"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">stateValue :: Value
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">stateValue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
forall a. Monoid a =&gt; a
</span><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-234"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-235"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(TxConstraints Void Void, State AuctionState)
-&gt; Maybe (TxConstraints Void Void, State AuctionState)
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxConstraints Void Void
</span><a href="#local-6989586621680977563"><span class="hs-identifier hs-var">constraints</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State AuctionState
</span><a href="#local-6989586621680977562"><span class="hs-identifier hs-var">newState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span>    </span><span class="hs-comment">-- No other combination of inputs makes sense</span><span>
</span><span id="line-238"></span><span>    </span><span class="annot"><span class="annottext">(AuctionState, AuctionInput)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (TxConstraints Void Void, State AuctionState)
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#auctionStateMachine"><span class="hs-pragma hs-type">auctionStateMachine</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-241"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#auctionStateMachine"><span class="hs-identifier hs-type">auctionStateMachine</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier hs-type">AuctionParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionMachine"><span class="hs-identifier hs-type">AuctionMachine</span></a></span><span>
</span><span id="line-242"></span><span id="auctionStateMachine"><span class="annot"><span class="annottext">auctionStateMachine :: AuctionParams -&gt; AuctionMachine
</span><a href="Plutus.Contracts.SealedBidAuction.html#auctionStateMachine"><span class="hs-identifier hs-var hs-var">auctionStateMachine</span></a></span></span><span> </span><span id="local-6989586621680977560"><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977560"><span class="hs-identifier hs-var">auctionParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-243"></span><span>    </span><span class="annot"><span class="annottext">Maybe ThreadToken
-&gt; (State AuctionState
    -&gt; AuctionInput
    -&gt; Maybe (TxConstraints Void Void, State AuctionState))
-&gt; (AuctionState -&gt; Bool)
-&gt; AuctionMachine
forall s i.
Maybe ThreadToken
-&gt; (State s -&gt; i -&gt; Maybe (TxConstraints Void Void, State s))
-&gt; (s -&gt; Bool)
-&gt; StateMachine s i
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">SM.mkStateMachine</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ThreadToken
forall a. Maybe a
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AuctionParams
-&gt; State AuctionState
-&gt; AuctionInput
-&gt; Maybe (TxConstraints Void Void, State AuctionState)
</span><a href="Plutus.Contracts.SealedBidAuction.html#auctionTransition"><span class="hs-identifier hs-var">auctionTransition</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977560"><span class="hs-identifier hs-var">auctionParams</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AuctionState -&gt; Bool
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">isFinal</span></a></span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-245"></span><span>    </span><span id="local-6989586621680977558"><span class="annot"><span class="annottext">isFinal :: AuctionState -&gt; Bool
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var hs-var">isFinal</span></a></span></span><span> </span><span class="annot"><span class="annottext">AuctionState
</span><a href="Plutus.Contracts.SealedBidAuction.html#Finished"><span class="hs-identifier hs-var">Finished</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-246"></span><span>    </span><span class="annot"><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">isFinal</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionState
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#mkValidator"><span class="hs-pragma hs-type">mkValidator</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-249"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#mkValidator"><span class="hs-identifier hs-type">mkValidator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier hs-type">AuctionParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-script-utils/html/src"><span class="hs-identifier hs-type">Scripts.ValidatorType</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionMachine"><span class="hs-identifier hs-type">AuctionMachine</span></a></span><span>
</span><span id="line-250"></span><span id="mkValidator"><span class="annot"><span class="annottext">mkValidator :: AuctionParams -&gt; ValidatorType AuctionMachine
</span><a href="Plutus.Contracts.SealedBidAuction.html#mkValidator"><span class="hs-identifier hs-var hs-var">mkValidator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AuctionMachine
-&gt; AuctionState -&gt; AuctionInput -&gt; ScriptContext -&gt; Bool
forall s i.
ToData s =&gt;
StateMachine s i -&gt; ValidatorType (StateMachine s i)
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">SM.mkValidator</span></a></span><span> </span><span class="annot"><span class="annottext">(AuctionMachine
 -&gt; AuctionState -&gt; AuctionInput -&gt; ScriptContext -&gt; Bool)
-&gt; (AuctionParams -&gt; AuctionMachine)
-&gt; AuctionParams
-&gt; AuctionState
-&gt; AuctionInput
-&gt; ScriptContext
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionParams -&gt; AuctionMachine
</span><a href="Plutus.Contracts.SealedBidAuction.html#auctionStateMachine"><span class="hs-identifier hs-var">auctionStateMachine</span></a></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="hs-comment">-- | The script instance of the auction state machine. It contains the state</span><span>
</span><span id="line-253"></span><span class="hs-comment">--   machine compiled to a Plutus core validator script.</span><span>
</span><span id="line-254"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#typedValidator"><span class="hs-identifier hs-type">typedValidator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier hs-type">AuctionParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-script-utils/html/src"><span class="hs-identifier hs-type">Scripts.TypedValidator</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionMachine"><span class="hs-identifier hs-type">AuctionMachine</span></a></span><span>
</span><span id="line-255"></span><span id="typedValidator"><span class="annot"><span class="annottext">typedValidator :: AuctionParams -&gt; TypedValidator AuctionMachine
</span><a href="Plutus.Contracts.SealedBidAuction.html#typedValidator"><span class="hs-identifier hs-var hs-var">typedValidator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompiledCode (AuctionParams -&gt; ValidatorType AuctionMachine)
-&gt; CompiledCode (ValidatorType AuctionMachine -&gt; UntypedValidator)
-&gt; AuctionParams
-&gt; TypedValidator AuctionMachine
forall a param.
Lift DefaultUni param =&gt;
CompiledCode (param -&gt; ValidatorType a)
-&gt; CompiledCode (ValidatorType a -&gt; UntypedValidator)
-&gt; param
-&gt; TypedValidator a
</span><a href="../../../../plutus-script-utils/html/src"><span class="hs-identifier hs-var">Scripts.mkTypedValidatorParam</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionMachine"><span class="hs-identifier hs-type">AuctionMachine</span></a></span><span>
</span><span id="line-256"></span><span>    </span><span class="hs-special">$$(</span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-type">PlutusTx.compile</span></a></span><span> </span><span class="hs-special">[||</span><span> </span><span class="hs-identifier">mkValidator</span><span> </span><span class="hs-special">||]</span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-special">$$(</span><span class="annot"><a href="../../../../plutus-tx/html/src"><span class="hs-identifier hs-type">PlutusTx.compile</span></a></span><span> </span><span class="hs-special">[||</span><span> </span><span class="hs-identifier">wrap</span><span> </span><span class="hs-special">||]</span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-259"></span><span>        </span><span id="local-6989586621680977550"><span class="annot"><span class="annottext">wrap :: (AuctionState -&gt; AuctionInput -&gt; ScriptContext -&gt; Bool)
-&gt; UntypedValidator
</span><a href="#local-6989586621680977550"><span class="hs-identifier hs-var hs-var">wrap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(AuctionState -&gt; AuctionInput -&gt; ScriptContext -&gt; Bool)
-&gt; UntypedValidator
forall sc d r.
(IsScriptContext sc, UnsafeFromData d, UnsafeFromData r) =&gt;
(d -&gt; r -&gt; sc -&gt; Bool) -&gt; UntypedValidator
</span><a href="../../../../plutus-script-utils/html/src"><span class="hs-identifier hs-var">Scripts.mkUntypedValidator</span></a></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span id="local-6989586621680977547"><span id="local-6989586621680977548"></span></span><span class="hs-keyword">data</span><span> </span><span id="AuctionError"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionError"><span class="hs-identifier hs-var">AuctionError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-262"></span><span>    </span><span id="StateMachineContractError"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#StateMachineContractError"><span class="hs-identifier hs-var">StateMachineContractError</span></a></span></span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">SM.SMContractError</span></a></span><span> </span><span class="hs-comment">-- ^ State machine operation failed</span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="AuctionContractError"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionContractError"><span class="hs-identifier hs-var">AuctionContractError</span></a></span></span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">ContractError</span></a></span><span> </span><span class="hs-comment">-- ^ Endpoint, coin selection, etc. failed</span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977541"><span id="local-6989586621680977543"><span class="annot"><span class="annottext">AuctionError -&gt; AuctionError -&gt; Bool
(AuctionError -&gt; AuctionError -&gt; Bool)
-&gt; (AuctionError -&gt; AuctionError -&gt; Bool) -&gt; Eq AuctionError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: AuctionError -&gt; AuctionError -&gt; Bool
$c/= :: AuctionError -&gt; AuctionError -&gt; Bool
== :: AuctionError -&gt; AuctionError -&gt; Bool
$c== :: AuctionError -&gt; AuctionError -&gt; Bool
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Haskell.Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977535"><span id="local-6989586621680977537"><span id="local-6989586621680977539"><span class="annot"><span class="annottext">Int -&gt; AuctionError -&gt; ShowS
[AuctionError] -&gt; ShowS
AuctionError -&gt; String
(Int -&gt; AuctionError -&gt; ShowS)
-&gt; (AuctionError -&gt; String)
-&gt; ([AuctionError] -&gt; ShowS)
-&gt; Show AuctionError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [AuctionError] -&gt; ShowS
$cshowList :: [AuctionError] -&gt; ShowS
show :: AuctionError -&gt; String
$cshow :: AuctionError -&gt; String
showsPrec :: Int -&gt; AuctionError -&gt; ShowS
$cshowsPrec :: Int -&gt; AuctionError -&gt; ShowS
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Haskell.Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. AuctionError -&gt; Rep AuctionError x)
-&gt; (forall x. Rep AuctionError x -&gt; AuctionError)
-&gt; Generic AuctionError
forall x. Rep AuctionError x -&gt; AuctionError
forall x. AuctionError -&gt; Rep AuctionError x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep AuctionError x -&gt; AuctionError
$cfrom :: forall x. AuctionError -&gt; Rep AuctionError x
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977525"><span id="local-6989586621680977527"><span id="local-6989586621680977529"><span id="local-6989586621680977531"><span class="annot"><span class="annottext">[AuctionError] -&gt; Encoding
[AuctionError] -&gt; Value
AuctionError -&gt; Encoding
AuctionError -&gt; Value
(AuctionError -&gt; Value)
-&gt; (AuctionError -&gt; Encoding)
-&gt; ([AuctionError] -&gt; Value)
-&gt; ([AuctionError] -&gt; Encoding)
-&gt; ToJSON AuctionError
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [AuctionError] -&gt; Encoding
$ctoEncodingList :: [AuctionError] -&gt; Encoding
toJSONList :: [AuctionError] -&gt; Value
$ctoJSONList :: [AuctionError] -&gt; Value
toEncoding :: AuctionError -&gt; Encoding
$ctoEncoding :: AuctionError -&gt; Encoding
toJSON :: AuctionError -&gt; Value
$ctoJSON :: AuctionError -&gt; Value
</span><a href="#local-6989586621680977525"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977521"><span id="local-6989586621680977523"><span class="annot"><span class="annottext">Value -&gt; Parser [AuctionError]
Value -&gt; Parser AuctionError
(Value -&gt; Parser AuctionError)
-&gt; (Value -&gt; Parser [AuctionError]) -&gt; FromJSON AuctionError
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [AuctionError]
$cparseJSONList :: Value -&gt; Parser [AuctionError]
parseJSON :: Value -&gt; Parser AuctionError
$cparseJSON :: Value -&gt; Parser AuctionError
</span><a href="#local-6989586621680977521"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span id="_AuctionContractError"><span id="_StateMachineContractError"><span id="_AuctionError"><span id="local-6989586621680977513"><span id="local-6989586621680977515"><span id="local-6989586621680977517"><span id="local-6989586621680977519"><span id="local-6989586621680977520"><span id="AsAuctionError"><span id="local-6989586621680978005"><span class="hs-identifier">makeClassyPrisms</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">AuctionError</span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680977488"><span id="local-6989586621680977490"><span id="local-6989586621680977492"><span id="local-6989586621680977494"><span id="local-6989586621680977496"><span id="local-6989586621680977498"><span id="local-6989586621680977500"><span id="local-6989586621680977502"><span id="local-6989586621680977504"><span id="local-6989586621680977506"><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">AsContractError</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionError"><span class="hs-identifier hs-type">AuctionError</span></a></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-270"></span><span>    </span><span id="local-6989586621680977486"><span class="annot"><span class="annottext">_ContractError :: p ContractError (f ContractError)
-&gt; p AuctionError (f AuctionError)
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">_ContractError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">p ContractError (f ContractError)
-&gt; p AuctionError (f AuctionError)
forall r. AsAuctionError r =&gt; Prism' r ContractError
</span><a href="Plutus.Contracts.SealedBidAuction.html#_AuctionContractError"><span class="hs-identifier hs-var">_AuctionContractError</span></a></span><span> </span><span class="annot"><span class="annottext">(p ContractError (f ContractError)
 -&gt; p AuctionError (f AuctionError))
-&gt; (p ContractError (f ContractError)
    -&gt; p ContractError (f ContractError))
-&gt; p ContractError (f ContractError)
-&gt; p AuctionError (f AuctionError)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">p ContractError (f ContractError)
-&gt; p ContractError (f ContractError)
forall r. AsContractError r =&gt; Prism' r ContractError
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">_ContractError</span></a></span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680977478"><span id="local-6989586621680977480"><span id="local-6989586621680977482"><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">SM.AsSMContractError</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionError"><span class="hs-identifier hs-type">AuctionError</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-273"></span><span>    </span><span id="local-6989586621680977476"><span class="annot"><span class="annottext">_SMContractError :: p SMContractError (f SMContractError)
-&gt; p AuctionError (f AuctionError)
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">_SMContractError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">p SMContractError (f SMContractError)
-&gt; p AuctionError (f AuctionError)
forall r. AsAuctionError r =&gt; Prism' r SMContractError
</span><a href="Plutus.Contracts.SealedBidAuction.html#_StateMachineContractError"><span class="hs-identifier hs-var">_StateMachineContractError</span></a></span><span> </span><span class="annot"><span class="annottext">(p SMContractError (f SMContractError)
 -&gt; p AuctionError (f AuctionError))
-&gt; (p SMContractError (f SMContractError)
    -&gt; p SMContractError (f SMContractError))
-&gt; p SMContractError (f SMContractError)
-&gt; p AuctionError (f AuctionError)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">p SMContractError (f SMContractError)
-&gt; p SMContractError (f SMContractError)
forall r. AsSMContractError r =&gt; Prism' r SMContractError
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">SM._SMContractError</span></a></span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#client"><span class="hs-identifier hs-type">client</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier hs-type">AuctionParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">StateMachineClient</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionState"><span class="hs-identifier hs-type">AuctionState</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionInput"><span class="hs-identifier hs-type">AuctionInput</span></a></span><span>
</span><span id="line-276"></span><span id="client"><span class="annot"><span class="annottext">client :: AuctionParams -&gt; StateMachineClient AuctionState AuctionInput
</span><a href="Plutus.Contracts.SealedBidAuction.html#client"><span class="hs-identifier hs-var hs-var">client</span></a></span></span><span> </span><span id="local-6989586621680977473"><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977473"><span class="hs-identifier hs-var">auctionParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977472"><span class="annot"><span class="annottext">machine :: AuctionMachine
</span><a href="#local-6989586621680977472"><span class="hs-identifier hs-var hs-var">machine</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AuctionParams -&gt; AuctionMachine
</span><a href="Plutus.Contracts.SealedBidAuction.html#auctionStateMachine"><span class="hs-identifier hs-var">auctionStateMachine</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977473"><span class="hs-identifier hs-var">auctionParams</span></a></span><span>
</span><span id="line-278"></span><span>        </span><span id="local-6989586621680977471"><span class="annot"><span class="annottext">inst :: TypedValidator AuctionMachine
</span><a href="#local-6989586621680977471"><span class="hs-identifier hs-var hs-var">inst</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AuctionParams -&gt; TypedValidator AuctionMachine
</span><a href="Plutus.Contracts.SealedBidAuction.html#typedValidator"><span class="hs-identifier hs-var">typedValidator</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977473"><span class="hs-identifier hs-var">auctionParams</span></a></span><span>
</span><span id="line-279"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">StateMachineInstance AuctionState AuctionInput
-&gt; StateMachineClient AuctionState AuctionInput
forall state input.
StateMachineInstance state input -&gt; StateMachineClient state input
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">SM.mkStateMachineClient</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AuctionMachine
-&gt; TypedValidator AuctionMachine
-&gt; StateMachineInstance AuctionState AuctionInput
forall s i.
StateMachine s i
-&gt; TypedValidator (StateMachine s i) -&gt; StateMachineInstance s i
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">SM.StateMachineInstance</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionMachine
</span><a href="#local-6989586621680977472"><span class="hs-identifier hs-var">machine</span></a></span><span> </span><span class="annot"><span class="annottext">TypedValidator AuctionMachine
</span><a href="#local-6989586621680977471"><span class="hs-identifier hs-var">inst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#startAuction"><span class="hs-identifier hs-type">startAuction</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">POSIXTime</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-ledger-api/html/src"><span class="hs-identifier hs-type">POSIXTime</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">Contract</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#SellerSchema"><span class="hs-identifier hs-type">SellerSchema</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionError"><span class="hs-identifier hs-type">AuctionError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span id="startAuction"><span class="annot"><span class="annottext">startAuction :: Value
-&gt; POSIXTime
-&gt; POSIXTime
-&gt; Contract () SellerSchema AuctionError ()
</span><a href="Plutus.Contracts.SealedBidAuction.html#startAuction"><span class="hs-identifier hs-var hs-var">startAuction</span></a></span></span><span> </span><span id="local-6989586621680977468"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680977468"><span class="hs-identifier hs-var">asset</span></a></span></span><span> </span><span id="local-6989586621680977467"><span class="annot"><span class="annottext">POSIXTime
</span><a href="#local-6989586621680977467"><span class="hs-identifier hs-var">endTime</span></a></span></span><span> </span><span id="local-6989586621680977466"><span class="annot"><span class="annottext">POSIXTime
</span><a href="#local-6989586621680977466"><span class="hs-identifier hs-var">payoutTime</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-283"></span><span>    </span><span id="local-6989586621680977465"><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621680977465"><span class="hs-identifier hs-var">self</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">AddressInEra BabbageEra -&gt; Address
forall era. AddressInEra era -&gt; Address
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">toPlutusAddress</span></a></span><span> </span><span class="annot"><span class="annottext">(AddressInEra BabbageEra -&gt; Address)
-&gt; Contract
     ()
     ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
     AuctionError
     (AddressInEra BabbageEra)
-&gt; Contract
     ()
     ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
     AuctionError
     Address
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Contract
  ()
  ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
  AuctionError
  (AddressInEra BabbageEra)
forall w (s :: Row *) e.
AsContractError e =&gt;
Contract w s e (AddressInEra BabbageEra)
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">ownAddress</span></a></span><span>
</span><span id="line-284"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977462"><span class="annot"><span class="annottext">params :: AuctionParams
</span><a href="#local-6989586621680977462"><span class="hs-identifier hs-var hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Address -&gt; Value -&gt; POSIXTime -&gt; POSIXTime -&gt; AuctionParams
</span><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier hs-var">AuctionParams</span></a></span><span> </span><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621680977465"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680977468"><span class="hs-identifier hs-var">asset</span></a></span><span> </span><span class="annot"><span class="annottext">POSIXTime
</span><a href="#local-6989586621680977467"><span class="hs-identifier hs-var">endTime</span></a></span><span> </span><span class="annot"><span class="annottext">POSIXTime
</span><a href="#local-6989586621680977466"><span class="hs-identifier hs-var">payoutTime</span></a></span><span>
</span><span id="line-285"></span><span>    </span><span class="annot"><span class="annottext">Contract
  ()
  ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
  AuctionError
  AuctionState
-&gt; Contract
     ()
     ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
     AuctionError
     ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(Contract
   ()
   ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
   AuctionError
   AuctionState
 -&gt; Contract
      ()
      ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
      AuctionError
      ())
-&gt; Contract
     ()
     ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
     AuctionError
     AuctionState
-&gt; Contract
     ()
     ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
     AuctionError
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">StateMachineClient AuctionState AuctionInput
-&gt; AuctionState
-&gt; Value
-&gt; Contract
     ()
     ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
     AuctionError
     AuctionState
forall w e state (schema :: Row *) input.
(FromData state, ToData state, ToData input,
 AsSMContractError e) =&gt;
StateMachineClient state input
-&gt; state -&gt; Value -&gt; Contract w schema e state
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">SM.runInitialise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AuctionParams -&gt; StateMachineClient AuctionState AuctionInput
</span><a href="Plutus.Contracts.SealedBidAuction.html#client"><span class="hs-identifier hs-var">client</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977462"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SealedBid] -&gt; AuctionState
</span><a href="Plutus.Contracts.SealedBidAuction.html#Ongoing"><span class="hs-identifier hs-var">Ongoing</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AuctionParams -&gt; Value
</span><a href="Plutus.Contracts.SealedBidAuction.html#apAsset"><span class="hs-identifier hs-var hs-var">apAsset</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977462"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#bid"><span class="hs-identifier hs-type">bid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier hs-type">AuctionParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">Promise</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#BidderSchema"><span class="hs-identifier hs-type">BidderSchema</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionError"><span class="hs-identifier hs-type">AuctionError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span id="bid"><span class="annot"><span class="annottext">bid :: AuctionParams -&gt; Promise () BidderSchema AuctionError ()
</span><a href="Plutus.Contracts.SealedBidAuction.html#bid"><span class="hs-identifier hs-var hs-var">bid</span></a></span></span><span> </span><span id="local-6989586621680977460"><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977460"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a w (s :: Row *) e b.
(HasEndpoint &quot;bid&quot; a s, AsContractError e, FromJSON a) =&gt;
(a -&gt; Contract w s e b) -&gt; Promise w s e b
forall (l :: Symbol) a w (s :: Row *) e b.
(HasEndpoint l a s, AsContractError e, FromJSON a) =&gt;
(a -&gt; Contract w s e b) -&gt; Promise w s e b
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">endpoint</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;bid&quot;</span></span><span> </span><span class="annot"><span class="annottext">((BidArgs
  -&gt; Contract
       ()
       ('R
          '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
             &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
             &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
       AuctionError
       ())
 -&gt; Promise
      ()
      ('R
         '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
            &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
            &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
      AuctionError
      ())
-&gt; (BidArgs
    -&gt; Contract
         ()
         ('R
            '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
               &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
               &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
         AuctionError
         ())
-&gt; Promise
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#BidArgs"><span class="hs-identifier hs-type">BidArgs</span></a></span><span class="hs-special">{</span><span id="local-6989586621680977458"><span class="annot"><span class="annottext">SecretArgument Integer
secretBid :: SecretArgument Integer
secretBid :: BidArgs -&gt; SecretArgument Integer
</span><a href="#local-6989586621680977458"><span class="hs-identifier hs-var hs-var">secretBid</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-289"></span><span>    </span><span id="local-6989586621680977457"><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621680977457"><span class="hs-identifier hs-var">self</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">AddressInEra BabbageEra -&gt; Address
forall era. AddressInEra era -&gt; Address
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">toPlutusAddress</span></a></span><span> </span><span class="annot"><span class="annottext">(AddressInEra BabbageEra -&gt; Address)
-&gt; Contract
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     (AddressInEra BabbageEra)
-&gt; Contract
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     Address
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Contract
  ()
  ('R
     '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
        &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
        &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
  AuctionError
  (AddressInEra BabbageEra)
forall w (s :: Row *) e.
AsContractError e =&gt;
Contract w s e (AddressInEra BabbageEra)
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">ownAddress</span></a></span><span>
</span><span id="line-290"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977456"><span class="annot"><span class="annottext">sBid :: Secret Integer
</span><a href="#local-6989586621680977456"><span class="hs-identifier hs-var hs-var">sBid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SecretArgument Integer -&gt; Secret Integer
forall a. SecretArgument a -&gt; Secret a
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">extractSecret</span></a></span><span> </span><span class="annot"><span class="annottext">SecretArgument Integer
</span><a href="#local-6989586621680977458"><span class="hs-identifier hs-var">secretBid</span></a></span><span>
</span><span id="line-291"></span><span>    </span><span class="annot"><span class="annottext">Contract
  ()
  ('R
     '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
        &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
        &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
  AuctionError
  (TransitionResult AuctionState AuctionInput)
-&gt; Contract
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(Contract
   ()
   ('R
      '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
         &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
         &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
   AuctionError
   (TransitionResult AuctionState AuctionInput)
 -&gt; Contract
      ()
      ('R
         '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
            &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
            &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
      AuctionError
      ())
-&gt; Contract
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     (TransitionResult AuctionState AuctionInput)
-&gt; Contract
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">StateMachineClient AuctionState AuctionInput
-&gt; AuctionInput
-&gt; Contract
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     (TransitionResult AuctionState AuctionInput)
forall w e state (schema :: Row *) input.
(AsSMContractError e, FromData state, ToData state,
 ToData input) =&gt;
StateMachineClient state input
-&gt; input -&gt; Contract w schema e (TransitionResult state input)
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">SM.runStep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AuctionParams -&gt; StateMachineClient AuctionState AuctionInput
</span><a href="Plutus.Contracts.SealedBidAuction.html#client"><span class="hs-identifier hs-var">client</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977460"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SealedBid -&gt; AuctionInput
</span><a href="Plutus.Contracts.SealedBidAuction.html#PlaceBid"><span class="hs-identifier hs-var">PlaceBid</span></a></span><span> </span><span class="annot"><span class="annottext">(SealedBid -&gt; AuctionInput) -&gt; SealedBid -&gt; AuctionInput
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinByteString -&gt; Address -&gt; SealedBid
</span><a href="Plutus.Contracts.SealedBidAuction.html#SealedBid"><span class="hs-identifier hs-var">SealedBid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Secret Integer -&gt; BuiltinByteString
</span><a href="Plutus.Contracts.SealedBidAuction.html#hashSecretInteger"><span class="hs-identifier hs-var">hashSecretInteger</span></a></span><span> </span><span class="annot"><span class="annottext">Secret Integer
</span><a href="#local-6989586621680977456"><span class="hs-identifier hs-var">sBid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621680977457"><span class="hs-identifier hs-var">self</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#reveal"><span class="hs-identifier hs-type">reveal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier hs-type">AuctionParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">Promise</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#BidderSchema"><span class="hs-identifier hs-type">BidderSchema</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionError"><span class="hs-identifier hs-type">AuctionError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span id="reveal"><span class="annot"><span class="annottext">reveal :: AuctionParams -&gt; Promise () BidderSchema AuctionError ()
</span><a href="Plutus.Contracts.SealedBidAuction.html#reveal"><span class="hs-identifier hs-var hs-var">reveal</span></a></span></span><span> </span><span id="local-6989586621680977453"><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977453"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a w (s :: Row *) e b.
(HasEndpoint &quot;reveal&quot; a s, AsContractError e, FromJSON a) =&gt;
(a -&gt; Contract w s e b) -&gt; Promise w s e b
forall (l :: Symbol) a w (s :: Row *) e b.
(HasEndpoint l a s, AsContractError e, FromJSON a) =&gt;
(a -&gt; Contract w s e b) -&gt; Promise w s e b
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">endpoint</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;reveal&quot;</span></span><span> </span><span class="annot"><span class="annottext">((RevealArgs
  -&gt; Contract
       ()
       ('R
          '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
             &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
             &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
       AuctionError
       ())
 -&gt; Promise
      ()
      ('R
         '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
            &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
            &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
      AuctionError
      ())
-&gt; (RevealArgs
    -&gt; Contract
         ()
         ('R
            '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
               &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
               &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
         AuctionError
         ())
-&gt; Promise
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#RevealArgs"><span class="hs-identifier hs-type">RevealArgs</span></a></span><span class="hs-special">{</span><span id="local-6989586621680977452"><span class="annot"><span class="annottext">Integer
publicBid :: Integer
publicBid :: RevealArgs -&gt; Integer
</span><a href="#local-6989586621680977452"><span class="hs-identifier hs-var hs-var">publicBid</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-295"></span><span>    </span><span id="local-6989586621680977451"><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621680977451"><span class="hs-identifier hs-var">self</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">AddressInEra BabbageEra -&gt; Address
forall era. AddressInEra era -&gt; Address
</span><a href="../../../../plutus-ledger/html/src"><span class="hs-identifier hs-var">toPlutusAddress</span></a></span><span> </span><span class="annot"><span class="annottext">(AddressInEra BabbageEra -&gt; Address)
-&gt; Contract
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     (AddressInEra BabbageEra)
-&gt; Contract
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     Address
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Contract
  ()
  ('R
     '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
        &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
        &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
  AuctionError
  (AddressInEra BabbageEra)
forall w (s :: Row *) e.
AsContractError e =&gt;
Contract w s e (AddressInEra BabbageEra)
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">ownAddress</span></a></span><span>
</span><span id="line-296"></span><span>    </span><span class="annot"><span class="annottext">Contract
  ()
  ('R
     '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
        &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
        &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
  AuctionError
  (TransitionResult AuctionState AuctionInput)
-&gt; Contract
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(Contract
   ()
   ('R
      '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
         &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
         &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
   AuctionError
   (TransitionResult AuctionState AuctionInput)
 -&gt; Contract
      ()
      ('R
         '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
            &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
            &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
      AuctionError
      ())
-&gt; Contract
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     (TransitionResult AuctionState AuctionInput)
-&gt; Contract
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">StateMachineClient AuctionState AuctionInput
-&gt; AuctionInput
-&gt; Contract
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     (TransitionResult AuctionState AuctionInput)
forall w e state (schema :: Row *) input.
(AsSMContractError e, FromData state, ToData state,
 ToData input) =&gt;
StateMachineClient state input
-&gt; input -&gt; Contract w schema e (TransitionResult state input)
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">SM.runStep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AuctionParams -&gt; StateMachineClient AuctionState AuctionInput
</span><a href="Plutus.Contracts.SealedBidAuction.html#client"><span class="hs-identifier hs-var">client</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977453"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RevealedBid -&gt; AuctionInput
</span><a href="Plutus.Contracts.SealedBidAuction.html#RevealBid"><span class="hs-identifier hs-var">RevealBid</span></a></span><span> </span><span class="annot"><span class="annottext">(RevealedBid -&gt; AuctionInput) -&gt; RevealedBid -&gt; AuctionInput
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Address -&gt; RevealedBid
</span><a href="Plutus.Contracts.SealedBidAuction.html#RevealedBid"><span class="hs-identifier hs-var">RevealedBid</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680977452"><span class="hs-identifier hs-var">publicBid</span></a></span><span> </span><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621680977451"><span class="hs-identifier hs-var">self</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-297"></span><span>
</span><span id="line-298"></span><span id="local-6989586621680977895"><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#payout"><span class="hs-identifier hs-type">payout</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">HasEndpoint</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;payout&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680977895"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier hs-type">AuctionParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">Promise</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680977895"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionError"><span class="hs-identifier hs-type">AuctionError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-299"></span><span id="payout"><span class="annot"><span class="annottext">payout :: AuctionParams -&gt; Promise () s AuctionError ()
</span><a href="Plutus.Contracts.SealedBidAuction.html#payout"><span class="hs-identifier hs-var hs-var">payout</span></a></span></span><span> </span><span id="local-6989586621680977450"><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977450"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a w (s :: Row *) e b.
(HasEndpoint &quot;payout&quot; a s, AsContractError e, FromJSON a) =&gt;
(a -&gt; Contract w s e b) -&gt; Promise w s e b
forall (l :: Symbol) a w (s :: Row *) e b.
(HasEndpoint l a s, AsContractError e, FromJSON a) =&gt;
(a -&gt; Contract w s e b) -&gt; Promise w s e b
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">endpoint</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;payout&quot;</span></span><span> </span><span class="annot"><span class="annottext">((() -&gt; Contract () s AuctionError ())
 -&gt; Promise () s AuctionError ())
-&gt; (() -&gt; Contract () s AuctionError ())
-&gt; Promise () s AuctionError ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-300"></span><span>    </span><span class="annot"><span class="annottext">Contract
  () s AuctionError (TransitionResult AuctionState AuctionInput)
-&gt; Contract () s AuctionError ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(Contract
   () s AuctionError (TransitionResult AuctionState AuctionInput)
 -&gt; Contract () s AuctionError ())
-&gt; Contract
     () s AuctionError (TransitionResult AuctionState AuctionInput)
-&gt; Contract () s AuctionError ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../plutus-tx/html/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">StateMachineClient AuctionState AuctionInput
-&gt; AuctionInput
-&gt; Contract
     () s AuctionError (TransitionResult AuctionState AuctionInput)
forall w e state (schema :: Row *) input.
(AsSMContractError e, FromData state, ToData state,
 ToData input) =&gt;
StateMachineClient state input
-&gt; input -&gt; Contract w schema e (TransitionResult state input)
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">SM.runStep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AuctionParams -&gt; StateMachineClient AuctionState AuctionInput
</span><a href="Plutus.Contracts.SealedBidAuction.html#client"><span class="hs-identifier hs-var">client</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977450"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AuctionInput
</span><a href="Plutus.Contracts.SealedBidAuction.html#Payout"><span class="hs-identifier hs-var">Payout</span></a></span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span class="hs-comment">-- | Top-level contract for seller</span><span>
</span><span id="line-303"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#sellerContract"><span class="hs-identifier hs-type">sellerContract</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier hs-type">AuctionParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">Contract</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#SellerSchema"><span class="hs-identifier hs-type">SellerSchema</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionError"><span class="hs-identifier hs-type">AuctionError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span id="sellerContract"><span class="annot"><span class="annottext">sellerContract :: AuctionParams -&gt; Contract () SellerSchema AuctionError ()
</span><a href="Plutus.Contracts.SealedBidAuction.html#sellerContract"><span class="hs-identifier hs-var hs-var">sellerContract</span></a></span></span><span> </span><span id="local-6989586621680977449"><span class="annot"><span class="annottext">params :: AuctionParams
</span><a href="#local-6989586621680977449"><span class="hs-identifier hs-var">params</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier hs-type">AuctionParams</span></a></span><span class="hs-special">{</span><span id="local-6989586621680977445"><span id="local-6989586621680977446"><span id="local-6989586621680977447"><span id="local-6989586621680977448"><span class="annot"><span class="annottext">Value
POSIXTime
Address
apPayoutTime :: POSIXTime
apEndTime :: POSIXTime
apAsset :: Value
apOwner :: Address
apPayoutTime :: AuctionParams -&gt; POSIXTime
apEndTime :: AuctionParams -&gt; POSIXTime
apAsset :: AuctionParams -&gt; Value
apOwner :: AuctionParams -&gt; Address
</span><a href="#local-6989586621680977445"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
-&gt; POSIXTime
-&gt; POSIXTime
-&gt; Contract () SellerSchema AuctionError ()
</span><a href="Plutus.Contracts.SealedBidAuction.html#startAuction"><span class="hs-identifier hs-var">startAuction</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680977447"><span class="hs-identifier hs-var">apAsset</span></a></span><span> </span><span class="annot"><span class="annottext">POSIXTime
</span><a href="#local-6989586621680977446"><span class="hs-identifier hs-var">apEndTime</span></a></span><span> </span><span class="annot"><span class="annottext">POSIXTime
</span><a href="#local-6989586621680977445"><span class="hs-identifier hs-var">apPayoutTime</span></a></span><span> </span><span class="annot"><span class="annottext">Contract
  ()
  ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
  AuctionError
  ()
-&gt; Contract
     ()
     ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
     AuctionError
     ()
-&gt; Contract
     ()
     ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
     AuctionError
     ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Promise
  ()
  ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
  AuctionError
  ()
-&gt; Contract
     ()
     ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
     AuctionError
     ()
forall w (s :: Row *) e a. Promise w s e a -&gt; Contract w s e a
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var hs-var">awaitPromise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AuctionParams
-&gt; Promise
     ()
     ('R '[ &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint)])
     AuctionError
     ()
forall (s :: Row *).
HasEndpoint &quot;payout&quot; () s =&gt;
AuctionParams -&gt; Promise () s AuctionError ()
</span><a href="Plutus.Contracts.SealedBidAuction.html#payout"><span class="hs-identifier hs-var">payout</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977449"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span>
</span><span id="line-306"></span><span class="hs-comment">-- | Top-level contract for buyer</span><span>
</span><span id="line-307"></span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#bidderContract"><span class="hs-identifier hs-type">bidderContract</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionParams"><span class="hs-identifier hs-type">AuctionParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-type">Contract</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#BidderSchema"><span class="hs-identifier hs-type">BidderSchema</span></a></span><span> </span><span class="annot"><a href="Plutus.Contracts.SealedBidAuction.html#AuctionError"><span class="hs-identifier hs-type">AuctionError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span id="bidderContract"><span class="annot"><span class="annottext">bidderContract :: AuctionParams -&gt; Contract () BidderSchema AuctionError ()
</span><a href="Plutus.Contracts.SealedBidAuction.html#bidderContract"><span class="hs-identifier hs-var hs-var">bidderContract</span></a></span></span><span> </span><span id="local-6989586621680977443"><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977443"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Promise
   ()
   ('R
      '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
         &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
         &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
   AuctionError
   ()]
-&gt; Contract
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     ()
forall w (s :: Row *) e a. [Promise w s e a] -&gt; Contract w s e a
</span><a href="../../../../plutus-contract/html/src"><span class="hs-identifier hs-var">selectList</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">AuctionParams -&gt; Promise () BidderSchema AuctionError ()
</span><a href="Plutus.Contracts.SealedBidAuction.html#bid"><span class="hs-identifier hs-var">bid</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977443"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AuctionParams -&gt; Promise () BidderSchema AuctionError ()
</span><a href="Plutus.Contracts.SealedBidAuction.html#reveal"><span class="hs-identifier hs-var">reveal</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977443"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AuctionParams
-&gt; Promise
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     ()
forall (s :: Row *).
HasEndpoint &quot;payout&quot; () s =&gt;
AuctionParams -&gt; Promise () s AuctionError ()
</span><a href="Plutus.Contracts.SealedBidAuction.html#payout"><span class="hs-identifier hs-var">payout</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977443"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Contract
  ()
  ('R
     '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
        &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
        &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
  AuctionError
  ()
-&gt; Contract
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     ()
-&gt; Contract
     ()
     ('R
        '[ &quot;bid&quot; ':-&gt; (EndpointValue BidArgs, ActiveEndpoint),
           &quot;payout&quot; ':-&gt; (EndpointValue (), ActiveEndpoint),
           &quot;reveal&quot; ':-&gt; (EndpointValue RevealArgs, ActiveEndpoint)])
     AuctionError
     ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../file:///nix/store/sc7phsrhp1xzn7n38mdjvapkbif3753i-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionParams -&gt; Contract () BidderSchema AuctionError ()
</span><a href="Plutus.Contracts.SealedBidAuction.html#bidderContract"><span class="hs-identifier hs-var">bidderContract</span></a></span><span> </span><span class="annot"><span class="annottext">AuctionParams
</span><a href="#local-6989586621680977443"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-309"></span></pre></body></html>
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Writing a basic Plutus app in an emulated environment &mdash; Plutus Tools SDK User Guide 1.0.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Extending the basic Plutus app with the constraints API" href="basic-apps-constraints.html" />
    <link rel="prev" title="Tutorials" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #fcfcfc" >
            <a href="../../index.html" class="icon icon-home"> Plutus Tools SDK User Guide
            <img src="../../_static/cardano-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Explore Plutus</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../explanations/index.html">Explanations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../explanations/plutus-tools-component-descriptions.html">Plutus tools in development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../explanations/plutus-tools-component-descriptions.html#logical-components">Logical components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../explanations/plutus-tools-component-descriptions.html#marconi">1. Marconi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/plutus-tools-component-descriptions.html#plutus-use-case-examples">2. Plutus use case examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/plutus-tools-component-descriptions.html#pab-plutus-application-backend">3. PAB (Plutus application backend)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/plutus-tools-component-descriptions.html#contract-monad-emulator">4. Contract monad emulator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/plutus-tools-component-descriptions.html#plutus-contract-model-testing">5. Plutus contract model testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/plutus-tools-component-descriptions.html#plutus-contract-state-machine">6. Plutus contract state machine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/plutus-tools-component-descriptions.html#contract-api-also-known-as-contract-monad">7. Contract API (also known as Contract monad)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/plutus-tools-component-descriptions.html#plutus-chain-index">8. Plutus chain index</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/plutus-tools-component-descriptions.html#plutus-ledger-constraints">9. Plutus ledger constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/plutus-tools-component-descriptions.html#plutus-tx-constraints">10. Plutus Tx constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/plutus-tools-component-descriptions.html#id10">11. Plutus ledger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/plutus-tools-component-descriptions.html#plutus-script-utils">12. Plutus script utils</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../explanations/rollback.html">What is a rollback?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../explanations/rollback.html#what-does-this-mean-for-dapps">What does this mean for dapps?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../explanations/pab.html">What is the PAB?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../explanations/pab.html#client-interface">Client interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../explanations/pab.html#other-components">Other components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../explanations/pab.html#chain-index">Chain index</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/pab.html#alonzo-node">Alonzo node</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/pab.html#wallet">Wallet</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../explanations/pab.html#deployment-scenarios">Deployment Scenarios</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../explanations/pab.html#hosted">Hosted</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/pab.html#in-browser">In-browser</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../explanations/order-book-pattern.html">What is the order book pattern?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../explanations/order-book-pattern.html#example-distributed-exchange">Example: Distributed exchange</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../explanations/order-book-pattern.html#orders-and-plutus-scripts">Orders and Plutus scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/order-book-pattern.html#decentralisation">Decentralisation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../explanations/order-book-pattern.html#generalising-the-pattern">Generalising the pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../explanations/order-book-pattern.html#off-chain-oracles">Off-chain oracles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/order-book-pattern.html#on-chain-oracles">On-chain oracles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../explanations/order-book-pattern.html#state-machines">State machines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../explanations/order-book-pattern.html#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Writing a basic Plutus app in an emulated environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#defining-the-types">Defining the types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#instances-for-data-types">Instances for data types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#defining-the-validator-script">Defining the validator script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#asking-for-input">Asking for input</a></li>
<li class="toctree-l3"><a class="reference internal" href="#locking-the-funds">Locking the funds</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unlocking-the-funds">Unlocking the funds</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-app-on-the-plutus-apps-emulator">Running the app on the Plutus apps emulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exercise">Exercise</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="basic-apps-constraints.html">Extending the basic Plutus app with the constraints API</a></li>
<li class="toctree-l2"><a class="reference internal" href="contract-testing.html">Property-based testing of Plutus contracts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contract-testing.html#an-overview-of-the-guessing-game">An overview of the guessing game</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#emulated-wallets">Emulated wallets</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#values-and-tokens">Values and <span class="xref std std-term">tokens</span></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contract-testing.html#introducing-contract-models">Introducing contract models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#generating-actions">Generating actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#modelling-expectations">Modelling expectations</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#restricting-test-cases-with-preconditions">Restricting test cases with preconditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#performing-actions">Performing actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#shrinking-actions">Shrinking Actions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contract-testing.html#debugging-the-model">Debugging the model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#adding-delays-to-test-cases">Adding delays to test cases</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#rerunning-a-failed-test">Rerunning a failed test</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#controlling-the-log-level">Controlling the log-level</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#refining-preconditions">Refining preconditions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contract-testing.html#measuring-and-tuning-distributions">Measuring and tuning distributions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#custom-generators-vs-preconditions">Custom generators vs preconditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#instrumenting-contract-models-to-gather-statistics">Instrumenting contract models to gather statistics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contract-testing.html#goal-directed-testing-with-dynamic-logic">Goal-directed testing with dynamic logic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#introducing-the-dynamic-logic-monad">Introducing the dynamic logic monad</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#quantifiers-in-dynamic-logic">Quantifiers in dynamic logic</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#repeating-a-dynamic-logic-test">Repeating a dynamic logic test</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#something-good-is-always-possible">Something good is always possible</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#monitoring-and-tuning-dynamic-logic-tests">Monitoring and tuning dynamic logic tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#more-dynamic-logic">More dynamic logic</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contract-testing.html#limitations">Limitations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#testing-only-via-contract-endpoints">Testing only via <span class="xref std std-term">contract endpoints</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#test-assumptions-on-timing">Test assumptions on timing</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-testing.html#testing-for-information-leaks">Testing for information leaks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contract-testing.html#further-examples">Further Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contract-models.html">Testing Plutus Contracts with Contract Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contract-models.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="contract-models.html#basic-contract-models">Basic Contract Models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#example-a-simple-escrow-contract">Example: A Simple Escrow Contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#the-contract-model-type">The Contract Model Type</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#what-contracts-shall-we-test">What contracts shall we test?</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#what-actions-should-tests-perform">What actions should tests perform?</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#generating-actions">Generating Actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#running-tests-and-debugging-the-model">Running tests and debugging the model</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#analysing-the-distribution-of-tests">Analysing the distribution of tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#exercises">Exercises</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contract-models.html#parameterising-models-and-dynamic-contract-instances">Parameterising Models and Dynamic Contract Instances</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#adding-an-initial-action-and-test-case-phases">Adding an initial action, and test case phases</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#dynamic-contract-instances">Dynamic contract instances</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#running-our-extended-tests-another-design-issue">Running our extended tests; another design issue</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#id3">Exercises</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contract-models.html#testing-no-locked-funds-with-dynamic-logic">Testing “No Locked Funds” with Dynamic Logic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#writing-and-testing-properties-using-dynamic-logic">Writing and testing properties using Dynamic Logic</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#digression-revisiting-a-design-decision">Digression: revisiting a design decision</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#fair-s-fair-unilateral-strategies">Fair’s fair: Unilateral strategies</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#fixing-the-contract-refunds">Fixing the contract: refunds</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#id4">Exercises</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contract-models.html#taking-time-into-account">Taking Time into Account</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#slots-and-posixtime">Slots and POSIXTime</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#initialising-the-deadline">Initialising the deadline</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#modelling-the-passage-of-time">Modelling the passage of time</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#monitoring-and-the-distribution-of-tests">Monitoring and the distribution of tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#no-locked-funds">No locked funds?</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#digression-testing-the-model-alone-for-speed">Digression: testing the model alone for speed</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#id5">Exercises</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contract-models.html#measuring-coverage-of-on-chain-code">Measuring coverage of on-chain code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#adding-a-coverage-index">Adding a coverage index</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#measuring-coverage">Measuring coverage</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#interpreting-the-coverage-annotations">Interpreting the coverage annotations</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#the-generated-coverage-report">The generated coverage report</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contract-models.html#crashes-and-how-to-tolerate-them">Crashes, and how to tolerate them</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#id6">Exercises</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contract-models.html#debugging-the-auction-contract-with-model-assertions">Debugging the Auction contract with model assertions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#modelling-the-auction-contract">Modelling the Auction contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#id7">No locked funds?</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#model-assertions-and-unexpected-expectations">Model assertions, and unexpected expectations.</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#crashing-the-auction">Crashing the auction</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#coverage-of-the-auction-contract">Coverage of the Auction contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#id8">Exercises</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contract-models.html#becoming-level-1-certification-ready">Becoming Level 1 Certification Ready</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contract-models.html#id9">Exercises</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/index.html">How-to guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../howtos/getting-started.html">How to get started with the Plutus Platform</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../howtos/getting-started.html#further-reading">Further reading</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../howtos/writing-a-scalable-app.html">How to write a scalable Plutus app</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../howtos/writing-a-scalable-app.html#the-building-blocks">The building blocks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../howtos/writing-a-scalable-app.html#transaction-outputs">Transaction outputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../howtos/writing-a-scalable-app.html#state-of-transaction-outputs">State of transaction outputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../howtos/writing-a-scalable-app.html#changing-the-state-of-our-app">Changing the state of our app</a></li>
<li class="toctree-l4"><a class="reference internal" href="../howtos/writing-a-scalable-app.html#minting-policy-scripts">Minting Policy Scripts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../howtos/writing-a-scalable-app.html#scalability-guidelines">Scalability guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howtos/writing-a-scalable-app.html#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../howtos/writing-a-scalable-app.html#decentralised-exchange">Decentralised exchange</a></li>
<li class="toctree-l4"><a class="reference internal" href="../howtos/writing-a-scalable-app.html#marlowe">Marlowe</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../howtos/writing-a-scalable-app.html#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../howtos/handling-blockchain-events.html">How to handle blockchain events</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../howtos/handling-blockchain-events.html#transaction-output-lifecycle">Transaction output lifecycle</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../howtos/handling-blockchain-events.html#transaction-states">Transaction states</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../howtos/handling-blockchain-events.html#pab-functions-for-listening-to-state-changes">PAB functions for listening to state changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../howtos/analysing-scripts.html">How to analyse the cost and size of Plutus scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../howtos/analysing-scripts.html#resource-use-of-plutus-scripts">Resource use of Plutus scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howtos/analysing-scripts.html#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../howtos/analysing-scripts.html#validator-scripts">Validator scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../howtos/analysing-scripts.html#partial-transactions">Partial transactions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../howtos/plutus-spending-script-example.html">Plutus Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../howtos/plutus-spending-script-example.html#what-is-a-plutus-spending-script">What is a Plutus spending script?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../howtos/plutus-spending-script-example.html#an-example-of-using-a-plutus-spending-script">An example of using a Plutus spending script</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#error-codes">Error codes</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Architectural decision records</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../adr/index.html">Architectural Decision Records</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0001-record-architecture-decisions.html">ADR 1: Record architectural decisions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0001-record-architecture-decisions.html#authors">Authors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0001-record-architecture-decisions.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0001-record-architecture-decisions.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0001-record-architecture-decisions.html#decision">Decision</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0001-record-architecture-decisions.html#implications">Implications</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0001-record-architecture-decisions.html#adr-template">ADR template</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0002-repository-standardization.html">ADR 2: Repository Standardization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0002-repository-standardization.html#authors">Authors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0002-repository-standardization.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0002-repository-standardization.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0002-repository-standardization.html#decision">Decision</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0002-repository-standardization.html#argument">Argument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0002-repository-standardization.html#implications">Implications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0003-marconi-monorepo.html">ADR 3: Move Marconi into a separate repository</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0003-marconi-monorepo.html#authors">Authors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0003-marconi-monorepo.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0003-marconi-monorepo.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0003-marconi-monorepo.html#decision">Decision</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0003-marconi-monorepo.html#implications">Implications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0003-marconi-monorepo.html#related-decisions">Related Decisions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0004-marconi-initiative.html">ADR 4: Making a case for Marconi</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0004-marconi-initiative.html#author-s">Author(s)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0004-marconi-initiative.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0004-marconi-initiative.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0004-marconi-initiative.html#design-principles-of-marconi">Design principles of Marconi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0004-marconi-initiative.html#indexing-solution">Indexing solution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0004-marconi-initiative.html#query-and-storage">Query and storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0004-marconi-initiative.html#identification-of-events">Identification of events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0004-marconi-initiative.html#event-streams">Event streams</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0005-pab-indexing-solution-integration.html">ADR 5: PAB and indexing component integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0005-pab-indexing-solution-integration.html#author-s">Author(s)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0005-pab-indexing-solution-integration.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0005-pab-indexing-solution-integration.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0005-pab-indexing-solution-integration.html#decisions">Decisions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0005-pab-indexing-solution-integration.html#alternative-solutions">Alternative solutions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0005-pab-indexing-solution-integration.html#make-sure-all-components-are-in-sync">Make sure all components are in sync</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0005-pab-indexing-solution-integration.html#add-indexing-specific-functions-in-the-contract-api">Add indexing specific functions in the Contract API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0005-pab-indexing-solution-integration.html#query-functions-should-interact-with-a-single-source-of-truth">Query functions should interact with a single source of truth</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0005-pab-indexing-solution-integration.html#implications">Implications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0005-pab-indexing-solution-integration.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0006-common-contract-api.html">ADR 6: Common Contract API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0006-common-contract-api.html#authors">Authors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0006-common-contract-api.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0006-common-contract-api.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0006-common-contract-api.html#decision">Decision</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0006-common-contract-api.html#argument">Argument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0006-common-contract-api.html#implications">Implications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0006-common-contract-api.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0007-support-reference-inputs-in-constraint-library.html">ADR 7: Support reference inputs in constraint library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0007-support-reference-inputs-in-constraint-library.html#author-s">Author(s)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0007-support-reference-inputs-in-constraint-library.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0007-support-reference-inputs-in-constraint-library.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0007-support-reference-inputs-in-constraint-library.html#decision">Decision</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0007-support-reference-inputs-in-constraint-library.html#argument">Argument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0007-support-reference-inputs-in-constraint-library.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0008-support-inline-datums-in-constraint-library.html">ADR 8: Support inline datums in constraint library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0008-support-inline-datums-in-constraint-library.html#author-s">Author(s)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0008-support-inline-datums-in-constraint-library.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0008-support-inline-datums-in-constraint-library.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0008-support-inline-datums-in-constraint-library.html#decision">Decision</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0008-support-inline-datums-in-constraint-library.html#argument">Argument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0008-support-inline-datums-in-constraint-library.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0009-support-reference-scripts-in-constraint-library.html">ADR 9: Support reference scripts in constraint library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0009-support-reference-scripts-in-constraint-library.html#author-s">Author(s)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0009-support-reference-scripts-in-constraint-library.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0009-support-reference-scripts-in-constraint-library.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0009-support-reference-scripts-in-constraint-library.html#decision">Decision</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0009-support-reference-scripts-in-constraint-library.html#argument">Argument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0009-support-reference-scripts-in-constraint-library.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0010-marconi-indexer-rollbacks.html">ADR 10: Rolling back on-disk data for Marconi indexers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0010-marconi-indexer-rollbacks.html#author-s">Author(s)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0010-marconi-indexer-rollbacks.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0010-marconi-indexer-rollbacks.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0010-marconi-indexer-rollbacks.html#decision">Decision</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0010-marconi-indexer-rollbacks.html#events">Events</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0010-marconi-indexer-rollbacks.html#queries">Queries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0010-marconi-indexer-rollbacks.html#api-design">API Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0010-marconi-indexer-rollbacks.html#implementation">Implementation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0011-support-return-and-total-collateral-when-building-transactions.html">ADR 11: Support return and total collateral when building transactions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0011-support-return-and-total-collateral-when-building-transactions.html#author-s">Author(s)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0011-support-return-and-total-collateral-when-building-transactions.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0011-support-return-and-total-collateral-when-building-transactions.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0011-support-return-and-total-collateral-when-building-transactions.html#decision">Decision</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0011-support-return-and-total-collateral-when-building-transactions.html#argument">Argument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0011-support-return-and-total-collateral-when-building-transactions.html#alternatives">Alternatives</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0011-support-return-and-total-collateral-when-building-transactions.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0012-commit-to-data-types-in-cardano-api.html">ADR 12: Commit to data types in cardano-api</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0012-commit-to-data-types-in-cardano-api.html#author-s">Author(s)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0012-commit-to-data-types-in-cardano-api.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0012-commit-to-data-types-in-cardano-api.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0012-commit-to-data-types-in-cardano-api.html#decision">Decision</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0012-commit-to-data-types-in-cardano-api.html#argument">Argument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0012-commit-to-data-types-in-cardano-api.html#alternatives">Alternatives</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0012-commit-to-data-types-in-cardano-api.html#define-our-own-data-types-for-off-chain-use">Define our own data types for off-chain use</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0012-commit-to-data-types-in-cardano-api.html#implications">Implications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0012-commit-to-data-types-in-cardano-api.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0013-tx-validity-time-range-fix.html">ADR 13: Transaction validity time range fix</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0013-tx-validity-time-range-fix.html#author-s">Author(s)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0013-tx-validity-time-range-fix.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0013-tx-validity-time-range-fix.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0013-tx-validity-time-range-fix.html#decision">Decision</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0013-tx-validity-time-range-fix.html#argument">Argument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0013-tx-validity-time-range-fix.html#implications">Implications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0013-tx-validity-time-range-fix.html#alternatives">Alternatives</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0013-tx-validity-time-range-fix.html#add-mustvalidateinslotrange-constraint">Add <code class="docutils literal notranslate"><span class="pre">MustValidateInSlotRange</span></code> constraint</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0013-tx-validity-time-range-fix.html#remove-mustvalidateintimerange">Remove <code class="docutils literal notranslate"><span class="pre">mustValidateInTimeRange</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0013-tx-validity-time-range-fix.html#alter-mustvalidateintimerange">Alter <code class="docutils literal notranslate"><span class="pre">mustValidateInTimeRange</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0013-tx-validity-time-range-fix.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0014-marconi-query-interface.html">ADR 14: Marconi Query Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0014-marconi-query-interface.html#author-s">Author(s)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0014-marconi-query-interface.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0014-marconi-query-interface.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0014-marconi-query-interface.html#decision">Decision</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0014-marconi-query-interface.html#implications">Implications</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0015-time-conversion.html">ADR 15: Time conversion semantic change</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0015-time-conversion.html#author-s">Author(s)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0015-time-conversion.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0015-time-conversion.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0015-time-conversion.html#decision">Decision</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0015-time-conversion.html#argument">Argument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0015-time-conversion.html#implications">Implications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0015-time-conversion.html#alternatives">Alternatives</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0015-time-conversion.html#changing-the-representation-of-slotconfig-to-the-correct-one">Changing the representation of <code class="docutils literal notranslate"><span class="pre">SlotConfig</span></code> to the correct one</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0015-time-conversion.html#directly-use-epochinfo-in-the-emulator-and-contract-api">Directly use EpochInfo in the emulator and Contract API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0015-time-conversion.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0016-cardano-node-emulator.html">ADR 16: Self-contained cardano-node emulator component</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0016-cardano-node-emulator.html#author-s">Author(s)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0016-cardano-node-emulator.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0016-cardano-node-emulator.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0016-cardano-node-emulator.html#decision">Decision</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0016-cardano-node-emulator.html#argument">Argument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0016-cardano-node-emulator.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adr/0017-end-to-end-testing-strategy.html">ADR 17: End-to-end testing strategy for Plutus, cardano-ledger-api and cardano-node-client</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0017-end-to-end-testing-strategy.html#author-s">Author(s)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0017-end-to-end-testing-strategy.html#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0017-end-to-end-testing-strategy.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0017-end-to-end-testing-strategy.html#decision">Decision</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0017-end-to-end-testing-strategy.html#types-of-plutus-tests-for-the-plutus-e2e-tests-haskell-framework">Types of Plutus tests for the <code class="docutils literal notranslate"><span class="pre">plutus-e2e-tests</span></code> Haskell framework</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0017-end-to-end-testing-strategy.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0017-end-to-end-testing-strategy.html#argument">Argument</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0017-end-to-end-testing-strategy.html#pros-of-building-and-maintaining-our-own-test-framework">Pros of building and maintaining our own test framework</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0017-end-to-end-testing-strategy.html#cons-of-building-and-maintaining-our-own-test-framework">Cons of building and maintaining our own test framework</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0017-end-to-end-testing-strategy.html#additional-considerations">Additional Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0017-end-to-end-testing-strategy.html#alternatives">Alternatives</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adr/0017-end-to-end-testing-strategy.html#notes">Notes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../adr/0017-end-to-end-testing-strategy.html#other-places-spinning-up-a-local-testnet">Other places spinning up a local testnet</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../reference/examples.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/cost-model-parameters.html">Cost model parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/bibliography.html">Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/index.html#elsewhere">Elsewhere</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #fcfcfc" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Plutus Tools SDK User Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Tutorials</a> &raquo;</li>
      <li>Writing a basic Plutus app in an emulated environment</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/input-output-hk/plutus/blob/master/doc/plutus/tutorials/basic-apps.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="writing-a-basic-plutus-app-in-an-emulated-environment">
<span id="basic-apps-tutorial"></span><h1>Writing a basic Plutus app in an emulated environment<a class="headerlink" href="#writing-a-basic-plutus-app-in-an-emulated-environment" title="Permalink to this heading"></a></h1>
<p><a class="reference internal" href="../../reference/glossary.html#term-contract-application"><span class="xref std std-term">Plutus apps</span></a> are programs that run off-chain and manage active contract instances.
They monitor the blockchain, ask for user input, and submit transactions to the blockchain.
If you are a contract author, building a Plutus app is the easiest way to create and spend Plutus script outputs.
In this tutorial you are going to write a Plutus app that locks some ada in a script output and splits them evenly between two recipients.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span><span class="w"> </span><span class="nn">Cardano.Node.Emulator.Params</span><span class="w"> </span><span class="p">(</span><span class="nf">pNetworkId</span><span class="p">)</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Control.Monad</span><span class="w"> </span><span class="p">(</span><span class="nf">forever</span><span class="p">,</span><span class="w"> </span><span class="nf">void</span><span class="p">)</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Control.Monad.Freer.Extras.Log</span><span class="w"> </span><span class="p">(</span><span class="kt">LogLevel</span><span class="w"> </span><span class="p">(</span><span class="kt">Debug</span><span class="p">,</span><span class="w"> </span><span class="kt">Info</span><span class="p">))</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Data.Aeson</span><span class="w"> </span><span class="p">(</span><span class="kt">FromJSON</span><span class="p">,</span><span class="w"> </span><span class="kt">ToJSON</span><span class="p">)</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Data.Default</span><span class="w"> </span><span class="p">(</span><span class="nf">def</span><span class="p">)</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Data.Text</span><span class="w"> </span><span class="n">qualified</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="kt">T</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Data.Text</span><span class="w"> </span><span class="n">qualified</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="kt">Text</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">GHC.Generics</span><span class="w"> </span><span class="p">(</span><span class="kt">Generic</span><span class="p">)</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Ledger</span><span class="w"> </span><span class="p">(</span><span class="kt">Ada</span><span class="p">,</span><span class="w"> </span><span class="kt">CardanoAddress</span><span class="p">,</span><span class="w"> </span><span class="kt">PaymentPubKeyHash</span><span class="w"> </span><span class="p">(</span><span class="nf">unPaymentPubKeyHash</span><span class="p">),</span><span class="w"> </span><span class="nf">toPlutusAddress</span><span class="p">)</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Ledger.Ada</span><span class="w"> </span><span class="n">qualified</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="kt">Ada</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Ledger.Constraints</span><span class="w"> </span><span class="n">qualified</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="kt">Constraints</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Ledger.Typed.Scripts</span><span class="w"> </span><span class="n">qualified</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="kt">Scripts</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Plutus.Contract</span><span class="w"> </span><span class="p">(</span><span class="kt">Contract</span><span class="p">,</span><span class="w"> </span><span class="kt">Endpoint</span><span class="p">,</span><span class="w"> </span><span class="kt">Promise</span><span class="p">,</span><span class="w"> </span><span class="nf">endpoint</span><span class="p">,</span><span class="w"> </span><span class="nf">getParams</span><span class="p">,</span><span class="w"> </span><span class="nf">logInfo</span><span class="p">,</span><span class="w"> </span><span class="nf">selectList</span><span class="p">,</span><span class="w"> </span><span class="nf">submitTxConstraints</span><span class="p">,</span><span class="w"></span>
<span class="w">                        </span><span class="nf">submitTxConstraintsSpending</span><span class="p">,</span><span class="w"> </span><span class="nf">type</span><span class="w"> </span><span class="p">(</span><span class="o">.\/</span><span class="p">),</span><span class="w"> </span><span class="nf">utxosAt</span><span class="p">)</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Plutus.Contract.Test</span><span class="w"> </span><span class="p">(</span><span class="nf">w1</span><span class="p">,</span><span class="w"> </span><span class="nf">w2</span><span class="p">)</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Plutus.Trace.Emulator</span><span class="w"> </span><span class="n">qualified</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="kt">Trace</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Plutus.V1.Ledger.Api</span><span class="w"> </span><span class="p">(</span><span class="kt">Address</span><span class="p">,</span><span class="w"> </span><span class="kt">ScriptContext</span><span class="w"> </span><span class="p">(</span><span class="kt">ScriptContext</span><span class="p">,</span><span class="w"> </span><span class="nf">scriptContextTxInfo</span><span class="p">),</span><span class="w"> </span><span class="kt">TxInfo</span><span class="w"> </span><span class="p">(</span><span class="nf">txInfoOutputs</span><span class="p">),</span><span class="w"></span>
<span class="w">                             </span><span class="kt">TxOut</span><span class="w"> </span><span class="p">(</span><span class="kt">TxOut</span><span class="p">,</span><span class="w"> </span><span class="nf">txOutAddress</span><span class="p">,</span><span class="w"> </span><span class="nf">txOutValue</span><span class="p">),</span><span class="w"> </span><span class="kt">Value</span><span class="p">)</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">PlutusTx</span><span class="w"> </span><span class="n">qualified</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">PlutusTx.Prelude</span><span class="w"> </span><span class="p">(</span><span class="kt">Bool</span><span class="p">,</span><span class="w"> </span><span class="kt">Maybe</span><span class="w"> </span><span class="p">(</span><span class="kt">Just</span><span class="p">,</span><span class="w"> </span><span class="kt">Nothing</span><span class="p">),</span><span class="w"> </span><span class="kt">Semigroup</span><span class="w"> </span><span class="p">((</span><span class="o">&lt;&gt;</span><span class="p">)),</span><span class="w"> </span><span class="nf">mapMaybe</span><span class="p">,</span><span class="w"> </span><span class="nf">mconcat</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="o">$</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;&amp;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="o">-</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="o">.</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="o">==</span><span class="p">),</span><span class="w"></span>
<span class="w">                         </span><span class="p">(</span><span class="o">&gt;=</span><span class="p">))</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Prelude</span><span class="w"> </span><span class="p">(</span><span class="kt">IO</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;$&gt;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="o">&gt;&gt;</span><span class="p">))</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Prelude</span><span class="w"> </span><span class="n">qualified</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="kt">Haskell</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Schema</span><span class="w"> </span><span class="p">(</span><span class="kt">ToSchema</span><span class="p">)</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Wallet.Emulator.Stream</span><span class="w"> </span><span class="p">(</span><span class="nf">filterLogLevel</span><span class="p">)</span><span class="w"></span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Wallet.Emulator.Wallet</span><span class="w"> </span><span class="p">(</span><span class="kt">Wallet</span><span class="p">,</span><span class="w"> </span><span class="nf">mockWalletAddress</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<section id="defining-the-types">
<h2>Defining the types<a class="headerlink" href="#defining-the-types" title="Permalink to this heading"></a></h2>
<p>You start by defining some data types that you’re going to need for the <em>Split</em> app.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">SplitData</span><span class="w"> </span><span class="ow">=</span><span class="w"></span>
<span class="w">    </span><span class="kt">SplitData</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="n">recipient1</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Address</span><span class="w"> </span><span class="c1">-- ^ First recipient of the funds</span><span class="w"></span>
<span class="w">        </span><span class="p">,</span><span class="w"> </span><span class="n">recipient2</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Address</span><span class="w"> </span><span class="c1">-- ^ Second recipient of the funds</span><span class="w"></span>
<span class="w">        </span><span class="p">,</span><span class="w"> </span><span class="n">amount</span><span class="w">     </span><span class="ow">::</span><span class="w"> </span><span class="kt">Ada</span><span class="w"> </span><span class="c1">-- ^ How much Ada we want to lock</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="kr">deriving</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="p">(</span><span class="kt">Haskell</span><span class="o">.</span><span class="kt">Show</span><span class="p">,</span><span class="w"> </span><span class="kt">Generic</span><span class="p">)</span><span class="w"></span>

<span class="c1">-- For a &#39;real&#39; application use &#39;makeIsDataIndexed&#39; to ensure the output is stable over time</span><span class="w"></span>
<span class="kt">PlutusTx</span><span class="o">.</span><span class="n">unstableMakeIsData</span><span class="w"> </span><span class="kt">&#39;&#39;SplitData</span><span class="w"></span>
<span class="kt">PlutusTx</span><span class="o">.</span><span class="n">makeLift</span><span class="w"> </span><span class="kt">&#39;&#39;SplitData</span><span class="w"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">SplitData</span></code> describes the two recipients of the funds, and the total amount of the funds denoted in ada.</p>
<p>You are using the <a class="reference external" href="../../haddock/plutus-ledger-api/html/Plutus-V1-Ledger-Api.html#t:Address" title="(in plutus-ledger-api v1.0.0.1)"><code class="docutils literal notranslate"><span class="pre">Address</span></code></a> type to identify the recipients.
When making the payment you can use the hashes to create two public key outputs.</p>
<section id="instances-for-data-types">
<h3>Instances for data types<a class="headerlink" href="#instances-for-data-types" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">SplitData</span></code> type has instances for a number of typeclasses.
These instances enable the serialisation of <code class="docutils literal notranslate"><span class="pre">SplitData</span></code> to different formats.
<code class="docutils literal notranslate"><span class="pre">ToJSON</span></code> and <code class="docutils literal notranslate"><span class="pre">FromJSON</span></code> are needed for JSON serialization.
JSON objects are passed between the frontend (for example, the Plutus apps emulator) and the app instance.
<a class="reference external" href="../../haddock/plutus-tx/html/PlutusTx.html#t:FromData" title="(in plutus-tx v1.0.0.0)"><code class="docutils literal notranslate"><span class="pre">FromData</span></code></a> and <a class="reference external" href="../../haddock/plutus-tx/html/PlutusTx.html#t:ToData" title="(in plutus-tx v1.0.0.0)"><code class="docutils literal notranslate"><span class="pre">ToData</span></code></a> are used for values that are attached to transactions, for example as the &lt;redeemer&gt; of a script output.
This class is used by the Plutus app at runtime to construct <code class="docutils literal notranslate"><span class="pre">Data</span></code> values.
Finally, <a class="reference external" href="../../haddock/plutus-tx/html/PlutusTx.html#v:makeLift" title="(in plutus-tx v1.0.0.0)"><code class="docutils literal notranslate"><span class="pre">makeLift</span></code></a> is a Template Haskell statement that generates an instance of the <a class="reference external" href="../../haddock/plutus-tx/html/PlutusTx-Lift-Class.html#t:Lift" title="(in plutus-tx v1.0.0.0)"><code class="docutils literal notranslate"><span class="pre">Lift</span></code></a> class for <code class="docutils literal notranslate"><span class="pre">SplitData</span></code>.
This class is used by the Plutus compiler at compile-time to construct Plutus core programs.</p>
</section>
</section>
<section id="defining-the-validator-script">
<h2>Defining the validator script<a class="headerlink" href="#defining-the-validator-script" title="Permalink to this heading"></a></h2>
<p>The validator script is the on-chain part of our Plutus app.
The job of the validator is to look at individual transactions in isolation and decide whether they are valid.
Plutus validators have the following type signature:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">d</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">ScriptContext</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Bool</span><span class="w"></span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">d</span></code> is the type of the &lt;datum&gt; and <code class="docutils literal notranslate"><span class="pre">r</span></code> is the type of the redeemer.</p>
<p>You are going to use the validator script to lock a script output that contains the <code class="docutils literal notranslate"><span class="pre">amount</span></code> specified in the <code class="docutils literal notranslate"><span class="pre">SplitData</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is an n-to-n relationship between Plutus apps and validator scripts. Apps can deal with multiple validators, and validators can be used by different apps.</p>
</div>
<p>In this tutorial you only need a single validator.
Its datum type is <code class="docutils literal notranslate"><span class="pre">SplitData</span></code> and its redeemer type is <code class="docutils literal notranslate"><span class="pre">()</span></code> (the unit type).
The validator looks at the <a class="reference external" href="../../haddock/plutus-ledger-api/html/Plutus-V1-Ledger-Api.html#t:ScriptContext" title="(in plutus-ledger-api v1.0.0.1)"><code class="docutils literal notranslate"><span class="pre">ScriptContext</span></code></a> value to see if the conditions for making the payment are met:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">validateSplit</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">SplitData</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="nb">()</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">ScriptContext</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Bool</span><span class="w"></span>
<span class="nf">validateSplit</span><span class="w"> </span><span class="kt">SplitData</span><span class="p">{</span><span class="n">recipient1</span><span class="p">,</span><span class="w"> </span><span class="n">recipient2</span><span class="p">,</span><span class="w"> </span><span class="n">amount</span><span class="p">}</span><span class="w"> </span><span class="kr">_</span><span class="w"> </span><span class="kt">ScriptContext</span><span class="p">{</span><span class="n">scriptContextTxInfo</span><span class="p">}</span><span class="w"> </span><span class="ow">=</span><span class="w"></span>
<span class="w">    </span><span class="kr">let</span><span class="w"> </span><span class="n">half</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Ada</span><span class="o">.</span><span class="n">divide</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="w">        </span><span class="n">outputs</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">txInfoOutputs</span><span class="w"> </span><span class="n">scriptContextTxInfo</span><span class="w"></span>
<span class="w">     </span><span class="kr">in</span><span class="w"></span>
<span class="w">     </span><span class="kt">Ada</span><span class="o">.</span><span class="n">fromValue</span><span class="w"> </span><span class="p">(</span><span class="n">valuePaidToAddr</span><span class="w"> </span><span class="n">outputs</span><span class="w"> </span><span class="n">recipient1</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">half</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"></span>
<span class="w">     </span><span class="kt">Ada</span><span class="o">.</span><span class="n">fromValue</span><span class="w"> </span><span class="p">(</span><span class="n">valuePaidToAddr</span><span class="w"> </span><span class="n">outputs</span><span class="w"> </span><span class="n">recipient2</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="p">(</span><span class="n">amount</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">half</span><span class="p">)</span><span class="w"></span>
<span class="w"> </span><span class="kr">where</span><span class="w"></span>
<span class="w">     </span><span class="n">valuePaidToAddr</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="p">[</span><span class="kt">TxOut</span><span class="p">]</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Address</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Value</span><span class="w"></span>
<span class="w">     </span><span class="n">valuePaidToAddr</span><span class="w"> </span><span class="n">outs</span><span class="w"> </span><span class="n">addr</span><span class="w"> </span><span class="ow">=</span><span class="w"></span>
<span class="w">         </span><span class="kr">let</span><span class="w"> </span><span class="n">flt</span><span class="w"> </span><span class="kt">TxOut</span><span class="p">{</span><span class="n">txOutAddress</span><span class="p">,</span><span class="w"> </span><span class="n">txOutValue</span><span class="p">}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">txOutAddress</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">addr</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Just</span><span class="w"> </span><span class="n">txOutValue</span><span class="w"></span>
<span class="w">             </span><span class="n">flt</span><span class="w"> </span><span class="kr">_</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Nothing</span><span class="w"></span>
<span class="w">         </span><span class="kr">in</span><span class="w"> </span><span class="n">mconcat</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="n">mapMaybe</span><span class="w"> </span><span class="n">flt</span><span class="w"> </span><span class="n">outs</span><span class="w"></span>
</pre></div>
</div>
<p>The validator checks that the transaction, represented by <a class="reference external" href="../../haddock/plutus-ledger-api/html/Plutus-V1-Ledger-Api.html#t:ScriptContext" title="(in plutus-ledger-api v1.0.0.1)"><code class="docutils literal notranslate"><span class="pre">scriptContextTxInfo</span></code></a>, pays half the specified amount to each recipient.</p>
<p>You then need some boilerplate to compile the validator to a Plutus script
(see <a class="reference external" href="https://plutus.readthedocs.io/en/latest/tutorials/basic-validators.html">Writing basic validator scripts</a>
in the Plutus Core and Plutus Tx User Guide).</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">Split</span><span class="w"></span>
<span class="kr">instance</span><span class="w"> </span><span class="kt">Scripts</span><span class="o">.</span><span class="kt">ValidatorTypes</span><span class="w"> </span><span class="kt">Split</span><span class="w"> </span><span class="kr">where</span><span class="w"></span>
<span class="w">    </span><span class="kr">type</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">RedeemerType</span><span class="w"> </span><span class="kt">Split</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="nb">()</span><span class="w"></span>
<span class="w">    </span><span class="kr">type</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">DatumType</span><span class="w"> </span><span class="kt">Split</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">SplitData</span><span class="w"></span>

<span class="nf">splitValidator</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Scripts</span><span class="o">.</span><span class="kt">TypedValidator</span><span class="w"> </span><span class="kt">Split</span><span class="w"></span>
<span class="nf">splitValidator</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Scripts</span><span class="o">.</span><span class="n">mkTypedValidator</span><span class="w"> </span><span class="o">@</span><span class="kt">Split</span><span class="w"></span>
<span class="w">    </span><span class="o">$$</span><span class="p">(</span><span class="kt">PlutusTx</span><span class="o">.</span><span class="n">compile</span><span class="w"> </span><span class="p">[</span><span class="o">||</span><span class="w"> </span><span class="n">validateSplit</span><span class="w"> </span><span class="o">||</span><span class="p">])</span><span class="w"></span>
<span class="w">    </span><span class="o">$$</span><span class="p">(</span><span class="kt">PlutusTx</span><span class="o">.</span><span class="n">compile</span><span class="w"> </span><span class="p">[</span><span class="o">||</span><span class="w"> </span><span class="n">wrap</span><span class="w"> </span><span class="o">||</span><span class="p">])</span><span class="w"> </span><span class="kr">where</span><span class="w"></span>
<span class="w">        </span><span class="n">wrap</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Scripts</span><span class="o">.</span><span class="n">mkUntypedValidator</span><span class="w"> </span><span class="o">@</span><span class="kt">ScriptContext</span><span class="w"> </span><span class="o">@</span><span class="kt">SplitData</span><span class="w"> </span><span class="o">@</span><span class="nb">()</span><span class="w"></span>
</pre></div>
</div>
<p>The <a class="reference external" href="../../haddock/plutus-script-utils/html/Plutus-Script-Utils-V1-Typed-Scripts-Validators.html#t:ValidatorTypes" title="(in plutus-script-utils v1.1.0.0)"><code class="docutils literal notranslate"><span class="pre">ValidatorTypes</span></code></a> class defines the types of the validator, and <code class="docutils literal notranslate"><span class="pre">splitValidator</span></code> contains the compiled Plutus core code of <code class="docutils literal notranslate"><span class="pre">validateSplit</span></code>.</p>
</section>
<section id="asking-for-input">
<h2>Asking for input<a class="headerlink" href="#asking-for-input" title="Permalink to this heading"></a></h2>
<p>When you start the app, you want to ask the sender for a <code class="docutils literal notranslate"><span class="pre">SplitData</span></code> object.
In Plutus apps, the mechanism for requesting inputs is called <a class="reference internal" href="../../reference/glossary.html#term-endpoint"><span class="xref std std-term">endpoints</span></a>.</p>
<p>All endpoints that an app wants to use must be declared as part of the type of the app.
The set of all endpoints of an app is called the <a class="reference internal" href="../../reference/glossary.html#term-schema"><span class="xref std std-term">schema</span></a> of the app.
The schema is defined as a Haskell type.
You can build a schema using the <a class="reference external" href="../../haddock/plutus-contract/html/Plutus-Contract.html#t:Endpoint" title="(in plutus-contract v1.1.0.0)"><code class="docutils literal notranslate"><span class="pre">Endpoint</span></code></a> type family to construct individual endpoint types, and the <code class="docutils literal notranslate"><span class="pre">.\/</span></code> operator to combine them.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">LockArgs</span><span class="w"> </span><span class="ow">=</span><span class="w"></span>
<span class="w">        </span><span class="kt">LockArgs</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="n">recipient1Address</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">CardanoAddress</span><span class="w"></span>
<span class="w">            </span><span class="p">,</span><span class="w"> </span><span class="n">recipient2Address</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">CardanoAddress</span><span class="w"></span>
<span class="w">            </span><span class="p">,</span><span class="w"> </span><span class="n">totalAda</span><span class="w">          </span><span class="ow">::</span><span class="w"> </span><span class="kt">Ada</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="kr">deriving</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="p">(</span><span class="kt">Haskell</span><span class="o">.</span><span class="kt">Show</span><span class="p">,</span><span class="w"> </span><span class="kt">Generic</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kr">deriving</span><span class="w"> </span><span class="n">anyclass</span><span class="w"> </span><span class="p">(</span><span class="kt">ToJSON</span><span class="p">,</span><span class="w"> </span><span class="kt">FromJSON</span><span class="p">)</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="kt">SplitSchema</span><span class="w"> </span><span class="ow">=</span><span class="w"></span>
<span class="w">        </span><span class="kt">Endpoint</span><span class="w"> </span><span class="s">&quot;lock&quot;</span><span class="w"> </span><span class="kt">LockArgs</span><span class="w"></span>
<span class="w">        </span><span class="o">.\/</span><span class="w"> </span><span class="kt">Endpoint</span><span class="w"> </span><span class="s">&quot;unlock&quot;</span><span class="w"> </span><span class="kt">LockArgs</span><span class="w"></span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">SplitSchema</span></code> defines two endpoints, <code class="docutils literal notranslate"><span class="pre">lock</span></code> and <code class="docutils literal notranslate"><span class="pre">unlock</span></code>.
Each endpoint declaration contains the endpoint’s name and its type.</p>
<p>To use the <code class="docutils literal notranslate"><span class="pre">lock</span></code> endpoint in our app, you call the <a class="reference external" href="../../haddock/plutus-contract/html/Plutus-Contract-Request.html#v:endpoint" title="(in plutus-contract v1.1.0.0)"><code class="docutils literal notranslate"><span class="pre">endpoint</span></code></a> function:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">lock</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Promise</span><span class="w"> </span><span class="nb">()</span><span class="w"> </span><span class="kt">SplitSchema</span><span class="w"> </span><span class="kt">T</span><span class="o">.</span><span class="kt">Text</span><span class="w"> </span><span class="nb">()</span><span class="w"></span>
<span class="nf">lock</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">endpoint</span><span class="w"> </span><span class="o">@</span><span class="s">&quot;lock&quot;</span><span class="w"> </span><span class="p">(</span><span class="n">lockFunds</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="n">mkSplitData</span><span class="p">)</span><span class="w"></span>

<span class="nf">unlock</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Promise</span><span class="w"> </span><span class="nb">()</span><span class="w"> </span><span class="kt">SplitSchema</span><span class="w"> </span><span class="kt">T</span><span class="o">.</span><span class="kt">Text</span><span class="w"> </span><span class="nb">()</span><span class="w"></span>
<span class="nf">unlock</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">endpoint</span><span class="w"> </span><span class="o">@</span><span class="s">&quot;unlock&quot;</span><span class="w"> </span><span class="p">(</span><span class="n">unlockFunds</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="n">mkSplitData</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">endpoint</span></code> has a single argument, the name of the endpoint.
The name of the endpoint is a Haskell type, not a value, and you have to supply this argument using the type application operator <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>.
This operator is provided by the <a class="reference external" href="https://gitlab.haskell.org/ghc/ghc/-/wikis/type-application">TypeApplications</a> GHC extension.</p>
<p>Next you need to turn the endpoint parameter datatype <code class="docutils literal notranslate"><span class="pre">LockArgs</span></code> into the <code class="docutils literal notranslate"><span class="pre">SplitData</span></code> datatype used by the Plutus script.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">mkSplitData</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">LockArgs</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">SplitData</span><span class="w"></span>
<span class="nf">mkSplitData</span><span class="w"> </span><span class="kt">LockArgs</span><span class="p">{</span><span class="n">recipient1Address</span><span class="p">,</span><span class="w"> </span><span class="n">recipient2Address</span><span class="p">,</span><span class="w"> </span><span class="n">totalAda</span><span class="p">}</span><span class="w"> </span><span class="ow">=</span><span class="w"></span>
<span class="w">    </span><span class="kt">SplitData</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="n">recipient1</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">toPlutusAddress</span><span class="w"> </span><span class="n">recipient1Address</span><span class="w"></span>
<span class="w">        </span><span class="p">,</span><span class="w"> </span><span class="n">recipient2</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">toPlutusAddress</span><span class="w"> </span><span class="n">recipient2Address</span><span class="w"></span>
<span class="w">        </span><span class="p">,</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">totalAda</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="locking-the-funds">
<h2>Locking the funds<a class="headerlink" href="#locking-the-funds" title="Permalink to this heading"></a></h2>
<p>With the <code class="docutils literal notranslate"><span class="pre">SplitData</span></code> that you got from the user you can now write a transaction that locks the requested amount of ada in a script output.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">lockFunds</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">SplitData</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Contract</span><span class="w"> </span><span class="nb">()</span><span class="w"> </span><span class="kt">SplitSchema</span><span class="w"> </span><span class="kt">T</span><span class="o">.</span><span class="kt">Text</span><span class="w"> </span><span class="nb">()</span><span class="w"></span>
<span class="nf">lockFunds</span><span class="w"> </span><span class="n">s</span><span class="o">@</span><span class="kt">SplitData</span><span class="p">{</span><span class="n">amount</span><span class="p">}</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span><span class="w"></span>
<span class="w">    </span><span class="n">logInfo</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="s">&quot;Locking &quot;</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="kt">Haskell</span><span class="o">.</span><span class="n">show</span><span class="w"> </span><span class="n">amount</span><span class="w"></span>
<span class="w">    </span><span class="kr">let</span><span class="w"> </span><span class="n">tx</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Constraints</span><span class="o">.</span><span class="n">mustPayToTheScriptWithDatumInTx</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="p">(</span><span class="kt">Ada</span><span class="o">.</span><span class="n">toValue</span><span class="w"> </span><span class="n">amount</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">void</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="n">submitTxConstraints</span><span class="w"> </span><span class="n">splitValidator</span><span class="w"> </span><span class="n">tx</span><span class="w"></span>
</pre></div>
</div>
<p>Using the constraints library that comes with the Plutus SDK you specify a transaction <code class="docutils literal notranslate"><span class="pre">tx</span></code> in a single line.</p>
<p>After calling <a class="reference external" href="../../haddock/plutus-contract/html/Plutus-Contract.html#v:submitTxConstraints" title="(in plutus-contract v1.1.0.0)"><code class="docutils literal notranslate"><span class="pre">submitTxConstraints</span></code></a> in the next line, the Plutus app runtime examines the transaction constraints <code class="docutils literal notranslate"><span class="pre">tx</span></code> and builds a transaction that fulfills them.
The runtime then sends the transaction to the wallet, which adds enough to cover the required funds (in this case, the ada amount specified in <code class="docutils literal notranslate"><span class="pre">amount</span></code>).</p>
</section>
<section id="unlocking-the-funds">
<h2>Unlocking the funds<a class="headerlink" href="#unlocking-the-funds" title="Permalink to this heading"></a></h2>
<p>All that’s missing now is the code for retrieving the funds, and some glue to put it all together.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">unlockFunds</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">SplitData</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Contract</span><span class="w"> </span><span class="nb">()</span><span class="w"> </span><span class="kt">SplitSchema</span><span class="w"> </span><span class="kt">T</span><span class="o">.</span><span class="kt">Text</span><span class="w"> </span><span class="nb">()</span><span class="w"></span>
<span class="nf">unlockFunds</span><span class="w"> </span><span class="kt">SplitData</span><span class="p">{</span><span class="n">recipient1</span><span class="p">,</span><span class="w"> </span><span class="n">recipient2</span><span class="p">,</span><span class="w"> </span><span class="n">amount</span><span class="p">}</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span><span class="w"></span>
<span class="w">    </span><span class="n">networkId</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">pNetworkId</span><span class="w"> </span><span class="o">&lt;$&gt;</span><span class="w"> </span><span class="n">getParams</span><span class="w"></span>
<span class="w">    </span><span class="kr">let</span><span class="w"> </span><span class="n">contractAddress</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Scripts</span><span class="o">.</span><span class="n">validatorCardanoAddress</span><span class="w"> </span><span class="n">networkId</span><span class="w"> </span><span class="n">splitValidator</span><span class="w"></span>
<span class="w">    </span><span class="n">utxos</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">utxosAt</span><span class="w"> </span><span class="n">contractAddress</span><span class="w"></span>
<span class="w">    </span><span class="kr">let</span><span class="w"> </span><span class="n">half</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Ada</span><span class="o">.</span><span class="n">divide</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="w">        </span><span class="n">tx</span><span class="w"> </span><span class="ow">=</span><span class="w"></span>
<span class="w">            </span><span class="kt">Constraints</span><span class="o">.</span><span class="n">collectFromTheScript</span><span class="w"> </span><span class="n">utxos</span><span class="w"> </span><span class="nb">()</span><span class="w"></span>
<span class="w">            </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="kt">Constraints</span><span class="o">.</span><span class="n">mustPayToAddress</span><span class="w"> </span><span class="n">recipient1</span><span class="w"> </span><span class="p">(</span><span class="kt">Ada</span><span class="o">.</span><span class="n">toValue</span><span class="w"> </span><span class="n">half</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="kt">Constraints</span><span class="o">.</span><span class="n">mustPayToAddress</span><span class="w"> </span><span class="n">recipient2</span><span class="w"> </span><span class="p">(</span><span class="kt">Ada</span><span class="o">.</span><span class="n">toValue</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">half</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">void</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="n">submitTxConstraintsSpending</span><span class="w"> </span><span class="n">splitValidator</span><span class="w"> </span><span class="n">utxos</span><span class="w"> </span><span class="n">tx</span><span class="w"></span>
</pre></div>
</div>
<p>In <code class="docutils literal notranslate"><span class="pre">unlockFunds</span></code> you use the constraints library to build the spending transaction.
Here, <code class="docutils literal notranslate"><span class="pre">tx</span></code> combines three different constraints.
<a class="reference external" href="../../haddock/plutus-ledger-constraints/html/Ledger-Constraints.html#v:collectFromTheScript" title="(in plutus-ledger-constraints v1.1.0.0)"><code class="docutils literal notranslate"><span class="pre">collectFromTheScript</span></code></a> takes the script outputs in <code class="docutils literal notranslate"><span class="pre">unspentOutputs</span></code> and adds them as input to the transaction, using the unit <code class="docutils literal notranslate"><span class="pre">()</span></code> as the redeemer.
The other two constraints use <a class="reference external" href="../../haddock/plutus-ledger-constraints/html/Ledger-Constraints.html#v:mustPayToAddress" title="(in plutus-ledger-constraints v1.1.0.0)"><code class="docutils literal notranslate"><span class="pre">mustPayToAddress</span></code></a> to add payments for the recipients.</p>
</section>
<section id="running-the-app-on-the-plutus-apps-emulator">
<h2>Running the app on the Plutus apps emulator<a class="headerlink" href="#running-the-app-on-the-plutus-apps-emulator" title="Permalink to this heading"></a></h2>
<p>You have all the functions you need for the on-chain and off-chain parts of the app.
Every contract in the Plutus apps emulator must define its public interface like this:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">splitPlutusApp</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Contract</span><span class="w"> </span><span class="nb">()</span><span class="w"> </span><span class="kt">SplitSchema</span><span class="w"> </span><span class="kt">T</span><span class="o">.</span><span class="kt">Text</span><span class="w"> </span><span class="nb">()</span><span class="w"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">splitPlutusApp</span></code> is the high-level definition of our app:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">splitPlutusApp</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="n">selectList</span><span class="w"> </span><span class="p">[</span><span class="n">lock</span><span class="p">,</span><span class="w"> </span><span class="n">unlock</span><span class="p">]</span><span class="w"></span>
</pre></div>
</div>
<p>The <a class="reference external" href="../../haddock/plutus-contract/html/Plutus-Contract.html#v:selectList" title="(in plutus-contract v1.1.0.0)"><code class="docutils literal notranslate"><span class="pre">selectList</span></code></a> function acts like a choice between two branches.
The left branch starts with <code class="docutils literal notranslate"><span class="pre">lock</span></code> and the right branch starts with <code class="docutils literal notranslate"><span class="pre">unlock</span></code>.
The app exposes both endpoints and proceeds with the branch that receives an answer first.
So, if you call the <code class="docutils literal notranslate"><span class="pre">lock</span></code> endpoint in one of the simulated wallets, it will call <code class="docutils literal notranslate"><span class="pre">lockFunds</span></code> and ignore the <code class="docutils literal notranslate"><span class="pre">unlock</span></code> side of the contract.
The <code class="docutils literal notranslate"><span class="pre">forever</span></code> call, which runs the application in an infinite loop, is necessary for the
<a class="reference external" href="../../haddock/plutus-contract/html/Plutus-Trace-Emulator.html#t:EmulatorTrace" title="(in plutus-contract v1.1.0.0)"><code class="docutils literal notranslate"><span class="pre">EmulatorTrace</span></code></a>.
If you omit it, you will only be able to trigger a single endpoint after activating the contract,
from which the contract instance will close.</p>
<p>You can now compile the contract and create a simulation.
The following action sequence results in two transactions that lock the funds and then distribute them to the two recipients.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">runSplitDataEmulatorTrace</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">IO</span><span class="w"> </span><span class="nb">()</span><span class="w"></span>
<span class="nf">runSplitDataEmulatorTrace</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span><span class="w"></span>
<span class="w">    </span><span class="kt">Trace</span><span class="o">.</span><span class="n">runEmulatorTraceIO</span><span class="w"> </span><span class="n">mkSplitDataEmulatorTrace</span><span class="w"></span>

<span class="nf">mkSplitDataEmulatorTrace</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Trace</span><span class="o">.</span><span class="kt">EmulatorTrace</span><span class="w"> </span><span class="nb">()</span><span class="w"></span>
<span class="nf">mkSplitDataEmulatorTrace</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span><span class="w"></span>
<span class="w">    </span><span class="c1">-- w1, w2, w3, ... are predefined mock wallets used for testing</span><span class="w"></span>
<span class="w">    </span><span class="kr">let</span><span class="w"> </span><span class="n">w1Addr</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">mockWalletAddress</span><span class="w"> </span><span class="n">w1</span><span class="w"></span>
<span class="w">    </span><span class="kr">let</span><span class="w"> </span><span class="n">w2Addr</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">mockWalletAddress</span><span class="w"> </span><span class="n">w2</span><span class="w"></span>

<span class="w">    </span><span class="n">h</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="kt">Trace</span><span class="o">.</span><span class="n">activateContractWallet</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="n">splitPlutusApp</span><span class="w"></span>
<span class="w">    </span><span class="kt">Trace</span><span class="o">.</span><span class="n">callEndpoint</span><span class="w"> </span><span class="o">@</span><span class="s">&quot;lock&quot;</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="kt">LockArgs</span><span class="w"> </span><span class="n">w1Addr</span><span class="w"> </span><span class="n">w2Addr</span><span class="w"> </span><span class="mi">10_000_000</span><span class="w"></span>
<span class="w">    </span><span class="n">void</span><span class="w"> </span><span class="kt">Trace</span><span class="o">.</span><span class="n">nextSlot</span><span class="w"></span>
<span class="w">    </span><span class="kt">Trace</span><span class="o">.</span><span class="n">callEndpoint</span><span class="w"> </span><span class="o">@</span><span class="s">&quot;unlock&quot;</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="kt">LockArgs</span><span class="w"> </span><span class="n">w1Addr</span><span class="w"> </span><span class="n">w2Addr</span><span class="w"> </span><span class="mi">10_000_000</span><span class="w"></span>
</pre></div>
</div>
<p>You should see an output similar to what follows:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">0</span><span class="kt">:</span><span class="w"> </span><span class="kt">TxnValidate</span><span class="w"> </span><span class="mi">43</span><span class="n">ba666cc8a22a04b63a3b605ce14146dfa5ed999986625ad90c1bc16dabdd84</span><span class="w"> </span><span class="p">[</span><span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">1</span><span class="kt">:</span><span class="w"> </span><span class="mi">00000000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">4000</span><span class="o">-</span><span class="mi">8000</span><span class="o">-</span><span class="mi">000000000000</span><span class="w"> </span><span class="p">{</span><span class="kt">Wallet</span><span class="w"> </span><span class="kt">W</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span><span class="kt">:</span><span class="w"></span>
<span class="w">                 </span><span class="kt">Contract</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="n">started</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">1</span><span class="kt">:</span><span class="w"> </span><span class="mi">00000000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">4000</span><span class="o">-</span><span class="mi">8000</span><span class="o">-</span><span class="mi">000000000000</span><span class="w"> </span><span class="p">{</span><span class="kt">Wallet</span><span class="w"> </span><span class="kt">W</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span><span class="kt">:</span><span class="w"></span>
<span class="w">                 </span><span class="kt">Receive</span><span class="w"> </span><span class="n">endpoint</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">&#39;lock&#39;</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="kt">Object</span><span class="w"> </span><span class="p">(</span><span class="n">fromList</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;contents&quot;</span><span class="p">,</span><span class="kt">Array</span><span class="w"> </span><span class="p">[</span><span class="kt">Object</span><span class="w"> </span><span class="p">(</span><span class="n">fromList</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;getEndpointDescription&quot;</span><span class="p">,</span><span class="kt">String</span><span class="w"> </span><span class="s">&quot;lock&quot;</span><span class="p">)]),</span><span class="kt">Object</span><span class="w"> </span><span class="p">(</span><span class="n">fromList</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;unEndpointValue&quot;</span><span class="p">,</span><span class="kt">Object</span><span class="w"> </span><span class="p">(</span><span class="n">fromList</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;recipient1Address&quot;</span><span class="p">,</span><span class="kt">String</span><span class="w"> </span><span class="s">&quot;addr_test1vz3vyrrh3pavu8xescvnunn4h27cny70645etn2ulnnqnssrz8utc&quot;</span><span class="p">),(</span><span class="s">&quot;recipient2Address&quot;</span><span class="p">,</span><span class="kt">String</span><span class="w"> </span><span class="s">&quot;addr_test1vzq2fazm26ug6yfemg3mcnpuwhkx6v558sy87fgtscvnefckqs3wk&quot;</span><span class="p">),(</span><span class="s">&quot;totalAda&quot;</span><span class="p">,</span><span class="kt">Object</span><span class="w"> </span><span class="p">(</span><span class="n">fromList</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;getLovelace&quot;</span><span class="p">,</span><span class="kt">Number</span><span class="w"> </span><span class="mf">1.0e7</span><span class="p">)]))]))])]),(</span><span class="s">&quot;tag&quot;</span><span class="p">,</span><span class="kt">String</span><span class="w"> </span><span class="s">&quot;ExposeEndpointResp&quot;</span><span class="p">)])</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">1</span><span class="kt">:</span><span class="w"> </span><span class="mi">00000000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">4000</span><span class="o">-</span><span class="mi">8000</span><span class="o">-</span><span class="mi">000000000000</span><span class="w"> </span><span class="p">{</span><span class="kt">Wallet</span><span class="w"> </span><span class="kt">W</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span><span class="kt">:</span><span class="w"></span>
<span class="w">                 </span><span class="kt">Contract</span><span class="w"> </span><span class="n">log</span><span class="kt">:</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="s">&quot;Locking Lovelace {getLovelace = 10000000}&quot;</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">1</span><span class="kt">:</span><span class="w"> </span><span class="kt">W</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="kt">:</span><span class="w"> </span><span class="kt">Balancing</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">unbalanced</span><span class="w"> </span><span class="n">transaction</span><span class="kt">:</span><span class="w"></span>
<span class="w">                       </span><span class="kt">Tx:</span><span class="w"></span>
<span class="w">                         </span><span class="kt">Tx</span><span class="w"> </span><span class="mi">996</span><span class="n">c3e115b0785d88442670963ed538e771910eee87199cbca15852f01d90e47</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="p">{</span><span class="n">inputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="n">reference</span><span class="w"> </span><span class="n">inputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="n">collateral</span><span class="w"> </span><span class="n">inputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="n">outputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                             </span><span class="o">-</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(,</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">10000000</span><span class="p">)])])</span><span class="w"> </span><span class="n">addressed</span><span class="w"> </span><span class="n">to</span><span class="w"></span>
<span class="w">                               </span><span class="kt">ScriptCredential:</span><span class="w"> </span><span class="mf">3e4</span><span class="n">f54085c2eb253b81fb958f3c3369ab6139c12964ee894ae57a908</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">staking</span><span class="w"> </span><span class="n">credential</span><span class="p">)</span><span class="w"></span>
<span class="w">                               </span><span class="n">with</span><span class="w"> </span><span class="n">datum</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="mi">43492163</span><span class="n">ee71f886ebc65c85f3dfa8db313f00d701b433b539811464d4355873</span><span class="w"></span>
<span class="w">                           </span><span class="n">mint</span><span class="kt">:</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="kt">[]</span><span class="p">)</span><span class="w"></span>
<span class="w">                           </span><span class="n">fee</span><span class="kt">:</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="kt">[]</span><span class="p">)</span><span class="w"></span>
<span class="w">                           </span><span class="n">mps</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="n">signatures</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="n">validity</span><span class="w"> </span><span class="n">range</span><span class="kt">:</span><span class="w"> </span><span class="kt">Interval</span><span class="w"> </span><span class="p">{</span><span class="n">ivFrom</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">LowerBound</span><span class="w"> </span><span class="kt">NegInf</span><span class="w"> </span><span class="kt">True</span><span class="p">,</span><span class="w"> </span><span class="n">ivTo</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">UpperBound</span><span class="w"> </span><span class="kt">PosInf</span><span class="w"> </span><span class="kt">True</span><span class="p">}</span><span class="w"></span>
<span class="w">                           </span><span class="kr">data</span><span class="kt">:</span><span class="w"></span>
<span class="w">                             </span><span class="p">(</span><span class="w"> </span><span class="mi">43492163</span><span class="n">ee71f886ebc65c85f3dfa8db313f00d701b433b539811464d4355873</span><span class="w"></span>
<span class="w">                             </span><span class="p">,</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s">&quot;</span><span class="se">\162\194\f</span><span class="s">w</span><span class="se">\136</span><span class="s">z</span><span class="se">\206\FS\217\134\EM</span><span class="s">&gt;Nu</span><span class="se">\186\189\137\147\207\213</span><span class="s">i</span><span class="se">\149\205\\\252\230\t\194</span><span class="s">&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                             </span><span class="o">&lt;&gt;&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                             </span><span class="o">&lt;&lt;</span><span class="s">&quot;</span><span class="se">\128\164\244</span><span class="s">[V</span><span class="se">\184\141\DC1</span><span class="s">9</span><span class="se">\218</span><span class="s">#</span><span class="se">\188</span><span class="s">L&lt;u</span><span class="se">\236</span><span class="s">m2</span><span class="se">\148</span><span class="s">&lt;</span><span class="se">\b\DEL</span><span class="s">%</span><span class="se">\v\134\EM</span><span class="s">&lt;</span><span class="se">\167</span><span class="s">&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                             </span><span class="o">&lt;&gt;&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                             </span><span class="mi">10000000</span><span class="o">&gt;</span><span class="w"> </span><span class="p">)}</span><span class="w"></span>
<span class="w">                       </span><span class="kt">Requires</span><span class="w"> </span><span class="n">signatures</span><span class="kt">:</span><span class="w"></span>
<span class="w">                       </span><span class="kt">Utxo</span><span class="w"> </span><span class="n">index</span><span class="kt">:</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">1</span><span class="kt">:</span><span class="w"> </span><span class="kt">W</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="kt">:</span><span class="w"> </span><span class="kt">Finished</span><span class="w"> </span><span class="n">balancing</span><span class="kt">:</span><span class="w"></span>
<span class="w">                       </span><span class="kt">Tx</span><span class="w"> </span><span class="mi">4971</span><span class="n">ec8310b413ee54d21e1d62dd0cda373c6cec41cf159d832bdf7cfc1c266f</span><span class="kt">:</span><span class="w"></span>
<span class="w">                         </span><span class="p">{</span><span class="n">inputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                            </span><span class="o">-</span><span class="w"> </span><span class="mi">43</span><span class="n">ba666cc8a22a04b63a3b605ce14146dfa5ed999986625ad90c1bc16dabdd84</span><span class="o">!</span><span class="mi">50</span><span class="w"></span>

<span class="w">                            </span><span class="o">-</span><span class="w"> </span><span class="mi">43</span><span class="n">ba666cc8a22a04b63a3b605ce14146dfa5ed999986625ad90c1bc16dabdd84</span><span class="o">!</span><span class="mi">51</span><span class="w"></span>

<span class="w">                         </span><span class="n">reference</span><span class="w"> </span><span class="n">inputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                         </span><span class="n">collateral</span><span class="w"> </span><span class="n">inputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                         </span><span class="n">outputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="o">-</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(,</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">10000000</span><span class="p">)])])</span><span class="w"> </span><span class="n">addressed</span><span class="w"> </span><span class="n">to</span><span class="w"></span>
<span class="w">                             </span><span class="kt">ScriptCredential:</span><span class="w"> </span><span class="mf">3e4</span><span class="n">f54085c2eb253b81fb958f3c3369ab6139c12964ee894ae57a908</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">staking</span><span class="w"> </span><span class="n">credential</span><span class="p">)</span><span class="w"></span>
<span class="w">                             </span><span class="n">with</span><span class="w"> </span><span class="n">datum</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="mi">43492163</span><span class="n">ee71f886ebc65c85f3dfa8db313f00d701b433b539811464d4355873</span><span class="w"></span>
<span class="w">                           </span><span class="o">-</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(,</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">9821079</span><span class="p">)])])</span><span class="w"> </span><span class="n">addressed</span><span class="w"> </span><span class="n">to</span><span class="w"></span>
<span class="w">                             </span><span class="kt">PubKeyCredential:</span><span class="w"> </span><span class="n">a2c20c77887ace1cd986193e4e75babd8993cfd56995cd5cfce609c2</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">staking</span><span class="w"> </span><span class="n">credential</span><span class="p">)</span><span class="w"></span>
<span class="w">                         </span><span class="n">mint</span><span class="kt">:</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="kt">[]</span><span class="p">)</span><span class="w"></span>
<span class="w">                         </span><span class="n">fee</span><span class="kt">:</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(,</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">178921</span><span class="p">)])])</span><span class="w"></span>
<span class="w">                         </span><span class="n">validity</span><span class="w"> </span><span class="n">range</span><span class="kt">:</span><span class="w"> </span><span class="kt">Interval</span><span class="w"> </span><span class="p">{</span><span class="n">ivFrom</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">LowerBound</span><span class="w"> </span><span class="kt">NegInf</span><span class="w"> </span><span class="kt">True</span><span class="p">,</span><span class="w"> </span><span class="n">ivTo</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">UpperBound</span><span class="w"> </span><span class="kt">PosInf</span><span class="w"> </span><span class="kt">True</span><span class="p">}</span><span class="w"></span>
<span class="w">                         </span><span class="kr">data</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="p">(</span><span class="w"> </span><span class="mi">43492163</span><span class="n">ee71f886ebc65c85f3dfa8db313f00d701b433b539811464d4355873</span><span class="w"></span>
<span class="w">                           </span><span class="p">,</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s">&quot;</span><span class="se">\162\194\f</span><span class="s">w</span><span class="se">\136</span><span class="s">z</span><span class="se">\206\FS\217\134\EM</span><span class="s">&gt;Nu</span><span class="se">\186\189\137\147\207\213</span><span class="s">i</span><span class="se">\149\205\\\252\230\t\194</span><span class="s">&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                           </span><span class="o">&lt;&gt;&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                           </span><span class="o">&lt;&lt;</span><span class="s">&quot;</span><span class="se">\128\164\244</span><span class="s">[V</span><span class="se">\184\141\DC1</span><span class="s">9</span><span class="se">\218</span><span class="s">#</span><span class="se">\188</span><span class="s">L&lt;u</span><span class="se">\236</span><span class="s">m2</span><span class="se">\148</span><span class="s">&lt;</span><span class="se">\b\DEL</span><span class="s">%</span><span class="se">\v\134\EM</span><span class="s">&lt;</span><span class="se">\167</span><span class="s">&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                           </span><span class="o">&lt;&gt;&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                           </span><span class="mi">10000000</span><span class="o">&gt;</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">                         </span><span class="n">redeemers</span><span class="kt">:</span><span class="p">}</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">1</span><span class="kt">:</span><span class="w"> </span><span class="kt">W</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="kt">:</span><span class="w"> </span><span class="kt">Signing</span><span class="w"> </span><span class="n">tx</span><span class="kt">:</span><span class="w"> </span><span class="mi">4971</span><span class="n">ec8310b413ee54d21e1d62dd0cda373c6cec41cf159d832bdf7cfc1c266f</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">1</span><span class="kt">:</span><span class="w"> </span><span class="kt">W</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="kt">:</span><span class="w"> </span><span class="kt">Submitting</span><span class="w"> </span><span class="n">tx</span><span class="kt">:</span><span class="w"> </span><span class="mi">4971</span><span class="n">ec8310b413ee54d21e1d62dd0cda373c6cec41cf159d832bdf7cfc1c266f</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">1</span><span class="kt">:</span><span class="w"> </span><span class="kt">W</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="kt">:</span><span class="w"> </span><span class="kt">TxSubmit:</span><span class="w"> </span><span class="mi">4971</span><span class="n">ec8310b413ee54d21e1d62dd0cda373c6cec41cf159d832bdf7cfc1c266f</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">1</span><span class="kt">:</span><span class="w"> </span><span class="kt">TxnValidate</span><span class="w"> </span><span class="mi">4971</span><span class="n">ec8310b413ee54d21e1d62dd0cda373c6cec41cf159d832bdf7cfc1c266f</span><span class="w"> </span><span class="p">[</span><span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">2</span><span class="kt">:</span><span class="w"> </span><span class="mi">00000000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">4000</span><span class="o">-</span><span class="mi">8000</span><span class="o">-</span><span class="mi">000000000000</span><span class="w"> </span><span class="p">{</span><span class="kt">Wallet</span><span class="w"> </span><span class="kt">W</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span><span class="kt">:</span><span class="w"></span>
<span class="w">                 </span><span class="kt">Receive</span><span class="w"> </span><span class="n">endpoint</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">&#39;unlock&#39;</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="kt">Object</span><span class="w"> </span><span class="p">(</span><span class="n">fromList</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;contents&quot;</span><span class="p">,</span><span class="kt">Array</span><span class="w"> </span><span class="p">[</span><span class="kt">Object</span><span class="w"> </span><span class="p">(</span><span class="n">fromList</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;getEndpointDescription&quot;</span><span class="p">,</span><span class="kt">String</span><span class="w"> </span><span class="s">&quot;unlock&quot;</span><span class="p">)]),</span><span class="kt">Object</span><span class="w"> </span><span class="p">(</span><span class="n">fromList</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;unEndpointValue&quot;</span><span class="p">,</span><span class="kt">Object</span><span class="w"> </span><span class="p">(</span><span class="n">fromList</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;recipient1Address&quot;</span><span class="p">,</span><span class="kt">String</span><span class="w"> </span><span class="s">&quot;addr_test1vz3vyrrh3pavu8xescvnunn4h27cny70645etn2ulnnqnssrz8utc&quot;</span><span class="p">),(</span><span class="s">&quot;recipient2Address&quot;</span><span class="p">,</span><span class="kt">String</span><span class="w"> </span><span class="s">&quot;addr_test1vzq2fazm26ug6yfemg3mcnpuwhkx6v558sy87fgtscvnefckqs3wk&quot;</span><span class="p">),(</span><span class="s">&quot;totalAda&quot;</span><span class="p">,</span><span class="kt">Object</span><span class="w"> </span><span class="p">(</span><span class="n">fromList</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;getLovelace&quot;</span><span class="p">,</span><span class="kt">Number</span><span class="w"> </span><span class="mf">1.0e7</span><span class="p">)]))]))])]),(</span><span class="s">&quot;tag&quot;</span><span class="p">,</span><span class="kt">String</span><span class="w"> </span><span class="s">&quot;ExposeEndpointResp&quot;</span><span class="p">)])</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">2</span><span class="kt">:</span><span class="w"> </span><span class="kt">W</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="kt">:</span><span class="w"> </span><span class="kt">Balancing</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">unbalanced</span><span class="w"> </span><span class="n">transaction</span><span class="kt">:</span><span class="w"></span>
<span class="w">                       </span><span class="kt">Tx:</span><span class="w"></span>
<span class="w">                         </span><span class="kt">Tx</span><span class="w"> </span><span class="n">b5fee3faf6ec5398a60af6540da675ae81a570a68a1bbb762e19a3fc9f1abaae</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="p">{</span><span class="n">inputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                              </span><span class="o">-</span><span class="w"> </span><span class="mi">4971</span><span class="n">ec8310b413ee54d21e1d62dd0cda373c6cec41cf159d832bdf7cfc1c266f</span><span class="o">!</span><span class="mi">0</span><span class="w"></span>
<span class="w">                                </span><span class="o">&lt;&gt;</span><span class="w"></span>
<span class="w">                           </span><span class="n">reference</span><span class="w"> </span><span class="n">inputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="n">collateral</span><span class="w"> </span><span class="n">inputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="n">outputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                             </span><span class="o">-</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(,</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">5000000</span><span class="p">)])])</span><span class="w"> </span><span class="n">addressed</span><span class="w"> </span><span class="n">to</span><span class="w"></span>
<span class="w">                               </span><span class="kt">PubKeyCredential:</span><span class="w"> </span><span class="n">a2c20c77887ace1cd986193e4e75babd8993cfd56995cd5cfce609c2</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">staking</span><span class="w"> </span><span class="n">credential</span><span class="p">)</span><span class="w"></span>
<span class="w">                             </span><span class="o">-</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(,</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">5000000</span><span class="p">)])])</span><span class="w"> </span><span class="n">addressed</span><span class="w"> </span><span class="n">to</span><span class="w"></span>
<span class="w">                               </span><span class="kt">PubKeyCredential:</span><span class="w"> </span><span class="mi">80</span><span class="n">a4f45b56b88d1139da23bc4c3c75ec6d32943c087f250b86193ca7</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">staking</span><span class="w"> </span><span class="n">credential</span><span class="p">)</span><span class="w"></span>
<span class="w">                           </span><span class="n">mint</span><span class="kt">:</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="kt">[]</span><span class="p">)</span><span class="w"></span>
<span class="w">                           </span><span class="n">fee</span><span class="kt">:</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="kt">[]</span><span class="p">)</span><span class="w"></span>
<span class="w">                           </span><span class="n">mps</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="n">signatures</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="n">validity</span><span class="w"> </span><span class="n">range</span><span class="kt">:</span><span class="w"> </span><span class="kt">Interval</span><span class="w"> </span><span class="p">{</span><span class="n">ivFrom</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">LowerBound</span><span class="w"> </span><span class="kt">NegInf</span><span class="w"> </span><span class="kt">True</span><span class="p">,</span><span class="w"> </span><span class="n">ivTo</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">UpperBound</span><span class="w"> </span><span class="kt">PosInf</span><span class="w"> </span><span class="kt">True</span><span class="p">}</span><span class="w"></span>
<span class="w">                           </span><span class="kr">data</span><span class="kt">:</span><span class="w"></span>
<span class="w">                             </span><span class="p">(</span><span class="w"> </span><span class="mi">43492163</span><span class="n">ee71f886ebc65c85f3dfa8db313f00d701b433b539811464d4355873</span><span class="w"></span>
<span class="w">                             </span><span class="p">,</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s">&quot;</span><span class="se">\162\194\f</span><span class="s">w</span><span class="se">\136</span><span class="s">z</span><span class="se">\206\FS\217\134\EM</span><span class="s">&gt;Nu</span><span class="se">\186\189\137\147\207\213</span><span class="s">i</span><span class="se">\149\205\\\252\230\t\194</span><span class="s">&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                             </span><span class="o">&lt;&gt;&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                             </span><span class="o">&lt;&lt;</span><span class="s">&quot;</span><span class="se">\128\164\244</span><span class="s">[V</span><span class="se">\184\141\DC1</span><span class="s">9</span><span class="se">\218</span><span class="s">#</span><span class="se">\188</span><span class="s">L&lt;u</span><span class="se">\236</span><span class="s">m2</span><span class="se">\148</span><span class="s">&lt;</span><span class="se">\b\DEL</span><span class="s">%</span><span class="se">\v\134\EM</span><span class="s">&lt;</span><span class="se">\167</span><span class="s">&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                             </span><span class="o">&lt;&gt;&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                             </span><span class="mi">10000000</span><span class="o">&gt;</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">                           </span><span class="n">attached</span><span class="w"> </span><span class="n">scripts</span><span class="kt">:</span><span class="w"></span>
<span class="w">                             </span><span class="p">(</span><span class="w"> </span><span class="mf">3e4</span><span class="n">f54085c2eb253b81fb958f3c3369ab6139c12964ee894ae57a908</span><span class="w"></span>
<span class="w">                             </span><span class="p">,</span><span class="w"> </span><span class="kt">Plutus</span><span class="w"> </span><span class="kt">V1</span><span class="w"> </span><span class="p">)}</span><span class="w"></span>
<span class="w">                       </span><span class="kt">Requires</span><span class="w"> </span><span class="n">signatures</span><span class="kt">:</span><span class="w"></span>
<span class="w">                       </span><span class="kt">Utxo</span><span class="w"> </span><span class="n">index</span><span class="kt">:</span><span class="w"></span>
<span class="w">                         </span><span class="p">(</span><span class="w"> </span><span class="mi">4971</span><span class="n">ec8310b413ee54d21e1d62dd0cda373c6cec41cf159d832bdf7cfc1c266f</span><span class="o">!</span><span class="mi">0</span><span class="w"></span>
<span class="w">                         </span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(,</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">10000000</span><span class="p">)])])</span><span class="w"> </span><span class="n">addressed</span><span class="w"> </span><span class="n">to</span><span class="w"></span>
<span class="w">                             </span><span class="kt">ScriptCredential:</span><span class="w"> </span><span class="mf">3e4</span><span class="n">f54085c2eb253b81fb958f3c3369ab6139c12964ee894ae57a908</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">staking</span><span class="w"> </span><span class="n">credential</span><span class="p">)</span><span class="w"></span>
<span class="w">                             </span><span class="n">with</span><span class="w"> </span><span class="n">datum</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="mi">43492163</span><span class="n">ee71f886ebc65c85f3dfa8db313f00d701b433b539811464d4355873</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">2</span><span class="kt">:</span><span class="w"> </span><span class="kt">W</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="kt">:</span><span class="w"> </span><span class="kt">Finished</span><span class="w"> </span><span class="n">balancing</span><span class="kt">:</span><span class="w"></span>
<span class="w">                       </span><span class="kt">Tx</span><span class="w"> </span><span class="n">fcef4d121ba88cef5c12d689427e73aec161154190e270c953b1a652037c7533</span><span class="kt">:</span><span class="w"></span>
<span class="w">                         </span><span class="p">{</span><span class="n">inputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                            </span><span class="o">-</span><span class="w"> </span><span class="mi">43</span><span class="n">ba666cc8a22a04b63a3b605ce14146dfa5ed999986625ad90c1bc16dabdd84</span><span class="o">!</span><span class="mi">52</span><span class="w"></span>

<span class="w">                            </span><span class="o">-</span><span class="w"> </span><span class="mi">4971</span><span class="n">ec8310b413ee54d21e1d62dd0cda373c6cec41cf159d832bdf7cfc1c266f</span><span class="o">!</span><span class="mi">0</span><span class="w"></span>

<span class="w">                         </span><span class="n">reference</span><span class="w"> </span><span class="n">inputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                         </span><span class="n">collateral</span><span class="w"> </span><span class="n">inputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="o">-</span><span class="w"> </span><span class="mi">43</span><span class="n">ba666cc8a22a04b63a3b605ce14146dfa5ed999986625ad90c1bc16dabdd84</span><span class="o">!</span><span class="mi">52</span><span class="w"></span>

<span class="w">                         </span><span class="n">outputs</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="o">-</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(,</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">5000000</span><span class="p">)])])</span><span class="w"> </span><span class="n">addressed</span><span class="w"> </span><span class="n">to</span><span class="w"></span>
<span class="w">                             </span><span class="kt">PubKeyCredential:</span><span class="w"> </span><span class="n">a2c20c77887ace1cd986193e4e75babd8993cfd56995cd5cfce609c2</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">staking</span><span class="w"> </span><span class="n">credential</span><span class="p">)</span><span class="w"></span>
<span class="w">                           </span><span class="o">-</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(,</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">5000000</span><span class="p">)])])</span><span class="w"> </span><span class="n">addressed</span><span class="w"> </span><span class="n">to</span><span class="w"></span>
<span class="w">                             </span><span class="kt">PubKeyCredential:</span><span class="w"> </span><span class="mi">80</span><span class="n">a4f45b56b88d1139da23bc4c3c75ec6d32943c087f250b86193ca7</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">staking</span><span class="w"> </span><span class="n">credential</span><span class="p">)</span><span class="w"></span>
<span class="w">                           </span><span class="o">-</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(,</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">9595609</span><span class="p">)])])</span><span class="w"> </span><span class="n">addressed</span><span class="w"> </span><span class="n">to</span><span class="w"></span>
<span class="w">                             </span><span class="kt">PubKeyCredential:</span><span class="w"> </span><span class="n">a2c20c77887ace1cd986193e4e75babd8993cfd56995cd5cfce609c2</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">staking</span><span class="w"> </span><span class="n">credential</span><span class="p">)</span><span class="w"></span>
<span class="w">                         </span><span class="n">return</span><span class="w"> </span><span class="n">collateral</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="o">-</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(,</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">9393413</span><span class="p">)])])</span><span class="w"> </span><span class="n">addressed</span><span class="w"> </span><span class="n">to</span><span class="w"></span>
<span class="w">                             </span><span class="kt">PubKeyCredential:</span><span class="w"> </span><span class="n">a2c20c77887ace1cd986193e4e75babd8993cfd56995cd5cfce609c2</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">staking</span><span class="w"> </span><span class="n">credential</span><span class="p">)</span><span class="w"></span>
<span class="w">                         </span><span class="n">total</span><span class="w"> </span><span class="n">collateral</span><span class="kt">:</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(,</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">606587</span><span class="p">)])])</span><span class="w"></span>
<span class="w">                         </span><span class="n">mint</span><span class="kt">:</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="kt">[]</span><span class="p">)</span><span class="w"></span>
<span class="w">                         </span><span class="n">fee</span><span class="kt">:</span><span class="w"> </span><span class="kt">Value</span><span class="w"> </span><span class="p">(</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(,</span><span class="kt">Map</span><span class="w"> </span><span class="p">[(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">404391</span><span class="p">)])])</span><span class="w"></span>
<span class="w">                         </span><span class="n">validity</span><span class="w"> </span><span class="n">range</span><span class="kt">:</span><span class="w"> </span><span class="kt">Interval</span><span class="w"> </span><span class="p">{</span><span class="n">ivFrom</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">LowerBound</span><span class="w"> </span><span class="kt">NegInf</span><span class="w"> </span><span class="kt">True</span><span class="p">,</span><span class="w"> </span><span class="n">ivTo</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">UpperBound</span><span class="w"> </span><span class="kt">PosInf</span><span class="w"> </span><span class="kt">True</span><span class="p">}</span><span class="w"></span>
<span class="w">                         </span><span class="kr">data</span><span class="kt">:</span><span class="w"></span>
<span class="w">                           </span><span class="p">(</span><span class="w"> </span><span class="mi">43492163</span><span class="n">ee71f886ebc65c85f3dfa8db313f00d701b433b539811464d4355873</span><span class="w"></span>
<span class="w">                           </span><span class="p">,</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s">&quot;</span><span class="se">\162\194\f</span><span class="s">w</span><span class="se">\136</span><span class="s">z</span><span class="se">\206\FS\217\134\EM</span><span class="s">&gt;Nu</span><span class="se">\186\189\137\147\207\213</span><span class="s">i</span><span class="se">\149\205\\\252\230\t\194</span><span class="s">&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                           </span><span class="o">&lt;&gt;&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                           </span><span class="o">&lt;&lt;</span><span class="s">&quot;</span><span class="se">\128\164\244</span><span class="s">[V</span><span class="se">\184\141\DC1</span><span class="s">9</span><span class="se">\218</span><span class="s">#</span><span class="se">\188</span><span class="s">L&lt;u</span><span class="se">\236</span><span class="s">m2</span><span class="se">\148</span><span class="s">&lt;</span><span class="se">\b\DEL</span><span class="s">%</span><span class="se">\v\134\EM</span><span class="s">&lt;</span><span class="se">\167</span><span class="s">&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                           </span><span class="o">&lt;&gt;&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                           </span><span class="mi">10000000</span><span class="o">&gt;</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">                         </span><span class="n">redeemers</span><span class="kt">:</span><span class="p">}</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">2</span><span class="kt">:</span><span class="w"> </span><span class="kt">W</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="kt">:</span><span class="w"> </span><span class="kt">Signing</span><span class="w"> </span><span class="n">tx</span><span class="kt">:</span><span class="w"> </span><span class="n">fcef4d121ba88cef5c12d689427e73aec161154190e270c953b1a652037c7533</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">2</span><span class="kt">:</span><span class="w"> </span><span class="kt">W</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="kt">:</span><span class="w"> </span><span class="kt">Submitting</span><span class="w"> </span><span class="n">tx</span><span class="kt">:</span><span class="w"> </span><span class="n">fcef4d121ba88cef5c12d689427e73aec161154190e270c953b1a652037c7533</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">2</span><span class="kt">:</span><span class="w"> </span><span class="kt">W</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="kt">:</span><span class="w"> </span><span class="kt">TxSubmit:</span><span class="w"> </span><span class="n">fcef4d121ba88cef5c12d689427e73aec161154190e270c953b1a652037c7533</span><span class="w"></span>
<span class="p">[</span><span class="kt">INFO</span><span class="p">]</span><span class="w"> </span><span class="kt">Slot</span><span class="w"> </span><span class="mi">2</span><span class="kt">:</span><span class="w"> </span><span class="kt">TxnValidate</span><span class="w"> </span><span class="n">fcef4d121ba88cef5c12d689427e73aec161154190e270c953b1a652037c7533</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="kt">Data</span><span class="w"> </span><span class="n">decoded</span><span class="w"> </span><span class="n">successfully</span><span class="w"></span>
<span class="w">                                                                                            </span><span class="p">,</span><span class="w"> </span><span class="kt">Redeemer</span><span class="w"> </span><span class="n">decoded</span><span class="w"> </span><span class="n">successfully</span><span class="w"></span>
<span class="w">                                                                                            </span><span class="p">,</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">decoded</span><span class="w"> </span><span class="n">successfully</span><span class="w"> </span><span class="p">]</span><span class="w"></span>
<span class="kt">Final</span><span class="w"> </span><span class="n">balances</span><span class="w"></span>
<span class="kt">Wallet</span><span class="w"> </span><span class="mi">7</span><span class="kt">:</span><span class="w"> </span>
<span class="w">    </span><span class="p">{,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">}</span><span class="kt">:</span><span class="w"> </span><span class="mi">100000000</span><span class="w"></span>
<span class="kt">Wallet</span><span class="w"> </span><span class="mi">8</span><span class="kt">:</span><span class="w"> </span>
<span class="w">    </span><span class="p">{,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">}</span><span class="kt">:</span><span class="w"> </span><span class="mi">100000000</span><span class="w"></span>
<span class="kt">Wallet</span><span class="w"> </span><span class="mi">6</span><span class="kt">:</span><span class="w"> </span>
<span class="w">    </span><span class="p">{,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">}</span><span class="kt">:</span><span class="w"> </span><span class="mi">100000000</span><span class="w"></span>
<span class="kt">Wallet</span><span class="w"> </span><span class="mi">4</span><span class="kt">:</span><span class="w"> </span>
<span class="w">    </span><span class="p">{,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">}</span><span class="kt">:</span><span class="w"> </span><span class="mi">100000000</span><span class="w"></span>
<span class="kt">Wallet</span><span class="w"> </span><span class="mi">2</span><span class="kt">:</span><span class="w"> </span>
<span class="w">    </span><span class="p">{,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">}</span><span class="kt">:</span><span class="w"> </span><span class="mi">105000000</span><span class="w"></span>
<span class="kt">Wallet</span><span class="w"> </span><span class="mi">1</span><span class="kt">:</span><span class="w"> </span>
<span class="w">    </span><span class="p">{,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">}</span><span class="kt">:</span><span class="w"> </span><span class="mi">94416688</span><span class="w"></span>
<span class="kt">Wallet</span><span class="w"> </span><span class="mi">10</span><span class="kt">:</span><span class="w"> </span>
<span class="w">    </span><span class="p">{,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">}</span><span class="kt">:</span><span class="w"> </span><span class="mi">100000000</span><span class="w"></span>
<span class="kt">Wallet</span><span class="w"> </span><span class="mi">9</span><span class="kt">:</span><span class="w"> </span>
<span class="w">    </span><span class="p">{,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">}</span><span class="kt">:</span><span class="w"> </span><span class="mi">100000000</span><span class="w"></span>
<span class="kt">Wallet</span><span class="w"> </span><span class="mi">3</span><span class="kt">:</span><span class="w"> </span>
<span class="w">    </span><span class="p">{,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">}</span><span class="kt">:</span><span class="w"> </span><span class="mi">100000000</span><span class="w"></span>
<span class="kt">Wallet</span><span class="w"> </span><span class="mi">5</span><span class="kt">:</span><span class="w"> </span>
<span class="w">    </span><span class="p">{,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">}</span><span class="kt">:</span><span class="w"> </span><span class="mi">100000000</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="exercise">
<h2>Exercise<a class="headerlink" href="#exercise" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Extract the function that assigns funds to each recipient from <code class="docutils literal notranslate"><span class="pre">unlockFunds</span></code> and <code class="docutils literal notranslate"><span class="pre">validateSplit</span></code> to reduce redundancy in the code</p></li>
<li><p>Extend the contract to deal with a list of recipients instead of a fixed number of 2.</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Tutorials" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="basic-apps-constraints.html" class="btn btn-neutral float-right" title="Extending the basic Plutus app with the constraints API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 1980, IOHK.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>